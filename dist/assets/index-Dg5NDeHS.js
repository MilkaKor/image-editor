var tq=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Rqe=tq(($i,Ei)=>{function nq(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Ps=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Tl(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function rq(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var CL={exports:{}},K1={},$L={exports:{}},it={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vm=Symbol.for("react.element"),iq=Symbol.for("react.portal"),sq=Symbol.for("react.fragment"),aq=Symbol.for("react.strict_mode"),oq=Symbol.for("react.profiler"),lq=Symbol.for("react.provider"),cq=Symbol.for("react.context"),uq=Symbol.for("react.forward_ref"),dq=Symbol.for("react.suspense"),fq=Symbol.for("react.memo"),pq=Symbol.for("react.lazy"),FA=Symbol.iterator;function hq(t){return t===null||typeof t!="object"?null:(t=FA&&t[FA]||t["@@iterator"],typeof t=="function"?t:null)}var EL={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},TL=Object.assign,_L={};function bf(t,e,n){this.props=t,this.context=e,this.refs=_L,this.updater=n||EL}bf.prototype.isReactComponent={};bf.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};bf.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function IL(){}IL.prototype=bf.prototype;function YE(t,e,n){this.props=t,this.context=e,this.refs=_L,this.updater=n||EL}var QE=YE.prototype=new IL;QE.constructor=YE;TL(QE,bf.prototype);QE.isPureReactComponent=!0;var LA=Array.isArray,NL=Object.prototype.hasOwnProperty,ZE={current:null},RL={key:!0,ref:!0,__self:!0,__source:!0};function OL(t,e,n){var r,i={},s=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)NL.call(e,r)&&!RL.hasOwnProperty(r)&&(i[r]=e[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var l=Array(o),c=0;c<o;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return{$$typeof:vm,type:t,key:s,ref:a,props:i,_owner:ZE.current}}function mq(t,e){return{$$typeof:vm,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function JE(t){return typeof t=="object"&&t!==null&&t.$$typeof===vm}function gq(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var MA=/\/+/g;function US(t,e){return typeof t=="object"&&t!==null&&t.key!=null?gq(""+t.key):e.toString(36)}function Xv(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case vm:case iq:a=!0}}if(a)return a=t,i=i(a),t=r===""?"."+US(a,0):r,LA(i)?(n="",t!=null&&(n=t.replace(MA,"$&/")+"/"),Xv(i,e,n,"",function(c){return c})):i!=null&&(JE(i)&&(i=mq(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(MA,"$&/")+"/")+t)),e.push(i)),1;if(a=0,r=r===""?".":r+":",LA(t))for(var o=0;o<t.length;o++){s=t[o];var l=r+US(s,o);a+=Xv(s,e,n,l,i)}else if(l=hq(t),typeof l=="function")for(t=l.call(t),o=0;!(s=t.next()).done;)s=s.value,l=r+US(s,o++),a+=Xv(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function ev(t,e,n){if(t==null)return t;var r=[],i=0;return Xv(t,r,"","",function(s){return e.call(n,s,i++)}),r}function yq(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var jr={current:null},Yv={transition:null},vq={ReactCurrentDispatcher:jr,ReactCurrentBatchConfig:Yv,ReactCurrentOwner:ZE};function AL(){throw Error("act(...) is not supported in production builds of React.")}it.Children={map:ev,forEach:function(t,e,n){ev(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ev(t,function(){e++}),e},toArray:function(t){return ev(t,function(e){return e})||[]},only:function(t){if(!JE(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};it.Component=bf;it.Fragment=sq;it.Profiler=oq;it.PureComponent=YE;it.StrictMode=aq;it.Suspense=dq;it.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vq;it.act=AL;it.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=TL({},t.props),i=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=ZE.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(l in e)NL.call(e,l)&&!RL.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){o=Array(l);for(var c=0;c<l;c++)o[c]=arguments[c+2];r.children=o}return{$$typeof:vm,type:t.type,key:i,ref:s,props:r,_owner:a}};it.createContext=function(t){return t={$$typeof:cq,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:lq,_context:t},t.Consumer=t};it.createElement=OL;it.createFactory=function(t){var e=OL.bind(null,t);return e.type=t,e};it.createRef=function(){return{current:null}};it.forwardRef=function(t){return{$$typeof:uq,render:t}};it.isValidElement=JE;it.lazy=function(t){return{$$typeof:pq,_payload:{_status:-1,_result:t},_init:yq}};it.memo=function(t,e){return{$$typeof:fq,type:t,compare:e===void 0?null:e}};it.startTransition=function(t){var e=Yv.transition;Yv.transition={};try{t()}finally{Yv.transition=e}};it.unstable_act=AL;it.useCallback=function(t,e){return jr.current.useCallback(t,e)};it.useContext=function(t){return jr.current.useContext(t)};it.useDebugValue=function(){};it.useDeferredValue=function(t){return jr.current.useDeferredValue(t)};it.useEffect=function(t,e){return jr.current.useEffect(t,e)};it.useId=function(){return jr.current.useId()};it.useImperativeHandle=function(t,e,n){return jr.current.useImperativeHandle(t,e,n)};it.useInsertionEffect=function(t,e){return jr.current.useInsertionEffect(t,e)};it.useLayoutEffect=function(t,e){return jr.current.useLayoutEffect(t,e)};it.useMemo=function(t,e){return jr.current.useMemo(t,e)};it.useReducer=function(t,e,n){return jr.current.useReducer(t,e,n)};it.useRef=function(t){return jr.current.useRef(t)};it.useState=function(t){return jr.current.useState(t)};it.useSyncExternalStore=function(t,e,n){return jr.current.useSyncExternalStore(t,e,n)};it.useTransition=function(){return jr.current.useTransition()};it.version="18.3.1";$L.exports=it;var A=$L.exports;const M=Tl(A);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xq=A,bq=Symbol.for("react.element"),wq=Symbol.for("react.fragment"),Sq=Object.prototype.hasOwnProperty,kq=xq.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Cq={key:!0,ref:!0,__self:!0,__source:!0};function PL(t,e,n){var r,i={},s=null,a=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)Sq.call(e,r)&&!Cq.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:bq,type:t,key:s,ref:a,props:i,_owner:kq.current}}K1.Fragment=wq;K1.jsx=PL;K1.jsxs=PL;CL.exports=K1;var z=CL.exports,xC={},DL={exports:{}},Di={},FL={exports:{}},LL={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(j,Y){var Q=j.length;j.push(Y);e:for(;0<Q;){var ne=Q-1>>>1,le=j[ne];if(0<i(le,Y))j[ne]=Y,j[Q]=le,Q=ne;else break e}}function n(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var Y=j[0],Q=j.pop();if(Q!==Y){j[0]=Q;e:for(var ne=0,le=j.length,ue=le>>>1;ne<ue;){var de=2*(ne+1)-1,pe=j[de],me=de+1,ie=j[me];if(0>i(pe,Q))me<le&&0>i(ie,pe)?(j[ne]=ie,j[me]=Q,ne=me):(j[ne]=pe,j[de]=Q,ne=de);else if(me<le&&0>i(ie,Q))j[ne]=ie,j[me]=Q,ne=me;else break e}}return Y}function i(j,Y){var Q=j.sortIndex-Y.sortIndex;return Q!==0?Q:j.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],c=[],u=1,d=null,f=3,h=!1,g=!1,y=!1,x=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(j){for(var Y=n(c);Y!==null;){if(Y.callback===null)r(c);else if(Y.startTime<=j)r(c),Y.sortIndex=Y.expirationTime,e(l,Y);else break;Y=n(c)}}function k(j){if(y=!1,S(j),!g)if(n(l)!==null)g=!0,q($);else{var Y=n(c);Y!==null&&te(k,Y.startTime-j)}}function $(j,Y){g=!1,y&&(y=!1,v(R),R=-1),h=!0;var Q=f;try{for(S(Y),d=n(l);d!==null&&(!(d.expirationTime>Y)||j&&!B());){var ne=d.callback;if(typeof ne=="function"){d.callback=null,f=d.priorityLevel;var le=ne(d.expirationTime<=Y);Y=t.unstable_now(),typeof le=="function"?d.callback=le:d===n(l)&&r(l),S(Y)}else r(l);d=n(l)}if(d!==null)var ue=!0;else{var de=n(c);de!==null&&te(k,de.startTime-Y),ue=!1}return ue}finally{d=null,f=Q,h=!1}}var T=!1,_=null,R=-1,P=5,O=-1;function B(){return!(t.unstable_now()-O<P)}function H(){if(_!==null){var j=t.unstable_now();O=j;var Y=!0;try{Y=_(!0,j)}finally{Y?V():(T=!1,_=null)}}else T=!1}var V;if(typeof b=="function")V=function(){b(H)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,X=K.port2;K.port1.onmessage=H,V=function(){X.postMessage(null)}}else V=function(){x(H,0)};function q(j){_=j,T||(T=!0,V())}function te(j,Y){R=x(function(){j(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(j){j.callback=null},t.unstable_continueExecution=function(){g||h||(g=!0,q($))},t.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<j?Math.floor(1e3/j):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(j){switch(f){case 1:case 2:case 3:var Y=3;break;default:Y=f}var Q=f;f=Y;try{return j()}finally{f=Q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(j,Y){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var Q=f;f=j;try{return Y()}finally{f=Q}},t.unstable_scheduleCallback=function(j,Y,Q){var ne=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?ne+Q:ne):Q=ne,j){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=Q+le,j={id:u++,callback:Y,priorityLevel:j,startTime:Q,expirationTime:le,sortIndex:-1},Q>ne?(j.sortIndex=Q,e(c,j),n(l)===null&&j===n(c)&&(y?(v(R),R=-1):y=!0,te(k,Q-ne))):(j.sortIndex=le,e(l,j),g||h||(g=!0,q($))),j},t.unstable_shouldYield=B,t.unstable_wrapCallback=function(j){var Y=f;return function(){var Q=f;f=Y;try{return j.apply(this,arguments)}finally{f=Q}}}})(LL);FL.exports=LL;var lh=FL.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $q=A,Ni=lh;function ye(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ML=new Set,Nh={};function eu(t,e){Gd(t,e),Gd(t+"Capture",e)}function Gd(t,e){for(Nh[t]=e,t=0;t<e.length;t++)ML.add(e[t])}var no=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bC=Object.prototype.hasOwnProperty,Eq=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,BA={},zA={};function Tq(t){return bC.call(zA,t)?!0:bC.call(BA,t)?!1:Eq.test(t)?zA[t]=!0:(BA[t]=!0,!1)}function _q(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Iq(t,e,n,r){if(e===null||typeof e>"u"||_q(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Vr(t,e,n,r,i,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var or={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){or[t]=new Vr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];or[e]=new Vr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){or[t]=new Vr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){or[t]=new Vr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){or[t]=new Vr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){or[t]=new Vr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){or[t]=new Vr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){or[t]=new Vr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){or[t]=new Vr(t,5,!1,t.toLowerCase(),null,!1,!1)});var eT=/[\-:]([a-z])/g;function tT(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(eT,tT);or[e]=new Vr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(eT,tT);or[e]=new Vr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(eT,tT);or[e]=new Vr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){or[t]=new Vr(t,1,!1,t.toLowerCase(),null,!1,!1)});or.xlinkHref=new Vr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){or[t]=new Vr(t,1,!1,t.toLowerCase(),null,!0,!0)});function nT(t,e,n,r){var i=or.hasOwnProperty(e)?or[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Iq(e,n,i,r)&&(n=null),r||i===null?Tq(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var mo=$q.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,tv=Symbol.for("react.element"),pd=Symbol.for("react.portal"),hd=Symbol.for("react.fragment"),rT=Symbol.for("react.strict_mode"),wC=Symbol.for("react.profiler"),BL=Symbol.for("react.provider"),zL=Symbol.for("react.context"),iT=Symbol.for("react.forward_ref"),SC=Symbol.for("react.suspense"),kC=Symbol.for("react.suspense_list"),sT=Symbol.for("react.memo"),Uo=Symbol.for("react.lazy"),jL=Symbol.for("react.offscreen"),jA=Symbol.iterator;function Sp(t){return t===null||typeof t!="object"?null:(t=jA&&t[jA]||t["@@iterator"],typeof t=="function"?t:null)}var ln=Object.assign,GS;function Wp(t){if(GS===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);GS=e&&e[1]||""}return`
`+GS+t}var HS=!1;function qS(t,e){if(!t||HS)return"";HS=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||i[a]!==s[o]){var l=`
`+i[a].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=a&&0<=o);break}}}finally{HS=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Wp(t):""}function Nq(t){switch(t.tag){case 5:return Wp(t.type);case 16:return Wp("Lazy");case 13:return Wp("Suspense");case 19:return Wp("SuspenseList");case 0:case 2:case 15:return t=qS(t.type,!1),t;case 11:return t=qS(t.type.render,!1),t;case 1:return t=qS(t.type,!0),t;default:return""}}function CC(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case hd:return"Fragment";case pd:return"Portal";case wC:return"Profiler";case rT:return"StrictMode";case SC:return"Suspense";case kC:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case zL:return(t.displayName||"Context")+".Consumer";case BL:return(t._context.displayName||"Context")+".Provider";case iT:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case sT:return e=t.displayName||null,e!==null?e:CC(t.type)||"Memo";case Uo:e=t._payload,t=t._init;try{return CC(t(e))}catch{}}return null}function Rq(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return CC(e);case 8:return e===rT?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ml(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function VL(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Oq(t){var e=VL(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function nv(t){t._valueTracker||(t._valueTracker=Oq(t))}function WL(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=VL(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function x0(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function $C(t,e){var n=e.checked;return ln({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function VA(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ml(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function UL(t,e){e=e.checked,e!=null&&nT(t,"checked",e,!1)}function EC(t,e){UL(t,e);var n=ml(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?TC(t,e.type,n):e.hasOwnProperty("defaultValue")&&TC(t,e.type,ml(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function WA(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function TC(t,e,n){(e!=="number"||x0(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Up=Array.isArray;function _d(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ml(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function _C(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ye(91));return ln({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function UA(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ye(92));if(Up(n)){if(1<n.length)throw Error(ye(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ml(n)}}function GL(t,e){var n=ml(e.value),r=ml(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function GA(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function HL(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function IC(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?HL(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var rv,qL=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(rv=rv||document.createElement("div"),rv.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=rv.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Rh(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ch={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Aq=["Webkit","ms","Moz","O"];Object.keys(ch).forEach(function(t){Aq.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ch[e]=ch[t]})});function KL(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ch.hasOwnProperty(t)&&ch[t]?(""+e).trim():e+"px"}function XL(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=KL(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var Pq=ln({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function NC(t,e){if(e){if(Pq[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ye(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ye(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ye(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ye(62))}}function RC(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var OC=null;function aT(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var AC=null,Id=null,Nd=null;function HA(t){if(t=wm(t)){if(typeof AC!="function")throw Error(ye(280));var e=t.stateNode;e&&(e=J1(e),AC(t.stateNode,t.type,e))}}function YL(t){Id?Nd?Nd.push(t):Nd=[t]:Id=t}function QL(){if(Id){var t=Id,e=Nd;if(Nd=Id=null,HA(t),e)for(t=0;t<e.length;t++)HA(e[t])}}function ZL(t,e){return t(e)}function JL(){}var KS=!1;function eM(t,e,n){if(KS)return t(e,n);KS=!0;try{return ZL(t,e,n)}finally{KS=!1,(Id!==null||Nd!==null)&&(JL(),QL())}}function Oh(t,e){var n=t.stateNode;if(n===null)return null;var r=J1(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ye(231,e,typeof n));return n}var PC=!1;if(no)try{var kp={};Object.defineProperty(kp,"passive",{get:function(){PC=!0}}),window.addEventListener("test",kp,kp),window.removeEventListener("test",kp,kp)}catch{PC=!1}function Dq(t,e,n,r,i,s,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var uh=!1,b0=null,w0=!1,DC=null,Fq={onError:function(t){uh=!0,b0=t}};function Lq(t,e,n,r,i,s,a,o,l){uh=!1,b0=null,Dq.apply(Fq,arguments)}function Mq(t,e,n,r,i,s,a,o,l){if(Lq.apply(this,arguments),uh){if(uh){var c=b0;uh=!1,b0=null}else throw Error(ye(198));w0||(w0=!0,DC=c)}}function tu(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function tM(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function qA(t){if(tu(t)!==t)throw Error(ye(188))}function Bq(t){var e=t.alternate;if(!e){if(e=tu(t),e===null)throw Error(ye(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return qA(i),t;if(s===r)return qA(i),e;s=s.sibling}throw Error(ye(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,o=i.child;o;){if(o===n){a=!0,n=i,r=s;break}if(o===r){a=!0,r=i,n=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===n){a=!0,n=s,r=i;break}if(o===r){a=!0,r=s,n=i;break}o=o.sibling}if(!a)throw Error(ye(189))}}if(n.alternate!==r)throw Error(ye(190))}if(n.tag!==3)throw Error(ye(188));return n.stateNode.current===n?t:e}function nM(t){return t=Bq(t),t!==null?rM(t):null}function rM(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=rM(t);if(e!==null)return e;t=t.sibling}return null}var iM=Ni.unstable_scheduleCallback,KA=Ni.unstable_cancelCallback,zq=Ni.unstable_shouldYield,jq=Ni.unstable_requestPaint,yn=Ni.unstable_now,Vq=Ni.unstable_getCurrentPriorityLevel,oT=Ni.unstable_ImmediatePriority,sM=Ni.unstable_UserBlockingPriority,S0=Ni.unstable_NormalPriority,Wq=Ni.unstable_LowPriority,aM=Ni.unstable_IdlePriority,X1=null,da=null;function Uq(t){if(da&&typeof da.onCommitFiberRoot=="function")try{da.onCommitFiberRoot(X1,t,void 0,(t.current.flags&128)===128)}catch{}}var Ls=Math.clz32?Math.clz32:qq,Gq=Math.log,Hq=Math.LN2;function qq(t){return t>>>=0,t===0?32:31-(Gq(t)/Hq|0)|0}var iv=64,sv=4194304;function Gp(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function k0(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,a=n&268435455;if(a!==0){var o=a&~i;o!==0?r=Gp(o):(s&=a,s!==0&&(r=Gp(s)))}else a=n&~i,a!==0?r=Gp(a):s!==0&&(r=Gp(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ls(e),i=1<<n,r|=t[n],e&=~i;return r}function Kq(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xq(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-Ls(s),o=1<<a,l=i[a];l===-1?(!(o&n)||o&r)&&(i[a]=Kq(o,e)):l<=e&&(t.expiredLanes|=o),s&=~o}}function FC(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function oM(){var t=iv;return iv<<=1,!(iv&4194240)&&(iv=64),t}function XS(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function xm(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ls(e),t[e]=n}function Yq(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Ls(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function lT(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ls(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var xt=0;function lM(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var cM,cT,uM,dM,fM,LC=!1,av=[],il=null,sl=null,al=null,Ah=new Map,Ph=new Map,qo=[],Qq="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function XA(t,e){switch(t){case"focusin":case"focusout":il=null;break;case"dragenter":case"dragleave":sl=null;break;case"mouseover":case"mouseout":al=null;break;case"pointerover":case"pointerout":Ah.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ph.delete(e.pointerId)}}function Cp(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=wm(e),e!==null&&cT(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Zq(t,e,n,r,i){switch(e){case"focusin":return il=Cp(il,t,e,n,r,i),!0;case"dragenter":return sl=Cp(sl,t,e,n,r,i),!0;case"mouseover":return al=Cp(al,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Ah.set(s,Cp(Ah.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ph.set(s,Cp(Ph.get(s)||null,t,e,n,r,i)),!0}return!1}function pM(t){var e=gc(t.target);if(e!==null){var n=tu(e);if(n!==null){if(e=n.tag,e===13){if(e=tM(n),e!==null){t.blockedOn=e,fM(t.priority,function(){uM(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Qv(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=MC(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);OC=r,n.target.dispatchEvent(r),OC=null}else return e=wm(n),e!==null&&cT(e),t.blockedOn=n,!1;e.shift()}return!0}function YA(t,e,n){Qv(t)&&n.delete(e)}function Jq(){LC=!1,il!==null&&Qv(il)&&(il=null),sl!==null&&Qv(sl)&&(sl=null),al!==null&&Qv(al)&&(al=null),Ah.forEach(YA),Ph.forEach(YA)}function $p(t,e){t.blockedOn===e&&(t.blockedOn=null,LC||(LC=!0,Ni.unstable_scheduleCallback(Ni.unstable_NormalPriority,Jq)))}function Dh(t){function e(i){return $p(i,t)}if(0<av.length){$p(av[0],t);for(var n=1;n<av.length;n++){var r=av[n];r.blockedOn===t&&(r.blockedOn=null)}}for(il!==null&&$p(il,t),sl!==null&&$p(sl,t),al!==null&&$p(al,t),Ah.forEach(e),Ph.forEach(e),n=0;n<qo.length;n++)r=qo[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<qo.length&&(n=qo[0],n.blockedOn===null);)pM(n),n.blockedOn===null&&qo.shift()}var Rd=mo.ReactCurrentBatchConfig,C0=!0;function eK(t,e,n,r){var i=xt,s=Rd.transition;Rd.transition=null;try{xt=1,uT(t,e,n,r)}finally{xt=i,Rd.transition=s}}function tK(t,e,n,r){var i=xt,s=Rd.transition;Rd.transition=null;try{xt=4,uT(t,e,n,r)}finally{xt=i,Rd.transition=s}}function uT(t,e,n,r){if(C0){var i=MC(t,e,n,r);if(i===null)sk(t,e,r,$0,n),XA(t,r);else if(Zq(i,t,e,n,r))r.stopPropagation();else if(XA(t,r),e&4&&-1<Qq.indexOf(t)){for(;i!==null;){var s=wm(i);if(s!==null&&cM(s),s=MC(t,e,n,r),s===null&&sk(t,e,r,$0,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else sk(t,e,r,null,n)}}var $0=null;function MC(t,e,n,r){if($0=null,t=aT(r),t=gc(t),t!==null)if(e=tu(t),e===null)t=null;else if(n=e.tag,n===13){if(t=tM(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return $0=t,null}function hM(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Vq()){case oT:return 1;case sM:return 4;case S0:case Wq:return 16;case aM:return 536870912;default:return 16}default:return 16}}var Zo=null,dT=null,Zv=null;function mM(){if(Zv)return Zv;var t,e=dT,n=e.length,r,i="value"in Zo?Zo.value:Zo.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===i[s-r];r++);return Zv=i.slice(t,1<r?1-r:void 0)}function Jv(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ov(){return!0}function QA(){return!1}function Fi(t){function e(n,r,i,s,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ov:QA,this.isPropagationStopped=QA,this}return ln(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ov)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ov)},persist:function(){},isPersistent:ov}),e}var wf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fT=Fi(wf),bm=ln({},wf,{view:0,detail:0}),nK=Fi(bm),YS,QS,Ep,Y1=ln({},bm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pT,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ep&&(Ep&&t.type==="mousemove"?(YS=t.screenX-Ep.screenX,QS=t.screenY-Ep.screenY):QS=YS=0,Ep=t),YS)},movementY:function(t){return"movementY"in t?t.movementY:QS}}),ZA=Fi(Y1),rK=ln({},Y1,{dataTransfer:0}),iK=Fi(rK),sK=ln({},bm,{relatedTarget:0}),ZS=Fi(sK),aK=ln({},wf,{animationName:0,elapsedTime:0,pseudoElement:0}),oK=Fi(aK),lK=ln({},wf,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),cK=Fi(lK),uK=ln({},wf,{data:0}),JA=Fi(uK),dK={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fK={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pK={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hK(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=pK[t])?!!e[t]:!1}function pT(){return hK}var mK=ln({},bm,{key:function(t){if(t.key){var e=dK[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Jv(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?fK[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pT,charCode:function(t){return t.type==="keypress"?Jv(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Jv(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),gK=Fi(mK),yK=ln({},Y1,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),eP=Fi(yK),vK=ln({},bm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pT}),xK=Fi(vK),bK=ln({},wf,{propertyName:0,elapsedTime:0,pseudoElement:0}),wK=Fi(bK),SK=ln({},Y1,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),kK=Fi(SK),CK=[9,13,27,32],hT=no&&"CompositionEvent"in window,dh=null;no&&"documentMode"in document&&(dh=document.documentMode);var $K=no&&"TextEvent"in window&&!dh,gM=no&&(!hT||dh&&8<dh&&11>=dh),tP=" ",nP=!1;function yM(t,e){switch(t){case"keyup":return CK.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vM(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var md=!1;function EK(t,e){switch(t){case"compositionend":return vM(e);case"keypress":return e.which!==32?null:(nP=!0,tP);case"textInput":return t=e.data,t===tP&&nP?null:t;default:return null}}function TK(t,e){if(md)return t==="compositionend"||!hT&&yM(t,e)?(t=mM(),Zv=dT=Zo=null,md=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return gM&&e.locale!=="ko"?null:e.data;default:return null}}var _K={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rP(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!_K[t.type]:e==="textarea"}function xM(t,e,n,r){YL(r),e=E0(e,"onChange"),0<e.length&&(n=new fT("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var fh=null,Fh=null;function IK(t){NM(t,0)}function Q1(t){var e=vd(t);if(WL(e))return t}function NK(t,e){if(t==="change")return e}var bM=!1;if(no){var JS;if(no){var ek="oninput"in document;if(!ek){var iP=document.createElement("div");iP.setAttribute("oninput","return;"),ek=typeof iP.oninput=="function"}JS=ek}else JS=!1;bM=JS&&(!document.documentMode||9<document.documentMode)}function sP(){fh&&(fh.detachEvent("onpropertychange",wM),Fh=fh=null)}function wM(t){if(t.propertyName==="value"&&Q1(Fh)){var e=[];xM(e,Fh,t,aT(t)),eM(IK,e)}}function RK(t,e,n){t==="focusin"?(sP(),fh=e,Fh=n,fh.attachEvent("onpropertychange",wM)):t==="focusout"&&sP()}function OK(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Q1(Fh)}function AK(t,e){if(t==="click")return Q1(e)}function PK(t,e){if(t==="input"||t==="change")return Q1(e)}function DK(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var js=typeof Object.is=="function"?Object.is:DK;function Lh(t,e){if(js(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!bC.call(e,i)||!js(t[i],e[i]))return!1}return!0}function aP(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function oP(t,e){var n=aP(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=aP(n)}}function SM(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?SM(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function kM(){for(var t=window,e=x0();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=x0(t.document)}return e}function mT(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function FK(t){var e=kM(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&SM(n.ownerDocument.documentElement,n)){if(r!==null&&mT(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=oP(n,s);var a=oP(n,r);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var LK=no&&"documentMode"in document&&11>=document.documentMode,gd=null,BC=null,ph=null,zC=!1;function lP(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;zC||gd==null||gd!==x0(r)||(r=gd,"selectionStart"in r&&mT(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ph&&Lh(ph,r)||(ph=r,r=E0(BC,"onSelect"),0<r.length&&(e=new fT("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=gd)))}function lv(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var yd={animationend:lv("Animation","AnimationEnd"),animationiteration:lv("Animation","AnimationIteration"),animationstart:lv("Animation","AnimationStart"),transitionend:lv("Transition","TransitionEnd")},tk={},CM={};no&&(CM=document.createElement("div").style,"AnimationEvent"in window||(delete yd.animationend.animation,delete yd.animationiteration.animation,delete yd.animationstart.animation),"TransitionEvent"in window||delete yd.transitionend.transition);function Z1(t){if(tk[t])return tk[t];if(!yd[t])return t;var e=yd[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in CM)return tk[t]=e[n];return t}var $M=Z1("animationend"),EM=Z1("animationiteration"),TM=Z1("animationstart"),_M=Z1("transitionend"),IM=new Map,cP="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _l(t,e){IM.set(t,e),eu(e,[t])}for(var nk=0;nk<cP.length;nk++){var rk=cP[nk],MK=rk.toLowerCase(),BK=rk[0].toUpperCase()+rk.slice(1);_l(MK,"on"+BK)}_l($M,"onAnimationEnd");_l(EM,"onAnimationIteration");_l(TM,"onAnimationStart");_l("dblclick","onDoubleClick");_l("focusin","onFocus");_l("focusout","onBlur");_l(_M,"onTransitionEnd");Gd("onMouseEnter",["mouseout","mouseover"]);Gd("onMouseLeave",["mouseout","mouseover"]);Gd("onPointerEnter",["pointerout","pointerover"]);Gd("onPointerLeave",["pointerout","pointerover"]);eu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));eu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));eu("onBeforeInput",["compositionend","keypress","textInput","paste"]);eu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));eu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));eu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zK=new Set("cancel close invalid load scroll toggle".split(" ").concat(Hp));function uP(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Mq(r,e,void 0,t),t.currentTarget=null}function NM(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;uP(i,o,c),s=l}else for(a=0;a<r.length;a++){if(o=r[a],l=o.instance,c=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;uP(i,o,c),s=l}}}if(w0)throw t=DC,w0=!1,DC=null,t}function Vt(t,e){var n=e[GC];n===void 0&&(n=e[GC]=new Set);var r=t+"__bubble";n.has(r)||(RM(e,t,2,!1),n.add(r))}function ik(t,e,n){var r=0;e&&(r|=4),RM(n,t,r,e)}var cv="_reactListening"+Math.random().toString(36).slice(2);function Mh(t){if(!t[cv]){t[cv]=!0,ML.forEach(function(n){n!=="selectionchange"&&(zK.has(n)||ik(n,!1,t),ik(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[cv]||(e[cv]=!0,ik("selectionchange",!1,e))}}function RM(t,e,n,r){switch(hM(e)){case 1:var i=eK;break;case 4:i=tK;break;default:i=uT}n=i.bind(null,e,n,t),i=void 0,!PC||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function sk(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var o=r.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;a=a.return}for(;o!==null;){if(a=gc(o),a===null)return;if(l=a.tag,l===5||l===6){r=s=a;continue e}o=o.parentNode}}r=r.return}eM(function(){var c=s,u=aT(n),d=[];e:{var f=IM.get(t);if(f!==void 0){var h=fT,g=t;switch(t){case"keypress":if(Jv(n)===0)break e;case"keydown":case"keyup":h=gK;break;case"focusin":g="focus",h=ZS;break;case"focusout":g="blur",h=ZS;break;case"beforeblur":case"afterblur":h=ZS;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=ZA;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=iK;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=xK;break;case $M:case EM:case TM:h=oK;break;case _M:h=wK;break;case"scroll":h=nK;break;case"wheel":h=kK;break;case"copy":case"cut":case"paste":h=cK;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=eP}var y=(e&4)!==0,x=!y&&t==="scroll",v=y?f!==null?f+"Capture":null:f;y=[];for(var b=c,S;b!==null;){S=b;var k=S.stateNode;if(S.tag===5&&k!==null&&(S=k,v!==null&&(k=Oh(b,v),k!=null&&y.push(Bh(b,k,S)))),x)break;b=b.return}0<y.length&&(f=new h(f,g,null,n,u),d.push({event:f,listeners:y}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",f&&n!==OC&&(g=n.relatedTarget||n.fromElement)&&(gc(g)||g[ro]))break e;if((h||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,h?(g=n.relatedTarget||n.toElement,h=c,g=g?gc(g):null,g!==null&&(x=tu(g),g!==x||g.tag!==5&&g.tag!==6)&&(g=null)):(h=null,g=c),h!==g)){if(y=ZA,k="onMouseLeave",v="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(y=eP,k="onPointerLeave",v="onPointerEnter",b="pointer"),x=h==null?f:vd(h),S=g==null?f:vd(g),f=new y(k,b+"leave",h,n,u),f.target=x,f.relatedTarget=S,k=null,gc(u)===c&&(y=new y(v,b+"enter",g,n,u),y.target=S,y.relatedTarget=x,k=y),x=k,h&&g)t:{for(y=h,v=g,b=0,S=y;S;S=Mu(S))b++;for(S=0,k=v;k;k=Mu(k))S++;for(;0<b-S;)y=Mu(y),b--;for(;0<S-b;)v=Mu(v),S--;for(;b--;){if(y===v||v!==null&&y===v.alternate)break t;y=Mu(y),v=Mu(v)}y=null}else y=null;h!==null&&dP(d,f,h,y,!1),g!==null&&x!==null&&dP(d,x,g,y,!0)}}e:{if(f=c?vd(c):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var $=NK;else if(rP(f))if(bM)$=PK;else{$=OK;var T=RK}else(h=f.nodeName)&&h.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&($=AK);if($&&($=$(t,c))){xM(d,$,n,u);break e}T&&T(t,f,c),t==="focusout"&&(T=f._wrapperState)&&T.controlled&&f.type==="number"&&TC(f,"number",f.value)}switch(T=c?vd(c):window,t){case"focusin":(rP(T)||T.contentEditable==="true")&&(gd=T,BC=c,ph=null);break;case"focusout":ph=BC=gd=null;break;case"mousedown":zC=!0;break;case"contextmenu":case"mouseup":case"dragend":zC=!1,lP(d,n,u);break;case"selectionchange":if(LK)break;case"keydown":case"keyup":lP(d,n,u)}var _;if(hT)e:{switch(t){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else md?yM(t,n)&&(R="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(R="onCompositionStart");R&&(gM&&n.locale!=="ko"&&(md||R!=="onCompositionStart"?R==="onCompositionEnd"&&md&&(_=mM()):(Zo=u,dT="value"in Zo?Zo.value:Zo.textContent,md=!0)),T=E0(c,R),0<T.length&&(R=new JA(R,t,null,n,u),d.push({event:R,listeners:T}),_?R.data=_:(_=vM(n),_!==null&&(R.data=_)))),(_=$K?EK(t,n):TK(t,n))&&(c=E0(c,"onBeforeInput"),0<c.length&&(u=new JA("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=_))}NM(d,e)})}function Bh(t,e,n){return{instance:t,listener:e,currentTarget:n}}function E0(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Oh(t,n),s!=null&&r.unshift(Bh(t,s,i)),s=Oh(t,e),s!=null&&r.push(Bh(t,s,i))),t=t.return}return r}function Mu(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function dP(t,e,n,r,i){for(var s=e._reactName,a=[];n!==null&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(l!==null&&l===r)break;o.tag===5&&c!==null&&(o=c,i?(l=Oh(n,s),l!=null&&a.unshift(Bh(n,l,o))):i||(l=Oh(n,s),l!=null&&a.push(Bh(n,l,o)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var jK=/\r\n?/g,VK=/\u0000|\uFFFD/g;function fP(t){return(typeof t=="string"?t:""+t).replace(jK,`
`).replace(VK,"")}function uv(t,e,n){if(e=fP(e),fP(t)!==e&&n)throw Error(ye(425))}function T0(){}var jC=null,VC=null;function WC(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var UC=typeof setTimeout=="function"?setTimeout:void 0,WK=typeof clearTimeout=="function"?clearTimeout:void 0,pP=typeof Promise=="function"?Promise:void 0,UK=typeof queueMicrotask=="function"?queueMicrotask:typeof pP<"u"?function(t){return pP.resolve(null).then(t).catch(GK)}:UC;function GK(t){setTimeout(function(){throw t})}function ak(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Dh(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Dh(e)}function ol(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function hP(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Sf=Math.random().toString(36).slice(2),oa="__reactFiber$"+Sf,zh="__reactProps$"+Sf,ro="__reactContainer$"+Sf,GC="__reactEvents$"+Sf,HK="__reactListeners$"+Sf,qK="__reactHandles$"+Sf;function gc(t){var e=t[oa];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ro]||n[oa]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=hP(t);t!==null;){if(n=t[oa])return n;t=hP(t)}return e}t=n,n=t.parentNode}return null}function wm(t){return t=t[oa]||t[ro],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function vd(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ye(33))}function J1(t){return t[zh]||null}var HC=[],xd=-1;function Il(t){return{current:t}}function Gt(t){0>xd||(t.current=HC[xd],HC[xd]=null,xd--)}function Ft(t,e){xd++,HC[xd]=t.current,t.current=e}var gl={},Tr=Il(gl),si=Il(!1),Rc=gl;function Hd(t,e){var n=t.type.contextTypes;if(!n)return gl;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function ai(t){return t=t.childContextTypes,t!=null}function _0(){Gt(si),Gt(Tr)}function mP(t,e,n){if(Tr.current!==gl)throw Error(ye(168));Ft(Tr,e),Ft(si,n)}function OM(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(ye(108,Rq(t)||"Unknown",i));return ln({},n,r)}function I0(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||gl,Rc=Tr.current,Ft(Tr,t),Ft(si,si.current),!0}function gP(t,e,n){var r=t.stateNode;if(!r)throw Error(ye(169));n?(t=OM(t,e,Rc),r.__reactInternalMemoizedMergedChildContext=t,Gt(si),Gt(Tr),Ft(Tr,t)):Gt(si),Ft(si,n)}var Va=null,ex=!1,ok=!1;function AM(t){Va===null?Va=[t]:Va.push(t)}function KK(t){ex=!0,AM(t)}function Nl(){if(!ok&&Va!==null){ok=!0;var t=0,e=xt;try{var n=Va;for(xt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Va=null,ex=!1}catch(i){throw Va!==null&&(Va=Va.slice(t+1)),iM(oT,Nl),i}finally{xt=e,ok=!1}}return null}var bd=[],wd=0,N0=null,R0=0,Yi=[],Qi=0,Oc=null,Xa=1,Ya="";function sc(t,e){bd[wd++]=R0,bd[wd++]=N0,N0=t,R0=e}function PM(t,e,n){Yi[Qi++]=Xa,Yi[Qi++]=Ya,Yi[Qi++]=Oc,Oc=t;var r=Xa;t=Ya;var i=32-Ls(r)-1;r&=~(1<<i),n+=1;var s=32-Ls(e)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Xa=1<<32-Ls(e)+i|n<<i|r,Ya=s+t}else Xa=1<<s|n<<i|r,Ya=t}function gT(t){t.return!==null&&(sc(t,1),PM(t,1,0))}function yT(t){for(;t===N0;)N0=bd[--wd],bd[wd]=null,R0=bd[--wd],bd[wd]=null;for(;t===Oc;)Oc=Yi[--Qi],Yi[Qi]=null,Ya=Yi[--Qi],Yi[Qi]=null,Xa=Yi[--Qi],Yi[Qi]=null}var Ti=null,ki=null,en=!1,Is=null;function DM(t,e){var n=ts(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function yP(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ti=t,ki=ol(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ti=t,ki=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Oc!==null?{id:Xa,overflow:Ya}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ts(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ti=t,ki=null,!0):!1;default:return!1}}function qC(t){return(t.mode&1)!==0&&(t.flags&128)===0}function KC(t){if(en){var e=ki;if(e){var n=e;if(!yP(t,e)){if(qC(t))throw Error(ye(418));e=ol(n.nextSibling);var r=Ti;e&&yP(t,e)?DM(r,n):(t.flags=t.flags&-4097|2,en=!1,Ti=t)}}else{if(qC(t))throw Error(ye(418));t.flags=t.flags&-4097|2,en=!1,Ti=t}}}function vP(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ti=t}function dv(t){if(t!==Ti)return!1;if(!en)return vP(t),en=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!WC(t.type,t.memoizedProps)),e&&(e=ki)){if(qC(t))throw FM(),Error(ye(418));for(;e;)DM(t,e),e=ol(e.nextSibling)}if(vP(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ye(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ki=ol(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ki=null}}else ki=Ti?ol(t.stateNode.nextSibling):null;return!0}function FM(){for(var t=ki;t;)t=ol(t.nextSibling)}function qd(){ki=Ti=null,en=!1}function vT(t){Is===null?Is=[t]:Is.push(t)}var XK=mo.ReactCurrentBatchConfig;function Tp(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ye(309));var r=n.stateNode}if(!r)throw Error(ye(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var o=i.refs;a===null?delete o[s]:o[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(ye(284));if(!n._owner)throw Error(ye(290,t))}return t}function fv(t,e){throw t=Object.prototype.toString.call(e),Error(ye(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function xP(t){var e=t._init;return e(t._payload)}function LM(t){function e(v,b){if(t){var S=v.deletions;S===null?(v.deletions=[b],v.flags|=16):S.push(b)}}function n(v,b){if(!t)return null;for(;b!==null;)e(v,b),b=b.sibling;return null}function r(v,b){for(v=new Map;b!==null;)b.key!==null?v.set(b.key,b):v.set(b.index,b),b=b.sibling;return v}function i(v,b){return v=dl(v,b),v.index=0,v.sibling=null,v}function s(v,b,S){return v.index=S,t?(S=v.alternate,S!==null?(S=S.index,S<b?(v.flags|=2,b):S):(v.flags|=2,b)):(v.flags|=1048576,b)}function a(v){return t&&v.alternate===null&&(v.flags|=2),v}function o(v,b,S,k){return b===null||b.tag!==6?(b=hk(S,v.mode,k),b.return=v,b):(b=i(b,S),b.return=v,b)}function l(v,b,S,k){var $=S.type;return $===hd?u(v,b,S.props.children,k,S.key):b!==null&&(b.elementType===$||typeof $=="object"&&$!==null&&$.$$typeof===Uo&&xP($)===b.type)?(k=i(b,S.props),k.ref=Tp(v,b,S),k.return=v,k):(k=a0(S.type,S.key,S.props,null,v.mode,k),k.ref=Tp(v,b,S),k.return=v,k)}function c(v,b,S,k){return b===null||b.tag!==4||b.stateNode.containerInfo!==S.containerInfo||b.stateNode.implementation!==S.implementation?(b=mk(S,v.mode,k),b.return=v,b):(b=i(b,S.children||[]),b.return=v,b)}function u(v,b,S,k,$){return b===null||b.tag!==7?(b=Cc(S,v.mode,k,$),b.return=v,b):(b=i(b,S),b.return=v,b)}function d(v,b,S){if(typeof b=="string"&&b!==""||typeof b=="number")return b=hk(""+b,v.mode,S),b.return=v,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case tv:return S=a0(b.type,b.key,b.props,null,v.mode,S),S.ref=Tp(v,null,b),S.return=v,S;case pd:return b=mk(b,v.mode,S),b.return=v,b;case Uo:var k=b._init;return d(v,k(b._payload),S)}if(Up(b)||Sp(b))return b=Cc(b,v.mode,S,null),b.return=v,b;fv(v,b)}return null}function f(v,b,S,k){var $=b!==null?b.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return $!==null?null:o(v,b,""+S,k);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case tv:return S.key===$?l(v,b,S,k):null;case pd:return S.key===$?c(v,b,S,k):null;case Uo:return $=S._init,f(v,b,$(S._payload),k)}if(Up(S)||Sp(S))return $!==null?null:u(v,b,S,k,null);fv(v,S)}return null}function h(v,b,S,k,$){if(typeof k=="string"&&k!==""||typeof k=="number")return v=v.get(S)||null,o(b,v,""+k,$);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case tv:return v=v.get(k.key===null?S:k.key)||null,l(b,v,k,$);case pd:return v=v.get(k.key===null?S:k.key)||null,c(b,v,k,$);case Uo:var T=k._init;return h(v,b,S,T(k._payload),$)}if(Up(k)||Sp(k))return v=v.get(S)||null,u(b,v,k,$,null);fv(b,k)}return null}function g(v,b,S,k){for(var $=null,T=null,_=b,R=b=0,P=null;_!==null&&R<S.length;R++){_.index>R?(P=_,_=null):P=_.sibling;var O=f(v,_,S[R],k);if(O===null){_===null&&(_=P);break}t&&_&&O.alternate===null&&e(v,_),b=s(O,b,R),T===null?$=O:T.sibling=O,T=O,_=P}if(R===S.length)return n(v,_),en&&sc(v,R),$;if(_===null){for(;R<S.length;R++)_=d(v,S[R],k),_!==null&&(b=s(_,b,R),T===null?$=_:T.sibling=_,T=_);return en&&sc(v,R),$}for(_=r(v,_);R<S.length;R++)P=h(_,v,R,S[R],k),P!==null&&(t&&P.alternate!==null&&_.delete(P.key===null?R:P.key),b=s(P,b,R),T===null?$=P:T.sibling=P,T=P);return t&&_.forEach(function(B){return e(v,B)}),en&&sc(v,R),$}function y(v,b,S,k){var $=Sp(S);if(typeof $!="function")throw Error(ye(150));if(S=$.call(S),S==null)throw Error(ye(151));for(var T=$=null,_=b,R=b=0,P=null,O=S.next();_!==null&&!O.done;R++,O=S.next()){_.index>R?(P=_,_=null):P=_.sibling;var B=f(v,_,O.value,k);if(B===null){_===null&&(_=P);break}t&&_&&B.alternate===null&&e(v,_),b=s(B,b,R),T===null?$=B:T.sibling=B,T=B,_=P}if(O.done)return n(v,_),en&&sc(v,R),$;if(_===null){for(;!O.done;R++,O=S.next())O=d(v,O.value,k),O!==null&&(b=s(O,b,R),T===null?$=O:T.sibling=O,T=O);return en&&sc(v,R),$}for(_=r(v,_);!O.done;R++,O=S.next())O=h(_,v,R,O.value,k),O!==null&&(t&&O.alternate!==null&&_.delete(O.key===null?R:O.key),b=s(O,b,R),T===null?$=O:T.sibling=O,T=O);return t&&_.forEach(function(H){return e(v,H)}),en&&sc(v,R),$}function x(v,b,S,k){if(typeof S=="object"&&S!==null&&S.type===hd&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case tv:e:{for(var $=S.key,T=b;T!==null;){if(T.key===$){if($=S.type,$===hd){if(T.tag===7){n(v,T.sibling),b=i(T,S.props.children),b.return=v,v=b;break e}}else if(T.elementType===$||typeof $=="object"&&$!==null&&$.$$typeof===Uo&&xP($)===T.type){n(v,T.sibling),b=i(T,S.props),b.ref=Tp(v,T,S),b.return=v,v=b;break e}n(v,T);break}else e(v,T);T=T.sibling}S.type===hd?(b=Cc(S.props.children,v.mode,k,S.key),b.return=v,v=b):(k=a0(S.type,S.key,S.props,null,v.mode,k),k.ref=Tp(v,b,S),k.return=v,v=k)}return a(v);case pd:e:{for(T=S.key;b!==null;){if(b.key===T)if(b.tag===4&&b.stateNode.containerInfo===S.containerInfo&&b.stateNode.implementation===S.implementation){n(v,b.sibling),b=i(b,S.children||[]),b.return=v,v=b;break e}else{n(v,b);break}else e(v,b);b=b.sibling}b=mk(S,v.mode,k),b.return=v,v=b}return a(v);case Uo:return T=S._init,x(v,b,T(S._payload),k)}if(Up(S))return g(v,b,S,k);if(Sp(S))return y(v,b,S,k);fv(v,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,b!==null&&b.tag===6?(n(v,b.sibling),b=i(b,S),b.return=v,v=b):(n(v,b),b=hk(S,v.mode,k),b.return=v,v=b),a(v)):n(v,b)}return x}var Kd=LM(!0),MM=LM(!1),O0=Il(null),A0=null,Sd=null,xT=null;function bT(){xT=Sd=A0=null}function wT(t){var e=O0.current;Gt(O0),t._currentValue=e}function XC(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Od(t,e){A0=t,xT=Sd=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ni=!0),t.firstContext=null)}function cs(t){var e=t._currentValue;if(xT!==t)if(t={context:t,memoizedValue:e,next:null},Sd===null){if(A0===null)throw Error(ye(308));Sd=t,A0.dependencies={lanes:0,firstContext:t}}else Sd=Sd.next=t;return e}var yc=null;function ST(t){yc===null?yc=[t]:yc.push(t)}function BM(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,ST(e)):(n.next=i.next,i.next=n),e.interleaved=n,io(t,r)}function io(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Go=!1;function kT(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zM(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ja(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ll(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,dt&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,io(t,n)}return i=r.interleaved,i===null?(e.next=e,ST(r)):(e.next=i.next,i.next=e),r.interleaved=e,io(t,n)}function e0(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,lT(t,n)}}function bP(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function P0(t,e,n,r){var i=t.updateQueue;Go=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var l=o,c=l.next;l.next=null,a===null?s=c:a.next=c,a=l;var u=t.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==a&&(o===null?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;a=0,u=c=l=null,o=s;do{var f=o.lane,h=o.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:h,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var g=t,y=o;switch(f=e,h=n,y.tag){case 1:if(g=y.payload,typeof g=="function"){d=g.call(h,d,f);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=y.payload,f=typeof g=="function"?g.call(h,d,f):g,f==null)break e;d=ln({},d,f);break e;case 2:Go=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[o]:f.push(o))}else h={eventTime:h,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(c=u=h,l=d):u=u.next=h,a|=f;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;f=o,o=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(u===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Pc|=a,t.lanes=a,t.memoizedState=d}}function wP(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ye(191,i));i.call(r)}}}var Sm={},fa=Il(Sm),jh=Il(Sm),Vh=Il(Sm);function vc(t){if(t===Sm)throw Error(ye(174));return t}function CT(t,e){switch(Ft(Vh,e),Ft(jh,t),Ft(fa,Sm),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:IC(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=IC(e,t)}Gt(fa),Ft(fa,e)}function Xd(){Gt(fa),Gt(jh),Gt(Vh)}function jM(t){vc(Vh.current);var e=vc(fa.current),n=IC(e,t.type);e!==n&&(Ft(jh,t),Ft(fa,n))}function $T(t){jh.current===t&&(Gt(fa),Gt(jh))}var an=Il(0);function D0(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var lk=[];function ET(){for(var t=0;t<lk.length;t++)lk[t]._workInProgressVersionPrimary=null;lk.length=0}var t0=mo.ReactCurrentDispatcher,ck=mo.ReactCurrentBatchConfig,Ac=0,on=null,On=null,Vn=null,F0=!1,hh=!1,Wh=0,YK=0;function yr(){throw Error(ye(321))}function TT(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!js(t[n],e[n]))return!1;return!0}function _T(t,e,n,r,i,s){if(Ac=s,on=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,t0.current=t===null||t.memoizedState===null?eX:tX,t=n(r,i),hh){s=0;do{if(hh=!1,Wh=0,25<=s)throw Error(ye(301));s+=1,Vn=On=null,e.updateQueue=null,t0.current=nX,t=n(r,i)}while(hh)}if(t0.current=L0,e=On!==null&&On.next!==null,Ac=0,Vn=On=on=null,F0=!1,e)throw Error(ye(300));return t}function IT(){var t=Wh!==0;return Wh=0,t}function ra(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vn===null?on.memoizedState=Vn=t:Vn=Vn.next=t,Vn}function us(){if(On===null){var t=on.alternate;t=t!==null?t.memoizedState:null}else t=On.next;var e=Vn===null?on.memoizedState:Vn.next;if(e!==null)Vn=e,On=t;else{if(t===null)throw Error(ye(310));On=t,t={memoizedState:On.memoizedState,baseState:On.baseState,baseQueue:On.baseQueue,queue:On.queue,next:null},Vn===null?on.memoizedState=Vn=t:Vn=Vn.next=t}return Vn}function Uh(t,e){return typeof e=="function"?e(t):e}function uk(t){var e=us(),n=e.queue;if(n===null)throw Error(ye(311));n.lastRenderedReducer=t;var r=On,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var o=a=null,l=null,c=s;do{var u=c.lane;if((Ac&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(o=l=d,a=r):l=l.next=d,on.lanes|=u,Pc|=u}c=c.next}while(c!==null&&c!==s);l===null?a=r:l.next=o,js(r,e.memoizedState)||(ni=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,on.lanes|=s,Pc|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function dk(t){var e=us(),n=e.queue;if(n===null)throw Error(ye(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do s=t(s,a.action),a=a.next;while(a!==i);js(s,e.memoizedState)||(ni=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function VM(){}function WM(t,e){var n=on,r=us(),i=e(),s=!js(r.memoizedState,i);if(s&&(r.memoizedState=i,ni=!0),r=r.queue,NT(HM.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Vn!==null&&Vn.memoizedState.tag&1){if(n.flags|=2048,Gh(9,GM.bind(null,n,r,i,e),void 0,null),Un===null)throw Error(ye(349));Ac&30||UM(n,e,i)}return i}function UM(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=on.updateQueue,e===null?(e={lastEffect:null,stores:null},on.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function GM(t,e,n,r){e.value=n,e.getSnapshot=r,qM(e)&&KM(t)}function HM(t,e,n){return n(function(){qM(e)&&KM(t)})}function qM(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!js(t,n)}catch{return!0}}function KM(t){var e=io(t,1);e!==null&&Ms(e,t,1,-1)}function SP(t){var e=ra();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Uh,lastRenderedState:t},e.queue=t,t=t.dispatch=JK.bind(null,on,t),[e.memoizedState,t]}function Gh(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=on.updateQueue,e===null?(e={lastEffect:null,stores:null},on.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function XM(){return us().memoizedState}function n0(t,e,n,r){var i=ra();on.flags|=t,i.memoizedState=Gh(1|e,n,void 0,r===void 0?null:r)}function tx(t,e,n,r){var i=us();r=r===void 0?null:r;var s=void 0;if(On!==null){var a=On.memoizedState;if(s=a.destroy,r!==null&&TT(r,a.deps)){i.memoizedState=Gh(e,n,s,r);return}}on.flags|=t,i.memoizedState=Gh(1|e,n,s,r)}function kP(t,e){return n0(8390656,8,t,e)}function NT(t,e){return tx(2048,8,t,e)}function YM(t,e){return tx(4,2,t,e)}function QM(t,e){return tx(4,4,t,e)}function ZM(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function JM(t,e,n){return n=n!=null?n.concat([t]):null,tx(4,4,ZM.bind(null,e,t),n)}function RT(){}function e5(t,e){var n=us();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&TT(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function t5(t,e){var n=us();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&TT(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function n5(t,e,n){return Ac&21?(js(n,e)||(n=oM(),on.lanes|=n,Pc|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ni=!0),t.memoizedState=n)}function QK(t,e){var n=xt;xt=n!==0&&4>n?n:4,t(!0);var r=ck.transition;ck.transition={};try{t(!1),e()}finally{xt=n,ck.transition=r}}function r5(){return us().memoizedState}function ZK(t,e,n){var r=ul(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},i5(t))s5(e,n);else if(n=BM(t,e,n,r),n!==null){var i=Mr();Ms(n,t,r,i),a5(n,e,r)}}function JK(t,e,n){var r=ul(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(i5(t))s5(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,js(o,a)){var l=e.interleaved;l===null?(i.next=i,ST(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=BM(t,e,i,r),n!==null&&(i=Mr(),Ms(n,t,r,i),a5(n,e,r))}}function i5(t){var e=t.alternate;return t===on||e!==null&&e===on}function s5(t,e){hh=F0=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function a5(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,lT(t,n)}}var L0={readContext:cs,useCallback:yr,useContext:yr,useEffect:yr,useImperativeHandle:yr,useInsertionEffect:yr,useLayoutEffect:yr,useMemo:yr,useReducer:yr,useRef:yr,useState:yr,useDebugValue:yr,useDeferredValue:yr,useTransition:yr,useMutableSource:yr,useSyncExternalStore:yr,useId:yr,unstable_isNewReconciler:!1},eX={readContext:cs,useCallback:function(t,e){return ra().memoizedState=[t,e===void 0?null:e],t},useContext:cs,useEffect:kP,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,n0(4194308,4,ZM.bind(null,e,t),n)},useLayoutEffect:function(t,e){return n0(4194308,4,t,e)},useInsertionEffect:function(t,e){return n0(4,2,t,e)},useMemo:function(t,e){var n=ra();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ra();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=ZK.bind(null,on,t),[r.memoizedState,t]},useRef:function(t){var e=ra();return t={current:t},e.memoizedState=t},useState:SP,useDebugValue:RT,useDeferredValue:function(t){return ra().memoizedState=t},useTransition:function(){var t=SP(!1),e=t[0];return t=QK.bind(null,t[1]),ra().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=on,i=ra();if(en){if(n===void 0)throw Error(ye(407));n=n()}else{if(n=e(),Un===null)throw Error(ye(349));Ac&30||UM(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,kP(HM.bind(null,r,s,t),[t]),r.flags|=2048,Gh(9,GM.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=ra(),e=Un.identifierPrefix;if(en){var n=Ya,r=Xa;n=(r&~(1<<32-Ls(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Wh++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=YK++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},tX={readContext:cs,useCallback:e5,useContext:cs,useEffect:NT,useImperativeHandle:JM,useInsertionEffect:YM,useLayoutEffect:QM,useMemo:t5,useReducer:uk,useRef:XM,useState:function(){return uk(Uh)},useDebugValue:RT,useDeferredValue:function(t){var e=us();return n5(e,On.memoizedState,t)},useTransition:function(){var t=uk(Uh)[0],e=us().memoizedState;return[t,e]},useMutableSource:VM,useSyncExternalStore:WM,useId:r5,unstable_isNewReconciler:!1},nX={readContext:cs,useCallback:e5,useContext:cs,useEffect:NT,useImperativeHandle:JM,useInsertionEffect:YM,useLayoutEffect:QM,useMemo:t5,useReducer:dk,useRef:XM,useState:function(){return dk(Uh)},useDebugValue:RT,useDeferredValue:function(t){var e=us();return On===null?e.memoizedState=t:n5(e,On.memoizedState,t)},useTransition:function(){var t=dk(Uh)[0],e=us().memoizedState;return[t,e]},useMutableSource:VM,useSyncExternalStore:WM,useId:r5,unstable_isNewReconciler:!1};function Ts(t,e){if(t&&t.defaultProps){e=ln({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function YC(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ln({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var nx={isMounted:function(t){return(t=t._reactInternals)?tu(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Mr(),i=ul(t),s=Ja(r,i);s.payload=e,n!=null&&(s.callback=n),e=ll(t,s,i),e!==null&&(Ms(e,t,i,r),e0(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Mr(),i=ul(t),s=Ja(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=ll(t,s,i),e!==null&&(Ms(e,t,i,r),e0(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Mr(),r=ul(t),i=Ja(n,r);i.tag=2,e!=null&&(i.callback=e),e=ll(t,i,r),e!==null&&(Ms(e,t,r,n),e0(e,t,r))}};function CP(t,e,n,r,i,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,a):e.prototype&&e.prototype.isPureReactComponent?!Lh(n,r)||!Lh(i,s):!0}function o5(t,e,n){var r=!1,i=gl,s=e.contextType;return typeof s=="object"&&s!==null?s=cs(s):(i=ai(e)?Rc:Tr.current,r=e.contextTypes,s=(r=r!=null)?Hd(t,i):gl),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=nx,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function $P(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&nx.enqueueReplaceState(e,e.state,null)}function QC(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},kT(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=cs(s):(s=ai(e)?Rc:Tr.current,i.context=Hd(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(YC(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&nx.enqueueReplaceState(i,i.state,null),P0(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Yd(t,e){try{var n="",r=e;do n+=Nq(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function fk(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function ZC(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var rX=typeof WeakMap=="function"?WeakMap:Map;function l5(t,e,n){n=Ja(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){B0||(B0=!0,l$=r),ZC(t,e)},n}function c5(t,e,n){n=Ja(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){ZC(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){ZC(t,e),typeof r!="function"&&(cl===null?cl=new Set([this]):cl.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function EP(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new rX;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=yX.bind(null,t,e,n),e.then(t,t))}function TP(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function _P(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ja(-1,1),e.tag=2,ll(n,e,1))),n.lanes|=1),t)}var iX=mo.ReactCurrentOwner,ni=!1;function Pr(t,e,n,r){e.child=t===null?MM(e,null,n,r):Kd(e,t.child,n,r)}function IP(t,e,n,r,i){n=n.render;var s=e.ref;return Od(e,i),r=_T(t,e,n,r,s,i),n=IT(),t!==null&&!ni?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,so(t,e,i)):(en&&n&&gT(e),e.flags|=1,Pr(t,e,r,i),e.child)}function NP(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!BT(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,u5(t,e,s,r,i)):(t=a0(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:Lh,n(a,r)&&t.ref===e.ref)return so(t,e,i)}return e.flags|=1,t=dl(s,r),t.ref=e.ref,t.return=e,e.child=t}function u5(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Lh(s,r)&&t.ref===e.ref)if(ni=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(ni=!0);else return e.lanes=t.lanes,so(t,e,i)}return JC(t,e,n,r,i)}function d5(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ft(Cd,wi),wi|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ft(Cd,wi),wi|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ft(Cd,wi),wi|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Ft(Cd,wi),wi|=r;return Pr(t,e,i,n),e.child}function f5(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function JC(t,e,n,r,i){var s=ai(n)?Rc:Tr.current;return s=Hd(e,s),Od(e,i),n=_T(t,e,n,r,s,i),r=IT(),t!==null&&!ni?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,so(t,e,i)):(en&&r&&gT(e),e.flags|=1,Pr(t,e,n,i),e.child)}function RP(t,e,n,r,i){if(ai(n)){var s=!0;I0(e)}else s=!1;if(Od(e,i),e.stateNode===null)r0(t,e),o5(e,n,r),QC(e,n,r,i),r=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,c=n.contextType;typeof c=="object"&&c!==null?c=cs(c):(c=ai(n)?Rc:Tr.current,c=Hd(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==r||l!==c)&&$P(e,a,r,c),Go=!1;var f=e.memoizedState;a.state=f,P0(e,r,a,i),l=e.memoizedState,o!==r||f!==l||si.current||Go?(typeof u=="function"&&(YC(e,n,u,r),l=e.memoizedState),(o=Go||CP(e,n,o,r,f,l,c))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),a.props=r,a.state=l,a.context=c,r=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,zM(t,e),o=e.memoizedProps,c=e.type===e.elementType?o:Ts(e.type,o),a.props=c,d=e.pendingProps,f=a.context,l=n.contextType,typeof l=="object"&&l!==null?l=cs(l):(l=ai(n)?Rc:Tr.current,l=Hd(e,l));var h=n.getDerivedStateFromProps;(u=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==d||f!==l)&&$P(e,a,r,l),Go=!1,f=e.memoizedState,a.state=f,P0(e,r,a,i);var g=e.memoizedState;o!==d||f!==g||si.current||Go?(typeof h=="function"&&(YC(e,n,h,r),g=e.memoizedState),(c=Go||CP(e,n,c,r,f,g,l)||!1)?(u||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,g,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,g,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),a.props=r,a.state=g,a.context=l,r=c):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return e$(t,e,n,r,s,i)}function e$(t,e,n,r,i,s){f5(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return i&&gP(e,n,!1),so(t,e,s);r=e.stateNode,iX.current=e;var o=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=Kd(e,t.child,null,s),e.child=Kd(e,null,o,s)):Pr(t,e,o,s),e.memoizedState=r.state,i&&gP(e,n,!0),e.child}function p5(t){var e=t.stateNode;e.pendingContext?mP(t,e.pendingContext,e.pendingContext!==e.context):e.context&&mP(t,e.context,!1),CT(t,e.containerInfo)}function OP(t,e,n,r,i){return qd(),vT(i),e.flags|=256,Pr(t,e,n,r),e.child}var t$={dehydrated:null,treeContext:null,retryLane:0};function n$(t){return{baseLanes:t,cachePool:null,transitions:null}}function h5(t,e,n){var r=e.pendingProps,i=an.current,s=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(i&2)!==0),o?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ft(an,i&1),t===null)return KC(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,s?(r=e.mode,s=e.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=sx(a,r,0,null),t=Cc(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=n$(n),e.memoizedState=t$,t):OT(e,a));if(i=t.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return sX(t,e,a,r,o,i,n);if(s){s=r.fallback,a=e.mode,i=t.child,o=i.sibling;var l={mode:"hidden",children:r.children};return!(a&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=dl(i,l),r.subtreeFlags=i.subtreeFlags&14680064),o!==null?s=dl(o,s):(s=Cc(s,a,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,a=t.child.memoizedState,a=a===null?n$(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~n,e.memoizedState=t$,r}return s=t.child,t=s.sibling,r=dl(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function OT(t,e){return e=sx({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function pv(t,e,n,r){return r!==null&&vT(r),Kd(e,t.child,null,n),t=OT(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function sX(t,e,n,r,i,s,a){if(n)return e.flags&256?(e.flags&=-257,r=fk(Error(ye(422))),pv(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=sx({mode:"visible",children:r.children},i,0,null),s=Cc(s,i,a,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Kd(e,t.child,null,a),e.child.memoizedState=n$(a),e.memoizedState=t$,s);if(!(e.mode&1))return pv(t,e,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var o=r.dgst;return r=o,s=Error(ye(419)),r=fk(s,r,void 0),pv(t,e,a,r)}if(o=(a&t.childLanes)!==0,ni||o){if(r=Un,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,io(t,i),Ms(r,t,i,-1))}return MT(),r=fk(Error(ye(421))),pv(t,e,a,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=vX.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,ki=ol(i.nextSibling),Ti=e,en=!0,Is=null,t!==null&&(Yi[Qi++]=Xa,Yi[Qi++]=Ya,Yi[Qi++]=Oc,Xa=t.id,Ya=t.overflow,Oc=e),e=OT(e,r.children),e.flags|=4096,e)}function AP(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),XC(t.return,e,n)}function pk(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function m5(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Pr(t,e,r.children,n),r=an.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&AP(t,n,e);else if(t.tag===19)AP(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ft(an,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&D0(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),pk(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&D0(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}pk(e,!0,n,null,s);break;case"together":pk(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function r0(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function so(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Pc|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ye(153));if(e.child!==null){for(t=e.child,n=dl(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=dl(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function aX(t,e,n){switch(e.tag){case 3:p5(e),qd();break;case 5:jM(e);break;case 1:ai(e.type)&&I0(e);break;case 4:CT(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ft(O0,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ft(an,an.current&1),e.flags|=128,null):n&e.child.childLanes?h5(t,e,n):(Ft(an,an.current&1),t=so(t,e,n),t!==null?t.sibling:null);Ft(an,an.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return m5(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ft(an,an.current),r)break;return null;case 22:case 23:return e.lanes=0,d5(t,e,n)}return so(t,e,n)}var g5,r$,y5,v5;g5=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};r$=function(){};y5=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,vc(fa.current);var s=null;switch(n){case"input":i=$C(t,i),r=$C(t,r),s=[];break;case"select":i=ln({},i,{value:void 0}),r=ln({},r,{value:void 0}),s=[];break;case"textarea":i=_C(t,i),r=_C(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=T0)}NC(n,r);var a;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var o=i[c];for(a in o)o.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Nh.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(o=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==o&&(l!=null||o!=null))if(c==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Nh.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Vt("scroll",t),s||o===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};v5=function(t,e,n,r){n!==r&&(e.flags|=4)};function _p(t,e){if(!en)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function vr(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function oX(t,e,n){var r=e.pendingProps;switch(yT(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vr(e),null;case 1:return ai(e.type)&&_0(),vr(e),null;case 3:return r=e.stateNode,Xd(),Gt(si),Gt(Tr),ET(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(dv(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Is!==null&&(d$(Is),Is=null))),r$(t,e),vr(e),null;case 5:$T(e);var i=vc(Vh.current);if(n=e.type,t!==null&&e.stateNode!=null)y5(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ye(166));return vr(e),null}if(t=vc(fa.current),dv(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[oa]=e,r[zh]=s,t=(e.mode&1)!==0,n){case"dialog":Vt("cancel",r),Vt("close",r);break;case"iframe":case"object":case"embed":Vt("load",r);break;case"video":case"audio":for(i=0;i<Hp.length;i++)Vt(Hp[i],r);break;case"source":Vt("error",r);break;case"img":case"image":case"link":Vt("error",r),Vt("load",r);break;case"details":Vt("toggle",r);break;case"input":VA(r,s),Vt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Vt("invalid",r);break;case"textarea":UA(r,s),Vt("invalid",r)}NC(n,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?r.textContent!==o&&(s.suppressHydrationWarning!==!0&&uv(r.textContent,o,t),i=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&uv(r.textContent,o,t),i=["children",""+o]):Nh.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&Vt("scroll",r)}switch(n){case"input":nv(r),WA(r,s,!0);break;case"textarea":nv(r),GA(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=T0)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=HL(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[oa]=e,t[zh]=r,g5(t,e,!1,!1),e.stateNode=t;e:{switch(a=RC(n,r),n){case"dialog":Vt("cancel",t),Vt("close",t),i=r;break;case"iframe":case"object":case"embed":Vt("load",t),i=r;break;case"video":case"audio":for(i=0;i<Hp.length;i++)Vt(Hp[i],t);i=r;break;case"source":Vt("error",t),i=r;break;case"img":case"image":case"link":Vt("error",t),Vt("load",t),i=r;break;case"details":Vt("toggle",t),i=r;break;case"input":VA(t,r),i=$C(t,r),Vt("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=ln({},r,{value:void 0}),Vt("invalid",t);break;case"textarea":UA(t,r),i=_C(t,r),Vt("invalid",t);break;default:i=r}NC(n,i),o=i;for(s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="style"?XL(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&qL(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Rh(t,l):typeof l=="number"&&Rh(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Nh.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Vt("scroll",t):l!=null&&nT(t,s,l,a))}switch(n){case"input":nv(t),WA(t,r,!1);break;case"textarea":nv(t),GA(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ml(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?_d(t,!!r.multiple,s,!1):r.defaultValue!=null&&_d(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=T0)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return vr(e),null;case 6:if(t&&e.stateNode!=null)v5(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ye(166));if(n=vc(Vh.current),vc(fa.current),dv(e)){if(r=e.stateNode,n=e.memoizedProps,r[oa]=e,(s=r.nodeValue!==n)&&(t=Ti,t!==null))switch(t.tag){case 3:uv(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&uv(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[oa]=e,e.stateNode=r}return vr(e),null;case 13:if(Gt(an),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(en&&ki!==null&&e.mode&1&&!(e.flags&128))FM(),qd(),e.flags|=98560,s=!1;else if(s=dv(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(ye(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ye(317));s[oa]=e}else qd(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;vr(e),s=!1}else Is!==null&&(d$(Is),Is=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||an.current&1?Pn===0&&(Pn=3):MT())),e.updateQueue!==null&&(e.flags|=4),vr(e),null);case 4:return Xd(),r$(t,e),t===null&&Mh(e.stateNode.containerInfo),vr(e),null;case 10:return wT(e.type._context),vr(e),null;case 17:return ai(e.type)&&_0(),vr(e),null;case 19:if(Gt(an),s=e.memoizedState,s===null)return vr(e),null;if(r=(e.flags&128)!==0,a=s.rendering,a===null)if(r)_p(s,!1);else{if(Pn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=D0(t),a!==null){for(e.flags|=128,_p(s,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ft(an,an.current&1|2),e.child}t=t.sibling}s.tail!==null&&yn()>Qd&&(e.flags|=128,r=!0,_p(s,!1),e.lanes=4194304)}else{if(!r)if(t=D0(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),_p(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!en)return vr(e),null}else 2*yn()-s.renderingStartTime>Qd&&n!==1073741824&&(e.flags|=128,r=!0,_p(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(n=s.last,n!==null?n.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=yn(),e.sibling=null,n=an.current,Ft(an,r?n&1|2:n&1),e):(vr(e),null);case 22:case 23:return LT(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?wi&1073741824&&(vr(e),e.subtreeFlags&6&&(e.flags|=8192)):vr(e),null;case 24:return null;case 25:return null}throw Error(ye(156,e.tag))}function lX(t,e){switch(yT(e),e.tag){case 1:return ai(e.type)&&_0(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Xd(),Gt(si),Gt(Tr),ET(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return $T(e),null;case 13:if(Gt(an),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ye(340));qd()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Gt(an),null;case 4:return Xd(),null;case 10:return wT(e.type._context),null;case 22:case 23:return LT(),null;case 24:return null;default:return null}}var hv=!1,wr=!1,cX=typeof WeakSet=="function"?WeakSet:Set,Ie=null;function kd(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){dn(t,e,r)}else n.current=null}function i$(t,e,n){try{n()}catch(r){dn(t,e,r)}}var PP=!1;function uX(t,e){if(jC=C0,t=kM(),mT(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,o=-1,l=-1,c=0,u=0,d=t,f=null;t:for(;;){for(var h;d!==n||i!==0&&d.nodeType!==3||(o=a+i),d!==s||r!==0&&d.nodeType!==3||(l=a+r),d.nodeType===3&&(a+=d.nodeValue.length),(h=d.firstChild)!==null;)f=d,d=h;for(;;){if(d===t)break t;if(f===n&&++c===i&&(o=a),f===s&&++u===r&&(l=a),(h=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=h}n=o===-1||l===-1?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(VC={focusedElem:t,selectionRange:n},C0=!1,Ie=e;Ie!==null;)if(e=Ie,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ie=t;else for(;Ie!==null;){e=Ie;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var y=g.memoizedProps,x=g.memoizedState,v=e.stateNode,b=v.getSnapshotBeforeUpdate(e.elementType===e.type?y:Ts(e.type,y),x);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ye(163))}}catch(k){dn(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,Ie=t;break}Ie=e.return}return g=PP,PP=!1,g}function mh(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&i$(e,n,s)}i=i.next}while(i!==r)}}function rx(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function s$(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function x5(t){var e=t.alternate;e!==null&&(t.alternate=null,x5(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[oa],delete e[zh],delete e[GC],delete e[HK],delete e[qK])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function b5(t){return t.tag===5||t.tag===3||t.tag===4}function DP(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||b5(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function a$(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=T0));else if(r!==4&&(t=t.child,t!==null))for(a$(t,e,n),t=t.sibling;t!==null;)a$(t,e,n),t=t.sibling}function o$(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(o$(t,e,n),t=t.sibling;t!==null;)o$(t,e,n),t=t.sibling}var tr=null,_s=!1;function zo(t,e,n){for(n=n.child;n!==null;)w5(t,e,n),n=n.sibling}function w5(t,e,n){if(da&&typeof da.onCommitFiberUnmount=="function")try{da.onCommitFiberUnmount(X1,n)}catch{}switch(n.tag){case 5:wr||kd(n,e);case 6:var r=tr,i=_s;tr=null,zo(t,e,n),tr=r,_s=i,tr!==null&&(_s?(t=tr,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):tr.removeChild(n.stateNode));break;case 18:tr!==null&&(_s?(t=tr,n=n.stateNode,t.nodeType===8?ak(t.parentNode,n):t.nodeType===1&&ak(t,n),Dh(t)):ak(tr,n.stateNode));break;case 4:r=tr,i=_s,tr=n.stateNode.containerInfo,_s=!0,zo(t,e,n),tr=r,_s=i;break;case 0:case 11:case 14:case 15:if(!wr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&i$(n,e,a),i=i.next}while(i!==r)}zo(t,e,n);break;case 1:if(!wr&&(kd(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){dn(n,e,o)}zo(t,e,n);break;case 21:zo(t,e,n);break;case 22:n.mode&1?(wr=(r=wr)||n.memoizedState!==null,zo(t,e,n),wr=r):zo(t,e,n);break;default:zo(t,e,n)}}function FP(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new cX),e.forEach(function(r){var i=xX.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function $s(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:tr=o.stateNode,_s=!1;break e;case 3:tr=o.stateNode.containerInfo,_s=!0;break e;case 4:tr=o.stateNode.containerInfo,_s=!0;break e}o=o.return}if(tr===null)throw Error(ye(160));w5(s,a,i),tr=null,_s=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){dn(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)S5(e,t),e=e.sibling}function S5(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if($s(e,t),ta(t),r&4){try{mh(3,t,t.return),rx(3,t)}catch(y){dn(t,t.return,y)}try{mh(5,t,t.return)}catch(y){dn(t,t.return,y)}}break;case 1:$s(e,t),ta(t),r&512&&n!==null&&kd(n,n.return);break;case 5:if($s(e,t),ta(t),r&512&&n!==null&&kd(n,n.return),t.flags&32){var i=t.stateNode;try{Rh(i,"")}catch(y){dn(t,t.return,y)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,a=n!==null?n.memoizedProps:s,o=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&UL(i,s),RC(o,a);var c=RC(o,s);for(a=0;a<l.length;a+=2){var u=l[a],d=l[a+1];u==="style"?XL(i,d):u==="dangerouslySetInnerHTML"?qL(i,d):u==="children"?Rh(i,d):nT(i,u,d,c)}switch(o){case"input":EC(i,s);break;case"textarea":GL(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?_d(i,!!s.multiple,h,!1):f!==!!s.multiple&&(s.defaultValue!=null?_d(i,!!s.multiple,s.defaultValue,!0):_d(i,!!s.multiple,s.multiple?[]:"",!1))}i[zh]=s}catch(y){dn(t,t.return,y)}}break;case 6:if($s(e,t),ta(t),r&4){if(t.stateNode===null)throw Error(ye(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(y){dn(t,t.return,y)}}break;case 3:if($s(e,t),ta(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Dh(e.containerInfo)}catch(y){dn(t,t.return,y)}break;case 4:$s(e,t),ta(t);break;case 13:$s(e,t),ta(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(DT=yn())),r&4&&FP(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(wr=(c=wr)||u,$s(e,t),wr=c):$s(e,t),ta(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(Ie=t,u=t.child;u!==null;){for(d=Ie=u;Ie!==null;){switch(f=Ie,h=f.child,f.tag){case 0:case 11:case 14:case 15:mh(4,f,f.return);break;case 1:kd(f,f.return);var g=f.stateNode;if(typeof g.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(y){dn(r,n,y)}}break;case 5:kd(f,f.return);break;case 22:if(f.memoizedState!==null){MP(d);continue}}h!==null?(h.return=f,Ie=h):MP(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=d.stateNode,l=d.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=KL("display",a))}catch(y){dn(t,t.return,y)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(y){dn(t,t.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:$s(e,t),ta(t),r&4&&FP(t);break;case 21:break;default:$s(e,t),ta(t)}}function ta(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(b5(n)){var r=n;break e}n=n.return}throw Error(ye(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Rh(i,""),r.flags&=-33);var s=DP(t);o$(t,s,i);break;case 3:case 4:var a=r.stateNode.containerInfo,o=DP(t);a$(t,o,a);break;default:throw Error(ye(161))}}catch(l){dn(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function dX(t,e,n){Ie=t,k5(t)}function k5(t,e,n){for(var r=(t.mode&1)!==0;Ie!==null;){var i=Ie,s=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||hv;if(!a){var o=i.alternate,l=o!==null&&o.memoizedState!==null||wr;o=hv;var c=wr;if(hv=a,(wr=l)&&!c)for(Ie=i;Ie!==null;)a=Ie,l=a.child,a.tag===22&&a.memoizedState!==null?BP(i):l!==null?(l.return=a,Ie=l):BP(i);for(;s!==null;)Ie=s,k5(s),s=s.sibling;Ie=i,hv=o,wr=c}LP(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Ie=s):LP(t)}}function LP(t){for(;Ie!==null;){var e=Ie;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:wr||rx(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!wr)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Ts(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&wP(e,s,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}wP(e,a,n)}break;case 5:var o=e.stateNode;if(n===null&&e.flags&4){n=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Dh(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ye(163))}wr||e.flags&512&&s$(e)}catch(f){dn(e,e.return,f)}}if(e===t){Ie=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ie=n;break}Ie=e.return}}function MP(t){for(;Ie!==null;){var e=Ie;if(e===t){Ie=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ie=n;break}Ie=e.return}}function BP(t){for(;Ie!==null;){var e=Ie;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{rx(4,e)}catch(l){dn(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){dn(e,i,l)}}var s=e.return;try{s$(e)}catch(l){dn(e,s,l)}break;case 5:var a=e.return;try{s$(e)}catch(l){dn(e,a,l)}}}catch(l){dn(e,e.return,l)}if(e===t){Ie=null;break}var o=e.sibling;if(o!==null){o.return=e.return,Ie=o;break}Ie=e.return}}var fX=Math.ceil,M0=mo.ReactCurrentDispatcher,AT=mo.ReactCurrentOwner,os=mo.ReactCurrentBatchConfig,dt=0,Un=null,Sn=null,rr=0,wi=0,Cd=Il(0),Pn=0,Hh=null,Pc=0,ix=0,PT=0,gh=null,ei=null,DT=0,Qd=1/0,ja=null,B0=!1,l$=null,cl=null,mv=!1,Jo=null,z0=0,yh=0,c$=null,i0=-1,s0=0;function Mr(){return dt&6?yn():i0!==-1?i0:i0=yn()}function ul(t){return t.mode&1?dt&2&&rr!==0?rr&-rr:XK.transition!==null?(s0===0&&(s0=oM()),s0):(t=xt,t!==0||(t=window.event,t=t===void 0?16:hM(t.type)),t):1}function Ms(t,e,n,r){if(50<yh)throw yh=0,c$=null,Error(ye(185));xm(t,n,r),(!(dt&2)||t!==Un)&&(t===Un&&(!(dt&2)&&(ix|=n),Pn===4&&Ko(t,rr)),oi(t,r),n===1&&dt===0&&!(e.mode&1)&&(Qd=yn()+500,ex&&Nl()))}function oi(t,e){var n=t.callbackNode;Xq(t,e);var r=k0(t,t===Un?rr:0);if(r===0)n!==null&&KA(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&KA(n),e===1)t.tag===0?KK(zP.bind(null,t)):AM(zP.bind(null,t)),UK(function(){!(dt&6)&&Nl()}),n=null;else{switch(lM(r)){case 1:n=oT;break;case 4:n=sM;break;case 16:n=S0;break;case 536870912:n=aM;break;default:n=S0}n=R5(n,C5.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function C5(t,e){if(i0=-1,s0=0,dt&6)throw Error(ye(327));var n=t.callbackNode;if(Ad()&&t.callbackNode!==n)return null;var r=k0(t,t===Un?rr:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=j0(t,r);else{e=r;var i=dt;dt|=2;var s=E5();(Un!==t||rr!==e)&&(ja=null,Qd=yn()+500,kc(t,e));do try{mX();break}catch(o){$5(t,o)}while(!0);bT(),M0.current=s,dt=i,Sn!==null?e=0:(Un=null,rr=0,e=Pn)}if(e!==0){if(e===2&&(i=FC(t),i!==0&&(r=i,e=u$(t,i))),e===1)throw n=Hh,kc(t,0),Ko(t,r),oi(t,yn()),n;if(e===6)Ko(t,r);else{if(i=t.current.alternate,!(r&30)&&!pX(i)&&(e=j0(t,r),e===2&&(s=FC(t),s!==0&&(r=s,e=u$(t,s))),e===1))throw n=Hh,kc(t,0),Ko(t,r),oi(t,yn()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(ye(345));case 2:ac(t,ei,ja);break;case 3:if(Ko(t,r),(r&130023424)===r&&(e=DT+500-yn(),10<e)){if(k0(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Mr(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=UC(ac.bind(null,t,ei,ja),e);break}ac(t,ei,ja);break;case 4:if(Ko(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var a=31-Ls(r);s=1<<a,a=e[a],a>i&&(i=a),r&=~s}if(r=i,r=yn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*fX(r/1960))-r,10<r){t.timeoutHandle=UC(ac.bind(null,t,ei,ja),r);break}ac(t,ei,ja);break;case 5:ac(t,ei,ja);break;default:throw Error(ye(329))}}}return oi(t,yn()),t.callbackNode===n?C5.bind(null,t):null}function u$(t,e){var n=gh;return t.current.memoizedState.isDehydrated&&(kc(t,e).flags|=256),t=j0(t,e),t!==2&&(e=ei,ei=n,e!==null&&d$(e)),t}function d$(t){ei===null?ei=t:ei.push.apply(ei,t)}function pX(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!js(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ko(t,e){for(e&=~PT,e&=~ix,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ls(e),r=1<<n;t[n]=-1,e&=~r}}function zP(t){if(dt&6)throw Error(ye(327));Ad();var e=k0(t,0);if(!(e&1))return oi(t,yn()),null;var n=j0(t,e);if(t.tag!==0&&n===2){var r=FC(t);r!==0&&(e=r,n=u$(t,r))}if(n===1)throw n=Hh,kc(t,0),Ko(t,e),oi(t,yn()),n;if(n===6)throw Error(ye(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ac(t,ei,ja),oi(t,yn()),null}function FT(t,e){var n=dt;dt|=1;try{return t(e)}finally{dt=n,dt===0&&(Qd=yn()+500,ex&&Nl())}}function Dc(t){Jo!==null&&Jo.tag===0&&!(dt&6)&&Ad();var e=dt;dt|=1;var n=os.transition,r=xt;try{if(os.transition=null,xt=1,t)return t()}finally{xt=r,os.transition=n,dt=e,!(dt&6)&&Nl()}}function LT(){wi=Cd.current,Gt(Cd)}function kc(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,WK(n)),Sn!==null)for(n=Sn.return;n!==null;){var r=n;switch(yT(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&_0();break;case 3:Xd(),Gt(si),Gt(Tr),ET();break;case 5:$T(r);break;case 4:Xd();break;case 13:Gt(an);break;case 19:Gt(an);break;case 10:wT(r.type._context);break;case 22:case 23:LT()}n=n.return}if(Un=t,Sn=t=dl(t.current,null),rr=wi=e,Pn=0,Hh=null,PT=ix=Pc=0,ei=gh=null,yc!==null){for(e=0;e<yc.length;e++)if(n=yc[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var a=s.next;s.next=i,r.next=a}n.pending=r}yc=null}return t}function $5(t,e){do{var n=Sn;try{if(bT(),t0.current=L0,F0){for(var r=on.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}F0=!1}if(Ac=0,Vn=On=on=null,hh=!1,Wh=0,AT.current=null,n===null||n.return===null){Pn=1,Hh=e,Sn=null;break}e:{var s=t,a=n.return,o=n,l=e;if(e=rr,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=o,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var h=TP(a);if(h!==null){h.flags&=-257,_P(h,a,o,s,e),h.mode&1&&EP(s,c,e),e=h,l=c;var g=e.updateQueue;if(g===null){var y=new Set;y.add(l),e.updateQueue=y}else g.add(l);break e}else{if(!(e&1)){EP(s,c,e),MT();break e}l=Error(ye(426))}}else if(en&&o.mode&1){var x=TP(a);if(x!==null){!(x.flags&65536)&&(x.flags|=256),_P(x,a,o,s,e),vT(Yd(l,o));break e}}s=l=Yd(l,o),Pn!==4&&(Pn=2),gh===null?gh=[s]:gh.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=l5(s,l,e);bP(s,v);break e;case 1:o=l;var b=s.type,S=s.stateNode;if(!(s.flags&128)&&(typeof b.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(cl===null||!cl.has(S)))){s.flags|=65536,e&=-e,s.lanes|=e;var k=c5(s,o,e);bP(s,k);break e}}s=s.return}while(s!==null)}_5(n)}catch($){e=$,Sn===n&&n!==null&&(Sn=n=n.return);continue}break}while(!0)}function E5(){var t=M0.current;return M0.current=L0,t===null?L0:t}function MT(){(Pn===0||Pn===3||Pn===2)&&(Pn=4),Un===null||!(Pc&268435455)&&!(ix&268435455)||Ko(Un,rr)}function j0(t,e){var n=dt;dt|=2;var r=E5();(Un!==t||rr!==e)&&(ja=null,kc(t,e));do try{hX();break}catch(i){$5(t,i)}while(!0);if(bT(),dt=n,M0.current=r,Sn!==null)throw Error(ye(261));return Un=null,rr=0,Pn}function hX(){for(;Sn!==null;)T5(Sn)}function mX(){for(;Sn!==null&&!zq();)T5(Sn)}function T5(t){var e=N5(t.alternate,t,wi);t.memoizedProps=t.pendingProps,e===null?_5(t):Sn=e,AT.current=null}function _5(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=lX(n,e),n!==null){n.flags&=32767,Sn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Pn=6,Sn=null;return}}else if(n=oX(n,e,wi),n!==null){Sn=n;return}if(e=e.sibling,e!==null){Sn=e;return}Sn=e=t}while(e!==null);Pn===0&&(Pn=5)}function ac(t,e,n){var r=xt,i=os.transition;try{os.transition=null,xt=1,gX(t,e,n,r)}finally{os.transition=i,xt=r}return null}function gX(t,e,n,r){do Ad();while(Jo!==null);if(dt&6)throw Error(ye(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ye(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(Yq(t,s),t===Un&&(Sn=Un=null,rr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||mv||(mv=!0,R5(S0,function(){return Ad(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=os.transition,os.transition=null;var a=xt;xt=1;var o=dt;dt|=4,AT.current=null,uX(t,n),S5(n,t),FK(VC),C0=!!jC,VC=jC=null,t.current=n,dX(n),jq(),dt=o,xt=a,os.transition=s}else t.current=n;if(mv&&(mv=!1,Jo=t,z0=i),s=t.pendingLanes,s===0&&(cl=null),Uq(n.stateNode),oi(t,yn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(B0)throw B0=!1,t=l$,l$=null,t;return z0&1&&t.tag!==0&&Ad(),s=t.pendingLanes,s&1?t===c$?yh++:(yh=0,c$=t):yh=0,Nl(),null}function Ad(){if(Jo!==null){var t=lM(z0),e=os.transition,n=xt;try{if(os.transition=null,xt=16>t?16:t,Jo===null)var r=!1;else{if(t=Jo,Jo=null,z0=0,dt&6)throw Error(ye(331));var i=dt;for(dt|=4,Ie=t.current;Ie!==null;){var s=Ie,a=s.child;if(Ie.flags&16){var o=s.deletions;if(o!==null){for(var l=0;l<o.length;l++){var c=o[l];for(Ie=c;Ie!==null;){var u=Ie;switch(u.tag){case 0:case 11:case 15:mh(8,u,s)}var d=u.child;if(d!==null)d.return=u,Ie=d;else for(;Ie!==null;){u=Ie;var f=u.sibling,h=u.return;if(x5(u),u===c){Ie=null;break}if(f!==null){f.return=h,Ie=f;break}Ie=h}}}var g=s.alternate;if(g!==null){var y=g.child;if(y!==null){g.child=null;do{var x=y.sibling;y.sibling=null,y=x}while(y!==null)}}Ie=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,Ie=a;else e:for(;Ie!==null;){if(s=Ie,s.flags&2048)switch(s.tag){case 0:case 11:case 15:mh(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,Ie=v;break e}Ie=s.return}}var b=t.current;for(Ie=b;Ie!==null;){a=Ie;var S=a.child;if(a.subtreeFlags&2064&&S!==null)S.return=a,Ie=S;else e:for(a=b;Ie!==null;){if(o=Ie,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:rx(9,o)}}catch($){dn(o,o.return,$)}if(o===a){Ie=null;break e}var k=o.sibling;if(k!==null){k.return=o.return,Ie=k;break e}Ie=o.return}}if(dt=i,Nl(),da&&typeof da.onPostCommitFiberRoot=="function")try{da.onPostCommitFiberRoot(X1,t)}catch{}r=!0}return r}finally{xt=n,os.transition=e}}return!1}function jP(t,e,n){e=Yd(n,e),e=l5(t,e,1),t=ll(t,e,1),e=Mr(),t!==null&&(xm(t,1,e),oi(t,e))}function dn(t,e,n){if(t.tag===3)jP(t,t,n);else for(;e!==null;){if(e.tag===3){jP(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(cl===null||!cl.has(r))){t=Yd(n,t),t=c5(e,t,1),e=ll(e,t,1),t=Mr(),e!==null&&(xm(e,1,t),oi(e,t));break}}e=e.return}}function yX(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Mr(),t.pingedLanes|=t.suspendedLanes&n,Un===t&&(rr&n)===n&&(Pn===4||Pn===3&&(rr&130023424)===rr&&500>yn()-DT?kc(t,0):PT|=n),oi(t,e)}function I5(t,e){e===0&&(t.mode&1?(e=sv,sv<<=1,!(sv&130023424)&&(sv=4194304)):e=1);var n=Mr();t=io(t,e),t!==null&&(xm(t,e,n),oi(t,n))}function vX(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),I5(t,n)}function xX(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ye(314))}r!==null&&r.delete(e),I5(t,n)}var N5;N5=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||si.current)ni=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ni=!1,aX(t,e,n);ni=!!(t.flags&131072)}else ni=!1,en&&e.flags&1048576&&PM(e,R0,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;r0(t,e),t=e.pendingProps;var i=Hd(e,Tr.current);Od(e,n),i=_T(null,e,r,t,i,n);var s=IT();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ai(r)?(s=!0,I0(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,kT(e),i.updater=nx,e.stateNode=i,i._reactInternals=e,QC(e,r,t,n),e=e$(null,e,r,!0,s,n)):(e.tag=0,en&&s&&gT(e),Pr(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(r0(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=wX(r),t=Ts(r,t),i){case 0:e=JC(null,e,r,t,n);break e;case 1:e=RP(null,e,r,t,n);break e;case 11:e=IP(null,e,r,t,n);break e;case 14:e=NP(null,e,r,Ts(r.type,t),n);break e}throw Error(ye(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ts(r,i),JC(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ts(r,i),RP(t,e,r,i,n);case 3:e:{if(p5(e),t===null)throw Error(ye(387));r=e.pendingProps,s=e.memoizedState,i=s.element,zM(t,e),P0(e,r,null,n);var a=e.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Yd(Error(ye(423)),e),e=OP(t,e,r,n,i);break e}else if(r!==i){i=Yd(Error(ye(424)),e),e=OP(t,e,r,n,i);break e}else for(ki=ol(e.stateNode.containerInfo.firstChild),Ti=e,en=!0,Is=null,n=MM(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(qd(),r===i){e=so(t,e,n);break e}Pr(t,e,r,n)}e=e.child}return e;case 5:return jM(e),t===null&&KC(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,a=i.children,WC(r,i)?a=null:s!==null&&WC(r,s)&&(e.flags|=32),f5(t,e),Pr(t,e,a,n),e.child;case 6:return t===null&&KC(e),null;case 13:return h5(t,e,n);case 4:return CT(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Kd(e,null,r,n):Pr(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ts(r,i),IP(t,e,r,i,n);case 7:return Pr(t,e,e.pendingProps,n),e.child;case 8:return Pr(t,e,e.pendingProps.children,n),e.child;case 12:return Pr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,Ft(O0,r._currentValue),r._currentValue=a,s!==null)if(js(s.value,a)){if(s.children===i.children&&!si.current){e=so(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var l=o.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Ja(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),XC(s.return,n,e),o.lanes|=n;break}l=l.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(ye(341));a.lanes|=n,o=a.alternate,o!==null&&(o.lanes|=n),XC(a,n,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}Pr(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Od(e,n),i=cs(i),r=r(i),e.flags|=1,Pr(t,e,r,n),e.child;case 14:return r=e.type,i=Ts(r,e.pendingProps),i=Ts(r.type,i),NP(t,e,r,i,n);case 15:return u5(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ts(r,i),r0(t,e),e.tag=1,ai(r)?(t=!0,I0(e)):t=!1,Od(e,n),o5(e,r,i),QC(e,r,i,n),e$(null,e,r,!0,t,n);case 19:return m5(t,e,n);case 22:return d5(t,e,n)}throw Error(ye(156,e.tag))};function R5(t,e){return iM(t,e)}function bX(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ts(t,e,n,r){return new bX(t,e,n,r)}function BT(t){return t=t.prototype,!(!t||!t.isReactComponent)}function wX(t){if(typeof t=="function")return BT(t)?1:0;if(t!=null){if(t=t.$$typeof,t===iT)return 11;if(t===sT)return 14}return 2}function dl(t,e){var n=t.alternate;return n===null?(n=ts(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function a0(t,e,n,r,i,s){var a=2;if(r=t,typeof t=="function")BT(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case hd:return Cc(n.children,i,s,e);case rT:a=8,i|=8;break;case wC:return t=ts(12,n,e,i|2),t.elementType=wC,t.lanes=s,t;case SC:return t=ts(13,n,e,i),t.elementType=SC,t.lanes=s,t;case kC:return t=ts(19,n,e,i),t.elementType=kC,t.lanes=s,t;case jL:return sx(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case BL:a=10;break e;case zL:a=9;break e;case iT:a=11;break e;case sT:a=14;break e;case Uo:a=16,r=null;break e}throw Error(ye(130,t==null?t:typeof t,""))}return e=ts(a,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Cc(t,e,n,r){return t=ts(7,t,r,e),t.lanes=n,t}function sx(t,e,n,r){return t=ts(22,t,r,e),t.elementType=jL,t.lanes=n,t.stateNode={isHidden:!1},t}function hk(t,e,n){return t=ts(6,t,null,e),t.lanes=n,t}function mk(t,e,n){return e=ts(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function SX(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=XS(0),this.expirationTimes=XS(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=XS(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zT(t,e,n,r,i,s,a,o,l){return t=new SX(t,e,n,o,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=ts(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},kT(s),t}function kX(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:pd,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function O5(t){if(!t)return gl;t=t._reactInternals;e:{if(tu(t)!==t||t.tag!==1)throw Error(ye(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ai(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ye(171))}if(t.tag===1){var n=t.type;if(ai(n))return OM(t,n,e)}return e}function A5(t,e,n,r,i,s,a,o,l){return t=zT(n,r,!0,t,i,s,a,o,l),t.context=O5(null),n=t.current,r=Mr(),i=ul(n),s=Ja(r,i),s.callback=e??null,ll(n,s,i),t.current.lanes=i,xm(t,i,r),oi(t,r),t}function ax(t,e,n,r){var i=e.current,s=Mr(),a=ul(i);return n=O5(n),e.context===null?e.context=n:e.pendingContext=n,e=Ja(s,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ll(i,e,a),t!==null&&(Ms(t,i,a,s),e0(t,i,a)),a}function V0(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function VP(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function jT(t,e){VP(t,e),(t=t.alternate)&&VP(t,e)}function CX(){return null}var P5=typeof reportError=="function"?reportError:function(t){console.error(t)};function VT(t){this._internalRoot=t}ox.prototype.render=VT.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ye(409));ax(t,e,null,null)};ox.prototype.unmount=VT.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Dc(function(){ax(null,t,null,null)}),e[ro]=null}};function ox(t){this._internalRoot=t}ox.prototype.unstable_scheduleHydration=function(t){if(t){var e=dM();t={blockedOn:null,target:t,priority:e};for(var n=0;n<qo.length&&e!==0&&e<qo[n].priority;n++);qo.splice(n,0,t),n===0&&pM(t)}};function WT(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function lx(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function WP(){}function $X(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=V0(a);s.call(c)}}var a=A5(e,r,t,0,null,!1,!1,"",WP);return t._reactRootContainer=a,t[ro]=a.current,Mh(t.nodeType===8?t.parentNode:t),Dc(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var o=r;r=function(){var c=V0(l);o.call(c)}}var l=zT(t,0,!1,null,null,!1,!1,"",WP);return t._reactRootContainer=l,t[ro]=l.current,Mh(t.nodeType===8?t.parentNode:t),Dc(function(){ax(e,l,n,r)}),l}function cx(t,e,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var o=i;i=function(){var l=V0(a);o.call(l)}}ax(e,a,t,i)}else a=$X(n,e,t,i,r);return V0(a)}cM=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Gp(e.pendingLanes);n!==0&&(lT(e,n|1),oi(e,yn()),!(dt&6)&&(Qd=yn()+500,Nl()))}break;case 13:Dc(function(){var r=io(t,1);if(r!==null){var i=Mr();Ms(r,t,1,i)}}),jT(t,1)}};cT=function(t){if(t.tag===13){var e=io(t,134217728);if(e!==null){var n=Mr();Ms(e,t,134217728,n)}jT(t,134217728)}};uM=function(t){if(t.tag===13){var e=ul(t),n=io(t,e);if(n!==null){var r=Mr();Ms(n,t,e,r)}jT(t,e)}};dM=function(){return xt};fM=function(t,e){var n=xt;try{return xt=t,e()}finally{xt=n}};AC=function(t,e,n){switch(e){case"input":if(EC(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=J1(r);if(!i)throw Error(ye(90));WL(r),EC(r,i)}}}break;case"textarea":GL(t,n);break;case"select":e=n.value,e!=null&&_d(t,!!n.multiple,e,!1)}};ZL=FT;JL=Dc;var EX={usingClientEntryPoint:!1,Events:[wm,vd,J1,YL,QL,FT]},Ip={findFiberByHostInstance:gc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},TX={bundleType:Ip.bundleType,version:Ip.version,rendererPackageName:Ip.rendererPackageName,rendererConfig:Ip.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:mo.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=nM(t),t===null?null:t.stateNode},findFiberByHostInstance:Ip.findFiberByHostInstance||CX,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gv.isDisabled&&gv.supportsFiber)try{X1=gv.inject(TX),da=gv}catch{}}Di.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=EX;Di.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!WT(e))throw Error(ye(200));return kX(t,e,null,n)};Di.createRoot=function(t,e){if(!WT(t))throw Error(ye(299));var n=!1,r="",i=P5;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=zT(t,1,!1,null,null,n,!1,r,i),t[ro]=e.current,Mh(t.nodeType===8?t.parentNode:t),new VT(e)};Di.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ye(188)):(t=Object.keys(t).join(","),Error(ye(268,t)));return t=nM(e),t=t===null?null:t.stateNode,t};Di.flushSync=function(t){return Dc(t)};Di.hydrate=function(t,e,n){if(!lx(e))throw Error(ye(200));return cx(null,t,e,!0,n)};Di.hydrateRoot=function(t,e,n){if(!WT(t))throw Error(ye(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",a=P5;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=A5(e,null,t,1,n??null,i,!1,s,a),t[ro]=e.current,Mh(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new ox(e)};Di.render=function(t,e,n){if(!lx(e))throw Error(ye(200));return cx(null,t,e,!1,n)};Di.unmountComponentAtNode=function(t){if(!lx(t))throw Error(ye(40));return t._reactRootContainer?(Dc(function(){cx(null,null,t,!1,function(){t._reactRootContainer=null,t[ro]=null})}),!0):!1};Di.unstable_batchedUpdates=FT;Di.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!lx(n))throw Error(ye(200));if(t==null||t._reactInternals===void 0)throw Error(ye(38));return cx(t,e,n,!1,r)};Di.version="18.3.1-next-f1338f8080-20240426";function D5(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(D5)}catch(t){console.error(t)}}D5(),DL.exports=Di;var UT=DL.exports;const xc=Tl(UT);var UP=UT;xC.createRoot=UP.createRoot,xC.hydrateRoot=UP.hydrateRoot;var F5={exports:{}},L5={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zd=A;function _X(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var IX=typeof Object.is=="function"?Object.is:_X,NX=Zd.useState,RX=Zd.useEffect,OX=Zd.useLayoutEffect,AX=Zd.useDebugValue;function PX(t,e){var n=e(),r=NX({inst:{value:n,getSnapshot:e}}),i=r[0].inst,s=r[1];return OX(function(){i.value=n,i.getSnapshot=e,gk(i)&&s({inst:i})},[t,n,e]),RX(function(){return gk(i)&&s({inst:i}),t(function(){gk(i)&&s({inst:i})})},[t]),AX(n),n}function gk(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!IX(t,n)}catch{return!0}}function DX(t,e){return e()}var FX=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?DX:PX;L5.useSyncExternalStore=Zd.useSyncExternalStore!==void 0?Zd.useSyncExternalStore:FX;F5.exports=L5;var LX=F5.exports,M5={exports:{}},B5={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ux=A,MX=LX;function BX(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var zX=typeof Object.is=="function"?Object.is:BX,jX=MX.useSyncExternalStore,VX=ux.useRef,WX=ux.useEffect,UX=ux.useMemo,GX=ux.useDebugValue;B5.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var s=VX(null);if(s.current===null){var a={hasValue:!1,value:null};s.current=a}else a=s.current;s=UX(function(){function l(h){if(!c){if(c=!0,u=h,h=r(h),i!==void 0&&a.hasValue){var g=a.value;if(i(g,h))return d=g}return d=h}if(g=d,zX(u,h))return g;var y=r(h);return i!==void 0&&i(g,y)?g:(u=h,d=y)}var c=!1,u,d,f=n===void 0?null:n;return[function(){return l(e())},f===null?void 0:function(){return l(f())}]},[e,n,r,i]);var o=jX(t,s[0],s[1]);return WX(function(){a.hasValue=!0,a.value=o},[o]),GX(o),o};M5.exports=B5;var HX=M5.exports;function qX(t){t()}let z5=qX;const KX=t=>z5=t,XX=()=>z5,GP=Symbol.for("react-redux-context"),HP=typeof globalThis<"u"?globalThis:{};function YX(){var t;if(!A.createContext)return{};const e=(t=HP[GP])!=null?t:HP[GP]=new Map;let n=e.get(A.createContext);return n||(n=A.createContext(null),e.set(A.createContext,n)),n}const ao=YX();function GT(t=ao){return function(){return A.useContext(t)}}const j5=GT(),QX=()=>{throw new Error("uSES not initialized!")};let V5=QX;const ZX=t=>{V5=t},JX=(t,e)=>t===e;function eY(t=ao){const e=t===ao?j5:GT(t);return function(r,i={}){const{equalityFn:s=JX,stabilityCheck:a=void 0,noopCheck:o=void 0}=typeof i=="function"?{equalityFn:i}:i,{store:l,subscription:c,getServerState:u,stabilityCheck:d,noopCheck:f}=e();A.useRef(!0);const h=A.useCallback({[r.name](y){return r(y)}}[r.name],[r,d,a]),g=V5(c.addNestedSub,l.getState,u||l.getState,h,s);return A.useDebugValue(g),g}}const W0=eY();function f$(){return f$=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},f$.apply(this,arguments)}function W5(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var U5={exports:{}},bt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hn=typeof Symbol=="function"&&Symbol.for,HT=Hn?Symbol.for("react.element"):60103,qT=Hn?Symbol.for("react.portal"):60106,dx=Hn?Symbol.for("react.fragment"):60107,fx=Hn?Symbol.for("react.strict_mode"):60108,px=Hn?Symbol.for("react.profiler"):60114,hx=Hn?Symbol.for("react.provider"):60109,mx=Hn?Symbol.for("react.context"):60110,KT=Hn?Symbol.for("react.async_mode"):60111,gx=Hn?Symbol.for("react.concurrent_mode"):60111,yx=Hn?Symbol.for("react.forward_ref"):60112,vx=Hn?Symbol.for("react.suspense"):60113,tY=Hn?Symbol.for("react.suspense_list"):60120,xx=Hn?Symbol.for("react.memo"):60115,bx=Hn?Symbol.for("react.lazy"):60116,nY=Hn?Symbol.for("react.block"):60121,rY=Hn?Symbol.for("react.fundamental"):60117,iY=Hn?Symbol.for("react.responder"):60118,sY=Hn?Symbol.for("react.scope"):60119;function Li(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case HT:switch(t=t.type,t){case KT:case gx:case dx:case px:case fx:case vx:return t;default:switch(t=t&&t.$$typeof,t){case mx:case yx:case bx:case xx:case hx:return t;default:return e}}case qT:return e}}}function G5(t){return Li(t)===gx}bt.AsyncMode=KT;bt.ConcurrentMode=gx;bt.ContextConsumer=mx;bt.ContextProvider=hx;bt.Element=HT;bt.ForwardRef=yx;bt.Fragment=dx;bt.Lazy=bx;bt.Memo=xx;bt.Portal=qT;bt.Profiler=px;bt.StrictMode=fx;bt.Suspense=vx;bt.isAsyncMode=function(t){return G5(t)||Li(t)===KT};bt.isConcurrentMode=G5;bt.isContextConsumer=function(t){return Li(t)===mx};bt.isContextProvider=function(t){return Li(t)===hx};bt.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===HT};bt.isForwardRef=function(t){return Li(t)===yx};bt.isFragment=function(t){return Li(t)===dx};bt.isLazy=function(t){return Li(t)===bx};bt.isMemo=function(t){return Li(t)===xx};bt.isPortal=function(t){return Li(t)===qT};bt.isProfiler=function(t){return Li(t)===px};bt.isStrictMode=function(t){return Li(t)===fx};bt.isSuspense=function(t){return Li(t)===vx};bt.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===dx||t===gx||t===px||t===fx||t===vx||t===tY||typeof t=="object"&&t!==null&&(t.$$typeof===bx||t.$$typeof===xx||t.$$typeof===hx||t.$$typeof===mx||t.$$typeof===yx||t.$$typeof===rY||t.$$typeof===iY||t.$$typeof===sY||t.$$typeof===nY)};bt.typeOf=Li;U5.exports=bt;var aY=U5.exports,H5=aY,oY={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},lY={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},q5={};q5[H5.ForwardRef]=oY;q5[H5.Memo]=lY;var Et={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XT=Symbol.for("react.element"),YT=Symbol.for("react.portal"),wx=Symbol.for("react.fragment"),Sx=Symbol.for("react.strict_mode"),kx=Symbol.for("react.profiler"),Cx=Symbol.for("react.provider"),$x=Symbol.for("react.context"),cY=Symbol.for("react.server_context"),Ex=Symbol.for("react.forward_ref"),Tx=Symbol.for("react.suspense"),_x=Symbol.for("react.suspense_list"),Ix=Symbol.for("react.memo"),Nx=Symbol.for("react.lazy"),uY=Symbol.for("react.offscreen"),K5;K5=Symbol.for("react.module.reference");function hs(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case XT:switch(t=t.type,t){case wx:case kx:case Sx:case Tx:case _x:return t;default:switch(t=t&&t.$$typeof,t){case cY:case $x:case Ex:case Nx:case Ix:case Cx:return t;default:return e}}case YT:return e}}}Et.ContextConsumer=$x;Et.ContextProvider=Cx;Et.Element=XT;Et.ForwardRef=Ex;Et.Fragment=wx;Et.Lazy=Nx;Et.Memo=Ix;Et.Portal=YT;Et.Profiler=kx;Et.StrictMode=Sx;Et.Suspense=Tx;Et.SuspenseList=_x;Et.isAsyncMode=function(){return!1};Et.isConcurrentMode=function(){return!1};Et.isContextConsumer=function(t){return hs(t)===$x};Et.isContextProvider=function(t){return hs(t)===Cx};Et.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===XT};Et.isForwardRef=function(t){return hs(t)===Ex};Et.isFragment=function(t){return hs(t)===wx};Et.isLazy=function(t){return hs(t)===Nx};Et.isMemo=function(t){return hs(t)===Ix};Et.isPortal=function(t){return hs(t)===YT};Et.isProfiler=function(t){return hs(t)===kx};Et.isStrictMode=function(t){return hs(t)===Sx};Et.isSuspense=function(t){return hs(t)===Tx};Et.isSuspenseList=function(t){return hs(t)===_x};Et.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===wx||t===kx||t===Sx||t===Tx||t===_x||t===uY||typeof t=="object"&&t!==null&&(t.$$typeof===Nx||t.$$typeof===Ix||t.$$typeof===Cx||t.$$typeof===$x||t.$$typeof===Ex||t.$$typeof===K5||t.getModuleId!==void 0)};Et.typeOf=hs;function dY(){const t=XX();let e=null,n=null;return{clear(){e=null,n=null},notify(){t(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){let r=[],i=e;for(;i;)r.push(i),i=i.next;return r},subscribe(r){let i=!0,s=n={callback:r,next:null,prev:n};return s.prev?s.prev.next=s:e=s,function(){!i||e===null||(i=!1,s.next?s.next.prev=s.prev:n=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}const qP={notify(){},get:()=>[]};function fY(t,e){let n,r=qP,i=0,s=!1;function a(y){u();const x=r.subscribe(y);let v=!1;return()=>{v||(v=!0,x(),d())}}function o(){r.notify()}function l(){g.onStateChange&&g.onStateChange()}function c(){return s}function u(){i++,n||(n=e?e.addNestedSub(l):t.subscribe(l),r=dY())}function d(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=qP)}function f(){s||(s=!0,u())}function h(){s&&(s=!1,d())}const g={addNestedSub:a,notifyNestedSubs:o,handleChangeWrapper:l,isSubscribed:c,trySubscribe:f,tryUnsubscribe:h,getListeners:()=>r};return g}const pY=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",hY=pY?A.useLayoutEffect:A.useEffect;function X5({store:t,context:e,children:n,serverState:r,stabilityCheck:i="once",noopCheck:s="once"}){const a=A.useMemo(()=>{const c=fY(t);return{store:t,subscription:c,getServerState:r?()=>r:void 0,stabilityCheck:i,noopCheck:s}},[t,r,i,s]),o=A.useMemo(()=>t.getState(),[t]);hY(()=>{const{subscription:c}=a;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),o!==t.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[a,o]);const l=e||ao;return A.createElement(l.Provider,{value:a},n)}function Y5(t=ao){const e=t===ao?j5:GT(t);return function(){const{store:r}=e();return r}}const mY=Y5();function gY(t=ao){const e=t===ao?mY:Y5(t);return function(){return e().dispatch}}const QT=gY();ZX(HX.useSyncExternalStoreWithSelector);KX(UT.unstable_batchedUpdates);var yY=Math.PI/180;function vY(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}const Pd=typeof global<"u"?global:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},Ne={_global:Pd,version:"8.4.3",isBrowser:vY(),isUnminified:/param/.test((function(t){}).toString()),dblClickWindow:400,getAngle(t){return Ne.angleDeg?t*yY:t},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return Ne.DD.isDragging},isDragReady(){return!!Ne.DD.node},releaseCanvasOnDestroy:!0,document:Pd.document,_injectGlobal(t){Pd.Konva=t}},un=t=>{Ne[t.prototype.getClassName()]=t};Ne._injectGlobal(Ne);let Os=class Q5{constructor(e=[1,0,0,1,0,0]){this.dirty=!1,this.m=e&&e.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new Q5(this.m)}copyInto(e){e.m[0]=this.m[0],e.m[1]=this.m[1],e.m[2]=this.m[2],e.m[3]=this.m[3],e.m[4]=this.m[4],e.m[5]=this.m[5]}point(e){var n=this.m;return{x:n[0]*e.x+n[2]*e.y+n[4],y:n[1]*e.x+n[3]*e.y+n[5]}}translate(e,n){return this.m[4]+=this.m[0]*e+this.m[2]*n,this.m[5]+=this.m[1]*e+this.m[3]*n,this}scale(e,n){return this.m[0]*=e,this.m[1]*=e,this.m[2]*=n,this.m[3]*=n,this}rotate(e){var n=Math.cos(e),r=Math.sin(e),i=this.m[0]*n+this.m[2]*r,s=this.m[1]*n+this.m[3]*r,a=this.m[0]*-r+this.m[2]*n,o=this.m[1]*-r+this.m[3]*n;return this.m[0]=i,this.m[1]=s,this.m[2]=a,this.m[3]=o,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(e,n){var r=this.m[0]+this.m[2]*n,i=this.m[1]+this.m[3]*n,s=this.m[2]+this.m[0]*e,a=this.m[3]+this.m[1]*e;return this.m[0]=r,this.m[1]=i,this.m[2]=s,this.m[3]=a,this}multiply(e){var n=this.m[0]*e.m[0]+this.m[2]*e.m[1],r=this.m[1]*e.m[0]+this.m[3]*e.m[1],i=this.m[0]*e.m[2]+this.m[2]*e.m[3],s=this.m[1]*e.m[2]+this.m[3]*e.m[3],a=this.m[0]*e.m[4]+this.m[2]*e.m[5]+this.m[4],o=this.m[1]*e.m[4]+this.m[3]*e.m[5]+this.m[5];return this.m[0]=n,this.m[1]=r,this.m[2]=i,this.m[3]=s,this.m[4]=a,this.m[5]=o,this}invert(){var e=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),n=this.m[3]*e,r=-this.m[1]*e,i=-this.m[2]*e,s=this.m[0]*e,a=e*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),o=e*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=n,this.m[1]=r,this.m[2]=i,this.m[3]=s,this.m[4]=a,this.m[5]=o,this}getMatrix(){return this.m}decompose(){var e=this.m[0],n=this.m[1],r=this.m[2],i=this.m[3],s=this.m[4],a=this.m[5],o=e*i-n*r;let l={x:s,y:a,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(e!=0||n!=0){var c=Math.sqrt(e*e+n*n);l.rotation=n>0?Math.acos(e/c):-Math.acos(e/c),l.scaleX=c,l.scaleY=o/c,l.skewX=(e*r+n*i)/o,l.skewY=0}else if(r!=0||i!=0){var u=Math.sqrt(r*r+i*i);l.rotation=Math.PI/2-(i>0?Math.acos(-r/u):-Math.acos(r/u)),l.scaleX=o/u,l.scaleY=u,l.skewX=0,l.skewY=(e*r+n*i)/o}return l.rotation=ee._getRotation(l.rotation),l}};var xY="[object Array]",bY="[object Number]",wY="[object String]",SY="[object Boolean]",kY=Math.PI/180,CY=180/Math.PI,yk="#",$Y="",EY="0",TY="Konva warning: ",KP="Konva error: ",_Y="rgb(",vk={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},IY=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,yv=[];const NY=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(t){setTimeout(t,60)},ee={_isElement(t){return!!(t&&t.nodeType==1)},_isFunction(t){return!!(t&&t.constructor&&t.call&&t.apply)},_isPlainObject(t){return!!t&&t.constructor===Object},_isArray(t){return Object.prototype.toString.call(t)===xY},_isNumber(t){return Object.prototype.toString.call(t)===bY&&!isNaN(t)&&isFinite(t)},_isString(t){return Object.prototype.toString.call(t)===wY},_isBoolean(t){return Object.prototype.toString.call(t)===SY},isObject(t){return t instanceof Object},isValidSelector(t){if(typeof t!="string")return!1;var e=t[0];return e==="#"||e==="."||e===e.toUpperCase()},_sign(t){return t===0||t>0?1:-1},requestAnimFrame(t){yv.push(t),yv.length===1&&NY(function(){const e=yv;yv=[],e.forEach(function(n){n()})})},createCanvasElement(){var t=document.createElement("canvas");try{t.style=t.style||{}}catch{}return t},createImageElement(){return document.createElement("img")},_isInDocument(t){for(;t=t.parentNode;)if(t==document)return!0;return!1},_urlToImage(t,e){var n=ee.createImageElement();n.onload=function(){e(n)},n.src=t},_rgbToHex(t,e,n){return((1<<24)+(t<<16)+(e<<8)+n).toString(16).slice(1)},_hexToRgb(t){t=t.replace(yk,$Y);var e=parseInt(t,16);return{r:e>>16&255,g:e>>8&255,b:e&255}},getRandomColor(){for(var t=(Math.random()*16777215<<0).toString(16);t.length<6;)t=EY+t;return yk+t},getRGB(t){var e;return t in vk?(e=vk[t],{r:e[0],g:e[1],b:e[2]}):t[0]===yk?this._hexToRgb(t.substring(1)):t.substr(0,4)===_Y?(e=IY.exec(t.replace(/ /g,"")),{r:parseInt(e[1],10),g:parseInt(e[2],10),b:parseInt(e[3],10)}):{r:0,g:0,b:0}},colorToRGBA(t){return t=t||"black",ee._namedColorToRBA(t)||ee._hex3ColorToRGBA(t)||ee._hex4ColorToRGBA(t)||ee._hex6ColorToRGBA(t)||ee._hex8ColorToRGBA(t)||ee._rgbColorToRGBA(t)||ee._rgbaColorToRGBA(t)||ee._hslColorToRGBA(t)},_namedColorToRBA(t){var e=vk[t.toLowerCase()];return e?{r:e[0],g:e[1],b:e[2],a:1}:null},_rgbColorToRGBA(t){if(t.indexOf("rgb(")===0){t=t.match(/rgb\(([^)]+)\)/)[1];var e=t.split(/ *, */).map(Number);return{r:e[0],g:e[1],b:e[2],a:1}}},_rgbaColorToRGBA(t){if(t.indexOf("rgba(")===0){t=t.match(/rgba\(([^)]+)\)/)[1];var e=t.split(/ *, */).map((n,r)=>n.slice(-1)==="%"?r===3?parseInt(n)/100:parseInt(n)/100*255:Number(n));return{r:e[0],g:e[1],b:e[2],a:e[3]}}},_hex8ColorToRGBA(t){if(t[0]==="#"&&t.length===9)return{r:parseInt(t.slice(1,3),16),g:parseInt(t.slice(3,5),16),b:parseInt(t.slice(5,7),16),a:parseInt(t.slice(7,9),16)/255}},_hex6ColorToRGBA(t){if(t[0]==="#"&&t.length===7)return{r:parseInt(t.slice(1,3),16),g:parseInt(t.slice(3,5),16),b:parseInt(t.slice(5,7),16),a:1}},_hex4ColorToRGBA(t){if(t[0]==="#"&&t.length===5)return{r:parseInt(t[1]+t[1],16),g:parseInt(t[2]+t[2],16),b:parseInt(t[3]+t[3],16),a:parseInt(t[4]+t[4],16)/255}},_hex3ColorToRGBA(t){if(t[0]==="#"&&t.length===4)return{r:parseInt(t[1]+t[1],16),g:parseInt(t[2]+t[2],16),b:parseInt(t[3]+t[3],16),a:1}},_hslColorToRGBA(t){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(t)){const[e,...n]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(t),r=Number(n[0])/360,i=Number(n[1])/100,s=Number(n[2])/100;let a,o,l;if(i===0)return l=s*255,{r:Math.round(l),g:Math.round(l),b:Math.round(l),a:1};s<.5?a=s*(1+i):a=s+i-s*i;const c=2*s-a,u=[0,0,0];for(let d=0;d<3;d++)o=r+1/3*-(d-1),o<0&&o++,o>1&&o--,6*o<1?l=c+(a-c)*6*o:2*o<1?l=a:3*o<2?l=c+(a-c)*(2/3-o)*6:l=c,u[d]=l*255;return{r:Math.round(u[0]),g:Math.round(u[1]),b:Math.round(u[2]),a:1}}},haveIntersection(t,e){return!(e.x>t.x+t.width||e.x+e.width<t.x||e.y>t.y+t.height||e.y+e.height<t.y)},cloneObject(t){var e={};for(var n in t)this._isPlainObject(t[n])?e[n]=this.cloneObject(t[n]):this._isArray(t[n])?e[n]=this.cloneArray(t[n]):e[n]=t[n];return e},cloneArray(t){return t.slice(0)},degToRad(t){return t*kY},radToDeg(t){return t*CY},_degToRad(t){return ee.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),ee.degToRad(t)},_radToDeg(t){return ee.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),ee.radToDeg(t)},_getRotation(t){return Ne.angleDeg?ee.radToDeg(t):t},_capitalize(t){return t.charAt(0).toUpperCase()+t.slice(1)},throw(t){throw new Error(KP+t)},error(t){console.error(KP+t)},warn(t){Ne.showWarnings&&console.warn(TY+t)},each(t,e){for(var n in t)e(n,t[n])},_inRange(t,e,n){return e<=t&&t<n},_getProjectionToSegment(t,e,n,r,i,s){var a,o,l,c=(t-n)*(t-n)+(e-r)*(e-r);if(c==0)a=t,o=e,l=(i-n)*(i-n)+(s-r)*(s-r);else{var u=((i-t)*(n-t)+(s-e)*(r-e))/c;u<0?(a=t,o=e,l=(t-i)*(t-i)+(e-s)*(e-s)):u>1?(a=n,o=r,l=(n-i)*(n-i)+(r-s)*(r-s)):(a=t+u*(n-t),o=e+u*(r-e),l=(a-i)*(a-i)+(o-s)*(o-s))}return[a,o,l]},_getProjectionToLine(t,e,n){var r=ee.cloneObject(t),i=Number.MAX_VALUE;return e.forEach(function(s,a){if(!(!n&&a===e.length-1)){var o=e[(a+1)%e.length],l=ee._getProjectionToSegment(s.x,s.y,o.x,o.y,t.x,t.y),c=l[0],u=l[1],d=l[2];d<i&&(r.x=c,r.y=u,i=d)}}),r},_prepareArrayForTween(t,e,n){var r,i=[],s=[];if(t.length>e.length){var a=e;e=t,t=a}for(r=0;r<t.length;r+=2)i.push({x:t[r],y:t[r+1]});for(r=0;r<e.length;r+=2)s.push({x:e[r],y:e[r+1]});var o=[];return s.forEach(function(l){var c=ee._getProjectionToLine(l,i,n);o.push(c.x),o.push(c.y)}),o},_prepareToStringify(t){var e;t.visitedByCircularReferenceRemoval=!0;for(var n in t)if(t.hasOwnProperty(n)&&t[n]&&typeof t[n]=="object"){if(e=Object.getOwnPropertyDescriptor(t,n),t[n].visitedByCircularReferenceRemoval||ee._isElement(t[n]))if(e.configurable)delete t[n];else return null;else if(ee._prepareToStringify(t[n])===null)if(e.configurable)delete t[n];else return null}return delete t.visitedByCircularReferenceRemoval,t},_assign(t,e){for(var n in e)t[n]=e[n];return t},_getFirstPointerId(t){return t.touches?t.changedTouches[0].identifier:t.pointerId||999},releaseCanvas(...t){Ne.releaseCanvasOnDestroy&&t.forEach(e=>{e.width=0,e.height=0})},drawRoundedRectPath(t,e,n,r){let i=0,s=0,a=0,o=0;typeof r=="number"?i=s=a=o=Math.min(r,e/2,n/2):(i=Math.min(r[0]||0,e/2,n/2),s=Math.min(r[1]||0,e/2,n/2),o=Math.min(r[2]||0,e/2,n/2),a=Math.min(r[3]||0,e/2,n/2)),t.moveTo(i,0),t.lineTo(e-s,0),t.arc(e-s,s,s,Math.PI*3/2,0,!1),t.lineTo(e,n-o),t.arc(e-o,n-o,o,0,Math.PI/2,!1),t.lineTo(a,n),t.arc(a,n-a,a,Math.PI/2,Math.PI,!1),t.lineTo(0,i),t.arc(i,i,i,Math.PI,Math.PI*3/2,!1)}};function Rl(t){return ee._isString(t)?'"'+t+'"':Object.prototype.toString.call(t)==="[object Number]"||ee._isBoolean(t)?t:Object.prototype.toString.call(t)}function Z5(t){return t>255?255:t<0?0:Math.round(t)}function be(){if(Ne.isUnminified)return function(t,e){return ee._isNumber(t)||ee.warn(Rl(t)+' is a not valid value for "'+e+'" attribute. The value should be a number.'),t}}function ZT(t){if(Ne.isUnminified)return function(e,n){let r=ee._isNumber(e),i=ee._isArray(e)&&e.length==t;return!r&&!i&&ee.warn(Rl(e)+' is a not valid value for "'+n+'" attribute. The value should be a number or Array<number>('+t+")"),e}}function JT(){if(Ne.isUnminified)return function(t,e){var n=ee._isNumber(t),r=t==="auto";return n||r||ee.warn(Rl(t)+' is a not valid value for "'+e+'" attribute. The value should be a number or "auto".'),t}}function kf(){if(Ne.isUnminified)return function(t,e){return ee._isString(t)||ee.warn(Rl(t)+' is a not valid value for "'+e+'" attribute. The value should be a string.'),t}}function J5(){if(Ne.isUnminified)return function(t,e){const n=ee._isString(t),r=Object.prototype.toString.call(t)==="[object CanvasGradient]"||t&&t.addColorStop;return n||r||ee.warn(Rl(t)+' is a not valid value for "'+e+'" attribute. The value should be a string or a native gradient.'),t}}function RY(){if(Ne.isUnminified)return function(t,e){const n=Int8Array?Object.getPrototypeOf(Int8Array):null;return n&&t instanceof n||(ee._isArray(t)?t.forEach(function(r){ee._isNumber(r)||ee.warn('"'+e+'" attribute has non numeric element '+r+". Make sure that all elements are numbers.")}):ee.warn(Rl(t)+' is a not valid value for "'+e+'" attribute. The value should be a array of numbers.')),t}}function Ws(){if(Ne.isUnminified)return function(t,e){var n=t===!0||t===!1;return n||ee.warn(Rl(t)+' is a not valid value for "'+e+'" attribute. The value should be a boolean.'),t}}function OY(t){if(Ne.isUnminified)return function(e,n){return e==null||ee.isObject(e)||ee.warn(Rl(e)+' is a not valid value for "'+n+'" attribute. The value should be an object with properties '+t),e}}var Np="get",Rp="set";const W={addGetterSetter(t,e,n,r,i){W.addGetter(t,e,n),W.addSetter(t,e,r,i),W.addOverloadedGetterSetter(t,e)},addGetter(t,e,n){var r=Np+ee._capitalize(e);t.prototype[r]=t.prototype[r]||function(){var i=this.attrs[e];return i===void 0?n:i}},addSetter(t,e,n,r){var i=Rp+ee._capitalize(e);t.prototype[i]||W.overWriteSetter(t,e,n,r)},overWriteSetter(t,e,n,r){var i=Rp+ee._capitalize(e);t.prototype[i]=function(s){return n&&s!==void 0&&s!==null&&(s=n.call(this,s,e)),this._setAttr(e,s),r&&r.call(this),this}},addComponentsGetterSetter(t,e,n,r,i){var s=n.length,a=ee._capitalize,o=Np+a(e),l=Rp+a(e),c,u;t.prototype[o]=function(){var f={};for(c=0;c<s;c++)u=n[c],f[u]=this.getAttr(e+a(u));return f};var d=OY(n);t.prototype[l]=function(f){var h=this.attrs[e],g;r&&(f=r.call(this,f)),d&&d.call(this,f,e);for(g in f)f.hasOwnProperty(g)&&this._setAttr(e+a(g),f[g]);return f||n.forEach(y=>{this._setAttr(e+a(y),void 0)}),this._fireChangeEvent(e,h,f),i&&i.call(this),this},W.addOverloadedGetterSetter(t,e)},addOverloadedGetterSetter(t,e){var n=ee._capitalize(e),r=Rp+n,i=Np+n;t.prototype[e]=function(){return arguments.length?(this[r](arguments[0]),this):this[i]()}},addDeprecatedGetterSetter(t,e,n,r){ee.error("Adding deprecated "+e);var i=Np+ee._capitalize(e),s=e+" property is deprecated and will be removed soon. Look at Konva change log for more information.";t.prototype[i]=function(){ee.error(s);var a=this.attrs[e];return a===void 0?n:a},W.addSetter(t,e,r,function(){ee.error(s)}),W.addOverloadedGetterSetter(t,e)},backCompat(t,e){ee.each(e,function(n,r){var i=t.prototype[r],s=Np+ee._capitalize(n),a=Rp+ee._capitalize(n);function o(){i.apply(this,arguments),ee.error('"'+n+'" method is deprecated and will be removed soon. Use ""'+r+'" instead.')}t.prototype[n]=o,t.prototype[s]=o,t.prototype[a]=o})},afterSetFilter(){this._filterUpToDate=!1}};function AY(t){var e=[],n=t.length,r=ee,i,s;for(i=0;i<n;i++)s=t[i],r._isNumber(s)?s=Math.round(s*1e3)/1e3:r._isString(s)||(s=s+""),e.push(s);return e}var XP=",",PY="(",DY=")",FY="([",LY="])",MY=";",BY="()",zY="=",YP=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],jY=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"];const VY=100;let Rx=class{constructor(e){this.canvas=e,Ne.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(e){e.fillEnabled()&&this._fill(e)}_fill(e){}strokeShape(e){e.hasStroke()&&this._stroke(e)}_stroke(e){}fillStrokeShape(e){e.attrs.fillAfterStrokeEnabled?(this.strokeShape(e),this.fillShape(e)):(this.fillShape(e),this.strokeShape(e))}getTrace(e,n){var r=this.traceArr,i=r.length,s="",a,o,l,c;for(a=0;a<i;a++)o=r[a],l=o.method,l?(c=o.args,s+=l,e?s+=BY:ee._isArray(c[0])?s+=FY+c.join(XP)+LY:(n&&(c=c.map(u=>typeof u=="number"?Math.floor(u):u)),s+=PY+c.join(XP)+DY)):(s+=o.property,e||(s+=zY+o.val)),s+=MY;return s}clearTrace(){this.traceArr=[]}_trace(e){var n=this.traceArr,r;n.push(e),r=n.length,r>=VY&&n.shift()}reset(){var e=this.getCanvas().getPixelRatio();this.setTransform(1*e,0,0,1*e,0,0)}getCanvas(){return this.canvas}clear(e){var n=this.getCanvas();e?this.clearRect(e.x||0,e.y||0,e.width||0,e.height||0):this.clearRect(0,0,n.getWidth()/n.pixelRatio,n.getHeight()/n.pixelRatio)}_applyLineCap(e){const n=e.attrs.lineCap;n&&this.setAttr("lineCap",n)}_applyOpacity(e){var n=e.getAbsoluteOpacity();n!==1&&this.setAttr("globalAlpha",n)}_applyLineJoin(e){const n=e.attrs.lineJoin;n&&this.setAttr("lineJoin",n)}setAttr(e,n){this._context[e]=n}arc(e,n,r,i,s,a){this._context.arc(e,n,r,i,s,a)}arcTo(e,n,r,i,s){this._context.arcTo(e,n,r,i,s)}beginPath(){this._context.beginPath()}bezierCurveTo(e,n,r,i,s,a){this._context.bezierCurveTo(e,n,r,i,s,a)}clearRect(e,n,r,i){this._context.clearRect(e,n,r,i)}clip(){this._context.clip()}closePath(){this._context.closePath()}createImageData(e,n){var r=arguments;if(r.length===2)return this._context.createImageData(e,n);if(r.length===1)return this._context.createImageData(e)}createLinearGradient(e,n,r,i){return this._context.createLinearGradient(e,n,r,i)}createPattern(e,n){return this._context.createPattern(e,n)}createRadialGradient(e,n,r,i,s,a){return this._context.createRadialGradient(e,n,r,i,s,a)}drawImage(e,n,r,i,s,a,o,l,c){var u=arguments,d=this._context;u.length===3?d.drawImage(e,n,r):u.length===5?d.drawImage(e,n,r,i,s):u.length===9&&d.drawImage(e,n,r,i,s,a,o,l,c)}ellipse(e,n,r,i,s,a,o,l){this._context.ellipse(e,n,r,i,s,a,o,l)}isPointInPath(e,n,r,i){return r?this._context.isPointInPath(r,e,n,i):this._context.isPointInPath(e,n,i)}fill(e){e?this._context.fill(e):this._context.fill()}fillRect(e,n,r,i){this._context.fillRect(e,n,r,i)}strokeRect(e,n,r,i){this._context.strokeRect(e,n,r,i)}fillText(e,n,r,i){i?this._context.fillText(e,n,r,i):this._context.fillText(e,n,r)}measureText(e){return this._context.measureText(e)}getImageData(e,n,r,i){return this._context.getImageData(e,n,r,i)}lineTo(e,n){this._context.lineTo(e,n)}moveTo(e,n){this._context.moveTo(e,n)}rect(e,n,r,i){this._context.rect(e,n,r,i)}putImageData(e,n,r){this._context.putImageData(e,n,r)}quadraticCurveTo(e,n,r,i){this._context.quadraticCurveTo(e,n,r,i)}restore(){this._context.restore()}rotate(e){this._context.rotate(e)}save(){this._context.save()}scale(e,n){this._context.scale(e,n)}setLineDash(e){this._context.setLineDash?this._context.setLineDash(e):"mozDash"in this._context?this._context.mozDash=e:"webkitLineDash"in this._context&&(this._context.webkitLineDash=e)}getLineDash(){return this._context.getLineDash()}setTransform(e,n,r,i,s,a){this._context.setTransform(e,n,r,i,s,a)}stroke(e){e?this._context.stroke(e):this._context.stroke()}strokeText(e,n,r,i){this._context.strokeText(e,n,r,i)}transform(e,n,r,i,s,a){this._context.transform(e,n,r,i,s,a)}translate(e,n){this._context.translate(e,n)}_enableTrace(){var e=this,n=YP.length,r=this.setAttr,i,s,a=function(o){var l=e[o],c;e[o]=function(){return s=AY(Array.prototype.slice.call(arguments,0)),c=l.apply(e,arguments),e._trace({method:o,args:s}),c}};for(i=0;i<n;i++)a(YP[i]);e.setAttr=function(){r.apply(e,arguments);var o=arguments[0],l=arguments[1];(o==="shadowOffsetX"||o==="shadowOffsetY"||o==="shadowBlur")&&(l=l/this.canvas.getPixelRatio()),e._trace({property:o,val:l})}}_applyGlobalCompositeOperation(e){const n=e.attrs.globalCompositeOperation;var r=!n||n==="source-over";r||this.setAttr("globalCompositeOperation",n)}};jY.forEach(function(t){Object.defineProperty(Rx.prototype,t,{get(){return this._context[t]},set(e){this._context[t]=e}})});class WY extends Rx{constructor(e){super(e),this._context=e._canvas.getContext("2d")}_fillColor(e){var n=e.fill();this.setAttr("fillStyle",n),e._fillFunc(this)}_fillPattern(e){this.setAttr("fillStyle",e._getFillPattern()),e._fillFunc(this)}_fillLinearGradient(e){var n=e._getLinearGradient();n&&(this.setAttr("fillStyle",n),e._fillFunc(this))}_fillRadialGradient(e){const n=e._getRadialGradient();n&&(this.setAttr("fillStyle",n),e._fillFunc(this))}_fill(e){const n=e.fill(),r=e.getFillPriority();if(n&&r==="color"){this._fillColor(e);return}const i=e.getFillPatternImage();if(i&&r==="pattern"){this._fillPattern(e);return}const s=e.getFillLinearGradientColorStops();if(s&&r==="linear-gradient"){this._fillLinearGradient(e);return}const a=e.getFillRadialGradientColorStops();if(a&&r==="radial-gradient"){this._fillRadialGradient(e);return}n?this._fillColor(e):i?this._fillPattern(e):s?this._fillLinearGradient(e):a&&this._fillRadialGradient(e)}_strokeLinearGradient(e){const n=e.getStrokeLinearGradientStartPoint(),r=e.getStrokeLinearGradientEndPoint(),i=e.getStrokeLinearGradientColorStops(),s=this.createLinearGradient(n.x,n.y,r.x,r.y);if(i){for(var a=0;a<i.length;a+=2)s.addColorStop(i[a],i[a+1]);this.setAttr("strokeStyle",s)}}_stroke(e){var n=e.dash(),r=e.getStrokeScaleEnabled();if(e.hasStroke()){if(!r){this.save();var i=this.getCanvas().getPixelRatio();this.setTransform(i,0,0,i,0,0)}this._applyLineCap(e),n&&e.dashEnabled()&&(this.setLineDash(n),this.setAttr("lineDashOffset",e.dashOffset())),this.setAttr("lineWidth",e.strokeWidth()),e.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)");var s=e.getStrokeLinearGradientColorStops();s?this._strokeLinearGradient(e):this.setAttr("strokeStyle",e.stroke()),e._strokeFunc(this),r||this.restore()}}_applyShadow(e){var n,r,i,s=(n=e.getShadowRGBA())!==null&&n!==void 0?n:"black",a=(r=e.getShadowBlur())!==null&&r!==void 0?r:5,o=(i=e.getShadowOffset())!==null&&i!==void 0?i:{x:0,y:0},l=e.getAbsoluteScale(),c=this.canvas.getPixelRatio(),u=l.x*c,d=l.y*c;this.setAttr("shadowColor",s),this.setAttr("shadowBlur",a*Math.min(Math.abs(u),Math.abs(d))),this.setAttr("shadowOffsetX",o.x*u),this.setAttr("shadowOffsetY",o.y*d)}}class UY extends Rx{constructor(e){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:!0})}_fill(e){this.save(),this.setAttr("fillStyle",e.colorKey),e._fillFuncHit(this),this.restore()}strokeShape(e){e.hasHitStroke()&&this._stroke(e)}_stroke(e){if(e.hasHitStroke()){const s=e.getStrokeScaleEnabled();if(!s){this.save();var n=this.getCanvas().getPixelRatio();this.setTransform(n,0,0,n,0,0)}this._applyLineCap(e);var r=e.hitStrokeWidth(),i=r==="auto"?e.strokeWidth():r;this.setAttr("lineWidth",i),this.setAttr("strokeStyle",e.colorKey),e._strokeFuncHit(this),s||this.restore()}}}var vv;function GY(){if(vv)return vv;var t=ee.createCanvasElement(),e=t.getContext("2d");return vv=function(){var n=Ne._global.devicePixelRatio||1,r=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return n/r}(),ee.releaseCanvas(t),vv}class Ox{constructor(e){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;var n=e||{},r=n.pixelRatio||Ne.pixelRatio||GY();this.pixelRatio=r,this._canvas=ee.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(e){var n=this.pixelRatio;this.pixelRatio=e,this.setSize(this.getWidth()/n,this.getHeight()/n)}setWidth(e){this.width=this._canvas.width=e*this.pixelRatio,this._canvas.style.width=e+"px";var n=this.pixelRatio,r=this.getContext()._context;r.scale(n,n)}setHeight(e){this.height=this._canvas.height=e*this.pixelRatio,this._canvas.style.height=e+"px";var n=this.pixelRatio,r=this.getContext()._context;r.scale(n,n)}getWidth(){return this.width}getHeight(){return this.height}setSize(e,n){this.setWidth(e||0),this.setHeight(n||0)}toDataURL(e,n){try{return this._canvas.toDataURL(e,n)}catch{try{return this._canvas.toDataURL()}catch(i){return ee.error("Unable to get data URL. "+i.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}W.addGetterSetter(Ox,"pixelRatio",void 0,be());class Dd extends Ox{constructor(e={width:0,height:0}){super(e),this.context=new WY(this),this.setSize(e.width,e.height)}}class e_ extends Ox{constructor(e={width:0,height:0}){super(e),this.hitCanvas=!0,this.context=new UY(this),this.setSize(e.width,e.height)}}const mt={get isDragging(){var t=!1;return mt._dragElements.forEach(e=>{e.dragStatus==="dragging"&&(t=!0)}),t},justDragged:!1,get node(){var t;return mt._dragElements.forEach(e=>{t=e.node}),t},_dragElements:new Map,_drag(t){const e=[];mt._dragElements.forEach((n,r)=>{const{node:i}=n,s=i.getStage();s.setPointersPositions(t),n.pointerId===void 0&&(n.pointerId=ee._getFirstPointerId(t));const a=s._changedPointerPositions.find(c=>c.id===n.pointerId);if(a){if(n.dragStatus!=="dragging"){var o=i.dragDistance(),l=Math.max(Math.abs(a.x-n.startPointerPos.x),Math.abs(a.y-n.startPointerPos.y));if(l<o||(i.startDrag({evt:t}),!i.isDragging()))return}i._setDragPosition(t,n),e.push(i)}}),e.forEach(n=>{n.fire("dragmove",{type:"dragmove",target:n,evt:t},!0)})},_endDragBefore(t){const e=[];mt._dragElements.forEach(n=>{const{node:r}=n,i=r.getStage();if(t&&i.setPointersPositions(t),!i._changedPointerPositions.find(o=>o.id===n.pointerId))return;(n.dragStatus==="dragging"||n.dragStatus==="stopped")&&(mt.justDragged=!0,Ne._mouseListenClick=!1,Ne._touchListenClick=!1,Ne._pointerListenClick=!1,n.dragStatus="stopped");const a=n.node.getLayer()||n.node instanceof Ne.Stage&&n.node;a&&e.indexOf(a)===-1&&e.push(a)}),e.forEach(n=>{n.draw()})},_endDragAfter(t){mt._dragElements.forEach((e,n)=>{e.dragStatus==="stopped"&&e.node.fire("dragend",{type:"dragend",target:e.node,evt:t},!0),e.dragStatus!=="dragging"&&mt._dragElements.delete(n)})}};Ne.isBrowser&&(window.addEventListener("mouseup",mt._endDragBefore,!0),window.addEventListener("touchend",mt._endDragBefore,!0),window.addEventListener("mousemove",mt._drag),window.addEventListener("touchmove",mt._drag),window.addEventListener("mouseup",mt._endDragAfter,!1),window.addEventListener("touchend",mt._endDragAfter,!1));var o0="absoluteOpacity",xv="allEventListeners",Ma="absoluteTransform",QP="absoluteScale",nc="canvas",HY="Change",qY="children",KY="konva",p$="listening",ZP="mouseenter",JP="mouseleave",e3="set",t3="Shape",l0=" ",n3="stage",Vo="transform",XY="Stage",h$="visible",YY=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(l0);let QY=1;class xe{constructor(e){this._id=QY++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(e),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(e){(e===Vo||e===Ma)&&this._cache.get(e)?this._cache.get(e).dirty=!0:e?this._cache.delete(e):this._cache.clear()}_getCache(e,n){var r=this._cache.get(e),i=e===Vo||e===Ma,s=r===void 0||i&&r.dirty===!0;return s&&(r=n.call(this),this._cache.set(e,r)),r}_calculate(e,n,r){if(!this._attachedDepsListeners.get(e)){const i=n.map(s=>s+"Change.konva").join(l0);this.on(i,()=>{this._clearCache(e)}),this._attachedDepsListeners.set(e,!0)}return this._getCache(e,r)}_getCanvasCache(){return this._cache.get(nc)}_clearSelfAndDescendantCache(e){this._clearCache(e),e===Ma&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(nc)){const{scene:e,filter:n,hit:r}=this._cache.get(nc);ee.releaseCanvas(e,n,r),this._cache.delete(nc)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(e){var n=e||{},r={};(n.x===void 0||n.y===void 0||n.width===void 0||n.height===void 0)&&(r=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()}));var i=Math.ceil(n.width||r.width),s=Math.ceil(n.height||r.height),a=n.pixelRatio,o=n.x===void 0?Math.floor(r.x):n.x,l=n.y===void 0?Math.floor(r.y):n.y,c=n.offset||0,u=n.drawBorder||!1,d=n.hitCanvasPixelRatio||1;if(!i||!s){ee.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}i+=c*2+1,s+=c*2+1,o-=c,l-=c;var f=new Dd({pixelRatio:a,width:i,height:s}),h=new Dd({pixelRatio:a,width:0,height:0}),g=new e_({pixelRatio:d,width:i,height:s}),y=f.getContext(),x=g.getContext();return g.isCache=!0,f.isCache=!0,this._cache.delete(nc),this._filterUpToDate=!1,n.imageSmoothingEnabled===!1&&(f.getContext()._context.imageSmoothingEnabled=!1,h.getContext()._context.imageSmoothingEnabled=!1),y.save(),x.save(),y.translate(-o,-l),x.translate(-o,-l),this._isUnderCache=!0,this._clearSelfAndDescendantCache(o0),this._clearSelfAndDescendantCache(QP),this.drawScene(f,this),this.drawHit(g,this),this._isUnderCache=!1,y.restore(),x.restore(),u&&(y.save(),y.beginPath(),y.rect(0,0,i,s),y.closePath(),y.setAttr("strokeStyle","red"),y.setAttr("lineWidth",5),y.stroke(),y.restore()),this._cache.set(nc,{scene:f,filter:h,hit:g,x:o,y:l}),this._requestDraw(),this}isCached(){return this._cache.has(nc)}getClientRect(e){throw new Error('abstract "getClientRect" method call')}_transformedRect(e,n){var r=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}],i,s,a,o,l=this.getAbsoluteTransform(n);return r.forEach(function(c){var u=l.point(c);i===void 0&&(i=a=u.x,s=o=u.y),i=Math.min(i,u.x),s=Math.min(s,u.y),a=Math.max(a,u.x),o=Math.max(o,u.y)}),{x:i,y:s,width:a-i,height:o-s}}_drawCachedSceneCanvas(e){e.save(),e._applyOpacity(this),e._applyGlobalCompositeOperation(this);const n=this._getCanvasCache();e.translate(n.x,n.y);var r=this._getCachedSceneCanvas(),i=r.pixelRatio;e.drawImage(r._canvas,0,0,r.width/i,r.height/i),e.restore()}_drawCachedHitCanvas(e){var n=this._getCanvasCache(),r=n.hit;e.save(),e.translate(n.x,n.y),e.drawImage(r._canvas,0,0,r.width/r.pixelRatio,r.height/r.pixelRatio),e.restore()}_getCachedSceneCanvas(){var e=this.filters(),n=this._getCanvasCache(),r=n.scene,i=n.filter,s=i.getContext(),a,o,l,c;if(e){if(!this._filterUpToDate){var u=r.pixelRatio;i.setSize(r.width/r.pixelRatio,r.height/r.pixelRatio);try{for(a=e.length,s.clear(),s.drawImage(r._canvas,0,0,r.getWidth()/u,r.getHeight()/u),o=s.getImageData(0,0,i.getWidth(),i.getHeight()),l=0;l<a;l++){if(c=e[l],typeof c!="function"){ee.error("Filter should be type of function, but got "+typeof c+" instead. Please check correct filters");continue}c.call(this,o),s.putImageData(o,0,0)}}catch(d){ee.error("Unable to apply filter. "+d.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return i}return r}on(e,n){if(this._cache&&this._cache.delete(xv),arguments.length===3)return this._delegate.apply(this,arguments);var r=e.split(l0),i=r.length,s,a,o,l,c;for(s=0;s<i;s++)a=r[s],o=a.split("."),l=o[0],c=o[1]||"",this.eventListeners[l]||(this.eventListeners[l]=[]),this.eventListeners[l].push({name:c,handler:n});return this}off(e,n){var r=(e||"").split(l0),i=r.length,s,a,o,l,c,u;if(this._cache&&this._cache.delete(xv),!e)for(a in this.eventListeners)this._off(a);for(s=0;s<i;s++)if(o=r[s],l=o.split("."),c=l[0],u=l[1],c)this.eventListeners[c]&&this._off(c,u,n);else for(a in this.eventListeners)this._off(a,u,n);return this}dispatchEvent(e){var n={target:this,type:e.type,evt:e};return this.fire(e.type,n),this}addEventListener(e,n){return this.on(e,function(r){n.call(this,r.evt)}),this}removeEventListener(e){return this.off(e),this}_delegate(e,n,r){var i=this;this.on(e,function(s){for(var a=s.target.findAncestors(n,!0,i),o=0;o<a.length;o++)s=ee.cloneObject(s),s.currentTarget=a[o],r.call(a[o],s)})}remove(){return this.isDragging()&&this.stopDrag(),mt._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(Ma),this._clearSelfAndDescendantCache(o0),this._clearSelfAndDescendantCache(QP),this._clearSelfAndDescendantCache(n3),this._clearSelfAndDescendantCache(h$),this._clearSelfAndDescendantCache(p$)}_remove(){this._clearCaches();var e=this.getParent();e&&e.children&&(e.children.splice(this.index,1),e._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(e){var n="get"+ee._capitalize(e);return ee._isFunction(this[n])?this[n]():this.attrs[e]}getAncestors(){for(var e=this.getParent(),n=[];e;)n.push(e),e=e.getParent();return n}getAttrs(){return this.attrs||{}}setAttrs(e){return this._batchTransformChanges(()=>{var n,r;if(!e)return this;for(n in e)n!==qY&&(r=e3+ee._capitalize(n),ee._isFunction(this[r])?this[r](e[n]):this._setAttr(n,e[n]))}),this}isListening(){return this._getCache(p$,this._isListening)}_isListening(e){if(!this.listening())return!1;const r=this.getParent();return r&&r!==e&&this!==e?r._isListening(e):!0}isVisible(){return this._getCache(h$,this._isVisible)}_isVisible(e){if(!this.visible())return!1;const r=this.getParent();return r&&r!==e&&this!==e?r._isVisible(e):!0}shouldDrawHit(e,n=!1){if(e)return this._isVisible(e)&&this._isListening(e);var r=this.getLayer(),i=!1;mt._dragElements.forEach(a=>{a.dragStatus==="dragging"&&(a.node.nodeType==="Stage"||a.node.getLayer()===r)&&(i=!0)});var s=!n&&!Ne.hitOnDragEnabled&&i;return this.isListening()&&this.isVisible()&&!s}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){var e=this.getDepth(),n=this,r=0,i,s,a,o;function l(c){for(i=[],s=c.length,a=0;a<s;a++)o=c[a],r++,o.nodeType!==t3&&(i=i.concat(o.getChildren().slice())),o._id===n._id&&(a=s);i.length>0&&i[0].getDepth()<=e&&l(i)}return n.nodeType!==XY&&l(n.getStage().getChildren()),r}getDepth(){for(var e=0,n=this.parent;n;)e++,n=n.parent;return e}_batchTransformChanges(e){this._batchingTransformChange=!0,e(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(Vo),this._clearSelfAndDescendantCache(Ma)),this._needClearTransformCache=!1}setPosition(e){return this._batchTransformChanges(()=>{this.x(e.x),this.y(e.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){if(!this.getStage())return null;var e=this.getStage().getPointerPosition();if(!e)return null;var n=this.getAbsoluteTransform().copy();return n.invert(),n.point(e)}getAbsolutePosition(e){let n=!1,r=this.parent;for(;r;){if(r.isCached()){n=!0;break}r=r.parent}n&&!e&&(e=!0);var i=this.getAbsoluteTransform(e).getMatrix(),s=new Os,a=this.offset();return s.m=i.slice(),s.translate(a.x,a.y),s.getTranslation()}setAbsolutePosition(e){var n=this._clearTransform();this.attrs.x=n.x,this.attrs.y=n.y,delete n.x,delete n.y,this._clearCache(Vo);var r=this._getAbsoluteTransform().copy();return r.invert(),r.translate(e.x,e.y),e={x:this.attrs.x+r.getTranslation().x,y:this.attrs.y+r.getTranslation().y},this._setTransform(n),this.setPosition({x:e.x,y:e.y}),this._clearCache(Vo),this._clearSelfAndDescendantCache(Ma),this}_setTransform(e){var n;for(n in e)this.attrs[n]=e[n]}_clearTransform(){var e={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,e}move(e){var n=e.x,r=e.y,i=this.x(),s=this.y();return n!==void 0&&(i+=n),r!==void 0&&(s+=r),this.setPosition({x:i,y:s}),this}_eachAncestorReverse(e,n){var r=[],i=this.getParent(),s,a;if(!(n&&n._id===this._id)){for(r.unshift(this);i&&(!n||i._id!==n._id);)r.unshift(i),i=i.parent;for(s=r.length,a=0;a<s;a++)e(r[a])}}rotate(e){return this.rotation(this.rotation()+e),this}moveToTop(){if(!this.parent)return ee.warn("Node has no parent. moveToTop function is ignored."),!1;var e=this.index,n=this.parent.getChildren().length;return e<n-1?(this.parent.children.splice(e,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return ee.warn("Node has no parent. moveUp function is ignored."),!1;var e=this.index,n=this.parent.getChildren().length;return e<n-1?(this.parent.children.splice(e,1),this.parent.children.splice(e+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return ee.warn("Node has no parent. moveDown function is ignored."),!1;var e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.splice(e-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return ee.warn("Node has no parent. moveToBottom function is ignored."),!1;var e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(e){if(!this.parent)return ee.warn("Node has no parent. zIndex parameter is ignored."),this;(e<0||e>=this.parent.children.length)&&ee.warn("Unexpected value "+e+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");var n=this.index;return this.parent.children.splice(n,1),this.parent.children.splice(e,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(o0,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){var e=this.opacity(),n=this.getParent();return n&&!n._isUnderCache&&(e*=n.getAbsoluteOpacity()),e}moveTo(e){return this.getParent()!==e&&(this._remove(),e.add(this)),this}toObject(){var e={},n=this.getAttrs(),r,i,s,a,o;e.attrs={};for(r in n)i=n[r],o=ee.isObject(i)&&!ee._isPlainObject(i)&&!ee._isArray(i),!o&&(s=typeof this[r]=="function"&&this[r],delete n[r],a=s?s.call(this):null,n[r]=i,a!==i&&(e.attrs[r]=i));return e.className=this.getClassName(),ee._prepareToStringify(e)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(e,n,r){var i=[];n&&this._isMatch(e)&&i.push(this);for(var s=this.parent;s;){if(s===r)return i;s._isMatch(e)&&i.push(s),s=s.parent}return i}isAncestorOf(e){return!1}findAncestor(e,n,r){return this.findAncestors(e,n,r)[0]}_isMatch(e){if(!e)return!1;if(typeof e=="function")return e(this);var n=e.replace(/ /g,"").split(","),r=n.length,i,s;for(i=0;i<r;i++)if(s=n[i],ee.isValidSelector(s)||(ee.warn('Selector "'+s+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),ee.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),ee.warn("Konva is awesome, right?")),s.charAt(0)==="#"){if(this.id()===s.slice(1))return!0}else if(s.charAt(0)==="."){if(this.hasName(s.slice(1)))return!0}else if(this.className===s||this.nodeType===s)return!0;return!1}getLayer(){var e=this.getParent();return e?e.getLayer():null}getStage(){return this._getCache(n3,this._getStage)}_getStage(){var e=this.getParent();if(e)return e.getStage()}fire(e,n={},r){return n.target=n.target||this,r?this._fireAndBubble(e,n):this._fire(e,n),this}getAbsoluteTransform(e){return e?this._getAbsoluteTransform(e):this._getCache(Ma,this._getAbsoluteTransform)}_getAbsoluteTransform(e){var n;if(e)return n=new Os,this._eachAncestorReverse(function(i){var s=i.transformsEnabled();s==="all"?n.multiply(i.getTransform()):s==="position"&&n.translate(i.x()-i.offsetX(),i.y()-i.offsetY())},e),n;n=this._cache.get(Ma)||new Os,this.parent?this.parent.getAbsoluteTransform().copyInto(n):n.reset();var r=this.transformsEnabled();if(r==="all")n.multiply(this.getTransform());else if(r==="position"){const i=this.attrs.x||0,s=this.attrs.y||0,a=this.attrs.offsetX||0,o=this.attrs.offsetY||0;n.translate(i-a,s-o)}return n.dirty=!1,n}getAbsoluteScale(e){for(var n=this;n;)n._isUnderCache&&(e=n),n=n.getParent();const i=this.getAbsoluteTransform(e).decompose();return{x:i.scaleX,y:i.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(Vo,this._getTransform)}_getTransform(){var e,n,r=this._cache.get(Vo)||new Os;r.reset();var i=this.x(),s=this.y(),a=Ne.getAngle(this.rotation()),o=(e=this.attrs.scaleX)!==null&&e!==void 0?e:1,l=(n=this.attrs.scaleY)!==null&&n!==void 0?n:1,c=this.attrs.skewX||0,u=this.attrs.skewY||0,d=this.attrs.offsetX||0,f=this.attrs.offsetY||0;return(i!==0||s!==0)&&r.translate(i,s),a!==0&&r.rotate(a),(c!==0||u!==0)&&r.skew(c,u),(o!==1||l!==1)&&r.scale(o,l),(d!==0||f!==0)&&r.translate(-1*d,-1*f),r.dirty=!1,r}clone(e){var n=ee.cloneObject(this.attrs),r,i,s,a,o;for(r in e)n[r]=e[r];var l=new this.constructor(n);for(r in this.eventListeners)for(i=this.eventListeners[r],s=i.length,a=0;a<s;a++)o=i[a],o.name.indexOf(KY)<0&&(l.eventListeners[r]||(l.eventListeners[r]=[]),l.eventListeners[r].push(o));return l}_toKonvaCanvas(e){e=e||{};var n=this.getClientRect(),r=this.getStage(),i=e.x!==void 0?e.x:Math.floor(n.x),s=e.y!==void 0?e.y:Math.floor(n.y),a=e.pixelRatio||1,o=new Dd({width:e.width||Math.ceil(n.width)||(r?r.width():0),height:e.height||Math.ceil(n.height)||(r?r.height():0),pixelRatio:a}),l=o.getContext();return e.imageSmoothingEnabled===!1&&(l._context.imageSmoothingEnabled=!1),l.save(),(i||s)&&l.translate(-1*i,-1*s),this.drawScene(o),l.restore(),o}toCanvas(e){return this._toKonvaCanvas(e)._canvas}toDataURL(e){e=e||{};var n=e.mimeType||null,r=e.quality||null,i=this._toKonvaCanvas(e).toDataURL(n,r);return e.callback&&e.callback(i),i}toImage(e){return new Promise((n,r)=>{try{const i=e==null?void 0:e.callback;i&&delete e.callback,ee._urlToImage(this.toDataURL(e),function(s){n(s),i==null||i(s)})}catch(i){r(i)}})}toBlob(e){return new Promise((n,r)=>{try{const i=e==null?void 0:e.callback;i&&delete e.callback,this.toCanvas(e).toBlob(s=>{n(s),i==null||i(s)})}catch(i){r(i)}})}setSize(e){return this.width(e.width),this.height(e.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():Ne.dragDistance}_off(e,n,r){var i=this.eventListeners[e],s,a,o;for(s=0;s<i.length;s++)if(a=i[s].name,o=i[s].handler,(a!=="konva"||n==="konva")&&(!n||a===n)&&(!r||r===o)){if(i.splice(s,1),i.length===0){delete this.eventListeners[e];break}s--}}_fireChangeEvent(e,n,r){this._fire(e+HY,{oldVal:n,newVal:r})}addName(e){if(!this.hasName(e)){var n=this.name(),r=n?n+" "+e:e;this.name(r)}return this}hasName(e){if(!e)return!1;const n=this.name();if(!n)return!1;var r=(n||"").split(/\s/g);return r.indexOf(e)!==-1}removeName(e){var n=(this.name()||"").split(/\s/g),r=n.indexOf(e);return r!==-1&&(n.splice(r,1),this.name(n.join(" "))),this}setAttr(e,n){var r=this[e3+ee._capitalize(e)];return ee._isFunction(r)?r.call(this,n):this._setAttr(e,n),this}_requestDraw(){if(Ne.autoDrawEnabled){const e=this.getLayer()||this.getStage();e==null||e.batchDraw()}}_setAttr(e,n){var r=this.attrs[e];r===n&&!ee.isObject(n)||(n==null?delete this.attrs[e]:this.attrs[e]=n,this._shouldFireChangeEvents&&this._fireChangeEvent(e,r,n),this._requestDraw())}_setComponentAttr(e,n,r){var i;r!==void 0&&(i=this.attrs[e],i||(this.attrs[e]=this.getAttr(e)),this.attrs[e][n]=r,this._fireChangeEvent(e,i,r))}_fireAndBubble(e,n,r){n&&this.nodeType===t3&&(n.target=this);var i=(e===ZP||e===JP)&&(r&&(this===r||this.isAncestorOf&&this.isAncestorOf(r))||this.nodeType==="Stage"&&!r);if(!i){this._fire(e,n);var s=(e===ZP||e===JP)&&r&&r.isAncestorOf&&r.isAncestorOf(this)&&!r.isAncestorOf(this.parent);(n&&!n.cancelBubble||!n)&&this.parent&&this.parent.isListening()&&!s&&(r&&r.parent?this._fireAndBubble.call(this.parent,e,n,r):this._fireAndBubble.call(this.parent,e,n))}}_getProtoListeners(e){let n=this._cache.get(xv);if(!n){n={};let i=Object.getPrototypeOf(this);for(;i;){if(!i.eventListeners){i=Object.getPrototypeOf(i);continue}for(var r in i.eventListeners){const s=i.eventListeners[r],a=n[r]||[];n[r]=s.concat(a)}i=Object.getPrototypeOf(i)}this._cache.set(xv,n)}return n[e]}_fire(e,n){n=n||{},n.currentTarget=this,n.type=e;const r=this._getProtoListeners(e);if(r)for(var i=0;i<r.length;i++)r[i].handler.call(this,n);const s=this.eventListeners[e];if(s)for(var i=0;i<s.length;i++)s[i].handler.call(this,n)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(e){var n=e?e.pointerId:void 0,r=this.getStage(),i=this.getAbsolutePosition(),s=r._getPointerById(n)||r._changedPointerPositions[0]||i;mt._dragElements.set(this._id,{node:this,startPointerPos:s,offset:{x:s.x-i.x,y:s.y-i.y},dragStatus:"ready",pointerId:n})}startDrag(e,n=!0){mt._dragElements.has(this._id)||this._createDragElement(e);const r=mt._dragElements.get(this._id);r.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:e&&e.evt},n)}_setDragPosition(e,n){const r=this.getStage()._getPointerById(n.pointerId);if(r){var i={x:r.x-n.offset.x,y:r.y-n.offset.y},s=this.dragBoundFunc();if(s!==void 0){const a=s.call(this,i,e);a?i=a:ee.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==i.x||this._lastPos.y!==i.y)&&(this.setAbsolutePosition(i),this._requestDraw()),this._lastPos=i}}stopDrag(e){const n=mt._dragElements.get(this._id);n&&(n.dragStatus="stopped"),mt._endDragBefore(e),mt._endDragAfter(e)}setDraggable(e){this._setAttr("draggable",e),this._dragChange()}isDragging(){const e=mt._dragElements.get(this._id);return e?e.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(e){var n=e.evt.button!==void 0,r=!n||Ne.dragButtons.indexOf(e.evt.button)>=0;if(r&&!this.isDragging()){var i=!1;mt._dragElements.forEach(s=>{this.isAncestorOf(s.node)&&(i=!0)}),i||this._createDragElement(e)}})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();var e=this.getStage();if(!e)return;const n=mt._dragElements.get(this._id),r=n&&n.dragStatus==="dragging",i=n&&n.dragStatus==="ready";r?this.stopDrag():i&&mt._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(e={x:0,y:0}){const n=this.getStage();if(!n)return!1;const r={x:-e.x,y:-e.y,width:n.width()+2*e.x,height:n.height()+2*e.y};return ee.haveIntersection(r,this.getClientRect())}static create(e,n){return ee._isString(e)&&(e=JSON.parse(e)),this._createNode(e,n)}static _createNode(e,n){var r=xe.prototype.getClassName.call(e),i=e.children,s,a,o;n&&(e.attrs.container=n),Ne[r]||(ee.warn('Can not find a node with class name "'+r+'". Fallback to "Shape".'),r="Shape");const l=Ne[r];if(s=new l(e.attrs),i)for(a=i.length,o=0;o<a;o++)s.add(xe._createNode(i[o]));return s}}xe.prototype.nodeType="Node";xe.prototype._attrsAffectingSize=[];xe.prototype.eventListeners={};xe.prototype.on.call(xe.prototype,YY,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(Vo),this._clearSelfAndDescendantCache(Ma)});xe.prototype.on.call(xe.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(h$)});xe.prototype.on.call(xe.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(p$)});xe.prototype.on.call(xe.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(o0)});const At=W.addGetterSetter;At(xe,"zIndex");At(xe,"absolutePosition");At(xe,"position");At(xe,"x",0,be());At(xe,"y",0,be());At(xe,"globalCompositeOperation","source-over",kf());At(xe,"opacity",1,be());At(xe,"name","",kf());At(xe,"id","",kf());At(xe,"rotation",0,be());W.addComponentsGetterSetter(xe,"scale",["x","y"]);At(xe,"scaleX",1,be());At(xe,"scaleY",1,be());W.addComponentsGetterSetter(xe,"skew",["x","y"]);At(xe,"skewX",0,be());At(xe,"skewY",0,be());W.addComponentsGetterSetter(xe,"offset",["x","y"]);At(xe,"offsetX",0,be());At(xe,"offsetY",0,be());At(xe,"dragDistance",null,be());At(xe,"width",0,be());At(xe,"height",0,be());At(xe,"listening",!0,Ws());At(xe,"preventDefault",!0,Ws());At(xe,"filters",null,function(t){return this._filterUpToDate=!1,t});At(xe,"visible",!0,Ws());At(xe,"transformsEnabled","all",kf());At(xe,"size");At(xe,"dragBoundFunc");At(xe,"draggable",!1,Ws());W.backCompat(xe,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});let _i=class extends xe{constructor(){super(...arguments),this.children=[]}getChildren(e){if(!e)return this.children||[];const n=this.children||[];var r=[];return n.forEach(function(i){e(i)&&r.push(i)}),r}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.destroy()}),this.children=[],this._requestDraw(),this}add(...e){if(e.length===0)return this;if(e.length>1){for(var n=0;n<e.length;n++)this.add(e[n]);return this}const r=e[0];return r.getParent()?(r.moveTo(this),this):(this._validateAdd(r),r.index=this.getChildren().length,r.parent=this,r._clearCaches(),this.getChildren().push(r),this._fire("add",{child:r}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(e){return this._generalFind(e,!1)}findOne(e){var n=this._generalFind(e,!0);return n.length>0?n[0]:void 0}_generalFind(e,n){var r=[];return this._descendants(i=>{const s=i._isMatch(e);return s&&r.push(i),!!(s&&n)}),r}_descendants(e){let n=!1;const r=this.getChildren();for(const i of r){if(n=e(i),n)return!0;if(i.hasChildren()&&(n=i._descendants(e),n))return!0}return!1}toObject(){var e=xe.prototype.toObject.call(this);return e.children=[],this.getChildren().forEach(n=>{e.children.push(n.toObject())}),e}isAncestorOf(e){for(var n=e.getParent();n;){if(n._id===this._id)return!0;n=n.getParent()}return!1}clone(e){var n=xe.prototype.clone.call(this,e);return this.getChildren().forEach(function(r){n.add(r.clone())}),n}getAllIntersections(e){var n=[];return this.find("Shape").forEach(function(r){r.isVisible()&&r.intersects(e)&&n.push(r)}),n}_clearSelfAndDescendantCache(e){var n;super._clearSelfAndDescendantCache(e),!this.isCached()&&((n=this.children)===null||n===void 0||n.forEach(function(r){r._clearSelfAndDescendantCache(e)}))}_setChildrenIndices(){var e;(e=this.children)===null||e===void 0||e.forEach(function(n,r){n.index=r}),this._requestDraw()}drawScene(e,n){var r=this.getLayer(),i=e||r&&r.getCanvas(),s=i&&i.getContext(),a=this._getCanvasCache(),o=a&&a.scene,l=i&&i.isCache;if(!this.isVisible()&&!l)return this;if(o){s.save();var c=this.getAbsoluteTransform(n).getMatrix();s.transform(c[0],c[1],c[2],c[3],c[4],c[5]),this._drawCachedSceneCanvas(s),s.restore()}else this._drawChildren("drawScene",i,n);return this}drawHit(e,n){if(!this.shouldDrawHit(n))return this;var r=this.getLayer(),i=e||r&&r.hitCanvas,s=i&&i.getContext(),a=this._getCanvasCache(),o=a&&a.hit;if(o){s.save();var l=this.getAbsoluteTransform(n).getMatrix();s.transform(l[0],l[1],l[2],l[3],l[4],l[5]),this._drawCachedHitCanvas(s),s.restore()}else this._drawChildren("drawHit",i,n);return this}_drawChildren(e,n,r){var i,s=n&&n.getContext(),a=this.clipWidth(),o=this.clipHeight(),l=this.clipFunc(),c=a&&o||l;const u=r===this;if(c){s.save();var d=this.getAbsoluteTransform(r),f=d.getMatrix();if(s.transform(f[0],f[1],f[2],f[3],f[4],f[5]),s.beginPath(),l)l.call(this,s,this);else{var h=this.clipX(),g=this.clipY();s.rect(h,g,a,o)}s.clip(),f=d.copy().invert().getMatrix(),s.transform(f[0],f[1],f[2],f[3],f[4],f[5])}var y=!u&&this.globalCompositeOperation()!=="source-over"&&e==="drawScene";y&&(s.save(),s._applyGlobalCompositeOperation(this)),(i=this.children)===null||i===void 0||i.forEach(function(x){x[e](n,r)}),y&&s.restore(),c&&s.restore()}getClientRect(e){var n;e=e||{};var r=e.skipTransform,i=e.relativeTo,s,a,o,l,c={x:1/0,y:1/0,width:0,height:0},u=this;(n=this.children)===null||n===void 0||n.forEach(function(y){if(y.visible()){var x=y.getClientRect({relativeTo:u,skipShadow:e.skipShadow,skipStroke:e.skipStroke});x.width===0&&x.height===0||(s===void 0?(s=x.x,a=x.y,o=x.x+x.width,l=x.y+x.height):(s=Math.min(s,x.x),a=Math.min(a,x.y),o=Math.max(o,x.x+x.width),l=Math.max(l,x.y+x.height)))}});for(var d=this.find("Shape"),f=!1,h=0;h<d.length;h++){var g=d[h];if(g._isVisible(this)){f=!0;break}}return f&&s!==void 0?c={x:s,y:a,width:o-s,height:l-a}:c={x:0,y:0,width:0,height:0},r?c:this._transformedRect(c,i)}};W.addComponentsGetterSetter(_i,"clip",["x","y","width","height"]);W.addGetterSetter(_i,"clipX",void 0,be());W.addGetterSetter(_i,"clipY",void 0,be());W.addGetterSetter(_i,"clipWidth",void 0,be());W.addGetterSetter(_i,"clipHeight",void 0,be());W.addGetterSetter(_i,"clipFunc");const qh=new Map,eB=Ne._global.PointerEvent!==void 0;function xk(t){return qh.get(t)}function t_(t){return{evt:t,pointerId:t.pointerId}}function tB(t,e){return qh.get(t)===e}function nB(t,e){vh(t),e.getStage()&&(qh.set(t,e),eB&&e._fire("gotpointercapture",t_(new PointerEvent("gotpointercapture"))))}function vh(t,e){const n=qh.get(t);if(!n)return;const r=n.getStage();r&&r.content,qh.delete(t),eB&&n._fire("lostpointercapture",t_(new PointerEvent("lostpointercapture")))}var ZY="Stage",JY="string",r3="px",eQ="mouseout",rB="mouseleave",iB="mouseover",sB="mouseenter",aB="mousemove",oB="mousedown",lB="mouseup",qp="pointermove",Kp="pointerdown",$d="pointerup",Xp="pointercancel",tQ="lostpointercapture",bv="pointerout",wv="pointerleave",Sv="pointerover",kv="pointerenter",m$="contextmenu",cB="touchstart",uB="touchend",dB="touchmove",fB="touchcancel",g$="wheel",nQ=5,rQ=[[sB,"_pointerenter"],[oB,"_pointerdown"],[aB,"_pointermove"],[lB,"_pointerup"],[rB,"_pointerleave"],[cB,"_pointerdown"],[dB,"_pointermove"],[uB,"_pointerup"],[fB,"_pointercancel"],[iB,"_pointerover"],[g$,"_wheel"],[m$,"_contextmenu"],[Kp,"_pointerdown"],[qp,"_pointermove"],[$d,"_pointerup"],[Xp,"_pointercancel"],[tQ,"_lostpointercapture"]];const bk={mouse:{[bv]:eQ,[wv]:rB,[Sv]:iB,[kv]:sB,[qp]:aB,[Kp]:oB,[$d]:lB,[Xp]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[bv]:"touchout",[wv]:"touchleave",[Sv]:"touchover",[kv]:"touchenter",[qp]:dB,[Kp]:cB,[$d]:uB,[Xp]:fB,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[bv]:bv,[wv]:wv,[Sv]:Sv,[kv]:kv,[qp]:qp,[Kp]:Kp,[$d]:$d,[Xp]:Xp,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},Yp=t=>t.indexOf("pointer")>=0?"pointer":t.indexOf("touch")>=0?"touch":"mouse",Bu=t=>{const e=Yp(t);if(e==="pointer")return Ne.pointerEventsEnabled&&bk.pointer;if(e==="touch")return bk.touch;if(e==="mouse")return bk.mouse};function i3(t={}){return(t.clipFunc||t.clipWidth||t.clipHeight)&&ee.warn("Stage does not support clipping. Please use clip for Layers or Groups."),t}const iQ="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);",c0=[];let Ax=class extends _i{constructor(e){super(i3(e)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),c0.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{i3(this.attrs)}),this._checkVisibility()}_validateAdd(e){const n=e.getType()==="Layer",r=e.getType()==="FastLayer";n||r||ee.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const e=this.visible()?"":"none";this.content.style.display=e}setContainer(e){if(typeof e===JY){if(e.charAt(0)==="."){var n=e.slice(1);e=document.getElementsByClassName(n)[0]}else{var r;e.charAt(0)!=="#"?r=e:r=e.slice(1),e=document.getElementById(r)}if(!e)throw"Can not find container in document with id "+r}return this._setAttr("container",e),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),e.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){var e=this.children,n=e.length,r;for(r=0;r<n;r++)e[r].clear();return this}clone(e){return e||(e={}),e.container=typeof document<"u"&&document.createElement("div"),_i.prototype.clone.call(this,e)}destroy(){super.destroy();var e=this.content;e&&ee._isInDocument(e)&&this.container().removeChild(e);var n=c0.indexOf(this);return n>-1&&c0.splice(n,1),ee.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const e=this._pointerPositions[0]||this._changedPointerPositions[0];return e?{x:e.x,y:e.y}:(ee.warn(iQ),null)}_getPointerById(e){return this._pointerPositions.find(n=>n.id===e)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(e){e=e||{},e.x=e.x||0,e.y=e.y||0,e.width=e.width||this.width(),e.height=e.height||this.height();var n=new Dd({width:e.width,height:e.height,pixelRatio:e.pixelRatio||1}),r=n.getContext()._context,i=this.children;return(e.x||e.y)&&r.translate(-1*e.x,-1*e.y),i.forEach(function(s){if(s.isVisible()){var a=s._toKonvaCanvas(e);r.drawImage(a._canvas,e.x,e.y,a.getWidth()/a.getPixelRatio(),a.getHeight()/a.getPixelRatio())}}),n}getIntersection(e){if(!e)return null;var n=this.children,r=n.length,i=r-1,s;for(s=i;s>=0;s--){const a=n[s].getIntersection(e);if(a)return a}return null}_resizeDOM(){var e=this.width(),n=this.height();this.content&&(this.content.style.width=e+r3,this.content.style.height=n+r3),this.bufferCanvas.setSize(e,n),this.bufferHitCanvas.setSize(e,n),this.children.forEach(r=>{r.setSize({width:e,height:n}),r.draw()})}add(e,...n){if(arguments.length>1){for(var r=0;r<arguments.length;r++)this.add(arguments[r]);return this}super.add(e);var i=this.children.length;return i>nQ&&ee.warn("The stage has "+i+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),e.setSize({width:this.width(),height:this.height()}),e.draw(),Ne.isBrowser&&this.content.appendChild(e.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(e){return tB(e,this)}setPointerCapture(e){nB(e,this)}releaseCapture(e){vh(e)}getLayers(){return this.children}_bindContentEvents(){Ne.isBrowser&&rQ.forEach(([e,n])=>{this.content.addEventListener(e,r=>{this[n](r)},{passive:!1})})}_pointerenter(e){this.setPointersPositions(e);const n=Bu(e.type);this._fire(n.pointerenter,{evt:e,target:this,currentTarget:this})}_pointerover(e){this.setPointersPositions(e);const n=Bu(e.type);this._fire(n.pointerover,{evt:e,target:this,currentTarget:this})}_getTargetShape(e){let n=this[e+"targetShape"];return n&&!n.getStage()&&(n=null),n}_pointerleave(e){const n=Bu(e.type),r=Yp(e.type);if(n){this.setPointersPositions(e);var i=this._getTargetShape(r),s=!mt.isDragging||Ne.hitOnDragEnabled;i&&s?(i._fireAndBubble(n.pointerout,{evt:e}),i._fireAndBubble(n.pointerleave,{evt:e}),this._fire(n.pointerleave,{evt:e,target:this,currentTarget:this}),this[r+"targetShape"]=null):s&&(this._fire(n.pointerleave,{evt:e,target:this,currentTarget:this}),this._fire(n.pointerout,{evt:e,target:this,currentTarget:this})),this.pointerPos=void 0,this._pointerPositions=[]}}_pointerdown(e){const n=Bu(e.type),r=Yp(e.type);if(n){this.setPointersPositions(e);var i=!1;this._changedPointerPositions.forEach(s=>{var a=this.getIntersection(s);if(mt.justDragged=!1,Ne["_"+r+"ListenClick"]=!0,!(a&&a.isListening()))return;Ne.capturePointerEventsEnabled&&a.setPointerCapture(s.id),this[r+"ClickStartShape"]=a,a._fireAndBubble(n.pointerdown,{evt:e,pointerId:s.id}),i=!0;const l=e.type.indexOf("touch")>=0;a.preventDefault()&&e.cancelable&&l&&e.preventDefault()}),i||this._fire(n.pointerdown,{evt:e,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}}_pointermove(e){const n=Bu(e.type),r=Yp(e.type);if(!n)return;mt.isDragging&&mt.node.preventDefault()&&e.cancelable&&e.preventDefault(),this.setPointersPositions(e);var i=!mt.isDragging||Ne.hitOnDragEnabled;if(!i)return;var s={};let a=!1;var o=this._getTargetShape(r);this._changedPointerPositions.forEach(l=>{const c=xk(l.id)||this.getIntersection(l),u=l.id,d={evt:e,pointerId:u};var f=o!==c;if(f&&o&&(o._fireAndBubble(n.pointerout,Object.assign({},d),c),o._fireAndBubble(n.pointerleave,Object.assign({},d),c)),c){if(s[c._id])return;s[c._id]=!0}c&&c.isListening()?(a=!0,f&&(c._fireAndBubble(n.pointerover,Object.assign({},d),o),c._fireAndBubble(n.pointerenter,Object.assign({},d),o),this[r+"targetShape"]=c),c._fireAndBubble(n.pointermove,Object.assign({},d))):o&&(this._fire(n.pointerover,{evt:e,target:this,currentTarget:this,pointerId:u}),this[r+"targetShape"]=null)}),a||this._fire(n.pointermove,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(e){const n=Bu(e.type),r=Yp(e.type);if(!n)return;this.setPointersPositions(e);const i=this[r+"ClickStartShape"],s=this[r+"ClickEndShape"];var a={};let o=!1;this._changedPointerPositions.forEach(l=>{const c=xk(l.id)||this.getIntersection(l);if(c){if(c.releaseCapture(l.id),a[c._id])return;a[c._id]=!0}const u=l.id,d={evt:e,pointerId:u};let f=!1;Ne["_"+r+"InDblClickWindow"]?(f=!0,clearTimeout(this[r+"DblTimeout"])):mt.justDragged||(Ne["_"+r+"InDblClickWindow"]=!0,clearTimeout(this[r+"DblTimeout"])),this[r+"DblTimeout"]=setTimeout(function(){Ne["_"+r+"InDblClickWindow"]=!1},Ne.dblClickWindow),c&&c.isListening()?(o=!0,this[r+"ClickEndShape"]=c,c._fireAndBubble(n.pointerup,Object.assign({},d)),Ne["_"+r+"ListenClick"]&&i&&i===c&&(c._fireAndBubble(n.pointerclick,Object.assign({},d)),f&&s&&s===c&&c._fireAndBubble(n.pointerdblclick,Object.assign({},d)))):(this[r+"ClickEndShape"]=null,Ne["_"+r+"ListenClick"]&&this._fire(n.pointerclick,{evt:e,target:this,currentTarget:this,pointerId:u}),f&&this._fire(n.pointerdblclick,{evt:e,target:this,currentTarget:this,pointerId:u}))}),o||this._fire(n.pointerup,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),Ne["_"+r+"ListenClick"]=!1,e.cancelable&&r!=="touch"&&e.preventDefault()}_contextmenu(e){this.setPointersPositions(e);var n=this.getIntersection(this.getPointerPosition());n&&n.isListening()?n._fireAndBubble(m$,{evt:e}):this._fire(m$,{evt:e,target:this,currentTarget:this})}_wheel(e){this.setPointersPositions(e);var n=this.getIntersection(this.getPointerPosition());n&&n.isListening()?n._fireAndBubble(g$,{evt:e}):this._fire(g$,{evt:e,target:this,currentTarget:this})}_pointercancel(e){this.setPointersPositions(e);const n=xk(e.pointerId)||this.getIntersection(this.getPointerPosition());n&&n._fireAndBubble($d,t_(e)),vh(e.pointerId)}_lostpointercapture(e){vh(e.pointerId)}setPointersPositions(e){var n=this._getContentPosition(),r=null,i=null;e=e||window.event,e.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(e.touches,s=>{this._pointerPositions.push({id:s.identifier,x:(s.clientX-n.left)/n.scaleX,y:(s.clientY-n.top)/n.scaleY})}),Array.prototype.forEach.call(e.changedTouches||e.touches,s=>{this._changedPointerPositions.push({id:s.identifier,x:(s.clientX-n.left)/n.scaleX,y:(s.clientY-n.top)/n.scaleY})})):(r=(e.clientX-n.left)/n.scaleX,i=(e.clientY-n.top)/n.scaleY,this.pointerPos={x:r,y:i},this._pointerPositions=[{x:r,y:i,id:ee._getFirstPointerId(e)}],this._changedPointerPositions=[{x:r,y:i,id:ee._getFirstPointerId(e)}])}_setPointerPosition(e){ee.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(e)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};var e=this.content.getBoundingClientRect();return{top:e.top,left:e.left,scaleX:e.width/this.content.clientWidth||1,scaleY:e.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new Dd({width:this.width(),height:this.height()}),this.bufferHitCanvas=new e_({pixelRatio:1,width:this.width(),height:this.height()}),!!Ne.isBrowser){var e=this.container();if(!e)throw"Stage has no container. A container is required.";e.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),e.appendChild(this.content),this._resizeDOM()}}cache(){return ee.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(e){e.batchDraw()}),this}};Ax.prototype.nodeType=ZY;un(Ax);W.addGetterSetter(Ax,"container");var pB="hasShadow",hB="shadowRGBA",mB="patternImage",gB="linearGradient",yB="radialGradient";let Cv;function wk(){return Cv||(Cv=ee.createCanvasElement().getContext("2d"),Cv)}const xh={};function sQ(t){t.fill()}function aQ(t){t.stroke()}function oQ(t){t.fill()}function lQ(t){t.stroke()}function cQ(){this._clearCache(pB)}function uQ(){this._clearCache(hB)}function dQ(){this._clearCache(mB)}function fQ(){this._clearCache(gB)}function pQ(){this._clearCache(yB)}let he=class extends xe{constructor(e){super(e);let n;for(;n=ee.getRandomColor(),!(n&&!(n in xh)););this.colorKey=n,xh[n]=this}getContext(){return ee.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return ee.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(pB,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(mB,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){var e=wk();const n=e.createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(n&&n.setTransform){const r=new Os;r.translate(this.fillPatternX(),this.fillPatternY()),r.rotate(Ne.getAngle(this.fillPatternRotation())),r.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),r.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const i=r.getMatrix(),s=typeof DOMMatrix>"u"?{a:i[0],b:i[1],c:i[2],d:i[3],e:i[4],f:i[5]}:new DOMMatrix(i);n.setTransform(s)}return n}}_getLinearGradient(){return this._getCache(gB,this.__getLinearGradient)}__getLinearGradient(){var e=this.fillLinearGradientColorStops();if(e){for(var n=wk(),r=this.fillLinearGradientStartPoint(),i=this.fillLinearGradientEndPoint(),s=n.createLinearGradient(r.x,r.y,i.x,i.y),a=0;a<e.length;a+=2)s.addColorStop(e[a],e[a+1]);return s}}_getRadialGradient(){return this._getCache(yB,this.__getRadialGradient)}__getRadialGradient(){var e=this.fillRadialGradientColorStops();if(e){for(var n=wk(),r=this.fillRadialGradientStartPoint(),i=this.fillRadialGradientEndPoint(),s=n.createRadialGradient(r.x,r.y,this.fillRadialGradientStartRadius(),i.x,i.y,this.fillRadialGradientEndRadius()),a=0;a<e.length;a+=2)s.addColorStop(e[a],e[a+1]);return s}}getShadowRGBA(){return this._getCache(hB,this._getShadowRGBA)}_getShadowRGBA(){if(this.hasShadow()){var e=ee.colorToRGBA(this.shadowColor());if(e)return"rgba("+e.r+","+e.g+","+e.b+","+e.a*(this.shadowOpacity()||1)+")"}}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const e=this.hitStrokeWidth();return e==="auto"?this.hasStroke():this.strokeEnabled()&&!!e}intersects(e){var n=this.getStage(),r=n.bufferHitCanvas,i;return r.getContext().clear(),this.drawHit(r,null,!0),i=r.context.getImageData(Math.round(e.x),Math.round(e.y),1,1).data,i[3]>0}destroy(){return xe.prototype.destroy.call(this),delete xh[this.colorKey],delete this.colorKey,this}_useBufferCanvas(e){var n;if(!this.getStage()||!((n=this.attrs.perfectDrawEnabled)!==null&&n!==void 0?n:!0))return!1;const i=e||this.hasFill(),s=this.hasStroke(),a=this.getAbsoluteOpacity()!==1;if(i&&s&&a)return!0;const o=this.hasShadow(),l=this.shadowForStrokeEnabled();return!!(i&&s&&o&&l)}setStrokeHitEnabled(e){ee.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),e?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){var e=this.size();return{x:this._centroid?-e.width/2:0,y:this._centroid?-e.height/2:0,width:e.width,height:e.height}}getClientRect(e={}){const n=e.skipTransform,r=e.relativeTo,i=this.getSelfRect(),a=!e.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,o=i.width+a,l=i.height+a,c=!e.skipShadow&&this.hasShadow(),u=c?this.shadowOffsetX():0,d=c?this.shadowOffsetY():0,f=o+Math.abs(u),h=l+Math.abs(d),g=c&&this.shadowBlur()||0,y=f+g*2,x=h+g*2,v={width:y,height:x,x:-(a/2+g)+Math.min(u,0)+i.x,y:-(a/2+g)+Math.min(d,0)+i.y};return n?v:this._transformedRect(v,r)}drawScene(e,n){var r=this.getLayer(),i=e||r.getCanvas(),s=i.getContext(),a=this._getCanvasCache(),o=this.getSceneFunc(),l=this.hasShadow(),c,u,d,f=i.isCache,h=n===this;if(!this.isVisible()&&!h)return this;if(a){s.save();var g=this.getAbsoluteTransform(n).getMatrix();return s.transform(g[0],g[1],g[2],g[3],g[4],g[5]),this._drawCachedSceneCanvas(s),s.restore(),this}if(!o)return this;if(s.save(),this._useBufferCanvas()&&!f){c=this.getStage(),u=c.bufferCanvas,d=u.getContext(),d.clear(),d.save(),d._applyLineJoin(this);var y=this.getAbsoluteTransform(n).getMatrix();d.transform(y[0],y[1],y[2],y[3],y[4],y[5]),o.call(this,d,this),d.restore();var x=u.pixelRatio;l&&s._applyShadow(this),s._applyOpacity(this),s._applyGlobalCompositeOperation(this),s.drawImage(u._canvas,0,0,u.width/x,u.height/x)}else{if(s._applyLineJoin(this),!h){var y=this.getAbsoluteTransform(n).getMatrix();s.transform(y[0],y[1],y[2],y[3],y[4],y[5]),s._applyOpacity(this),s._applyGlobalCompositeOperation(this)}l&&s._applyShadow(this),o.call(this,s,this)}return s.restore(),this}drawHit(e,n,r=!1){if(!this.shouldDrawHit(n,r))return this;var i=this.getLayer(),s=e||i.hitCanvas,a=s&&s.getContext(),o=this.hitFunc()||this.sceneFunc(),l=this._getCanvasCache(),c=l&&l.hit;if(this.colorKey||ee.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),c){a.save();var u=this.getAbsoluteTransform(n).getMatrix();return a.transform(u[0],u[1],u[2],u[3],u[4],u[5]),this._drawCachedHitCanvas(a),a.restore(),this}if(!o)return this;if(a.save(),a._applyLineJoin(this),!(this===n)){var f=this.getAbsoluteTransform(n).getMatrix();a.transform(f[0],f[1],f[2],f[3],f[4],f[5])}return o.call(this,a,this),a.restore(),this}drawHitFromCache(e=0){var n=this._getCanvasCache(),r=this._getCachedSceneCanvas(),i=n.hit,s=i.getContext(),a=i.getWidth(),o=i.getHeight(),l,c,u,d,f,h;s.clear(),s.drawImage(r._canvas,0,0,a,o);try{for(l=s.getImageData(0,0,a,o),c=l.data,u=c.length,d=ee._hexToRgb(this.colorKey),f=0;f<u;f+=4)h=c[f+3],h>e?(c[f]=d.r,c[f+1]=d.g,c[f+2]=d.b,c[f+3]=255):c[f+3]=0;s.putImageData(l,0,0)}catch(g){ee.error("Unable to draw hit graph from cached scene canvas. "+g.message)}return this}hasPointerCapture(e){return tB(e,this)}setPointerCapture(e){nB(e,this)}releaseCapture(e){vh(e)}};he.prototype._fillFunc=sQ;he.prototype._strokeFunc=aQ;he.prototype._fillFuncHit=oQ;he.prototype._strokeFuncHit=lQ;he.prototype._centroid=!1;he.prototype.nodeType="Shape";un(he);he.prototype.eventListeners={};he.prototype.on.call(he.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",cQ);he.prototype.on.call(he.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",uQ);he.prototype.on.call(he.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",dQ);he.prototype.on.call(he.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",fQ);he.prototype.on.call(he.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",pQ);W.addGetterSetter(he,"stroke",void 0,J5());W.addGetterSetter(he,"strokeWidth",2,be());W.addGetterSetter(he,"fillAfterStrokeEnabled",!1);W.addGetterSetter(he,"hitStrokeWidth","auto",JT());W.addGetterSetter(he,"strokeHitEnabled",!0,Ws());W.addGetterSetter(he,"perfectDrawEnabled",!0,Ws());W.addGetterSetter(he,"shadowForStrokeEnabled",!0,Ws());W.addGetterSetter(he,"lineJoin");W.addGetterSetter(he,"lineCap");W.addGetterSetter(he,"sceneFunc");W.addGetterSetter(he,"hitFunc");W.addGetterSetter(he,"dash");W.addGetterSetter(he,"dashOffset",0,be());W.addGetterSetter(he,"shadowColor",void 0,kf());W.addGetterSetter(he,"shadowBlur",0,be());W.addGetterSetter(he,"shadowOpacity",1,be());W.addComponentsGetterSetter(he,"shadowOffset",["x","y"]);W.addGetterSetter(he,"shadowOffsetX",0,be());W.addGetterSetter(he,"shadowOffsetY",0,be());W.addGetterSetter(he,"fillPatternImage");W.addGetterSetter(he,"fill",void 0,J5());W.addGetterSetter(he,"fillPatternX",0,be());W.addGetterSetter(he,"fillPatternY",0,be());W.addGetterSetter(he,"fillLinearGradientColorStops");W.addGetterSetter(he,"strokeLinearGradientColorStops");W.addGetterSetter(he,"fillRadialGradientStartRadius",0);W.addGetterSetter(he,"fillRadialGradientEndRadius",0);W.addGetterSetter(he,"fillRadialGradientColorStops");W.addGetterSetter(he,"fillPatternRepeat","repeat");W.addGetterSetter(he,"fillEnabled",!0);W.addGetterSetter(he,"strokeEnabled",!0);W.addGetterSetter(he,"shadowEnabled",!0);W.addGetterSetter(he,"dashEnabled",!0);W.addGetterSetter(he,"strokeScaleEnabled",!0);W.addGetterSetter(he,"fillPriority","color");W.addComponentsGetterSetter(he,"fillPatternOffset",["x","y"]);W.addGetterSetter(he,"fillPatternOffsetX",0,be());W.addGetterSetter(he,"fillPatternOffsetY",0,be());W.addComponentsGetterSetter(he,"fillPatternScale",["x","y"]);W.addGetterSetter(he,"fillPatternScaleX",1,be());W.addGetterSetter(he,"fillPatternScaleY",1,be());W.addComponentsGetterSetter(he,"fillLinearGradientStartPoint",["x","y"]);W.addComponentsGetterSetter(he,"strokeLinearGradientStartPoint",["x","y"]);W.addGetterSetter(he,"fillLinearGradientStartPointX",0);W.addGetterSetter(he,"strokeLinearGradientStartPointX",0);W.addGetterSetter(he,"fillLinearGradientStartPointY",0);W.addGetterSetter(he,"strokeLinearGradientStartPointY",0);W.addComponentsGetterSetter(he,"fillLinearGradientEndPoint",["x","y"]);W.addComponentsGetterSetter(he,"strokeLinearGradientEndPoint",["x","y"]);W.addGetterSetter(he,"fillLinearGradientEndPointX",0);W.addGetterSetter(he,"strokeLinearGradientEndPointX",0);W.addGetterSetter(he,"fillLinearGradientEndPointY",0);W.addGetterSetter(he,"strokeLinearGradientEndPointY",0);W.addComponentsGetterSetter(he,"fillRadialGradientStartPoint",["x","y"]);W.addGetterSetter(he,"fillRadialGradientStartPointX",0);W.addGetterSetter(he,"fillRadialGradientStartPointY",0);W.addComponentsGetterSetter(he,"fillRadialGradientEndPoint",["x","y"]);W.addGetterSetter(he,"fillRadialGradientEndPointX",0);W.addGetterSetter(he,"fillRadialGradientEndPointY",0);W.addGetterSetter(he,"fillPatternRotation",0);W.backCompat(he,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"});var hQ="#",mQ="beforeDraw",gQ="draw",vB=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],yQ=vB.length;let nu=class extends _i{constructor(e){super(e),this.canvas=new Dd,this.hitCanvas=new e_({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(e){return this.getContext().clear(e),this.getHitCanvas().getContext().clear(e),this}setZIndex(e){super.setZIndex(e);var n=this.getStage();return n&&n.content&&(n.content.removeChild(this.getNativeCanvasElement()),e<n.children.length-1?n.content.insertBefore(this.getNativeCanvasElement(),n.children[e+1].getCanvas()._canvas):n.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){xe.prototype.moveToTop.call(this);var e=this.getStage();return e&&e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){var e=xe.prototype.moveUp.call(this);if(!e)return!1;var n=this.getStage();return!n||!n.content?!1:(n.content.removeChild(this.getNativeCanvasElement()),this.index<n.children.length-1?n.content.insertBefore(this.getNativeCanvasElement(),n.children[this.index+1].getCanvas()._canvas):n.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(xe.prototype.moveDown.call(this)){var e=this.getStage();if(e){var n=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),n[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(xe.prototype.moveToBottom.call(this)){var e=this.getStage();if(e){var n=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),n[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){var e=this.getNativeCanvasElement();return xe.prototype.remove.call(this),e&&e.parentNode&&ee._isInDocument(e)&&e.parentNode.removeChild(e),this}getStage(){return this.parent}setSize({width:e,height:n}){return this.canvas.setSize(e,n),this.hitCanvas.setSize(e,n),this._setSmoothEnabled(),this}_validateAdd(e){var n=e.getType();n!=="Group"&&n!=="Shape"&&ee.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(e){return e=e||{},e.width=e.width||this.getWidth(),e.height=e.height||this.getHeight(),e.x=e.x!==void 0?e.x:this.x(),e.y=e.y!==void 0?e.y:this.y(),xe.prototype._toKonvaCanvas.call(this,e)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){ee.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){ee.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,ee.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(e){if(!this.isListening()||!this.isVisible())return null;for(var n=1,r=!1;;){for(let i=0;i<yQ;i++){const s=vB[i],a=this._getIntersection({x:e.x+s.x*n,y:e.y+s.y*n}),o=a.shape;if(o)return o;if(r=!!a.antialiased,!a.antialiased)break}if(r)n+=1;else return null}}_getIntersection(e){const n=this.hitCanvas.pixelRatio,r=this.hitCanvas.context.getImageData(Math.round(e.x*n),Math.round(e.y*n),1,1).data,i=r[3];if(i===255){const s=ee._rgbToHex(r[0],r[1],r[2]),a=xh[hQ+s];return a?{shape:a}:{antialiased:!0}}else if(i>0)return{antialiased:!0};return{}}drawScene(e,n){var r=this.getLayer(),i=e||r&&r.getCanvas();return this._fire(mQ,{node:this}),this.clearBeforeDraw()&&i.getContext().clear(),_i.prototype.drawScene.call(this,i,n),this._fire(gQ,{node:this}),this}drawHit(e,n){var r=this.getLayer(),i=e||r&&r.hitCanvas;return r&&r.clearBeforeDraw()&&r.getHitCanvas().getContext().clear(),_i.prototype.drawHit.call(this,i,n),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(e){ee.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(e)}getHitGraphEnabled(e){return ee.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!(!this.parent||!this.parent.content)){var e=this.parent,n=!!this.hitCanvas._canvas.parentNode;n?e.content.removeChild(this.hitCanvas._canvas):e.content.appendChild(this.hitCanvas._canvas)}}destroy(){return ee.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};nu.prototype.nodeType="Layer";un(nu);W.addGetterSetter(nu,"imageSmoothingEnabled",!0);W.addGetterSetter(nu,"clearBeforeDraw",!0);W.addGetterSetter(nu,"hitGraphEnabled",!0,Ws());class n_ extends nu{constructor(e){super(e),this.listening(!1),ee.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}n_.prototype.nodeType="FastLayer";un(n_);let Jd=class extends _i{_validateAdd(e){var n=e.getType();n!=="Group"&&n!=="Shape"&&ee.throw("You may only add groups and shapes to groups.")}};Jd.prototype.nodeType="Group";un(Jd);var Sk=function(){return Pd.performance&&Pd.performance.now?function(){return Pd.performance.now()}:function(){return new Date().getTime()}}();class Ji{constructor(e,n){this.id=Ji.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:Sk(),frameRate:0},this.func=e,this.setLayers(n)}setLayers(e){var n=[];return e?e.length>0?n=e:n=[e]:n=[],this.layers=n,this}getLayers(){return this.layers}addLayer(e){var n=this.layers,r=n.length,i;for(i=0;i<r;i++)if(n[i]._id===e._id)return!1;return this.layers.push(e),!0}isRunning(){var e=Ji,n=e.animations,r=n.length,i;for(i=0;i<r;i++)if(n[i].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=Sk(),Ji._addAnimation(this),this}stop(){return Ji._removeAnimation(this),this}_updateFrameObject(e){this.frame.timeDiff=e-this.frame.lastTime,this.frame.lastTime=e,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(e){this.animations.push(e),this._handleAnimation()}static _removeAnimation(e){var n=e.id,r=this.animations,i=r.length,s;for(s=0;s<i;s++)if(r[s].id===n){this.animations.splice(s,1);break}}static _runFrames(){var e={},n=this.animations,r,i,s,a,o,l,c,u,d;for(a=0;a<n.length;a++)if(r=n[a],i=r.layers,s=r.func,r._updateFrameObject(Sk()),l=i.length,s?d=s.call(r,r.frame)!==!1:d=!0,!!d)for(o=0;o<l;o++)c=i[o],c._id!==void 0&&(e[c._id]=c);for(u in e)e.hasOwnProperty(u)&&e[u].batchDraw()}static _animationLoop(){var e=Ji;e.animations.length?(e._runFrames(),ee.requestAnimFrame(e._animationLoop)):e.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,ee.requestAnimFrame(this._animationLoop))}}Ji.animations=[];Ji.animIdCounter=0;Ji.animRunning=!1;var vQ={node:1,duration:1,easing:1,onFinish:1,yoyo:1},xQ=1,s3=2,a3=3,bQ=0,o3=["fill","stroke","shadowColor"];class wQ{constructor(e,n,r,i,s,a,o){this.prop=e,this.propFunc=n,this.begin=i,this._pos=i,this.duration=a,this._change=0,this.prevPos=0,this.yoyo=o,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=r,this._change=s-this.begin,this.pause()}fire(e){var n=this[e];n&&n()}setTime(e){e>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():e<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=e,this.update())}getTime(){return this._time}setPosition(e){this.prevPos=this._pos,this.propFunc(e),this._pos=e}getPosition(e){return e===void 0&&(e=this._time),this.func(e,this.begin,this._change,this.duration)}play(){this.state=s3,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=a3,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(e){this.pause(),this._time=e,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){var e=this.getTimer()-this._startTime;this.state===s3?this.setTime(e):this.state===a3&&this.setTime(this.duration-e)}pause(){this.state=xQ,this.fire("onPause")}getTimer(){return new Date().getTime()}}class mn{constructor(e){var n=this,r=e.node,i=r._id,s,a=e.easing||bh.Linear,o=!!e.yoyo,l;typeof e.duration>"u"?s=.3:e.duration===0?s=.001:s=e.duration,this.node=r,this._id=bQ++;var c=r.getLayer()||(r instanceof Ne.Stage?r.getLayers():null);c||ee.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new Ji(function(){n.tween.onEnterFrame()},c),this.tween=new wQ(l,function(u){n._tweenFunc(u)},a,0,1,s*1e3,o),this._addListeners(),mn.attrs[i]||(mn.attrs[i]={}),mn.attrs[i][this._id]||(mn.attrs[i][this._id]={}),mn.tweens[i]||(mn.tweens[i]={});for(l in e)vQ[l]===void 0&&this._addAttr(l,e[l]);this.reset(),this.onFinish=e.onFinish,this.onReset=e.onReset,this.onUpdate=e.onUpdate}_addAttr(e,n){var r=this.node,i=r._id,s,a,o,l,c,u,d,f;if(o=mn.tweens[i][e],o&&delete mn.attrs[i][o][e],s=r.getAttr(e),ee._isArray(n))if(a=[],c=Math.max(n.length,s.length),e==="points"&&n.length!==s.length&&(n.length>s.length?(d=s,s=ee._prepareArrayForTween(s,n,r.closed())):(u=n,n=ee._prepareArrayForTween(n,s,r.closed()))),e.indexOf("fill")===0)for(l=0;l<c;l++)if(l%2===0)a.push(n[l]-s[l]);else{var h=ee.colorToRGBA(s[l]);f=ee.colorToRGBA(n[l]),s[l]=h,a.push({r:f.r-h.r,g:f.g-h.g,b:f.b-h.b,a:f.a-h.a})}else for(l=0;l<c;l++)a.push(n[l]-s[l]);else o3.indexOf(e)!==-1?(s=ee.colorToRGBA(s),f=ee.colorToRGBA(n),a={r:f.r-s.r,g:f.g-s.g,b:f.b-s.b,a:f.a-s.a}):a=n-s;mn.attrs[i][this._id][e]={start:s,diff:a,end:n,trueEnd:u,trueStart:d},mn.tweens[i][e]=this._id}_tweenFunc(e){var n=this.node,r=mn.attrs[n._id][this._id],i,s,a,o,l,c,u,d;for(i in r){if(s=r[i],a=s.start,o=s.diff,d=s.end,ee._isArray(a))if(l=[],u=Math.max(a.length,d.length),i.indexOf("fill")===0)for(c=0;c<u;c++)c%2===0?l.push((a[c]||0)+o[c]*e):l.push("rgba("+Math.round(a[c].r+o[c].r*e)+","+Math.round(a[c].g+o[c].g*e)+","+Math.round(a[c].b+o[c].b*e)+","+(a[c].a+o[c].a*e)+")");else for(c=0;c<u;c++)l.push((a[c]||0)+o[c]*e);else o3.indexOf(i)!==-1?l="rgba("+Math.round(a.r+o.r*e)+","+Math.round(a.g+o.g*e)+","+Math.round(a.b+o.b*e)+","+(a.a+o.a*e)+")":l=a+o*e;n.setAttr(i,l)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{var e=this.node,n=mn.attrs[e._id][this._id];n.points&&n.points.trueEnd&&e.setAttr("points",n.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{var e=this.node,n=mn.attrs[e._id][this._id];n.points&&n.points.trueStart&&e.points(n.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(e){return this.tween.seek(e*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){var e=this.node._id,n=this._id,r=mn.tweens[e],i;this.pause();for(i in r)delete mn.tweens[e][i];delete mn.attrs[e][n]}}mn.attrs={};mn.tweens={};xe.prototype.to=function(t){var e=t.onFinish;t.node=this,t.onFinish=function(){this.destroy(),e&&e()};var n=new mn(t);n.play()};const bh={BackEaseIn(t,e,n,r){var i=1.70158;return n*(t/=r)*t*((i+1)*t-i)+e},BackEaseOut(t,e,n,r){var i=1.70158;return n*((t=t/r-1)*t*((i+1)*t+i)+1)+e},BackEaseInOut(t,e,n,r){var i=1.70158;return(t/=r/2)<1?n/2*(t*t*(((i*=1.525)+1)*t-i))+e:n/2*((t-=2)*t*(((i*=1.525)+1)*t+i)+2)+e},ElasticEaseIn(t,e,n,r,i,s){var a=0;return t===0?e:(t/=r)===1?e+n:(s||(s=r*.3),!i||i<Math.abs(n)?(i=n,a=s/4):a=s/(2*Math.PI)*Math.asin(n/i),-(i*Math.pow(2,10*(t-=1))*Math.sin((t*r-a)*(2*Math.PI)/s))+e)},ElasticEaseOut(t,e,n,r,i,s){var a=0;return t===0?e:(t/=r)===1?e+n:(s||(s=r*.3),!i||i<Math.abs(n)?(i=n,a=s/4):a=s/(2*Math.PI)*Math.asin(n/i),i*Math.pow(2,-10*t)*Math.sin((t*r-a)*(2*Math.PI)/s)+n+e)},ElasticEaseInOut(t,e,n,r,i,s){var a=0;return t===0?e:(t/=r/2)===2?e+n:(s||(s=r*(.3*1.5)),!i||i<Math.abs(n)?(i=n,a=s/4):a=s/(2*Math.PI)*Math.asin(n/i),t<1?-.5*(i*Math.pow(2,10*(t-=1))*Math.sin((t*r-a)*(2*Math.PI)/s))+e:i*Math.pow(2,-10*(t-=1))*Math.sin((t*r-a)*(2*Math.PI)/s)*.5+n+e)},BounceEaseOut(t,e,n,r){return(t/=r)<1/2.75?n*(7.5625*t*t)+e:t<2/2.75?n*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?n*(7.5625*(t-=2.25/2.75)*t+.9375)+e:n*(7.5625*(t-=2.625/2.75)*t+.984375)+e},BounceEaseIn(t,e,n,r){return n-bh.BounceEaseOut(r-t,0,n,r)+e},BounceEaseInOut(t,e,n,r){return t<r/2?bh.BounceEaseIn(t*2,0,n,r)*.5+e:bh.BounceEaseOut(t*2-r,0,n,r)*.5+n*.5+e},EaseIn(t,e,n,r){return n*(t/=r)*t+e},EaseOut(t,e,n,r){return-n*(t/=r)*(t-2)+e},EaseInOut(t,e,n,r){return(t/=r/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e},StrongEaseIn(t,e,n,r){return n*(t/=r)*t*t*t*t+e},StrongEaseOut(t,e,n,r){return n*((t=t/r-1)*t*t*t*t+1)+e},StrongEaseInOut(t,e,n,r){return(t/=r/2)<1?n/2*t*t*t*t*t+e:n/2*((t-=2)*t*t*t*t+2)+e},Linear(t,e,n,r){return n*t/r+e}},Fc=ee._assign(Ne,{Util:ee,Transform:Os,Node:xe,Container:_i,Stage:Ax,stages:c0,Layer:nu,FastLayer:n_,Group:Jd,DD:mt,Shape:he,shapes:xh,Animation:Ji,Tween:mn,Easings:bh,Context:Rx,Canvas:Ox});class go extends he{_sceneFunc(e){var n=Ne.getAngle(this.angle()),r=this.clockwise();e.beginPath(),e.arc(0,0,this.outerRadius(),0,n,r),e.arc(0,0,this.innerRadius(),n,0,!r),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}getSelfRect(){const e=this.innerRadius(),n=this.outerRadius(),r=this.clockwise(),i=Ne.getAngle(r?360-this.angle():this.angle()),s=Math.cos(Math.min(i,Math.PI)),a=1,o=Math.sin(Math.min(Math.max(Math.PI,i),3*Math.PI/2)),l=Math.sin(Math.min(i,Math.PI/2)),c=s*(s>0?e:n),u=a*n,d=o*(o>0?e:n),f=l*(l>0?n:e);return{x:c,y:r?-1*f:d,width:u-c,height:f-d}}}go.prototype._centroid=!0;go.prototype.className="Arc";go.prototype._attrsAffectingSize=["innerRadius","outerRadius"];un(go);W.addGetterSetter(go,"innerRadius",0,be());W.addGetterSetter(go,"outerRadius",0,be());W.addGetterSetter(go,"angle",0,be());W.addGetterSetter(go,"clockwise",!1,Ws());function y$(t,e,n,r,i,s,a){var o=Math.sqrt(Math.pow(n-t,2)+Math.pow(r-e,2)),l=Math.sqrt(Math.pow(i-n,2)+Math.pow(s-r,2)),c=a*o/(o+l),u=a*l/(o+l),d=n-c*(i-t),f=r-c*(s-e),h=n+u*(i-t),g=r+u*(s-e);return[d,f,h,g]}function l3(t,e){var n=t.length,r=[],i,s;for(i=2;i<n-2;i+=2)s=y$(t[i-2],t[i-1],t[i],t[i+1],t[i+2],t[i+3],e),!isNaN(s[0])&&(r.push(s[0]),r.push(s[1]),r.push(t[i]),r.push(t[i+1]),r.push(s[2]),r.push(s[3]));return r}class yo extends he{constructor(e){super(e),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(e){var n=this.points(),r=n.length,i=this.tension(),s=this.closed(),a=this.bezier(),o,l,c;if(r){if(e.beginPath(),e.moveTo(n[0],n[1]),i!==0&&r>4){for(o=this.getTensionPoints(),l=o.length,c=s?0:4,s||e.quadraticCurveTo(o[0],o[1],o[2],o[3]);c<l-2;)e.bezierCurveTo(o[c++],o[c++],o[c++],o[c++],o[c++],o[c++]);s||e.quadraticCurveTo(o[l-2],o[l-1],n[r-2],n[r-1])}else if(a)for(c=2;c<r;)e.bezierCurveTo(n[c++],n[c++],n[c++],n[c++],n[c++],n[c++]);else for(c=2;c<r;c+=2)e.lineTo(n[c],n[c+1]);s?(e.closePath(),e.fillStrokeShape(this)):e.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():l3(this.points(),this.tension())}_getTensionPointsClosed(){var e=this.points(),n=e.length,r=this.tension(),i=y$(e[n-2],e[n-1],e[0],e[1],e[2],e[3],r),s=y$(e[n-4],e[n-3],e[n-2],e[n-1],e[0],e[1],r),a=l3(e,r),o=[i[2],i[3]].concat(a).concat([s[0],s[1],e[n-2],e[n-1],s[2],s[3],i[0],i[1],e[0],e[1]]);return o}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){var e=this.points();if(e.length<4)return{x:e[0]||0,y:e[1]||0,width:0,height:0};this.tension()!==0?e=[e[0],e[1],...this._getTensionPoints(),e[e.length-2],e[e.length-1]]:e=this.points();for(var n=e[0],r=e[0],i=e[1],s=e[1],a,o,l=0;l<e.length/2;l++)a=e[l*2],o=e[l*2+1],n=Math.min(n,a),r=Math.max(r,a),i=Math.min(i,o),s=Math.max(s,o);return{x:n,y:i,width:r-n,height:s-i}}}yo.prototype.className="Line";yo.prototype._attrsAffectingSize=["points","bezier","tension"];un(yo);W.addGetterSetter(yo,"closed",!1);W.addGetterSetter(yo,"bezier",!1);W.addGetterSetter(yo,"tension",0,be());W.addGetterSetter(yo,"points",[],RY());class St extends he{constructor(e){super(e),this.dataArray=[],this.pathLength=0,this.dataArray=St.parsePathData(this.data()),this.pathLength=0;for(var n=0;n<this.dataArray.length;++n)this.pathLength+=this.dataArray[n].pathLength;this.on("dataChange.konva",function(){this.dataArray=St.parsePathData(this.data()),this.pathLength=0;for(var r=0;r<this.dataArray.length;++r)this.pathLength+=this.dataArray[r].pathLength})}_sceneFunc(e){var n=this.dataArray;e.beginPath();for(var r=!1,i=0;i<n.length;i++){var s=n[i].command,a=n[i].points;switch(s){case"L":e.lineTo(a[0],a[1]);break;case"M":e.moveTo(a[0],a[1]);break;case"C":e.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5]);break;case"Q":e.quadraticCurveTo(a[0],a[1],a[2],a[3]);break;case"A":var o=a[0],l=a[1],c=a[2],u=a[3],d=a[4],f=a[5],h=a[6],g=a[7],y=c>u?c:u,x=c>u?1:c/u,v=c>u?u/c:1;e.translate(o,l),e.rotate(h),e.scale(x,v),e.arc(0,0,y,d,d+f,1-g),e.scale(1/x,1/v),e.rotate(-h),e.translate(-o,-l);break;case"z":r=!0,e.closePath();break}}!r&&!this.hasFill()?e.strokeShape(this):e.fillStrokeShape(this)}getSelfRect(){var e=[];this.dataArray.forEach(function(c){if(c.command==="A"){var u=c.points[4],d=c.points[5],f=c.points[4]+d,h=Math.PI/180;if(Math.abs(u-f)<h&&(h=Math.abs(u-f)),d<0)for(let g=u-h;g>f;g-=h){const y=St.getPointOnEllipticalArc(c.points[0],c.points[1],c.points[2],c.points[3],g,0);e.push(y.x,y.y)}else for(let g=u+h;g<f;g+=h){const y=St.getPointOnEllipticalArc(c.points[0],c.points[1],c.points[2],c.points[3],g,0);e.push(y.x,y.y)}}else if(c.command==="C")for(let g=0;g<=1;g+=.01){const y=St.getPointOnCubicBezier(g,c.start.x,c.start.y,c.points[0],c.points[1],c.points[2],c.points[3],c.points[4],c.points[5]);e.push(y.x,y.y)}else e=e.concat(c.points)});for(var n=e[0],r=e[0],i=e[1],s=e[1],a,o,l=0;l<e.length/2;l++)a=e[l*2],o=e[l*2+1],isNaN(a)||(n=Math.min(n,a),r=Math.max(r,a)),isNaN(o)||(i=Math.min(i,o),s=Math.max(s,o));return{x:n,y:i,width:r-n,height:s-i}}getLength(){return this.pathLength}getPointAtLength(e){var n,r=0,i=this.dataArray.length;if(!i)return null;for(;r<i&&e>this.dataArray[r].pathLength;)e-=this.dataArray[r].pathLength,++r;if(r===i)return n=this.dataArray[r-1].points.slice(-2),{x:n[0],y:n[1]};if(e<.01)return n=this.dataArray[r].points.slice(0,2),{x:n[0],y:n[1]};var s=this.dataArray[r],a=s.points;switch(s.command){case"L":return St.getPointOnLine(e,s.start.x,s.start.y,a[0],a[1]);case"C":return St.getPointOnCubicBezier(e/s.pathLength,s.start.x,s.start.y,a[0],a[1],a[2],a[3],a[4],a[5]);case"Q":return St.getPointOnQuadraticBezier(e/s.pathLength,s.start.x,s.start.y,a[0],a[1],a[2],a[3]);case"A":var o=a[0],l=a[1],c=a[2],u=a[3],d=a[4],f=a[5],h=a[6];return d+=f*e/s.pathLength,St.getPointOnEllipticalArc(o,l,c,u,d,h)}return null}static getLineLength(e,n,r,i){return Math.sqrt((r-e)*(r-e)+(i-n)*(i-n))}static getPointOnLine(e,n,r,i,s,a,o){a===void 0&&(a=n),o===void 0&&(o=r);var l=(s-r)/(i-n+1e-8),c=Math.sqrt(e*e/(1+l*l));i<n&&(c*=-1);var u=l*c,d;if(i===n)d={x:a,y:o+u};else if((o-r)/(a-n+1e-8)===l)d={x:a+c,y:o+u};else{var f,h,g=this.getLineLength(n,r,i,s),y=(a-n)*(i-n)+(o-r)*(s-r);y=y/(g*g),f=n+y*(i-n),h=r+y*(s-r);var x=this.getLineLength(a,o,f,h),v=Math.sqrt(e*e-x*x);c=Math.sqrt(v*v/(1+l*l)),i<n&&(c*=-1),u=l*c,d={x:f+c,y:h+u}}return d}static getPointOnCubicBezier(e,n,r,i,s,a,o,l,c){function u(x){return x*x*x}function d(x){return 3*x*x*(1-x)}function f(x){return 3*x*(1-x)*(1-x)}function h(x){return(1-x)*(1-x)*(1-x)}var g=l*u(e)+a*d(e)+i*f(e)+n*h(e),y=c*u(e)+o*d(e)+s*f(e)+r*h(e);return{x:g,y}}static getPointOnQuadraticBezier(e,n,r,i,s,a,o){function l(h){return h*h}function c(h){return 2*h*(1-h)}function u(h){return(1-h)*(1-h)}var d=a*l(e)+i*c(e)+n*u(e),f=o*l(e)+s*c(e)+r*u(e);return{x:d,y:f}}static getPointOnEllipticalArc(e,n,r,i,s,a){var o=Math.cos(a),l=Math.sin(a),c={x:r*Math.cos(s),y:i*Math.sin(s)};return{x:e+(c.x*o-c.y*l),y:n+(c.x*l+c.y*o)}}static parsePathData(e){if(!e)return[];var n=e,r=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];n=n.replace(new RegExp(" ","g"),",");for(var i=0;i<r.length;i++)n=n.replace(new RegExp(r[i],"g"),"|"+r[i]);var s=n.split("|"),a=[],o=[],l=0,c=0,u=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi,d;for(i=1;i<s.length;i++){var f=s[i],h=f.charAt(0);for(f=f.slice(1),o.length=0;d=u.exec(f);)o.push(d[0]);for(var g=[],y=0,x=o.length;y<x;y++){if(o[y]==="00"){g.push(0,0);continue}var v=parseFloat(o[y]);isNaN(v)?g.push(0):g.push(v)}for(;g.length>0&&!isNaN(g[0]);){var b=null,S=[],k=l,$=c,T,_,R,P,O,B,H,V,K,X;switch(h){case"l":l+=g.shift(),c+=g.shift(),b="L",S.push(l,c);break;case"L":l=g.shift(),c=g.shift(),S.push(l,c);break;case"m":var q=g.shift(),te=g.shift();if(l+=q,c+=te,b="M",a.length>2&&a[a.length-1].command==="z"){for(var j=a.length-2;j>=0;j--)if(a[j].command==="M"){l=a[j].points[0]+q,c=a[j].points[1]+te;break}}S.push(l,c),h="l";break;case"M":l=g.shift(),c=g.shift(),b="M",S.push(l,c),h="L";break;case"h":l+=g.shift(),b="L",S.push(l,c);break;case"H":l=g.shift(),b="L",S.push(l,c);break;case"v":c+=g.shift(),b="L",S.push(l,c);break;case"V":c=g.shift(),b="L",S.push(l,c);break;case"C":S.push(g.shift(),g.shift(),g.shift(),g.shift()),l=g.shift(),c=g.shift(),S.push(l,c);break;case"c":S.push(l+g.shift(),c+g.shift(),l+g.shift(),c+g.shift()),l+=g.shift(),c+=g.shift(),b="C",S.push(l,c);break;case"S":_=l,R=c,T=a[a.length-1],T.command==="C"&&(_=l+(l-T.points[2]),R=c+(c-T.points[3])),S.push(_,R,g.shift(),g.shift()),l=g.shift(),c=g.shift(),b="C",S.push(l,c);break;case"s":_=l,R=c,T=a[a.length-1],T.command==="C"&&(_=l+(l-T.points[2]),R=c+(c-T.points[3])),S.push(_,R,l+g.shift(),c+g.shift()),l+=g.shift(),c+=g.shift(),b="C",S.push(l,c);break;case"Q":S.push(g.shift(),g.shift()),l=g.shift(),c=g.shift(),S.push(l,c);break;case"q":S.push(l+g.shift(),c+g.shift()),l+=g.shift(),c+=g.shift(),b="Q",S.push(l,c);break;case"T":_=l,R=c,T=a[a.length-1],T.command==="Q"&&(_=l+(l-T.points[0]),R=c+(c-T.points[1])),l=g.shift(),c=g.shift(),b="Q",S.push(_,R,l,c);break;case"t":_=l,R=c,T=a[a.length-1],T.command==="Q"&&(_=l+(l-T.points[0]),R=c+(c-T.points[1])),l+=g.shift(),c+=g.shift(),b="Q",S.push(_,R,l,c);break;case"A":P=g.shift(),O=g.shift(),B=g.shift(),H=g.shift(),V=g.shift(),K=l,X=c,l=g.shift(),c=g.shift(),b="A",S=this.convertEndpointToCenterParameterization(K,X,l,c,H,V,P,O,B);break;case"a":P=g.shift(),O=g.shift(),B=g.shift(),H=g.shift(),V=g.shift(),K=l,X=c,l+=g.shift(),c+=g.shift(),b="A",S=this.convertEndpointToCenterParameterization(K,X,l,c,H,V,P,O,B);break}a.push({command:b||h,points:S,start:{x:k,y:$},pathLength:this.calcLength(k,$,b||h,S)})}(h==="z"||h==="Z")&&a.push({command:"z",points:[],start:void 0,pathLength:0})}return a}static calcLength(e,n,r,i){var s,a,o,l,c=St;switch(r){case"L":return c.getLineLength(e,n,i[0],i[1]);case"C":for(s=0,a=c.getPointOnCubicBezier(0,e,n,i[0],i[1],i[2],i[3],i[4],i[5]),l=.01;l<=1;l+=.01)o=c.getPointOnCubicBezier(l,e,n,i[0],i[1],i[2],i[3],i[4],i[5]),s+=c.getLineLength(a.x,a.y,o.x,o.y),a=o;return s;case"Q":for(s=0,a=c.getPointOnQuadraticBezier(0,e,n,i[0],i[1],i[2],i[3]),l=.01;l<=1;l+=.01)o=c.getPointOnQuadraticBezier(l,e,n,i[0],i[1],i[2],i[3]),s+=c.getLineLength(a.x,a.y,o.x,o.y),a=o;return s;case"A":s=0;var u=i[4],d=i[5],f=i[4]+d,h=Math.PI/180;if(Math.abs(u-f)<h&&(h=Math.abs(u-f)),a=c.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],u,0),d<0)for(l=u-h;l>f;l-=h)o=c.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],l,0),s+=c.getLineLength(a.x,a.y,o.x,o.y),a=o;else for(l=u+h;l<f;l+=h)o=c.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],l,0),s+=c.getLineLength(a.x,a.y,o.x,o.y),a=o;return o=c.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],f,0),s+=c.getLineLength(a.x,a.y,o.x,o.y),s}return 0}static convertEndpointToCenterParameterization(e,n,r,i,s,a,o,l,c){var u=c*(Math.PI/180),d=Math.cos(u)*(e-r)/2+Math.sin(u)*(n-i)/2,f=-1*Math.sin(u)*(e-r)/2+Math.cos(u)*(n-i)/2,h=d*d/(o*o)+f*f/(l*l);h>1&&(o*=Math.sqrt(h),l*=Math.sqrt(h));var g=Math.sqrt((o*o*(l*l)-o*o*(f*f)-l*l*(d*d))/(o*o*(f*f)+l*l*(d*d)));s===a&&(g*=-1),isNaN(g)&&(g=0);var y=g*o*f/l,x=g*-l*d/o,v=(e+r)/2+Math.cos(u)*y-Math.sin(u)*x,b=(n+i)/2+Math.sin(u)*y+Math.cos(u)*x,S=function(O){return Math.sqrt(O[0]*O[0]+O[1]*O[1])},k=function(O,B){return(O[0]*B[0]+O[1]*B[1])/(S(O)*S(B))},$=function(O,B){return(O[0]*B[1]<O[1]*B[0]?-1:1)*Math.acos(k(O,B))},T=$([1,0],[(d-y)/o,(f-x)/l]),_=[(d-y)/o,(f-x)/l],R=[(-1*d-y)/o,(-1*f-x)/l],P=$(_,R);return k(_,R)<=-1&&(P=Math.PI),k(_,R)>=1&&(P=0),a===0&&P>0&&(P=P-2*Math.PI),a===1&&P<0&&(P=P+2*Math.PI),[v,b,o,l,T,P,u,a]}}St.prototype.className="Path";St.prototype._attrsAffectingSize=["data"];un(St);W.addGetterSetter(St,"data");class ru extends yo{_sceneFunc(e){super._sceneFunc(e);var n=Math.PI*2,r=this.points(),i=r,s=this.tension()!==0&&r.length>4;s&&(i=this.getTensionPoints());var a=this.pointerLength(),o=r.length,l,c;if(s){const f=[i[i.length-4],i[i.length-3],i[i.length-2],i[i.length-1],r[o-2],r[o-1]],h=St.calcLength(i[i.length-4],i[i.length-3],"C",f),g=St.getPointOnQuadraticBezier(Math.min(1,1-a/h),f[0],f[1],f[2],f[3],f[4],f[5]);l=r[o-2]-g.x,c=r[o-1]-g.y}else l=r[o-2]-r[o-4],c=r[o-1]-r[o-3];var u=(Math.atan2(c,l)+n)%n,d=this.pointerWidth();this.pointerAtEnding()&&(e.save(),e.beginPath(),e.translate(r[o-2],r[o-1]),e.rotate(u),e.moveTo(0,0),e.lineTo(-a,d/2),e.lineTo(-a,-d/2),e.closePath(),e.restore(),this.__fillStroke(e)),this.pointerAtBeginning()&&(e.save(),e.beginPath(),e.translate(r[0],r[1]),s?(l=(i[0]+i[2])/2-r[0],c=(i[1]+i[3])/2-r[1]):(l=r[2]-r[0],c=r[3]-r[1]),e.rotate((Math.atan2(-c,-l)+n)%n),e.moveTo(0,0),e.lineTo(-a,d/2),e.lineTo(-a,-d/2),e.closePath(),e.restore(),this.__fillStroke(e))}__fillStroke(e){var n=this.dashEnabled();n&&(this.attrs.dashEnabled=!1,e.setLineDash([])),e.fillStrokeShape(this),n&&(this.attrs.dashEnabled=!0)}getSelfRect(){const e=super.getSelfRect(),n=this.pointerWidth()/2;return{x:e.x-n,y:e.y-n,width:e.width+n*2,height:e.height+n*2}}}ru.prototype.className="Arrow";un(ru);W.addGetterSetter(ru,"pointerLength",10,be());W.addGetterSetter(ru,"pointerWidth",10,be());W.addGetterSetter(ru,"pointerAtBeginning",!1);W.addGetterSetter(ru,"pointerAtEnding",!0);let Cf=class extends he{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius()!==e/2&&this.radius(e/2)}setHeight(e){this.radius()!==e/2&&this.radius(e/2)}};Cf.prototype._centroid=!0;Cf.prototype.className="Circle";Cf.prototype._attrsAffectingSize=["radius"];un(Cf);W.addGetterSetter(Cf,"radius",0,be());class Ol extends he{_sceneFunc(e){var n=this.radiusX(),r=this.radiusY();e.beginPath(),e.save(),n!==r&&e.scale(1,r/n),e.arc(0,0,n,0,Math.PI*2,!1),e.restore(),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(e){this.radiusX(e/2)}setHeight(e){this.radiusY(e/2)}}Ol.prototype.className="Ellipse";Ol.prototype._centroid=!0;Ol.prototype._attrsAffectingSize=["radiusX","radiusY"];un(Ol);W.addComponentsGetterSetter(Ol,"radius",["x","y"]);W.addGetterSetter(Ol,"radiusX",0,be());W.addGetterSetter(Ol,"radiusY",0,be());let Ea=class xB extends he{constructor(e){super(e),this.on("imageChange.konva",()=>{this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const e=this.image();e&&e.complete||e&&e.readyState===4||e&&e.addEventListener&&e.addEventListener("load",()=>{this._requestDraw()})}_useBufferCanvas(){return super._useBufferCanvas(!0)}_sceneFunc(e){const n=this.getWidth(),r=this.getHeight(),i=this.cornerRadius(),s=this.attrs.image;let a;if(s){const o=this.attrs.cropWidth,l=this.attrs.cropHeight;o&&l?a=[s,this.cropX(),this.cropY(),o,l,0,0,n,r]:a=[s,0,0,n,r]}(this.hasFill()||this.hasStroke()||i)&&(e.beginPath(),i?ee.drawRoundedRectPath(e,n,r,i):e.rect(0,0,n,r),e.closePath(),e.fillStrokeShape(this)),s&&(i&&e.clip(),e.drawImage.apply(e,a))}_hitFunc(e){var n=this.width(),r=this.height(),i=this.cornerRadius();e.beginPath(),i?ee.drawRoundedRectPath(e,n,r,i):e.rect(0,0,n,r),e.closePath(),e.fillStrokeShape(this)}getWidth(){var e,n;return(e=this.attrs.width)!==null&&e!==void 0?e:(n=this.image())===null||n===void 0?void 0:n.width}getHeight(){var e,n;return(e=this.attrs.height)!==null&&e!==void 0?e:(n=this.image())===null||n===void 0?void 0:n.height}static fromURL(e,n,r=null){var i=ee.createImageElement();i.onload=function(){var s=new xB({image:i});n(s)},i.onerror=r,i.crossOrigin="Anonymous",i.src=e}};Ea.prototype.className="Image";un(Ea);W.addGetterSetter(Ea,"cornerRadius",0,ZT(4));W.addGetterSetter(Ea,"image");W.addComponentsGetterSetter(Ea,"crop",["x","y","width","height"]);W.addGetterSetter(Ea,"cropX",0,be());W.addGetterSetter(Ea,"cropY",0,be());W.addGetterSetter(Ea,"cropWidth",0,be());W.addGetterSetter(Ea,"cropHeight",0,be());var bB=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],SQ="Change.konva",kQ="none",v$="up",x$="right",b$="down",w$="left",CQ=bB.length;let r_=class extends Jd{constructor(e){super(e),this.on("add.konva",function(n){this._addListeners(n.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(e){var n=this,r,i=function(){n._sync()};for(r=0;r<CQ;r++)e.on(bB[r]+SQ,i)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){var e=this.getText(),n=this.getTag(),r,i,s,a,o,l,c;if(e&&n){switch(r=e.width(),i=e.height(),s=n.pointerDirection(),a=n.pointerWidth(),c=n.pointerHeight(),o=0,l=0,s){case v$:o=r/2,l=-1*c;break;case x$:o=r+a,l=i/2;break;case b$:o=r/2,l=i+c;break;case w$:o=-1*a,l=i/2;break}n.setAttrs({x:-1*o,y:-1*l,width:r,height:i}),e.setAttrs({x:-1*o,y:-1*l})}}};r_.prototype.className="Label";un(r_);let iu=class extends he{_sceneFunc(e){var n=this.width(),r=this.height(),i=this.pointerDirection(),s=this.pointerWidth(),a=this.pointerHeight(),o=this.cornerRadius();let l=0,c=0,u=0,d=0;typeof o=="number"?l=c=u=d=Math.min(o,n/2,r/2):(l=Math.min(o[0]||0,n/2,r/2),c=Math.min(o[1]||0,n/2,r/2),d=Math.min(o[2]||0,n/2,r/2),u=Math.min(o[3]||0,n/2,r/2)),e.beginPath(),e.moveTo(l,0),i===v$&&(e.lineTo((n-s)/2,0),e.lineTo(n/2,-1*a),e.lineTo((n+s)/2,0)),e.lineTo(n-c,0),e.arc(n-c,c,c,Math.PI*3/2,0,!1),i===x$&&(e.lineTo(n,(r-a)/2),e.lineTo(n+s,r/2),e.lineTo(n,(r+a)/2)),e.lineTo(n,r-d),e.arc(n-d,r-d,d,0,Math.PI/2,!1),i===b$&&(e.lineTo((n+s)/2,r),e.lineTo(n/2,r+a),e.lineTo((n-s)/2,r)),e.lineTo(u,r),e.arc(u,r-u,u,Math.PI/2,Math.PI,!1),i===w$&&(e.lineTo(0,(r+a)/2),e.lineTo(-1*s,r/2),e.lineTo(0,(r-a)/2)),e.lineTo(0,l),e.arc(l,l,l,Math.PI,Math.PI*3/2,!1),e.closePath(),e.fillStrokeShape(this)}getSelfRect(){var e=0,n=0,r=this.pointerWidth(),i=this.pointerHeight(),s=this.pointerDirection(),a=this.width(),o=this.height();return s===v$?(n-=i,o+=i):s===b$?o+=i:s===w$?(e-=r*1.5,a+=r):s===x$&&(a+=r*1.5),{x:e,y:n,width:a,height:o}}};iu.prototype.className="Tag";un(iu);W.addGetterSetter(iu,"pointerDirection",kQ);W.addGetterSetter(iu,"pointerWidth",0,be());W.addGetterSetter(iu,"pointerHeight",0,be());W.addGetterSetter(iu,"cornerRadius",0,ZT(4));let km=class extends he{_sceneFunc(e){var n=this.cornerRadius(),r=this.width(),i=this.height();e.beginPath(),n?ee.drawRoundedRectPath(e,r,i,n):e.rect(0,0,r,i),e.closePath(),e.fillStrokeShape(this)}};km.prototype.className="Rect";un(km);W.addGetterSetter(km,"cornerRadius",0,ZT(4));let su=class extends he{_sceneFunc(e){const n=this._getPoints();e.beginPath(),e.moveTo(n[0].x,n[0].y);for(var r=1;r<n.length;r++)e.lineTo(n[r].x,n[r].y);e.closePath(),e.fillStrokeShape(this)}_getPoints(){const e=this.attrs.sides,n=this.attrs.radius||0,r=[];for(var i=0;i<e;i++)r.push({x:n*Math.sin(i*2*Math.PI/e),y:-1*n*Math.cos(i*2*Math.PI/e)});return r}getSelfRect(){const e=this._getPoints();var n=e[0].x,r=e[0].y,i=e[0].x,s=e[0].y;return e.forEach(a=>{n=Math.min(n,a.x),r=Math.max(r,a.x),i=Math.min(i,a.y),s=Math.max(s,a.y)}),{x:n,y:i,width:r-n,height:s-i}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}};su.prototype.className="RegularPolygon";su.prototype._centroid=!0;su.prototype._attrsAffectingSize=["radius"];un(su);W.addGetterSetter(su,"radius",0,be());W.addGetterSetter(su,"sides",0,be());var c3=Math.PI*2;class au extends he{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.innerRadius(),0,c3,!1),e.moveTo(this.outerRadius(),0),e.arc(0,0,this.outerRadius(),c3,0,!0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}au.prototype.className="Ring";au.prototype._centroid=!0;au.prototype._attrsAffectingSize=["innerRadius","outerRadius"];un(au);W.addGetterSetter(au,"innerRadius",0,be());W.addGetterSetter(au,"outerRadius",0,be());class Ta extends he{constructor(e){super(e),this._updated=!0,this.anim=new Ji(()=>{var n=this._updated;return this._updated=!1,n}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(e){var n=this.animation(),r=this.frameIndex(),i=r*4,s=this.animations()[n],a=this.frameOffsets(),o=s[i+0],l=s[i+1],c=s[i+2],u=s[i+3],d=this.image();if((this.hasFill()||this.hasStroke())&&(e.beginPath(),e.rect(0,0,c,u),e.closePath(),e.fillStrokeShape(this)),d)if(a){var f=a[n],h=r*2;e.drawImage(d,o,l,c,u,f[h+0],f[h+1],c,u)}else e.drawImage(d,o,l,c,u,0,0,c,u)}_hitFunc(e){var n=this.animation(),r=this.frameIndex(),i=r*4,s=this.animations()[n],a=this.frameOffsets(),o=s[i+2],l=s[i+3];if(e.beginPath(),a){var c=a[n],u=r*2;e.rect(c[u+0],c[u+1],o,l)}else e.rect(0,0,o,l);e.closePath(),e.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){var e=this;this.interval=setInterval(function(){e._updateIndex()},1e3/this.frameRate())}start(){if(!this.isRunning()){var e=this.getLayer();this.anim.setLayers(e),this._setInterval(),this.anim.start()}}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){var e=this.frameIndex(),n=this.animation(),r=this.animations(),i=r[n],s=i.length/4;e<s-1?this.frameIndex(e+1):this.frameIndex(0)}}Ta.prototype.className="Sprite";un(Ta);W.addGetterSetter(Ta,"animation");W.addGetterSetter(Ta,"animations");W.addGetterSetter(Ta,"frameOffsets");W.addGetterSetter(Ta,"image");W.addGetterSetter(Ta,"frameIndex",0,be());W.addGetterSetter(Ta,"frameRate",17,be());W.backCompat(Ta,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});class Al extends he{_sceneFunc(e){var n=this.innerRadius(),r=this.outerRadius(),i=this.numPoints();e.beginPath(),e.moveTo(0,0-r);for(var s=1;s<i*2;s++){var a=s%2===0?r:n,o=a*Math.sin(s*Math.PI/i),l=-1*a*Math.cos(s*Math.PI/i);e.lineTo(o,l)}e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}Al.prototype.className="Star";Al.prototype._centroid=!0;Al.prototype._attrsAffectingSize=["innerRadius","outerRadius"];un(Al);W.addGetterSetter(Al,"numPoints",5,be());W.addGetterSetter(Al,"innerRadius",0,be());W.addGetterSetter(Al,"outerRadius",0,be());function wB(t){return Array.from(t)}var zu="auto",$Q="center",Op="justify",EQ="Change.konva",TQ="2d",u3="-",SB="left",_Q="text",IQ="Text",NQ="top",RQ="bottom",d3="middle",kB="normal",OQ="px ",$v=" ",AQ="right",PQ="word",DQ="char",f3="none",kk="…",CB=["fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],FQ=CB.length;function LQ(t){return t.split(",").map(e=>{e=e.trim();const n=e.indexOf(" ")>=0,r=e.indexOf('"')>=0||e.indexOf("'")>=0;return n&&!r&&(e=`"${e}"`),e}).join(", ")}var Ev;function Ck(){return Ev||(Ev=ee.createCanvasElement().getContext(TQ),Ev)}function MQ(t){t.fillText(this._partialText,this._partialTextX,this._partialTextY)}function BQ(t){t.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function zQ(t){return t=t||{},!t.fillLinearGradientColorStops&&!t.fillRadialGradientColorStops&&!t.fillPatternImage&&(t.fill=t.fill||"black"),t}let cn=class extends he{constructor(e){super(zQ(e)),this._partialTextX=0,this._partialTextY=0;for(var n=0;n<FQ;n++)this.on(CB[n]+EQ,this._setTextData);this._setTextData()}_sceneFunc(e){var n=this.textArr,r=n.length;if(this.text()){var i=this.padding(),s=this.fontSize(),a=this.lineHeight()*s,o=this.verticalAlign(),l=0,c=this.align(),u=this.getWidth(),d=this.letterSpacing(),f=this.fill(),h=this.textDecoration(),g=h.indexOf("underline")!==-1,y=h.indexOf("line-through")!==-1,x,v=0,v=a/2,b=0,S=0;for(e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",d3),e.setAttr("textAlign",SB),o===d3?l=(this.getHeight()-r*a-i*2)/2:o===RQ&&(l=this.getHeight()-r*a-i*2),e.translate(i,l+i),x=0;x<r;x++){var b=0,S=0,k=n[x],$=k.text,T=k.width,_=k.lastInParagraph,R,P,O;if(e.save(),c===AQ?b+=u-T-i*2:c===$Q&&(b+=(u-T-i*2)/2),g){e.save(),e.beginPath(),e.moveTo(b,v+S+Math.round(s/2)),R=$.split(" ").length-1,P=R===0,O=c===Op&&!_?u-i*2:T,e.lineTo(b+Math.round(O),v+S+Math.round(s/2)),e.lineWidth=s/15;const q=this._getLinearGradient();e.strokeStyle=q||f,e.stroke(),e.restore()}if(y){e.save(),e.beginPath(),e.moveTo(b,v+S),R=$.split(" ").length-1,P=R===0,O=c===Op&&_&&!P?u-i*2:T,e.lineTo(b+Math.round(O),v+S),e.lineWidth=s/15;const q=this._getLinearGradient();e.strokeStyle=q||f,e.stroke(),e.restore()}if(d!==0||c===Op){R=$.split(" ").length-1;for(var B=wB($),H=0;H<B.length;H++){var V=B[H];V===" "&&!_&&c===Op&&(b+=(u-i*2-T)/R),this._partialTextX=b,this._partialTextY=v+S,this._partialText=V,e.fillStrokeShape(this),b+=this.measureSize(V).width+d}}else this._partialTextX=b,this._partialTextY=v+S,this._partialText=$,e.fillStrokeShape(this);e.restore(),r>1&&(v+=a)}}}_hitFunc(e){var n=this.getWidth(),r=this.getHeight();e.beginPath(),e.rect(0,0,n,r),e.closePath(),e.fillStrokeShape(this)}setText(e){var n=ee._isString(e)?e:e==null?"":e+"";return this._setAttr(_Q,n),this}getWidth(){var e=this.attrs.width===zu||this.attrs.width===void 0;return e?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){var e=this.attrs.height===zu||this.attrs.height===void 0;return e?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return ee.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(e){var n=Ck(),r=this.fontSize(),i;return n.save(),n.font=this._getContextFont(),i=n.measureText(e),n.restore(),{width:i.width,height:r}}_getContextFont(){return this.fontStyle()+$v+this.fontVariant()+$v+(this.fontSize()+OQ)+LQ(this.fontFamily())}_addTextLine(e){this.align()===Op&&(e=e.trim());var r=this._getTextWidth(e);return this.textArr.push({text:e,width:r,lastInParagraph:!1})}_getTextWidth(e){var n=this.letterSpacing(),r=e.length;return Ck().measureText(e).width+(r?n*(r-1):0)}_setTextData(){var e=this.text().split(`
`),n=+this.fontSize(),r=0,i=this.lineHeight()*n,s=this.attrs.width,a=this.attrs.height,o=s!==zu&&s!==void 0,l=a!==zu&&a!==void 0,c=this.padding(),u=s-c*2,d=a-c*2,f=0,h=this.wrap(),g=h!==f3,y=h!==DQ&&g,x=this.ellipsis();this.textArr=[],Ck().font=this._getContextFont();for(var v=x?this._getTextWidth(kk):0,b=0,S=e.length;b<S;++b){var k=e[b],$=this._getTextWidth(k);if(o&&$>u)for(;k.length>0;){for(var T=0,_=k.length,R="",P=0;T<_;){var O=T+_>>>1,B=k.slice(0,O+1),H=this._getTextWidth(B)+v;H<=u?(T=O+1,R=B,P=H):_=O}if(R){if(y){var V,K=k[R.length],X=K===$v||K===u3;X&&P<=u?V=R.length:V=Math.max(R.lastIndexOf($v),R.lastIndexOf(u3))+1,V>0&&(T=V,R=R.slice(0,T),P=this._getTextWidth(R))}R=R.trimRight(),this._addTextLine(R),r=Math.max(r,P),f+=i;var q=this._shouldHandleEllipsis(f);if(q){this._tryToAddEllipsisToLastLine();break}if(k=k.slice(T),k=k.trimLeft(),k.length>0&&($=this._getTextWidth(k),$<=u)){this._addTextLine(k),f+=i,r=Math.max(r,$);break}}else break}else this._addTextLine(k),f+=i,r=Math.max(r,$),this._shouldHandleEllipsis(f)&&b<S-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),l&&f+i>d)break}this.textHeight=n,this.textWidth=r}_shouldHandleEllipsis(e){var n=+this.fontSize(),r=this.lineHeight()*n,i=this.attrs.height,s=i!==zu&&i!==void 0,a=this.padding(),o=i-a*2,l=this.wrap(),c=l!==f3;return!c||s&&e+r>o}_tryToAddEllipsisToLastLine(){var e=this.attrs.width,n=e!==zu&&e!==void 0,r=this.padding(),i=e-r*2,s=this.ellipsis(),a=this.textArr[this.textArr.length-1];if(!(!a||!s)){if(n){var o=this._getTextWidth(a.text+kk)<i;o||(a.text=a.text.slice(0,a.text.length-3))}this.textArr.splice(this.textArr.length-1,1),this._addTextLine(a.text+kk)}}getStrokeScaleEnabled(){return!0}};cn.prototype._fillFunc=MQ;cn.prototype._strokeFunc=BQ;cn.prototype.className=IQ;cn.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];un(cn);W.overWriteSetter(cn,"width",JT());W.overWriteSetter(cn,"height",JT());W.addGetterSetter(cn,"fontFamily","Arial");W.addGetterSetter(cn,"fontSize",12,be());W.addGetterSetter(cn,"fontStyle",kB);W.addGetterSetter(cn,"fontVariant",kB);W.addGetterSetter(cn,"padding",0,be());W.addGetterSetter(cn,"align",SB);W.addGetterSetter(cn,"verticalAlign",NQ);W.addGetterSetter(cn,"lineHeight",1,be());W.addGetterSetter(cn,"wrap",PQ);W.addGetterSetter(cn,"ellipsis",!1,Ws());W.addGetterSetter(cn,"letterSpacing",0,be());W.addGetterSetter(cn,"text","",kf());W.addGetterSetter(cn,"textDecoration","");var jQ="",$B="normal";function EB(t){t.fillText(this.partialText,0,0)}function TB(t){t.strokeText(this.partialText,0,0)}class Dn extends he{constructor(e){super(e),this.dummyCanvas=ee.createCanvasElement(),this.dataArray=[],this.dataArray=St.parsePathData(this.attrs.data),this.on("dataChange.konva",function(){this.dataArray=St.parsePathData(this.attrs.data),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_sceneFunc(e){e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",this.textBaseline()),e.setAttr("textAlign","left"),e.save();var n=this.textDecoration(),r=this.fill(),i=this.fontSize(),s=this.glyphInfo;n==="underline"&&e.beginPath();for(var a=0;a<s.length;a++){e.save();var o=s[a].p0;e.translate(o.x,o.y),e.rotate(s[a].rotation),this.partialText=s[a].text,e.fillStrokeShape(this),n==="underline"&&(a===0&&e.moveTo(0,i/2+1),e.lineTo(i,i/2+1)),e.restore()}n==="underline"&&(e.strokeStyle=r,e.lineWidth=i/20,e.stroke()),e.restore()}_hitFunc(e){e.beginPath();var n=this.glyphInfo;if(n.length>=1){var r=n[0].p0;e.moveTo(r.x,r.y)}for(var i=0;i<n.length;i++){var s=n[i].p1;e.lineTo(s.x,s.y)}e.setAttr("lineWidth",this.fontSize()),e.setAttr("strokeStyle",this.colorKey),e.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return ee.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(e){return cn.prototype.setText.call(this,e)}_getContextFont(){return cn.prototype._getContextFont.call(this)}_getTextSize(e){var n=this.dummyCanvas,r=n.getContext("2d");r.save(),r.font=this._getContextFont();var i=r.measureText(e);return r.restore(),{width:i.width,height:parseInt(this.attrs.fontSize,10)}}_setTextData(){var e=this,n=this._getTextSize(this.attrs.text),r=this.letterSpacing(),i=this.align(),s=this.kerningFunc();this.textWidth=n.width,this.textHeight=n.height;var a=Math.max(this.textWidth+((this.attrs.text||"").length-1)*r,0);this.glyphInfo=[];for(var o=0,l=0;l<e.dataArray.length;l++)e.dataArray[l].pathLength>0&&(o+=e.dataArray[l].pathLength);var c=0;i==="center"&&(c=Math.max(0,o/2-a/2)),i==="right"&&(c=Math.max(0,o-a));for(var u=wB(this.text()),d=this.text().split(" ").length-1,f,h,g,y=-1,x=0,v=function(){x=0;for(var H=e.dataArray,V=y+1;V<H.length;V++){if(H[V].pathLength>0)return y=V,H[V];H[V].command==="M"&&(f={x:H[V].points[0],y:H[V].points[1]})}return{}},b=function(H){var V=e._getTextSize(H).width+r;H===" "&&i==="justify"&&(V+=(o-a)/d);var K=0,X=0;for(h=void 0;Math.abs(V-K)/V>.01&&X<20;){X++;for(var q=K;g===void 0;)g=v(),g&&q+g.pathLength<V&&(q+=g.pathLength,g=void 0);if(Object.keys(g).length===0||f===void 0)return;var te=!1;switch(g.command){case"L":St.getLineLength(f.x,f.y,g.points[0],g.points[1])>V?h=St.getPointOnLine(V,f.x,f.y,g.points[0],g.points[1],f.x,f.y):g=void 0;break;case"A":var j=g.points[4],Y=g.points[5],Q=g.points[4]+Y;x===0?x=j+1e-8:V>K?x+=Math.PI/180*Y/Math.abs(Y):x-=Math.PI/360*Y/Math.abs(Y),(Y<0&&x<Q||Y>=0&&x>Q)&&(x=Q,te=!0),h=St.getPointOnEllipticalArc(g.points[0],g.points[1],g.points[2],g.points[3],x,g.points[6]);break;case"C":x===0?V>g.pathLength?x=1e-8:x=V/g.pathLength:V>K?x+=(V-K)/g.pathLength/2:x=Math.max(x-(K-V)/g.pathLength/2,0),x>1&&(x=1,te=!0),h=St.getPointOnCubicBezier(x,g.start.x,g.start.y,g.points[0],g.points[1],g.points[2],g.points[3],g.points[4],g.points[5]);break;case"Q":x===0?x=V/g.pathLength:V>K?x+=(V-K)/g.pathLength:x-=(K-V)/g.pathLength,x>1&&(x=1,te=!0),h=St.getPointOnQuadraticBezier(x,g.start.x,g.start.y,g.points[0],g.points[1],g.points[2],g.points[3]);break}h!==void 0&&(K=St.getLineLength(f.x,f.y,h.x,h.y)),te&&(te=!1,g=void 0)}},S="C",k=e._getTextSize(S).width+r,$=c/k-1,T=0;T<$&&(b(S),!(f===void 0||h===void 0));T++)f=h;for(var _=0;_<u.length&&(b(u[_]),!(f===void 0||h===void 0));_++){var R=St.getLineLength(f.x,f.y,h.x,h.y),P=0;if(s)try{P=s(u[_-1],u[_])*this.fontSize()}catch{P=0}f.x+=P,h.x+=P,this.textWidth+=P;var O=St.getPointOnLine(P+R/2,f.x,f.y,h.x,h.y),B=Math.atan2(h.y-f.y,h.x-f.x);this.glyphInfo.push({transposeX:O.x,transposeY:O.y,text:u[_],rotation:B,p0:f,p1:h}),f=h}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};var e=[];this.glyphInfo.forEach(function(u){e.push(u.p0.x),e.push(u.p0.y),e.push(u.p1.x),e.push(u.p1.y)});for(var n=e[0]||0,r=e[0]||0,i=e[1]||0,s=e[1]||0,a,o,l=0;l<e.length/2;l++)a=e[l*2],o=e[l*2+1],n=Math.min(n,a),r=Math.max(r,a),i=Math.min(i,o),s=Math.max(s,o);var c=this.fontSize();return{x:n-c/2,y:i-c/2,width:r-n+c,height:s-i+c}}destroy(){return ee.releaseCanvas(this.dummyCanvas),super.destroy()}}Dn.prototype._fillFunc=EB;Dn.prototype._strokeFunc=TB;Dn.prototype._fillFuncHit=EB;Dn.prototype._strokeFuncHit=TB;Dn.prototype.className="TextPath";Dn.prototype._attrsAffectingSize=["text","fontSize","data"];un(Dn);W.addGetterSetter(Dn,"data");W.addGetterSetter(Dn,"fontFamily","Arial");W.addGetterSetter(Dn,"fontSize",12,be());W.addGetterSetter(Dn,"fontStyle",$B);W.addGetterSetter(Dn,"align","left");W.addGetterSetter(Dn,"letterSpacing",0,be());W.addGetterSetter(Dn,"textBaseline","middle");W.addGetterSetter(Dn,"fontVariant",$B);W.addGetterSetter(Dn,"text",jQ);W.addGetterSetter(Dn,"textDecoration",null);W.addGetterSetter(Dn,"kerningFunc",null);var _B="tr-konva",VQ=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange"].map(t=>t+`.${_B}`).join(" "),p3="nodesRect",WQ=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],UQ={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135};const GQ="ontouchstart"in Ne._global;function HQ(t,e){if(t==="rotater")return"crosshair";e+=ee.degToRad(UQ[t]||0);var n=(ee.radToDeg(e)%360+360)%360;return ee._inRange(n,315+22.5,360)||ee._inRange(n,0,22.5)?"ns-resize":ee._inRange(n,45-22.5,45+22.5)?"nesw-resize":ee._inRange(n,90-22.5,90+22.5)?"ew-resize":ee._inRange(n,135-22.5,135+22.5)?"nwse-resize":ee._inRange(n,180-22.5,180+22.5)?"ns-resize":ee._inRange(n,225-22.5,225+22.5)?"nesw-resize":ee._inRange(n,270-22.5,270+22.5)?"ew-resize":ee._inRange(n,315-22.5,315+22.5)?"nwse-resize":(ee.error("Transformer has unknown angle for cursor detection: "+n),"pointer")}var U0=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"],h3=1e8;function qQ(t){return{x:t.x+t.width/2*Math.cos(t.rotation)+t.height/2*Math.sin(-t.rotation),y:t.y+t.height/2*Math.cos(t.rotation)+t.width/2*Math.sin(t.rotation)}}function IB(t,e,n){const r=n.x+(t.x-n.x)*Math.cos(e)-(t.y-n.y)*Math.sin(e),i=n.y+(t.x-n.x)*Math.sin(e)+(t.y-n.y)*Math.cos(e);return Object.assign(Object.assign({},t),{rotation:t.rotation+e,x:r,y:i})}function KQ(t,e){const n=qQ(t);return IB(t,e,n)}function XQ(t,e,n){let r=e;for(let i=0;i<t.length;i++){const s=Ne.getAngle(t[i]),a=Math.abs(s-e)%(Math.PI*2);Math.min(a,Math.PI*2-a)<n&&(r=s)}return r}let yt=class extends Jd{constructor(e){super(e),this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(VQ,this.update),this.getNode()&&this.update()}attachTo(e){return this.setNode(e),this}setNode(e){return ee.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([e])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return _B+this._id}setNodes(e=[]){this._nodes&&this._nodes.length&&this.detach();const n=e.filter(i=>i.isAncestorOf(this)?(ee.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);this._nodes=e=n,e.length===1&&this.useSingleNodeRotation()?this.rotation(e[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(i=>{const s=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()},a=i._attrsAffectingSize.map(o=>o+"Change."+this._getEventNamespace()).join(" ");i.on(a,s),i.on(WQ.map(o=>o+`.${this._getEventNamespace()}`).join(" "),s),i.on(`absoluteTransformChange.${this._getEventNamespace()}`,s),this._proxyDrag(i)}),this._resetTransformCache();var r=!!this.findOne(".top-left");return r&&this.update(),this}_proxyDrag(e){let n;e.on(`dragstart.${this._getEventNamespace()}`,r=>{n=e.getAbsolutePosition(),!this.isDragging()&&e!==this.findOne(".back")&&this.startDrag(r,!1)}),e.on(`dragmove.${this._getEventNamespace()}`,r=>{if(!n)return;const i=e.getAbsolutePosition(),s=i.x-n.x,a=i.y-n.y;this.nodes().forEach(o=>{if(o===e||o.isDragging())return;const l=o.getAbsolutePosition();o.setAbsolutePosition({x:l.x+s,y:l.y+a}),o.startDrag(r)}),n=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(e=>{e.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(p3),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(p3,this.__getNodeRect)}__getNodeShape(e,n=this.rotation(),r){var i=e.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),s=e.getAbsoluteScale(r),a=e.getAbsolutePosition(r),o=i.x*s.x-e.offsetX()*s.x,l=i.y*s.y-e.offsetY()*s.y;const c=(Ne.getAngle(e.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),u={x:a.x+o*Math.cos(c)+l*Math.sin(-c),y:a.y+l*Math.cos(c)+o*Math.sin(c),width:i.width*s.x,height:i.height*s.y,rotation:c};return IB(u,-Ne.getAngle(n),{x:0,y:0})}__getNodeRect(){var e=this.getNode();if(!e)return{x:-h3,y:-h3,width:0,height:0,rotation:0};const n=[];this.nodes().map(c=>{const u=c.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()});var d=[{x:u.x,y:u.y},{x:u.x+u.width,y:u.y},{x:u.x+u.width,y:u.y+u.height},{x:u.x,y:u.y+u.height}],f=c.getAbsoluteTransform();d.forEach(function(h){var g=f.point(h);n.push(g)})});const r=new Os;r.rotate(-Ne.getAngle(this.rotation()));var i,s,a,o;n.forEach(function(c){var u=r.point(c);i===void 0&&(i=a=u.x,s=o=u.y),i=Math.min(i,u.x),s=Math.min(s,u.y),a=Math.max(a,u.x),o=Math.max(o,u.y)}),r.invert();const l=r.point({x:i,y:s});return{x:l.x,y:l.y,width:a-i,height:o-s,rotation:Ne.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),U0.forEach((function(e){this._createAnchor(e)}).bind(this)),this._createAnchor("rotater")}_createAnchor(e){var n=new km({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:e+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:GQ?10:"auto"}),r=this;n.on("mousedown touchstart",function(i){r._handleMouseDown(i)}),n.on("dragstart",i=>{n.stopDrag(),i.cancelBubble=!0}),n.on("dragend",i=>{i.cancelBubble=!0}),n.on("mouseenter",()=>{var i=Ne.getAngle(this.rotation()),s=HQ(e,i);n.getStage().content&&(n.getStage().content.style.cursor=s),this._cursorChange=!0}),n.on("mouseout",()=>{n.getStage().content&&(n.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(n)}_createBack(){var e=new he({name:"back",width:0,height:0,draggable:!0,sceneFunc(n){var r=this.getParent(),i=r.padding();n.beginPath(),n.rect(-i,-i,this.width()+i*2,this.height()+i*2),n.moveTo(this.width()/2,-i),r.rotateEnabled()&&n.lineTo(this.width()/2,-r.rotateAnchorOffset()*ee._sign(this.height())-i),n.fillStrokeShape(this)},hitFunc:(n,r)=>{if(this.shouldOverdrawWholeArea()){var i=this.padding();n.beginPath(),n.rect(-i,-i,r.width()+i*2,r.height()+i*2),n.fillStrokeShape(r)}}});this.add(e),this._proxyDrag(e),e.on("dragstart",n=>{n.cancelBubble=!0}),e.on("dragmove",n=>{n.cancelBubble=!0}),e.on("dragend",n=>{n.cancelBubble=!0}),this.on("dragmove",n=>{this.update()})}_handleMouseDown(e){this._movingAnchorName=e.target.name().split(" ")[0];var n=this._getNodeRect(),r=n.width,i=n.height,s=Math.sqrt(Math.pow(r,2)+Math.pow(i,2));this.sin=Math.abs(i/s),this.cos=Math.abs(r/s),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;var a=e.target.getAbsolutePosition(),o=e.target.getStage().getPointerPosition();this._anchorDragOffset={x:o.x-a.x,y:o.y-a.y},this._fire("transformstart",{evt:e.evt,target:this.getNode()}),this._nodes.forEach(l=>{l._fire("transformstart",{evt:e.evt,target:l})})}_handleMouseMove(e){var n,r,i,s=this.findOne("."+this._movingAnchorName),a=s.getStage();a.setPointersPositions(e);const o=a.getPointerPosition();let l={x:o.x-this._anchorDragOffset.x,y:o.y-this._anchorDragOffset.y};const c=s.getAbsolutePosition();this.anchorDragBoundFunc()&&(l=this.anchorDragBoundFunc()(c,l,e)),s.setAbsolutePosition(l);const u=s.getAbsolutePosition();if(!(c.x===u.x&&c.y===u.y)){if(this._movingAnchorName==="rotater"){var d=this._getNodeRect();n=s.x()-d.width/2,r=-s.y()+d.height/2;let H=Math.atan2(-r,n)+Math.PI/2;d.height<0&&(H-=Math.PI);var f=Ne.getAngle(this.rotation());const V=f+H,K=Ne.getAngle(this.rotationSnapTolerance()),q=XQ(this.rotationSnaps(),V,K)-d.rotation,te=KQ(d,q);this._fitNodesInto(te,e);return}var h=this.keepRatio()||e.shiftKey,b=this.centeredScaling()||e.altKey;if(this._movingAnchorName==="top-left"){if(h){var g=b?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};i=Math.sqrt(Math.pow(g.x-s.x(),2)+Math.pow(g.y-s.y(),2));var y=this.findOne(".top-left").x()>g.x?-1:1,x=this.findOne(".top-left").y()>g.y?-1:1;n=i*this.cos*y,r=i*this.sin*x,this.findOne(".top-left").x(g.x-n),this.findOne(".top-left").y(g.y-r)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(s.y());else if(this._movingAnchorName==="top-right"){if(h){var g=b?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};i=Math.sqrt(Math.pow(s.x()-g.x,2)+Math.pow(g.y-s.y(),2));var y=this.findOne(".top-right").x()<g.x?-1:1,x=this.findOne(".top-right").y()>g.y?-1:1;n=i*this.cos*y,r=i*this.sin*x,this.findOne(".top-right").x(g.x+n),this.findOne(".top-right").y(g.y-r)}var v=s.position();this.findOne(".top-left").y(v.y),this.findOne(".bottom-right").x(v.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(s.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(s.x());else if(this._movingAnchorName==="bottom-left"){if(h){var g=b?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};i=Math.sqrt(Math.pow(g.x-s.x(),2)+Math.pow(s.y()-g.y,2));var y=g.x<s.x()?-1:1,x=s.y()<g.y?-1:1;n=i*this.cos*y,r=i*this.sin*x,s.x(g.x-n),s.y(g.y+r)}v=s.position(),this.findOne(".top-left").x(v.x),this.findOne(".bottom-right").y(v.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(s.y());else if(this._movingAnchorName==="bottom-right"){if(h){var g=b?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};i=Math.sqrt(Math.pow(s.x()-g.x,2)+Math.pow(s.y()-g.y,2));var y=this.findOne(".bottom-right").x()<g.x?-1:1,x=this.findOne(".bottom-right").y()<g.y?-1:1;n=i*this.cos*y,r=i*this.sin*x,this.findOne(".bottom-right").x(g.x+n),this.findOne(".bottom-right").y(g.y+r)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));var b=this.centeredScaling()||e.altKey;if(b){var S=this.findOne(".top-left"),k=this.findOne(".bottom-right"),$=S.x(),T=S.y(),_=this.getWidth()-k.x(),R=this.getHeight()-k.y();k.move({x:-$,y:-T}),S.move({x:_,y:R})}var P=this.findOne(".top-left").getAbsolutePosition();n=P.x,r=P.y;var O=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),B=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:n,y:r,width:O,height:B,rotation:Ne.getAngle(this.rotation())},e)}}_handleMouseUp(e){this._removeEvents(e)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(e){if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));var n=this.getNode();this._fire("transformend",{evt:e,target:n}),n&&this._nodes.forEach(r=>{r._fire("transformend",{evt:e,target:r})}),this._movingAnchorName=null}}_fitNodesInto(e,n){var r=this._getNodeRect();const i=1;if(ee._inRange(e.width,-this.padding()*2-i,i)){this.update();return}if(ee._inRange(e.height,-this.padding()*2-i,i)){this.update();return}const s=this.flipEnabled();var a=new Os;if(a.rotate(Ne.getAngle(this.rotation())),this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("left")>=0){const d=a.point({x:-this.padding()*2,y:0});if(e.x+=d.x,e.y+=d.y,e.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=d.x,this._anchorDragOffset.y-=d.y,!s){this.update();return}}else if(this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("right")>=0){const d=a.point({x:this.padding()*2,y:0});if(this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=d.x,this._anchorDragOffset.y-=d.y,e.width+=this.padding()*2,!s){this.update();return}}if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("top")>=0){const d=a.point({x:0,y:-this.padding()*2});if(e.x+=d.x,e.y+=d.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=d.x,this._anchorDragOffset.y-=d.y,e.height+=this.padding()*2,!s){this.update();return}}else if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const d=a.point({x:0,y:this.padding()*2});if(this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=d.x,this._anchorDragOffset.y-=d.y,e.height+=this.padding()*2,!s){this.update();return}}if(this.boundBoxFunc()){const d=this.boundBoxFunc()(r,e);d?e=d:ee.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const o=1e7,l=new Os;l.translate(r.x,r.y),l.rotate(r.rotation),l.scale(r.width/o,r.height/o);const c=new Os;c.translate(e.x,e.y),c.rotate(e.rotation),c.scale(e.width/o,e.height/o);const u=c.multiply(l.invert());this._nodes.forEach(d=>{var f;const h=d.getParent().getAbsoluteTransform(),g=d.getTransform().copy();g.translate(d.offsetX(),d.offsetY());const y=new Os;y.multiply(h.copy().invert()).multiply(u).multiply(h).multiply(g);const x=y.decompose();d.setAttrs(x),this._fire("transform",{evt:n,target:d}),d._fire("transform",{evt:n,target:d}),(f=d.getLayer())===null||f===void 0||f.batchDraw()}),this.rotation(ee._getRotation(e.rotation)),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(e,n){this.findOne(e).setAttrs(n)}update(){var e,n=this._getNodeRect();this.rotation(ee._getRotation(n.rotation));var r=n.width,i=n.height,s=this.enabledAnchors(),a=this.resizeEnabled(),o=this.padding(),l=this.anchorSize();this.find("._anchor").forEach(c=>{c.setAttrs({width:l,height:l,offsetX:l/2,offsetY:l/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:l/2+o,offsetY:l/2+o,visible:a&&s.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:r/2,y:0,offsetY:l/2+o,visible:a&&s.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:r,y:0,offsetX:l/2-o,offsetY:l/2+o,visible:a&&s.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:i/2,offsetX:l/2+o,visible:a&&s.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:r,y:i/2,offsetX:l/2-o,visible:a&&s.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:i,offsetX:l/2+o,offsetY:l/2-o,visible:a&&s.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:r/2,y:i,offsetY:l/2-o,visible:a&&s.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:r,y:i,offsetX:l/2-o,offsetY:l/2-o,visible:a&&s.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:r/2,y:-this.rotateAnchorOffset()*ee._sign(i)-o,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:r,height:i,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0}),(e=this.getLayer())===null||e===void 0||e.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();var e=this.findOne("."+this._movingAnchorName);e&&e.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),Jd.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return xe.prototype.toObject.call(this)}clone(e){var n=xe.prototype.clone.call(this,e);return n}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}};function YQ(t){return t instanceof Array||ee.warn("enabledAnchors value should be an array"),t instanceof Array&&t.forEach(function(e){U0.indexOf(e)===-1&&ee.warn("Unknown anchor name: "+e+". Available names are: "+U0.join(", "))}),t||[]}yt.prototype.className="Transformer";un(yt);W.addGetterSetter(yt,"enabledAnchors",U0,YQ);W.addGetterSetter(yt,"flipEnabled",!0,Ws());W.addGetterSetter(yt,"resizeEnabled",!0);W.addGetterSetter(yt,"anchorSize",10,be());W.addGetterSetter(yt,"rotateEnabled",!0);W.addGetterSetter(yt,"rotationSnaps",[]);W.addGetterSetter(yt,"rotateAnchorOffset",50,be());W.addGetterSetter(yt,"rotationSnapTolerance",5,be());W.addGetterSetter(yt,"borderEnabled",!0);W.addGetterSetter(yt,"anchorStroke","rgb(0, 161, 255)");W.addGetterSetter(yt,"anchorStrokeWidth",1,be());W.addGetterSetter(yt,"anchorFill","white");W.addGetterSetter(yt,"anchorCornerRadius",0,be());W.addGetterSetter(yt,"borderStroke","rgb(0, 161, 255)");W.addGetterSetter(yt,"borderStrokeWidth",1,be());W.addGetterSetter(yt,"borderDash");W.addGetterSetter(yt,"keepRatio",!0);W.addGetterSetter(yt,"centeredScaling",!1);W.addGetterSetter(yt,"ignoreStroke",!1);W.addGetterSetter(yt,"padding",0,be());W.addGetterSetter(yt,"node");W.addGetterSetter(yt,"nodes");W.addGetterSetter(yt,"boundBoxFunc");W.addGetterSetter(yt,"anchorDragBoundFunc");W.addGetterSetter(yt,"shouldOverdrawWholeArea",!1);W.addGetterSetter(yt,"useSingleNodeRotation",!0);W.backCompat(yt,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});class vo extends he{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.radius(),0,Ne.getAngle(this.angle()),this.clockwise()),e.lineTo(0,0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}vo.prototype.className="Wedge";vo.prototype._centroid=!0;vo.prototype._attrsAffectingSize=["radius"];un(vo);W.addGetterSetter(vo,"radius",0,be());W.addGetterSetter(vo,"angle",0,be());W.addGetterSetter(vo,"clockwise",!1);W.backCompat(vo,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});function m3(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var QQ=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],ZQ=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function JQ(t,e){var n=t.data,r=t.width,i=t.height,s,a,o,l,c,u,d,f,h,g,y,x,v,b,S,k,$,T,_,R,P,O,B,H,V=e+e+1,K=r-1,X=i-1,q=e+1,te=q*(q+1)/2,j=new m3,Y=null,Q=j,ne=null,le=null,ue=QQ[e],de=ZQ[e];for(o=1;o<V;o++)Q=Q.next=new m3,o===q&&(Y=Q);for(Q.next=j,d=u=0,a=0;a<i;a++){for(k=$=T=_=f=h=g=y=0,x=q*(R=n[u]),v=q*(P=n[u+1]),b=q*(O=n[u+2]),S=q*(B=n[u+3]),f+=te*R,h+=te*P,g+=te*O,y+=te*B,Q=j,o=0;o<q;o++)Q.r=R,Q.g=P,Q.b=O,Q.a=B,Q=Q.next;for(o=1;o<q;o++)l=u+((K<o?K:o)<<2),f+=(Q.r=R=n[l])*(H=q-o),h+=(Q.g=P=n[l+1])*H,g+=(Q.b=O=n[l+2])*H,y+=(Q.a=B=n[l+3])*H,k+=R,$+=P,T+=O,_+=B,Q=Q.next;for(ne=j,le=Y,s=0;s<r;s++)n[u+3]=B=y*ue>>de,B!==0?(B=255/B,n[u]=(f*ue>>de)*B,n[u+1]=(h*ue>>de)*B,n[u+2]=(g*ue>>de)*B):n[u]=n[u+1]=n[u+2]=0,f-=x,h-=v,g-=b,y-=S,x-=ne.r,v-=ne.g,b-=ne.b,S-=ne.a,l=d+((l=s+e+1)<K?l:K)<<2,k+=ne.r=n[l],$+=ne.g=n[l+1],T+=ne.b=n[l+2],_+=ne.a=n[l+3],f+=k,h+=$,g+=T,y+=_,ne=ne.next,x+=R=le.r,v+=P=le.g,b+=O=le.b,S+=B=le.a,k-=R,$-=P,T-=O,_-=B,le=le.next,u+=4;d+=r}for(s=0;s<r;s++){for($=T=_=k=h=g=y=f=0,u=s<<2,x=q*(R=n[u]),v=q*(P=n[u+1]),b=q*(O=n[u+2]),S=q*(B=n[u+3]),f+=te*R,h+=te*P,g+=te*O,y+=te*B,Q=j,o=0;o<q;o++)Q.r=R,Q.g=P,Q.b=O,Q.a=B,Q=Q.next;for(c=r,o=1;o<=e;o++)u=c+s<<2,f+=(Q.r=R=n[u])*(H=q-o),h+=(Q.g=P=n[u+1])*H,g+=(Q.b=O=n[u+2])*H,y+=(Q.a=B=n[u+3])*H,k+=R,$+=P,T+=O,_+=B,Q=Q.next,o<X&&(c+=r);for(u=s,ne=j,le=Y,a=0;a<i;a++)l=u<<2,n[l+3]=B=y*ue>>de,B>0?(B=255/B,n[l]=(f*ue>>de)*B,n[l+1]=(h*ue>>de)*B,n[l+2]=(g*ue>>de)*B):n[l]=n[l+1]=n[l+2]=0,f-=x,h-=v,g-=b,y-=S,x-=ne.r,v-=ne.g,b-=ne.b,S-=ne.a,l=s+((l=a+q)<X?l:X)*r<<2,f+=k+=ne.r=n[l],h+=$+=ne.g=n[l+1],g+=T+=ne.b=n[l+2],y+=_+=ne.a=n[l+3],ne=ne.next,x+=R=le.r,v+=P=le.g,b+=O=le.b,S+=B=le.a,k-=R,$-=P,T-=O,_-=B,le=le.next,u+=r}}const eZ=function(e){var n=Math.round(this.blurRadius());n>0&&JQ(e,n)};W.addGetterSetter(xe,"blurRadius",0,be(),W.afterSetFilter);const tZ=function(t){var e=this.brightness()*255,n=t.data,r=n.length,i;for(i=0;i<r;i+=4)n[i]+=e,n[i+1]+=e,n[i+2]+=e};W.addGetterSetter(xe,"brightness",0,be(),W.afterSetFilter);const nZ=function(t){var e=Math.pow((this.contrast()+100)/100,2),n=t.data,r=n.length,i=150,s=150,a=150,o;for(o=0;o<r;o+=4)i=n[o],s=n[o+1],a=n[o+2],i/=255,i-=.5,i*=e,i+=.5,i*=255,s/=255,s-=.5,s*=e,s+=.5,s*=255,a/=255,a-=.5,a*=e,a+=.5,a*=255,i=i<0?0:i>255?255:i,s=s<0?0:s>255?255:s,a=a<0?0:a>255?255:a,n[o]=i,n[o+1]=s,n[o+2]=a};W.addGetterSetter(xe,"contrast",0,be(),W.afterSetFilter);const rZ=function(t){var e=this.embossStrength()*10,n=this.embossWhiteLevel()*255,r=this.embossDirection(),i=this.embossBlend(),s=0,a=0,o=t.data,l=t.width,c=t.height,u=l*4,d=c;switch(r){case"top-left":s=-1,a=-1;break;case"top":s=-1,a=0;break;case"top-right":s=-1,a=1;break;case"right":s=0,a=1;break;case"bottom-right":s=1,a=1;break;case"bottom":s=1,a=0;break;case"bottom-left":s=1,a=-1;break;case"left":s=0,a=-1;break;default:ee.error("Unknown emboss direction: "+r)}do{var f=(d-1)*u,h=s;d+h<1&&(h=0),d+h>c&&(h=0);var g=(d-1+h)*l*4,y=l;do{var x=f+(y-1)*4,v=a;y+v<1&&(v=0),y+v>l&&(v=0);var b=g+(y-1+v)*4,S=o[x]-o[b],k=o[x+1]-o[b+1],$=o[x+2]-o[b+2],T=S,_=T>0?T:-T,R=k>0?k:-k,P=$>0?$:-$;if(R>_&&(T=k),P>_&&(T=$),T*=e,i){var O=o[x]+T,B=o[x+1]+T,H=o[x+2]+T;o[x]=O>255?255:O<0?0:O,o[x+1]=B>255?255:B<0?0:B,o[x+2]=H>255?255:H<0?0:H}else{var V=n-T;V<0?V=0:V>255&&(V=255),o[x]=o[x+1]=o[x+2]=V}}while(--y)}while(--d)};W.addGetterSetter(xe,"embossStrength",.5,be(),W.afterSetFilter);W.addGetterSetter(xe,"embossWhiteLevel",.5,be(),W.afterSetFilter);W.addGetterSetter(xe,"embossDirection","top-left",null,W.afterSetFilter);W.addGetterSetter(xe,"embossBlend",!1,null,W.afterSetFilter);function $k(t,e,n,r,i){var s=n-e,a=i-r,o;return s===0?r+a/2:a===0?r:(o=(t-e)/s,o=a*o+r,o)}const iZ=function(t){var e=t.data,n=e.length,r=e[0],i=r,s,a=e[1],o=a,l,c=e[2],u=c,d,f,h=this.enhance();if(h!==0){for(f=0;f<n;f+=4)s=e[f+0],s<r?r=s:s>i&&(i=s),l=e[f+1],l<a?a=l:l>o&&(o=l),d=e[f+2],d<c?c=d:d>u&&(u=d);i===r&&(i=255,r=0),o===a&&(o=255,a=0),u===c&&(u=255,c=0);var g,y,x,v,b,S,k,$,T;for(h>0?(y=i+h*(255-i),x=r-h*(r-0),b=o+h*(255-o),S=a-h*(a-0),$=u+h*(255-u),T=c-h*(c-0)):(g=(i+r)*.5,y=i+h*(i-g),x=r+h*(r-g),v=(o+a)*.5,b=o+h*(o-v),S=a+h*(a-v),k=(u+c)*.5,$=u+h*(u-k),T=c+h*(c-k)),f=0;f<n;f+=4)e[f+0]=$k(e[f+0],r,i,x,y),e[f+1]=$k(e[f+1],a,o,S,b),e[f+2]=$k(e[f+2],c,u,T,$)}};W.addGetterSetter(xe,"enhance",0,be(),W.afterSetFilter);const sZ=function(t){var e=t.data,n=e.length,r,i;for(r=0;r<n;r+=4)i=.34*e[r]+.5*e[r+1]+.16*e[r+2],e[r]=i,e[r+1]=i,e[r+2]=i};W.addGetterSetter(xe,"hue",0,be(),W.afterSetFilter);W.addGetterSetter(xe,"saturation",0,be(),W.afterSetFilter);W.addGetterSetter(xe,"luminance",0,be(),W.afterSetFilter);const aZ=function(t){var e=t.data,n=e.length,r=1,i=Math.pow(2,this.saturation()),s=Math.abs(this.hue()+360)%360,a=this.luminance()*127,o,l=r*i*Math.cos(s*Math.PI/180),c=r*i*Math.sin(s*Math.PI/180),u=.299*r+.701*l+.167*c,d=.587*r-.587*l+.33*c,f=.114*r-.114*l-.497*c,h=.299*r-.299*l-.328*c,g=.587*r+.413*l+.035*c,y=.114*r-.114*l+.293*c,x=.299*r-.3*l+1.25*c,v=.587*r-.586*l-1.05*c,b=.114*r+.886*l-.2*c,S,k,$,T;for(o=0;o<n;o+=4)S=e[o+0],k=e[o+1],$=e[o+2],T=e[o+3],e[o+0]=u*S+d*k+f*$+a,e[o+1]=h*S+g*k+y*$+a,e[o+2]=x*S+v*k+b*$+a,e[o+3]=T},oZ=function(t){var e=t.data,n=e.length,r=Math.pow(2,this.value()),i=Math.pow(2,this.saturation()),s=Math.abs(this.hue()+360)%360,a,o=r*i*Math.cos(s*Math.PI/180),l=r*i*Math.sin(s*Math.PI/180),c=.299*r+.701*o+.167*l,u=.587*r-.587*o+.33*l,d=.114*r-.114*o-.497*l,f=.299*r-.299*o-.328*l,h=.587*r+.413*o+.035*l,g=.114*r-.114*o+.293*l,y=.299*r-.3*o+1.25*l,x=.587*r-.586*o-1.05*l,v=.114*r+.886*o-.2*l,b,S,k,$;for(a=0;a<n;a+=4)b=e[a+0],S=e[a+1],k=e[a+2],$=e[a+3],e[a+0]=c*b+u*S+d*k,e[a+1]=f*b+h*S+g*k,e[a+2]=y*b+x*S+v*k,e[a+3]=$};W.addGetterSetter(xe,"hue",0,be(),W.afterSetFilter);W.addGetterSetter(xe,"saturation",0,be(),W.afterSetFilter);W.addGetterSetter(xe,"value",0,be(),W.afterSetFilter);const lZ=function(t){var e=t.data,n=e.length,r;for(r=0;r<n;r+=4)e[r]=255-e[r],e[r+1]=255-e[r+1],e[r+2]=255-e[r+2]};var cZ=function(t,e,n){var r=t.data,i=e.data,s=t.width,a=t.height,o=n.polarCenterX||s/2,l=n.polarCenterY||a/2,c,u,d,f=0,h=0,g=0,y=0,x,v=Math.sqrt(o*o+l*l);u=s-o,d=a-l,x=Math.sqrt(u*u+d*d),v=x>v?x:v;var b=a,S=s,k,$,T=360/S*Math.PI/180,_,R;for($=0;$<S;$+=1)for(_=Math.sin($*T),R=Math.cos($*T),k=0;k<b;k+=1)u=Math.floor(o+v*k/b*R),d=Math.floor(l+v*k/b*_),c=(d*s+u)*4,f=r[c+0],h=r[c+1],g=r[c+2],y=r[c+3],c=($+k*s)*4,i[c+0]=f,i[c+1]=h,i[c+2]=g,i[c+3]=y},uZ=function(t,e,n){var r=t.data,i=e.data,s=t.width,a=t.height,o=n.polarCenterX||s/2,l=n.polarCenterY||a/2,c,u,d,f,h,g=0,y=0,x=0,v=0,b,S=Math.sqrt(o*o+l*l);u=s-o,d=a-l,b=Math.sqrt(u*u+d*d),S=b>S?b:S;var k=a,$=s,T,_,R=n.polarRotation||0,P,O;for(u=0;u<s;u+=1)for(d=0;d<a;d+=1)f=u-o,h=d-l,T=Math.sqrt(f*f+h*h)*k/S,_=(Math.atan2(h,f)*180/Math.PI+360+R)%360,_=_*$/360,P=Math.floor(_),O=Math.floor(T),c=(O*s+P)*4,g=r[c+0],y=r[c+1],x=r[c+2],v=r[c+3],c=(d*s+u)*4,i[c+0]=g,i[c+1]=y,i[c+2]=x,i[c+3]=v};const dZ=function(t){var e=t.width,n=t.height,r,i,s,a,o,l,c,u,d,f,h=Math.round(this.kaleidoscopePower()),g=Math.round(this.kaleidoscopeAngle()),y=Math.floor(e*(g%360)/360);if(!(h<1)){var x=ee.createCanvasElement();x.width=e,x.height=n;var v=x.getContext("2d").getImageData(0,0,e,n);ee.releaseCanvas(x),cZ(t,v,{polarCenterX:e/2,polarCenterY:n/2});for(var b=e/Math.pow(2,h);b<=8;)b=b*2,h-=1;b=Math.ceil(b);var S=b,k=0,$=S,T=1;for(y+b>e&&(k=S,$=0,T=-1),i=0;i<n;i+=1)for(r=k;r!==$;r+=T)s=Math.round(r+y)%e,d=(e*i+s)*4,o=v.data[d+0],l=v.data[d+1],c=v.data[d+2],u=v.data[d+3],f=(e*i+r)*4,v.data[f+0]=o,v.data[f+1]=l,v.data[f+2]=c,v.data[f+3]=u;for(i=0;i<n;i+=1)for(S=Math.floor(b),a=0;a<h;a+=1){for(r=0;r<S+1;r+=1)d=(e*i+r)*4,o=v.data[d+0],l=v.data[d+1],c=v.data[d+2],u=v.data[d+3],f=(e*i+S*2-r-1)*4,v.data[f+0]=o,v.data[f+1]=l,v.data[f+2]=c,v.data[f+3]=u;S*=2}uZ(v,t,{polarRotation:0})}};W.addGetterSetter(xe,"kaleidoscopePower",2,be(),W.afterSetFilter);W.addGetterSetter(xe,"kaleidoscopeAngle",0,be(),W.afterSetFilter);function Tv(t,e,n){var r=(n*t.width+e)*4,i=[];return i.push(t.data[r++],t.data[r++],t.data[r++],t.data[r++]),i}function Ap(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)+Math.pow(t[2]-e[2],2))}function fZ(t){for(var e=[0,0,0],n=0;n<t.length;n++)e[0]+=t[n][0],e[1]+=t[n][1],e[2]+=t[n][2];return e[0]/=t.length,e[1]/=t.length,e[2]/=t.length,e}function pZ(t,e){var n=Tv(t,0,0),r=Tv(t,t.width-1,0),i=Tv(t,0,t.height-1),s=Tv(t,t.width-1,t.height-1),a=e||10;if(Ap(n,r)<a&&Ap(r,s)<a&&Ap(s,i)<a&&Ap(i,n)<a){for(var o=fZ([r,n,s,i]),l=[],c=0;c<t.width*t.height;c++){var u=Ap(o,[t.data[c*4],t.data[c*4+1],t.data[c*4+2]]);l[c]=u<a?0:255}return l}}function hZ(t,e){for(var n=0;n<t.width*t.height;n++)t.data[4*n+3]=e[n]}function mZ(t,e,n){for(var r=[1,1,1,1,0,1,1,1,1],i=Math.round(Math.sqrt(r.length)),s=Math.floor(i/2),a=[],o=0;o<n;o++)for(var l=0;l<e;l++){for(var c=o*e+l,u=0,d=0;d<i;d++)for(var f=0;f<i;f++){var h=o+d-s,g=l+f-s;if(h>=0&&h<n&&g>=0&&g<e){var y=h*e+g,x=r[d*i+f];u+=t[y]*x}}a[c]=u===255*8?255:0}return a}function gZ(t,e,n){for(var r=[1,1,1,1,1,1,1,1,1],i=Math.round(Math.sqrt(r.length)),s=Math.floor(i/2),a=[],o=0;o<n;o++)for(var l=0;l<e;l++){for(var c=o*e+l,u=0,d=0;d<i;d++)for(var f=0;f<i;f++){var h=o+d-s,g=l+f-s;if(h>=0&&h<n&&g>=0&&g<e){var y=h*e+g,x=r[d*i+f];u+=t[y]*x}}a[c]=u>=255*4?255:0}return a}function yZ(t,e,n){for(var r=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],i=Math.round(Math.sqrt(r.length)),s=Math.floor(i/2),a=[],o=0;o<n;o++)for(var l=0;l<e;l++){for(var c=o*e+l,u=0,d=0;d<i;d++)for(var f=0;f<i;f++){var h=o+d-s,g=l+f-s;if(h>=0&&h<n&&g>=0&&g<e){var y=h*e+g,x=r[d*i+f];u+=t[y]*x}}a[c]=u}return a}const vZ=function(t){var e=this.threshold(),n=pZ(t,e);return n&&(n=mZ(n,t.width,t.height),n=gZ(n,t.width,t.height),n=yZ(n,t.width,t.height),hZ(t,n)),t};W.addGetterSetter(xe,"threshold",0,be(),W.afterSetFilter);const xZ=function(t){var e=this.noise()*255,n=t.data,r=n.length,i=e/2,s;for(s=0;s<r;s+=4)n[s+0]+=i-2*i*Math.random(),n[s+1]+=i-2*i*Math.random(),n[s+2]+=i-2*i*Math.random()};W.addGetterSetter(xe,"noise",.2,be(),W.afterSetFilter);const bZ=function(t){var e=Math.ceil(this.pixelSize()),n=t.width,r=t.height,i,s,a,o,l,c,u,d=Math.ceil(n/e),f=Math.ceil(r/e),h,g,y,x,v,b,S,k=t.data;if(e<=0){ee.error("pixelSize value can not be <= 0");return}for(v=0;v<d;v+=1)for(b=0;b<f;b+=1){for(o=0,l=0,c=0,u=0,h=v*e,g=h+e,y=b*e,x=y+e,S=0,i=h;i<g;i+=1)if(!(i>=n))for(s=y;s<x;s+=1)s>=r||(a=(n*s+i)*4,o+=k[a+0],l+=k[a+1],c+=k[a+2],u+=k[a+3],S+=1);for(o=o/S,l=l/S,c=c/S,u=u/S,i=h;i<g;i+=1)if(!(i>=n))for(s=y;s<x;s+=1)s>=r||(a=(n*s+i)*4,k[a+0]=o,k[a+1]=l,k[a+2]=c,k[a+3]=u)}};W.addGetterSetter(xe,"pixelSize",8,be(),W.afterSetFilter);const wZ=function(t){var e=Math.round(this.levels()*254)+1,n=t.data,r=n.length,i=255/e,s;for(s=0;s<r;s+=1)n[s]=Math.floor(n[s]/i)*i};W.addGetterSetter(xe,"levels",.5,be(),W.afterSetFilter);const SZ=function(t){var e=t.data,n=e.length,r=this.red(),i=this.green(),s=this.blue(),a,o;for(a=0;a<n;a+=4)o=(.34*e[a]+.5*e[a+1]+.16*e[a+2])/255,e[a]=o*r,e[a+1]=o*i,e[a+2]=o*s,e[a+3]=e[a+3]};W.addGetterSetter(xe,"red",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)});W.addGetterSetter(xe,"green",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)});W.addGetterSetter(xe,"blue",0,Z5,W.afterSetFilter);const kZ=function(t){var e=t.data,n=e.length,r=this.red(),i=this.green(),s=this.blue(),a=this.alpha(),o,l;for(o=0;o<n;o+=4)l=1-a,e[o]=r*a+e[o]*l,e[o+1]=i*a+e[o+1]*l,e[o+2]=s*a+e[o+2]*l};W.addGetterSetter(xe,"red",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)});W.addGetterSetter(xe,"green",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)});W.addGetterSetter(xe,"blue",0,Z5,W.afterSetFilter);W.addGetterSetter(xe,"alpha",1,function(t){return this._filterUpToDate=!1,t>1?1:t<0?0:t});const CZ=function(t){var e=t.data,n=e.length,r,i,s,a;for(r=0;r<n;r+=4)i=e[r+0],s=e[r+1],a=e[r+2],e[r+0]=Math.min(255,i*.393+s*.769+a*.189),e[r+1]=Math.min(255,i*.349+s*.686+a*.168),e[r+2]=Math.min(255,i*.272+s*.534+a*.131)},$Z=function(t){var e=t.data,n=t.width,r=t.height,i=n*4,s=r;do{var a=(s-1)*i,o=n;do{var l=a+(o-1)*4,c=e[l],u=e[l+1],d=e[l+2];c>127&&(c=255-c),u>127&&(u=255-u),d>127&&(d=255-d),e[l]=c,e[l+1]=u,e[l+2]=d}while(--o)}while(--s)},EZ=function(t){var e=this.threshold()*255,n=t.data,r=n.length,i;for(i=0;i<r;i+=1)n[i]=n[i]<e?0:255};W.addGetterSetter(xe,"threshold",.5,be(),W.afterSetFilter);const Fr=Fc.Util._assign(Fc,{Arc:go,Arrow:ru,Circle:Cf,Ellipse:Ol,Image:Ea,Label:r_,Tag:iu,Line:yo,Path:St,Rect:km,RegularPolygon:su,Ring:au,Sprite:Ta,Star:Al,Text:cn,TextPath:Dn,Transformer:yt,Wedge:vo,Filters:{Blur:eZ,Brighten:tZ,Contrast:nZ,Emboss:rZ,Enhance:iZ,Grayscale:sZ,HSL:aZ,HSV:oZ,Invert:lZ,Kaleidoscope:dZ,Mask:vZ,Noise:xZ,Pixelate:bZ,Posterize:wZ,RGB:SZ,RGBA:kZ,Sepia:CZ,Solarize:$Z,Threshold:EZ}});var NB={exports:{}};/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TZ=function(e){var n={},r=A,i=lh,s=Object.assign;function a(p){for(var m="https://reactjs.org/docs/error-decoder.html?invariant="+p,w=1;w<arguments.length;w++)m+="&args[]="+encodeURIComponent(arguments[w]);return"Minified React error #"+p+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),f=Symbol.for("react.profiler"),h=Symbol.for("react.provider"),g=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),v=Symbol.for("react.suspense_list"),b=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),k=Symbol.for("react.offscreen"),$=Symbol.iterator;function T(p){return p===null||typeof p!="object"?null:(p=$&&p[$]||p["@@iterator"],typeof p=="function"?p:null)}function _(p){if(p==null)return null;if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p;switch(p){case u:return"Fragment";case c:return"Portal";case f:return"Profiler";case d:return"StrictMode";case x:return"Suspense";case v:return"SuspenseList"}if(typeof p=="object")switch(p.$$typeof){case g:return(p.displayName||"Context")+".Consumer";case h:return(p._context.displayName||"Context")+".Provider";case y:var m=p.render;return p=p.displayName,p||(p=m.displayName||m.name||"",p=p!==""?"ForwardRef("+p+")":"ForwardRef"),p;case b:return m=p.displayName||null,m!==null?m:_(p.type)||"Memo";case S:m=p._payload,p=p._init;try{return _(p(m))}catch{}}return null}function R(p){var m=p.type;switch(p.tag){case 24:return"Cache";case 9:return(m.displayName||"Context")+".Consumer";case 10:return(m._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return p=m.render,p=p.displayName||p.name||"",m.displayName||(p!==""?"ForwardRef("+p+")":"ForwardRef");case 7:return"Fragment";case 5:return m;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _(m);case 8:return m===d?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof m=="function")return m.displayName||m.name||null;if(typeof m=="string")return m}return null}function P(p){var m=p,w=p;if(p.alternate)for(;m.return;)m=m.return;else{p=m;do m=p,m.flags&4098&&(w=m.return),p=m.return;while(p)}return m.tag===3?w:null}function O(p){if(P(p)!==p)throw Error(a(188))}function B(p){var m=p.alternate;if(!m){if(m=P(p),m===null)throw Error(a(188));return m!==p?null:p}for(var w=p,C=m;;){var E=w.return;if(E===null)break;var N=E.alternate;if(N===null){if(C=E.return,C!==null){w=C;continue}break}if(E.child===N.child){for(N=E.child;N;){if(N===w)return O(E),p;if(N===C)return O(E),m;N=N.sibling}throw Error(a(188))}if(w.return!==C.return)w=E,C=N;else{for(var L=!1,Z=E.child;Z;){if(Z===w){L=!0,w=E,C=N;break}if(Z===C){L=!0,C=E,w=N;break}Z=Z.sibling}if(!L){for(Z=N.child;Z;){if(Z===w){L=!0,w=N,C=E;break}if(Z===C){L=!0,C=N,w=E;break}Z=Z.sibling}if(!L)throw Error(a(189))}}if(w.alternate!==C)throw Error(a(190))}if(w.tag!==3)throw Error(a(188));return w.stateNode.current===w?p:m}function H(p){return p=B(p),p!==null?V(p):null}function V(p){if(p.tag===5||p.tag===6)return p;for(p=p.child;p!==null;){var m=V(p);if(m!==null)return m;p=p.sibling}return null}function K(p){if(p.tag===5||p.tag===6)return p;for(p=p.child;p!==null;){if(p.tag!==4){var m=K(p);if(m!==null)return m}p=p.sibling}return null}var X=Array.isArray,q=e.getPublicInstance,te=e.getRootHostContext,j=e.getChildHostContext,Y=e.prepareForCommit,Q=e.resetAfterCommit,ne=e.createInstance,le=e.appendInitialChild,ue=e.finalizeInitialChildren,de=e.prepareUpdate,pe=e.shouldSetTextContent,me=e.createTextInstance,ie=e.scheduleTimeout,we=e.cancelTimeout,$e=e.noTimeout,De=e.isPrimaryRenderer,Oe=e.supportsMutation,Ue=e.supportsPersistence,je=e.supportsHydration,Ye=e.getInstanceFromNode,Be=e.preparePortalMount,et=e.getCurrentEventPriority,lt=e.detachDeletedInstance,wt=e.supportsMicrotasks,Or=e.scheduleMicrotask,ct=e.supportsTestSelectors,Zn=e.findFiberRoot,xn=e.getBoundingRect,Wr=e.getTextContent,qt=e.isHiddenSubtree,ur=e.matchAccessibilityRole,He=e.setFocusIfFocusable,bn=e.setupIntersectionObserver,dr=e.appendChild,Gl=e.appendChildToContainer,tp=e.commitTextUpdate,np=e.commitMount,T2=e.commitUpdate,ku=e.insertBefore,_2=e.insertInContainerBefore,I2=e.removeChild,F9=e.removeChildFromContainer,XR=e.resetTextContent,L9=e.hideInstance,M9=e.hideTextInstance,B9=e.unhideInstance,z9=e.unhideTextInstance,j9=e.clearContainer,V9=e.cloneInstance,YR=e.createContainerChildSet,QR=e.appendChildToContainerChildSet,W9=e.finalizeContainerChildren,N2=e.replaceContainerChildren,ZR=e.cloneHiddenInstance,JR=e.cloneHiddenTextInstance,U9=e.canHydrateInstance,G9=e.canHydrateTextInstance,H9=e.canHydrateSuspenseInstance,eO=e.isSuspenseInstancePending,R2=e.isSuspenseInstanceFallback,q9=e.getSuspenseInstanceFallbackErrorDetails,K9=e.registerSuspenseInstanceRetry,ly=e.getNextHydratableSibling,X9=e.getFirstHydratableChild,Y9=e.getFirstHydratableChildWithinContainer,Q9=e.getFirstHydratableChildWithinSuspenseInstance,Z9=e.hydrateInstance,J9=e.hydrateTextInstance,e7=e.hydrateSuspenseInstance,t7=e.getNextHydratableInstanceAfterSuspenseInstance,n7=e.commitHydratedContainer,r7=e.commitHydratedSuspenseInstance,i7=e.clearSuspenseBoundary,s7=e.clearSuspenseBoundaryFromContainer,a7=e.shouldDeleteUnhydratedTailInstances,o7=e.didNotMatchHydratedContainerTextInstance,l7=e.didNotMatchHydratedTextInstance,O2;function rp(p){if(O2===void 0)try{throw Error()}catch(w){var m=w.stack.trim().match(/\n( *(at )?)/);O2=m&&m[1]||""}return`
`+O2+p}var A2=!1;function P2(p,m){if(!p||A2)return"";A2=!0;var w=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(m)if(m=function(){throw Error()},Object.defineProperty(m.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(m,[])}catch(ve){var C=ve}Reflect.construct(p,[],m)}else{try{m.call()}catch(ve){C=ve}p.call(m.prototype)}else{try{throw Error()}catch(ve){C=ve}p()}}catch(ve){if(ve&&C&&typeof ve.stack=="string"){for(var E=ve.stack.split(`
`),N=C.stack.split(`
`),L=E.length-1,Z=N.length-1;1<=L&&0<=Z&&E[L]!==N[Z];)Z--;for(;1<=L&&0<=Z;L--,Z--)if(E[L]!==N[Z]){if(L!==1||Z!==1)do if(L--,Z--,0>Z||E[L]!==N[Z]){var ae=`
`+E[L].replace(" at new "," at ");return p.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",p.displayName)),ae}while(1<=L&&0<=Z);break}}}finally{A2=!1,Error.prepareStackTrace=w}return(p=p?p.displayName||p.name:"")?rp(p):""}var c7=Object.prototype.hasOwnProperty,D2=[],Cu=-1;function No(p){return{current:p}}function zt(p){0>Cu||(p.current=D2[Cu],D2[Cu]=null,Cu--)}function Pt(p,m){Cu++,D2[Cu]=p.current,p.current=m}var Ro={},fr=No(Ro),Ur=No(!1),Hl=Ro;function $u(p,m){var w=p.type.contextTypes;if(!w)return Ro;var C=p.stateNode;if(C&&C.__reactInternalMemoizedUnmaskedChildContext===m)return C.__reactInternalMemoizedMaskedChildContext;var E={},N;for(N in w)E[N]=m[N];return C&&(p=p.stateNode,p.__reactInternalMemoizedUnmaskedChildContext=m,p.__reactInternalMemoizedMaskedChildContext=E),E}function Gr(p){return p=p.childContextTypes,p!=null}function cy(){zt(Ur),zt(fr)}function tO(p,m,w){if(fr.current!==Ro)throw Error(a(168));Pt(fr,m),Pt(Ur,w)}function nO(p,m,w){var C=p.stateNode;if(m=m.childContextTypes,typeof C.getChildContext!="function")return w;C=C.getChildContext();for(var E in C)if(!(E in m))throw Error(a(108,R(p)||"Unknown",E));return s({},w,C)}function uy(p){return p=(p=p.stateNode)&&p.__reactInternalMemoizedMergedChildContext||Ro,Hl=fr.current,Pt(fr,p),Pt(Ur,Ur.current),!0}function rO(p,m,w){var C=p.stateNode;if(!C)throw Error(a(169));w?(p=nO(p,m,Hl),C.__reactInternalMemoizedMergedChildContext=p,zt(Ur),zt(fr),Pt(fr,p)):zt(Ur),Pt(Ur,w)}var xs=Math.clz32?Math.clz32:f7,u7=Math.log,d7=Math.LN2;function f7(p){return p>>>=0,p===0?32:31-(u7(p)/d7|0)|0}var dy=64,fy=4194304;function ip(p){switch(p&-p){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return p&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return p}}function py(p,m){var w=p.pendingLanes;if(w===0)return 0;var C=0,E=p.suspendedLanes,N=p.pingedLanes,L=w&268435455;if(L!==0){var Z=L&~E;Z!==0?C=ip(Z):(N&=L,N!==0&&(C=ip(N)))}else L=w&~E,L!==0?C=ip(L):N!==0&&(C=ip(N));if(C===0)return 0;if(m!==0&&m!==C&&!(m&E)&&(E=C&-C,N=m&-m,E>=N||E===16&&(N&4194240)!==0))return m;if(C&4&&(C|=w&16),m=p.entangledLanes,m!==0)for(p=p.entanglements,m&=C;0<m;)w=31-xs(m),E=1<<w,C|=p[w],m&=~E;return C}function p7(p,m){switch(p){case 1:case 2:case 4:return m+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function h7(p,m){for(var w=p.suspendedLanes,C=p.pingedLanes,E=p.expirationTimes,N=p.pendingLanes;0<N;){var L=31-xs(N),Z=1<<L,ae=E[L];ae===-1?(!(Z&w)||Z&C)&&(E[L]=p7(Z,m)):ae<=m&&(p.expiredLanes|=Z),N&=~Z}}function F2(p){return p=p.pendingLanes&-1073741825,p!==0?p:p&1073741824?1073741824:0}function iO(){var p=dy;return dy<<=1,!(dy&4194240)&&(dy=64),p}function L2(p){for(var m=[],w=0;31>w;w++)m.push(p);return m}function sp(p,m,w){p.pendingLanes|=m,m!==536870912&&(p.suspendedLanes=0,p.pingedLanes=0),p=p.eventTimes,m=31-xs(m),p[m]=w}function m7(p,m){var w=p.pendingLanes&~m;p.pendingLanes=m,p.suspendedLanes=0,p.pingedLanes=0,p.expiredLanes&=m,p.mutableReadLanes&=m,p.entangledLanes&=m,m=p.entanglements;var C=p.eventTimes;for(p=p.expirationTimes;0<w;){var E=31-xs(w),N=1<<E;m[E]=0,C[E]=-1,p[E]=-1,w&=~N}}function M2(p,m){var w=p.entangledLanes|=m;for(p=p.entanglements;w;){var C=31-xs(w),E=1<<C;E&m|p[C]&m&&(p[C]|=m),w&=~E}}var ft=0;function sO(p){return p&=-p,1<p?4<p?p&268435455?16:536870912:4:1}var B2=i.unstable_scheduleCallback,aO=i.unstable_cancelCallback,g7=i.unstable_shouldYield,y7=i.unstable_requestPaint,Mn=i.unstable_now,z2=i.unstable_ImmediatePriority,v7=i.unstable_UserBlockingPriority,j2=i.unstable_NormalPriority,x7=i.unstable_IdlePriority,hy=null,qs=null;function b7(p){if(qs&&typeof qs.onCommitFiberRoot=="function")try{qs.onCommitFiberRoot(hy,p,void 0,(p.current.flags&128)===128)}catch{}}function w7(p,m){return p===m&&(p!==0||1/p===1/m)||p!==p&&m!==m}var bs=typeof Object.is=="function"?Object.is:w7,Na=null,my=!1,V2=!1;function oO(p){Na===null?Na=[p]:Na.push(p)}function S7(p){my=!0,oO(p)}function Ks(){if(!V2&&Na!==null){V2=!0;var p=0,m=ft;try{var w=Na;for(ft=1;p<w.length;p++){var C=w[p];do C=C(!0);while(C!==null)}Na=null,my=!1}catch(E){throw Na!==null&&(Na=Na.slice(p+1)),B2(z2,Ks),E}finally{ft=m,V2=!1}}return null}var Eu=[],Tu=0,gy=null,yy=0,Mi=[],Bi=0,ql=null,Ra=1,Oa="";function Kl(p,m){Eu[Tu++]=yy,Eu[Tu++]=gy,gy=p,yy=m}function lO(p,m,w){Mi[Bi++]=Ra,Mi[Bi++]=Oa,Mi[Bi++]=ql,ql=p;var C=Ra;p=Oa;var E=32-xs(C)-1;C&=~(1<<E),w+=1;var N=32-xs(m)+E;if(30<N){var L=E-E%5;N=(C&(1<<L)-1).toString(32),C>>=L,E-=L,Ra=1<<32-xs(m)+E|w<<E|C,Oa=N+p}else Ra=1<<N|w<<E|C,Oa=p}function W2(p){p.return!==null&&(Kl(p,1),lO(p,1,0))}function U2(p){for(;p===gy;)gy=Eu[--Tu],Eu[Tu]=null,yy=Eu[--Tu],Eu[Tu]=null;for(;p===ql;)ql=Mi[--Bi],Mi[Bi]=null,Oa=Mi[--Bi],Mi[Bi]=null,Ra=Mi[--Bi],Mi[Bi]=null}var yi=null,zi=null,Kt=!1,ap=!1,ws=null;function cO(p,m){var w=Gi(5,null,null,0);w.elementType="DELETED",w.stateNode=m,w.return=p,m=p.deletions,m===null?(p.deletions=[w],p.flags|=16):m.push(w)}function uO(p,m){switch(p.tag){case 5:return m=U9(m,p.type,p.pendingProps),m!==null?(p.stateNode=m,yi=p,zi=X9(m),!0):!1;case 6:return m=G9(m,p.pendingProps),m!==null?(p.stateNode=m,yi=p,zi=null,!0):!1;case 13:if(m=H9(m),m!==null){var w=ql!==null?{id:Ra,overflow:Oa}:null;return p.memoizedState={dehydrated:m,treeContext:w,retryLane:1073741824},w=Gi(18,null,null,0),w.stateNode=m,w.return=p,p.child=w,yi=p,zi=null,!0}return!1;default:return!1}}function G2(p){return(p.mode&1)!==0&&(p.flags&128)===0}function H2(p){if(Kt){var m=zi;if(m){var w=m;if(!uO(p,m)){if(G2(p))throw Error(a(418));m=ly(w);var C=yi;m&&uO(p,m)?cO(C,w):(p.flags=p.flags&-4097|2,Kt=!1,yi=p)}}else{if(G2(p))throw Error(a(418));p.flags=p.flags&-4097|2,Kt=!1,yi=p}}}function dO(p){for(p=p.return;p!==null&&p.tag!==5&&p.tag!==3&&p.tag!==13;)p=p.return;yi=p}function vy(p){if(!je||p!==yi)return!1;if(!Kt)return dO(p),Kt=!0,!1;if(p.tag!==3&&(p.tag!==5||a7(p.type)&&!pe(p.type,p.memoizedProps))){var m=zi;if(m){if(G2(p))throw fO(),Error(a(418));for(;m;)cO(p,m),m=ly(m)}}if(dO(p),p.tag===13){if(!je)throw Error(a(316));if(p=p.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(a(317));zi=t7(p)}else zi=yi?ly(p.stateNode):null;return!0}function fO(){for(var p=zi;p;)p=ly(p)}function _u(){je&&(zi=yi=null,ap=Kt=!1)}function q2(p){ws===null?ws=[p]:ws.push(p)}var k7=o.ReactCurrentBatchConfig;function xy(p,m){if(bs(p,m))return!0;if(typeof p!="object"||p===null||typeof m!="object"||m===null)return!1;var w=Object.keys(p),C=Object.keys(m);if(w.length!==C.length)return!1;for(C=0;C<w.length;C++){var E=w[C];if(!c7.call(m,E)||!bs(p[E],m[E]))return!1}return!0}function C7(p){switch(p.tag){case 5:return rp(p.type);case 16:return rp("Lazy");case 13:return rp("Suspense");case 19:return rp("SuspenseList");case 0:case 2:case 15:return p=P2(p.type,!1),p;case 11:return p=P2(p.type.render,!1),p;case 1:return p=P2(p.type,!0),p;default:return""}}function op(p,m,w){if(p=w.ref,p!==null&&typeof p!="function"&&typeof p!="object"){if(w._owner){if(w=w._owner,w){if(w.tag!==1)throw Error(a(309));var C=w.stateNode}if(!C)throw Error(a(147,p));var E=C,N=""+p;return m!==null&&m.ref!==null&&typeof m.ref=="function"&&m.ref._stringRef===N?m.ref:(m=function(L){var Z=E.refs;L===null?delete Z[N]:Z[N]=L},m._stringRef=N,m)}if(typeof p!="string")throw Error(a(284));if(!w._owner)throw Error(a(290,p))}return p}function by(p,m){throw p=Object.prototype.toString.call(m),Error(a(31,p==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":p))}function pO(p){var m=p._init;return m(p._payload)}function hO(p){function m(se,J){if(p){var ce=se.deletions;ce===null?(se.deletions=[J],se.flags|=16):ce.push(J)}}function w(se,J){if(!p)return null;for(;J!==null;)m(se,J),J=J.sibling;return null}function C(se,J){for(se=new Map;J!==null;)J.key!==null?se.set(J.key,J):se.set(J.index,J),J=J.sibling;return se}function E(se,J){return se=Mo(se,J),se.index=0,se.sibling=null,se}function N(se,J,ce){return se.index=ce,p?(ce=se.alternate,ce!==null?(ce=ce.index,ce<J?(se.flags|=2,J):ce):(se.flags|=2,J)):(se.flags|=1048576,J)}function L(se){return p&&se.alternate===null&&(se.flags|=2),se}function Z(se,J,ce,Te){return J===null||J.tag!==6?(J=VS(ce,se.mode,Te),J.return=se,J):(J=E(J,ce),J.return=se,J)}function ae(se,J,ce,Te){var ze=ce.type;return ze===u?Pe(se,J,ce.props.children,Te,ce.key):J!==null&&(J.elementType===ze||typeof ze=="object"&&ze!==null&&ze.$$typeof===S&&pO(ze)===J.type)?(Te=E(J,ce.props),Te.ref=op(se,J,ce),Te.return=se,Te):(Te=Qy(ce.type,ce.key,ce.props,null,se.mode,Te),Te.ref=op(se,J,ce),Te.return=se,Te)}function ve(se,J,ce,Te){return J===null||J.tag!==4||J.stateNode.containerInfo!==ce.containerInfo||J.stateNode.implementation!==ce.implementation?(J=WS(ce,se.mode,Te),J.return=se,J):(J=E(J,ce.children||[]),J.return=se,J)}function Pe(se,J,ce,Te,ze){return J===null||J.tag!==7?(J=tc(ce,se.mode,Te,ze),J.return=se,J):(J=E(J,ce),J.return=se,J)}function Ke(se,J,ce){if(typeof J=="string"&&J!==""||typeof J=="number")return J=VS(""+J,se.mode,ce),J.return=se,J;if(typeof J=="object"&&J!==null){switch(J.$$typeof){case l:return ce=Qy(J.type,J.key,J.props,null,se.mode,ce),ce.ref=op(se,null,J),ce.return=se,ce;case c:return J=WS(J,se.mode,ce),J.return=se,J;case S:var Te=J._init;return Ke(se,Te(J._payload),ce)}if(X(J)||T(J))return J=tc(J,se.mode,ce,null),J.return=se,J;by(se,J)}return null}function Ee(se,J,ce,Te){var ze=J!==null?J.key:null;if(typeof ce=="string"&&ce!==""||typeof ce=="number")return ze!==null?null:Z(se,J,""+ce,Te);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case l:return ce.key===ze?ae(se,J,ce,Te):null;case c:return ce.key===ze?ve(se,J,ce,Te):null;case S:return ze=ce._init,Ee(se,J,ze(ce._payload),Te)}if(X(ce)||T(ce))return ze!==null?null:Pe(se,J,ce,Te,null);by(se,ce)}return null}function jt(se,J,ce,Te,ze){if(typeof Te=="string"&&Te!==""||typeof Te=="number")return se=se.get(ce)||null,Z(J,se,""+Te,ze);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case l:return se=se.get(Te.key===null?ce:Te.key)||null,ae(J,se,Te,ze);case c:return se=se.get(Te.key===null?ce:Te.key)||null,ve(J,se,Te,ze);case S:var Ze=Te._init;return jt(se,J,ce,Ze(Te._payload),ze)}if(X(Te)||T(Te))return se=se.get(ce)||null,Pe(J,se,Te,ze,null);by(J,Te)}return null}function Tt(se,J,ce,Te){for(var ze=null,Ze=null,Xe=J,pt=J=0,jn=null;Xe!==null&&pt<ce.length;pt++){Xe.index>pt?(jn=Xe,Xe=null):jn=Xe.sibling;var ht=Ee(se,Xe,ce[pt],Te);if(ht===null){Xe===null&&(Xe=jn);break}p&&Xe&&ht.alternate===null&&m(se,Xe),J=N(ht,J,pt),Ze===null?ze=ht:Ze.sibling=ht,Ze=ht,Xe=jn}if(pt===ce.length)return w(se,Xe),Kt&&Kl(se,pt),ze;if(Xe===null){for(;pt<ce.length;pt++)Xe=Ke(se,ce[pt],Te),Xe!==null&&(J=N(Xe,J,pt),Ze===null?ze=Xe:Ze.sibling=Xe,Ze=Xe);return Kt&&Kl(se,pt),ze}for(Xe=C(se,Xe);pt<ce.length;pt++)jn=jt(Xe,se,pt,ce[pt],Te),jn!==null&&(p&&jn.alternate!==null&&Xe.delete(jn.key===null?pt:jn.key),J=N(jn,J,pt),Ze===null?ze=jn:Ze.sibling=jn,Ze=jn);return p&&Xe.forEach(function(Bo){return m(se,Bo)}),Kt&&Kl(se,pt),ze}function Xr(se,J,ce,Te){var ze=T(ce);if(typeof ze!="function")throw Error(a(150));if(ce=ze.call(ce),ce==null)throw Error(a(151));for(var Ze=ze=null,Xe=J,pt=J=0,jn=null,ht=ce.next();Xe!==null&&!ht.done;pt++,ht=ce.next()){Xe.index>pt?(jn=Xe,Xe=null):jn=Xe.sibling;var Bo=Ee(se,Xe,ht.value,Te);if(Bo===null){Xe===null&&(Xe=jn);break}p&&Xe&&Bo.alternate===null&&m(se,Xe),J=N(Bo,J,pt),Ze===null?ze=Bo:Ze.sibling=Bo,Ze=Bo,Xe=jn}if(ht.done)return w(se,Xe),Kt&&Kl(se,pt),ze;if(Xe===null){for(;!ht.done;pt++,ht=ce.next())ht=Ke(se,ht.value,Te),ht!==null&&(J=N(ht,J,pt),Ze===null?ze=ht:Ze.sibling=ht,Ze=ht);return Kt&&Kl(se,pt),ze}for(Xe=C(se,Xe);!ht.done;pt++,ht=ce.next())ht=jt(Xe,se,pt,ht.value,Te),ht!==null&&(p&&ht.alternate!==null&&Xe.delete(ht.key===null?pt:ht.key),J=N(ht,J,pt),Ze===null?ze=ht:Ze.sibling=ht,Ze=ht);return p&&Xe.forEach(function(eq){return m(se,eq)}),Kt&&Kl(se,pt),ze}function Fa(se,J,ce,Te){if(typeof ce=="object"&&ce!==null&&ce.type===u&&ce.key===null&&(ce=ce.props.children),typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case l:e:{for(var ze=ce.key,Ze=J;Ze!==null;){if(Ze.key===ze){if(ze=ce.type,ze===u){if(Ze.tag===7){w(se,Ze.sibling),J=E(Ze,ce.props.children),J.return=se,se=J;break e}}else if(Ze.elementType===ze||typeof ze=="object"&&ze!==null&&ze.$$typeof===S&&pO(ze)===Ze.type){w(se,Ze.sibling),J=E(Ze,ce.props),J.ref=op(se,Ze,ce),J.return=se,se=J;break e}w(se,Ze);break}else m(se,Ze);Ze=Ze.sibling}ce.type===u?(J=tc(ce.props.children,se.mode,Te,ce.key),J.return=se,se=J):(Te=Qy(ce.type,ce.key,ce.props,null,se.mode,Te),Te.ref=op(se,J,ce),Te.return=se,se=Te)}return L(se);case c:e:{for(Ze=ce.key;J!==null;){if(J.key===Ze)if(J.tag===4&&J.stateNode.containerInfo===ce.containerInfo&&J.stateNode.implementation===ce.implementation){w(se,J.sibling),J=E(J,ce.children||[]),J.return=se,se=J;break e}else{w(se,J);break}else m(se,J);J=J.sibling}J=WS(ce,se.mode,Te),J.return=se,se=J}return L(se);case S:return Ze=ce._init,Fa(se,J,Ze(ce._payload),Te)}if(X(ce))return Tt(se,J,ce,Te);if(T(ce))return Xr(se,J,ce,Te);by(se,ce)}return typeof ce=="string"&&ce!==""||typeof ce=="number"?(ce=""+ce,J!==null&&J.tag===6?(w(se,J.sibling),J=E(J,ce),J.return=se,se=J):(w(se,J),J=VS(ce,se.mode,Te),J.return=se,se=J),L(se)):w(se,J)}return Fa}var Iu=hO(!0),mO=hO(!1),wy=No(null),Sy=null,Nu=null,K2=null;function X2(){K2=Nu=Sy=null}function gO(p,m,w){De?(Pt(wy,m._currentValue),m._currentValue=w):(Pt(wy,m._currentValue2),m._currentValue2=w)}function Y2(p){var m=wy.current;zt(wy),De?p._currentValue=m:p._currentValue2=m}function Q2(p,m,w){for(;p!==null;){var C=p.alternate;if((p.childLanes&m)!==m?(p.childLanes|=m,C!==null&&(C.childLanes|=m)):C!==null&&(C.childLanes&m)!==m&&(C.childLanes|=m),p===w)break;p=p.return}}function Ru(p,m){Sy=p,K2=Nu=null,p=p.dependencies,p!==null&&p.firstContext!==null&&(p.lanes&m&&(Hr=!0),p.firstContext=null)}function ji(p){var m=De?p._currentValue:p._currentValue2;if(K2!==p)if(p={context:p,memoizedValue:m,next:null},Nu===null){if(Sy===null)throw Error(a(308));Nu=p,Sy.dependencies={lanes:0,firstContext:p}}else Nu=Nu.next=p;return m}var Xl=null;function Z2(p){Xl===null?Xl=[p]:Xl.push(p)}function yO(p,m,w,C){var E=m.interleaved;return E===null?(w.next=w,Z2(m)):(w.next=E.next,E.next=w),m.interleaved=w,Xs(p,C)}function Xs(p,m){p.lanes|=m;var w=p.alternate;for(w!==null&&(w.lanes|=m),w=p,p=p.return;p!==null;)p.childLanes|=m,w=p.alternate,w!==null&&(w.childLanes|=m),w=p,p=p.return;return w.tag===3?w.stateNode:null}var Oo=!1;function J2(p){p.updateQueue={baseState:p.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function vO(p,m){p=p.updateQueue,m.updateQueue===p&&(m.updateQueue={baseState:p.baseState,firstBaseUpdate:p.firstBaseUpdate,lastBaseUpdate:p.lastBaseUpdate,shared:p.shared,effects:p.effects})}function Aa(p,m){return{eventTime:p,lane:m,tag:0,payload:null,callback:null,next:null}}function Ao(p,m,w){var C=p.updateQueue;if(C===null)return null;if(C=C.shared,nt&2){var E=C.pending;return E===null?m.next=m:(m.next=E.next,E.next=m),C.pending=m,Xs(p,w)}return E=C.interleaved,E===null?(m.next=m,Z2(C)):(m.next=E.next,E.next=m),C.interleaved=m,Xs(p,w)}function ky(p,m,w){if(m=m.updateQueue,m!==null&&(m=m.shared,(w&4194240)!==0)){var C=m.lanes;C&=p.pendingLanes,w|=C,m.lanes=w,M2(p,w)}}function xO(p,m){var w=p.updateQueue,C=p.alternate;if(C!==null&&(C=C.updateQueue,w===C)){var E=null,N=null;if(w=w.firstBaseUpdate,w!==null){do{var L={eventTime:w.eventTime,lane:w.lane,tag:w.tag,payload:w.payload,callback:w.callback,next:null};N===null?E=N=L:N=N.next=L,w=w.next}while(w!==null);N===null?E=N=m:N=N.next=m}else E=N=m;w={baseState:C.baseState,firstBaseUpdate:E,lastBaseUpdate:N,shared:C.shared,effects:C.effects},p.updateQueue=w;return}p=w.lastBaseUpdate,p===null?w.firstBaseUpdate=m:p.next=m,w.lastBaseUpdate=m}function Cy(p,m,w,C){var E=p.updateQueue;Oo=!1;var N=E.firstBaseUpdate,L=E.lastBaseUpdate,Z=E.shared.pending;if(Z!==null){E.shared.pending=null;var ae=Z,ve=ae.next;ae.next=null,L===null?N=ve:L.next=ve,L=ae;var Pe=p.alternate;Pe!==null&&(Pe=Pe.updateQueue,Z=Pe.lastBaseUpdate,Z!==L&&(Z===null?Pe.firstBaseUpdate=ve:Z.next=ve,Pe.lastBaseUpdate=ae))}if(N!==null){var Ke=E.baseState;L=0,Pe=ve=ae=null,Z=N;do{var Ee=Z.lane,jt=Z.eventTime;if((C&Ee)===Ee){Pe!==null&&(Pe=Pe.next={eventTime:jt,lane:0,tag:Z.tag,payload:Z.payload,callback:Z.callback,next:null});e:{var Tt=p,Xr=Z;switch(Ee=m,jt=w,Xr.tag){case 1:if(Tt=Xr.payload,typeof Tt=="function"){Ke=Tt.call(jt,Ke,Ee);break e}Ke=Tt;break e;case 3:Tt.flags=Tt.flags&-65537|128;case 0:if(Tt=Xr.payload,Ee=typeof Tt=="function"?Tt.call(jt,Ke,Ee):Tt,Ee==null)break e;Ke=s({},Ke,Ee);break e;case 2:Oo=!0}}Z.callback!==null&&Z.lane!==0&&(p.flags|=64,Ee=E.effects,Ee===null?E.effects=[Z]:Ee.push(Z))}else jt={eventTime:jt,lane:Ee,tag:Z.tag,payload:Z.payload,callback:Z.callback,next:null},Pe===null?(ve=Pe=jt,ae=Ke):Pe=Pe.next=jt,L|=Ee;if(Z=Z.next,Z===null){if(Z=E.shared.pending,Z===null)break;Ee=Z,Z=Ee.next,Ee.next=null,E.lastBaseUpdate=Ee,E.shared.pending=null}}while(!0);if(Pe===null&&(ae=Ke),E.baseState=ae,E.firstBaseUpdate=ve,E.lastBaseUpdate=Pe,m=E.shared.interleaved,m!==null){E=m;do L|=E.lane,E=E.next;while(E!==m)}else N===null&&(E.shared.lanes=0);Ql|=L,p.lanes=L,p.memoizedState=Ke}}function bO(p,m,w){if(p=m.effects,m.effects=null,p!==null)for(m=0;m<p.length;m++){var C=p[m],E=C.callback;if(E!==null){if(C.callback=null,C=w,typeof E!="function")throw Error(a(191,E));E.call(C)}}}var lp={},Vi=No(lp),cp=No(lp),Ou=No(lp);function Ys(p){if(p===lp)throw Error(a(174));return p}function eS(p,m){Pt(Ou,m),Pt(cp,p),Pt(Vi,lp),p=te(m),zt(Vi),Pt(Vi,p)}function Au(){zt(Vi),zt(cp),zt(Ou)}function wO(p){var m=Ys(Ou.current),w=Ys(Vi.current);m=j(w,p.type,m),w!==m&&(Pt(cp,p),Pt(Vi,m))}function tS(p){cp.current===p&&(zt(Vi),zt(cp))}var rn=No(0);function $y(p){for(var m=p;m!==null;){if(m.tag===13){var w=m.memoizedState;if(w!==null&&(w=w.dehydrated,w===null||eO(w)||R2(w)))return m}else if(m.tag===19&&m.memoizedProps.revealOrder!==void 0){if(m.flags&128)return m}else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===p)break;for(;m.sibling===null;){if(m.return===null||m.return===p)return null;m=m.return}m.sibling.return=m.return,m=m.sibling}return null}var nS=[];function rS(){for(var p=0;p<nS.length;p++){var m=nS[p];De?m._workInProgressVersionPrimary=null:m._workInProgressVersionSecondary=null}nS.length=0}var Ey=o.ReactCurrentDispatcher,iS=o.ReactCurrentBatchConfig,Yl=0,sn=null,In=null,Bn=null,Ty=!1,up=!1,dp=0,$7=0;function pr(){throw Error(a(321))}function sS(p,m){if(m===null)return!1;for(var w=0;w<m.length&&w<p.length;w++)if(!bs(p[w],m[w]))return!1;return!0}function aS(p,m,w,C,E,N){if(Yl=N,sn=m,m.memoizedState=null,m.updateQueue=null,m.lanes=0,Ey.current=p===null||p.memoizedState===null?I7:N7,p=w(C,E),up){N=0;do{if(up=!1,dp=0,25<=N)throw Error(a(301));N+=1,Bn=In=null,m.updateQueue=null,Ey.current=R7,p=w(C,E)}while(up)}if(Ey.current=Ny,m=In!==null&&In.next!==null,Yl=0,Bn=In=sn=null,Ty=!1,m)throw Error(a(300));return p}function oS(){var p=dp!==0;return dp=0,p}function Qs(){var p={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bn===null?sn.memoizedState=Bn=p:Bn=Bn.next=p,Bn}function Wi(){if(In===null){var p=sn.alternate;p=p!==null?p.memoizedState:null}else p=In.next;var m=Bn===null?sn.memoizedState:Bn.next;if(m!==null)Bn=m,In=p;else{if(p===null)throw Error(a(310));In=p,p={memoizedState:In.memoizedState,baseState:In.baseState,baseQueue:In.baseQueue,queue:In.queue,next:null},Bn===null?sn.memoizedState=Bn=p:Bn=Bn.next=p}return Bn}function fp(p,m){return typeof m=="function"?m(p):m}function lS(p){var m=Wi(),w=m.queue;if(w===null)throw Error(a(311));w.lastRenderedReducer=p;var C=In,E=C.baseQueue,N=w.pending;if(N!==null){if(E!==null){var L=E.next;E.next=N.next,N.next=L}C.baseQueue=E=N,w.pending=null}if(E!==null){N=E.next,C=C.baseState;var Z=L=null,ae=null,ve=N;do{var Pe=ve.lane;if((Yl&Pe)===Pe)ae!==null&&(ae=ae.next={lane:0,action:ve.action,hasEagerState:ve.hasEagerState,eagerState:ve.eagerState,next:null}),C=ve.hasEagerState?ve.eagerState:p(C,ve.action);else{var Ke={lane:Pe,action:ve.action,hasEagerState:ve.hasEagerState,eagerState:ve.eagerState,next:null};ae===null?(Z=ae=Ke,L=C):ae=ae.next=Ke,sn.lanes|=Pe,Ql|=Pe}ve=ve.next}while(ve!==null&&ve!==N);ae===null?L=C:ae.next=Z,bs(C,m.memoizedState)||(Hr=!0),m.memoizedState=C,m.baseState=L,m.baseQueue=ae,w.lastRenderedState=C}if(p=w.interleaved,p!==null){E=p;do N=E.lane,sn.lanes|=N,Ql|=N,E=E.next;while(E!==p)}else E===null&&(w.lanes=0);return[m.memoizedState,w.dispatch]}function cS(p){var m=Wi(),w=m.queue;if(w===null)throw Error(a(311));w.lastRenderedReducer=p;var C=w.dispatch,E=w.pending,N=m.memoizedState;if(E!==null){w.pending=null;var L=E=E.next;do N=p(N,L.action),L=L.next;while(L!==E);bs(N,m.memoizedState)||(Hr=!0),m.memoizedState=N,m.baseQueue===null&&(m.baseState=N),w.lastRenderedState=N}return[N,C]}function SO(){}function kO(p,m){var w=sn,C=Wi(),E=m(),N=!bs(C.memoizedState,E);if(N&&(C.memoizedState=E,Hr=!0),C=C.queue,uS(EO.bind(null,w,C,p),[p]),C.getSnapshot!==m||N||Bn!==null&&Bn.memoizedState.tag&1){if(w.flags|=2048,pp(9,$O.bind(null,w,C,E,m),void 0,null),zn===null)throw Error(a(349));Yl&30||CO(w,m,E)}return E}function CO(p,m,w){p.flags|=16384,p={getSnapshot:m,value:w},m=sn.updateQueue,m===null?(m={lastEffect:null,stores:null},sn.updateQueue=m,m.stores=[p]):(w=m.stores,w===null?m.stores=[p]:w.push(p))}function $O(p,m,w,C){m.value=w,m.getSnapshot=C,TO(m)&&_O(p)}function EO(p,m,w){return w(function(){TO(m)&&_O(p)})}function TO(p){var m=p.getSnapshot;p=p.value;try{var w=m();return!bs(p,w)}catch{return!0}}function _O(p){var m=Xs(p,1);m!==null&&Ui(m,p,1,-1)}function IO(p){var m=Qs();return typeof p=="function"&&(p=p()),m.memoizedState=m.baseState=p,p={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fp,lastRenderedState:p},m.queue=p,p=p.dispatch=_7.bind(null,sn,p),[m.memoizedState,p]}function pp(p,m,w,C){return p={tag:p,create:m,destroy:w,deps:C,next:null},m=sn.updateQueue,m===null?(m={lastEffect:null,stores:null},sn.updateQueue=m,m.lastEffect=p.next=p):(w=m.lastEffect,w===null?m.lastEffect=p.next=p:(C=w.next,w.next=p,p.next=C,m.lastEffect=p)),p}function NO(){return Wi().memoizedState}function _y(p,m,w,C){var E=Qs();sn.flags|=p,E.memoizedState=pp(1|m,w,void 0,C===void 0?null:C)}function Iy(p,m,w,C){var E=Wi();C=C===void 0?null:C;var N=void 0;if(In!==null){var L=In.memoizedState;if(N=L.destroy,C!==null&&sS(C,L.deps)){E.memoizedState=pp(m,w,N,C);return}}sn.flags|=p,E.memoizedState=pp(1|m,w,N,C)}function RO(p,m){return _y(8390656,8,p,m)}function uS(p,m){return Iy(2048,8,p,m)}function OO(p,m){return Iy(4,2,p,m)}function AO(p,m){return Iy(4,4,p,m)}function PO(p,m){if(typeof m=="function")return p=p(),m(p),function(){m(null)};if(m!=null)return p=p(),m.current=p,function(){m.current=null}}function DO(p,m,w){return w=w!=null?w.concat([p]):null,Iy(4,4,PO.bind(null,m,p),w)}function dS(){}function FO(p,m){var w=Wi();m=m===void 0?null:m;var C=w.memoizedState;return C!==null&&m!==null&&sS(m,C[1])?C[0]:(w.memoizedState=[p,m],p)}function LO(p,m){var w=Wi();m=m===void 0?null:m;var C=w.memoizedState;return C!==null&&m!==null&&sS(m,C[1])?C[0]:(p=p(),w.memoizedState=[p,m],p)}function MO(p,m,w){return Yl&21?(bs(w,m)||(w=iO(),sn.lanes|=w,Ql|=w,p.baseState=!0),m):(p.baseState&&(p.baseState=!1,Hr=!0),p.memoizedState=w)}function E7(p,m){var w=ft;ft=w!==0&&4>w?w:4,p(!0);var C=iS.transition;iS.transition={};try{p(!1),m()}finally{ft=w,iS.transition=C}}function BO(){return Wi().memoizedState}function T7(p,m,w){var C=Fo(p);if(w={lane:C,action:w,hasEagerState:!1,eagerState:null,next:null},zO(p))jO(m,w);else if(w=yO(p,m,w,C),w!==null){var E=gr();Ui(w,p,C,E),VO(w,m,C)}}function _7(p,m,w){var C=Fo(p),E={lane:C,action:w,hasEagerState:!1,eagerState:null,next:null};if(zO(p))jO(m,E);else{var N=p.alternate;if(p.lanes===0&&(N===null||N.lanes===0)&&(N=m.lastRenderedReducer,N!==null))try{var L=m.lastRenderedState,Z=N(L,w);if(E.hasEagerState=!0,E.eagerState=Z,bs(Z,L)){var ae=m.interleaved;ae===null?(E.next=E,Z2(m)):(E.next=ae.next,ae.next=E),m.interleaved=E;return}}catch{}finally{}w=yO(p,m,E,C),w!==null&&(E=gr(),Ui(w,p,C,E),VO(w,m,C))}}function zO(p){var m=p.alternate;return p===sn||m!==null&&m===sn}function jO(p,m){up=Ty=!0;var w=p.pending;w===null?m.next=m:(m.next=w.next,w.next=m),p.pending=m}function VO(p,m,w){if(w&4194240){var C=m.lanes;C&=p.pendingLanes,w|=C,m.lanes=w,M2(p,w)}}var Ny={readContext:ji,useCallback:pr,useContext:pr,useEffect:pr,useImperativeHandle:pr,useInsertionEffect:pr,useLayoutEffect:pr,useMemo:pr,useReducer:pr,useRef:pr,useState:pr,useDebugValue:pr,useDeferredValue:pr,useTransition:pr,useMutableSource:pr,useSyncExternalStore:pr,useId:pr,unstable_isNewReconciler:!1},I7={readContext:ji,useCallback:function(p,m){return Qs().memoizedState=[p,m===void 0?null:m],p},useContext:ji,useEffect:RO,useImperativeHandle:function(p,m,w){return w=w!=null?w.concat([p]):null,_y(4194308,4,PO.bind(null,m,p),w)},useLayoutEffect:function(p,m){return _y(4194308,4,p,m)},useInsertionEffect:function(p,m){return _y(4,2,p,m)},useMemo:function(p,m){var w=Qs();return m=m===void 0?null:m,p=p(),w.memoizedState=[p,m],p},useReducer:function(p,m,w){var C=Qs();return m=w!==void 0?w(m):m,C.memoizedState=C.baseState=m,p={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:p,lastRenderedState:m},C.queue=p,p=p.dispatch=T7.bind(null,sn,p),[C.memoizedState,p]},useRef:function(p){var m=Qs();return p={current:p},m.memoizedState=p},useState:IO,useDebugValue:dS,useDeferredValue:function(p){return Qs().memoizedState=p},useTransition:function(){var p=IO(!1),m=p[0];return p=E7.bind(null,p[1]),Qs().memoizedState=p,[m,p]},useMutableSource:function(){},useSyncExternalStore:function(p,m,w){var C=sn,E=Qs();if(Kt){if(w===void 0)throw Error(a(407));w=w()}else{if(w=m(),zn===null)throw Error(a(349));Yl&30||CO(C,m,w)}E.memoizedState=w;var N={value:w,getSnapshot:m};return E.queue=N,RO(EO.bind(null,C,N,p),[p]),C.flags|=2048,pp(9,$O.bind(null,C,N,w,m),void 0,null),w},useId:function(){var p=Qs(),m=zn.identifierPrefix;if(Kt){var w=Oa,C=Ra;w=(C&~(1<<32-xs(C)-1)).toString(32)+w,m=":"+m+"R"+w,w=dp++,0<w&&(m+="H"+w.toString(32)),m+=":"}else w=$7++,m=":"+m+"r"+w.toString(32)+":";return p.memoizedState=m},unstable_isNewReconciler:!1},N7={readContext:ji,useCallback:FO,useContext:ji,useEffect:uS,useImperativeHandle:DO,useInsertionEffect:OO,useLayoutEffect:AO,useMemo:LO,useReducer:lS,useRef:NO,useState:function(){return lS(fp)},useDebugValue:dS,useDeferredValue:function(p){var m=Wi();return MO(m,In.memoizedState,p)},useTransition:function(){var p=lS(fp)[0],m=Wi().memoizedState;return[p,m]},useMutableSource:SO,useSyncExternalStore:kO,useId:BO,unstable_isNewReconciler:!1},R7={readContext:ji,useCallback:FO,useContext:ji,useEffect:uS,useImperativeHandle:DO,useInsertionEffect:OO,useLayoutEffect:AO,useMemo:LO,useReducer:cS,useRef:NO,useState:function(){return cS(fp)},useDebugValue:dS,useDeferredValue:function(p){var m=Wi();return In===null?m.memoizedState=p:MO(m,In.memoizedState,p)},useTransition:function(){var p=cS(fp)[0],m=Wi().memoizedState;return[p,m]},useMutableSource:SO,useSyncExternalStore:kO,useId:BO,unstable_isNewReconciler:!1};function Ss(p,m){if(p&&p.defaultProps){m=s({},m),p=p.defaultProps;for(var w in p)m[w]===void 0&&(m[w]=p[w]);return m}return m}function fS(p,m,w,C){m=p.memoizedState,w=w(C,m),w=w==null?m:s({},m,w),p.memoizedState=w,p.lanes===0&&(p.updateQueue.baseState=w)}var Ry={isMounted:function(p){return(p=p._reactInternals)?P(p)===p:!1},enqueueSetState:function(p,m,w){p=p._reactInternals;var C=gr(),E=Fo(p),N=Aa(C,E);N.payload=m,w!=null&&(N.callback=w),m=Ao(p,N,E),m!==null&&(Ui(m,p,E,C),ky(m,p,E))},enqueueReplaceState:function(p,m,w){p=p._reactInternals;var C=gr(),E=Fo(p),N=Aa(C,E);N.tag=1,N.payload=m,w!=null&&(N.callback=w),m=Ao(p,N,E),m!==null&&(Ui(m,p,E,C),ky(m,p,E))},enqueueForceUpdate:function(p,m){p=p._reactInternals;var w=gr(),C=Fo(p),E=Aa(w,C);E.tag=2,m!=null&&(E.callback=m),m=Ao(p,E,C),m!==null&&(Ui(m,p,C,w),ky(m,p,C))}};function WO(p,m,w,C,E,N,L){return p=p.stateNode,typeof p.shouldComponentUpdate=="function"?p.shouldComponentUpdate(C,N,L):m.prototype&&m.prototype.isPureReactComponent?!xy(w,C)||!xy(E,N):!0}function UO(p,m,w){var C=!1,E=Ro,N=m.contextType;return typeof N=="object"&&N!==null?N=ji(N):(E=Gr(m)?Hl:fr.current,C=m.contextTypes,N=(C=C!=null)?$u(p,E):Ro),m=new m(w,N),p.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Ry,p.stateNode=m,m._reactInternals=p,C&&(p=p.stateNode,p.__reactInternalMemoizedUnmaskedChildContext=E,p.__reactInternalMemoizedMaskedChildContext=N),m}function GO(p,m,w,C){p=m.state,typeof m.componentWillReceiveProps=="function"&&m.componentWillReceiveProps(w,C),typeof m.UNSAFE_componentWillReceiveProps=="function"&&m.UNSAFE_componentWillReceiveProps(w,C),m.state!==p&&Ry.enqueueReplaceState(m,m.state,null)}function pS(p,m,w,C){var E=p.stateNode;E.props=w,E.state=p.memoizedState,E.refs={},J2(p);var N=m.contextType;typeof N=="object"&&N!==null?E.context=ji(N):(N=Gr(m)?Hl:fr.current,E.context=$u(p,N)),E.state=p.memoizedState,N=m.getDerivedStateFromProps,typeof N=="function"&&(fS(p,m,N,w),E.state=p.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(m=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),m!==E.state&&Ry.enqueueReplaceState(E,E.state,null),Cy(p,w,E,C),E.state=p.memoizedState),typeof E.componentDidMount=="function"&&(p.flags|=4194308)}function Pu(p,m){try{var w="",C=m;do w+=C7(C),C=C.return;while(C);var E=w}catch(N){E=`
Error generating stack: `+N.message+`
`+N.stack}return{value:p,source:m,stack:E,digest:null}}function hS(p,m,w){return{value:p,source:null,stack:w??null,digest:m??null}}function mS(p,m){try{console.error(m.value)}catch(w){setTimeout(function(){throw w})}}var O7=typeof WeakMap=="function"?WeakMap:Map;function HO(p,m,w){w=Aa(-1,w),w.tag=3,w.payload={element:null};var C=m.value;return w.callback=function(){Gy||(Gy=!0,DS=C),mS(p,m)},w}function qO(p,m,w){w=Aa(-1,w),w.tag=3;var C=p.type.getDerivedStateFromError;if(typeof C=="function"){var E=m.value;w.payload=function(){return C(E)},w.callback=function(){mS(p,m)}}var N=p.stateNode;return N!==null&&typeof N.componentDidCatch=="function"&&(w.callback=function(){mS(p,m),typeof C!="function"&&(Po===null?Po=new Set([this]):Po.add(this));var L=m.stack;this.componentDidCatch(m.value,{componentStack:L!==null?L:""})}),w}function KO(p,m,w){var C=p.pingCache;if(C===null){C=p.pingCache=new O7;var E=new Set;C.set(m,E)}else E=C.get(m),E===void 0&&(E=new Set,C.set(m,E));E.has(w)||(E.add(w),p=H7.bind(null,p,m,w),m.then(p,p))}function XO(p){do{var m;if((m=p.tag===13)&&(m=p.memoizedState,m=m!==null?m.dehydrated!==null:!0),m)return p;p=p.return}while(p!==null);return null}function YO(p,m,w,C,E){return p.mode&1?(p.flags|=65536,p.lanes=E,p):(p===m?p.flags|=65536:(p.flags|=128,w.flags|=131072,w.flags&=-52805,w.tag===1&&(w.alternate===null?w.tag=17:(m=Aa(-1,1),m.tag=2,Ao(w,m,1))),w.lanes|=1),p)}var A7=o.ReactCurrentOwner,Hr=!1;function Ar(p,m,w,C){m.child=p===null?mO(m,null,w,C):Iu(m,p.child,w,C)}function QO(p,m,w,C,E){w=w.render;var N=m.ref;return Ru(m,E),C=aS(p,m,w,C,N,E),w=oS(),p!==null&&!Hr?(m.updateQueue=p.updateQueue,m.flags&=-2053,p.lanes&=~E,Pa(p,m,E)):(Kt&&w&&W2(m),m.flags|=1,Ar(p,m,C,E),m.child)}function ZO(p,m,w,C,E){if(p===null){var N=w.type;return typeof N=="function"&&!jS(N)&&N.defaultProps===void 0&&w.compare===null&&w.defaultProps===void 0?(m.tag=15,m.type=N,JO(p,m,N,C,E)):(p=Qy(w.type,null,C,m,m.mode,E),p.ref=m.ref,p.return=m,m.child=p)}if(N=p.child,!(p.lanes&E)){var L=N.memoizedProps;if(w=w.compare,w=w!==null?w:xy,w(L,C)&&p.ref===m.ref)return Pa(p,m,E)}return m.flags|=1,p=Mo(N,C),p.ref=m.ref,p.return=m,m.child=p}function JO(p,m,w,C,E){if(p!==null){var N=p.memoizedProps;if(xy(N,C)&&p.ref===m.ref)if(Hr=!1,m.pendingProps=C=N,(p.lanes&E)!==0)p.flags&131072&&(Hr=!0);else return m.lanes=p.lanes,Pa(p,m,E)}return gS(p,m,w,C,E)}function eA(p,m,w){var C=m.pendingProps,E=C.children,N=p!==null?p.memoizedState:null;if(C.mode==="hidden")if(!(m.mode&1))m.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pt(Fu,vi),vi|=w;else{if(!(w&1073741824))return p=N!==null?N.baseLanes|w:w,m.lanes=m.childLanes=1073741824,m.memoizedState={baseLanes:p,cachePool:null,transitions:null},m.updateQueue=null,Pt(Fu,vi),vi|=p,null;m.memoizedState={baseLanes:0,cachePool:null,transitions:null},C=N!==null?N.baseLanes:w,Pt(Fu,vi),vi|=C}else N!==null?(C=N.baseLanes|w,m.memoizedState=null):C=w,Pt(Fu,vi),vi|=C;return Ar(p,m,E,w),m.child}function tA(p,m){var w=m.ref;(p===null&&w!==null||p!==null&&p.ref!==w)&&(m.flags|=512,m.flags|=2097152)}function gS(p,m,w,C,E){var N=Gr(w)?Hl:fr.current;return N=$u(m,N),Ru(m,E),w=aS(p,m,w,C,N,E),C=oS(),p!==null&&!Hr?(m.updateQueue=p.updateQueue,m.flags&=-2053,p.lanes&=~E,Pa(p,m,E)):(Kt&&C&&W2(m),m.flags|=1,Ar(p,m,w,E),m.child)}function nA(p,m,w,C,E){if(Gr(w)){var N=!0;uy(m)}else N=!1;if(Ru(m,E),m.stateNode===null)Ay(p,m),UO(m,w,C),pS(m,w,C,E),C=!0;else if(p===null){var L=m.stateNode,Z=m.memoizedProps;L.props=Z;var ae=L.context,ve=w.contextType;typeof ve=="object"&&ve!==null?ve=ji(ve):(ve=Gr(w)?Hl:fr.current,ve=$u(m,ve));var Pe=w.getDerivedStateFromProps,Ke=typeof Pe=="function"||typeof L.getSnapshotBeforeUpdate=="function";Ke||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(Z!==C||ae!==ve)&&GO(m,L,C,ve),Oo=!1;var Ee=m.memoizedState;L.state=Ee,Cy(m,C,L,E),ae=m.memoizedState,Z!==C||Ee!==ae||Ur.current||Oo?(typeof Pe=="function"&&(fS(m,w,Pe,C),ae=m.memoizedState),(Z=Oo||WO(m,w,Z,C,Ee,ae,ve))?(Ke||typeof L.UNSAFE_componentWillMount!="function"&&typeof L.componentWillMount!="function"||(typeof L.componentWillMount=="function"&&L.componentWillMount(),typeof L.UNSAFE_componentWillMount=="function"&&L.UNSAFE_componentWillMount()),typeof L.componentDidMount=="function"&&(m.flags|=4194308)):(typeof L.componentDidMount=="function"&&(m.flags|=4194308),m.memoizedProps=C,m.memoizedState=ae),L.props=C,L.state=ae,L.context=ve,C=Z):(typeof L.componentDidMount=="function"&&(m.flags|=4194308),C=!1)}else{L=m.stateNode,vO(p,m),Z=m.memoizedProps,ve=m.type===m.elementType?Z:Ss(m.type,Z),L.props=ve,Ke=m.pendingProps,Ee=L.context,ae=w.contextType,typeof ae=="object"&&ae!==null?ae=ji(ae):(ae=Gr(w)?Hl:fr.current,ae=$u(m,ae));var jt=w.getDerivedStateFromProps;(Pe=typeof jt=="function"||typeof L.getSnapshotBeforeUpdate=="function")||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(Z!==Ke||Ee!==ae)&&GO(m,L,C,ae),Oo=!1,Ee=m.memoizedState,L.state=Ee,Cy(m,C,L,E);var Tt=m.memoizedState;Z!==Ke||Ee!==Tt||Ur.current||Oo?(typeof jt=="function"&&(fS(m,w,jt,C),Tt=m.memoizedState),(ve=Oo||WO(m,w,ve,C,Ee,Tt,ae)||!1)?(Pe||typeof L.UNSAFE_componentWillUpdate!="function"&&typeof L.componentWillUpdate!="function"||(typeof L.componentWillUpdate=="function"&&L.componentWillUpdate(C,Tt,ae),typeof L.UNSAFE_componentWillUpdate=="function"&&L.UNSAFE_componentWillUpdate(C,Tt,ae)),typeof L.componentDidUpdate=="function"&&(m.flags|=4),typeof L.getSnapshotBeforeUpdate=="function"&&(m.flags|=1024)):(typeof L.componentDidUpdate!="function"||Z===p.memoizedProps&&Ee===p.memoizedState||(m.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||Z===p.memoizedProps&&Ee===p.memoizedState||(m.flags|=1024),m.memoizedProps=C,m.memoizedState=Tt),L.props=C,L.state=Tt,L.context=ae,C=ve):(typeof L.componentDidUpdate!="function"||Z===p.memoizedProps&&Ee===p.memoizedState||(m.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||Z===p.memoizedProps&&Ee===p.memoizedState||(m.flags|=1024),C=!1)}return yS(p,m,w,C,N,E)}function yS(p,m,w,C,E,N){tA(p,m);var L=(m.flags&128)!==0;if(!C&&!L)return E&&rO(m,w,!1),Pa(p,m,N);C=m.stateNode,A7.current=m;var Z=L&&typeof w.getDerivedStateFromError!="function"?null:C.render();return m.flags|=1,p!==null&&L?(m.child=Iu(m,p.child,null,N),m.child=Iu(m,null,Z,N)):Ar(p,m,Z,N),m.memoizedState=C.state,E&&rO(m,w,!0),m.child}function rA(p){var m=p.stateNode;m.pendingContext?tO(p,m.pendingContext,m.pendingContext!==m.context):m.context&&tO(p,m.context,!1),eS(p,m.containerInfo)}function iA(p,m,w,C,E){return _u(),q2(E),m.flags|=256,Ar(p,m,w,C),m.child}var vS={dehydrated:null,treeContext:null,retryLane:0};function xS(p){return{baseLanes:p,cachePool:null,transitions:null}}function sA(p,m,w){var C=m.pendingProps,E=rn.current,N=!1,L=(m.flags&128)!==0,Z;if((Z=L)||(Z=p!==null&&p.memoizedState===null?!1:(E&2)!==0),Z?(N=!0,m.flags&=-129):(p===null||p.memoizedState!==null)&&(E|=1),Pt(rn,E&1),p===null)return H2(m),p=m.memoizedState,p!==null&&(p=p.dehydrated,p!==null)?(m.mode&1?R2(p)?m.lanes=8:m.lanes=1073741824:m.lanes=1,null):(L=C.children,p=C.fallback,N?(C=m.mode,N=m.child,L={mode:"hidden",children:L},!(C&1)&&N!==null?(N.childLanes=0,N.pendingProps=L):N=Zy(L,C,0,null),p=tc(p,C,w,null),N.return=m,p.return=m,N.sibling=p,m.child=N,m.child.memoizedState=xS(w),m.memoizedState=vS,p):bS(m,L));if(E=p.memoizedState,E!==null&&(Z=E.dehydrated,Z!==null))return P7(p,m,L,C,Z,E,w);if(N){N=C.fallback,L=m.mode,E=p.child,Z=E.sibling;var ae={mode:"hidden",children:C.children};return!(L&1)&&m.child!==E?(C=m.child,C.childLanes=0,C.pendingProps=ae,m.deletions=null):(C=Mo(E,ae),C.subtreeFlags=E.subtreeFlags&14680064),Z!==null?N=Mo(Z,N):(N=tc(N,L,w,null),N.flags|=2),N.return=m,C.return=m,C.sibling=N,m.child=C,C=N,N=m.child,L=p.child.memoizedState,L=L===null?xS(w):{baseLanes:L.baseLanes|w,cachePool:null,transitions:L.transitions},N.memoizedState=L,N.childLanes=p.childLanes&~w,m.memoizedState=vS,C}return N=p.child,p=N.sibling,C=Mo(N,{mode:"visible",children:C.children}),!(m.mode&1)&&(C.lanes=w),C.return=m,C.sibling=null,p!==null&&(w=m.deletions,w===null?(m.deletions=[p],m.flags|=16):w.push(p)),m.child=C,m.memoizedState=null,C}function bS(p,m){return m=Zy({mode:"visible",children:m},p.mode,0,null),m.return=p,p.child=m}function Oy(p,m,w,C){return C!==null&&q2(C),Iu(m,p.child,null,w),p=bS(m,m.pendingProps.children),p.flags|=2,m.memoizedState=null,p}function P7(p,m,w,C,E,N,L){if(w)return m.flags&256?(m.flags&=-257,C=hS(Error(a(422))),Oy(p,m,L,C)):m.memoizedState!==null?(m.child=p.child,m.flags|=128,null):(N=C.fallback,E=m.mode,C=Zy({mode:"visible",children:C.children},E,0,null),N=tc(N,E,L,null),N.flags|=2,C.return=m,N.return=m,C.sibling=N,m.child=C,m.mode&1&&Iu(m,p.child,null,L),m.child.memoizedState=xS(L),m.memoizedState=vS,N);if(!(m.mode&1))return Oy(p,m,L,null);if(R2(E))return C=q9(E).digest,N=Error(a(419)),C=hS(N,C,void 0),Oy(p,m,L,C);if(w=(L&p.childLanes)!==0,Hr||w){if(C=zn,C!==null){switch(L&-L){case 4:E=2;break;case 16:E=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:E=32;break;case 536870912:E=268435456;break;default:E=0}E=E&(C.suspendedLanes|L)?0:E,E!==0&&E!==N.retryLane&&(N.retryLane=E,Xs(p,E),Ui(C,p,E,-1))}return zS(),C=hS(Error(a(421))),Oy(p,m,L,C)}return eO(E)?(m.flags|=128,m.child=p.child,m=q7.bind(null,p),K9(E,m),null):(p=N.treeContext,je&&(zi=Q9(E),yi=m,Kt=!0,ws=null,ap=!1,p!==null&&(Mi[Bi++]=Ra,Mi[Bi++]=Oa,Mi[Bi++]=ql,Ra=p.id,Oa=p.overflow,ql=m)),m=bS(m,C.children),m.flags|=4096,m)}function aA(p,m,w){p.lanes|=m;var C=p.alternate;C!==null&&(C.lanes|=m),Q2(p.return,m,w)}function wS(p,m,w,C,E){var N=p.memoizedState;N===null?p.memoizedState={isBackwards:m,rendering:null,renderingStartTime:0,last:C,tail:w,tailMode:E}:(N.isBackwards=m,N.rendering=null,N.renderingStartTime=0,N.last=C,N.tail=w,N.tailMode=E)}function oA(p,m,w){var C=m.pendingProps,E=C.revealOrder,N=C.tail;if(Ar(p,m,C.children,w),C=rn.current,C&2)C=C&1|2,m.flags|=128;else{if(p!==null&&p.flags&128)e:for(p=m.child;p!==null;){if(p.tag===13)p.memoizedState!==null&&aA(p,w,m);else if(p.tag===19)aA(p,w,m);else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===m)break e;for(;p.sibling===null;){if(p.return===null||p.return===m)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}C&=1}if(Pt(rn,C),!(m.mode&1))m.memoizedState=null;else switch(E){case"forwards":for(w=m.child,E=null;w!==null;)p=w.alternate,p!==null&&$y(p)===null&&(E=w),w=w.sibling;w=E,w===null?(E=m.child,m.child=null):(E=w.sibling,w.sibling=null),wS(m,!1,E,w,N);break;case"backwards":for(w=null,E=m.child,m.child=null;E!==null;){if(p=E.alternate,p!==null&&$y(p)===null){m.child=E;break}p=E.sibling,E.sibling=w,w=E,E=p}wS(m,!0,w,null,N);break;case"together":wS(m,!1,null,null,void 0);break;default:m.memoizedState=null}return m.child}function Ay(p,m){!(m.mode&1)&&p!==null&&(p.alternate=null,m.alternate=null,m.flags|=2)}function Pa(p,m,w){if(p!==null&&(m.dependencies=p.dependencies),Ql|=m.lanes,!(w&m.childLanes))return null;if(p!==null&&m.child!==p.child)throw Error(a(153));if(m.child!==null){for(p=m.child,w=Mo(p,p.pendingProps),m.child=w,w.return=m;p.sibling!==null;)p=p.sibling,w=w.sibling=Mo(p,p.pendingProps),w.return=m;w.sibling=null}return m.child}function D7(p,m,w){switch(m.tag){case 3:rA(m),_u();break;case 5:wO(m);break;case 1:Gr(m.type)&&uy(m);break;case 4:eS(m,m.stateNode.containerInfo);break;case 10:gO(m,m.type._context,m.memoizedProps.value);break;case 13:var C=m.memoizedState;if(C!==null)return C.dehydrated!==null?(Pt(rn,rn.current&1),m.flags|=128,null):w&m.child.childLanes?sA(p,m,w):(Pt(rn,rn.current&1),p=Pa(p,m,w),p!==null?p.sibling:null);Pt(rn,rn.current&1);break;case 19:if(C=(w&m.childLanes)!==0,p.flags&128){if(C)return oA(p,m,w);m.flags|=128}var E=m.memoizedState;if(E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),Pt(rn,rn.current),C)break;return null;case 22:case 23:return m.lanes=0,eA(p,m,w)}return Pa(p,m,w)}function Zs(p){p.flags|=4}function lA(p,m){if(p!==null&&p.child===m.child)return!0;if(m.flags&16)return!1;for(p=m.child;p!==null;){if(p.flags&12854||p.subtreeFlags&12854)return!1;p=p.sibling}return!0}var hp,mp,Py,Dy;if(Oe)hp=function(p,m){for(var w=m.child;w!==null;){if(w.tag===5||w.tag===6)le(p,w.stateNode);else if(w.tag!==4&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===m)break;for(;w.sibling===null;){if(w.return===null||w.return===m)return;w=w.return}w.sibling.return=w.return,w=w.sibling}},mp=function(){},Py=function(p,m,w,C,E){if(p=p.memoizedProps,p!==C){var N=m.stateNode,L=Ys(Vi.current);w=de(N,w,p,C,E,L),(m.updateQueue=w)&&Zs(m)}},Dy=function(p,m,w,C){w!==C&&Zs(m)};else if(Ue){hp=function(p,m,w,C){for(var E=m.child;E!==null;){if(E.tag===5){var N=E.stateNode;w&&C&&(N=ZR(N,E.type,E.memoizedProps,E)),le(p,N)}else if(E.tag===6)N=E.stateNode,w&&C&&(N=JR(N,E.memoizedProps,E)),le(p,N);else if(E.tag!==4){if(E.tag===22&&E.memoizedState!==null)N=E.child,N!==null&&(N.return=E),hp(p,E,!0,!0);else if(E.child!==null){E.child.return=E,E=E.child;continue}}if(E===m)break;for(;E.sibling===null;){if(E.return===null||E.return===m)return;E=E.return}E.sibling.return=E.return,E=E.sibling}};var cA=function(p,m,w,C){for(var E=m.child;E!==null;){if(E.tag===5){var N=E.stateNode;w&&C&&(N=ZR(N,E.type,E.memoizedProps,E)),QR(p,N)}else if(E.tag===6)N=E.stateNode,w&&C&&(N=JR(N,E.memoizedProps,E)),QR(p,N);else if(E.tag!==4){if(E.tag===22&&E.memoizedState!==null)N=E.child,N!==null&&(N.return=E),cA(p,E,!0,!0);else if(E.child!==null){E.child.return=E,E=E.child;continue}}if(E===m)break;for(;E.sibling===null;){if(E.return===null||E.return===m)return;E=E.return}E.sibling.return=E.return,E=E.sibling}};mp=function(p,m){var w=m.stateNode;if(!lA(p,m)){p=w.containerInfo;var C=YR(p);cA(C,m,!1,!1),w.pendingChildren=C,Zs(m),W9(p,C)}},Py=function(p,m,w,C,E){var N=p.stateNode,L=p.memoizedProps;if((p=lA(p,m))&&L===C)m.stateNode=N;else{var Z=m.stateNode,ae=Ys(Vi.current),ve=null;L!==C&&(ve=de(Z,w,L,C,E,ae)),p&&ve===null?m.stateNode=N:(N=V9(N,ve,w,L,C,m,p,Z),ue(N,w,C,E,ae)&&Zs(m),m.stateNode=N,p?Zs(m):hp(N,m,!1,!1))}},Dy=function(p,m,w,C){w!==C?(p=Ys(Ou.current),w=Ys(Vi.current),m.stateNode=me(C,p,w,m),Zs(m)):m.stateNode=p.stateNode}}else mp=function(){},Py=function(){},Dy=function(){};function gp(p,m){if(!Kt)switch(p.tailMode){case"hidden":m=p.tail;for(var w=null;m!==null;)m.alternate!==null&&(w=m),m=m.sibling;w===null?p.tail=null:w.sibling=null;break;case"collapsed":w=p.tail;for(var C=null;w!==null;)w.alternate!==null&&(C=w),w=w.sibling;C===null?m||p.tail===null?p.tail=null:p.tail.sibling=null:C.sibling=null}}function hr(p){var m=p.alternate!==null&&p.alternate.child===p.child,w=0,C=0;if(m)for(var E=p.child;E!==null;)w|=E.lanes|E.childLanes,C|=E.subtreeFlags&14680064,C|=E.flags&14680064,E.return=p,E=E.sibling;else for(E=p.child;E!==null;)w|=E.lanes|E.childLanes,C|=E.subtreeFlags,C|=E.flags,E.return=p,E=E.sibling;return p.subtreeFlags|=C,p.childLanes=w,m}function F7(p,m,w){var C=m.pendingProps;switch(U2(m),m.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return hr(m),null;case 1:return Gr(m.type)&&cy(),hr(m),null;case 3:return w=m.stateNode,Au(),zt(Ur),zt(fr),rS(),w.pendingContext&&(w.context=w.pendingContext,w.pendingContext=null),(p===null||p.child===null)&&(vy(m)?Zs(m):p===null||p.memoizedState.isDehydrated&&!(m.flags&256)||(m.flags|=1024,ws!==null&&(MS(ws),ws=null))),mp(p,m),hr(m),null;case 5:tS(m),w=Ys(Ou.current);var E=m.type;if(p!==null&&m.stateNode!=null)Py(p,m,E,C,w),p.ref!==m.ref&&(m.flags|=512,m.flags|=2097152);else{if(!C){if(m.stateNode===null)throw Error(a(166));return hr(m),null}if(p=Ys(Vi.current),vy(m)){if(!je)throw Error(a(175));p=Z9(m.stateNode,m.type,m.memoizedProps,w,p,m,!ap),m.updateQueue=p,p!==null&&Zs(m)}else{var N=ne(E,C,w,p,m);hp(N,m,!1,!1),m.stateNode=N,ue(N,E,C,w,p)&&Zs(m)}m.ref!==null&&(m.flags|=512,m.flags|=2097152)}return hr(m),null;case 6:if(p&&m.stateNode!=null)Dy(p,m,p.memoizedProps,C);else{if(typeof C!="string"&&m.stateNode===null)throw Error(a(166));if(p=Ys(Ou.current),w=Ys(Vi.current),vy(m)){if(!je)throw Error(a(176));if(p=m.stateNode,w=m.memoizedProps,(C=J9(p,w,m,!ap))&&(E=yi,E!==null))switch(E.tag){case 3:o7(E.stateNode.containerInfo,p,w,(E.mode&1)!==0);break;case 5:l7(E.type,E.memoizedProps,E.stateNode,p,w,(E.mode&1)!==0)}C&&Zs(m)}else m.stateNode=me(C,p,w,m)}return hr(m),null;case 13:if(zt(rn),C=m.memoizedState,p===null||p.memoizedState!==null&&p.memoizedState.dehydrated!==null){if(Kt&&zi!==null&&m.mode&1&&!(m.flags&128))fO(),_u(),m.flags|=98560,E=!1;else if(E=vy(m),C!==null&&C.dehydrated!==null){if(p===null){if(!E)throw Error(a(318));if(!je)throw Error(a(344));if(E=m.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(a(317));e7(E,m)}else _u(),!(m.flags&128)&&(m.memoizedState=null),m.flags|=4;hr(m),E=!1}else ws!==null&&(MS(ws),ws=null),E=!0;if(!E)return m.flags&65536?m:null}return m.flags&128?(m.lanes=w,m):(w=C!==null,w!==(p!==null&&p.memoizedState!==null)&&w&&(m.child.flags|=8192,m.mode&1&&(p===null||rn.current&1?Nn===0&&(Nn=3):zS())),m.updateQueue!==null&&(m.flags|=4),hr(m),null);case 4:return Au(),mp(p,m),p===null&&Be(m.stateNode.containerInfo),hr(m),null;case 10:return Y2(m.type._context),hr(m),null;case 17:return Gr(m.type)&&cy(),hr(m),null;case 19:if(zt(rn),E=m.memoizedState,E===null)return hr(m),null;if(C=(m.flags&128)!==0,N=E.rendering,N===null)if(C)gp(E,!1);else{if(Nn!==0||p!==null&&p.flags&128)for(p=m.child;p!==null;){if(N=$y(p),N!==null){for(m.flags|=128,gp(E,!1),p=N.updateQueue,p!==null&&(m.updateQueue=p,m.flags|=4),m.subtreeFlags=0,p=w,w=m.child;w!==null;)C=w,E=p,C.flags&=14680066,N=C.alternate,N===null?(C.childLanes=0,C.lanes=E,C.child=null,C.subtreeFlags=0,C.memoizedProps=null,C.memoizedState=null,C.updateQueue=null,C.dependencies=null,C.stateNode=null):(C.childLanes=N.childLanes,C.lanes=N.lanes,C.child=N.child,C.subtreeFlags=0,C.deletions=null,C.memoizedProps=N.memoizedProps,C.memoizedState=N.memoizedState,C.updateQueue=N.updateQueue,C.type=N.type,E=N.dependencies,C.dependencies=E===null?null:{lanes:E.lanes,firstContext:E.firstContext}),w=w.sibling;return Pt(rn,rn.current&1|2),m.child}p=p.sibling}E.tail!==null&&Mn()>PS&&(m.flags|=128,C=!0,gp(E,!1),m.lanes=4194304)}else{if(!C)if(p=$y(N),p!==null){if(m.flags|=128,C=!0,p=p.updateQueue,p!==null&&(m.updateQueue=p,m.flags|=4),gp(E,!0),E.tail===null&&E.tailMode==="hidden"&&!N.alternate&&!Kt)return hr(m),null}else 2*Mn()-E.renderingStartTime>PS&&w!==1073741824&&(m.flags|=128,C=!0,gp(E,!1),m.lanes=4194304);E.isBackwards?(N.sibling=m.child,m.child=N):(p=E.last,p!==null?p.sibling=N:m.child=N,E.last=N)}return E.tail!==null?(m=E.tail,E.rendering=m,E.tail=m.sibling,E.renderingStartTime=Mn(),m.sibling=null,p=rn.current,Pt(rn,C?p&1|2:p&1),m):(hr(m),null);case 22:case 23:return BS(),w=m.memoizedState!==null,p!==null&&p.memoizedState!==null!==w&&(m.flags|=8192),w&&m.mode&1?vi&1073741824&&(hr(m),Oe&&m.subtreeFlags&6&&(m.flags|=8192)):hr(m),null;case 24:return null;case 25:return null}throw Error(a(156,m.tag))}function L7(p,m){switch(U2(m),m.tag){case 1:return Gr(m.type)&&cy(),p=m.flags,p&65536?(m.flags=p&-65537|128,m):null;case 3:return Au(),zt(Ur),zt(fr),rS(),p=m.flags,p&65536&&!(p&128)?(m.flags=p&-65537|128,m):null;case 5:return tS(m),null;case 13:if(zt(rn),p=m.memoizedState,p!==null&&p.dehydrated!==null){if(m.alternate===null)throw Error(a(340));_u()}return p=m.flags,p&65536?(m.flags=p&-65537|128,m):null;case 19:return zt(rn),null;case 4:return Au(),null;case 10:return Y2(m.type._context),null;case 22:case 23:return BS(),null;case 24:return null;default:return null}}var Fy=!1,mr=!1,M7=typeof WeakSet=="function"?WeakSet:Set,_e=null;function Du(p,m){var w=p.ref;if(w!==null)if(typeof w=="function")try{w(null)}catch(C){Xt(p,m,C)}else w.current=null}function SS(p,m,w){try{w()}catch(C){Xt(p,m,C)}}var uA=!1;function B7(p,m){for(Y(p.containerInfo),_e=m;_e!==null;)if(p=_e,m=p.child,(p.subtreeFlags&1028)!==0&&m!==null)m.return=p,_e=m;else for(;_e!==null;){p=_e;try{var w=p.alternate;if(p.flags&1024)switch(p.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var C=w.memoizedProps,E=w.memoizedState,N=p.stateNode,L=N.getSnapshotBeforeUpdate(p.elementType===p.type?C:Ss(p.type,C),E);N.__reactInternalSnapshotBeforeUpdate=L}break;case 3:Oe&&j9(p.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}catch(Z){Xt(p,p.return,Z)}if(m=p.sibling,m!==null){m.return=p.return,_e=m;break}_e=p.return}return w=uA,uA=!1,w}function yp(p,m,w){var C=m.updateQueue;if(C=C!==null?C.lastEffect:null,C!==null){var E=C=C.next;do{if((E.tag&p)===p){var N=E.destroy;E.destroy=void 0,N!==void 0&&SS(m,w,N)}E=E.next}while(E!==C)}}function Ly(p,m){if(m=m.updateQueue,m=m!==null?m.lastEffect:null,m!==null){var w=m=m.next;do{if((w.tag&p)===p){var C=w.create;w.destroy=C()}w=w.next}while(w!==m)}}function kS(p){var m=p.ref;if(m!==null){var w=p.stateNode;switch(p.tag){case 5:p=q(w);break;default:p=w}typeof m=="function"?m(p):m.current=p}}function dA(p){var m=p.alternate;m!==null&&(p.alternate=null,dA(m)),p.child=null,p.deletions=null,p.sibling=null,p.tag===5&&(m=p.stateNode,m!==null&&lt(m)),p.stateNode=null,p.return=null,p.dependencies=null,p.memoizedProps=null,p.memoizedState=null,p.pendingProps=null,p.stateNode=null,p.updateQueue=null}function fA(p){return p.tag===5||p.tag===3||p.tag===4}function pA(p){e:for(;;){for(;p.sibling===null;){if(p.return===null||fA(p.return))return null;p=p.return}for(p.sibling.return=p.return,p=p.sibling;p.tag!==5&&p.tag!==6&&p.tag!==18;){if(p.flags&2||p.child===null||p.tag===4)continue e;p.child.return=p,p=p.child}if(!(p.flags&2))return p.stateNode}}function CS(p,m,w){var C=p.tag;if(C===5||C===6)p=p.stateNode,m?_2(w,p,m):Gl(w,p);else if(C!==4&&(p=p.child,p!==null))for(CS(p,m,w),p=p.sibling;p!==null;)CS(p,m,w),p=p.sibling}function $S(p,m,w){var C=p.tag;if(C===5||C===6)p=p.stateNode,m?ku(w,p,m):dr(w,p);else if(C!==4&&(p=p.child,p!==null))for($S(p,m,w),p=p.sibling;p!==null;)$S(p,m,w),p=p.sibling}var Jn=null,ks=!1;function Js(p,m,w){for(w=w.child;w!==null;)ES(p,m,w),w=w.sibling}function ES(p,m,w){if(qs&&typeof qs.onCommitFiberUnmount=="function")try{qs.onCommitFiberUnmount(hy,w)}catch{}switch(w.tag){case 5:mr||Du(w,m);case 6:if(Oe){var C=Jn,E=ks;Jn=null,Js(p,m,w),Jn=C,ks=E,Jn!==null&&(ks?F9(Jn,w.stateNode):I2(Jn,w.stateNode))}else Js(p,m,w);break;case 18:Oe&&Jn!==null&&(ks?s7(Jn,w.stateNode):i7(Jn,w.stateNode));break;case 4:Oe?(C=Jn,E=ks,Jn=w.stateNode.containerInfo,ks=!0,Js(p,m,w),Jn=C,ks=E):(Ue&&(C=w.stateNode.containerInfo,E=YR(C),N2(C,E)),Js(p,m,w));break;case 0:case 11:case 14:case 15:if(!mr&&(C=w.updateQueue,C!==null&&(C=C.lastEffect,C!==null))){E=C=C.next;do{var N=E,L=N.destroy;N=N.tag,L!==void 0&&(N&2||N&4)&&SS(w,m,L),E=E.next}while(E!==C)}Js(p,m,w);break;case 1:if(!mr&&(Du(w,m),C=w.stateNode,typeof C.componentWillUnmount=="function"))try{C.props=w.memoizedProps,C.state=w.memoizedState,C.componentWillUnmount()}catch(Z){Xt(w,m,Z)}Js(p,m,w);break;case 21:Js(p,m,w);break;case 22:w.mode&1?(mr=(C=mr)||w.memoizedState!==null,Js(p,m,w),mr=C):Js(p,m,w);break;default:Js(p,m,w)}}function hA(p){var m=p.updateQueue;if(m!==null){p.updateQueue=null;var w=p.stateNode;w===null&&(w=p.stateNode=new M7),m.forEach(function(C){var E=K7.bind(null,p,C);w.has(C)||(w.add(C),C.then(E,E))})}}function Cs(p,m){var w=m.deletions;if(w!==null)for(var C=0;C<w.length;C++){var E=w[C];try{var N=p,L=m;if(Oe){var Z=L;e:for(;Z!==null;){switch(Z.tag){case 5:Jn=Z.stateNode,ks=!1;break e;case 3:Jn=Z.stateNode.containerInfo,ks=!0;break e;case 4:Jn=Z.stateNode.containerInfo,ks=!0;break e}Z=Z.return}if(Jn===null)throw Error(a(160));ES(N,L,E),Jn=null,ks=!1}else ES(N,L,E);var ae=E.alternate;ae!==null&&(ae.return=null),E.return=null}catch(ve){Xt(E,m,ve)}}if(m.subtreeFlags&12854)for(m=m.child;m!==null;)mA(m,p),m=m.sibling}function mA(p,m){var w=p.alternate,C=p.flags;switch(p.tag){case 0:case 11:case 14:case 15:if(Cs(m,p),ea(p),C&4){try{yp(3,p,p.return),Ly(3,p)}catch(Ee){Xt(p,p.return,Ee)}try{yp(5,p,p.return)}catch(Ee){Xt(p,p.return,Ee)}}break;case 1:Cs(m,p),ea(p),C&512&&w!==null&&Du(w,w.return);break;case 5:if(Cs(m,p),ea(p),C&512&&w!==null&&Du(w,w.return),Oe){if(p.flags&32){var E=p.stateNode;try{XR(E)}catch(Ee){Xt(p,p.return,Ee)}}if(C&4&&(E=p.stateNode,E!=null)){var N=p.memoizedProps;if(w=w!==null?w.memoizedProps:N,C=p.type,m=p.updateQueue,p.updateQueue=null,m!==null)try{T2(E,m,C,w,N,p)}catch(Ee){Xt(p,p.return,Ee)}}}break;case 6:if(Cs(m,p),ea(p),C&4&&Oe){if(p.stateNode===null)throw Error(a(162));E=p.stateNode,N=p.memoizedProps,w=w!==null?w.memoizedProps:N;try{tp(E,w,N)}catch(Ee){Xt(p,p.return,Ee)}}break;case 3:if(Cs(m,p),ea(p),C&4){if(Oe&&je&&w!==null&&w.memoizedState.isDehydrated)try{n7(m.containerInfo)}catch(Ee){Xt(p,p.return,Ee)}if(Ue){E=m.containerInfo,N=m.pendingChildren;try{N2(E,N)}catch(Ee){Xt(p,p.return,Ee)}}}break;case 4:if(Cs(m,p),ea(p),C&4&&Ue){N=p.stateNode,E=N.containerInfo,N=N.pendingChildren;try{N2(E,N)}catch(Ee){Xt(p,p.return,Ee)}}break;case 13:Cs(m,p),ea(p),E=p.child,E.flags&8192&&(N=E.memoizedState!==null,E.stateNode.isHidden=N,!N||E.alternate!==null&&E.alternate.memoizedState!==null||(AS=Mn())),C&4&&hA(p);break;case 22:var L=w!==null&&w.memoizedState!==null;if(p.mode&1?(mr=(w=mr)||L,Cs(m,p),mr=w):Cs(m,p),ea(p),C&8192){if(w=p.memoizedState!==null,(p.stateNode.isHidden=w)&&!L&&p.mode&1)for(_e=p,C=p.child;C!==null;){for(m=_e=C;_e!==null;){L=_e;var Z=L.child;switch(L.tag){case 0:case 11:case 14:case 15:yp(4,L,L.return);break;case 1:Du(L,L.return);var ae=L.stateNode;if(typeof ae.componentWillUnmount=="function"){var ve=L,Pe=L.return;try{var Ke=ve;ae.props=Ke.memoizedProps,ae.state=Ke.memoizedState,ae.componentWillUnmount()}catch(Ee){Xt(ve,Pe,Ee)}}break;case 5:Du(L,L.return);break;case 22:if(L.memoizedState!==null){vA(m);continue}}Z!==null?(Z.return=L,_e=Z):vA(m)}C=C.sibling}if(Oe){e:if(C=null,Oe)for(m=p;;){if(m.tag===5){if(C===null){C=m;try{E=m.stateNode,w?L9(E):B9(m.stateNode,m.memoizedProps)}catch(Ee){Xt(p,p.return,Ee)}}}else if(m.tag===6){if(C===null)try{N=m.stateNode,w?M9(N):z9(N,m.memoizedProps)}catch(Ee){Xt(p,p.return,Ee)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===p)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===p)break e;for(;m.sibling===null;){if(m.return===null||m.return===p)break e;C===m&&(C=null),m=m.return}C===m&&(C=null),m.sibling.return=m.return,m=m.sibling}}}break;case 19:Cs(m,p),ea(p),C&4&&hA(p);break;case 21:break;default:Cs(m,p),ea(p)}}function ea(p){var m=p.flags;if(m&2){try{if(Oe){e:{for(var w=p.return;w!==null;){if(fA(w)){var C=w;break e}w=w.return}throw Error(a(160))}switch(C.tag){case 5:var E=C.stateNode;C.flags&32&&(XR(E),C.flags&=-33);var N=pA(p);$S(p,N,E);break;case 3:case 4:var L=C.stateNode.containerInfo,Z=pA(p);CS(p,Z,L);break;default:throw Error(a(161))}}}catch(ae){Xt(p,p.return,ae)}p.flags&=-3}m&4096&&(p.flags&=-4097)}function z7(p,m,w){_e=p,gA(p)}function gA(p,m,w){for(var C=(p.mode&1)!==0;_e!==null;){var E=_e,N=E.child;if(E.tag===22&&C){var L=E.memoizedState!==null||Fy;if(!L){var Z=E.alternate,ae=Z!==null&&Z.memoizedState!==null||mr;Z=Fy;var ve=mr;if(Fy=L,(mr=ae)&&!ve)for(_e=E;_e!==null;)L=_e,ae=L.child,L.tag===22&&L.memoizedState!==null?xA(E):ae!==null?(ae.return=L,_e=ae):xA(E);for(;N!==null;)_e=N,gA(N),N=N.sibling;_e=E,Fy=Z,mr=ve}yA(p)}else E.subtreeFlags&8772&&N!==null?(N.return=E,_e=N):yA(p)}}function yA(p){for(;_e!==null;){var m=_e;if(m.flags&8772){var w=m.alternate;try{if(m.flags&8772)switch(m.tag){case 0:case 11:case 15:mr||Ly(5,m);break;case 1:var C=m.stateNode;if(m.flags&4&&!mr)if(w===null)C.componentDidMount();else{var E=m.elementType===m.type?w.memoizedProps:Ss(m.type,w.memoizedProps);C.componentDidUpdate(E,w.memoizedState,C.__reactInternalSnapshotBeforeUpdate)}var N=m.updateQueue;N!==null&&bO(m,N,C);break;case 3:var L=m.updateQueue;if(L!==null){if(w=null,m.child!==null)switch(m.child.tag){case 5:w=q(m.child.stateNode);break;case 1:w=m.child.stateNode}bO(m,L,w)}break;case 5:var Z=m.stateNode;w===null&&m.flags&4&&np(Z,m.type,m.memoizedProps,m);break;case 6:break;case 4:break;case 12:break;case 13:if(je&&m.memoizedState===null){var ae=m.alternate;if(ae!==null){var ve=ae.memoizedState;if(ve!==null){var Pe=ve.dehydrated;Pe!==null&&r7(Pe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(a(163))}mr||m.flags&512&&kS(m)}catch(Ke){Xt(m,m.return,Ke)}}if(m===p){_e=null;break}if(w=m.sibling,w!==null){w.return=m.return,_e=w;break}_e=m.return}}function vA(p){for(;_e!==null;){var m=_e;if(m===p){_e=null;break}var w=m.sibling;if(w!==null){w.return=m.return,_e=w;break}_e=m.return}}function xA(p){for(;_e!==null;){var m=_e;try{switch(m.tag){case 0:case 11:case 15:var w=m.return;try{Ly(4,m)}catch(ae){Xt(m,w,ae)}break;case 1:var C=m.stateNode;if(typeof C.componentDidMount=="function"){var E=m.return;try{C.componentDidMount()}catch(ae){Xt(m,E,ae)}}var N=m.return;try{kS(m)}catch(ae){Xt(m,N,ae)}break;case 5:var L=m.return;try{kS(m)}catch(ae){Xt(m,L,ae)}}}catch(ae){Xt(m,m.return,ae)}if(m===p){_e=null;break}var Z=m.sibling;if(Z!==null){Z.return=m.return,_e=Z;break}_e=m.return}}var My=0,By=1,zy=2,jy=3,Vy=4;if(typeof Symbol=="function"&&Symbol.for){var vp=Symbol.for;My=vp("selector.component"),By=vp("selector.has_pseudo_class"),zy=vp("selector.role"),jy=vp("selector.test_id"),Vy=vp("selector.text")}function TS(p){var m=Ye(p);if(m!=null){if(typeof m.memoizedProps["data-testname"]!="string")throw Error(a(364));return m}if(p=Zn(p),p===null)throw Error(a(362));return p.stateNode.current}function _S(p,m){switch(m.$$typeof){case My:if(p.type===m.value)return!0;break;case By:e:{m=m.value,p=[p,0];for(var w=0;w<p.length;){var C=p[w++],E=p[w++],N=m[E];if(C.tag!==5||!qt(C)){for(;N!=null&&_S(C,N);)E++,N=m[E];if(E===m.length){m=!0;break e}else for(C=C.child;C!==null;)p.push(C,E),C=C.sibling}}m=!1}return m;case zy:if(p.tag===5&&ur(p.stateNode,m.value))return!0;break;case Vy:if((p.tag===5||p.tag===6)&&(p=Wr(p),p!==null&&0<=p.indexOf(m.value)))return!0;break;case jy:if(p.tag===5&&(p=p.memoizedProps["data-testname"],typeof p=="string"&&p.toLowerCase()===m.value.toLowerCase()))return!0;break;default:throw Error(a(365))}return!1}function IS(p){switch(p.$$typeof){case My:return"<"+(_(p.value)||"Unknown")+">";case By:return":has("+(IS(p)||"")+")";case zy:return'[role="'+p.value+'"]';case Vy:return'"'+p.value+'"';case jy:return'[data-testname="'+p.value+'"]';default:throw Error(a(365))}}function bA(p,m){var w=[];p=[p,0];for(var C=0;C<p.length;){var E=p[C++],N=p[C++],L=m[N];if(E.tag!==5||!qt(E)){for(;L!=null&&_S(E,L);)N++,L=m[N];if(N===m.length)w.push(E);else for(E=E.child;E!==null;)p.push(E,N),E=E.sibling}}return w}function NS(p,m){if(!ct)throw Error(a(363));p=TS(p),p=bA(p,m),m=[],p=Array.from(p);for(var w=0;w<p.length;){var C=p[w++];if(C.tag===5)qt(C)||m.push(C.stateNode);else for(C=C.child;C!==null;)p.push(C),C=C.sibling}return m}var j7=Math.ceil,Wy=o.ReactCurrentDispatcher,RS=o.ReactCurrentOwner,hn=o.ReactCurrentBatchConfig,nt=0,zn=null,wn=null,er=0,vi=0,Fu=No(0),Nn=0,xp=null,Ql=0,Uy=0,OS=0,bp=null,qr=null,AS=0,PS=1/0,Da=null;function Lu(){PS=Mn()+500}var Gy=!1,DS=null,Po=null,Hy=!1,Do=null,qy=0,wp=0,FS=null,Ky=-1,Xy=0;function gr(){return nt&6?Mn():Ky!==-1?Ky:Ky=Mn()}function Fo(p){return p.mode&1?nt&2&&er!==0?er&-er:k7.transition!==null?(Xy===0&&(Xy=iO()),Xy):(p=ft,p!==0?p:et()):1}function Ui(p,m,w,C){if(50<wp)throw wp=0,FS=null,Error(a(185));sp(p,w,C),(!(nt&2)||p!==zn)&&(p===zn&&(!(nt&2)&&(Uy|=w),Nn===4&&Lo(p,er)),Kr(p,C),w===1&&nt===0&&!(m.mode&1)&&(Lu(),my&&Ks()))}function Kr(p,m){var w=p.callbackNode;h7(p,m);var C=py(p,p===zn?er:0);if(C===0)w!==null&&aO(w),p.callbackNode=null,p.callbackPriority=0;else if(m=C&-C,p.callbackPriority!==m){if(w!=null&&aO(w),m===1)p.tag===0?S7(SA.bind(null,p)):oO(SA.bind(null,p)),wt?Or(function(){!(nt&6)&&Ks()}):B2(z2,Ks),w=null;else{switch(sO(C)){case 1:w=z2;break;case 4:w=v7;break;case 16:w=j2;break;case 536870912:w=x7;break;default:w=j2}w=RA(w,wA.bind(null,p))}p.callbackPriority=m,p.callbackNode=w}}function wA(p,m){if(Ky=-1,Xy=0,nt&6)throw Error(a(327));var w=p.callbackNode;if(ec()&&p.callbackNode!==w)return null;var C=py(p,p===zn?er:0);if(C===0)return null;if(C&30||C&p.expiredLanes||m)m=Yy(p,C);else{m=C;var E=nt;nt|=2;var N=$A();(zn!==p||er!==m)&&(Da=null,Lu(),Zl(p,m));do try{U7();break}catch(Z){CA(p,Z)}while(!0);X2(),Wy.current=N,nt=E,wn!==null?m=0:(zn=null,er=0,m=Nn)}if(m!==0){if(m===2&&(E=F2(p),E!==0&&(C=E,m=LS(p,E))),m===1)throw w=xp,Zl(p,0),Lo(p,C),Kr(p,Mn()),w;if(m===6)Lo(p,C);else{if(E=p.current.alternate,!(C&30)&&!V7(E)&&(m=Yy(p,C),m===2&&(N=F2(p),N!==0&&(C=N,m=LS(p,N))),m===1))throw w=xp,Zl(p,0),Lo(p,C),Kr(p,Mn()),w;switch(p.finishedWork=E,p.finishedLanes=C,m){case 0:case 1:throw Error(a(345));case 2:Jl(p,qr,Da);break;case 3:if(Lo(p,C),(C&130023424)===C&&(m=AS+500-Mn(),10<m)){if(py(p,0)!==0)break;if(E=p.suspendedLanes,(E&C)!==C){gr(),p.pingedLanes|=p.suspendedLanes&E;break}p.timeoutHandle=ie(Jl.bind(null,p,qr,Da),m);break}Jl(p,qr,Da);break;case 4:if(Lo(p,C),(C&4194240)===C)break;for(m=p.eventTimes,E=-1;0<C;){var L=31-xs(C);N=1<<L,L=m[L],L>E&&(E=L),C&=~N}if(C=E,C=Mn()-C,C=(120>C?120:480>C?480:1080>C?1080:1920>C?1920:3e3>C?3e3:4320>C?4320:1960*j7(C/1960))-C,10<C){p.timeoutHandle=ie(Jl.bind(null,p,qr,Da),C);break}Jl(p,qr,Da);break;case 5:Jl(p,qr,Da);break;default:throw Error(a(329))}}}return Kr(p,Mn()),p.callbackNode===w?wA.bind(null,p):null}function LS(p,m){var w=bp;return p.current.memoizedState.isDehydrated&&(Zl(p,m).flags|=256),p=Yy(p,m),p!==2&&(m=qr,qr=w,m!==null&&MS(m)),p}function MS(p){qr===null?qr=p:qr.push.apply(qr,p)}function V7(p){for(var m=p;;){if(m.flags&16384){var w=m.updateQueue;if(w!==null&&(w=w.stores,w!==null))for(var C=0;C<w.length;C++){var E=w[C],N=E.getSnapshot;E=E.value;try{if(!bs(N(),E))return!1}catch{return!1}}}if(w=m.child,m.subtreeFlags&16384&&w!==null)w.return=m,m=w;else{if(m===p)break;for(;m.sibling===null;){if(m.return===null||m.return===p)return!0;m=m.return}m.sibling.return=m.return,m=m.sibling}}return!0}function Lo(p,m){for(m&=~OS,m&=~Uy,p.suspendedLanes|=m,p.pingedLanes&=~m,p=p.expirationTimes;0<m;){var w=31-xs(m),C=1<<w;p[w]=-1,m&=~C}}function SA(p){if(nt&6)throw Error(a(327));ec();var m=py(p,0);if(!(m&1))return Kr(p,Mn()),null;var w=Yy(p,m);if(p.tag!==0&&w===2){var C=F2(p);C!==0&&(m=C,w=LS(p,C))}if(w===1)throw w=xp,Zl(p,0),Lo(p,m),Kr(p,Mn()),w;if(w===6)throw Error(a(345));return p.finishedWork=p.current.alternate,p.finishedLanes=m,Jl(p,qr,Da),Kr(p,Mn()),null}function kA(p){Do!==null&&Do.tag===0&&!(nt&6)&&ec();var m=nt;nt|=1;var w=hn.transition,C=ft;try{if(hn.transition=null,ft=1,p)return p()}finally{ft=C,hn.transition=w,nt=m,!(nt&6)&&Ks()}}function BS(){vi=Fu.current,zt(Fu)}function Zl(p,m){p.finishedWork=null,p.finishedLanes=0;var w=p.timeoutHandle;if(w!==$e&&(p.timeoutHandle=$e,we(w)),wn!==null)for(w=wn.return;w!==null;){var C=w;switch(U2(C),C.tag){case 1:C=C.type.childContextTypes,C!=null&&cy();break;case 3:Au(),zt(Ur),zt(fr),rS();break;case 5:tS(C);break;case 4:Au();break;case 13:zt(rn);break;case 19:zt(rn);break;case 10:Y2(C.type._context);break;case 22:case 23:BS()}w=w.return}if(zn=p,wn=p=Mo(p.current,null),er=vi=m,Nn=0,xp=null,OS=Uy=Ql=0,qr=bp=null,Xl!==null){for(m=0;m<Xl.length;m++)if(w=Xl[m],C=w.interleaved,C!==null){w.interleaved=null;var E=C.next,N=w.pending;if(N!==null){var L=N.next;N.next=E,C.next=L}w.pending=C}Xl=null}return p}function CA(p,m){do{var w=wn;try{if(X2(),Ey.current=Ny,Ty){for(var C=sn.memoizedState;C!==null;){var E=C.queue;E!==null&&(E.pending=null),C=C.next}Ty=!1}if(Yl=0,Bn=In=sn=null,up=!1,dp=0,RS.current=null,w===null||w.return===null){Nn=1,xp=m,wn=null;break}e:{var N=p,L=w.return,Z=w,ae=m;if(m=er,Z.flags|=32768,ae!==null&&typeof ae=="object"&&typeof ae.then=="function"){var ve=ae,Pe=Z,Ke=Pe.tag;if(!(Pe.mode&1)&&(Ke===0||Ke===11||Ke===15)){var Ee=Pe.alternate;Ee?(Pe.updateQueue=Ee.updateQueue,Pe.memoizedState=Ee.memoizedState,Pe.lanes=Ee.lanes):(Pe.updateQueue=null,Pe.memoizedState=null)}var jt=XO(L);if(jt!==null){jt.flags&=-257,YO(jt,L,Z,N,m),jt.mode&1&&KO(N,ve,m),m=jt,ae=ve;var Tt=m.updateQueue;if(Tt===null){var Xr=new Set;Xr.add(ae),m.updateQueue=Xr}else Tt.add(ae);break e}else{if(!(m&1)){KO(N,ve,m),zS();break e}ae=Error(a(426))}}else if(Kt&&Z.mode&1){var Fa=XO(L);if(Fa!==null){!(Fa.flags&65536)&&(Fa.flags|=256),YO(Fa,L,Z,N,m),q2(Pu(ae,Z));break e}}N=ae=Pu(ae,Z),Nn!==4&&(Nn=2),bp===null?bp=[N]:bp.push(N),N=L;do{switch(N.tag){case 3:N.flags|=65536,m&=-m,N.lanes|=m;var se=HO(N,ae,m);xO(N,se);break e;case 1:Z=ae;var J=N.type,ce=N.stateNode;if(!(N.flags&128)&&(typeof J.getDerivedStateFromError=="function"||ce!==null&&typeof ce.componentDidCatch=="function"&&(Po===null||!Po.has(ce)))){N.flags|=65536,m&=-m,N.lanes|=m;var Te=qO(N,Z,m);xO(N,Te);break e}}N=N.return}while(N!==null)}TA(w)}catch(ze){m=ze,wn===w&&w!==null&&(wn=w=w.return);continue}break}while(!0)}function $A(){var p=Wy.current;return Wy.current=Ny,p===null?Ny:p}function zS(){(Nn===0||Nn===3||Nn===2)&&(Nn=4),zn===null||!(Ql&268435455)&&!(Uy&268435455)||Lo(zn,er)}function Yy(p,m){var w=nt;nt|=2;var C=$A();(zn!==p||er!==m)&&(Da=null,Zl(p,m));do try{W7();break}catch(E){CA(p,E)}while(!0);if(X2(),nt=w,Wy.current=C,wn!==null)throw Error(a(261));return zn=null,er=0,Nn}function W7(){for(;wn!==null;)EA(wn)}function U7(){for(;wn!==null&&!g7();)EA(wn)}function EA(p){var m=NA(p.alternate,p,vi);p.memoizedProps=p.pendingProps,m===null?TA(p):wn=m,RS.current=null}function TA(p){var m=p;do{var w=m.alternate;if(p=m.return,m.flags&32768){if(w=L7(w,m),w!==null){w.flags&=32767,wn=w;return}if(p!==null)p.flags|=32768,p.subtreeFlags=0,p.deletions=null;else{Nn=6,wn=null;return}}else if(w=F7(w,m,vi),w!==null){wn=w;return}if(m=m.sibling,m!==null){wn=m;return}wn=m=p}while(m!==null);Nn===0&&(Nn=5)}function Jl(p,m,w){var C=ft,E=hn.transition;try{hn.transition=null,ft=1,G7(p,m,w,C)}finally{hn.transition=E,ft=C}return null}function G7(p,m,w,C){do ec();while(Do!==null);if(nt&6)throw Error(a(327));w=p.finishedWork;var E=p.finishedLanes;if(w===null)return null;if(p.finishedWork=null,p.finishedLanes=0,w===p.current)throw Error(a(177));p.callbackNode=null,p.callbackPriority=0;var N=w.lanes|w.childLanes;if(m7(p,N),p===zn&&(wn=zn=null,er=0),!(w.subtreeFlags&2064)&&!(w.flags&2064)||Hy||(Hy=!0,RA(j2,function(){return ec(),null})),N=(w.flags&15990)!==0,w.subtreeFlags&15990||N){N=hn.transition,hn.transition=null;var L=ft;ft=1;var Z=nt;nt|=4,RS.current=null,B7(p,w),mA(w,p),Q(p.containerInfo),p.current=w,z7(w),y7(),nt=Z,ft=L,hn.transition=N}else p.current=w;if(Hy&&(Hy=!1,Do=p,qy=E),N=p.pendingLanes,N===0&&(Po=null),b7(w.stateNode),Kr(p,Mn()),m!==null)for(C=p.onRecoverableError,w=0;w<m.length;w++)E=m[w],C(E.value,{componentStack:E.stack,digest:E.digest});if(Gy)throw Gy=!1,p=DS,DS=null,p;return qy&1&&p.tag!==0&&ec(),N=p.pendingLanes,N&1?p===FS?wp++:(wp=0,FS=p):wp=0,Ks(),null}function ec(){if(Do!==null){var p=sO(qy),m=hn.transition,w=ft;try{if(hn.transition=null,ft=16>p?16:p,Do===null)var C=!1;else{if(p=Do,Do=null,qy=0,nt&6)throw Error(a(331));var E=nt;for(nt|=4,_e=p.current;_e!==null;){var N=_e,L=N.child;if(_e.flags&16){var Z=N.deletions;if(Z!==null){for(var ae=0;ae<Z.length;ae++){var ve=Z[ae];for(_e=ve;_e!==null;){var Pe=_e;switch(Pe.tag){case 0:case 11:case 15:yp(8,Pe,N)}var Ke=Pe.child;if(Ke!==null)Ke.return=Pe,_e=Ke;else for(;_e!==null;){Pe=_e;var Ee=Pe.sibling,jt=Pe.return;if(dA(Pe),Pe===ve){_e=null;break}if(Ee!==null){Ee.return=jt,_e=Ee;break}_e=jt}}}var Tt=N.alternate;if(Tt!==null){var Xr=Tt.child;if(Xr!==null){Tt.child=null;do{var Fa=Xr.sibling;Xr.sibling=null,Xr=Fa}while(Xr!==null)}}_e=N}}if(N.subtreeFlags&2064&&L!==null)L.return=N,_e=L;else e:for(;_e!==null;){if(N=_e,N.flags&2048)switch(N.tag){case 0:case 11:case 15:yp(9,N,N.return)}var se=N.sibling;if(se!==null){se.return=N.return,_e=se;break e}_e=N.return}}var J=p.current;for(_e=J;_e!==null;){L=_e;var ce=L.child;if(L.subtreeFlags&2064&&ce!==null)ce.return=L,_e=ce;else e:for(L=J;_e!==null;){if(Z=_e,Z.flags&2048)try{switch(Z.tag){case 0:case 11:case 15:Ly(9,Z)}}catch(ze){Xt(Z,Z.return,ze)}if(Z===L){_e=null;break e}var Te=Z.sibling;if(Te!==null){Te.return=Z.return,_e=Te;break e}_e=Z.return}}if(nt=E,Ks(),qs&&typeof qs.onPostCommitFiberRoot=="function")try{qs.onPostCommitFiberRoot(hy,p)}catch{}C=!0}return C}finally{ft=w,hn.transition=m}}return!1}function _A(p,m,w){m=Pu(w,m),m=HO(p,m,1),p=Ao(p,m,1),m=gr(),p!==null&&(sp(p,1,m),Kr(p,m))}function Xt(p,m,w){if(p.tag===3)_A(p,p,w);else for(;m!==null;){if(m.tag===3){_A(m,p,w);break}else if(m.tag===1){var C=m.stateNode;if(typeof m.type.getDerivedStateFromError=="function"||typeof C.componentDidCatch=="function"&&(Po===null||!Po.has(C))){p=Pu(w,p),p=qO(m,p,1),m=Ao(m,p,1),p=gr(),m!==null&&(sp(m,1,p),Kr(m,p));break}}m=m.return}}function H7(p,m,w){var C=p.pingCache;C!==null&&C.delete(m),m=gr(),p.pingedLanes|=p.suspendedLanes&w,zn===p&&(er&w)===w&&(Nn===4||Nn===3&&(er&130023424)===er&&500>Mn()-AS?Zl(p,0):OS|=w),Kr(p,m)}function IA(p,m){m===0&&(p.mode&1?(m=fy,fy<<=1,!(fy&130023424)&&(fy=4194304)):m=1);var w=gr();p=Xs(p,m),p!==null&&(sp(p,m,w),Kr(p,w))}function q7(p){var m=p.memoizedState,w=0;m!==null&&(w=m.retryLane),IA(p,w)}function K7(p,m){var w=0;switch(p.tag){case 13:var C=p.stateNode,E=p.memoizedState;E!==null&&(w=E.retryLane);break;case 19:C=p.stateNode;break;default:throw Error(a(314))}C!==null&&C.delete(m),IA(p,w)}var NA;NA=function(p,m,w){if(p!==null)if(p.memoizedProps!==m.pendingProps||Ur.current)Hr=!0;else{if(!(p.lanes&w)&&!(m.flags&128))return Hr=!1,D7(p,m,w);Hr=!!(p.flags&131072)}else Hr=!1,Kt&&m.flags&1048576&&lO(m,yy,m.index);switch(m.lanes=0,m.tag){case 2:var C=m.type;Ay(p,m),p=m.pendingProps;var E=$u(m,fr.current);Ru(m,w),E=aS(null,m,C,p,E,w);var N=oS();return m.flags|=1,typeof E=="object"&&E!==null&&typeof E.render=="function"&&E.$$typeof===void 0?(m.tag=1,m.memoizedState=null,m.updateQueue=null,Gr(C)?(N=!0,uy(m)):N=!1,m.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,J2(m),E.updater=Ry,m.stateNode=E,E._reactInternals=m,pS(m,C,p,w),m=yS(null,m,C,!0,N,w)):(m.tag=0,Kt&&N&&W2(m),Ar(null,m,E,w),m=m.child),m;case 16:C=m.elementType;e:{switch(Ay(p,m),p=m.pendingProps,E=C._init,C=E(C._payload),m.type=C,E=m.tag=Y7(C),p=Ss(C,p),E){case 0:m=gS(null,m,C,p,w);break e;case 1:m=nA(null,m,C,p,w);break e;case 11:m=QO(null,m,C,p,w);break e;case 14:m=ZO(null,m,C,Ss(C.type,p),w);break e}throw Error(a(306,C,""))}return m;case 0:return C=m.type,E=m.pendingProps,E=m.elementType===C?E:Ss(C,E),gS(p,m,C,E,w);case 1:return C=m.type,E=m.pendingProps,E=m.elementType===C?E:Ss(C,E),nA(p,m,C,E,w);case 3:e:{if(rA(m),p===null)throw Error(a(387));C=m.pendingProps,N=m.memoizedState,E=N.element,vO(p,m),Cy(m,C,null,w);var L=m.memoizedState;if(C=L.element,je&&N.isDehydrated)if(N={element:C,isDehydrated:!1,cache:L.cache,pendingSuspenseBoundaries:L.pendingSuspenseBoundaries,transitions:L.transitions},m.updateQueue.baseState=N,m.memoizedState=N,m.flags&256){E=Pu(Error(a(423)),m),m=iA(p,m,C,w,E);break e}else if(C!==E){E=Pu(Error(a(424)),m),m=iA(p,m,C,w,E);break e}else for(je&&(zi=Y9(m.stateNode.containerInfo),yi=m,Kt=!0,ws=null,ap=!1),w=mO(m,null,C,w),m.child=w;w;)w.flags=w.flags&-3|4096,w=w.sibling;else{if(_u(),C===E){m=Pa(p,m,w);break e}Ar(p,m,C,w)}m=m.child}return m;case 5:return wO(m),p===null&&H2(m),C=m.type,E=m.pendingProps,N=p!==null?p.memoizedProps:null,L=E.children,pe(C,E)?L=null:N!==null&&pe(C,N)&&(m.flags|=32),tA(p,m),Ar(p,m,L,w),m.child;case 6:return p===null&&H2(m),null;case 13:return sA(p,m,w);case 4:return eS(m,m.stateNode.containerInfo),C=m.pendingProps,p===null?m.child=Iu(m,null,C,w):Ar(p,m,C,w),m.child;case 11:return C=m.type,E=m.pendingProps,E=m.elementType===C?E:Ss(C,E),QO(p,m,C,E,w);case 7:return Ar(p,m,m.pendingProps,w),m.child;case 8:return Ar(p,m,m.pendingProps.children,w),m.child;case 12:return Ar(p,m,m.pendingProps.children,w),m.child;case 10:e:{if(C=m.type._context,E=m.pendingProps,N=m.memoizedProps,L=E.value,gO(m,C,L),N!==null)if(bs(N.value,L)){if(N.children===E.children&&!Ur.current){m=Pa(p,m,w);break e}}else for(N=m.child,N!==null&&(N.return=m);N!==null;){var Z=N.dependencies;if(Z!==null){L=N.child;for(var ae=Z.firstContext;ae!==null;){if(ae.context===C){if(N.tag===1){ae=Aa(-1,w&-w),ae.tag=2;var ve=N.updateQueue;if(ve!==null){ve=ve.shared;var Pe=ve.pending;Pe===null?ae.next=ae:(ae.next=Pe.next,Pe.next=ae),ve.pending=ae}}N.lanes|=w,ae=N.alternate,ae!==null&&(ae.lanes|=w),Q2(N.return,w,m),Z.lanes|=w;break}ae=ae.next}}else if(N.tag===10)L=N.type===m.type?null:N.child;else if(N.tag===18){if(L=N.return,L===null)throw Error(a(341));L.lanes|=w,Z=L.alternate,Z!==null&&(Z.lanes|=w),Q2(L,w,m),L=N.sibling}else L=N.child;if(L!==null)L.return=N;else for(L=N;L!==null;){if(L===m){L=null;break}if(N=L.sibling,N!==null){N.return=L.return,L=N;break}L=L.return}N=L}Ar(p,m,E.children,w),m=m.child}return m;case 9:return E=m.type,C=m.pendingProps.children,Ru(m,w),E=ji(E),C=C(E),m.flags|=1,Ar(p,m,C,w),m.child;case 14:return C=m.type,E=Ss(C,m.pendingProps),E=Ss(C.type,E),ZO(p,m,C,E,w);case 15:return JO(p,m,m.type,m.pendingProps,w);case 17:return C=m.type,E=m.pendingProps,E=m.elementType===C?E:Ss(C,E),Ay(p,m),m.tag=1,Gr(C)?(p=!0,uy(m)):p=!1,Ru(m,w),UO(m,C,E),pS(m,C,E,w),yS(null,m,C,!0,p,w);case 19:return oA(p,m,w);case 22:return eA(p,m,w)}throw Error(a(156,m.tag))};function RA(p,m){return B2(p,m)}function X7(p,m,w,C){this.tag=p,this.key=w,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=m,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=C,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gi(p,m,w,C){return new X7(p,m,w,C)}function jS(p){return p=p.prototype,!(!p||!p.isReactComponent)}function Y7(p){if(typeof p=="function")return jS(p)?1:0;if(p!=null){if(p=p.$$typeof,p===y)return 11;if(p===b)return 14}return 2}function Mo(p,m){var w=p.alternate;return w===null?(w=Gi(p.tag,m,p.key,p.mode),w.elementType=p.elementType,w.type=p.type,w.stateNode=p.stateNode,w.alternate=p,p.alternate=w):(w.pendingProps=m,w.type=p.type,w.flags=0,w.subtreeFlags=0,w.deletions=null),w.flags=p.flags&14680064,w.childLanes=p.childLanes,w.lanes=p.lanes,w.child=p.child,w.memoizedProps=p.memoizedProps,w.memoizedState=p.memoizedState,w.updateQueue=p.updateQueue,m=p.dependencies,w.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext},w.sibling=p.sibling,w.index=p.index,w.ref=p.ref,w}function Qy(p,m,w,C,E,N){var L=2;if(C=p,typeof p=="function")jS(p)&&(L=1);else if(typeof p=="string")L=5;else e:switch(p){case u:return tc(w.children,E,N,m);case d:L=8,E|=8;break;case f:return p=Gi(12,w,m,E|2),p.elementType=f,p.lanes=N,p;case x:return p=Gi(13,w,m,E),p.elementType=x,p.lanes=N,p;case v:return p=Gi(19,w,m,E),p.elementType=v,p.lanes=N,p;case k:return Zy(w,E,N,m);default:if(typeof p=="object"&&p!==null)switch(p.$$typeof){case h:L=10;break e;case g:L=9;break e;case y:L=11;break e;case b:L=14;break e;case S:L=16,C=null;break e}throw Error(a(130,p==null?p:typeof p,""))}return m=Gi(L,w,m,E),m.elementType=p,m.type=C,m.lanes=N,m}function tc(p,m,w,C){return p=Gi(7,p,C,m),p.lanes=w,p}function Zy(p,m,w,C){return p=Gi(22,p,C,m),p.elementType=k,p.lanes=w,p.stateNode={isHidden:!1},p}function VS(p,m,w){return p=Gi(6,p,null,m),p.lanes=w,p}function WS(p,m,w){return m=Gi(4,p.children!==null?p.children:[],p.key,m),m.lanes=w,m.stateNode={containerInfo:p.containerInfo,pendingChildren:null,implementation:p.implementation},m}function Q7(p,m,w,C,E){this.tag=m,this.containerInfo=p,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=$e,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=L2(0),this.expirationTimes=L2(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=L2(0),this.identifierPrefix=C,this.onRecoverableError=E,je&&(this.mutableSourceEagerHydrationData=null)}function OA(p,m,w,C,E,N,L,Z,ae){return p=new Q7(p,m,w,Z,ae),m===1?(m=1,N===!0&&(m|=8)):m=0,N=Gi(3,null,null,m),p.current=N,N.stateNode=p,N.memoizedState={element:C,isDehydrated:w,cache:null,transitions:null,pendingSuspenseBoundaries:null},J2(N),p}function AA(p){if(!p)return Ro;p=p._reactInternals;e:{if(P(p)!==p||p.tag!==1)throw Error(a(170));var m=p;do{switch(m.tag){case 3:m=m.stateNode.context;break e;case 1:if(Gr(m.type)){m=m.stateNode.__reactInternalMemoizedMergedChildContext;break e}}m=m.return}while(m!==null);throw Error(a(171))}if(p.tag===1){var w=p.type;if(Gr(w))return nO(p,w,m)}return m}function PA(p){var m=p._reactInternals;if(m===void 0)throw typeof p.render=="function"?Error(a(188)):(p=Object.keys(p).join(","),Error(a(268,p)));return p=H(m),p===null?null:p.stateNode}function DA(p,m){if(p=p.memoizedState,p!==null&&p.dehydrated!==null){var w=p.retryLane;p.retryLane=w!==0&&w<m?w:m}}function Jy(p,m){DA(p,m),(p=p.alternate)&&DA(p,m)}function Z7(p){return p=H(p),p===null?null:p.stateNode}function J7(){return null}return n.attemptContinuousHydration=function(p){if(p.tag===13){var m=Xs(p,134217728);if(m!==null){var w=gr();Ui(m,p,134217728,w)}Jy(p,134217728)}},n.attemptDiscreteHydration=function(p){if(p.tag===13){var m=Xs(p,1);if(m!==null){var w=gr();Ui(m,p,1,w)}Jy(p,1)}},n.attemptHydrationAtCurrentPriority=function(p){if(p.tag===13){var m=Fo(p),w=Xs(p,m);if(w!==null){var C=gr();Ui(w,p,m,C)}Jy(p,m)}},n.attemptSynchronousHydration=function(p){switch(p.tag){case 3:var m=p.stateNode;if(m.current.memoizedState.isDehydrated){var w=ip(m.pendingLanes);w!==0&&(M2(m,w|1),Kr(m,Mn()),!(nt&6)&&(Lu(),Ks()))}break;case 13:kA(function(){var C=Xs(p,1);if(C!==null){var E=gr();Ui(C,p,1,E)}}),Jy(p,1)}},n.batchedUpdates=function(p,m){var w=nt;nt|=1;try{return p(m)}finally{nt=w,nt===0&&(Lu(),my&&Ks())}},n.createComponentSelector=function(p){return{$$typeof:My,value:p}},n.createContainer=function(p,m,w,C,E,N,L){return OA(p,m,!1,null,w,C,E,N,L)},n.createHasPseudoClassSelector=function(p){return{$$typeof:By,value:p}},n.createHydrationContainer=function(p,m,w,C,E,N,L,Z,ae){return p=OA(w,C,!0,p,E,N,L,Z,ae),p.context=AA(null),w=p.current,C=gr(),E=Fo(w),N=Aa(C,E),N.callback=m??null,Ao(w,N,E),p.current.lanes=E,sp(p,E,C),Kr(p,C),p},n.createPortal=function(p,m,w){var C=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:C==null?null:""+C,children:p,containerInfo:m,implementation:w}},n.createRoleSelector=function(p){return{$$typeof:zy,value:p}},n.createTestNameSelector=function(p){return{$$typeof:jy,value:p}},n.createTextSelector=function(p){return{$$typeof:Vy,value:p}},n.deferredUpdates=function(p){var m=ft,w=hn.transition;try{return hn.transition=null,ft=16,p()}finally{ft=m,hn.transition=w}},n.discreteUpdates=function(p,m,w,C,E){var N=ft,L=hn.transition;try{return hn.transition=null,ft=1,p(m,w,C,E)}finally{ft=N,hn.transition=L,nt===0&&Lu()}},n.findAllNodes=NS,n.findBoundingRects=function(p,m){if(!ct)throw Error(a(363));m=NS(p,m),p=[];for(var w=0;w<m.length;w++)p.push(xn(m[w]));for(m=p.length-1;0<m;m--){w=p[m];for(var C=w.x,E=C+w.width,N=w.y,L=N+w.height,Z=m-1;0<=Z;Z--)if(m!==Z){var ae=p[Z],ve=ae.x,Pe=ve+ae.width,Ke=ae.y,Ee=Ke+ae.height;if(C>=ve&&N>=Ke&&E<=Pe&&L<=Ee){p.splice(m,1);break}else if(C!==ve||w.width!==ae.width||Ee<N||Ke>L){if(!(N!==Ke||w.height!==ae.height||Pe<C||ve>E)){ve>C&&(ae.width+=ve-C,ae.x=C),Pe<E&&(ae.width=E-ve),p.splice(m,1);break}}else{Ke>N&&(ae.height+=Ke-N,ae.y=N),Ee<L&&(ae.height=L-Ke),p.splice(m,1);break}}}return p},n.findHostInstance=PA,n.findHostInstanceWithNoPortals=function(p){return p=B(p),p=p!==null?K(p):null,p===null?null:p.stateNode},n.findHostInstanceWithWarning=function(p){return PA(p)},n.flushControlled=function(p){var m=nt;nt|=1;var w=hn.transition,C=ft;try{hn.transition=null,ft=1,p()}finally{ft=C,hn.transition=w,nt=m,nt===0&&(Lu(),Ks())}},n.flushPassiveEffects=ec,n.flushSync=kA,n.focusWithin=function(p,m){if(!ct)throw Error(a(363));for(p=TS(p),m=bA(p,m),m=Array.from(m),p=0;p<m.length;){var w=m[p++];if(!qt(w)){if(w.tag===5&&He(w.stateNode))return!0;for(w=w.child;w!==null;)m.push(w),w=w.sibling}}return!1},n.getCurrentUpdatePriority=function(){return ft},n.getFindAllNodesFailureDescription=function(p,m){if(!ct)throw Error(a(363));var w=0,C=[];p=[TS(p),0];for(var E=0;E<p.length;){var N=p[E++],L=p[E++],Z=m[L];if((N.tag!==5||!qt(N))&&(_S(N,Z)&&(C.push(IS(Z)),L++,L>w&&(w=L)),L<m.length))for(N=N.child;N!==null;)p.push(N,L),N=N.sibling}if(w<m.length){for(p=[];w<m.length;w++)p.push(IS(m[w]));return`findAllNodes was able to match part of the selector:
  `+(C.join(" > ")+`

No matching component was found for:
  `)+p.join(" > ")}return null},n.getPublicRootInstance=function(p){if(p=p.current,!p.child)return null;switch(p.child.tag){case 5:return q(p.child.stateNode);default:return p.child.stateNode}},n.injectIntoDevTools=function(p){if(p={bundleType:p.bundleType,version:p.version,rendererPackageName:p.rendererPackageName,rendererConfig:p.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:o.ReactCurrentDispatcher,findHostInstanceByFiber:Z7,findFiberByHostInstance:p.findFiberByHostInstance||J7,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")p=!1;else{var m=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(m.isDisabled||!m.supportsFiber)p=!0;else{try{hy=m.inject(p),qs=m}catch{}p=!!m.checkDCE}}return p},n.isAlreadyRendering=function(){return!1},n.observeVisibleRects=function(p,m,w,C){if(!ct)throw Error(a(363));p=NS(p,m);var E=bn(p,w,C).disconnect;return{disconnect:function(){E()}}},n.registerMutableSourceForHydration=function(p,m){var w=m._getVersion;w=w(m._source),p.mutableSourceEagerHydrationData==null?p.mutableSourceEagerHydrationData=[m,w]:p.mutableSourceEagerHydrationData.push(m,w)},n.runWithPriority=function(p,m){var w=ft;try{return ft=p,m()}finally{ft=w}},n.shouldError=function(){return null},n.shouldSuspend=function(){return!1},n.updateContainer=function(p,m,w,C){var E=m.current,N=gr(),L=Fo(E);return w=AA(w),m.context===null?m.context=w:m.pendingContext=w,m=Aa(N,L),m.payload={element:p},C=C===void 0?null:C,C!==null&&(m.callback=C),p=Ao(E,m,L),p!==null&&(Ui(p,E,L,N),ky(p,E,L)),L},n};NB.exports=TZ;var _Z=NB.exports;const IZ=Tl(_Z);var RB={exports:{}},ou={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */ou.ConcurrentRoot=1;ou.ContinuousEventPriority=4;ou.DefaultEventPriority=16;ou.DiscreteEventPriority=1;ou.IdleEventPriority=536870912;ou.LegacyRoot=0;RB.exports=ou;var OB=RB.exports;const g3={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let y3=!1,v3=!1;const i_=".react-konva-event",NZ=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,RZ=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,OZ={};function Px(t,e,n=OZ){if(!y3&&"zIndex"in e&&(console.warn(RZ),y3=!0),!v3&&e.draggable){var r=e.x!==void 0||e.y!==void 0,i=e.onDragEnd||e.onDragMove;r&&!i&&(console.warn(NZ),v3=!0)}for(var s in n)if(!g3[s]){var a=s.slice(0,2)==="on",o=n[s]!==e[s];if(a&&o){var l=s.substr(2).toLowerCase();l.substr(0,7)==="content"&&(l="content"+l.substr(7,1).toUpperCase()+l.substr(8)),t.off(l,n[s])}var c=!e.hasOwnProperty(s);c&&t.setAttr(s,void 0)}var u=e._useStrictMode,d={},f=!1;const h={};for(var s in e)if(!g3[s]){var a=s.slice(0,2)==="on",g=n[s]!==e[s];if(a&&g){var l=s.substr(2).toLowerCase();l.substr(0,7)==="content"&&(l="content"+l.substr(7,1).toUpperCase()+l.substr(8)),e[s]&&(h[l]=e[s])}!a&&(e[s]!==n[s]||u&&e[s]!==t.getAttr(s))&&(f=!0,d[s]=e[s])}f&&(t.setAttrs(d),Pl(t));for(var l in h)t.on(l+i_,h[l])}function Pl(t){if(!Ne.autoDrawEnabled){var e=t.getLayer()||t.getStage();e&&e.batchDraw()}}const AB={},AZ={};Fc.Node.prototype._applyProps=Px;function PZ(t,e){if(typeof e=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${e}`);return}t.add(e),Pl(t)}function DZ(t,e,n){let r=Fc[t];r||(console.error(`Konva has no node with the type ${t}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${t}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),r=Fc.Group);const i={},s={};for(var a in e){var o=a.slice(0,2)==="on";o?s[a]=e[a]:i[a]=e[a]}const l=new r(i);return Px(l,s),l}function FZ(t,e,n){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${t}"`)}function LZ(t,e,n){return!1}function MZ(t){return t}function BZ(){return null}function zZ(){return null}function jZ(t,e,n,r){return AZ}function VZ(){}function WZ(t){}function UZ(t,e){return!1}function GZ(){return AB}function HZ(){return AB}const qZ=setTimeout,KZ=clearTimeout,XZ=-1;function YZ(t,e){return!1}const QZ=!1,ZZ=!0,JZ=!0;function eJ(t,e){e.parent===t?e.moveToTop():t.add(e),Pl(t)}function tJ(t,e){e.parent===t?e.moveToTop():t.add(e),Pl(t)}function PB(t,e,n){e._remove(),t.add(e),e.setZIndex(n.getZIndex()),Pl(t)}function nJ(t,e,n){PB(t,e,n)}function rJ(t,e){e.destroy(),e.off(i_),Pl(t)}function iJ(t,e){e.destroy(),e.off(i_),Pl(t)}function sJ(t,e,n){console.error(`Text components are not yet supported in ReactKonva. You text is: "${n}"`)}function aJ(t,e,n){}function oJ(t,e,n,r,i){Px(t,i,r)}function lJ(t){t.hide(),Pl(t)}function cJ(t){}function uJ(t,e){(e.visible==null||e.visible)&&t.show()}function dJ(t,e){}function fJ(t){}function pJ(){}const hJ=()=>OB.DefaultEventPriority,mJ=Object.freeze(Object.defineProperty({__proto__:null,appendChild:eJ,appendChildToContainer:tJ,appendInitialChild:PZ,cancelTimeout:KZ,clearContainer:fJ,commitMount:aJ,commitTextUpdate:sJ,commitUpdate:oJ,createInstance:DZ,createTextInstance:FZ,detachDeletedInstance:pJ,finalizeInitialChildren:LZ,getChildHostContext:HZ,getCurrentEventPriority:hJ,getPublicInstance:MZ,getRootHostContext:GZ,hideInstance:lJ,hideTextInstance:cJ,idlePriority:lh.unstable_IdlePriority,insertBefore:PB,insertInContainerBefore:nJ,isPrimaryRenderer:QZ,noTimeout:XZ,now:lh.unstable_now,prepareForCommit:BZ,preparePortalMount:zZ,prepareUpdate:jZ,removeChild:rJ,removeChildFromContainer:iJ,resetAfterCommit:VZ,resetTextContent:WZ,run:lh.unstable_runWithPriority,scheduleTimeout:qZ,shouldDeprioritizeSubtree:UZ,shouldSetTextContent:YZ,supportsMutation:JZ,unhideInstance:uJ,unhideTextInstance:dJ,warnsIfNotActing:ZZ},Symbol.toStringTag,{value:"Module"}));var gJ=Object.defineProperty,yJ=Object.defineProperties,vJ=Object.getOwnPropertyDescriptors,x3=Object.getOwnPropertySymbols,xJ=Object.prototype.hasOwnProperty,bJ=Object.prototype.propertyIsEnumerable,b3=(t,e,n)=>e in t?gJ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,w3=(t,e)=>{for(var n in e||(e={}))xJ.call(e,n)&&b3(t,n,e[n]);if(x3)for(var n of x3(e))bJ.call(e,n)&&b3(t,n,e[n]);return t},wJ=(t,e)=>yJ(t,vJ(e)),S3,k3;typeof window<"u"&&((S3=window.document)!=null&&S3.createElement||((k3=window.navigator)==null?void 0:k3.product)==="ReactNative")?A.useLayoutEffect:A.useEffect;function DB(t,e,n){if(!t)return;if(n(t)===!0)return t;let r=e?t.return:t.child;for(;r;){const i=DB(r,e,n);if(i)return i;r=e?null:r.sibling}}function FB(t){try{return Object.defineProperties(t,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return t}}const C3=console.error;console.error=function(){const t=[...arguments].join("");if(t!=null&&t.startsWith("Warning:")&&t.includes("useContext")){console.error=C3;return}return C3.apply(this,arguments)};const s_=FB(A.createContext(null));class LB extends A.Component{render(){return A.createElement(s_.Provider,{value:this._reactInternals},this.props.children)}}function SJ(){const t=A.useContext(s_);if(t===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=A.useId();return A.useMemo(()=>{for(const r of[t,t==null?void 0:t.alternate]){if(!r)continue;const i=DB(r,!1,s=>{let a=s.memoizedState;for(;a;){if(a.memoizedState===e)return!0;a=a.next}});if(i)return i}},[t,e])}function kJ(){const t=SJ(),[e]=A.useState(()=>new Map);e.clear();let n=t;for(;n;){if(n.type&&typeof n.type=="object"){const i=n.type._context===void 0&&n.type.Provider===n.type?n.type:n.type._context;i&&i!==s_&&!e.has(i)&&e.set(i,A.useContext(FB(i)))}n=n.return}return e}function CJ(){const t=kJ();return A.useMemo(()=>Array.from(t.keys()).reduce((e,n)=>r=>A.createElement(e,null,A.createElement(n.Provider,wJ(w3({},r),{value:t.get(n)}))),e=>A.createElement(LB,w3({},e))),[t])}function $J(t){const e=M.useRef({});return M.useLayoutEffect(()=>{e.current=t}),M.useLayoutEffect(()=>()=>{e.current={}},[]),e.current}const EJ=t=>{const e=M.useRef(),n=M.useRef(),r=M.useRef(),i=$J(t),s=CJ(),a=o=>{const{forwardedRef:l}=t;l&&(typeof l=="function"?l(o):l.current=o)};return M.useLayoutEffect(()=>(n.current=new Fc.Stage({width:t.width,height:t.height,container:e.current}),a(n.current),r.current=Qp.createContainer(n.current,OB.LegacyRoot,!1,null),Qp.updateContainer(M.createElement(s,{},t.children),r.current),()=>{Fc.isBrowser&&(a(null),Qp.updateContainer(null,r.current,null),n.current.destroy())}),[]),M.useLayoutEffect(()=>{a(n.current),Px(n.current,t,i),Qp.updateContainer(M.createElement(s,{},t.children),r.current,null)}),M.createElement("div",{ref:e,id:t.id,accessKey:t.accessKey,className:t.className,role:t.role,style:t.style,tabIndex:t.tabIndex,title:t.title})},TJ="Layer",MB="Group",_J="Label",a_="Rect",BB="Image",zB="Text",IJ="Tag",NJ="RegularPolygon",RJ="Shape",OJ="Transformer",Qp=IZ(mJ);Qp.injectIntoDevTools({findHostInstanceByFiber:()=>null,bundleType:0,version:M.version,rendererPackageName:"react-konva"});const AJ=M.forwardRef((t,e)=>M.createElement(LB,{},M.createElement(EJ,{...t,forwardedRef:e})));function S$(){return S$=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},S$.apply(this,arguments)}var jB=["shift","alt","meta","mod","ctrl"],PJ={esc:"escape",return:"enter",".":"period",",":"comma","-":"slash"," ":"space","`":"backquote","#":"backslash","+":"bracketright",ShiftLeft:"shift",ShiftRight:"shift",AltLeft:"alt",AltRight:"alt",MetaLeft:"meta",MetaRight:"meta",OSLeft:"meta",OSRight:"meta",ControlLeft:"ctrl",ControlRight:"ctrl"};function el(t){return(PJ[t]||t).trim().toLowerCase().replace(/key|digit|numpad|arrow/,"")}function DJ(t){return jB.includes(t)}function Ek(t,e){return e===void 0&&(e=","),t.split(e)}function Tk(t,e,n){e===void 0&&(e="+");var r=t.toLocaleLowerCase().split(e).map(function(a){return el(a)}),i={alt:r.includes("alt"),ctrl:r.includes("ctrl")||r.includes("control"),shift:r.includes("shift"),meta:r.includes("meta"),mod:r.includes("mod")},s=r.filter(function(a){return!jB.includes(a)});return S$({},i,{keys:s,description:n})}(function(){typeof document<"u"&&(document.addEventListener("keydown",function(t){t.key!==void 0&&VB([el(t.key),el(t.code)])}),document.addEventListener("keyup",function(t){t.key!==void 0&&WB([el(t.key),el(t.code)])})),typeof window<"u"&&window.addEventListener("blur",function(){tl.clear()})})();var tl=new Set;function o_(t){return Array.isArray(t)}function FJ(t,e){e===void 0&&(e=",");var n=o_(t)?t:t.split(e);return n.every(function(r){return tl.has(r.trim().toLowerCase())})}function VB(t){var e=Array.isArray(t)?t:[t];tl.has("meta")&&tl.forEach(function(n){return!DJ(n)&&tl.delete(n.toLowerCase())}),e.forEach(function(n){return tl.add(n.toLowerCase())})}function WB(t){var e=Array.isArray(t)?t:[t];t==="meta"?tl.clear():e.forEach(function(n){return tl.delete(n.toLowerCase())})}function LJ(t,e,n){(typeof n=="function"&&n(t,e)||n===!0)&&t.preventDefault()}function MJ(t,e,n){return typeof n=="function"?n(t,e):n===!0||n===void 0}function BJ(t){return UB(t,["input","textarea","select"])}function UB(t,e){var n=t.target;e===void 0&&(e=!1);var r=n&&n.tagName;return o_(e)?!!(r&&e&&e.some(function(i){return i.toLowerCase()===r.toLowerCase()})):!!(r&&e&&e===!0)}function zJ(t,e){return t.length===0&&e?(console.warn('A hotkey has the "scopes" option set, however no active scopes were found. If you want to use the global scopes feature, you need to wrap your app in a <HotkeysProvider>'),!0):e?t.some(function(n){return e.includes(n)})||t.includes("*"):!0}var jJ=function(e,n,r){r===void 0&&(r=!1);var i=n.alt,s=n.meta,a=n.mod,o=n.shift,l=n.ctrl,c=n.keys,u=e.key,d=e.code,f=e.ctrlKey,h=e.metaKey,g=e.shiftKey,y=e.altKey,x=el(d),v=u.toLowerCase();if(!(c!=null&&c.includes(x))&&!(c!=null&&c.includes(v))&&!["ctrl","control","unknown","meta","alt","shift","os"].includes(x))return!1;if(!r){if(i===!y&&v!=="alt"||o===!g&&v!=="shift")return!1;if(a){if(!h&&!f)return!1}else if(s===!h&&v!=="meta"&&v!=="os"||l===!f&&v!=="ctrl"&&v!=="control")return!1}return c&&c.length===1&&(c.includes(v)||c.includes(x))?!0:c?FJ(c):!c},VJ=A.createContext(void 0),WJ=function(){return A.useContext(VJ)};function GB(t,e){return t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(t).length===Object.keys(e).length&&Object.keys(t).reduce(function(n,r){return n&&GB(t[r],e[r])},!0):t===e}var UJ=A.createContext({hotkeys:[],enabledScopes:[],toggleScope:function(){},enableScope:function(){},disableScope:function(){}}),GJ=function(){return A.useContext(UJ)};function HJ(t){var e=A.useRef(void 0);return GB(e.current,t)||(e.current=t),e.current}var $3=function(e){e.stopPropagation(),e.preventDefault(),e.stopImmediatePropagation()},qJ=typeof window<"u"?A.useLayoutEffect:A.useEffect;function Yr(t,e,n,r){var i=A.useRef(null),s=A.useRef(!1),a=n instanceof Array?r instanceof Array?void 0:r:n,o=o_(t)?t.join(a==null?void 0:a.splitKey):t,l=n instanceof Array?n:r instanceof Array?r:void 0,c=A.useCallback(e,l??[]),u=A.useRef(c);l?u.current=c:u.current=e;var d=HJ(a),f=GJ(),h=f.enabledScopes,g=WJ();return qJ(function(){if(!((d==null?void 0:d.enabled)===!1||!zJ(h,d==null?void 0:d.scopes))){var y=function(k,$){var T;if($===void 0&&($=!1),!(BJ(k)&&!UB(k,d==null?void 0:d.enableOnFormTags))){if(i.current!==null){var _=i.current.getRootNode();if((_ instanceof Document||_ instanceof ShadowRoot)&&_.activeElement!==i.current&&!i.current.contains(_.activeElement)){$3(k);return}}(T=k.target)!=null&&T.isContentEditable&&!(d!=null&&d.enableOnContentEditable)||Ek(o,d==null?void 0:d.splitKey).forEach(function(R){var P,O=Tk(R,d==null?void 0:d.combinationKey);if(jJ(k,O,d==null?void 0:d.ignoreModifiers)||(P=O.keys)!=null&&P.includes("*")){if(d!=null&&d.ignoreEventWhen!=null&&d.ignoreEventWhen(k)||$&&s.current)return;if(LJ(k,O,d==null?void 0:d.preventDefault),!MJ(k,O,d==null?void 0:d.enabled)){$3(k);return}u.current(k,O),$||(s.current=!0)}})}},x=function(k){k.key!==void 0&&(VB(el(k.code)),((d==null?void 0:d.keydown)===void 0&&(d==null?void 0:d.keyup)!==!0||d!=null&&d.keydown)&&y(k))},v=function(k){k.key!==void 0&&(WB(el(k.code)),s.current=!1,d!=null&&d.keyup&&y(k,!0))},b=i.current||(a==null?void 0:a.document)||document;return b.addEventListener("keyup",v),b.addEventListener("keydown",x),g&&Ek(o,d==null?void 0:d.splitKey).forEach(function(S){return g.addHotkey(Tk(S,d==null?void 0:d.combinationKey,d==null?void 0:d.description))}),function(){b.removeEventListener("keyup",v),b.removeEventListener("keydown",x),g&&Ek(o,d==null?void 0:d.splitKey).forEach(function(S){return g.removeHotkey(Tk(S,d==null?void 0:d.combinationKey,d==null?void 0:d.description))})}}},[o,d,h]),i}const KJ="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let Xi=(t=21)=>{let e="",n=crypto.getRandomValues(new Uint8Array(t));for(;t--;)e+=KJ[n[t]&63];return e};var HB={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var s="",a=0;a<arguments.length;a++){var o=arguments[a];o&&(s=i(s,r(o)))}return s}function r(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return n.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var a="";for(var o in s)e.call(s,o)&&s[o]&&(a=i(a,o));return a}function i(s,a){return a?s?s+" "+a:s+a:s}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(HB);var qB=HB.exports;const We=Tl(qB);function E3(t){return"default"+t.charAt(0).toUpperCase()+t.substr(1)}function XJ(t){var e=YJ(t,"string");return typeof e=="symbol"?e:String(e)}function YJ(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function KB(t,e,n){var r=A.useRef(t!==void 0),i=A.useState(e),s=i[0],a=i[1],o=t!==void 0,l=r.current;return r.current=o,!o&&l&&s!==e&&a(e),[o?t:s,A.useCallback(function(c){for(var u=arguments.length,d=new Array(u>1?u-1:0),f=1;f<u;f++)d[f-1]=arguments[f];n&&n.apply(void 0,[c].concat(d)),a(c)},[n])]}function XB(t,e){return Object.keys(e).reduce(function(n,r){var i,s=n,a=s[E3(r)],o=s[r],l=W5(s,[E3(r),r].map(XJ)),c=e[r],u=KB(o,a,t[c]),d=u[0],f=u[1];return f$({},l,(i={},i[r]=d,i[c]=f,i))},t)}function k$(t,e){return k$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},k$(t,e)}function QJ(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,k$(t,e)}const ZJ=["xxl","xl","lg","md","sm","xs"],JJ="xs",Dx=A.createContext({prefixes:{},breakpoints:ZJ,minBreakpoint:JJ});function Qe(t,e){const{prefixes:n}=A.useContext(Dx);return t||n[e]||e}function YB(){const{breakpoints:t}=A.useContext(Dx);return t}function QB(){const{minBreakpoint:t}=A.useContext(Dx);return t}function l_(){const{dir:t}=A.useContext(Dx);return t==="rtl"}function $f(t){return t&&t.ownerDocument||document}function eee(t){var e=$f(t);return e&&e.defaultView||window}function tee(t,e){return eee(t).getComputedStyle(t,e)}var nee=/([A-Z])/g;function ree(t){return t.replace(nee,"-$1").toLowerCase()}var iee=/^ms-/;function _v(t){return ree(t).replace(iee,"-ms-")}var see=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function aee(t){return!!(t&&see.test(t))}function eo(t,e){var n="",r="";if(typeof e=="string")return t.style.getPropertyValue(_v(e))||tee(t).getPropertyValue(_v(e));Object.keys(e).forEach(function(i){var s=e[i];!s&&s!==0?t.style.removeProperty(_v(i)):aee(i)?r+=i+"("+s+") ":n+=_v(i)+": "+s+";"}),r&&(n+="transform: "+r+";"),t.style.cssText+=";"+n}var ZB={exports:{}},oee="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",lee=oee,cee=lee;function JB(){}function ez(){}ez.resetWarningCache=JB;var uee=function(){function t(r,i,s,a,o,l){if(l!==cee){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:ez,resetWarningCache:JB};return n.PropTypes=n,n};ZB.exports=uee();var tz=ZB.exports;const ge=Tl(tz),T3={disabled:!1},nz=M.createContext(null);var dee=function(e){return e.scrollTop},Zp="unmounted",Ho="exited",Wa="entering",Xo="entered",G0="exiting",xo=function(t){QJ(e,t);function e(r,i){var s;s=t.call(this,r,i)||this;var a=i,o=a&&!a.isMounting?r.enter:r.appear,l;return s.appearStatus=null,r.in?o?(l=Ho,s.appearStatus=Wa):l=Xo:r.unmountOnExit||r.mountOnEnter?l=Zp:l=Ho,s.state={status:l},s.nextCallback=null,s}e.getDerivedStateFromProps=function(i,s){var a=i.in;return a&&s.status===Zp?{status:Ho}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var s=null;if(i!==this.props){var a=this.state.status;this.props.in?a!==Wa&&a!==Xo&&(s=Wa):(a===Wa||a===Xo)&&(s=G0)}this.updateStatus(!1,s)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,s,a,o;return s=a=o=i,i!=null&&typeof i!="number"&&(s=i.exit,a=i.enter,o=i.appear!==void 0?i.appear:a),{exit:s,enter:a,appear:o}},n.updateStatus=function(i,s){if(i===void 0&&(i=!1),s!==null)if(this.cancelNextCallback(),s===Wa){if(this.props.unmountOnExit||this.props.mountOnEnter){var a=this.props.nodeRef?this.props.nodeRef.current:xc.findDOMNode(this);a&&dee(a)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Ho&&this.setState({status:Zp})},n.performEnter=function(i){var s=this,a=this.props.enter,o=this.context?this.context.isMounting:i,l=this.props.nodeRef?[o]:[xc.findDOMNode(this),o],c=l[0],u=l[1],d=this.getTimeouts(),f=o?d.appear:d.enter;if(!i&&!a||T3.disabled){this.safeSetState({status:Xo},function(){s.props.onEntered(c)});return}this.props.onEnter(c,u),this.safeSetState({status:Wa},function(){s.props.onEntering(c,u),s.onTransitionEnd(f,function(){s.safeSetState({status:Xo},function(){s.props.onEntered(c,u)})})})},n.performExit=function(){var i=this,s=this.props.exit,a=this.getTimeouts(),o=this.props.nodeRef?void 0:xc.findDOMNode(this);if(!s||T3.disabled){this.safeSetState({status:Ho},function(){i.props.onExited(o)});return}this.props.onExit(o),this.safeSetState({status:G0},function(){i.props.onExiting(o),i.onTransitionEnd(a.exit,function(){i.safeSetState({status:Ho},function(){i.props.onExited(o)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},n.setNextCallback=function(i){var s=this,a=!0;return this.nextCallback=function(o){a&&(a=!1,s.nextCallback=null,i(o))},this.nextCallback.cancel=function(){a=!1},this.nextCallback},n.onTransitionEnd=function(i,s){this.setNextCallback(s);var a=this.props.nodeRef?this.props.nodeRef.current:xc.findDOMNode(this),o=i==null&&!this.props.addEndListener;if(!a||o){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[a,this.nextCallback],c=l[0],u=l[1];this.props.addEndListener(c,u)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===Zp)return null;var s=this.props,a=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var o=W5(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return M.createElement(nz.Provider,{value:null},typeof a=="function"?a(i,o):M.cloneElement(M.Children.only(a),o))},e}(M.Component);xo.contextType=nz;xo.propTypes={};function ju(){}xo.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:ju,onEntering:ju,onEntered:ju,onExit:ju,onExiting:ju,onExited:ju};xo.UNMOUNTED=Zp;xo.EXITED=Ho;xo.ENTERING=Wa;xo.ENTERED=Xo;xo.EXITING=G0;const fee=xo,Ef=!!(typeof window<"u"&&window.document&&window.document.createElement);var C$=!1,$$=!1;try{var _k={get passive(){return C$=!0},get once(){return $$=C$=!0}};Ef&&(window.addEventListener("test",_k,_k),window.removeEventListener("test",_k,!0))}catch{}function rz(t,e,n,r){if(r&&typeof r!="boolean"&&!$$){var i=r.once,s=r.capture,a=n;!$$&&i&&(a=n.__once||function o(l){this.removeEventListener(e,o,s),n.call(this,l)},n.__once=a),t.addEventListener(e,a,C$?r:s)}t.addEventListener(e,n,r)}function E$(t,e,n,r){var i=r&&typeof r!="boolean"?r.capture:r;t.removeEventListener(e,n,i),n.__once&&t.removeEventListener(e,n.__once,i)}function Qa(t,e,n,r){return rz(t,e,n,r),function(){E$(t,e,n,r)}}function pee(t,e,n,r){if(n===void 0&&(n=!1),r===void 0&&(r=!0),t){var i=document.createEvent("HTMLEvents");i.initEvent(e,n,r),t.dispatchEvent(i)}}function hee(t){var e=eo(t,"transitionDuration")||"",n=e.indexOf("ms")===-1?1e3:1;return parseFloat(e)*n}function mee(t,e,n){n===void 0&&(n=5);var r=!1,i=setTimeout(function(){r||pee(t,"transitionend",!0)},e+n),s=Qa(t,"transitionend",function(){r=!0},{once:!0});return function(){clearTimeout(i),s()}}function iz(t,e,n,r){n==null&&(n=hee(t)||0);var i=mee(t,n,r),s=Qa(t,"transitionend",e);return function(){i(),s()}}function _3(t,e){const n=eo(t,e)||"",r=n.indexOf("ms")===-1?1e3:1;return parseFloat(n)*r}function sz(t,e){const n=_3(t,"transitionDuration"),r=_3(t,"transitionDelay"),i=iz(t,s=>{s.target===t&&(i(),e(s))},n+r)}function Pp(...t){return t.filter(e=>e!=null).reduce((e,n)=>{if(typeof n!="function")throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return e===null?n:function(...i){e.apply(this,i),n.apply(this,i)}},null)}function az(t){t.offsetHeight}const I3=t=>!t||typeof t=="function"?t:e=>{t.current=e};function gee(t,e){const n=I3(t),r=I3(e);return i=>{n&&n(i),r&&r(i)}}function bo(t,e){return A.useMemo(()=>gee(t,e),[t,e])}function H0(t){return t&&"setState"in t?xc.findDOMNode(t):t??null}const yee=M.forwardRef(({onEnter:t,onEntering:e,onEntered:n,onExit:r,onExiting:i,onExited:s,addEndListener:a,children:o,childRef:l,...c},u)=>{const d=A.useRef(null),f=bo(d,l),h=T=>{f(H0(T))},g=T=>_=>{T&&d.current&&T(d.current,_)},y=A.useCallback(g(t),[t]),x=A.useCallback(g(e),[e]),v=A.useCallback(g(n),[n]),b=A.useCallback(g(r),[r]),S=A.useCallback(g(i),[i]),k=A.useCallback(g(s),[s]),$=A.useCallback(g(a),[a]);return z.jsx(fee,{ref:u,...c,onEnter:y,onEntered:v,onEntering:x,onExit:b,onExited:k,onExiting:S,addEndListener:$,nodeRef:d,children:typeof o=="function"?(T,_)=>o(T,{..._,ref:h}):M.cloneElement(o,{ref:h})})}),oz=yee,vee={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function xee(t,e){const n=`offset${t[0].toUpperCase()}${t.slice(1)}`,r=e[n],i=vee[t];return r+parseInt(eo(e,i[0]),10)+parseInt(eo(e,i[1]),10)}const bee={[Ho]:"collapse",[G0]:"collapsing",[Wa]:"collapsing",[Xo]:"collapse show"},wee=M.forwardRef(({onEnter:t,onEntering:e,onEntered:n,onExit:r,onExiting:i,className:s,children:a,dimension:o="height",in:l=!1,timeout:c=300,mountOnEnter:u=!1,unmountOnExit:d=!1,appear:f=!1,getDimensionValue:h=xee,...g},y)=>{const x=typeof o=="function"?o():o,v=A.useMemo(()=>Pp(T=>{T.style[x]="0"},t),[x,t]),b=A.useMemo(()=>Pp(T=>{const _=`scroll${x[0].toUpperCase()}${x.slice(1)}`;T.style[x]=`${T[_]}px`},e),[x,e]),S=A.useMemo(()=>Pp(T=>{T.style[x]=null},n),[x,n]),k=A.useMemo(()=>Pp(T=>{T.style[x]=`${h(x,T)}px`,az(T)},r),[r,h,x]),$=A.useMemo(()=>Pp(T=>{T.style[x]=null},i),[x,i]);return z.jsx(oz,{ref:y,addEndListener:sz,...g,"aria-expanded":g.role?l:null,onEnter:v,onEntering:b,onEntered:S,onExit:k,onExiting:$,childRef:a.ref,in:l,timeout:c,mountOnEnter:u,unmountOnExit:d,appear:f,children:(T,_)=>M.cloneElement(a,{..._,className:We(s,a.props.className,bee[T],x==="width"&&"collapse-horizontal")})})}),See=wee;function lz(t,e){return Array.isArray(t)?t.includes(e):t===e}const cz=A.createContext({});cz.displayName="AccordionContext";const Fx=cz,uz=A.forwardRef(({as:t="div",bsPrefix:e,className:n,children:r,eventKey:i,...s},a)=>{const{activeEventKey:o}=A.useContext(Fx);return e=Qe(e,"accordion-collapse"),z.jsx(See,{ref:a,in:lz(o,i),...s,className:We(n,e),children:z.jsx(t,{children:A.Children.only(r)})})});uz.displayName="AccordionCollapse";const dz=uz,fz=A.createContext({eventKey:""});fz.displayName="AccordionItemContext";const c_=fz,pz=A.forwardRef(({as:t="div",bsPrefix:e,className:n,onEnter:r,onEntering:i,onEntered:s,onExit:a,onExiting:o,onExited:l,...c},u)=>{e=Qe(e,"accordion-body");const{eventKey:d}=A.useContext(c_);return z.jsx(dz,{eventKey:d,onEnter:r,onEntering:i,onEntered:s,onExit:a,onExiting:o,onExited:l,children:z.jsx(t,{ref:u,...c,className:We(n,e)})})});pz.displayName="AccordionBody";const kee=pz;function Cee(t,e){const{activeEventKey:n,onSelect:r,alwaysOpen:i}=A.useContext(Fx);return s=>{let a=t===n?null:t;i&&(Array.isArray(n)?n.includes(t)?a=n.filter(o=>o!==t):a=[...n,t]:a=[t]),r==null||r(a,s),e==null||e(s)}}const hz=A.forwardRef(({as:t="button",bsPrefix:e,className:n,onClick:r,...i},s)=>{e=Qe(e,"accordion-button");const{eventKey:a}=A.useContext(c_),o=Cee(a,r),{activeEventKey:l}=A.useContext(Fx);return t==="button"&&(i.type="button"),z.jsx(t,{ref:s,onClick:o,...i,"aria-expanded":Array.isArray(l)?l.includes(a):a===l,className:We(n,e,!lz(l,a)&&"collapsed")})});hz.displayName="AccordionButton";const mz=hz,gz=A.forwardRef(({as:t="h2",bsPrefix:e,className:n,children:r,onClick:i,...s},a)=>(e=Qe(e,"accordion-header"),z.jsx(t,{ref:a,...s,className:We(n,e),children:z.jsx(mz,{onClick:i,children:r})})));gz.displayName="AccordionHeader";const $ee=gz,yz=A.forwardRef(({as:t="div",bsPrefix:e,className:n,eventKey:r,...i},s)=>{e=Qe(e,"accordion-item");const a=A.useMemo(()=>({eventKey:r}),[r]);return z.jsx(c_.Provider,{value:a,children:z.jsx(t,{ref:s,...i,className:We(n,e)})})});yz.displayName="AccordionItem";const Eee=yz,vz=A.forwardRef((t,e)=>{const{as:n="div",activeKey:r,bsPrefix:i,className:s,onSelect:a,flush:o,alwaysOpen:l,...c}=XB(t,{activeKey:"onSelect"}),u=Qe(i,"accordion"),d=A.useMemo(()=>({activeEventKey:r,onSelect:a,alwaysOpen:l}),[r,a,l]);return z.jsx(Fx.Provider,{value:d,children:z.jsx(n,{ref:e,...c,className:We(s,u,o&&`${u}-flush`)})})});vz.displayName="Accordion";const u0=Object.assign(vz,{Button:mz,Collapse:dz,Item:Eee,Header:$ee,Body:kee});function Tee(t){const e=A.useRef(t);return A.useEffect(()=>{e.current=t},[t]),e}function kr(t){const e=Tee(t);return A.useCallback(function(...n){return e.current&&e.current(...n)},[e])}const _ee=t=>A.forwardRef((e,n)=>z.jsx("div",{...e,ref:n,className:We(e.className,t)}));function T$(){return A.useState(null)}function u_(){const t=A.useRef(!0),e=A.useRef(()=>t.current);return A.useEffect(()=>(t.current=!0,()=>{t.current=!1}),[]),e.current}function Iee(t){const e=A.useRef(null);return A.useEffect(()=>{e.current=t}),e.current}const Nee=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",Ree=typeof document<"u",_$=Ree||Nee?A.useLayoutEffect:A.useEffect,Oee=["as","disabled"];function Aee(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Pee(t){return!t||t.trim()==="#"}function d_({tagName:t,disabled:e,href:n,target:r,rel:i,role:s,onClick:a,tabIndex:o=0,type:l}){t||(n!=null||r!=null||i!=null?t="a":t="button");const c={tagName:t};if(t==="button")return[{type:l||"button",disabled:e},c];const u=f=>{if((e||t==="a"&&Pee(n))&&f.preventDefault(),e){f.stopPropagation();return}a==null||a(f)},d=f=>{f.key===" "&&(f.preventDefault(),u(f))};return t==="a"&&(n||(n="#"),e&&(n=void 0)),[{role:s??"button",disabled:void 0,tabIndex:e?void 0:o,href:n,target:t==="a"?r:void 0,"aria-disabled":e||void 0,rel:t==="a"?i:void 0,onClick:u,onKeyDown:d},c]}const xz=A.forwardRef((t,e)=>{let{as:n,disabled:r}=t,i=Aee(t,Oee);const[s,{tagName:a}]=d_(Object.assign({tagName:n,disabled:r},i));return z.jsx(a,Object.assign({},i,s,{ref:e}))});xz.displayName="Button";const Dee=["onKeyDown"];function Fee(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Lee(t){return!t||t.trim()==="#"}const bz=A.forwardRef((t,e)=>{let{onKeyDown:n}=t,r=Fee(t,Dee);const[i]=d_(Object.assign({tagName:"a"},r)),s=kr(a=>{i.onKeyDown(a),n==null||n(a)});return Lee(r.href)||r.role==="button"?z.jsx("a",Object.assign({ref:e},r,i,{onKeyDown:s})):z.jsx("a",Object.assign({ref:e},r,{onKeyDown:n}))});bz.displayName="Anchor";const Mee=bz,Bee={[Wa]:"show",[Xo]:"show"},wz=A.forwardRef(({className:t,children:e,transitionClasses:n={},onEnter:r,...i},s)=>{const a={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...i},o=A.useCallback((l,c)=>{az(l),r==null||r(l,c)},[r]);return z.jsx(oz,{ref:s,addEndListener:sz,...a,onEnter:o,childRef:e.ref,children:(l,c)=>A.cloneElement(e,{...c,className:We("fade",t,e.props.className,Bee[l],n[l])})})});wz.displayName="Fade";const q0=wz,zee={"aria-label":ge.string,onClick:ge.func,variant:ge.oneOf(["white"])},f_=A.forwardRef(({className:t,variant:e,"aria-label":n="Close",...r},i)=>z.jsx("button",{ref:i,type:"button",className:We("btn-close",e&&`btn-close-${e}`,t),"aria-label":n,...r}));f_.displayName="CloseButton";f_.propTypes=zee;const jee=f_,Sz=A.forwardRef(({as:t,bsPrefix:e,variant:n="primary",size:r,active:i=!1,disabled:s=!1,className:a,...o},l)=>{const c=Qe(e,"btn"),[u,{tagName:d}]=d_({tagName:t,disabled:s,...o}),f=d;return z.jsx(f,{...u,...o,ref:l,disabled:s,className:We(a,c,i&&"active",n&&`${c}-${n}`,r&&`${c}-${r}`,o.href&&s&&"disabled")})});Sz.displayName="Button";const Lc=Sz,kz=A.forwardRef(({bsPrefix:t,size:e,vertical:n=!1,className:r,role:i="group",as:s="div",...a},o)=>{const l=Qe(t,"btn-group");let c=l;return n&&(c=`${l}-vertical`),z.jsx(s,{...a,ref:o,role:i,className:We(r,c,e&&`${l}-${e}`)})});kz.displayName="ButtonGroup";const Cz=kz,$z=A.forwardRef(({bsPrefix:t,className:e,role:n="toolbar",...r},i)=>{const s=Qe(t,"btn-toolbar");return z.jsx("div",{...r,ref:i,className:We(e,s),role:n})});$z.displayName="ButtonToolbar";const Vee=$z,Ez=A.createContext(null);Ez.displayName="CardHeaderContext";const Wee=Ez;function Uee(t){const e=A.useRef(t);return e.current=t,e}function p_(t){const e=Uee(t);A.useEffect(()=>()=>e.current(),[])}const I$=2**31-1;function Tz(t,e,n){const r=n-Date.now();t.current=r<=I$?setTimeout(e,r):setTimeout(()=>Tz(t,e,n),I$)}function Gee(){const t=u_(),e=A.useRef();return p_(()=>clearTimeout(e.current)),A.useMemo(()=>{const n=()=>clearTimeout(e.current);function r(i,s=0){t()&&(n(),s<=I$?e.current=setTimeout(i,s):Tz(e,i,Date.now()+s))}return{set:r,clear:n,handleRef:e}},[])}function Hee(t,e){return A.Children.toArray(t).some(n=>A.isValidElement(n)&&n.type===e)}function qee({as:t,bsPrefix:e,className:n,...r}){e=Qe(e,"col");const i=YB(),s=QB(),a=[],o=[];return i.forEach(l=>{const c=r[l];delete r[l];let u,d,f;typeof c=="object"&&c!=null?{span:u,offset:d,order:f}=c:u=c;const h=l!==s?`-${l}`:"";u&&a.push(u===!0?`${e}${h}`:`${e}${h}-${u}`),f!=null&&o.push(`order${h}-${f}`),d!=null&&o.push(`offset${h}-${d}`)}),[{...r,className:We(n,...a,...o)},{as:t,bsPrefix:e,spans:a}]}const _z=A.forwardRef((t,e)=>{const[{className:n,...r},{as:i="div",bsPrefix:s,spans:a}]=qee(t);return z.jsx(i,{...r,ref:e,className:We(n,!a.length&&s)})});_z.displayName="Col";const Lt=_z,Iz=A.forwardRef(({bsPrefix:t,fluid:e=!1,as:n="div",className:r,...i},s)=>{const a=Qe(t,"container"),o=typeof e=="string"?`-${e}`:"-fluid";return z.jsx(n,{ref:s,...i,className:We(r,e?`${a}${o}`:a)})});Iz.displayName="Container";const Kee=Iz;var Xee=Function.prototype.bind.call(Function.prototype.call,[].slice);function oc(t,e){return Xee(t.querySelectorAll(e))}function Yee(){const[,t]=A.useReducer(e=>!e,!1);return t}var N3=Object.prototype.hasOwnProperty;function R3(t,e,n){for(n of t.keys())if(wh(n,e))return n}function wh(t,e){var n,r,i;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((r=t.length)===e.length)for(;r--&&wh(t[r],e[r]););return r===-1}if(n===Set){if(t.size!==e.size)return!1;for(r of t)if(i=r,i&&typeof i=="object"&&(i=R3(e,i),!i)||!e.has(i))return!1;return!0}if(n===Map){if(t.size!==e.size)return!1;for(r of t)if(i=r[0],i&&typeof i=="object"&&(i=R3(e,i),!i)||!wh(r[1],e.get(i)))return!1;return!0}if(n===ArrayBuffer)t=new Uint8Array(t),e=new Uint8Array(e);else if(n===DataView){if((r=t.byteLength)===e.byteLength)for(;r--&&t.getInt8(r)===e.getInt8(r););return r===-1}if(ArrayBuffer.isView(t)){if((r=t.byteLength)===e.byteLength)for(;r--&&t[r]===e[r];);return r===-1}if(!n||typeof t=="object"){r=0;for(n in t)if(N3.call(t,n)&&++r&&!N3.call(e,n)||!(n in e)||!wh(t[n],e[n]))return!1;return Object.keys(e).length===r}}return t!==t&&e!==e}function Qee(t){const e=u_();return[t[0],A.useCallback(n=>{if(e())return t[1](n)},[e,t[1]])]}var li="top",ds="bottom",fs="right",ci="left",h_="auto",Cm=[li,ds,fs,ci],ef="start",Kh="end",Zee="clippingParents",Nz="viewport",Dp="popper",Jee="reference",O3=Cm.reduce(function(t,e){return t.concat([e+"-"+ef,e+"-"+Kh])},[]),Rz=[].concat(Cm,[h_]).reduce(function(t,e){return t.concat([e,e+"-"+ef,e+"-"+Kh])},[]),ete="beforeRead",tte="read",nte="afterRead",rte="beforeMain",ite="main",ste="afterMain",ate="beforeWrite",ote="write",lte="afterWrite",cte=[ete,tte,nte,rte,ite,ste,ate,ote,lte];function pa(t){return t.split("-")[0]}function Ri(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Mc(t){var e=Ri(t).Element;return t instanceof e||t instanceof Element}function ha(t){var e=Ri(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function m_(t){if(typeof ShadowRoot>"u")return!1;var e=Ri(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}var $c=Math.max,K0=Math.min,tf=Math.round;function N$(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function Oz(){return!/^((?!chrome|android).)*safari/i.test(N$())}function nf(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),i=1,s=1;e&&ha(t)&&(i=t.offsetWidth>0&&tf(r.width)/t.offsetWidth||1,s=t.offsetHeight>0&&tf(r.height)/t.offsetHeight||1);var a=Mc(t)?Ri(t):window,o=a.visualViewport,l=!Oz()&&n,c=(r.left+(l&&o?o.offsetLeft:0))/i,u=(r.top+(l&&o?o.offsetTop:0))/s,d=r.width/i,f=r.height/s;return{width:d,height:f,top:u,right:c+d,bottom:u+f,left:c,x:c,y:u}}function g_(t){var e=nf(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function Az(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&m_(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function yl(t){return t?(t.nodeName||"").toLowerCase():null}function oo(t){return Ri(t).getComputedStyle(t)}function ute(t){return["table","td","th"].indexOf(yl(t))>=0}function Dl(t){return((Mc(t)?t.ownerDocument:t.document)||window.document).documentElement}function Lx(t){return yl(t)==="html"?t:t.assignedSlot||t.parentNode||(m_(t)?t.host:null)||Dl(t)}function A3(t){return!ha(t)||oo(t).position==="fixed"?null:t.offsetParent}function dte(t){var e=/firefox/i.test(N$()),n=/Trident/i.test(N$());if(n&&ha(t)){var r=oo(t);if(r.position==="fixed")return null}var i=Lx(t);for(m_(i)&&(i=i.host);ha(i)&&["html","body"].indexOf(yl(i))<0;){var s=oo(i);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return i;i=i.parentNode}return null}function $m(t){for(var e=Ri(t),n=A3(t);n&&ute(n)&&oo(n).position==="static";)n=A3(n);return n&&(yl(n)==="html"||yl(n)==="body"&&oo(n).position==="static")?e:n||dte(t)||e}function y_(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Sh(t,e,n){return $c(t,K0(e,n))}function fte(t,e,n){var r=Sh(t,e,n);return r>n?n:r}function Pz(){return{top:0,right:0,bottom:0,left:0}}function Dz(t){return Object.assign({},Pz(),t)}function Fz(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var pte=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,Dz(typeof e!="number"?e:Fz(e,Cm))};function hte(t){var e,n=t.state,r=t.name,i=t.options,s=n.elements.arrow,a=n.modifiersData.popperOffsets,o=pa(n.placement),l=y_(o),c=[ci,fs].indexOf(o)>=0,u=c?"height":"width";if(!(!s||!a)){var d=pte(i.padding,n),f=g_(s),h=l==="y"?li:ci,g=l==="y"?ds:fs,y=n.rects.reference[u]+n.rects.reference[l]-a[l]-n.rects.popper[u],x=a[l]-n.rects.reference[l],v=$m(s),b=v?l==="y"?v.clientHeight||0:v.clientWidth||0:0,S=y/2-x/2,k=d[h],$=b-f[u]-d[g],T=b/2-f[u]/2+S,_=Sh(k,T,$),R=l;n.modifiersData[r]=(e={},e[R]=_,e.centerOffset=_-T,e)}}function mte(t){var e=t.state,n=t.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||Az(e.elements.popper,i)&&(e.elements.arrow=i))}const gte={name:"arrow",enabled:!0,phase:"main",fn:hte,effect:mte,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function rf(t){return t.split("-")[1]}var yte={top:"auto",right:"auto",bottom:"auto",left:"auto"};function vte(t,e){var n=t.x,r=t.y,i=e.devicePixelRatio||1;return{x:tf(n*i)/i||0,y:tf(r*i)/i||0}}function P3(t){var e,n=t.popper,r=t.popperRect,i=t.placement,s=t.variation,a=t.offsets,o=t.position,l=t.gpuAcceleration,c=t.adaptive,u=t.roundOffsets,d=t.isFixed,f=a.x,h=f===void 0?0:f,g=a.y,y=g===void 0?0:g,x=typeof u=="function"?u({x:h,y}):{x:h,y};h=x.x,y=x.y;var v=a.hasOwnProperty("x"),b=a.hasOwnProperty("y"),S=ci,k=li,$=window;if(c){var T=$m(n),_="clientHeight",R="clientWidth";if(T===Ri(n)&&(T=Dl(n),oo(T).position!=="static"&&o==="absolute"&&(_="scrollHeight",R="scrollWidth")),T=T,i===li||(i===ci||i===fs)&&s===Kh){k=ds;var P=d&&T===$&&$.visualViewport?$.visualViewport.height:T[_];y-=P-r.height,y*=l?1:-1}if(i===ci||(i===li||i===ds)&&s===Kh){S=fs;var O=d&&T===$&&$.visualViewport?$.visualViewport.width:T[R];h-=O-r.width,h*=l?1:-1}}var B=Object.assign({position:o},c&&yte),H=u===!0?vte({x:h,y},Ri(n)):{x:h,y};if(h=H.x,y=H.y,l){var V;return Object.assign({},B,(V={},V[k]=b?"0":"",V[S]=v?"0":"",V.transform=($.devicePixelRatio||1)<=1?"translate("+h+"px, "+y+"px)":"translate3d("+h+"px, "+y+"px, 0)",V))}return Object.assign({},B,(e={},e[k]=b?y+"px":"",e[S]=v?h+"px":"",e.transform="",e))}function xte(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=r===void 0?!0:r,s=n.adaptive,a=s===void 0?!0:s,o=n.roundOffsets,l=o===void 0?!0:o,c={placement:pa(e.placement),variation:rf(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,P3(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:a,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,P3(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const bte={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:xte,data:{}};var Iv={passive:!0};function wte(t){var e=t.state,n=t.instance,r=t.options,i=r.scroll,s=i===void 0?!0:i,a=r.resize,o=a===void 0?!0:a,l=Ri(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&c.forEach(function(u){u.addEventListener("scroll",n.update,Iv)}),o&&l.addEventListener("resize",n.update,Iv),function(){s&&c.forEach(function(u){u.removeEventListener("scroll",n.update,Iv)}),o&&l.removeEventListener("resize",n.update,Iv)}}const Ste={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:wte,data:{}};var kte={left:"right",right:"left",bottom:"top",top:"bottom"};function d0(t){return t.replace(/left|right|bottom|top/g,function(e){return kte[e]})}var Cte={start:"end",end:"start"};function D3(t){return t.replace(/start|end/g,function(e){return Cte[e]})}function v_(t){var e=Ri(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function x_(t){return nf(Dl(t)).left+v_(t).scrollLeft}function $te(t,e){var n=Ri(t),r=Dl(t),i=n.visualViewport,s=r.clientWidth,a=r.clientHeight,o=0,l=0;if(i){s=i.width,a=i.height;var c=Oz();(c||!c&&e==="fixed")&&(o=i.offsetLeft,l=i.offsetTop)}return{width:s,height:a,x:o+x_(t),y:l}}function Ete(t){var e,n=Dl(t),r=v_(t),i=(e=t.ownerDocument)==null?void 0:e.body,s=$c(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),a=$c(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),o=-r.scrollLeft+x_(t),l=-r.scrollTop;return oo(i||n).direction==="rtl"&&(o+=$c(n.clientWidth,i?i.clientWidth:0)-s),{width:s,height:a,x:o,y:l}}function b_(t){var e=oo(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function Lz(t){return["html","body","#document"].indexOf(yl(t))>=0?t.ownerDocument.body:ha(t)&&b_(t)?t:Lz(Lx(t))}function kh(t,e){var n;e===void 0&&(e=[]);var r=Lz(t),i=r===((n=t.ownerDocument)==null?void 0:n.body),s=Ri(r),a=i?[s].concat(s.visualViewport||[],b_(r)?r:[]):r,o=e.concat(a);return i?o:o.concat(kh(Lx(a)))}function R$(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function Tte(t,e){var n=nf(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function F3(t,e,n){return e===Nz?R$($te(t,n)):Mc(e)?Tte(e,n):R$(Ete(Dl(t)))}function _te(t){var e=kh(Lx(t)),n=["absolute","fixed"].indexOf(oo(t).position)>=0,r=n&&ha(t)?$m(t):t;return Mc(r)?e.filter(function(i){return Mc(i)&&Az(i,r)&&yl(i)!=="body"}):[]}function Ite(t,e,n,r){var i=e==="clippingParents"?_te(t):[].concat(e),s=[].concat(i,[n]),a=s[0],o=s.reduce(function(l,c){var u=F3(t,c,r);return l.top=$c(u.top,l.top),l.right=K0(u.right,l.right),l.bottom=K0(u.bottom,l.bottom),l.left=$c(u.left,l.left),l},F3(t,a,r));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function Mz(t){var e=t.reference,n=t.element,r=t.placement,i=r?pa(r):null,s=r?rf(r):null,a=e.x+e.width/2-n.width/2,o=e.y+e.height/2-n.height/2,l;switch(i){case li:l={x:a,y:e.y-n.height};break;case ds:l={x:a,y:e.y+e.height};break;case fs:l={x:e.x+e.width,y:o};break;case ci:l={x:e.x-n.width,y:o};break;default:l={x:e.x,y:e.y}}var c=i?y_(i):null;if(c!=null){var u=c==="y"?"height":"width";switch(s){case ef:l[c]=l[c]-(e[u]/2-n[u]/2);break;case Kh:l[c]=l[c]+(e[u]/2-n[u]/2);break}}return l}function Xh(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=r===void 0?t.placement:r,s=n.strategy,a=s===void 0?t.strategy:s,o=n.boundary,l=o===void 0?Zee:o,c=n.rootBoundary,u=c===void 0?Nz:c,d=n.elementContext,f=d===void 0?Dp:d,h=n.altBoundary,g=h===void 0?!1:h,y=n.padding,x=y===void 0?0:y,v=Dz(typeof x!="number"?x:Fz(x,Cm)),b=f===Dp?Jee:Dp,S=t.rects.popper,k=t.elements[g?b:f],$=Ite(Mc(k)?k:k.contextElement||Dl(t.elements.popper),l,u,a),T=nf(t.elements.reference),_=Mz({reference:T,element:S,strategy:"absolute",placement:i}),R=R$(Object.assign({},S,_)),P=f===Dp?R:T,O={top:$.top-P.top+v.top,bottom:P.bottom-$.bottom+v.bottom,left:$.left-P.left+v.left,right:P.right-$.right+v.right},B=t.modifiersData.offset;if(f===Dp&&B){var H=B[i];Object.keys(O).forEach(function(V){var K=[fs,ds].indexOf(V)>=0?1:-1,X=[li,ds].indexOf(V)>=0?"y":"x";O[V]+=H[X]*K})}return O}function Nte(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=n.boundary,s=n.rootBoundary,a=n.padding,o=n.flipVariations,l=n.allowedAutoPlacements,c=l===void 0?Rz:l,u=rf(r),d=u?o?O3:O3.filter(function(g){return rf(g)===u}):Cm,f=d.filter(function(g){return c.indexOf(g)>=0});f.length===0&&(f=d);var h=f.reduce(function(g,y){return g[y]=Xh(t,{placement:y,boundary:i,rootBoundary:s,padding:a})[pa(y)],g},{});return Object.keys(h).sort(function(g,y){return h[g]-h[y]})}function Rte(t){if(pa(t)===h_)return[];var e=d0(t);return[D3(t),e,D3(e)]}function Ote(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var i=n.mainAxis,s=i===void 0?!0:i,a=n.altAxis,o=a===void 0?!0:a,l=n.fallbackPlacements,c=n.padding,u=n.boundary,d=n.rootBoundary,f=n.altBoundary,h=n.flipVariations,g=h===void 0?!0:h,y=n.allowedAutoPlacements,x=e.options.placement,v=pa(x),b=v===x,S=l||(b||!g?[d0(x)]:Rte(x)),k=[x].concat(S).reduce(function(de,pe){return de.concat(pa(pe)===h_?Nte(e,{placement:pe,boundary:u,rootBoundary:d,padding:c,flipVariations:g,allowedAutoPlacements:y}):pe)},[]),$=e.rects.reference,T=e.rects.popper,_=new Map,R=!0,P=k[0],O=0;O<k.length;O++){var B=k[O],H=pa(B),V=rf(B)===ef,K=[li,ds].indexOf(H)>=0,X=K?"width":"height",q=Xh(e,{placement:B,boundary:u,rootBoundary:d,altBoundary:f,padding:c}),te=K?V?fs:ci:V?ds:li;$[X]>T[X]&&(te=d0(te));var j=d0(te),Y=[];if(s&&Y.push(q[H]<=0),o&&Y.push(q[te]<=0,q[j]<=0),Y.every(function(de){return de})){P=B,R=!1;break}_.set(B,Y)}if(R)for(var Q=g?3:1,ne=function(pe){var me=k.find(function(ie){var we=_.get(ie);if(we)return we.slice(0,pe).every(function($e){return $e})});if(me)return P=me,"break"},le=Q;le>0;le--){var ue=ne(le);if(ue==="break")break}e.placement!==P&&(e.modifiersData[r]._skip=!0,e.placement=P,e.reset=!0)}}const Ate={name:"flip",enabled:!0,phase:"main",fn:Ote,requiresIfExists:["offset"],data:{_skip:!1}};function L3(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function M3(t){return[li,fs,ds,ci].some(function(e){return t[e]>=0})}function Pte(t){var e=t.state,n=t.name,r=e.rects.reference,i=e.rects.popper,s=e.modifiersData.preventOverflow,a=Xh(e,{elementContext:"reference"}),o=Xh(e,{altBoundary:!0}),l=L3(a,r),c=L3(o,i,s),u=M3(l),d=M3(c);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}const Dte={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Pte};function Fte(t,e,n){var r=pa(t),i=[ci,li].indexOf(r)>=0?-1:1,s=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,a=s[0],o=s[1];return a=a||0,o=(o||0)*i,[ci,fs].indexOf(r)>=0?{x:o,y:a}:{x:a,y:o}}function Lte(t){var e=t.state,n=t.options,r=t.name,i=n.offset,s=i===void 0?[0,0]:i,a=Rz.reduce(function(u,d){return u[d]=Fte(d,e.rects,s),u},{}),o=a[e.placement],l=o.x,c=o.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[r]=a}const Mte={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Lte};function Bte(t){var e=t.state,n=t.name;e.modifiersData[n]=Mz({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const zte={name:"popperOffsets",enabled:!0,phase:"read",fn:Bte,data:{}};function jte(t){return t==="x"?"y":"x"}function Vte(t){var e=t.state,n=t.options,r=t.name,i=n.mainAxis,s=i===void 0?!0:i,a=n.altAxis,o=a===void 0?!1:a,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,d=n.padding,f=n.tether,h=f===void 0?!0:f,g=n.tetherOffset,y=g===void 0?0:g,x=Xh(e,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),v=pa(e.placement),b=rf(e.placement),S=!b,k=y_(v),$=jte(k),T=e.modifiersData.popperOffsets,_=e.rects.reference,R=e.rects.popper,P=typeof y=="function"?y(Object.assign({},e.rects,{placement:e.placement})):y,O=typeof P=="number"?{mainAxis:P,altAxis:P}:Object.assign({mainAxis:0,altAxis:0},P),B=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,H={x:0,y:0};if(T){if(s){var V,K=k==="y"?li:ci,X=k==="y"?ds:fs,q=k==="y"?"height":"width",te=T[k],j=te+x[K],Y=te-x[X],Q=h?-R[q]/2:0,ne=b===ef?_[q]:R[q],le=b===ef?-R[q]:-_[q],ue=e.elements.arrow,de=h&&ue?g_(ue):{width:0,height:0},pe=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:Pz(),me=pe[K],ie=pe[X],we=Sh(0,_[q],de[q]),$e=S?_[q]/2-Q-we-me-O.mainAxis:ne-we-me-O.mainAxis,De=S?-_[q]/2+Q+we+ie+O.mainAxis:le+we+ie+O.mainAxis,Oe=e.elements.arrow&&$m(e.elements.arrow),Ue=Oe?k==="y"?Oe.clientTop||0:Oe.clientLeft||0:0,je=(V=B==null?void 0:B[k])!=null?V:0,Ye=te+$e-je-Ue,Be=te+De-je,et=Sh(h?K0(j,Ye):j,te,h?$c(Y,Be):Y);T[k]=et,H[k]=et-te}if(o){var lt,wt=k==="x"?li:ci,Or=k==="x"?ds:fs,ct=T[$],Zn=$==="y"?"height":"width",xn=ct+x[wt],Wr=ct-x[Or],qt=[li,ci].indexOf(v)!==-1,ur=(lt=B==null?void 0:B[$])!=null?lt:0,He=qt?xn:ct-_[Zn]-R[Zn]-ur+O.altAxis,bn=qt?ct+_[Zn]+R[Zn]-ur-O.altAxis:Wr,dr=h&&qt?fte(He,ct,bn):Sh(h?He:xn,ct,h?bn:Wr);T[$]=dr,H[$]=dr-ct}e.modifiersData[r]=H}}const Wte={name:"preventOverflow",enabled:!0,phase:"main",fn:Vte,requiresIfExists:["offset"]};function Ute(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function Gte(t){return t===Ri(t)||!ha(t)?v_(t):Ute(t)}function Hte(t){var e=t.getBoundingClientRect(),n=tf(e.width)/t.offsetWidth||1,r=tf(e.height)/t.offsetHeight||1;return n!==1||r!==1}function qte(t,e,n){n===void 0&&(n=!1);var r=ha(e),i=ha(e)&&Hte(e),s=Dl(e),a=nf(t,i,n),o={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((yl(e)!=="body"||b_(s))&&(o=Gte(e)),ha(e)?(l=nf(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):s&&(l.x=x_(s))),{x:a.left+o.scrollLeft-l.x,y:a.top+o.scrollTop-l.y,width:a.width,height:a.height}}function Kte(t){var e=new Map,n=new Set,r=[];t.forEach(function(s){e.set(s.name,s)});function i(s){n.add(s.name);var a=[].concat(s.requires||[],s.requiresIfExists||[]);a.forEach(function(o){if(!n.has(o)){var l=e.get(o);l&&i(l)}}),r.push(s)}return t.forEach(function(s){n.has(s.name)||i(s)}),r}function Xte(t){var e=Kte(t);return cte.reduce(function(n,r){return n.concat(e.filter(function(i){return i.phase===r}))},[])}function Yte(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function Qte(t){var e=t.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var B3={placement:"bottom",modifiers:[],strategy:"absolute"};function z3(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function Zte(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,i=e.defaultOptions,s=i===void 0?B3:i;return function(o,l,c){c===void 0&&(c=s);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},B3,s),modifiersData:{},elements:{reference:o,popper:l},attributes:{},styles:{}},d=[],f=!1,h={state:u,setOptions:function(v){var b=typeof v=="function"?v(u.options):v;y(),u.options=Object.assign({},s,u.options,b),u.scrollParents={reference:Mc(o)?kh(o):o.contextElement?kh(o.contextElement):[],popper:kh(l)};var S=Xte(Qte([].concat(r,u.options.modifiers)));return u.orderedModifiers=S.filter(function(k){return k.enabled}),g(),h.update()},forceUpdate:function(){if(!f){var v=u.elements,b=v.reference,S=v.popper;if(z3(b,S)){u.rects={reference:qte(b,$m(S),u.options.strategy==="fixed"),popper:g_(S)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(O){return u.modifiersData[O.name]=Object.assign({},O.data)});for(var k=0;k<u.orderedModifiers.length;k++){if(u.reset===!0){u.reset=!1,k=-1;continue}var $=u.orderedModifiers[k],T=$.fn,_=$.options,R=_===void 0?{}:_,P=$.name;typeof T=="function"&&(u=T({state:u,options:R,name:P,instance:h})||u)}}}},update:Yte(function(){return new Promise(function(x){h.forceUpdate(),x(u)})}),destroy:function(){y(),f=!0}};if(!z3(o,l))return h;h.setOptions(c).then(function(x){!f&&c.onFirstUpdate&&c.onFirstUpdate(x)});function g(){u.orderedModifiers.forEach(function(x){var v=x.name,b=x.options,S=b===void 0?{}:b,k=x.effect;if(typeof k=="function"){var $=k({state:u,name:v,instance:h,options:S}),T=function(){};d.push($||T)}})}function y(){d.forEach(function(x){return x()}),d=[]}return h}}const Jte=Zte({defaultModifiers:[Dte,zte,bte,Ste,Mte,Ate,Wte,gte]}),ene=["enabled","placement","strategy","modifiers"];function tne(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}const nne={name:"applyStyles",enabled:!1,phase:"afterWrite",fn:()=>{}},rne={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:({state:t})=>()=>{const{reference:e,popper:n}=t.elements;if("removeAttribute"in e){const r=(e.getAttribute("aria-describedby")||"").split(",").filter(i=>i.trim()!==n.id);r.length?e.setAttribute("aria-describedby",r.join(",")):e.removeAttribute("aria-describedby")}},fn:({state:t})=>{var e;const{popper:n,reference:r}=t.elements,i=(e=n.getAttribute("role"))==null?void 0:e.toLowerCase();if(n.id&&i==="tooltip"&&"setAttribute"in r){const s=r.getAttribute("aria-describedby");if(s&&s.split(",").indexOf(n.id)!==-1)return;r.setAttribute("aria-describedby",s?`${s},${n.id}`:n.id)}}},ine=[];function sne(t,e,n={}){let{enabled:r=!0,placement:i="bottom",strategy:s="absolute",modifiers:a=ine}=n,o=tne(n,ene);const l=A.useRef(a),c=A.useRef(),u=A.useCallback(()=>{var x;(x=c.current)==null||x.update()},[]),d=A.useCallback(()=>{var x;(x=c.current)==null||x.forceUpdate()},[]),[f,h]=Qee(A.useState({placement:i,update:u,forceUpdate:d,attributes:{},styles:{popper:{},arrow:{}}})),g=A.useMemo(()=>({name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:({state:x})=>{const v={},b={};Object.keys(x.elements).forEach(S=>{v[S]=x.styles[S],b[S]=x.attributes[S]}),h({state:x,styles:v,attributes:b,update:u,forceUpdate:d,placement:x.placement})}}),[u,d,h]),y=A.useMemo(()=>(wh(l.current,a)||(l.current=a),l.current),[a]);return A.useEffect(()=>{!c.current||!r||c.current.setOptions({placement:i,strategy:s,modifiers:[...y,g,nne]})},[s,i,g,r,y]),A.useEffect(()=>{if(!(!r||t==null||e==null))return c.current=Jte(t,e,Object.assign({},o,{placement:i,strategy:s,modifiers:[...y,rne,g]})),()=>{c.current!=null&&(c.current.destroy(),c.current=void 0,h(x=>Object.assign({},x,{attributes:{},styles:{popper:{}}})))}},[r,t,e]),f}function Yh(t,e){if(t.contains)return t.contains(e);if(t.compareDocumentPosition)return t===e||!!(t.compareDocumentPosition(e)&16)}var ane=function(){},one=ane;const lne=Tl(one),j3=()=>{};function cne(t){return t.button===0}function une(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}const f0=t=>t&&("current"in t?t.current:t),V3={click:"mousedown",mouseup:"mousedown",pointerup:"pointerdown"};function dne(t,e=j3,{disabled:n,clickTrigger:r="click"}={}){const i=A.useRef(!1),s=A.useRef(!1),a=A.useCallback(c=>{const u=f0(t);lne(!!u,"ClickOutside captured a close event but does not have a ref to compare it to. useClickOutside(), should be passed a ref that resolves to a DOM node"),i.current=!u||une(c)||!cne(c)||!!Yh(u,c.target)||s.current,s.current=!1},[t]),o=kr(c=>{const u=f0(t);u&&Yh(u,c.target)&&(s.current=!0)}),l=kr(c=>{i.current||e(c)});A.useEffect(()=>{var c,u;if(n||t==null)return;const d=$f(f0(t)),f=d.defaultView||window;let h=(c=f.event)!=null?c:(u=f.parent)==null?void 0:u.event,g=null;V3[r]&&(g=Qa(d,V3[r],o,!0));const y=Qa(d,r,a,!0),x=Qa(d,r,b=>{if(b===h){h=void 0;return}l(b)});let v=[];return"ontouchstart"in d.documentElement&&(v=[].slice.call(d.body.children).map(b=>Qa(b,"mousemove",j3))),()=>{g==null||g(),y(),x(),v.forEach(b=>b())}},[t,n,r,a,o,l])}function fne(t){const e={};return Array.isArray(t)?(t==null||t.forEach(n=>{e[n.name]=n}),e):t||e}function pne(t={}){return Array.isArray(t)?t:Object.keys(t).map(e=>(t[e].name=e,t[e]))}function hne({enabled:t,enableEvents:e,placement:n,flip:r,offset:i,fixed:s,containerPadding:a,arrowElement:o,popperConfig:l={}}){var c,u,d,f,h;const g=fne(l.modifiers);return Object.assign({},l,{placement:n,enabled:t,strategy:s?"fixed":l.strategy,modifiers:pne(Object.assign({},g,{eventListeners:{enabled:e,options:(c=g.eventListeners)==null?void 0:c.options},preventOverflow:Object.assign({},g.preventOverflow,{options:a?Object.assign({padding:a},(u=g.preventOverflow)==null?void 0:u.options):(d=g.preventOverflow)==null?void 0:d.options}),offset:{options:Object.assign({offset:i},(f=g.offset)==null?void 0:f.options)},arrow:Object.assign({},g.arrow,{enabled:!!o,options:Object.assign({},(h=g.arrow)==null?void 0:h.options,{element:o})}),flip:Object.assign({enabled:!!r},g.flip)}))})}const O$=A.createContext(null),w_=(t,e=null)=>t!=null?String(t):e||null,Bz=A.createContext(null);Bz.displayName="NavContext";const zz=Bz,mne="data-rr-ui-",gne="rrUi";function Mx(t){return`${mne}${t}`}function yne(t){return`${gne}${t}`}const jz=A.createContext(Ef?window:void 0);jz.Provider;function S_(){return A.useContext(jz)}const Vz=A.createContext(null);Vz.displayName="NavbarContext";const vne=Vz,xne={bsPrefix:ge.string,fluid:ge.bool,rounded:ge.bool,roundedCircle:ge.bool,thumbnail:ge.bool},Wz=A.forwardRef(({bsPrefix:t,className:e,fluid:n=!1,rounded:r=!1,roundedCircle:i=!1,thumbnail:s=!1,...a},o)=>(t=Qe(t,"img"),z.jsx("img",{ref:o,...a,className:We(e,n&&`${t}-fluid`,r&&"rounded",i&&"rounded-circle",s&&`${t}-thumbnail`)})));Wz.displayName="Image";const bne=Wz,k_=A.forwardRef(({className:t,fluid:e=!0,...n},r)=>z.jsx(bne,{ref:r,...n,fluid:e,className:We(t,"figure-img")}));k_.displayName="FigureImage";k_.propTypes=xne;const wne=k_,Uz=A.forwardRef(({className:t,bsPrefix:e,as:n="figcaption",...r},i)=>(e=Qe(e,"figure-caption"),z.jsx(n,{ref:i,className:We(t,e),...r})));Uz.displayName="FigureCaption";const Sne=Uz,Gz=A.forwardRef(({className:t,bsPrefix:e,as:n="figure",...r},i)=>(e=Qe(e,"figure"),z.jsx(n,{ref:i,className:We(t,e),...r})));Gz.displayName="Figure";const ir=Object.assign(Gz,{Image:wne,Caption:Sne}),kne={type:ge.string,tooltip:ge.bool,as:ge.elementType},C_=A.forwardRef(({as:t="div",className:e,type:n="valid",tooltip:r=!1,...i},s)=>z.jsx(t,{...i,ref:s,className:We(e,`${n}-${r?"tooltip":"feedback"}`)}));C_.displayName="Feedback";C_.propTypes=kne;const Hz=C_,Cne=A.createContext({}),lo=Cne,qz=A.forwardRef(({id:t,bsPrefix:e,className:n,type:r="checkbox",isValid:i=!1,isInvalid:s=!1,as:a="input",...o},l)=>{const{controlId:c}=A.useContext(lo);return e=Qe(e,"form-check-input"),z.jsx(a,{...o,ref:l,type:r,id:t||c,className:We(n,e,i&&"is-valid",s&&"is-invalid")})});qz.displayName="FormCheckInput";const Kz=qz,Xz=A.forwardRef(({bsPrefix:t,className:e,htmlFor:n,...r},i)=>{const{controlId:s}=A.useContext(lo);return t=Qe(t,"form-check-label"),z.jsx("label",{...r,ref:i,htmlFor:n||s,className:We(e,t)})});Xz.displayName="FormCheckLabel";const A$=Xz,Yz=A.forwardRef(({id:t,bsPrefix:e,bsSwitchPrefix:n,inline:r=!1,reverse:i=!1,disabled:s=!1,isValid:a=!1,isInvalid:o=!1,feedbackTooltip:l=!1,feedback:c,feedbackType:u,className:d,style:f,title:h="",type:g="checkbox",label:y,children:x,as:v="input",...b},S)=>{e=Qe(e,"form-check"),n=Qe(n,"form-switch");const{controlId:k}=A.useContext(lo),$=A.useMemo(()=>({controlId:t||k}),[k,t]),T=!x&&y!=null&&y!==!1||Hee(x,A$),_=z.jsx(Kz,{...b,type:g==="switch"?"checkbox":g,ref:S,isValid:a,isInvalid:o,disabled:s,as:v});return z.jsx(lo.Provider,{value:$,children:z.jsx("div",{style:f,className:We(d,T&&e,r&&`${e}-inline`,i&&`${e}-reverse`,g==="switch"&&n),children:x||z.jsxs(z.Fragment,{children:[_,T&&z.jsx(A$,{title:h,children:y}),c&&z.jsx(Hz,{type:u,tooltip:l,children:c})]})})})});Yz.displayName="FormCheck";const X0=Object.assign(Yz,{Input:Kz,Label:A$}),Qz=A.forwardRef(({bsPrefix:t,type:e,size:n,htmlSize:r,id:i,className:s,isValid:a=!1,isInvalid:o=!1,plaintext:l,readOnly:c,as:u="input",...d},f)=>{const{controlId:h}=A.useContext(lo);return t=Qe(t,"form-control"),z.jsx(u,{...d,type:e,size:r,ref:f,readOnly:c,id:i||h,className:We(s,l?`${t}-plaintext`:t,n&&`${t}-${n}`,e==="color"&&`${t}-color`,a&&"is-valid",o&&"is-invalid")})});Qz.displayName="FormControl";const $ne=Object.assign(Qz,{Feedback:Hz}),Zz=A.forwardRef(({className:t,bsPrefix:e,as:n="div",...r},i)=>(e=Qe(e,"form-floating"),z.jsx(n,{ref:i,className:We(t,e),...r})));Zz.displayName="FormFloating";const Ene=Zz,Jz=A.forwardRef(({controlId:t,as:e="div",...n},r)=>{const i=A.useMemo(()=>({controlId:t}),[t]);return z.jsx(lo.Provider,{value:i,children:z.jsx(e,{...n,ref:r})})});Jz.displayName="FormGroup";const e6=Jz,t6=A.forwardRef(({as:t="label",bsPrefix:e,column:n=!1,visuallyHidden:r=!1,className:i,htmlFor:s,...a},o)=>{const{controlId:l}=A.useContext(lo);e=Qe(e,"form-label");let c="col-form-label";typeof n=="string"&&(c=`${c} ${c}-${n}`);const u=We(i,e,r&&"visually-hidden",n&&c);return s=s||l,n?z.jsx(Lt,{ref:o,as:"label",className:u,htmlFor:s,...a}):z.jsx(t,{ref:o,className:u,htmlFor:s,...a})});t6.displayName="FormLabel";const Tne=t6,n6=A.forwardRef(({bsPrefix:t,className:e,id:n,...r},i)=>{const{controlId:s}=A.useContext(lo);return t=Qe(t,"form-range"),z.jsx("input",{...r,type:"range",ref:i,className:We(e,t),id:n||s})});n6.displayName="FormRange";const _ne=n6,r6=A.forwardRef(({bsPrefix:t,size:e,htmlSize:n,className:r,isValid:i=!1,isInvalid:s=!1,id:a,...o},l)=>{const{controlId:c}=A.useContext(lo);return t=Qe(t,"form-select"),z.jsx("select",{...o,size:n,ref:l,className:We(r,t,e&&`${t}-${e}`,i&&"is-valid",s&&"is-invalid"),id:a||c})});r6.displayName="FormSelect";const Ine=r6,i6=A.forwardRef(({bsPrefix:t,className:e,as:n="small",muted:r,...i},s)=>(t=Qe(t,"form-text"),z.jsx(n,{...i,ref:s,className:We(e,t,r&&"text-muted")})));i6.displayName="FormText";const Nne=i6,s6=A.forwardRef((t,e)=>z.jsx(X0,{...t,ref:e,type:"switch"}));s6.displayName="Switch";const Rne=Object.assign(s6,{Input:X0.Input,Label:X0.Label}),a6=A.forwardRef(({bsPrefix:t,className:e,children:n,controlId:r,label:i,...s},a)=>(t=Qe(t,"form-floating"),z.jsxs(e6,{ref:a,className:We(e,t),controlId:r,...s,children:[n,z.jsx("label",{htmlFor:r,children:i})]})));a6.displayName="FloatingLabel";const One=a6,Ane={_ref:ge.any,validated:ge.bool,as:ge.elementType},$_=A.forwardRef(({className:t,validated:e,as:n="form",...r},i)=>z.jsx(n,{...r,ref:i,className:We(t,e&&"was-validated")}));$_.displayName="Form";$_.propTypes=Ane;const pc=Object.assign($_,{Group:e6,Control:$ne,Floating:Ene,Check:X0,Switch:Rne,Label:Tne,Text:Nne,Range:_ne,Select:Ine,FloatingLabel:One}),Pne=A.createContext(null),o6=Pne,Dne=["as","active","eventKey"];function Fne(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function l6({key:t,onClick:e,active:n,id:r,role:i,disabled:s}){const a=A.useContext(O$),o=A.useContext(zz),l=A.useContext(o6);let c=n;const u={role:i};if(o){!i&&o.role==="tablist"&&(u.role="tab");const d=o.getControllerId(t??null),f=o.getControlledId(t??null);u[Mx("event-key")]=t,u.id=d||r,c=n==null&&t!=null?o.activeKey===t:n,(c||!(l!=null&&l.unmountOnExit)&&!(l!=null&&l.mountOnEnter))&&(u["aria-controls"]=f)}return u.role==="tab"&&(u["aria-selected"]=c,c||(u.tabIndex=-1),s&&(u.tabIndex=-1,u["aria-disabled"]=!0)),u.onClick=kr(d=>{s||(e==null||e(d),t!=null&&a&&!d.isPropagationStopped()&&a(t,d))}),[u,{isActive:c}]}const c6=A.forwardRef((t,e)=>{let{as:n=xz,active:r,eventKey:i}=t,s=Fne(t,Dne);const[a,o]=l6(Object.assign({key:w_(i,s.href),active:r},s));return a[Mx("active")]=o.isActive,z.jsx(n,Object.assign({},s,a,{ref:e}))});c6.displayName="NavItem";const Lne=c6,Mne=["as","onSelect","activeKey","role","onKeyDown"];function Bne(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}const W3=()=>{},U3=Mx("event-key"),u6=A.forwardRef((t,e)=>{let{as:n="div",onSelect:r,activeKey:i,role:s,onKeyDown:a}=t,o=Bne(t,Mne);const l=Yee(),c=A.useRef(!1),u=A.useContext(O$),d=A.useContext(o6);let f,h;d&&(s=s||"tablist",i=d.activeKey,f=d.getControlledId,h=d.getControllerId);const g=A.useRef(null),y=S=>{const k=g.current;if(!k)return null;const $=oc(k,`[${U3}]:not([aria-disabled=true])`),T=k.querySelector("[aria-selected=true]");if(!T||T!==document.activeElement)return null;const _=$.indexOf(T);if(_===-1)return null;let R=_+S;return R>=$.length&&(R=0),R<0&&(R=$.length-1),$[R]},x=(S,k)=>{S!=null&&(r==null||r(S,k),u==null||u(S,k))},v=S=>{if(a==null||a(S),!d)return;let k;switch(S.key){case"ArrowLeft":case"ArrowUp":k=y(-1);break;case"ArrowRight":case"ArrowDown":k=y(1);break;default:return}k&&(S.preventDefault(),x(k.dataset[yne("EventKey")]||null,S),c.current=!0,l())};A.useEffect(()=>{if(g.current&&c.current){const S=g.current.querySelector(`[${U3}][aria-selected=true]`);S==null||S.focus()}c.current=!1});const b=bo(e,g);return z.jsx(O$.Provider,{value:x,children:z.jsx(zz.Provider,{value:{role:s,activeKey:w_(i),getControlledId:f||W3,getControllerId:h||W3},children:z.jsx(n,Object.assign({},o,{onKeyDown:v,ref:b,role:s}))})})});u6.displayName="Nav";const zne=Object.assign(u6,{Item:Lne});var Nv;function G3(t){if((!Nv&&Nv!==0||t)&&Ef){var e=document.createElement("div");e.style.position="absolute",e.style.top="-9999px",e.style.width="50px",e.style.height="50px",e.style.overflow="scroll",document.body.appendChild(e),Nv=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return Nv}function Ik(t){t===void 0&&(t=$f());try{var e=t.activeElement;return!e||!e.nodeName?null:e}catch{return t.body}}function jne(t=document){const e=t.defaultView;return Math.abs(e.innerWidth-t.documentElement.clientWidth)}const H3=Mx("modal-open");class Vne{constructor({ownerDocument:e,handleContainerOverflow:n=!0,isRTL:r=!1}={}){this.handleContainerOverflow=n,this.isRTL=r,this.modals=[],this.ownerDocument=e}getScrollbarWidth(){return jne(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(e){}removeModalAttributes(e){}setContainerStyle(e){const n={overflow:"hidden"},r=this.isRTL?"paddingLeft":"paddingRight",i=this.getElement();e.style={overflow:i.style.overflow,[r]:i.style[r]},e.scrollBarWidth&&(n[r]=`${parseInt(eo(i,r)||"0",10)+e.scrollBarWidth}px`),i.setAttribute(H3,""),eo(i,n)}reset(){[...this.modals].forEach(e=>this.remove(e))}removeContainerStyle(e){const n=this.getElement();n.removeAttribute(H3),Object.assign(n.style,e.style)}add(e){let n=this.modals.indexOf(e);return n!==-1||(n=this.modals.length,this.modals.push(e),this.setModalAttributes(e),n!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),n}remove(e){const n=this.modals.indexOf(e);n!==-1&&(this.modals.splice(n,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}isTopModal(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}}const E_=Vne,Nk=(t,e)=>Ef?t==null?(e||$f()).body:(typeof t=="function"&&(t=t()),t&&"current"in t&&(t=t.current),t&&("nodeType"in t||t.getBoundingClientRect)?t:null):null;function P$(t,e){const n=S_(),[r,i]=A.useState(()=>Nk(t,n==null?void 0:n.document));if(!r){const s=Nk(t);s&&i(s)}return A.useEffect(()=>{e&&r&&e(r)},[e,r]),A.useEffect(()=>{const s=Nk(t);s!==r&&i(s)},[t,r]),r}function Wne({children:t,in:e,onExited:n,mountOnEnter:r,unmountOnExit:i}){const s=A.useRef(null),a=A.useRef(e),o=kr(n);A.useEffect(()=>{e?a.current=!0:o(s.current)},[e,o]);const l=bo(s,t.ref),c=A.cloneElement(t,{ref:l});return e?c:i||!a.current&&r?null:c}const Une=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];function Gne(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Hne(t){let{onEnter:e,onEntering:n,onEntered:r,onExit:i,onExiting:s,onExited:a,addEndListener:o,children:l}=t,c=Gne(t,Une);const u=A.useRef(null),d=bo(u,typeof l=="function"?null:l.ref),f=k=>$=>{k&&u.current&&k(u.current,$)},h=A.useCallback(f(e),[e]),g=A.useCallback(f(n),[n]),y=A.useCallback(f(r),[r]),x=A.useCallback(f(i),[i]),v=A.useCallback(f(s),[s]),b=A.useCallback(f(a),[a]),S=A.useCallback(f(o),[o]);return Object.assign({},c,{nodeRef:u},e&&{onEnter:h},n&&{onEntering:g},r&&{onEntered:y},i&&{onExit:x},s&&{onExiting:v},a&&{onExited:b},o&&{addEndListener:S},{children:typeof l=="function"?(k,$)=>l(k,Object.assign({},$,{ref:d})):A.cloneElement(l,{ref:d})})}const qne=["component"];function Kne(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}const Xne=A.forwardRef((t,e)=>{let{component:n}=t,r=Kne(t,qne);const i=Hne(r);return z.jsx(n,Object.assign({ref:e},i))}),Yne=Xne;function Qne({in:t,onTransition:e}){const n=A.useRef(null),r=A.useRef(!0),i=kr(e);return _$(()=>{if(!n.current)return;let s=!1;return i({in:t,element:n.current,initial:r.current,isStale:()=>s}),()=>{s=!0}},[t,i]),_$(()=>(r.current=!1,()=>{r.current=!0}),[]),n}function Zne({children:t,in:e,onExited:n,onEntered:r,transition:i}){const[s,a]=A.useState(!e);e&&s&&a(!1);const o=Qne({in:!!e,onTransition:c=>{const u=()=>{c.isStale()||(c.in?r==null||r(c.element,c.initial):(a(!0),n==null||n(c.element)))};Promise.resolve(i(c)).then(u,d=>{throw c.in||a(!0),d})}}),l=bo(o,t.ref);return s&&!e?null:A.cloneElement(t,{ref:l})}function D$(t,e,n){return t?z.jsx(Yne,Object.assign({},n,{component:t})):e?z.jsx(Zne,Object.assign({},n,{transition:e})):z.jsx(Wne,Object.assign({},n))}function d6(t){return t.code==="Escape"||t.keyCode===27}const Jne=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function ere(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}let Rk;function tre(t){return Rk||(Rk=new E_({ownerDocument:t==null?void 0:t.document})),Rk}function nre(t){const e=S_(),n=t||tre(e),r=A.useRef({dialog:null,backdrop:null});return Object.assign(r.current,{add:()=>n.add(r.current),remove:()=>n.remove(r.current),isTopModal:()=>n.isTopModal(r.current),setDialogRef:A.useCallback(i=>{r.current.dialog=i},[]),setBackdropRef:A.useCallback(i=>{r.current.backdrop=i},[])})}const f6=A.forwardRef((t,e)=>{let{show:n=!1,role:r="dialog",className:i,style:s,children:a,backdrop:o=!0,keyboard:l=!0,onBackdropClick:c,onEscapeKeyDown:u,transition:d,runTransition:f,backdropTransition:h,runBackdropTransition:g,autoFocus:y=!0,enforceFocus:x=!0,restoreFocus:v=!0,restoreFocusOptions:b,renderDialog:S,renderBackdrop:k=Be=>z.jsx("div",Object.assign({},Be)),manager:$,container:T,onShow:_,onHide:R=()=>{},onExit:P,onExited:O,onExiting:B,onEnter:H,onEntering:V,onEntered:K}=t,X=ere(t,Jne);const q=S_(),te=P$(T),j=nre($),Y=u_(),Q=Iee(n),[ne,le]=A.useState(!n),ue=A.useRef(null);A.useImperativeHandle(e,()=>j,[j]),Ef&&!Q&&n&&(ue.current=Ik(q==null?void 0:q.document)),n&&ne&&le(!1);const de=kr(()=>{if(j.add(),De.current=Qa(document,"keydown",we),$e.current=Qa(document,"focus",()=>setTimeout(me),!0),_&&_(),y){var Be,et;const lt=Ik((Be=(et=j.dialog)==null?void 0:et.ownerDocument)!=null?Be:q==null?void 0:q.document);j.dialog&&lt&&!Yh(j.dialog,lt)&&(ue.current=lt,j.dialog.focus())}}),pe=kr(()=>{if(j.remove(),De.current==null||De.current(),$e.current==null||$e.current(),v){var Be;(Be=ue.current)==null||Be.focus==null||Be.focus(b),ue.current=null}});A.useEffect(()=>{!n||!te||de()},[n,te,de]),A.useEffect(()=>{ne&&pe()},[ne,pe]),p_(()=>{pe()});const me=kr(()=>{if(!x||!Y()||!j.isTopModal())return;const Be=Ik(q==null?void 0:q.document);j.dialog&&Be&&!Yh(j.dialog,Be)&&j.dialog.focus()}),ie=kr(Be=>{Be.target===Be.currentTarget&&(c==null||c(Be),o===!0&&R())}),we=kr(Be=>{l&&d6(Be)&&j.isTopModal()&&(u==null||u(Be),Be.defaultPrevented||R())}),$e=A.useRef(),De=A.useRef(),Oe=(...Be)=>{le(!0),O==null||O(...Be)};if(!te)return null;const Ue=Object.assign({role:r,ref:j.setDialogRef,"aria-modal":r==="dialog"?!0:void 0},X,{style:s,className:i,tabIndex:-1});let je=S?S(Ue):z.jsx("div",Object.assign({},Ue,{children:A.cloneElement(a,{role:"document"})}));je=D$(d,f,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!n,onExit:P,onExiting:B,onExited:Oe,onEnter:H,onEntering:V,onEntered:K,children:je});let Ye=null;return o&&(Ye=k({ref:j.setBackdropRef,onClick:ie}),Ye=D$(h,g,{in:!!n,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:Ye})),z.jsx(z.Fragment,{children:xc.createPortal(z.jsxs(z.Fragment,{children:[Ye,je]}),te)})});f6.displayName="Modal";const rre=Object.assign(f6,{Manager:E_});function F$(t,e){return t.classList?!!e&&t.classList.contains(e):(" "+(t.className.baseVal||t.className)+" ").indexOf(" "+e+" ")!==-1}function ire(t,e){t.classList?t.classList.add(e):F$(t,e)||(typeof t.className=="string"?t.className=t.className+" "+e:t.setAttribute("class",(t.className&&t.className.baseVal||"")+" "+e))}function q3(t,e){return t.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function sre(t,e){t.classList?t.classList.remove(e):typeof t.className=="string"?t.className=q3(t.className,e):t.setAttribute("class",q3(t.className&&t.className.baseVal||"",e))}const Vu={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class are extends E_{adjustAndStore(e,n,r){const i=n.style[e];n.dataset[e]=i,eo(n,{[e]:`${parseFloat(eo(n,e))+r}px`})}restore(e,n){const r=n.dataset[e];r!==void 0&&(delete n.dataset[e],eo(n,{[e]:r}))}setContainerStyle(e){super.setContainerStyle(e);const n=this.getElement();if(ire(n,"modal-open"),!e.scrollBarWidth)return;const r=this.isRTL?"paddingLeft":"paddingRight",i=this.isRTL?"marginLeft":"marginRight";oc(n,Vu.FIXED_CONTENT).forEach(s=>this.adjustAndStore(r,s,e.scrollBarWidth)),oc(n,Vu.STICKY_CONTENT).forEach(s=>this.adjustAndStore(i,s,-e.scrollBarWidth)),oc(n,Vu.NAVBAR_TOGGLER).forEach(s=>this.adjustAndStore(i,s,e.scrollBarWidth))}removeContainerStyle(e){super.removeContainerStyle(e);const n=this.getElement();sre(n,"modal-open");const r=this.isRTL?"paddingLeft":"paddingRight",i=this.isRTL?"marginLeft":"marginRight";oc(n,Vu.FIXED_CONTENT).forEach(s=>this.restore(r,s)),oc(n,Vu.STICKY_CONTENT).forEach(s=>this.restore(i,s)),oc(n,Vu.NAVBAR_TOGGLER).forEach(s=>this.restore(i,s))}}let Ok;function ore(t){return Ok||(Ok=new are(t)),Ok}const p6=A.forwardRef(({className:t,bsPrefix:e,as:n="div",...r},i)=>(e=Qe(e,"modal-body"),z.jsx(n,{ref:i,className:We(t,e),...r})));p6.displayName="ModalBody";const lre=p6,cre=A.createContext({onHide(){}}),h6=cre,m6=A.forwardRef(({bsPrefix:t,className:e,contentClassName:n,centered:r,size:i,fullscreen:s,children:a,scrollable:o,...l},c)=>{t=Qe(t,"modal");const u=`${t}-dialog`,d=typeof s=="string"?`${t}-fullscreen-${s}`:`${t}-fullscreen`;return z.jsx("div",{...l,ref:c,className:We(u,e,i&&`${t}-${i}`,r&&`${u}-centered`,o&&`${u}-scrollable`,s&&d),children:z.jsx("div",{className:We(`${t}-content`,n),children:a})})});m6.displayName="ModalDialog";const g6=m6,y6=A.forwardRef(({className:t,bsPrefix:e,as:n="div",...r},i)=>(e=Qe(e,"modal-footer"),z.jsx(n,{ref:i,className:We(t,e),...r})));y6.displayName="ModalFooter";const ure=y6,dre=A.forwardRef(({closeLabel:t="Close",closeVariant:e,closeButton:n=!1,onHide:r,children:i,...s},a)=>{const o=A.useContext(h6),l=kr(()=>{o==null||o.onHide(),r==null||r()});return z.jsxs("div",{ref:a,...s,children:[i,n&&z.jsx(jee,{"aria-label":t,variant:e,onClick:l})]})}),fre=dre,v6=A.forwardRef(({bsPrefix:t,className:e,closeLabel:n="Close",closeButton:r=!1,...i},s)=>(t=Qe(t,"modal-header"),z.jsx(fre,{ref:s,...i,className:We(e,t),closeLabel:n,closeButton:r})));v6.displayName="ModalHeader";const pre=v6,hre=_ee("h4"),x6=A.forwardRef(({className:t,bsPrefix:e,as:n=hre,...r},i)=>(e=Qe(e,"modal-title"),z.jsx(n,{ref:i,className:We(t,e),...r})));x6.displayName="ModalTitle";const mre=x6;function gre(t){return z.jsx(q0,{...t,timeout:null})}function yre(t){return z.jsx(q0,{...t,timeout:null})}const b6=A.forwardRef(({bsPrefix:t,className:e,style:n,dialogClassName:r,contentClassName:i,children:s,dialogAs:a=g6,"data-bs-theme":o,"aria-labelledby":l,"aria-describedby":c,"aria-label":u,show:d=!1,animation:f=!0,backdrop:h=!0,keyboard:g=!0,onEscapeKeyDown:y,onShow:x,onHide:v,container:b,autoFocus:S=!0,enforceFocus:k=!0,restoreFocus:$=!0,restoreFocusOptions:T,onEntered:_,onExit:R,onExiting:P,onEnter:O,onEntering:B,onExited:H,backdropClassName:V,manager:K,...X},q)=>{const[te,j]=A.useState({}),[Y,Q]=A.useState(!1),ne=A.useRef(!1),le=A.useRef(!1),ue=A.useRef(null),[de,pe]=T$(),me=bo(q,pe),ie=kr(v),we=l_();t=Qe(t,"modal");const $e=A.useMemo(()=>({onHide:ie}),[ie]);function De(){return K||ore({isRTL:we})}function Oe(He){if(!Ef)return;const bn=De().getScrollbarWidth()>0,dr=He.scrollHeight>$f(He).documentElement.clientHeight;j({paddingRight:bn&&!dr?G3():void 0,paddingLeft:!bn&&dr?G3():void 0})}const Ue=kr(()=>{de&&Oe(de.dialog)});p_(()=>{E$(window,"resize",Ue),ue.current==null||ue.current()});const je=()=>{ne.current=!0},Ye=He=>{ne.current&&de&&He.target===de.dialog&&(le.current=!0),ne.current=!1},Be=()=>{Q(!0),ue.current=iz(de.dialog,()=>{Q(!1)})},et=He=>{He.target===He.currentTarget&&Be()},lt=He=>{if(h==="static"){et(He);return}if(le.current||He.target!==He.currentTarget){le.current=!1;return}v==null||v()},wt=He=>{g?y==null||y(He):(He.preventDefault(),h==="static"&&Be())},Or=(He,bn)=>{He&&Oe(He),O==null||O(He,bn)},ct=He=>{ue.current==null||ue.current(),R==null||R(He)},Zn=(He,bn)=>{B==null||B(He,bn),rz(window,"resize",Ue)},xn=He=>{He&&(He.style.display=""),H==null||H(He),E$(window,"resize",Ue)},Wr=A.useCallback(He=>z.jsx("div",{...He,className:We(`${t}-backdrop`,V,!f&&"show")}),[f,V,t]),qt={...n,...te};qt.display="block";const ur=He=>z.jsx("div",{role:"dialog",...He,style:qt,className:We(e,t,Y&&`${t}-static`,!f&&"show"),onClick:h?lt:void 0,onMouseUp:Ye,"data-bs-theme":o,"aria-label":u,"aria-labelledby":l,"aria-describedby":c,children:z.jsx(a,{...X,onMouseDown:je,className:r,contentClassName:i,children:s})});return z.jsx(h6.Provider,{value:$e,children:z.jsx(rre,{show:d,ref:me,backdrop:h,container:b,keyboard:!0,autoFocus:S,enforceFocus:k,restoreFocus:$,restoreFocusOptions:T,onEscapeKeyDown:wt,onShow:x,onHide:v,onEnter:Or,onEntering:Zn,onEntered:_,onExit:ct,onExiting:P,onExited:xn,manager:De(),transition:f?gre:void 0,backdropTransition:f?yre:void 0,renderBackdrop:Wr,renderDialog:ur})})});b6.displayName="Modal";const Rv=Object.assign(b6,{Body:lre,Header:pre,Title:mre,Footer:ure,Dialog:g6,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150});var K3={exports:{}},L$={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;function n(r){function i(a,o,l,c,u,d){var f=c||"<<anonymous>>",h=d||l;if(o[l]==null)return a?new Error("Required "+u+" `"+h+"` was not specified "+("in `"+f+"`.")):null;for(var g=arguments.length,y=Array(g>6?g-6:0),x=6;x<g;x++)y[x-6]=arguments[x];return r.apply(void 0,[o,l,f,u,h].concat(y))}var s=i.bind(null,!1);return s.isRequired=i.bind(null,!0),s}t.exports=e.default})(L$,L$.exports);var vre=L$.exports;(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var n=vre,r=i(n);function i(a){return a&&a.__esModule?a:{default:a}}function s(){for(var a=arguments.length,o=Array(a),l=0;l<a;l++)o[l]=arguments[l];function c(){for(var u=arguments.length,d=Array(u),f=0;f<u;f++)d[f]=arguments[f];var h=null;return o.forEach(function(g){if(h==null){var y=g.apply(void 0,d);y!=null&&(h=y)}}),h}return(0,r.default)(c)}t.exports=e.default})(K3,K3.exports);const w6=A.forwardRef(({className:t,bsPrefix:e,as:n="div",...r},i)=>(e=Qe(e,"nav-item"),z.jsx(n,{ref:i,className:We(t,e),...r})));w6.displayName="NavItem";const xre=w6,S6=A.forwardRef(({bsPrefix:t,className:e,as:n=Mee,active:r,eventKey:i,disabled:s=!1,...a},o)=>{t=Qe(t,"nav-link");const[l,c]=l6({key:w_(i,a.href),active:r,disabled:s,...a});return z.jsx(n,{...a,...l,ref:o,disabled:s,className:We(e,t,s&&"disabled",c.isActive&&"active")})});S6.displayName="NavLink";const bre=S6,k6=A.forwardRef((t,e)=>{const{as:n="div",bsPrefix:r,variant:i,fill:s=!1,justify:a=!1,navbar:o,navbarScroll:l,className:c,activeKey:u,...d}=XB(t,{activeKey:"onSelect"}),f=Qe(r,"nav");let h,g,y=!1;const x=A.useContext(vne),v=A.useContext(Wee);return x?(h=x.bsPrefix,y=o??!0):v&&({cardHeaderBsPrefix:g}=v),z.jsx(zne,{as:n,ref:e,activeKey:u,className:We(c,{[f]:!y,[`${h}-nav`]:y,[`${h}-nav-scroll`]:y&&l,[`${g}-${i}`]:!!g,[`${f}-${i}`]:!!i,[`${f}-fill`]:s,[`${f}-justified`]:a}),...d})});k6.displayName="Nav";const Y0=Object.assign(k6,{Item:xre,Link:bre}),wre=()=>{};function Sre(t,e,{disabled:n,clickTrigger:r}={}){const i=e||wre;dne(t,i,{disabled:n,clickTrigger:r});const s=kr(a=>{d6(a)&&i(a)});A.useEffect(()=>{if(n||t==null)return;const a=$f(f0(t));let o=(a.defaultView||window).event;const l=Qa(a,"keyup",c=>{if(c===o){o=void 0;return}s(c)});return()=>{l()}},[t,n,s])}const C6=A.forwardRef((t,e)=>{const{flip:n,offset:r,placement:i,containerPadding:s,popperConfig:a={},transition:o,runTransition:l}=t,[c,u]=T$(),[d,f]=T$(),h=bo(u,e),g=P$(t.container),y=P$(t.target),[x,v]=A.useState(!t.show),b=sne(y,c,hne({placement:i,enableEvents:!!t.show,containerPadding:s||5,flip:n,offset:r,arrowElement:d,popperConfig:a}));t.show&&x&&v(!1);const S=(...B)=>{v(!0),t.onExited&&t.onExited(...B)},k=t.show||!x;if(Sre(c,t.onHide,{disabled:!t.rootClose||t.rootCloseDisabled,clickTrigger:t.rootCloseEvent}),!k)return null;const{onExit:$,onExiting:T,onEnter:_,onEntering:R,onEntered:P}=t;let O=t.children(Object.assign({},b.attributes.popper,{style:b.styles.popper,ref:h}),{popper:b,placement:i,show:!!t.show,arrowProps:Object.assign({},b.attributes.arrow,{style:b.styles.arrow,ref:f})});return O=D$(o,l,{in:!!t.show,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:O,onExit:$,onExiting:T,onExited:S,onEnter:_,onEntering:R,onEntered:P}),g?xc.createPortal(O,g):null});C6.displayName="Overlay";const kre=C6,$6=A.forwardRef(({className:t,bsPrefix:e,as:n="div",...r},i)=>(e=Qe(e,"popover-header"),z.jsx(n,{ref:i,className:We(t,e),...r})));$6.displayName="PopoverHeader";const Cre=$6,E6=A.forwardRef(({className:t,bsPrefix:e,as:n="div",...r},i)=>(e=Qe(e,"popover-body"),z.jsx(n,{ref:i,className:We(t,e),...r})));E6.displayName="PopoverBody";const T6=E6;function _6(t,e){let n=t;return t==="left"?n=e?"end":"start":t==="right"&&(n=e?"start":"end"),n}function I6(t="absolute"){return{position:t,top:"0",left:"0",opacity:"0",pointerEvents:"none"}}const $re=A.forwardRef(({bsPrefix:t,placement:e="right",className:n,style:r,children:i,body:s,arrowProps:a,hasDoneInitialMeasure:o,popper:l,show:c,...u},d)=>{const f=Qe(t,"popover"),h=l_(),[g]=(e==null?void 0:e.split("-"))||[],y=_6(g,h);let x=r;return c&&!o&&(x={...r,...I6(l==null?void 0:l.strategy)}),z.jsxs("div",{ref:d,role:"tooltip",style:x,"x-placement":g,className:We(n,f,g&&`bs-popover-${y}`),...u,children:[z.jsx("div",{className:"popover-arrow",...a}),s?z.jsx(T6,{children:i}):i]})}),Ere=Object.assign($re,{Header:Cre,Body:T6,POPPER_OFFSET:[0,8]}),N6=A.forwardRef(({bsPrefix:t,placement:e="right",className:n,style:r,children:i,arrowProps:s,hasDoneInitialMeasure:a,popper:o,show:l,...c},u)=>{t=Qe(t,"tooltip");const d=l_(),[f]=(e==null?void 0:e.split("-"))||[],h=_6(f,d);let g=r;return l&&!a&&(g={...r,...I6(o==null?void 0:o.strategy)}),z.jsxs("div",{ref:u,style:g,role:"tooltip","x-placement":f,className:We(n,t,`bs-tooltip-${h}`),...c,children:[z.jsx("div",{className:"tooltip-arrow",...s}),z.jsx("div",{className:`${t}-inner`,children:i})]})});N6.displayName="Tooltip";const Q0=Object.assign(N6,{TOOLTIP_OFFSET:[0,6]});function Tre(t){const e=A.useRef(null),n=Qe(void 0,"popover"),r=Qe(void 0,"tooltip"),i=A.useMemo(()=>({name:"offset",options:{offset:()=>{if(t)return t;if(e.current){if(F$(e.current,n))return Ere.POPPER_OFFSET;if(F$(e.current,r))return Q0.TOOLTIP_OFFSET}return[0,0]}}}),[t,n,r]);return[e,[i]]}function _re(t,e){const{ref:n}=t,{ref:r}=e;t.ref=n.__wrapped||(n.__wrapped=i=>n(H0(i))),e.ref=r.__wrapped||(r.__wrapped=i=>r(H0(i)))}const R6=A.forwardRef(({children:t,transition:e=q0,popperConfig:n={},rootClose:r=!1,placement:i="top",show:s=!1,...a},o)=>{const l=A.useRef({}),[c,u]=A.useState(null),[d,f]=Tre(a.offset),h=bo(o,d),g=e===!0?q0:e||void 0,y=kr(x=>{u(x),n==null||n.onFirstUpdate==null||n.onFirstUpdate(x)});return _$(()=>{c&&a.target&&(l.current.scheduleUpdate==null||l.current.scheduleUpdate())},[c,a.target]),A.useEffect(()=>{s||u(null)},[s]),z.jsx(kre,{...a,ref:h,popperConfig:{...n,modifiers:f.concat(n.modifiers||[]),onFirstUpdate:y},transition:g,rootClose:r,placement:i,show:s,children:(x,{arrowProps:v,popper:b,show:S})=>{var k,$;_re(x,v);const T=b==null?void 0:b.placement,_=Object.assign(l.current,{state:b==null?void 0:b.state,scheduleUpdate:b==null?void 0:b.update,placement:T,outOfBoundaries:(b==null||(k=b.state)==null||($=k.modifiersData.hide)==null?void 0:$.isReferenceHidden)||!1,strategy:n.strategy}),R=!!c;return typeof t=="function"?t({...x,placement:T,show:S,...!e&&S&&{className:"show"},popper:_,arrowProps:v,hasDoneInitialMeasure:R}):A.cloneElement(t,{...x,placement:T,arrowProps:v,popper:_,hasDoneInitialMeasure:R,className:We(t.props.className,!e&&S&&"show"),style:{...t.props.style,...x.style}})}})});R6.displayName="Overlay";const Ire=R6;function Nre(t){return t&&typeof t=="object"?t:{show:t,hide:t}}function X3(t,e,n){const[r]=e,i=r.currentTarget,s=r.relatedTarget||r.nativeEvent[n];(!s||s!==i)&&!Yh(i,s)&&t(...e)}ge.oneOf(["click","hover","focus"]);const Rre=({trigger:t=["hover","focus"],overlay:e,children:n,popperConfig:r={},show:i,defaultShow:s=!1,onToggle:a,delay:o,placement:l,flip:c=l&&l.indexOf("auto")!==-1,...u})=>{const d=A.useRef(null),f=bo(d,n.ref),h=Gee(),g=A.useRef(""),[y,x]=KB(i,s,a),v=Nre(o),{onFocus:b,onBlur:S,onClick:k}=typeof n!="function"?A.Children.only(n).props:{},$=X=>{f(H0(X))},T=A.useCallback(()=>{if(h.clear(),g.current="show",!v.show){x(!0);return}h.set(()=>{g.current==="show"&&x(!0)},v.show)},[v.show,x,h]),_=A.useCallback(()=>{if(h.clear(),g.current="hide",!v.hide){x(!1);return}h.set(()=>{g.current==="hide"&&x(!1)},v.hide)},[v.hide,x,h]),R=A.useCallback((...X)=>{T(),b==null||b(...X)},[T,b]),P=A.useCallback((...X)=>{_(),S==null||S(...X)},[_,S]),O=A.useCallback((...X)=>{x(!y),k==null||k(...X)},[k,x,y]),B=A.useCallback((...X)=>{X3(T,X,"fromElement")},[T]),H=A.useCallback((...X)=>{X3(_,X,"toElement")},[_]),V=t==null?[]:[].concat(t),K={ref:$};return V.indexOf("click")!==-1&&(K.onClick=O),V.indexOf("focus")!==-1&&(K.onFocus=R,K.onBlur=P),V.indexOf("hover")!==-1&&(K.onMouseOver=B,K.onMouseOut=H),z.jsxs(z.Fragment,{children:[typeof n=="function"?n(K):A.cloneElement(n,K),z.jsx(Ire,{...u,show:y,onHide:_,flip:c,placement:l,popperConfig:r,target:d.current,children:e})]})},M$=Rre,O6=A.forwardRef(({bsPrefix:t,className:e,as:n="div",...r},i)=>{const s=Qe(t,"row"),a=YB(),o=QB(),l=`${s}-cols`,c=[];return a.forEach(u=>{const d=r[u];delete r[u];let f;d!=null&&typeof d=="object"?{cols:f}=d:f=d;const h=u!==o?`-${u}`:"";f!=null&&c.push(`${l}${h}-${f}`)}),z.jsx(n,{ref:i,...r,className:We(e,s,...c)})});O6.displayName="Row";const ui=O6,Ore="_darkTheme_1ta5l_3",Are="_lightTheme_1ta5l_8",Pre="_greyTheme_1ta5l_13",Dre="_whiteTheme_1ta5l_18",Fre="_contrastTheme_1ta5l_23",Lre="_transparentTheme_1ta5l_28",Mre="_transparentDarkColorTheme_1ta5l_33",Lr={darkTheme:Ore,lightTheme:Are,greyTheme:Pre,whiteTheme:Dre,contrastTheme:Fre,transparentTheme:Lre,transparentDarkColorTheme:Mre},Bre="_absoluteCenter_1hmkt_1",zre="_fromStartBottom_1hmkt_8",jre="_fromTopCenter_1hmkt_15",Vre="_fromBottomCenter_1hmkt_22",Wre="_wrapTrue_1hmkt_41",Ure="_wrapFalse_1hmkt_45",Ct={absoluteCenter:Bre,fromStartBottom:zre,fromTopCenter:jre,fromBottomCenter:Vre,"text-center":"_text-center_1hmkt_29","text-left":"_text-left_1hmkt_33","text-right":"_text-right_1hmkt_37",wrapTrue:Wre,wrapFalse:Ure},Gre="_height5_1y4pq_1",Hre="_height10_1y4pq_5",qre="_height50_1y4pq_9",Kre="_height80_1y4pq_13",Xre="_height90_1y4pq_17",Yre="_height100_1y4pq_21",Qre="_width2_5_1y4pq_25",Zre="_width5_1y4pq_33",Jre="_width10_1y4pq_37",eie="_width25_1y4pq_41",tie="_width50_1y4pq_45",nie="_width80_1y4pq_49",rie="_width100_1y4pq_53",iie="_widthLogo_1y4pq_57",Jt={height5:Gre,height10:Hre,height50:qre,height80:Kre,height90:Xre,height100:Yre,width2_5:Qre,"width-fit":"_width-fit_1y4pq_29",width5:Zre,width10:Jre,width25:eie,width50:tie,width80:nie,width100:rie,widthLogo:iie,"mx-h-30vh":"_mx-h-30vh_1y4pq_61","mx-h-40vh":"_mx-h-40vh_1y4pq_65","min-h-35vh":"_min-h-35vh_1y4pq_69"},sie=({children:t})=>z.jsxs("header",{className:[Lr.darkTheme,Ct.fromStartBottom,Jt.height100,"p-0"].join(" "),children:[z.jsx(Lt,{xs:"auto",className:[Jt.widthLogo,Jt.height100,Ct.absoluteCenter].join(" ")}),z.jsx(Lt,{children:t})]}),aie="_relative_mj6jg_1",oie="_absolute_mj6jg_5",lie="_top0_mj6jg_9",cie="_left0_mj6jg_13",uie="_bottom0_mj6jg_17",die="_right0_mj6jg_21",fie="_verticalCenter_mj6jg_25",pie="_horizontalCenter_mj6jg_30",hie="_zIndex0_mj6jg_35",mie="_zIndex1_mj6jg_39",gie="_zIndex2_mj6jg_43",yie="_zIndex3_mj6jg_47",Dr={relative:aie,absolute:oie,top0:lie,left0:cie,bottom0:uie,right0:die,verticalCenter:fie,horizontalCenter:pie,zIndex0:hie,zIndex1:mie,zIndex2:gie,zIndex3:yie},vie="_p0_2x03i_1",xie="_p05em_2x03i_5",bie="_ml1rem_2x03i_9",wie="_pl1rem_2x03i_13",Sie="_pr1rem_2x03i_17",kie="_pt1rem_2x03i_21",Cie="_mt1rem_2x03i_25",Ds={p0:vie,p05em:xie,ml1rem:bie,pl1rem:wie,pr1rem:Sie,pt1rem:kie,mt1rem:Cie},$ie="_auto_1cmfq_1",Eie="_hide_1cmfq_13",A6={auto:$ie,"auto-y":"_auto-y_1cmfq_5","auto-x":"_auto-x_1cmfq_9",hide:Eie},Tie=({header:t,navBar:e,settingBar:n,children:r,footer:i})=>z.jsxs(Kee,{fluid:!0,className:[Jt.height100,A6.hide].join(" "),children:[z.jsx(ui,{xs:12,className:[Jt.height5,Dr.relative,Dr.zIndex1,Ds.mt1rem].join(" "),children:t}),z.jsxs(ui,{xs:12,className:[Jt.height90,Dr.relative,Dr.zIndex1].join(" "),children:[z.jsx(Lt,{xs:"auto",className:[Lr.darkTheme,Jt.widthLogo,Jt.height100,Ct.fromTopCenter].join(" "),children:e}),z.jsx(Lt,{className:["h-100",Dr.relative,Lr.greyTheme].join(" "),children:r}),z.jsx(Lt,{xs:2,className:[Lr.darkTheme,Jt.height100,Dr.relative,Dr.zIndex1].join(" "),children:n})]}),z.jsx(ui,{xs:12,className:[Lr.darkTheme,Jt.height5,Dr.relative,Dr.zIndex1].join(" "),children:i})]});function _ie(){if(console&&console.warn){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];typeof e[0]=="string"&&(e[0]=`react-i18next:: ${e[0]}`),console.warn(...e)}}const Y3={};function B$(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];typeof e[0]=="string"&&Y3[e[0]]||(typeof e[0]=="string"&&(Y3[e[0]]=new Date),_ie(...e))}const P6=(t,e)=>()=>{if(t.isInitialized)e();else{const n=()=>{setTimeout(()=>{t.off("initialized",n)},0),e()};t.on("initialized",n)}};function Q3(t,e,n){t.loadNamespaces(e,P6(t,n))}function Z3(t,e,n,r){typeof n=="string"&&(n=[n]),n.forEach(i=>{t.options.ns.indexOf(i)<0&&t.options.ns.push(i)}),t.loadLanguages(e,P6(t,r))}function Iie(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=e.languages[0],i=e.options?e.options.fallbackLng:!1,s=e.languages[e.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const a=(o,l)=>{const c=e.services.backendConnector.state[`${o}|${l}`];return c===-1||c===2};return n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&e.services.backendConnector.backend&&e.isLanguageChangingTo&&!a(e.isLanguageChangingTo,t)?!1:!!(e.hasResourceBundle(r,t)||!e.services.backendConnector.backend||e.options.resources&&!e.options.partialBundledLanguages||a(r,t)&&(!i||a(s,t)))}function Nie(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return!e.languages||!e.languages.length?(B$("i18n.languages were undefined or empty",e.languages),!0):e.options.ignoreJSONStructure!==void 0?e.hasLoadedNamespace(t,{lng:n.lng,precheck:(i,s)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&i.services.backendConnector.backend&&i.isLanguageChangingTo&&!s(i.isLanguageChangingTo,t))return!1}}):Iie(t,e,n)}const Rie=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,Oie={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},Aie=t=>Oie[t],Pie=t=>t.replace(Rie,Aie);let z$={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:Pie};function Die(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};z$={...z$,...t}}function Fie(){return z$}let D6;function Lie(t){D6=t}function Mie(){return D6}const Bie={type:"3rdParty",init(t){Die(t.options.react),Lie(t)}},zie=A.createContext();class jie{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const Vie=(t,e)=>{const n=A.useRef();return A.useEffect(()=>{n.current=e?n.current:t},[t,e]),n.current};function F6(t,e,n,r){return t.getFixedT(e,n,r)}function Wie(t,e,n,r){return A.useCallback(F6(t,e,n,r),[t,e,n,r])}function Uie(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{i18n:n}=e,{i18n:r,defaultNS:i}=A.useContext(zie)||{},s=n||r||Mie();if(s&&!s.reportNamespaces&&(s.reportNamespaces=new jie),!s){B$("You will need to pass in an i18next instance by using initReactI18next");const k=(T,_)=>typeof _=="string"?_:_&&typeof _=="object"&&typeof _.defaultValue=="string"?_.defaultValue:Array.isArray(T)?T[T.length-1]:T,$=[k,{},!1];return $.t=k,$.i18n={},$.ready=!1,$}s.options.react&&s.options.react.wait!==void 0&&B$("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const a={...Fie(),...s.options.react,...e},{useSuspense:o,keyPrefix:l}=a;let c=t||i||s.options&&s.options.defaultNS;c=typeof c=="string"?[c]:c||["translation"],s.reportNamespaces.addUsedNamespaces&&s.reportNamespaces.addUsedNamespaces(c);const u=(s.isInitialized||s.initializedStoreOnce)&&c.every(k=>Nie(k,s,a)),d=Wie(s,e.lng||null,a.nsMode==="fallback"?c:c[0],l),f=()=>d,h=()=>F6(s,e.lng||null,a.nsMode==="fallback"?c:c[0],l),[g,y]=A.useState(f);let x=c.join();e.lng&&(x=`${e.lng}${x}`);const v=Vie(x),b=A.useRef(!0);A.useEffect(()=>{const{bindI18n:k,bindI18nStore:$}=a;b.current=!0,!u&&!o&&(e.lng?Z3(s,e.lng,c,()=>{b.current&&y(h)}):Q3(s,c,()=>{b.current&&y(h)})),u&&v&&v!==x&&b.current&&y(h);function T(){b.current&&y(h)}return k&&s&&s.on(k,T),$&&s&&s.store.on($,T),()=>{b.current=!1,k&&s&&k.split(" ").forEach(_=>s.off(_,T)),$&&s&&$.split(" ").forEach(_=>s.store.off(_,T))}},[s,x]),A.useEffect(()=>{b.current&&u&&y(f)},[s,l,u]);const S=[g,s,u];if(S.t=g,S.i18n=s,S.ready=u,u||!u&&!o)return S;throw new Promise(k=>{e.lng?Z3(s,e.lng,c,()=>k()):Q3(s,c,()=>k())})}const ms=()=>{const{t}=Uie(["widget","hotkey","workMode"]);return{getTranslation:(n,...r)=>t(`${n}:${r.join(":")}`)}},Gie=({data:t,children:e})=>{const{getTranslation:n}=ms();return z.jsxs(u0.Item,{eventKey:t.id,children:[z.jsx(u0.Header,{children:n("widget",t.id,"name")}),z.jsx(u0.Body,{className:[Lr.whiteTheme,A6["auto-y"]].join(" "),children:e})]})},Hie=[{id:"image",name:"Image"},{id:"colorPalette",name:"Color Palette"},{id:"align",name:"Align"},{id:"frame",name:"Frame"},{id:"shape",name:"Shape"},{id:"text",name:"Text"},{id:"icon",name:"Icon"},{id:"export",name:"Export"}],qie=[{type:"Youtube Video Thumbnail",id:"youtubeVideoThumbnail",width:1280,height:760},{type:"Youtube Channel Icon",id:"youtubeChannelIcon",width:800,height:800},{type:"Youtube Channel Cover",id:"youtubeChannelIcon",width:2560,height:1440},{type:"Instagram Square Photo",id:"instagramSquarePhoto",width:1080,height:1080},{type:"Instagram Profile",id:"instagramProfile",width:110,height:110},{type:"Instagram Story",id:"instagramStory",width:1080,height:1920},{type:"A4",id:"A4",width:2480,height:3508},{type:"sample_100X100",id:"sample_100X100",width:100,height:100},{type:"sample_512X512",id:"sample_512X512",width:512,height:512},{type:"Facebook Profile",id:"facebookProfile",width:180,height:180},{type:"Facebook Cover Photo",id:"facebookCoverPhoto",width:820,height:312},{type:"Twitter Profile",id:"twitterProfile",width:400,height:400},{type:"Twitter Header",id:"twitterHeader",width:1500,height:500},{type:"Twitter Post",id:"twitterPost",width:900,height:450},{type:"LinkedIn Profile",id:"linkedInProfil",width:400,height:400},{type:"LinkedIn Cover",id:"linkedInCover",width:1584,height:396},{type:"Pinterest Board Image",id:"pinterestBoardImage",width:222,height:150},{type:"Pinterest Pin Image",id:"pinterestPinImage",width:236,height:280},{type:"Pinterest Profile",id:"pinterestProfile",width:165,height:165},{type:"Tumblr Profile",id:"tumblrProfile",width:128,height:128},{type:"Tumblr Post Image",id:"tumblrPostImage",width:500,height:750},{type:"Android App Icon",id:"androidAppIcon",width:512,height:512},{type:"Android Feature Graphic",id:"androidFeatureGraphic",width:1024,height:500},{type:"Android Horizontal",id:"androidHorizontal",width:1920,height:1080},{type:"Android Vertical",id:"androidVertical",width:1080,height:1920},{type:"iOS iPhone Vertical (6.7 inch)",id:"iosIPhoneVertical6_7",width:1290,height:2796},{type:"iOS iPhone Vertical (6.5 inch)",id:"iosIPhoneVertical6_5",width:1284,height:2778},{type:"iOS iPhone Vertical (5.8 inch)",id:"iosIPhoneVertical5_8",width:1170,height:2532},{type:"iOS iPhone Vertical (5.5 inch)",id:"iosIPhoneVertical5_5",width:1242,height:2208},{type:"iOS iPhone Vertical (4.7 inch)",id:"iosIPhoneVertical4_7",width:750,height:1334},{type:"iOS iPhone Vertical (4 inch)",id:"iosIPhoneVertical4",width:640,height:1136},{type:"iOS iPhone Vertical (3.5 inch)",id:"iosIPhoneVertical3_5",width:640,height:960},{type:"iOS iPad Vertical (12.9 inch)",id:"iosIPadVertical12_9",width:2048,height:2732},{type:"iOS iPad Vertical (11 inch)",id:"iosIPadVertical11",width:1640,height:2360},{type:"iOS iPad Vertical (10.5 inch)",id:"iosIPadVertical10_5",width:1668,height:2224},{type:"iOS iPad Vertical (9.7 inch)",id:"iosIPadVertical9_7",width:1536,height:2048}],Kie="_font1em_1nvs8_1",Xie="_font1rem_1nvs8_5",Yie="_fontHalf1em_1nvs8_9",Qie="_font075em_1nvs8_13",Tf={font1em:Kie,font1rem:Xie,fontHalf1em:Yie,font075em:Qie},Zie=t=>e=>{e.currentTarget.dataset.dragSrc&&(e.dataTransfer.effectAllowed=t,e.dataTransfer.setData("text/plain",e.currentTarget.dataset.dragSrc))},Jie=t=>e=>{e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect=t)},ese=t=>e=>{if(e.preventDefault(),!e.dataTransfer)return;const n=e.dataTransfer.getData("text/plain");t(JSON.parse(n),e)},_f=({dragType:t,dragSrc:e,children:n})=>{const r={draggable:!0,"data-drag-src":JSON.stringify(e),onDragStart:Zie(t)},i=M.Children.map(n,s=>{let a=s;return M.isValidElement(s)&&(a=M.cloneElement(s,r)),a});return z.jsx(z.Fragment,{children:i})},Zi={INSERT:{FRAME:"INSERT_FRAME",IMAGE:"INSERT IMAGE",TEXT:"INSERT_TEXT",SHAPE:"INSERT SHAPE",ICON:"INSERT ICON",LINE:"INSERT LINE"}},tse=()=>z.jsx(ui,{xs:2,className:[Jt["mx-h-30vh"]].join(" "),children:qie.map(({type:t,id:e,width:n,height:r})=>z.jsx(nse,{data:{id:e,width:n,height:r,"data-frame-type":t},maxPx:80},`frame-thumbnail-${t}`))}),nse=({data:{id:t,width:e,height:n,...r},maxPx:i})=>{const{getTranslation:s}=ms(),a=rse({width:e,height:n},i);return z.jsxs(ir,{as:Lt,className:[Ct.absoluteCenter,Ct.wrapTrue].join(" "),children:[z.jsx(_f,{dragType:"copyMove",dragSrc:{trigger:Zi.INSERT.FRAME,"data-frame-type":r["data-frame-type"],id:t,width:e,height:n},children:z.jsx(ir.Image,{alt:`${e} X ${n}`,"data-src":`holder.js/${a.width}x${a.height}?bg=e3e6e8&fg=ffffff&size=7&text=${e} 
X
 ${n}&amp;nowrap=true`})}),z.jsx(ir.Caption,{className:[Tf.font075em,Jt.width100,"text-center"].join(" "),children:s("widget","frame",t,"name")})]})},rse=({width:t,height:e},n)=>t===e?{width:n,height:n}:t>e?{width:n,height:Math.floor(n*e/t)}:{width:Math.floor(n*t/e),height:n},J3=[{type:"image",id:"sample-image-1",name:"sample-image-1",src:"sitting-1.svg"},{type:"image",id:"sample-image-2",name:"sample-image-2",src:"sitting-2.svg"},{type:"image",id:"sample-image-3",name:"sample-image-3",src:"sitting-3.svg"},{type:"image",id:"sample-image-4",name:"sample-image-4",src:"sitting-4.svg"},{type:"image",id:"sample-image-5",name:"sample-image-5",src:"sitting-5.svg"},{type:"image",id:"sample-image-6",name:"sample-image-6",src:"sitting-6.svg"},{type:"image",id:"sample-image-7",name:"sample-image-7",src:"sitting-7.svg"},{type:"image",id:"sample-image-8",name:"sample-image-8",src:"sitting-8.svg"},{type:"image",id:"sample-image-9",name:"sample-image-9",src:"standing-1.svg"},{type:"image",id:"sample-image-10",name:"sample-image-10",src:"standing-10.svg"},{type:"image",id:"sample-image-11",name:"sample-image-11",src:"standing-11.svg"},{type:"image",id:"sample-image-12",name:"sample-image-12",src:"standing-12.svg"},{type:"image",id:"sample-image-13",name:"sample-image-13",src:"standing-13.svg"},{type:"image",id:"sample-image-14",name:"sample-image-14",src:"standing-14.svg"},{type:"image",id:"sample-image-15",name:"sample-image-15",src:"standing-15.svg"},{type:"image",id:"sample-image-16",name:"sample-image-16",src:"standing-16.svg"},{type:"image",id:"sample-image-17",name:"sample-image-17",src:"standing-17.svg"},{type:"image",id:"sample-image-18",name:"sample-image-18",src:"standing-18.svg"},{type:"image",id:"sample-image-19",name:"sample-image-19",src:"standing-19.svg"},{type:"image",id:"sample-image-20",name:"sample-image-20",src:"standing-2.svg"},{type:"image",id:"sample-image-21",name:"sample-image-21",src:"standing-20.svg"},{type:"image",id:"sample-image-22",name:"sample-image-22",src:"standing-21.svg"},{type:"image",id:"sample-image-23",name:"sample-image-23",src:"standing-22.svg"},{type:"image",id:"sample-image-24",name:"sample-image-24",src:"standing-23.svg"},{type:"image",id:"sample-image-25",name:"sample-image-25",src:"standing-24.svg"},{type:"image",id:"sample-image-26",name:"sample-image-26",src:"standing-3.svg"},{type:"image",id:"sample-image-27",name:"sample-image-27",src:"standing-4.svg"},{type:"image",id:"sample-image-28",name:"sample-image-28",src:"standing-5.svg"},{type:"image",id:"sample-image-29",name:"sample-image-29",src:"standing-6.svg"},{type:"image",id:"sample-image-30",name:"sample-image-30",src:"standing-7.svg"},{type:"image",id:"sample-image-31",name:"sample-image-31",src:"standing-8.svg"},{type:"image",id:"sample-image-32",name:"sample-image-32",src:"standing-9.svg"}],ise="_roundSM_vvlxe_3",sse="_roundMD_vvlxe_7",ase="_roundLG_vvlxe_11",ose="_roundTopSM_vvlxe_15",lse="_roundLeftSM_vvlxe_20",cse="_roundRightSM_vvlxe_24",use="_roundBottomSM_vvlxe_28",dse="_outroundTopSM_vvlxe_33",fse="_outroundLeftSM_vvlxe_51",pse="_outroundRightSM_vvlxe_55",hse="_outroundBottomSM_vvlxe_59",mse="_top_vvlxe_106",gse="_left_vvlxe_110",yse="_right_vvlxe_114",vse="_bottom_vvlxe_118",xse="_all_vvlxe_122",bse="_none_vvlxe_126",wse="_hilightOnFocus_vvlxe_135",Sse="_colorDark_vvlxe_143",kse="_colorWhite_vvlxe_147",Cse="_colorGrey_vvlxe_151",$se="_colorContrast_vvlxe_155",vl={roundSM:ise,roundMD:sse,roundLG:ase,roundTopSM:ose,roundLeftSM:lse,roundRightSM:cse,roundBottomSM:use,outroundTopSM:dse,outroundLeftSM:fse,outroundRightSM:pse,outroundBottomSM:hse,top:mse,left:gse,right:yse,bottom:vse,all:xse,none:bse,hilightOnFocus:wse,colorDark:Sse,colorWhite:kse,colorGrey:Cse,colorContrast:$se},Ese="_inline_1sxzc_1",Z0={inline:Ese,"inline-block":"_inline-block_1sxzc_5"},kn=t=>Number(t.toFixed(7));function As(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+t+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function ba(t){return!!t&&!!t[Yt]}function co(t){var e;return!!t&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===Pse}(t)||Array.isArray(t)||!!t[aD]||!!(!((e=t.constructor)===null||e===void 0)&&e[aD])||T_(t)||__(t))}function Bc(t,e,n){n===void 0&&(n=!1),If(t)===0?(n?Object.keys:Ld)(t).forEach(function(r){n&&typeof r=="symbol"||e(r,t[r],t)}):t.forEach(function(r,i){return e(i,r,t)})}function If(t){var e=t[Yt];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:T_(t)?2:__(t)?3:0}function Fd(t,e){return If(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function Tse(t,e){return If(t)===2?t.get(e):t[e]}function L6(t,e,n){var r=If(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function M6(t,e){return t===e?t!==0||1/t==1/e:t!=t&&e!=e}function T_(t){return Ose&&t instanceof Map}function __(t){return Ase&&t instanceof Set}function lc(t){return t.o||t.t}function I_(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=j6(t);delete e[Yt];for(var n=Ld(e),r=0;r<n.length;r++){var i=n[r],s=e[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(e[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:t[i]})}return Object.create(Object.getPrototypeOf(t),e)}function N_(t,e){return e===void 0&&(e=!1),R_(t)||ba(t)||!co(t)||(If(t)>1&&(t.set=t.add=t.clear=t.delete=_se),Object.freeze(t),e&&Bc(t,function(n,r){return N_(r,!0)},!0)),t}function _se(){As(2)}function R_(t){return t==null||typeof t!="object"||Object.isFrozen(t)}function ma(t){var e=U$[t];return e||As(18,t),e}function Ise(t,e){U$[t]||(U$[t]=e)}function j$(){return Qh}function Ak(t,e){e&&(ma("Patches"),t.u=[],t.s=[],t.v=e)}function J0(t){V$(t),t.p.forEach(Nse),t.p=null}function V$(t){t===Qh&&(Qh=t.l)}function eD(t){return Qh={p:[],l:Qh,h:t,m:!0,_:0}}function Nse(t){var e=t[Yt];e.i===0||e.i===1?e.j():e.g=!0}function Pk(t,e){e._=e.p.length;var n=e.p[0],r=t!==void 0&&t!==n;return e.h.O||ma("ES5").S(e,t,r),r?(n[Yt].P&&(J0(e),As(4)),co(t)&&(t=e1(e,t),e.l||t1(e,t)),e.u&&ma("Patches").M(n[Yt].t,t,e.u,e.s)):t=e1(e,n,[]),J0(e),e.u&&e.v(e.u,e.s),t!==z6?t:void 0}function e1(t,e,n){if(R_(e))return e;var r=e[Yt];if(!r)return Bc(e,function(o,l){return tD(t,r,e,o,l,n)},!0),e;if(r.A!==t)return e;if(!r.P)return t1(t,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=I_(r.k):r.o,s=i,a=!1;r.i===3&&(s=new Set(i),i.clear(),a=!0),Bc(s,function(o,l){return tD(t,r,i,o,l,n,a)}),t1(t,i,!1),n&&t.u&&ma("Patches").N(r,n,t.u,t.s)}return r.o}function tD(t,e,n,r,i,s,a){if(ba(i)){var o=e1(t,i,s&&e&&e.i!==3&&!Fd(e.R,r)?s.concat(r):void 0);if(L6(n,r,o),!ba(o))return;t.m=!1}else a&&n.add(i);if(co(i)&&!R_(i)){if(!t.h.D&&t._<1)return;e1(t,i),e&&e.A.l||t1(t,i)}}function t1(t,e,n){n===void 0&&(n=!1),!t.l&&t.h.D&&t.m&&N_(e,n)}function Dk(t,e){var n=t[Yt];return(n?lc(n):t)[e]}function nD(t,e){if(e in t)for(var n=Object.getPrototypeOf(t);n;){var r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Object.getPrototypeOf(n)}}function Yo(t){t.P||(t.P=!0,t.l&&Yo(t.l))}function Fk(t){t.o||(t.o=I_(t.t))}function W$(t,e,n){var r=T_(e)?ma("MapSet").F(e,n):__(e)?ma("MapSet").T(e,n):t.O?function(i,s){var a=Array.isArray(i),o={i:a?1:0,A:s?s.A:j$(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},l=o,c=Zh;a&&(l=[o],c=Jp);var u=Proxy.revocable(l,c),d=u.revoke,f=u.proxy;return o.k=f,o.j=d,f}(e,n):ma("ES5").J(e,n);return(n?n.A:j$()).p.push(r),r}function B6(t){return ba(t)||As(22,t),function e(n){if(!co(n))return n;var r,i=n[Yt],s=If(n);if(i){if(!i.P&&(i.i<4||!ma("ES5").K(i)))return i.t;i.I=!0,r=rD(n,s),i.I=!1}else r=rD(n,s);return Bc(r,function(a,o){i&&Tse(i.t,a)===o||L6(r,a,e(o))}),s===3?new Set(r):r}(t)}function rD(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return I_(t)}function Rse(){function t(s,a){var o=i[s];return o?o.enumerable=a:i[s]=o={configurable:!0,enumerable:a,get:function(){var l=this[Yt];return Zh.get(l,s)},set:function(l){var c=this[Yt];Zh.set(c,s,l)}},o}function e(s){for(var a=s.length-1;a>=0;a--){var o=s[a][Yt];if(!o.P)switch(o.i){case 5:r(o)&&Yo(o);break;case 4:n(o)&&Yo(o)}}}function n(s){for(var a=s.t,o=s.k,l=Ld(o),c=l.length-1;c>=0;c--){var u=l[c];if(u!==Yt){var d=a[u];if(d===void 0&&!Fd(a,u))return!0;var f=o[u],h=f&&f[Yt];if(h?h.t!==d:!M6(f,d))return!0}}var g=!!a[Yt];return l.length!==Ld(a).length+(g?0:1)}function r(s){var a=s.k;if(a.length!==s.t.length)return!0;var o=Object.getOwnPropertyDescriptor(a,a.length-1);if(o&&!o.get)return!0;for(var l=0;l<a.length;l++)if(!a.hasOwnProperty(l))return!0;return!1}var i={};Ise("ES5",{J:function(s,a){var o=Array.isArray(s),l=function(u,d){if(u){for(var f=Array(d.length),h=0;h<d.length;h++)Object.defineProperty(f,""+h,t(h,!0));return f}var g=j6(d);delete g[Yt];for(var y=Ld(g),x=0;x<y.length;x++){var v=y[x];g[v]=t(v,u||!!g[v].enumerable)}return Object.create(Object.getPrototypeOf(d),g)}(o,s),c={i:o?5:4,A:a?a.A:j$(),P:!1,I:!1,R:{},l:a,t:s,k:l,o:null,g:!1,C:!1};return Object.defineProperty(l,Yt,{value:c,writable:!0}),l},S:function(s,a,o){o?ba(a)&&a[Yt].A===s&&e(s.p):(s.u&&function l(c){if(c&&typeof c=="object"){var u=c[Yt];if(u){var d=u.t,f=u.k,h=u.R,g=u.i;if(g===4)Bc(f,function(S){S!==Yt&&(d[S]!==void 0||Fd(d,S)?h[S]||l(f[S]):(h[S]=!0,Yo(u)))}),Bc(d,function(S){f[S]!==void 0||Fd(f,S)||(h[S]=!1,Yo(u))});else if(g===5){if(r(u)&&(Yo(u),h.length=!0),f.length<d.length)for(var y=f.length;y<d.length;y++)h[y]=!1;else for(var x=d.length;x<f.length;x++)h[x]=!0;for(var v=Math.min(f.length,d.length),b=0;b<v;b++)f.hasOwnProperty(b)||(h[b]=!0),h[b]===void 0&&l(f[b])}}}}(s.p[0]),e(s.p))},K:function(s){return s.i===4?n(s):r(s)}})}var iD,Qh,O_=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",Ose=typeof Map<"u",Ase=typeof Set<"u",sD=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",z6=O_?Symbol.for("immer-nothing"):((iD={})["immer-nothing"]=!0,iD),aD=O_?Symbol.for("immer-draftable"):"__$immer_draftable",Yt=O_?Symbol.for("immer-state"):"__$immer_state",Pse=""+Object.prototype.constructor,Ld=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,j6=Object.getOwnPropertyDescriptors||function(t){var e={};return Ld(t).forEach(function(n){e[n]=Object.getOwnPropertyDescriptor(t,n)}),e},U$={},Zh={get:function(t,e){if(e===Yt)return t;var n=lc(t);if(!Fd(n,e))return function(i,s,a){var o,l=nD(s,a);return l?"value"in l?l.value:(o=l.get)===null||o===void 0?void 0:o.call(i.k):void 0}(t,n,e);var r=n[e];return t.I||!co(r)?r:r===Dk(t.t,e)?(Fk(t),t.o[e]=W$(t.A.h,r,t)):r},has:function(t,e){return e in lc(t)},ownKeys:function(t){return Reflect.ownKeys(lc(t))},set:function(t,e,n){var r=nD(lc(t),e);if(r!=null&&r.set)return r.set.call(t.k,n),!0;if(!t.P){var i=Dk(lc(t),e),s=i==null?void 0:i[Yt];if(s&&s.t===n)return t.o[e]=n,t.R[e]=!1,!0;if(M6(n,i)&&(n!==void 0||Fd(t.t,e)))return!0;Fk(t),Yo(t)}return t.o[e]===n&&(n!==void 0||e in t.o)||Number.isNaN(n)&&Number.isNaN(t.o[e])||(t.o[e]=n,t.R[e]=!0),!0},deleteProperty:function(t,e){return Dk(t.t,e)!==void 0||e in t.t?(t.R[e]=!1,Fk(t),Yo(t)):delete t.R[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var n=lc(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.i!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty:function(){As(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){As(12)}},Jp={};Bc(Zh,function(t,e){Jp[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),Jp.deleteProperty=function(t,e){return Jp.set.call(this,t,e,void 0)},Jp.set=function(t,e,n){return Zh.set.call(this,t[0],e,n,t[0])};var Dse=function(){function t(n){var r=this;this.O=sD,this.D=!0,this.produce=function(i,s,a){if(typeof i=="function"&&typeof s!="function"){var o=s;s=i;var l=r;return function(y){var x=this;y===void 0&&(y=o);for(var v=arguments.length,b=Array(v>1?v-1:0),S=1;S<v;S++)b[S-1]=arguments[S];return l.produce(y,function(k){var $;return($=s).call.apply($,[x,k].concat(b))})}}var c;if(typeof s!="function"&&As(6),a!==void 0&&typeof a!="function"&&As(7),co(i)){var u=eD(r),d=W$(r,i,void 0),f=!0;try{c=s(d),f=!1}finally{f?J0(u):V$(u)}return typeof Promise<"u"&&c instanceof Promise?c.then(function(y){return Ak(u,a),Pk(y,u)},function(y){throw J0(u),y}):(Ak(u,a),Pk(c,u))}if(!i||typeof i!="object"){if((c=s(i))===void 0&&(c=i),c===z6&&(c=void 0),r.D&&N_(c,!0),a){var h=[],g=[];ma("Patches").M(i,c,h,g),a(h,g)}return c}As(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(c){for(var u=arguments.length,d=Array(u>1?u-1:0),f=1;f<u;f++)d[f-1]=arguments[f];return r.produceWithPatches(c,function(h){return i.apply(void 0,[h].concat(d))})};var a,o,l=r.produce(i,s,function(c,u){a=c,o=u});return typeof Promise<"u"&&l instanceof Promise?l.then(function(c){return[c,a,o]}):[l,a,o]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var e=t.prototype;return e.createDraft=function(n){co(n)||As(8),ba(n)&&(n=B6(n));var r=eD(this),i=W$(this,n,void 0);return i[Yt].C=!0,V$(r),i},e.finishDraft=function(n,r){var i=n&&n[Yt],s=i.A;return Ak(s,r),Pk(void 0,s)},e.setAutoFreeze=function(n){this.D=n},e.setUseProxies=function(n){n&&!sD&&As(20),this.O=n},e.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var a=ma("Patches").$;return ba(n)?a(n,r):this.produce(n,function(o){return a(o,r)})},t}(),Oi=new Dse,A_=Oi.produce;Oi.produceWithPatches.bind(Oi);Oi.setAutoFreeze.bind(Oi);Oi.setUseProxies.bind(Oi);Oi.applyPatches.bind(Oi);Oi.createDraft.bind(Oi);Oi.finishDraft.bind(Oi);function Jh(t){"@babel/helpers - typeof";return Jh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jh(t)}function Fse(t,e){if(Jh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Jh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Lse(t){var e=Fse(t,"string");return Jh(e)=="symbol"?e:e+""}function Mse(t,e,n){return e=Lse(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function lD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?oD(Object(n),!0).forEach(function(r){Mse(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xr(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var cD=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),Lk=function(){return Math.random().toString(36).substring(7).split("").join(".")},n1={INIT:"@@redux/INIT"+Lk(),REPLACE:"@@redux/REPLACE"+Lk(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Lk()}};function Bse(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function V6(t,e,n){var r;if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(xr(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(xr(1));return n(V6)(t,e)}if(typeof t!="function")throw new Error(xr(2));var i=t,s=e,a=[],o=a,l=!1;function c(){o===a&&(o=a.slice())}function u(){if(l)throw new Error(xr(3));return s}function d(y){if(typeof y!="function")throw new Error(xr(4));if(l)throw new Error(xr(5));var x=!0;return c(),o.push(y),function(){if(x){if(l)throw new Error(xr(6));x=!1,c();var b=o.indexOf(y);o.splice(b,1),a=null}}}function f(y){if(!Bse(y))throw new Error(xr(7));if(typeof y.type>"u")throw new Error(xr(8));if(l)throw new Error(xr(9));try{l=!0,s=i(s,y)}finally{l=!1}for(var x=a=o,v=0;v<x.length;v++){var b=x[v];b()}return y}function h(y){if(typeof y!="function")throw new Error(xr(10));i=y,f({type:n1.REPLACE})}function g(){var y,x=d;return y={subscribe:function(b){if(typeof b!="object"||b===null)throw new Error(xr(11));function S(){b.next&&b.next(u())}S();var k=x(S);return{unsubscribe:k}}},y[cD]=function(){return this},y}return f({type:n1.INIT}),r={dispatch:f,subscribe:d,getState:u,replaceReducer:h},r[cD]=g,r}function zse(t){Object.keys(t).forEach(function(e){var n=t[e],r=n(void 0,{type:n1.INIT});if(typeof r>"u")throw new Error(xr(12));if(typeof n(void 0,{type:n1.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(xr(13))})}function jse(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++){var i=e[r];typeof t[i]=="function"&&(n[i]=t[i])}var s=Object.keys(n),a;try{zse(n)}catch(o){a=o}return function(l,c){if(l===void 0&&(l={}),a)throw a;for(var u=!1,d={},f=0;f<s.length;f++){var h=s[f],g=n[h],y=l[h],x=g(y,c);if(typeof x>"u")throw c&&c.type,new Error(xr(14));d[h]=x,u=u||x!==y}return u=u||s.length!==Object.keys(l).length,u?d:l}}function r1(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length===0?function(r){return r}:e.length===1?e[0]:e.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function Vse(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error(xr(15))},a={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},o=e.map(function(l){return l(a)});return s=r1.apply(void 0,o)(i.dispatch),lD(lD({},i),{},{dispatch:s})}}}var i1="NOT_FOUND";function Wse(t){var e;return{get:function(r){return e&&t(e.key,r)?e.value:i1},put:function(r,i){e={key:r,value:i}},getEntries:function(){return e?[e]:[]},clear:function(){e=void 0}}}function Use(t,e){var n=[];function r(o){var l=n.findIndex(function(u){return e(o,u.key)});if(l>-1){var c=n[l];return l>0&&(n.splice(l,1),n.unshift(c)),c.value}return i1}function i(o,l){r(o)===i1&&(n.unshift({key:o,value:l}),n.length>t&&n.pop())}function s(){return n}function a(){n=[]}return{get:r,put:i,getEntries:s,clear:a}}var Gse=function(e,n){return e===n};function Hse(t){return function(n,r){if(n===null||r===null||n.length!==r.length)return!1;for(var i=n.length,s=0;s<i;s++)if(!t(n[s],r[s]))return!1;return!0}}function qse(t,e){var n=typeof e=="object"?e:{equalityCheck:e},r=n.equalityCheck,i=r===void 0?Gse:r,s=n.maxSize,a=s===void 0?1:s,o=n.resultEqualityCheck,l=Hse(i),c=a===1?Wse(l):Use(a,l);function u(){var d=c.get(arguments);if(d===i1){if(d=t.apply(null,arguments),o){var f=c.getEntries(),h=f.find(function(g){return o(g.value,d)});h&&(d=h.value)}c.put(arguments,d)}return d}return u.clearCache=function(){return c.clear()},u}function Kse(t){var e=Array.isArray(t[0])?t[0]:t;if(!e.every(function(r){return typeof r=="function"})){var n=e.map(function(r){return typeof r=="function"?"function "+(r.name||"unnamed")+"()":typeof r}).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+n+"]")}return e}function Xse(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i=function(){for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];var c=0,u,d={memoizeOptions:void 0},f=o.pop();if(typeof f=="object"&&(d=f,f=o.pop()),typeof f!="function")throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof f+"]");var h=d,g=h.memoizeOptions,y=g===void 0?n:g,x=Array.isArray(y)?y:[y],v=Kse(o),b=t.apply(void 0,[function(){return c++,f.apply(null,arguments)}].concat(x)),S=t(function(){for(var $=[],T=v.length,_=0;_<T;_++)$.push(v[_].apply(null,arguments));return u=b.apply(null,$),u});return Object.assign(S,{resultFunc:f,memoizedResultFunc:b,dependencies:v,lastResult:function(){return u},recomputations:function(){return c},resetRecomputations:function(){return c=0}}),S};return i}var G$=Xse(qse);function W6(t){var e=function(r){var i=r.dispatch,s=r.getState;return function(a){return function(o){return typeof o=="function"?o(i,s,t):a(o)}}};return e}var U6=W6();U6.withExtraArgument=W6;const uD=U6;var G6=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Yse=function(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,a;return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(c){return function(u){return l([c,u])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){n.label=c[1];break}if(c[0]===6&&n.label<s[1]){n.label=s[1],s=c;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(c);break}s[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(u){c=[6,u],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},zc=function(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t},Qse=Object.defineProperty,Zse=Object.defineProperties,Jse=Object.getOwnPropertyDescriptors,dD=Object.getOwnPropertySymbols,eae=Object.prototype.hasOwnProperty,tae=Object.prototype.propertyIsEnumerable,fD=function(t,e,n){return e in t?Qse(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n},ri=function(t,e){for(var n in e||(e={}))eae.call(e,n)&&fD(t,n,e[n]);if(dD)for(var r=0,i=dD(e);r<i.length;r++){var n=i[r];tae.call(e,n)&&fD(t,n,e[n])}return t},Mk=function(t,e){return Zse(t,Jse(e))},nae=function(t,e,n){return new Promise(function(r,i){var s=function(l){try{o(n.next(l))}catch(c){i(c)}},a=function(l){try{o(n.throw(l))}catch(c){i(c)}},o=function(l){return l.done?r(l.value):Promise.resolve(l.value).then(s,a)};o((n=n.apply(t,e)).next())})},jo=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=G$.apply(void 0,t),r=function(i){for(var s=[],a=1;a<arguments.length;a++)s[a-1]=arguments[a];return n.apply(void 0,zc([ba(i)?B6(i):i],s))};return r},rae=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?r1:r1.apply(null,arguments)};function H6(t){if(typeof t!="object"||t===null)return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(var n=e;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return e===n}function fl(t,e){function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(e){var s=e.apply(void 0,r);if(!s)throw new Error("prepareAction did not return an object");return ri(ri({type:t,payload:s.payload},"meta"in s&&{meta:s.meta}),"error"in s&&{error:s.error})}return{type:t,payload:r[0]}}return n.toString=function(){return""+t},n.type=t,n.match=function(r){return r.type===t},n}function iae(t){return H6(t)&&"type"in t}function sae(t){return iae(t)&&typeof t.type=="string"&&Object.keys(t).every(aae)}function aae(t){return["type","payload","error","meta"].indexOf(t)>-1}var oae=function(t){G6(e,t);function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=t.apply(this,n)||this;return Object.setPrototypeOf(i,e.prototype),i}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.prototype.concat.apply(this,n)},e.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(e.bind.apply(e,zc([void 0],n[0].concat(this)))):new(e.bind.apply(e,zc([void 0],n.concat(this))))},e}(Array),lae=function(t){G6(e,t);function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=t.apply(this,n)||this;return Object.setPrototypeOf(i,e.prototype),i}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.prototype.concat.apply(this,n)},e.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(e.bind.apply(e,zc([void 0],n[0].concat(this)))):new(e.bind.apply(e,zc([void 0],n.concat(this))))},e}(Array);function H$(t){return co(t)?A_(t,function(){}):t}function cae(t){return typeof t=="boolean"}function uae(){return function(e){return q6(e)}}function q6(t){t===void 0&&(t={});var e=t.thunk,n=e===void 0?!0:e;t.immutableCheck,t.serializableCheck,t.actionCreatorCheck;var r=new oae;return n&&(cae(n)?r.push(uD):r.push(uD.withExtraArgument(n.extraArgument))),r}var dae=!0;function fae(t){var e=uae(),n=t||{},r=n.reducer,i=r===void 0?void 0:r,s=n.middleware,a=s===void 0?e():s,o=n.devTools,l=o===void 0?!0:o,c=n.preloadedState,u=c===void 0?void 0:c,d=n.enhancers,f=d===void 0?void 0:d,h;if(typeof i=="function")h=i;else if(H6(i))h=jse(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var g=a;typeof g=="function"&&(g=g(e));var y=Vse.apply(void 0,g),x=r1;l&&(x=rae(ri({trace:!dae},typeof l=="object"&&l)));var v=new lae(y),b=v;Array.isArray(f)?b=zc([y],f):typeof f=="function"&&(b=f(v));var S=x.apply(void 0,b);return V6(h,u,S)}function K6(t){var e={},n=[],r,i={addCase:function(s,a){var o=typeof s=="string"?s:s.type;if(!o)throw new Error("`builder.addCase` cannot be called with an empty action type");if(o in e)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return e[o]=a,i},addMatcher:function(s,a){return n.push({matcher:s,reducer:a}),i},addDefaultCase:function(s){return r=s,i}};return t(i),[e,n,r]}function pae(t){return typeof t=="function"}function hae(t,e,n,r){n===void 0&&(n=[]);var i=typeof e=="function"?K6(e):[e,n,r],s=i[0],a=i[1],o=i[2],l;if(pae(t))l=function(){return H$(t())};else{var c=H$(t);l=function(){return c}}function u(d,f){d===void 0&&(d=l());var h=zc([s[f.type]],a.filter(function(g){var y=g.matcher;return y(f)}).map(function(g){var y=g.reducer;return y}));return h.filter(function(g){return!!g}).length===0&&(h=[o]),h.reduce(function(g,y){if(y)if(ba(g)){var x=g,v=y(x,f);return v===void 0?g:v}else{if(co(g))return A_(g,function(b){return y(b,f)});var v=y(g,f);if(v===void 0){if(g===null)return g;throw Error("A case reducer on a non-draftable value must not return undefined")}return v}return g},d)}return u.getInitialState=l,u}function mae(t,e){return t+"/"+e}function Bx(t){var e=t.name;if(!e)throw new Error("`name` is a required option for createSlice");typeof process<"u";var n=typeof t.initialState=="function"?t.initialState:H$(t.initialState),r=t.reducers||{},i=Object.keys(r),s={},a={},o={};i.forEach(function(u){var d=r[u],f=mae(e,u),h,g;"reducer"in d?(h=d.reducer,g=d.prepare):h=d,s[u]=h,a[f]=h,o[u]=g?fl(f,g):fl(f)});function l(){var u=typeof t.extraReducers=="function"?K6(t.extraReducers):[t.extraReducers],d=u[0],f=d===void 0?{}:d,h=u[1],g=h===void 0?[]:h,y=u[2],x=y===void 0?void 0:y,v=ri(ri({},f),a);return hae(n,function(b){for(var S in v)b.addCase(S,v[S]);for(var k=0,$=g;k<$.length;k++){var T=$[k];b.addMatcher(T.matcher,T.reducer)}x&&b.addDefaultCase(x)})}var c;return{name:e,reducer:function(u,d){return c||(c=l()),c(u,d)},actions:o,caseReducers:s,getInitialState:function(){return c||(c=l()),c.getInitialState()}}}function gae(){return{ids:[],entities:{}}}function yae(){function t(e){return e===void 0&&(e={}),Object.assign(gae(),e)}return{getInitialState:t}}function vae(){function t(e){var n=function(c){return c.ids},r=function(c){return c.entities},i=jo(n,r,function(c,u){return c.map(function(d){return u[d]})}),s=function(c,u){return u},a=function(c,u){return c[u]},o=jo(n,function(c){return c.length});if(!e)return{selectIds:n,selectEntities:r,selectAll:i,selectTotal:o,selectById:jo(r,s,a)};var l=jo(e,r);return{selectIds:jo(e,n),selectEntities:l,selectAll:jo(e,i),selectTotal:jo(e,o),selectById:jo(l,s,a)}}return{getSelectors:t}}function xae(t){var e=gn(function(n,r){return t(r)});return function(r){return e(r,void 0)}}function gn(t){return function(n,r){function i(a){return sae(a)}var s=function(a){i(r)?t(r.payload,a):t(r,a)};return ba(n)?(s(n),n):A_(n,s)}}function Ch(t,e){var n=e(t);return n}function Ec(t){return Array.isArray(t)||(t=Object.values(t)),t}function X6(t,e,n){t=Ec(t);for(var r=[],i=[],s=0,a=t;s<a.length;s++){var o=a[s],l=Ch(o,e);l in n.entities?i.push({id:l,changes:o}):r.push(o)}return[r,i]}function Y6(t){function e(g,y){var x=Ch(g,t);x in y.entities||(y.ids.push(x),y.entities[x]=g)}function n(g,y){g=Ec(g);for(var x=0,v=g;x<v.length;x++){var b=v[x];e(b,y)}}function r(g,y){var x=Ch(g,t);x in y.entities||y.ids.push(x),y.entities[x]=g}function i(g,y){g=Ec(g);for(var x=0,v=g;x<v.length;x++){var b=v[x];r(b,y)}}function s(g,y){g=Ec(g),y.ids=[],y.entities={},n(g,y)}function a(g,y){return o([g],y)}function o(g,y){var x=!1;g.forEach(function(v){v in y.entities&&(delete y.entities[v],x=!0)}),x&&(y.ids=y.ids.filter(function(v){return v in y.entities}))}function l(g){Object.assign(g,{ids:[],entities:{}})}function c(g,y,x){var v=x.entities[y.id],b=Object.assign({},v,y.changes),S=Ch(b,t),k=S!==y.id;return k&&(g[y.id]=S,delete x.entities[y.id]),x.entities[S]=b,k}function u(g,y){return d([g],y)}function d(g,y){var x={},v={};g.forEach(function(k){k.id in y.entities&&(v[k.id]={id:k.id,changes:ri(ri({},v[k.id]?v[k.id].changes:null),k.changes)})}),g=Object.values(v);var b=g.length>0;if(b){var S=g.filter(function(k){return c(x,k,y)}).length>0;S&&(y.ids=Object.keys(y.entities))}}function f(g,y){return h([g],y)}function h(g,y){var x=X6(g,t,y),v=x[0],b=x[1];d(b,y),n(v,y)}return{removeAll:xae(l),addOne:gn(e),addMany:gn(n),setOne:gn(r),setMany:gn(i),setAll:gn(s),updateOne:gn(u),updateMany:gn(d),upsertOne:gn(f),upsertMany:gn(h),removeOne:gn(a),removeMany:gn(o)}}function bae(t,e){var n=Y6(t),r=n.removeOne,i=n.removeMany,s=n.removeAll;function a(b,S){return o([b],S)}function o(b,S){b=Ec(b);var k=b.filter(function($){return!(Ch($,t)in S.entities)});k.length!==0&&x(k,S)}function l(b,S){return c([b],S)}function c(b,S){b=Ec(b),b.length!==0&&x(b,S)}function u(b,S){b=Ec(b),S.entities={},S.ids=[],o(b,S)}function d(b,S){return f([b],S)}function f(b,S){for(var k=!1,$=0,T=b;$<T.length;$++){var _=T[$],R=S.entities[_.id];if(R){k=!0,Object.assign(R,_.changes);var P=t(R);_.id!==P&&(delete S.entities[_.id],S.entities[P]=R)}}k&&v(S)}function h(b,S){return g([b],S)}function g(b,S){var k=X6(b,t,S),$=k[0],T=k[1];f(T,S),o($,S)}function y(b,S){if(b.length!==S.length)return!1;for(var k=0;k<b.length&&k<S.length;k++)if(b[k]!==S[k])return!1;return!0}function x(b,S){b.forEach(function(k){S.entities[t(k)]=k}),v(S)}function v(b){var S=Object.values(b.entities);S.sort(e);var k=S.map(t),$=b.ids;y($,k)||(b.ids=k)}return{removeOne:r,removeMany:i,removeAll:s,addOne:gn(a),updateOne:gn(d),upsertOne:gn(h),setOne:gn(l),setMany:gn(c),setAll:gn(u),addMany:gn(o),updateMany:gn(f),upsertMany:gn(g)}}function P_(t){t===void 0&&(t={});var e=ri({sortComparer:!1,selectId:function(o){return o.id}},t),n=e.selectId,r=e.sortComparer,i=yae(),s=vae(),a=r?bae(n,r):Y6(n);return ri(ri(ri({selectId:n,sortComparer:r},i),s),a)}var wae="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Sae=function(t){t===void 0&&(t=21);for(var e="",n=t;n--;)e+=wae[Math.random()*64|0];return e},kae=["name","message","stack","code"],Bk=function(){function t(e,n){this.payload=e,this.meta=n}return t}(),pD=function(){function t(e,n){this.payload=e,this.meta=n}return t}(),Cae=function(t){if(typeof t=="object"&&t!==null){for(var e={},n=0,r=kae;n<r.length;n++){var i=r[n];typeof t[i]=="string"&&(e[i]=t[i])}return e}return{message:String(t)}};(function(){function t(e,n,r){var i=fl(e+"/fulfilled",function(c,u,d,f){return{payload:c,meta:Mk(ri({},f||{}),{arg:d,requestId:u,requestStatus:"fulfilled"})}}),s=fl(e+"/pending",function(c,u,d){return{payload:void 0,meta:Mk(ri({},d||{}),{arg:u,requestId:c,requestStatus:"pending"})}}),a=fl(e+"/rejected",function(c,u,d,f,h){return{payload:f,error:(r&&r.serializeError||Cae)(c||"Rejected"),meta:Mk(ri({},h||{}),{arg:d,requestId:u,rejectedWithValue:!!f,requestStatus:"rejected",aborted:(c==null?void 0:c.name)==="AbortError",condition:(c==null?void 0:c.name)==="ConditionError"})}}),o=typeof AbortController<"u"?AbortController:function(){function c(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return c.prototype.abort=function(){},c}();function l(c){return function(u,d,f){var h=r!=null&&r.idGenerator?r.idGenerator(c):Sae(),g=new o,y;function x(b){y=b,g.abort()}var v=function(){return nae(this,null,function(){var b,S,k,$,T,_,R;return Yse(this,function(P){switch(P.label){case 0:return P.trys.push([0,4,,5]),$=(b=r==null?void 0:r.condition)==null?void 0:b.call(r,c,{getState:d,extra:f}),Eae($)?[4,$]:[3,2];case 1:$=P.sent(),P.label=2;case 2:if($===!1||g.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return T=new Promise(function(O,B){return g.signal.addEventListener("abort",function(){return B({name:"AbortError",message:y||"Aborted"})})}),u(s(h,c,(S=r==null?void 0:r.getPendingMeta)==null?void 0:S.call(r,{requestId:h,arg:c},{getState:d,extra:f}))),[4,Promise.race([T,Promise.resolve(n(c,{dispatch:u,getState:d,extra:f,requestId:h,signal:g.signal,abort:x,rejectWithValue:function(O,B){return new Bk(O,B)},fulfillWithValue:function(O,B){return new pD(O,B)}})).then(function(O){if(O instanceof Bk)throw O;return O instanceof pD?i(O.payload,h,c,O.meta):i(O,h,c)})])];case 3:return k=P.sent(),[3,5];case 4:return _=P.sent(),k=_ instanceof Bk?a(null,h,c,_.payload,_.meta):a(_,h,c),[3,5];case 5:return R=r&&!r.dispatchConditionRejection&&a.match(k)&&k.meta.condition,R||u(k),[2,k]}})})}();return Object.assign(v,{abort:x,requestId:h,arg:c,unwrap:function(){return v.then($ae)}})}}return Object.assign(l,{pending:s,rejected:a,fulfilled:i,typePrefix:e})}return t.withTypes=function(){return t},t})();function $ae(t){if(t.meta&&t.meta.rejectedWithValue)throw t.payload;if(t.error)throw t.error;return t.payload}function Eae(t){return t!==null&&typeof t=="object"&&typeof t.then=="function"}var D_="listenerMiddleware";fl(D_+"/add");fl(D_+"/removeAll");fl(D_+"/remove");var hD;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);Rse();var q$=function(t,e){return q$=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},q$(t,e)};function _a(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");q$(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function Tae(t,e,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(u){try{c(r.next(u))}catch(d){a(d)}}function l(u){try{c(r.throw(u))}catch(d){a(d)}}function c(u){u.done?s(u.value):i(u.value).then(o,l)}c((r=r.apply(t,e||[])).next())})}function Q6(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,a;return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(c){return function(u){return l([c,u])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(n=0)),n;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){n.label=c[1];break}if(c[0]===6&&n.label<s[1]){n.label=s[1],s=c;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(c);break}s[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(u){c=[6,u],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function sf(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function s1(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,s=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(o){a={error:o}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return s}function a1(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}function Md(t){return this instanceof Md?(this.v=t,this):new Md(t)}function _ae(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(f){r[f]&&(i[f]=function(h){return new Promise(function(g,y){s.push([f,h,g,y])>1||o(f,h)})})}function o(f,h){try{l(r[f](h))}catch(g){d(s[0][3],g)}}function l(f){f.value instanceof Md?Promise.resolve(f.value.v).then(c,u):d(s[0][2],f)}function c(f){o("next",f)}function u(f){o("throw",f)}function d(f,h){f(h),s.shift(),s.length&&o(s[0][0],s[0][1])}}function Iae(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof sf=="function"?sf(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(a){return new Promise(function(o,l){a=t[s](a),i(o,l,a.done,a.value)})}}function i(s,a,o,l){Promise.resolve(l).then(function(c){s({value:c,done:o})},a)}}function $n(t){return typeof t=="function"}function Z6(t){var e=function(r){Error.call(r),r.stack=new Error().stack},n=t(e);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var zk=Z6(function(t){return function(n){t(this),this.message=n?n.length+` errors occurred during unsubscription:
`+n.map(function(r,i){return i+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=n}});function o1(t,e){if(t){var n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Em=function(){function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){var e,n,r,i,s;if(!this.closed){this.closed=!0;var a=this._parentage;if(a)if(this._parentage=null,Array.isArray(a))try{for(var o=sf(a),l=o.next();!l.done;l=o.next()){var c=l.value;c.remove(this)}}catch(y){e={error:y}}finally{try{l&&!l.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}else a.remove(this);var u=this.initialTeardown;if($n(u))try{u()}catch(y){s=y instanceof zk?y.errors:[y]}var d=this._finalizers;if(d){this._finalizers=null;try{for(var f=sf(d),h=f.next();!h.done;h=f.next()){var g=h.value;try{mD(g)}catch(y){s=s??[],y instanceof zk?s=a1(a1([],s1(s)),s1(y.errors)):s.push(y)}}}catch(y){r={error:y}}finally{try{h&&!h.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}}if(s)throw new zk(s)}},t.prototype.add=function(e){var n;if(e&&e!==this)if(this.closed)mD(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}},t.prototype._hasParent=function(e){var n=this._parentage;return n===e||Array.isArray(n)&&n.includes(e)},t.prototype._addParent=function(e){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e},t.prototype._removeParent=function(e){var n=this._parentage;n===e?this._parentage=null:Array.isArray(n)&&o1(n,e)},t.prototype.remove=function(e){var n=this._finalizers;n&&o1(n,e),e instanceof t&&e._removeParent(this)},t.EMPTY=function(){var e=new t;return e.closed=!0,e}(),t}(),J6=Em.EMPTY;function ej(t){return t instanceof Em||t&&"closed"in t&&$n(t.remove)&&$n(t.add)&&$n(t.unsubscribe)}function mD(t){$n(t)?t():t.unsubscribe()}var tj={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},nj={setTimeout:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setTimeout.apply(void 0,a1([t,e],s1(n)))},clearTimeout:function(t){var e=nj.delegate;return((e==null?void 0:e.clearTimeout)||clearTimeout)(t)},delegate:void 0};function rj(t){nj.setTimeout(function(){throw t})}function gD(){}function p0(t){t()}var F_=function(t){_a(e,t);function e(n){var r=t.call(this)||this;return r.isStopped=!1,n?(r.destination=n,ej(n)&&n.add(r)):r.destination=Aae,r}return e.create=function(n,r,i){return new K$(n,r,i)},e.prototype.next=function(n){this.isStopped||this._next(n)},e.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(n){this.destination.next(n)},e.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(Em),Nae=Function.prototype.bind;function jk(t,e){return Nae.call(t,e)}var Rae=function(){function t(e){this.partialObserver=e}return t.prototype.next=function(e){var n=this.partialObserver;if(n.next)try{n.next(e)}catch(r){Ov(r)}},t.prototype.error=function(e){var n=this.partialObserver;if(n.error)try{n.error(e)}catch(r){Ov(r)}else Ov(e)},t.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(n){Ov(n)}},t}(),K$=function(t){_a(e,t);function e(n,r,i){var s=t.call(this)||this,a;if($n(n)||!n)a={next:n??void 0,error:r??void 0,complete:i??void 0};else{var o;s&&tj.useDeprecatedNextContext?(o=Object.create(n),o.unsubscribe=function(){return s.unsubscribe()},a={next:n.next&&jk(n.next,o),error:n.error&&jk(n.error,o),complete:n.complete&&jk(n.complete,o)}):a=n}return s.destination=new Rae(a),s}return e}(F_);function Ov(t){rj(t)}function Oae(t){throw t}var Aae={closed:!0,next:gD,error:Oae,complete:gD},L_=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function M_(t){return t}function Pae(t){return t.length===0?M_:t.length===1?t[0]:function(n){return t.reduce(function(r,i){return i(r)},n)}}var Ai=function(){function t(e){e&&(this._subscribe=e)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(e,n,r){var i=this,s=Fae(e)?e:new K$(e,n,r);return p0(function(){var a=i,o=a.operator,l=a.source;s.add(o?o.call(s,l):l?i._subscribe(s):i._trySubscribe(s))}),s},t.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(n){e.error(n)}},t.prototype.forEach=function(e,n){var r=this;return n=yD(n),new n(function(i,s){var a=new K$({next:function(o){try{e(o)}catch(l){s(l),a.unsubscribe()}},error:s,complete:i});r.subscribe(a)})},t.prototype._subscribe=function(e){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(e)},t.prototype[L_]=function(){return this},t.prototype.pipe=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return Pae(e)(this)},t.prototype.toPromise=function(e){var n=this;return e=yD(e),new e(function(r,i){var s;n.subscribe(function(a){return s=a},function(a){return i(a)},function(){return r(s)})})},t.create=function(e){return new t(e)},t}();function yD(t){var e;return(e=t??tj.Promise)!==null&&e!==void 0?e:Promise}function Dae(t){return t&&$n(t.next)&&$n(t.error)&&$n(t.complete)}function Fae(t){return t&&t instanceof F_||Dae(t)&&ej(t)}function Lae(t){return $n(t==null?void 0:t.lift)}function lu(t){return function(e){if(Lae(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function jc(t,e,n,r,i){return new Mae(t,e,n,r,i)}var Mae=function(t){_a(e,t);function e(n,r,i,s,a,o){var l=t.call(this,n)||this;return l.onFinalize=a,l.shouldUnsubscribe=o,l._next=r?function(c){try{r(c)}catch(u){n.error(u)}}:t.prototype._next,l._error=s?function(c){try{s(c)}catch(u){n.error(u)}finally{this.unsubscribe()}}:t.prototype._error,l._complete=i?function(){try{i()}catch(c){n.error(c)}finally{this.unsubscribe()}}:t.prototype._complete,l}return e.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;t.prototype.unsubscribe.call(this),!r&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},e}(F_),Bae=Z6(function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),$h=function(t){_a(e,t);function e(){var n=t.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return e.prototype.lift=function(n){var r=new vD(this,this);return r.operator=n,r},e.prototype._throwIfClosed=function(){if(this.closed)throw new Bae},e.prototype.next=function(n){var r=this;p0(function(){var i,s;if(r._throwIfClosed(),!r.isStopped){r.currentObservers||(r.currentObservers=Array.from(r.observers));try{for(var a=sf(r.currentObservers),o=a.next();!o.done;o=a.next()){var l=o.value;l.next(n)}}catch(c){i={error:c}}finally{try{o&&!o.done&&(s=a.return)&&s.call(a)}finally{if(i)throw i.error}}}})},e.prototype.error=function(n){var r=this;p0(function(){if(r._throwIfClosed(),!r.isStopped){r.hasError=r.isStopped=!0,r.thrownError=n;for(var i=r.observers;i.length;)i.shift().error(n)}})},e.prototype.complete=function(){var n=this;p0(function(){if(n._throwIfClosed(),!n.isStopped){n.isStopped=!0;for(var r=n.observers;r.length;)r.shift().complete()}})},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(n){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,n)},e.prototype._subscribe=function(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)},e.prototype._innerSubscribe=function(n){var r=this,i=this,s=i.hasError,a=i.isStopped,o=i.observers;return s||a?J6:(this.currentObservers=null,o.push(n),new Em(function(){r.currentObservers=null,o1(o,n)}))},e.prototype._checkFinalizedStatuses=function(n){var r=this,i=r.hasError,s=r.thrownError,a=r.isStopped;i?n.error(s):a&&n.complete()},e.prototype.asObservable=function(){var n=new Ai;return n.source=this,n},e.create=function(n,r){return new vD(n,r)},e}(Ai),vD=function(t){_a(e,t);function e(n,r){var i=t.call(this)||this;return i.destination=n,i.source=r,i}return e.prototype.next=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.next)===null||i===void 0||i.call(r,n)},e.prototype.error=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.error)===null||i===void 0||i.call(r,n)},e.prototype.complete=function(){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||r===void 0||r.call(n)},e.prototype._subscribe=function(n){var r,i;return(i=(r=this.source)===null||r===void 0?void 0:r.subscribe(n))!==null&&i!==void 0?i:J6},e}($h),zae={now:function(){return Date.now()},delegate:void 0},jae=function(t){_a(e,t);function e(n,r){return t.call(this)||this}return e.prototype.schedule=function(n,r){return this},e}(Em),X$={setInterval:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setInterval.apply(void 0,a1([t,e],s1(n)))},clearInterval:function(t){var e=X$.delegate;return((e==null?void 0:e.clearInterval)||clearInterval)(t)},delegate:void 0},Vae=function(t){_a(e,t);function e(n,r){var i=t.call(this,n,r)||this;return i.scheduler=n,i.work=r,i.pending=!1,i}return e.prototype.schedule=function(n,r){var i;if(r===void 0&&(r=0),this.closed)return this;this.state=n;var s=this.id,a=this.scheduler;return s!=null&&(this.id=this.recycleAsyncId(a,s,r)),this.pending=!0,this.delay=r,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(a,this.id,r),this},e.prototype.requestAsyncId=function(n,r,i){return i===void 0&&(i=0),X$.setInterval(n.flush.bind(n,this),i)},e.prototype.recycleAsyncId=function(n,r,i){if(i===void 0&&(i=0),i!=null&&this.delay===i&&this.pending===!1)return r;r!=null&&X$.clearInterval(r)},e.prototype.execute=function(n,r){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(n,r);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(n,r){var i=!1,s;try{this.work(n)}catch(a){i=!0,s=a||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),s},e.prototype.unsubscribe=function(){if(!this.closed){var n=this,r=n.id,i=n.scheduler,s=i.actions;this.work=this.state=this.scheduler=null,this.pending=!1,o1(s,this),r!=null&&(this.id=this.recycleAsyncId(i,r,null)),this.delay=null,t.prototype.unsubscribe.call(this)}},e}(jae),xD=function(){function t(e,n){n===void 0&&(n=t.now),this.schedulerActionCtor=e,this.now=n}return t.prototype.schedule=function(e,n,r){return n===void 0&&(n=0),new this.schedulerActionCtor(this,e).schedule(r,n)},t.now=zae.now,t}(),Wae=function(t){_a(e,t);function e(n,r){r===void 0&&(r=xD.now);var i=t.call(this,n,r)||this;return i.actions=[],i._active=!1,i}return e.prototype.flush=function(n){var r=this.actions;if(this._active){r.push(n);return}var i;this._active=!0;do if(i=n.execute(n.state,n.delay))break;while(n=r.shift());if(this._active=!1,i){for(;n=r.shift();)n.unsubscribe();throw i}},e}(xD),Uae=function(t){_a(e,t);function e(n,r){var i=t.call(this,n,r)||this;return i.scheduler=n,i.work=r,i}return e.prototype.schedule=function(n,r){return r===void 0&&(r=0),r>0?t.prototype.schedule.call(this,n,r):(this.delay=r,this.state=n,this.scheduler.flush(this),this)},e.prototype.execute=function(n,r){return r>0||this.closed?t.prototype.execute.call(this,n,r):this._execute(n,r)},e.prototype.requestAsyncId=function(n,r,i){return i===void 0&&(i=0),i!=null&&i>0||i==null&&this.delay>0?t.prototype.requestAsyncId.call(this,n,r,i):(n.flush(this),0)},e}(Vae),Gae=function(t){_a(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(Wae),bD=new Gae(Uae),ij=new Ai(function(t){return t.complete()});function Hae(t){return t&&$n(t.schedule)}function sj(t){return t[t.length-1]}function qae(t){return Hae(sj(t))?t.pop():void 0}function Kae(t,e){return typeof sj(t)=="number"?t.pop():e}var aj=function(t){return t&&typeof t.length=="number"&&typeof t!="function"};function oj(t){return $n(t==null?void 0:t.then)}function lj(t){return $n(t[L_])}function cj(t){return Symbol.asyncIterator&&$n(t==null?void 0:t[Symbol.asyncIterator])}function uj(t){return new TypeError("You provided "+(t!==null&&typeof t=="object"?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function Xae(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var dj=Xae();function fj(t){return $n(t==null?void 0:t[dj])}function pj(t){return _ae(this,arguments,function(){var n,r,i,s;return Q6(this,function(a){switch(a.label){case 0:n=t.getReader(),a.label=1;case 1:a.trys.push([1,,9,10]),a.label=2;case 2:return[4,Md(n.read())];case 3:return r=a.sent(),i=r.value,s=r.done,s?[4,Md(void 0)]:[3,5];case 4:return[2,a.sent()];case 5:return[4,Md(i)];case 6:return[4,a.sent()];case 7:return a.sent(),[3,2];case 8:return[3,10];case 9:return n.releaseLock(),[7];case 10:return[2]}})})}function hj(t){return $n(t==null?void 0:t.getReader)}function Nf(t){if(t instanceof Ai)return t;if(t!=null){if(lj(t))return Yae(t);if(aj(t))return Qae(t);if(oj(t))return Zae(t);if(cj(t))return mj(t);if(fj(t))return Jae(t);if(hj(t))return eoe(t)}throw uj(t)}function Yae(t){return new Ai(function(e){var n=t[L_]();if($n(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Qae(t){return new Ai(function(e){for(var n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function Zae(t){return new Ai(function(e){t.then(function(n){e.closed||(e.next(n),e.complete())},function(n){return e.error(n)}).then(null,rj)})}function Jae(t){return new Ai(function(e){var n,r;try{for(var i=sf(t),s=i.next();!s.done;s=i.next()){var a=s.value;if(e.next(a),e.closed)return}}catch(o){n={error:o}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}e.complete()})}function mj(t){return new Ai(function(e){toe(t,e).catch(function(n){return e.error(n)})})}function eoe(t){return mj(pj(t))}function toe(t,e){var n,r,i,s;return Tae(this,void 0,void 0,function(){var a,o;return Q6(this,function(l){switch(l.label){case 0:l.trys.push([0,5,6,11]),n=Iae(t),l.label=1;case 1:return[4,n.next()];case 2:if(r=l.sent(),!!r.done)return[3,4];if(a=r.value,e.next(a),e.closed)return[2];l.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return o=l.sent(),i={error:o},[3,11];case 6:return l.trys.push([6,,9,10]),r&&!r.done&&(s=n.return)?[4,s.call(n)]:[3,8];case 7:l.sent(),l.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function pl(t,e,n,r,i){r===void 0&&(r=0),i===void 0&&(i=!1);var s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function Eh(t,e){return e===void 0&&(e=0),lu(function(n,r){n.subscribe(jc(r,function(i){return pl(r,t,function(){return r.next(i)},e)},function(){return pl(r,t,function(){return r.complete()},e)},function(i){return pl(r,t,function(){return r.error(i)},e)}))})}function B_(t,e){return e===void 0&&(e=0),lu(function(n,r){r.add(t.schedule(function(){return n.subscribe(r)},e))})}function noe(t,e){return Nf(t).pipe(B_(e),Eh(e))}function roe(t,e){return Nf(t).pipe(B_(e),Eh(e))}function ioe(t,e){return new Ai(function(n){var r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function soe(t,e){return new Ai(function(n){var r;return pl(n,e,function(){r=t[dj](),pl(n,e,function(){var i,s,a;try{i=r.next(),s=i.value,a=i.done}catch(o){n.error(o);return}a?n.complete():n.next(s)},0,!0)}),function(){return $n(r==null?void 0:r.return)&&r.return()}})}function gj(t,e){if(!t)throw new Error("Iterable cannot be null");return new Ai(function(n){pl(n,e,function(){var r=t[Symbol.asyncIterator]();pl(n,e,function(){r.next().then(function(i){i.done?n.complete():n.next(i.value)})},0,!0)})})}function aoe(t,e){return gj(pj(t),e)}function ooe(t,e){if(t!=null){if(lj(t))return noe(t,e);if(aj(t))return ioe(t,e);if(oj(t))return roe(t,e);if(cj(t))return gj(t,e);if(fj(t))return soe(t,e);if(hj(t))return aoe(t,e)}throw uj(t)}function yj(t,e){return e?ooe(t,e):Nf(t)}function vj(t,e){return lu(function(n,r){var i=0;n.subscribe(jc(r,function(s){r.next(t.call(e,s,i++))}))})}function loe(t,e,n,r,i,s,a,o){var l=[],c=0,u=0,d=!1,f=function(){d&&!l.length&&!c&&e.complete()},h=function(y){return c<r?g(y):l.push(y)},g=function(y){s&&e.next(y),c++;var x=!1;Nf(n(y,u++)).subscribe(jc(e,function(v){i==null||i(v),s?h(v):e.next(v)},function(){x=!0},void 0,function(){if(x)try{c--;for(var v=function(){var b=l.shift();a?pl(e,a,function(){return g(b)}):g(b)};l.length&&c<r;)v();f()}catch(b){e.error(b)}}))};return t.subscribe(jc(e,h,function(){d=!0,f()})),function(){o==null||o()}}function z_(t,e,n){return n===void 0&&(n=1/0),$n(e)?z_(function(r,i){return vj(function(s,a){return e(r,s,i,a)})(Nf(t(r,i)))},n):(typeof e=="number"&&(n=e),lu(function(r,i){return loe(r,i,t,n)}))}function coe(t){return t===void 0&&(t=1/0),z_(M_,t)}function uoe(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=qae(t),r=Kae(t,1/0),i=t;return i.length?i.length===1?Nf(i[0]):coe(r)(yj(i,n)):ij}function doe(t,e){return lu(function(n,r){var i=0;n.subscribe(jc(r,function(s){return t.call(e,s,i++)&&r.next(s)}))})}function foe(t){return t<=0?function(){return ij}:lu(function(e,n){var r=0;e.subscribe(jc(n,function(i){++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function poe(t,e,n){var r=$n(t)||e||n?{next:t,error:e,complete:n}:t;return r?lu(function(i,s){var a;(a=r.subscribe)===null||a===void 0||a.call(r);var o=!0;i.subscribe(jc(s,function(l){var c;(c=r.next)===null||c===void 0||c.call(r,l),s.next(l)},function(){var l;o=!1,(l=r.complete)===null||l===void 0||l.call(r),s.complete()},function(l){var c;o=!1,(c=r.error)===null||c===void 0||c.call(r,l),s.error(l)},function(){var l,c;o&&((l=r.unsubscribe)===null||l===void 0||l.call(r)),(c=r.finalize)===null||c===void 0||c.call(r)}))}):M_}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Y$=function(t,e){return Y$=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Y$(t,e)};function hoe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Y$(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var moe=function(t){hoe(e,t);function e(n,r){var i=t.call(this,function(s){var a=i.__notifier.subscribe(s);return a&&!a.closed&&s.next(i.value),a})||this;return i.__notifier=new $h,i.value=r,n.subscribe(function(s){s!==i.value&&(i.value=s,i.__notifier.next(s))}),i}return e}(Ai);function goe(t){t===void 0&&(t={});var e=bD.constructor,n=new e(bD.schedulerActionCtor),r=new $h,i,s=function(a){i=a;var o=new $h,l=new $h,c=o.asObservable().pipe(Eh(n)),u=new moe(l.pipe(Eh(n)),i.getState()),d=r.pipe(vj(function(f){var h=f(c,u,t.dependencies);if(!h)throw new TypeError('Your root Epic "'+(f.name||"<anonymous>")+`" does not return a stream. Double check you're not missing a return statement!`);return h}),z_(function(f){return yj(f).pipe(B_(n),Eh(n))}));return d.subscribe(i.dispatch),function(f){return function(h){var g=f(h);return l.next(i.getState()),o.next(h),g}}};return s.run=function(a){r.next(a)},s}function yoe(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return uoe.apply(void 0,t.map(function(s){var a=s.apply(void 0,r);if(!a)throw new TypeError('combineEpics: one of the provided Epics "'+(s.name||"<anonymous>")+`" does not return a stream. Double check you're not missing a return statement!`);return a}))};try{Object.defineProperty(n,"name",{value:"combineEpics("+t.map(function(r){return r.name||"<anonymous>"}).join(", ")+")"})}catch{}return n}var wD=function(t,e){return t===e||typeof e=="function"&&t===e.toString()};function voe(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t.length;return doe(n===1?function(r){return wD(r.type,t[0])}:function(r){for(var i=0;i<n;i++)if(wD(r.type,t[i]))return!0;return!1})}const xoe="IMAGE_ASSET_LIST",Ba=P_(),xj=Bx({name:xoe,initialState:Ba.setAll(Ba.getInitialState(),[]),reducers:{initialize(t,e){Ba.setAll(t,e.payload)},addItem(t,e){if(Array.isArray(e.payload)){Ba.addMany(t,e.payload);return}Ba.addOne(t,e.payload)},updateItem(t,e){Ba.updateOne(t,{id:e.payload.id,changes:e.payload})},removeItem(t,e){if(Array.isArray(e.payload)){Ba.removeMany(t,e.payload);return}Ba.removeOne(t,e.payload.id)}}}),boe=xj.reducer,woe=Ba.getSelectors(t=>t.imageAssetList),Soe=xj.actions,bj=()=>{const t=QT(),e=W0(woe.selectAll);return{setImageAsset:async a=>{a.map(o=>t(Soe.addItem({type:o["data-item-type"],id:o.id,name:o.name,src:o.src})))},getAllImageAsset:()=>e,getImageAssetSrc:a=>{var o;return((o=e.find(l=>l.id===a))==null?void 0:o.src)??null},reduceImageSize:(a,o,l)=>{Fr.Image.fromURL(a,c=>{let u,d;c.width()>c.height()?(u=kn(512),d=kn(u*(c.height()/c.width()))):(d=kn(512),u=kn(d*(c.width()/c.height()))),c.width(u),c.height(d),c.toDataURL({x:0,y:0,width:u,height:d,pixelRatio:1.2});const f=o??Xi();l&&l(`find:${f}`)})}}},koe=()=>{const{setImageAsset:t,getAllImageAsset:e}=bj(),{getTranslation:n}=ms(),[r,i]=A.useState(()=>e().length?[...e()]:(t(J3),[...J3])),s=()=>{const a=new FileReader;a.onload=()=>{i(l=>{const c=[{type:"image",id:Xi(),name:"imported image",src:a.result},...l];return t(c),c})};const o=document.createElement("input");o.type="file",o.accept="image/png, image/jpeg",o.onchange=l=>{const c=l;c.target&&c.target.files&&Object.values(c.target.files).forEach(u=>{a.readAsDataURL(u)})},o.click()};return z.jsxs(Lt,{className:[Jt["mx-h-30vh"]].join(" "),children:[z.jsx(ui,{children:z.jsxs("h6",{children:[n("widget","image","name"),z.jsx(Lc,{className:[Lr.transparentDarkColorTheme,vl.none,Z0["inline-block"],Jt.width25,Ds.p0,Ds.ml1rem,Ct["text-left"]].join(" "),onClick:s,children:z.jsx("i",{className:"bi-plus"})})]})}),z.jsx(ui,{xs:2,children:r.map(a=>z.jsx(Coe,{data:{id:a.id,src:a.src??`find:${a.id}`,name:a.name,"data-item-type":a.type},maxPx:80},`image-thumbnail-${a.id}`))})]})},Coe=({data:{id:t,...e},maxPx:n})=>(bj(),z.jsxs(ir,{as:Lt,className:[Ct.absoluteCenter,Ct.wrapTrue].join(" "),children:[z.jsx(_f,{dragType:"copyMove",dragSrc:{trigger:Zi.INSERT.IMAGE,"data-item-type":e["data-item-type"],src:e.src.startsWith("data:")?e.src:`/assets/image/${e.src}`},children:z.jsx(ir.Image,{alt:e.name,src:e.src.startsWith("data:")?e.src:`/assets/image/${e.src}`})}),z.jsx(ir.Caption,{className:[Tf.font075em,Jt.width100,"text-center"].join(" "),children:e.name})]}));var Q$=A,$oe=tz,Eoe=qB;function j_(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}var sa=j_(Q$),Rn=j_($oe),Vk=j_(Eoe);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ia=function(){return ia=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},ia.apply(this,arguments)};function Z$(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}var Toe="range-slider",_oe=sa.default.forwardRef(function(t,e){var n=t.classes,r=t.value,i=t.min,s=t.max,a=t.onChange,o=t.onMouseUpOrTouchEnd,l=t.onMouseUp,c=t.onTouchEnd,u=Z$(t,["classes","value","min","max","onChange","onMouseUpOrTouchEnd","onMouseUp","onTouchEnd"]);return sa.default.createElement("input",ia({ref:e,type:"range",value:r,min:i,max:s,onChange:function(d){return a(d,d.target.valueAsNumber)},onMouseUp:function(d){o(d),l&&l(d)},onTouchEnd:function(d){o(d),c&&c(d)},className:n,"aria-valuenow":Number(r),"aria-valuemin":Number(i),"aria-valuemax":Number(s)},u))}),Ioe=sa.default.memo(_oe),wj=sa.default.forwardRef(function(t,e){var n=t.value,r=t.onChange,i=r===void 0?function(){}:r,s=t.onAfterChange,a=s===void 0?function(){}:s,o=t.disabled,l=o===void 0?!1:o,c=t.size,u=t.min,d=u===void 0?0:u,f=t.max,h=f===void 0?100:f,g=t.step,y=t.variant,x=y===void 0?"primary":y,v=t.inputProps,b=v===void 0?{}:v,S=t.tooltip,k=S===void 0?"auto":S,$=t.tooltipPlacement,T=$===void 0?"bottom":$,_=t.tooltipLabel,R=t.tooltipStyle,P=R===void 0?{}:R,O=t.tooltipProps,B=O===void 0?{}:O,H=t.bsPrefix,V=t.className,K=Z$(t,["value","onChange","onAfterChange","disabled","size","min","max","step","variant","inputProps","tooltip","tooltipPlacement","tooltipLabel","tooltipStyle","tooltipProps","bsPrefix","className"]),X=Q$.useState(),q=X[0],te=X[1],j=H||Toe,Y=k==="auto"||k==="on",Q=Vk.default(V,j,c&&j+"--"+c,l&&"disabled",x&&j+"--"+x),ne=ia(ia({},b),K),le=ne.onMouseUp,ue=ne.onTouchEnd,de=Z$(ne,["onMouseUp","onTouchEnd"]),pe=Q$.useCallback(function(Ye){q!==Ye.target.value&&a(Ye,Ye.target.valueAsNumber),te(Ye.target.value)},[q,a]),me=sa.default.createElement(Ioe,ia({},ia({disabled:l,value:n,min:d,max:h,ref:e,step:g,classes:Q,onMouseUpOrTouchEnd:pe,onTouchEnd:ue,onMouseUp:le,onChange:i},de))),ie=Vk.default(j+"__wrap",c&&j+"__wrap--"+c),we=Vk.default(j+"__tooltip",Y&&j+"__tooltip--"+k,T&&j+"__tooltip--"+T,l&&j+"__tooltip--disabled"),$e=c==="sm"?8:c==="lg"?12:10,De=(Number(n)-d)/(h-d),Oe=De*100,Ue=(De-.5)*2,je=Ue*-$e;return sa.default.createElement("span",{className:ie},me,Y&&sa.default.createElement("div",ia({className:we,style:ia(ia({},P||{}),{left:"calc("+Oe+"% + "+je+"px)"})},B),sa.default.createElement("div",{className:j+"__tooltip__label"},_?_(Number(n)):n),sa.default.createElement("div",{className:j+"__tooltip__caret"})))});wj.propTypes={value:Rn.default.oneOfType([Rn.default.number,Rn.default.string]).isRequired,onChange:Rn.default.func,onAfterChange:Rn.default.func,min:Rn.default.number,max:Rn.default.number,step:Rn.default.number,disabled:Rn.default.bool,size:Rn.default.oneOf(["sm","lg"]),variant:Rn.default.oneOf(["primary","secondary","success","danger","warning","info","dark","light"]),inputProps:Rn.default.object,tooltip:Rn.default.oneOf(["auto","on","off"]),tooltipPlacement:Rn.default.oneOf(["top","bottom"]),tooltipLabel:Rn.default.func,tooltipStyle:Rn.default.object,tooltipProps:Rn.default.object,className:Rn.default.string,bsPrefix:Rn.default.string};var Noe=sa.default.memo(wj),Roe=Noe;const Sj=Tl(Roe);var es={},Tm={},Ooe=typeof Ps=="object"&&Ps&&Ps.Object===Object&&Ps,kj=Ooe,Aoe=kj,Poe=typeof self=="object"&&self&&self.Object===Object&&self,Doe=Aoe||Poe||Function("return this")(),Ia=Doe,Foe=Ia,Loe=Foe.Symbol,_m=Loe,SD=_m,Cj=Object.prototype,Moe=Cj.hasOwnProperty,Boe=Cj.toString,Fp=SD?SD.toStringTag:void 0;function zoe(t){var e=Moe.call(t,Fp),n=t[Fp];try{t[Fp]=void 0;var r=!0}catch{}var i=Boe.call(t);return r&&(e?t[Fp]=n:delete t[Fp]),i}var joe=zoe,Voe=Object.prototype,Woe=Voe.toString;function Uoe(t){return Woe.call(t)}var Goe=Uoe,kD=_m,Hoe=joe,qoe=Goe,Koe="[object Null]",Xoe="[object Undefined]",CD=kD?kD.toStringTag:void 0;function Yoe(t){return t==null?t===void 0?Xoe:Koe:CD&&CD in Object(t)?Hoe(t):qoe(t)}var cu=Yoe,Qoe=Array.isArray,Us=Qoe;function Zoe(t){return t!=null&&typeof t=="object"}var wo=Zoe,Joe=cu,ele=Us,tle=wo,nle="[object String]";function rle(t){return typeof t=="string"||!ele(t)&&tle(t)&&Joe(t)==nle}var ile=rle;function sle(t){return function(e,n,r){for(var i=-1,s=Object(e),a=r(e),o=a.length;o--;){var l=a[t?o:++i];if(n(s[l],l,s)===!1)break}return e}}var ale=sle,ole=ale,lle=ole(),cle=lle;function ule(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var dle=ule,fle=cu,ple=wo,hle="[object Arguments]";function mle(t){return ple(t)&&fle(t)==hle}var gle=mle,$D=gle,yle=wo,$j=Object.prototype,vle=$j.hasOwnProperty,xle=$j.propertyIsEnumerable,ble=$D(function(){return arguments}())?$D:function(t){return yle(t)&&vle.call(t,"callee")&&!xle.call(t,"callee")},Ej=ble,l1={exports:{}};function wle(){return!1}var Sle=wle;l1.exports;(function(t,e){var n=Ia,r=Sle,i=e&&!e.nodeType&&e,s=i&&!0&&t&&!t.nodeType&&t,a=s&&s.exports===i,o=a?n.Buffer:void 0,l=o?o.isBuffer:void 0,c=l||r;t.exports=c})(l1,l1.exports);var V_=l1.exports,kle=9007199254740991,Cle=/^(?:0|[1-9]\d*)$/;function $le(t,e){var n=typeof t;return e=e??kle,!!e&&(n=="number"||n!="symbol"&&Cle.test(t))&&t>-1&&t%1==0&&t<e}var Tj=$le,Ele=9007199254740991;function Tle(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Ele}var W_=Tle,_le=cu,Ile=W_,Nle=wo,Rle="[object Arguments]",Ole="[object Array]",Ale="[object Boolean]",Ple="[object Date]",Dle="[object Error]",Fle="[object Function]",Lle="[object Map]",Mle="[object Number]",Ble="[object Object]",zle="[object RegExp]",jle="[object Set]",Vle="[object String]",Wle="[object WeakMap]",Ule="[object ArrayBuffer]",Gle="[object DataView]",Hle="[object Float32Array]",qle="[object Float64Array]",Kle="[object Int8Array]",Xle="[object Int16Array]",Yle="[object Int32Array]",Qle="[object Uint8Array]",Zle="[object Uint8ClampedArray]",Jle="[object Uint16Array]",ece="[object Uint32Array]",Wt={};Wt[Hle]=Wt[qle]=Wt[Kle]=Wt[Xle]=Wt[Yle]=Wt[Qle]=Wt[Zle]=Wt[Jle]=Wt[ece]=!0;Wt[Rle]=Wt[Ole]=Wt[Ule]=Wt[Ale]=Wt[Gle]=Wt[Ple]=Wt[Dle]=Wt[Fle]=Wt[Lle]=Wt[Mle]=Wt[Ble]=Wt[zle]=Wt[jle]=Wt[Vle]=Wt[Wle]=!1;function tce(t){return Nle(t)&&Ile(t.length)&&!!Wt[_le(t)]}var nce=tce;function rce(t){return function(e){return t(e)}}var U_=rce,c1={exports:{}};c1.exports;(function(t,e){var n=kj,r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===r,a=s&&n.process,o=function(){try{var l=i&&i.require&&i.require("util").types;return l||a&&a.binding&&a.binding("util")}catch{}}();t.exports=o})(c1,c1.exports);var G_=c1.exports,ice=nce,sce=U_,ED=G_,TD=ED&&ED.isTypedArray,ace=TD?sce(TD):ice,_j=ace,oce=dle,lce=Ej,cce=Us,uce=V_,dce=Tj,fce=_j,pce=Object.prototype,hce=pce.hasOwnProperty;function mce(t,e){var n=cce(t),r=!n&&lce(t),i=!n&&!r&&uce(t),s=!n&&!r&&!i&&fce(t),a=n||r||i||s,o=a?oce(t.length,String):[],l=o.length;for(var c in t)(e||hce.call(t,c))&&!(a&&(c=="length"||i&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||dce(c,l)))&&o.push(c);return o}var Ij=mce,gce=Object.prototype;function yce(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||gce;return t===n}var H_=yce;function vce(t,e){return function(n){return t(e(n))}}var Nj=vce,xce=Nj,bce=xce(Object.keys,Object),wce=bce,Sce=H_,kce=wce,Cce=Object.prototype,$ce=Cce.hasOwnProperty;function Ece(t){if(!Sce(t))return kce(t);var e=[];for(var n in Object(t))$ce.call(t,n)&&n!="constructor"&&e.push(n);return e}var Tce=Ece;function _ce(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Rf=_ce,Ice=cu,Nce=Rf,Rce="[object AsyncFunction]",Oce="[object Function]",Ace="[object GeneratorFunction]",Pce="[object Proxy]";function Dce(t){if(!Nce(t))return!1;var e=Ice(t);return e==Oce||e==Ace||e==Rce||e==Pce}var Rj=Dce,Fce=Rj,Lce=W_;function Mce(t){return t!=null&&Lce(t.length)&&!Fce(t)}var zx=Mce,Bce=Ij,zce=Tce,jce=zx;function Vce(t){return jce(t)?Bce(t):zce(t)}var Im=Vce,Wce=cle,Uce=Im;function Gce(t,e){return t&&Wce(t,e,Uce)}var Oj=Gce;function Hce(t){return t}var Aj=Hce,qce=Aj;function Kce(t){return typeof t=="function"?t:qce}var Xce=Kce,Yce=Oj,Qce=Xce;function Zce(t,e){return t&&Yce(t,Qce(e))}var q_=Zce,Jce=Nj,eue=Jce(Object.getPrototypeOf,Object),K_=eue,tue=cu,nue=K_,rue=wo,iue="[object Object]",sue=Function.prototype,aue=Object.prototype,Pj=sue.toString,oue=aue.hasOwnProperty,lue=Pj.call(Object);function cue(t){if(!rue(t)||tue(t)!=iue)return!1;var e=nue(t);if(e===null)return!0;var n=oue.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&Pj.call(n)==lue}var uue=cue;function due(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var Dj=due;function fue(){this.__data__=[],this.size=0}var pue=fue;function hue(t,e){return t===e||t!==t&&e!==e}var X_=hue,mue=X_;function gue(t,e){for(var n=t.length;n--;)if(mue(t[n][0],e))return n;return-1}var jx=gue,yue=jx,vue=Array.prototype,xue=vue.splice;function bue(t){var e=this.__data__,n=yue(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():xue.call(e,n,1),--this.size,!0}var wue=bue,Sue=jx;function kue(t){var e=this.__data__,n=Sue(e,t);return n<0?void 0:e[n][1]}var Cue=kue,$ue=jx;function Eue(t){return $ue(this.__data__,t)>-1}var Tue=Eue,_ue=jx;function Iue(t,e){var n=this.__data__,r=_ue(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var Nue=Iue,Rue=pue,Oue=wue,Aue=Cue,Pue=Tue,Due=Nue;function Of(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Of.prototype.clear=Rue;Of.prototype.delete=Oue;Of.prototype.get=Aue;Of.prototype.has=Pue;Of.prototype.set=Due;var Vx=Of,Fue=Vx;function Lue(){this.__data__=new Fue,this.size=0}var Mue=Lue;function Bue(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var zue=Bue;function jue(t){return this.__data__.get(t)}var Vue=jue;function Wue(t){return this.__data__.has(t)}var Uue=Wue,Gue=Ia,Hue=Gue["__core-js_shared__"],que=Hue,Wk=que,_D=function(){var t=/[^.]+$/.exec(Wk&&Wk.keys&&Wk.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function Kue(t){return!!_D&&_D in t}var Xue=Kue,Yue=Function.prototype,Que=Yue.toString;function Zue(t){if(t!=null){try{return Que.call(t)}catch{}try{return t+""}catch{}}return""}var Fj=Zue,Jue=Rj,ede=Xue,tde=Rf,nde=Fj,rde=/[\\^$.*+?()[\]{}|]/g,ide=/^\[object .+?Constructor\]$/,sde=Function.prototype,ade=Object.prototype,ode=sde.toString,lde=ade.hasOwnProperty,cde=RegExp("^"+ode.call(lde).replace(rde,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ude(t){if(!tde(t)||ede(t))return!1;var e=Jue(t)?cde:ide;return e.test(nde(t))}var dde=ude;function fde(t,e){return t==null?void 0:t[e]}var pde=fde,hde=dde,mde=pde;function gde(t,e){var n=mde(t,e);return hde(n)?n:void 0}var uu=gde,yde=uu,vde=Ia,xde=yde(vde,"Map"),Y_=xde,bde=uu,wde=bde(Object,"create"),Wx=wde,ID=Wx;function Sde(){this.__data__=ID?ID(null):{},this.size=0}var kde=Sde;function Cde(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var $de=Cde,Ede=Wx,Tde="__lodash_hash_undefined__",_de=Object.prototype,Ide=_de.hasOwnProperty;function Nde(t){var e=this.__data__;if(Ede){var n=e[t];return n===Tde?void 0:n}return Ide.call(e,t)?e[t]:void 0}var Rde=Nde,Ode=Wx,Ade=Object.prototype,Pde=Ade.hasOwnProperty;function Dde(t){var e=this.__data__;return Ode?e[t]!==void 0:Pde.call(e,t)}var Fde=Dde,Lde=Wx,Mde="__lodash_hash_undefined__";function Bde(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Lde&&e===void 0?Mde:e,this}var zde=Bde,jde=kde,Vde=$de,Wde=Rde,Ude=Fde,Gde=zde;function Af(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Af.prototype.clear=jde;Af.prototype.delete=Vde;Af.prototype.get=Wde;Af.prototype.has=Ude;Af.prototype.set=Gde;var Hde=Af,ND=Hde,qde=Vx,Kde=Y_;function Xde(){this.size=0,this.__data__={hash:new ND,map:new(Kde||qde),string:new ND}}var Yde=Xde;function Qde(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var Zde=Qde,Jde=Zde;function efe(t,e){var n=t.__data__;return Jde(e)?n[typeof e=="string"?"string":"hash"]:n.map}var Ux=efe,tfe=Ux;function nfe(t){var e=tfe(this,t).delete(t);return this.size-=e?1:0,e}var rfe=nfe,ife=Ux;function sfe(t){return ife(this,t).get(t)}var afe=sfe,ofe=Ux;function lfe(t){return ofe(this,t).has(t)}var cfe=lfe,ufe=Ux;function dfe(t,e){var n=ufe(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var ffe=dfe,pfe=Yde,hfe=rfe,mfe=afe,gfe=cfe,yfe=ffe;function Pf(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Pf.prototype.clear=pfe;Pf.prototype.delete=hfe;Pf.prototype.get=mfe;Pf.prototype.has=gfe;Pf.prototype.set=yfe;var Q_=Pf,vfe=Vx,xfe=Y_,bfe=Q_,wfe=200;function Sfe(t,e){var n=this.__data__;if(n instanceof vfe){var r=n.__data__;if(!xfe||r.length<wfe-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new bfe(r)}return n.set(t,e),this.size=n.size,this}var kfe=Sfe,Cfe=Vx,$fe=Mue,Efe=zue,Tfe=Vue,_fe=Uue,Ife=kfe;function Df(t){var e=this.__data__=new Cfe(t);this.size=e.size}Df.prototype.clear=$fe;Df.prototype.delete=Efe;Df.prototype.get=Tfe;Df.prototype.has=_fe;Df.prototype.set=Ife;var Z_=Df,Nfe="__lodash_hash_undefined__";function Rfe(t){return this.__data__.set(t,Nfe),this}var Ofe=Rfe;function Afe(t){return this.__data__.has(t)}var Pfe=Afe,Dfe=Q_,Ffe=Ofe,Lfe=Pfe;function u1(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new Dfe;++e<n;)this.add(t[e])}u1.prototype.add=u1.prototype.push=Ffe;u1.prototype.has=Lfe;var Mfe=u1;function Bfe(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var zfe=Bfe;function jfe(t,e){return t.has(e)}var Vfe=jfe,Wfe=Mfe,Ufe=zfe,Gfe=Vfe,Hfe=1,qfe=2;function Kfe(t,e,n,r,i,s){var a=n&Hfe,o=t.length,l=e.length;if(o!=l&&!(a&&l>o))return!1;var c=s.get(t),u=s.get(e);if(c&&u)return c==e&&u==t;var d=-1,f=!0,h=n&qfe?new Wfe:void 0;for(s.set(t,e),s.set(e,t);++d<o;){var g=t[d],y=e[d];if(r)var x=a?r(y,g,d,e,t,s):r(g,y,d,t,e,s);if(x!==void 0){if(x)continue;f=!1;break}if(h){if(!Ufe(e,function(v,b){if(!Gfe(h,b)&&(g===v||i(g,v,n,r,s)))return h.push(b)})){f=!1;break}}else if(!(g===y||i(g,y,n,r,s))){f=!1;break}}return s.delete(t),s.delete(e),f}var Lj=Kfe,Xfe=Ia,Yfe=Xfe.Uint8Array,Mj=Yfe;function Qfe(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}var Zfe=Qfe;function Jfe(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var epe=Jfe,RD=_m,OD=Mj,tpe=X_,npe=Lj,rpe=Zfe,ipe=epe,spe=1,ape=2,ope="[object Boolean]",lpe="[object Date]",cpe="[object Error]",upe="[object Map]",dpe="[object Number]",fpe="[object RegExp]",ppe="[object Set]",hpe="[object String]",mpe="[object Symbol]",gpe="[object ArrayBuffer]",ype="[object DataView]",AD=RD?RD.prototype:void 0,Uk=AD?AD.valueOf:void 0;function vpe(t,e,n,r,i,s,a){switch(n){case ype:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case gpe:return!(t.byteLength!=e.byteLength||!s(new OD(t),new OD(e)));case ope:case lpe:case dpe:return tpe(+t,+e);case cpe:return t.name==e.name&&t.message==e.message;case fpe:case hpe:return t==e+"";case upe:var o=rpe;case ppe:var l=r&spe;if(o||(o=ipe),t.size!=e.size&&!l)return!1;var c=a.get(t);if(c)return c==e;r|=ape,a.set(t,e);var u=npe(o(t),o(e),r,i,s,a);return a.delete(t),u;case mpe:if(Uk)return Uk.call(t)==Uk.call(e)}return!1}var xpe=vpe;function bpe(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var Bj=bpe,wpe=Bj,Spe=Us;function kpe(t,e,n){var r=e(t);return Spe(t)?r:wpe(r,n(t))}var zj=kpe;function Cpe(t,e){for(var n=-1,r=t==null?0:t.length,i=0,s=[];++n<r;){var a=t[n];e(a,n,t)&&(s[i++]=a)}return s}var $pe=Cpe;function Epe(){return[]}var jj=Epe,Tpe=$pe,_pe=jj,Ipe=Object.prototype,Npe=Ipe.propertyIsEnumerable,PD=Object.getOwnPropertySymbols,Rpe=PD?function(t){return t==null?[]:(t=Object(t),Tpe(PD(t),function(e){return Npe.call(t,e)}))}:_pe,J_=Rpe,Ope=zj,Ape=J_,Ppe=Im;function Dpe(t){return Ope(t,Ppe,Ape)}var Vj=Dpe,DD=Vj,Fpe=1,Lpe=Object.prototype,Mpe=Lpe.hasOwnProperty;function Bpe(t,e,n,r,i,s){var a=n&Fpe,o=DD(t),l=o.length,c=DD(e),u=c.length;if(l!=u&&!a)return!1;for(var d=l;d--;){var f=o[d];if(!(a?f in e:Mpe.call(e,f)))return!1}var h=s.get(t),g=s.get(e);if(h&&g)return h==e&&g==t;var y=!0;s.set(t,e),s.set(e,t);for(var x=a;++d<l;){f=o[d];var v=t[f],b=e[f];if(r)var S=a?r(b,v,f,e,t,s):r(v,b,f,t,e,s);if(!(S===void 0?v===b||i(v,b,n,r,s):S)){y=!1;break}x||(x=f=="constructor")}if(y&&!x){var k=t.constructor,$=e.constructor;k!=$&&"constructor"in t&&"constructor"in e&&!(typeof k=="function"&&k instanceof k&&typeof $=="function"&&$ instanceof $)&&(y=!1)}return s.delete(t),s.delete(e),y}var zpe=Bpe,jpe=uu,Vpe=Ia,Wpe=jpe(Vpe,"DataView"),Upe=Wpe,Gpe=uu,Hpe=Ia,qpe=Gpe(Hpe,"Promise"),Kpe=qpe,Xpe=uu,Ype=Ia,Qpe=Xpe(Ype,"Set"),Zpe=Qpe,Jpe=uu,ehe=Ia,the=Jpe(ehe,"WeakMap"),nhe=the,J$=Upe,eE=Y_,tE=Kpe,nE=Zpe,rE=nhe,Wj=cu,Ff=Fj,FD="[object Map]",rhe="[object Object]",LD="[object Promise]",MD="[object Set]",BD="[object WeakMap]",zD="[object DataView]",ihe=Ff(J$),she=Ff(eE),ahe=Ff(tE),ohe=Ff(nE),lhe=Ff(rE),cc=Wj;(J$&&cc(new J$(new ArrayBuffer(1)))!=zD||eE&&cc(new eE)!=FD||tE&&cc(tE.resolve())!=LD||nE&&cc(new nE)!=MD||rE&&cc(new rE)!=BD)&&(cc=function(t){var e=Wj(t),n=e==rhe?t.constructor:void 0,r=n?Ff(n):"";if(r)switch(r){case ihe:return zD;case she:return FD;case ahe:return LD;case ohe:return MD;case lhe:return BD}return e});var Gx=cc,Gk=Z_,che=Lj,uhe=xpe,dhe=zpe,jD=Gx,VD=Us,WD=V_,fhe=_j,phe=1,UD="[object Arguments]",GD="[object Array]",Av="[object Object]",hhe=Object.prototype,HD=hhe.hasOwnProperty;function mhe(t,e,n,r,i,s){var a=VD(t),o=VD(e),l=a?GD:jD(t),c=o?GD:jD(e);l=l==UD?Av:l,c=c==UD?Av:c;var u=l==Av,d=c==Av,f=l==c;if(f&&WD(t)){if(!WD(e))return!1;a=!0,u=!1}if(f&&!u)return s||(s=new Gk),a||fhe(t)?che(t,e,n,r,i,s):uhe(t,e,l,n,r,i,s);if(!(n&phe)){var h=u&&HD.call(t,"__wrapped__"),g=d&&HD.call(e,"__wrapped__");if(h||g){var y=h?t.value():t,x=g?e.value():e;return s||(s=new Gk),i(y,x,n,r,s)}}return f?(s||(s=new Gk),dhe(t,e,n,r,i,s)):!1}var ghe=mhe,yhe=ghe,qD=wo;function Uj(t,e,n,r,i){return t===e?!0:t==null||e==null||!qD(t)&&!qD(e)?t!==t&&e!==e:yhe(t,e,n,r,Uj,i)}var Gj=Uj,vhe=Z_,xhe=Gj,bhe=1,whe=2;function She(t,e,n,r){var i=n.length,s=i,a=!r;if(t==null)return!s;for(t=Object(t);i--;){var o=n[i];if(a&&o[2]?o[1]!==t[o[0]]:!(o[0]in t))return!1}for(;++i<s;){o=n[i];var l=o[0],c=t[l],u=o[1];if(a&&o[2]){if(c===void 0&&!(l in t))return!1}else{var d=new vhe;if(r)var f=r(c,u,l,t,e,d);if(!(f===void 0?xhe(u,c,bhe|whe,r,d):f))return!1}}return!0}var khe=She,Che=Rf;function $he(t){return t===t&&!Che(t)}var Hj=$he,Ehe=Hj,The=Im;function _he(t){for(var e=The(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Ehe(i)]}return e}var Ihe=_he;function Nhe(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}var qj=Nhe,Rhe=khe,Ohe=Ihe,Ahe=qj;function Phe(t){var e=Ohe(t);return e.length==1&&e[0][2]?Ahe(e[0][0],e[0][1]):function(n){return n===t||Rhe(n,t,e)}}var Dhe=Phe,Fhe=cu,Lhe=wo,Mhe="[object Symbol]";function Bhe(t){return typeof t=="symbol"||Lhe(t)&&Fhe(t)==Mhe}var eI=Bhe,zhe=Us,jhe=eI,Vhe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Whe=/^\w*$/;function Uhe(t,e){if(zhe(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||jhe(t)?!0:Whe.test(t)||!Vhe.test(t)||e!=null&&t in Object(e)}var tI=Uhe,Kj=Q_,Ghe="Expected a function";function nI(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(Ghe);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var a=t.apply(this,r);return n.cache=s.set(i,a)||s,a};return n.cache=new(nI.Cache||Kj),n}nI.Cache=Kj;var Hhe=nI,qhe=Hhe,Khe=500;function Xhe(t){var e=qhe(t,function(r){return n.size===Khe&&n.clear(),r}),n=e.cache;return e}var Yhe=Xhe,Qhe=Yhe,Zhe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Jhe=/\\(\\)?/g,eme=Qhe(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(Zhe,function(n,r,i,s){e.push(i?s.replace(Jhe,"$1"):r||n)}),e}),tme=eme,KD=_m,nme=Dj,rme=Us,ime=eI,sme=1/0,XD=KD?KD.prototype:void 0,YD=XD?XD.toString:void 0;function Xj(t){if(typeof t=="string")return t;if(rme(t))return nme(t,Xj)+"";if(ime(t))return YD?YD.call(t):"";var e=t+"";return e=="0"&&1/t==-sme?"-0":e}var ame=Xj,ome=ame;function lme(t){return t==null?"":ome(t)}var cme=lme,ume=Us,dme=tI,fme=tme,pme=cme;function hme(t,e){return ume(t)?t:dme(t,e)?[t]:fme(pme(t))}var Yj=hme,mme=eI,gme=1/0;function yme(t){if(typeof t=="string"||mme(t))return t;var e=t+"";return e=="0"&&1/t==-gme?"-0":e}var Hx=yme,vme=Yj,xme=Hx;function bme(t,e){e=vme(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[xme(e[n++])];return n&&n==r?t:void 0}var Qj=bme,wme=Qj;function Sme(t,e,n){var r=t==null?void 0:wme(t,e);return r===void 0?n:r}var kme=Sme;function Cme(t,e){return t!=null&&e in Object(t)}var $me=Cme,Eme=Yj,Tme=Ej,_me=Us,Ime=Tj,Nme=W_,Rme=Hx;function Ome(t,e,n){e=Eme(e,t);for(var r=-1,i=e.length,s=!1;++r<i;){var a=Rme(e[r]);if(!(s=t!=null&&n(t,a)))break;t=t[a]}return s||++r!=i?s:(i=t==null?0:t.length,!!i&&Nme(i)&&Ime(a,i)&&(_me(t)||Tme(t)))}var Ame=Ome,Pme=$me,Dme=Ame;function Fme(t,e){return t!=null&&Dme(t,e,Pme)}var Lme=Fme,Mme=Gj,Bme=kme,zme=Lme,jme=tI,Vme=Hj,Wme=qj,Ume=Hx,Gme=1,Hme=2;function qme(t,e){return jme(t)&&Vme(e)?Wme(Ume(t),e):function(n){var r=Bme(n,t);return r===void 0&&r===e?zme(n,t):Mme(e,r,Gme|Hme)}}var Kme=qme;function Xme(t){return function(e){return e==null?void 0:e[t]}}var Yme=Xme,Qme=Qj;function Zme(t){return function(e){return Qme(e,t)}}var Jme=Zme,ege=Yme,tge=Jme,nge=tI,rge=Hx;function ige(t){return nge(t)?ege(rge(t)):tge(t)}var sge=ige,age=Dhe,oge=Kme,lge=Aj,cge=Us,uge=sge;function dge(t){return typeof t=="function"?t:t==null?lge:typeof t=="object"?cge(t)?oge(t[0],t[1]):age(t):uge(t)}var fge=dge,pge=zx;function hge(t,e){return function(n,r){if(n==null)return n;if(!pge(n))return t(n,r);for(var i=n.length,s=e?i:-1,a=Object(n);(e?s--:++s<i)&&r(a[s],s,a)!==!1;);return n}}var mge=hge,gge=Oj,yge=mge,vge=yge(gge),xge=vge,bge=xge,wge=zx;function Sge(t,e){var n=-1,r=wge(t)?Array(t.length):[];return bge(t,function(i,s,a){r[++n]=e(i,s,a)}),r}var kge=Sge,Cge=Dj,$ge=fge,Ege=kge,Tge=Us;function _ge(t,e){var n=Tge(t)?Cge:Ege;return n(t,$ge(e))}var Ige=_ge;Object.defineProperty(Tm,"__esModule",{value:!0});Tm.flattenNames=void 0;var Nge=ile,Rge=qx(Nge),Oge=q_,Age=qx(Oge),Pge=uue,Dge=qx(Pge),Fge=Ige,Lge=qx(Fge);function qx(t){return t&&t.__esModule?t:{default:t}}var Mge=Tm.flattenNames=function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[];return(0,Lge.default)(e,function(r){Array.isArray(r)?t(r).map(function(i){return n.push(i)}):(0,Dge.default)(r)?(0,Age.default)(r,function(i,s){i===!0&&n.push(s),n.push(s+"-"+i)}):(0,Rge.default)(r)&&n.push(r)}),n};Tm.default=Mge;var Nm={};function Bge(t,e){for(var n=-1,r=t==null?0:t.length;++n<r&&e(t[n],n,t)!==!1;);return t}var zge=Bge,jge=uu,Vge=function(){try{var t=jge(Object,"defineProperty");return t({},"",{}),t}catch{}}(),Wge=Vge,QD=Wge;function Uge(t,e,n){e=="__proto__"&&QD?QD(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var Zj=Uge,Gge=Zj,Hge=X_,qge=Object.prototype,Kge=qge.hasOwnProperty;function Xge(t,e,n){var r=t[e];(!(Kge.call(t,e)&&Hge(r,n))||n===void 0&&!(e in t))&&Gge(t,e,n)}var Jj=Xge,Yge=Jj,Qge=Zj;function Zge(t,e,n,r){var i=!n;n||(n={});for(var s=-1,a=e.length;++s<a;){var o=e[s],l=r?r(n[o],t[o],o,n,t):void 0;l===void 0&&(l=t[o]),i?Qge(n,o,l):Yge(n,o,l)}return n}var Kx=Zge,Jge=Kx,eye=Im;function tye(t,e){return t&&Jge(e,eye(e),t)}var nye=tye;function rye(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var iye=rye,sye=Rf,aye=H_,oye=iye,lye=Object.prototype,cye=lye.hasOwnProperty;function uye(t){if(!sye(t))return oye(t);var e=aye(t),n=[];for(var r in t)r=="constructor"&&(e||!cye.call(t,r))||n.push(r);return n}var dye=uye,fye=Ij,pye=dye,hye=zx;function mye(t){return hye(t)?fye(t,!0):pye(t)}var rI=mye,gye=Kx,yye=rI;function vye(t,e){return t&&gye(e,yye(e),t)}var xye=vye,d1={exports:{}};d1.exports;(function(t,e){var n=Ia,r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===r,a=s?n.Buffer:void 0,o=a?a.allocUnsafe:void 0;function l(c,u){if(u)return c.slice();var d=c.length,f=o?o(d):new c.constructor(d);return c.copy(f),f}t.exports=l})(d1,d1.exports);var bye=d1.exports;function wye(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}var Sye=wye,kye=Kx,Cye=J_;function $ye(t,e){return kye(t,Cye(t),e)}var Eye=$ye,Tye=Bj,_ye=K_,Iye=J_,Nye=jj,Rye=Object.getOwnPropertySymbols,Oye=Rye?function(t){for(var e=[];t;)Tye(e,Iye(t)),t=_ye(t);return e}:Nye,eV=Oye,Aye=Kx,Pye=eV;function Dye(t,e){return Aye(t,Pye(t),e)}var Fye=Dye,Lye=zj,Mye=eV,Bye=rI;function zye(t){return Lye(t,Bye,Mye)}var jye=zye,Vye=Object.prototype,Wye=Vye.hasOwnProperty;function Uye(t){var e=t.length,n=new t.constructor(e);return e&&typeof t[0]=="string"&&Wye.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var Gye=Uye,ZD=Mj;function Hye(t){var e=new t.constructor(t.byteLength);return new ZD(e).set(new ZD(t)),e}var iI=Hye,qye=iI;function Kye(t,e){var n=e?qye(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}var Xye=Kye,Yye=/\w*$/;function Qye(t){var e=new t.constructor(t.source,Yye.exec(t));return e.lastIndex=t.lastIndex,e}var Zye=Qye,JD=_m,eF=JD?JD.prototype:void 0,tF=eF?eF.valueOf:void 0;function Jye(t){return tF?Object(tF.call(t)):{}}var eve=Jye,tve=iI;function nve(t,e){var n=e?tve(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var rve=nve,ive=iI,sve=Xye,ave=Zye,ove=eve,lve=rve,cve="[object Boolean]",uve="[object Date]",dve="[object Map]",fve="[object Number]",pve="[object RegExp]",hve="[object Set]",mve="[object String]",gve="[object Symbol]",yve="[object ArrayBuffer]",vve="[object DataView]",xve="[object Float32Array]",bve="[object Float64Array]",wve="[object Int8Array]",Sve="[object Int16Array]",kve="[object Int32Array]",Cve="[object Uint8Array]",$ve="[object Uint8ClampedArray]",Eve="[object Uint16Array]",Tve="[object Uint32Array]";function _ve(t,e,n){var r=t.constructor;switch(e){case yve:return ive(t);case cve:case uve:return new r(+t);case vve:return sve(t,n);case xve:case bve:case wve:case Sve:case kve:case Cve:case $ve:case Eve:case Tve:return lve(t,n);case dve:return new r;case fve:case mve:return new r(t);case pve:return ave(t);case hve:return new r;case gve:return ove(t)}}var Ive=_ve,Nve=Rf,nF=Object.create,Rve=function(){function t(){}return function(e){if(!Nve(e))return{};if(nF)return nF(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}(),Ove=Rve,Ave=Ove,Pve=K_,Dve=H_;function Fve(t){return typeof t.constructor=="function"&&!Dve(t)?Ave(Pve(t)):{}}var Lve=Fve,Mve=Gx,Bve=wo,zve="[object Map]";function jve(t){return Bve(t)&&Mve(t)==zve}var Vve=jve,Wve=Vve,Uve=U_,rF=G_,iF=rF&&rF.isMap,Gve=iF?Uve(iF):Wve,Hve=Gve,qve=Gx,Kve=wo,Xve="[object Set]";function Yve(t){return Kve(t)&&qve(t)==Xve}var Qve=Yve,Zve=Qve,Jve=U_,sF=G_,aF=sF&&sF.isSet,e0e=aF?Jve(aF):Zve,t0e=e0e,n0e=Z_,r0e=zge,i0e=Jj,s0e=nye,a0e=xye,o0e=bye,l0e=Sye,c0e=Eye,u0e=Fye,d0e=Vj,f0e=jye,p0e=Gx,h0e=Gye,m0e=Ive,g0e=Lve,y0e=Us,v0e=V_,x0e=Hve,b0e=Rf,w0e=t0e,S0e=Im,k0e=rI,C0e=1,$0e=2,E0e=4,tV="[object Arguments]",T0e="[object Array]",_0e="[object Boolean]",I0e="[object Date]",N0e="[object Error]",nV="[object Function]",R0e="[object GeneratorFunction]",O0e="[object Map]",A0e="[object Number]",rV="[object Object]",P0e="[object RegExp]",D0e="[object Set]",F0e="[object String]",L0e="[object Symbol]",M0e="[object WeakMap]",B0e="[object ArrayBuffer]",z0e="[object DataView]",j0e="[object Float32Array]",V0e="[object Float64Array]",W0e="[object Int8Array]",U0e="[object Int16Array]",G0e="[object Int32Array]",H0e="[object Uint8Array]",q0e="[object Uint8ClampedArray]",K0e="[object Uint16Array]",X0e="[object Uint32Array]",Dt={};Dt[tV]=Dt[T0e]=Dt[B0e]=Dt[z0e]=Dt[_0e]=Dt[I0e]=Dt[j0e]=Dt[V0e]=Dt[W0e]=Dt[U0e]=Dt[G0e]=Dt[O0e]=Dt[A0e]=Dt[rV]=Dt[P0e]=Dt[D0e]=Dt[F0e]=Dt[L0e]=Dt[H0e]=Dt[q0e]=Dt[K0e]=Dt[X0e]=!0;Dt[N0e]=Dt[nV]=Dt[M0e]=!1;function h0(t,e,n,r,i,s){var a,o=e&C0e,l=e&$0e,c=e&E0e;if(n&&(a=i?n(t,r,i,s):n(t)),a!==void 0)return a;if(!b0e(t))return t;var u=y0e(t);if(u){if(a=h0e(t),!o)return l0e(t,a)}else{var d=p0e(t),f=d==nV||d==R0e;if(v0e(t))return o0e(t,o);if(d==rV||d==tV||f&&!i){if(a=l||f?{}:g0e(t),!o)return l?u0e(t,a0e(a,t)):c0e(t,s0e(a,t))}else{if(!Dt[d])return i?t:{};a=m0e(t,d,o)}}s||(s=new n0e);var h=s.get(t);if(h)return h;s.set(t,a),w0e(t)?t.forEach(function(x){a.add(h0(x,e,n,x,t,s))}):x0e(t)&&t.forEach(function(x,v){a.set(v,h0(x,e,n,v,t,s))});var g=c?l?f0e:d0e:l?k0e:S0e,y=u?void 0:g(t);return r0e(y||t,function(x,v){y&&(v=x,x=t[v]),i0e(a,v,h0(x,e,n,v,t,s))}),a}var Y0e=h0,Q0e=Y0e,Z0e=1,J0e=4;function e1e(t){return Q0e(t,Z0e|J0e)}var t1e=e1e;Object.defineProperty(Nm,"__esModule",{value:!0});Nm.mergeClasses=void 0;var n1e=q_,r1e=iV(n1e),i1e=t1e,s1e=iV(i1e),a1e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};function iV(t){return t&&t.__esModule?t:{default:t}}var o1e=Nm.mergeClasses=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=e.default&&(0,s1e.default)(e.default)||{};return n.map(function(i){var s=e[i];return s&&(0,r1e.default)(s,function(a,o){r[o]||(r[o]={}),r[o]=a1e({},r[o],s[o])}),i}),r};Nm.default=o1e;var Rm={};Object.defineProperty(Rm,"__esModule",{value:!0});Rm.autoprefix=void 0;var l1e=q_,oF=u1e(l1e),c1e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};function u1e(t){return t&&t.__esModule?t:{default:t}}var d1e={borderRadius:function(e){return{msBorderRadius:e,MozBorderRadius:e,OBorderRadius:e,WebkitBorderRadius:e,borderRadius:e}},boxShadow:function(e){return{msBoxShadow:e,MozBoxShadow:e,OBoxShadow:e,WebkitBoxShadow:e,boxShadow:e}},userSelect:function(e){return{WebkitTouchCallout:e,KhtmlUserSelect:e,MozUserSelect:e,msUserSelect:e,WebkitUserSelect:e,userSelect:e}},flex:function(e){return{WebkitBoxFlex:e,MozBoxFlex:e,WebkitFlex:e,msFlex:e,flex:e}},flexBasis:function(e){return{WebkitFlexBasis:e,flexBasis:e}},justifyContent:function(e){return{WebkitJustifyContent:e,justifyContent:e}},transition:function(e){return{msTransition:e,MozTransition:e,OTransition:e,WebkitTransition:e,transition:e}},transform:function(e){return{msTransform:e,MozTransform:e,OTransform:e,WebkitTransform:e,transform:e}},absolute:function(e){var n=e&&e.split(" ");return{position:"absolute",top:n&&n[0],right:n&&n[1],bottom:n&&n[2],left:n&&n[3]}},extend:function(e,n){var r=n[e];return r||{extend:e}}},f1e=Rm.autoprefix=function(e){var n={};return(0,oF.default)(e,function(r,i){var s={};(0,oF.default)(r,function(a,o){var l=d1e[o];l?s=c1e({},s,l(a)):s[o]=a}),n[i]=s}),n};Rm.default=f1e;var Om={};Object.defineProperty(Om,"__esModule",{value:!0});Om.hover=void 0;var p1e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},h1e=A,Hk=m1e(h1e);function m1e(t){return t&&t.__esModule?t:{default:t}}function g1e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lF(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function y1e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var v1e=Om.hover=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(r){y1e(i,r);function i(){var s,a,o,l;g1e(this,i);for(var c=arguments.length,u=Array(c),d=0;d<c;d++)u[d]=arguments[d];return l=(a=(o=lF(this,(s=i.__proto__||Object.getPrototypeOf(i)).call.apply(s,[this].concat(u))),o),o.state={hover:!1},o.handleMouseOver=function(){return o.setState({hover:!0})},o.handleMouseOut=function(){return o.setState({hover:!1})},o.render=function(){return Hk.default.createElement(n,{onMouseOver:o.handleMouseOver,onMouseOut:o.handleMouseOut},Hk.default.createElement(e,p1e({},o.props,o.state)))},a),lF(o,l)}return i}(Hk.default.Component)};Om.default=v1e;var Am={};Object.defineProperty(Am,"__esModule",{value:!0});Am.active=void 0;var x1e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},b1e=A,qk=w1e(b1e);function w1e(t){return t&&t.__esModule?t:{default:t}}function S1e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function cF(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function k1e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var C1e=Am.active=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(r){k1e(i,r);function i(){var s,a,o,l;S1e(this,i);for(var c=arguments.length,u=Array(c),d=0;d<c;d++)u[d]=arguments[d];return l=(a=(o=cF(this,(s=i.__proto__||Object.getPrototypeOf(i)).call.apply(s,[this].concat(u))),o),o.state={active:!1},o.handleMouseDown=function(){return o.setState({active:!0})},o.handleMouseUp=function(){return o.setState({active:!1})},o.render=function(){return qk.default.createElement(n,{onMouseDown:o.handleMouseDown,onMouseUp:o.handleMouseUp},qk.default.createElement(e,x1e({},o.props,o.state)))},a),cF(o,l)}return i}(qk.default.Component)};Am.default=C1e;var sI={};Object.defineProperty(sI,"__esModule",{value:!0});var $1e=function(e,n){var r={},i=function(a){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;r[a]=o};return e===0&&i("first-child"),e===n-1&&i("last-child"),(e===0||e%2===0)&&i("even"),Math.abs(e%2)===1&&i("odd"),i("nth-child",e),r};sI.default=$1e;Object.defineProperty(es,"__esModule",{value:!0});es.ReactCSS=es.loop=es.handleActive=aI=es.handleHover=es.hover=void 0;var E1e=Tm,T1e=Lf(E1e),_1e=Nm,I1e=Lf(_1e),N1e=Rm,R1e=Lf(N1e),O1e=Om,sV=Lf(O1e),A1e=Am,P1e=Lf(A1e),D1e=sI,F1e=Lf(D1e);function Lf(t){return t&&t.__esModule?t:{default:t}}es.hover=sV.default;var aI=es.handleHover=sV.default;es.handleActive=P1e.default;es.loop=F1e.default;var L1e=es.ReactCSS=function(e){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var s=(0,T1e.default)(r),a=(0,I1e.default)(e,s);return(0,R1e.default)(a)},Ge=es.default=L1e,M1e=function(e,n,r,i,s){var a=s.clientWidth,o=s.clientHeight,l=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,c=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,u=l-(s.getBoundingClientRect().left+window.pageXOffset),d=c-(s.getBoundingClientRect().top+window.pageYOffset);if(r==="vertical"){var f=void 0;if(d<0?f=0:d>o?f=1:f=Math.round(d*100/o)/100,n.a!==f)return{h:n.h,s:n.s,l:n.l,a:f,source:"rgb"}}else{var h=void 0;if(u<0?h=0:u>a?h=1:h=Math.round(u*100/a)/100,i!==h)return{h:n.h,s:n.s,l:n.l,a:h,source:"rgb"}}return null},Kk={},B1e=function(e,n,r,i){if(typeof document>"u"&&!i)return null;var s=i?new i:document.createElement("canvas");s.width=r*2,s.height=r*2;var a=s.getContext("2d");return a?(a.fillStyle=e,a.fillRect(0,0,s.width,s.height),a.fillStyle=n,a.fillRect(0,0,r,r),a.translate(r,r),a.fillRect(0,0,r,r),s.toDataURL()):null},z1e=function(e,n,r,i){var s=e+"-"+n+"-"+r+(i?"-server":"");if(Kk[s])return Kk[s];var a=B1e(e,n,r,i);return Kk[s]=a,a},uF=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Mf=function(e){var n=e.white,r=e.grey,i=e.size,s=e.renderers,a=e.borderRadius,o=e.boxShadow,l=e.children,c=Ge({default:{grid:{borderRadius:a,boxShadow:o,absolute:"0px 0px 0px 0px",background:"url("+z1e(n,r,i,s.canvas)+") center left"}}});return A.isValidElement(l)?M.cloneElement(l,uF({},l.props,{style:uF({},l.props.style,c.grid)})):M.createElement("div",{style:c.grid})};Mf.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}};var j1e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},V1e=function(){function t(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function W1e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function dF(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function U1e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var oI=function(t){U1e(e,t);function e(){var n,r,i,s;W1e(this,e);for(var a=arguments.length,o=Array(a),l=0;l<a;l++)o[l]=arguments[l];return s=(r=(i=dF(this,(n=e.__proto__||Object.getPrototypeOf(e)).call.apply(n,[this].concat(o))),i),i.handleChange=function(c){var u=M1e(c,i.props.hsl,i.props.direction,i.props.a,i.container);u&&typeof i.props.onChange=="function"&&i.props.onChange(u,c)},i.handleMouseDown=function(c){i.handleChange(c),window.addEventListener("mousemove",i.handleChange),window.addEventListener("mouseup",i.handleMouseUp)},i.handleMouseUp=function(){i.unbindEventListeners()},i.unbindEventListeners=function(){window.removeEventListener("mousemove",i.handleChange),window.removeEventListener("mouseup",i.handleMouseUp)},r),dF(i,s)}return V1e(e,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var r=this,i=this.props.rgb,s=Ge({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+i.r+","+i.g+","+i.b+`, 0) 0%,
           rgba(`+i.r+","+i.g+","+i.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:i.a*100+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+i.r+","+i.g+","+i.b+`, 0) 0%,
           rgba(`+i.r+","+i.g+","+i.b+", 1) 100%)"},pointer:{left:0,top:i.a*100+"%"}},overwrite:j1e({},this.props.style)},{vertical:this.props.direction==="vertical",overwrite:!0});return M.createElement("div",{style:s.alpha},M.createElement("div",{style:s.checkboard},M.createElement(Mf,{renderers:this.props.renderers})),M.createElement("div",{style:s.gradient}),M.createElement("div",{style:s.container,ref:function(o){return r.container=o},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},M.createElement("div",{style:s.pointer},this.props.pointer?M.createElement(this.props.pointer,this.props):M.createElement("div",{style:s.slider}))))}}]),e}(A.PureComponent||A.Component),G1e=function(){function t(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function H1e(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function q1e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function K1e(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function X1e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Y1e=1,aV=38,Q1e=40,Z1e=[aV,Q1e],J1e=function(e){return Z1e.indexOf(e)>-1},exe=function(e){return Number(String(e).replace(/%/g,""))},txe=1,at=function(t){X1e(e,t);function e(n){q1e(this,e);var r=K1e(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.handleBlur=function(){r.state.blurValue&&r.setState({value:r.state.blurValue,blurValue:null})},r.handleChange=function(i){r.setUpdatedValue(i.target.value,i)},r.handleKeyDown=function(i){var s=exe(i.target.value);if(!isNaN(s)&&J1e(i.keyCode)){var a=r.getArrowOffset(),o=i.keyCode===aV?s+a:s-a;r.setUpdatedValue(o,i)}},r.handleDrag=function(i){if(r.props.dragLabel){var s=Math.round(r.props.value+i.movementX);s>=0&&s<=r.props.dragMax&&r.props.onChange&&r.props.onChange(r.getValueObjectWithLabel(s),i)}},r.handleMouseDown=function(i){r.props.dragLabel&&(i.preventDefault(),r.handleDrag(i),window.addEventListener("mousemove",r.handleDrag),window.addEventListener("mouseup",r.handleMouseUp))},r.handleMouseUp=function(){r.unbindEventListeners()},r.unbindEventListeners=function(){window.removeEventListener("mousemove",r.handleDrag),window.removeEventListener("mouseup",r.handleMouseUp)},r.state={value:String(n.value).toUpperCase(),blurValue:String(n.value).toUpperCase()},r.inputId="rc-editable-input-"+txe++,r}return G1e(e,[{key:"componentDidUpdate",value:function(r,i){this.props.value!==this.state.value&&(r.value!==this.props.value||i.value!==this.state.value)&&(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(r){return H1e({},this.props.label,r)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||Y1e}},{key:"setUpdatedValue",value:function(r,i){var s=this.props.label?this.getValueObjectWithLabel(r):r;this.props.onChange&&this.props.onChange(s,i),this.setState({value:r})}},{key:"render",value:function(){var r=this,i=Ge({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return M.createElement("div",{style:i.wrap},M.createElement("input",{id:this.inputId,style:i.input,ref:function(a){return r.input=a},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?M.createElement("label",{htmlFor:this.inputId,style:i.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),e}(A.PureComponent||A.Component),nxe=function(e,n,r,i){var s=i.clientWidth,a=i.clientHeight,o=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,l=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,c=o-(i.getBoundingClientRect().left+window.pageXOffset),u=l-(i.getBoundingClientRect().top+window.pageYOffset);if(n==="vertical"){var d=void 0;if(u<0)d=359;else if(u>a)d=0;else{var f=-(u*100/a)+100;d=360*f/100}if(r.h!==d)return{h:d,s:r.s,l:r.l,a:r.a,source:"hsl"}}else{var h=void 0;if(c<0)h=0;else if(c>s)h=359;else{var g=c*100/s;h=360*g/100}if(r.h!==h)return{h,s:r.s,l:r.l,a:r.a,source:"hsl"}}return null},rxe=function(){function t(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function ixe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fF(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function sxe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Bf=function(t){sxe(e,t);function e(){var n,r,i,s;ixe(this,e);for(var a=arguments.length,o=Array(a),l=0;l<a;l++)o[l]=arguments[l];return s=(r=(i=fF(this,(n=e.__proto__||Object.getPrototypeOf(e)).call.apply(n,[this].concat(o))),i),i.handleChange=function(c){var u=nxe(c,i.props.direction,i.props.hsl,i.container);u&&typeof i.props.onChange=="function"&&i.props.onChange(u,c)},i.handleMouseDown=function(c){i.handleChange(c),window.addEventListener("mousemove",i.handleChange),window.addEventListener("mouseup",i.handleMouseUp)},i.handleMouseUp=function(){i.unbindEventListeners()},r),fF(i,s)}return rxe(e,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var r=this,i=this.props.direction,s=i===void 0?"horizontal":i,a=Ge({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:this.props.hsl.h*100/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-(this.props.hsl.h*100/360)+100+"%"}}},{vertical:s==="vertical"});return M.createElement("div",{style:a.hue},M.createElement("div",{className:"hue-"+s,style:a.container,ref:function(l){return r.container=l},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},M.createElement("style",null,`
            .hue-horizontal {
              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0
                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to right, #f00 0%, #ff0
                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }

            .hue-vertical {
              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,
                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,
                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }
          `),M.createElement("div",{style:a.pointer},this.props.pointer?M.createElement(this.props.pointer,this.props):M.createElement("div",{style:a.slider}))))}}]),e}(A.PureComponent||A.Component);function axe(){this.__data__=[],this.size=0}function Pm(t,e){return t===e||t!==t&&e!==e}function Xx(t,e){for(var n=t.length;n--;)if(Pm(t[n][0],e))return n;return-1}var oxe=Array.prototype,lxe=oxe.splice;function cxe(t){var e=this.__data__,n=Xx(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():lxe.call(e,n,1),--this.size,!0}function uxe(t){var e=this.__data__,n=Xx(e,t);return n<0?void 0:e[n][1]}function dxe(t){return Xx(this.__data__,t)>-1}function fxe(t,e){var n=this.__data__,r=Xx(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}function So(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}So.prototype.clear=axe;So.prototype.delete=cxe;So.prototype.get=uxe;So.prototype.has=dxe;So.prototype.set=fxe;function pxe(){this.__data__=new So,this.size=0}function hxe(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function mxe(t){return this.__data__.get(t)}function gxe(t){return this.__data__.has(t)}var oV=typeof global=="object"&&global&&global.Object===Object&&global,yxe=typeof self=="object"&&self&&self.Object===Object&&self,Gs=oV||yxe||Function("return this")(),xl=Gs.Symbol,lV=Object.prototype,vxe=lV.hasOwnProperty,xxe=lV.toString,Lp=xl?xl.toStringTag:void 0;function bxe(t){var e=vxe.call(t,Lp),n=t[Lp];try{t[Lp]=void 0;var r=!0}catch{}var i=xxe.call(t);return r&&(e?t[Lp]=n:delete t[Lp]),i}var wxe=Object.prototype,Sxe=wxe.toString;function kxe(t){return Sxe.call(t)}var Cxe="[object Null]",$xe="[object Undefined]",pF=xl?xl.toStringTag:void 0;function du(t){return t==null?t===void 0?$xe:Cxe:pF&&pF in Object(t)?bxe(t):kxe(t)}function ps(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Exe="[object AsyncFunction]",Txe="[object Function]",_xe="[object GeneratorFunction]",Ixe="[object Proxy]";function lI(t){if(!ps(t))return!1;var e=du(t);return e==Txe||e==_xe||e==Exe||e==Ixe}var Xk=Gs["__core-js_shared__"],hF=function(){var t=/[^.]+$/.exec(Xk&&Xk.keys&&Xk.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function Nxe(t){return!!hF&&hF in t}var Rxe=Function.prototype,Oxe=Rxe.toString;function fu(t){if(t!=null){try{return Oxe.call(t)}catch{}try{return t+""}catch{}}return""}var Axe=/[\\^$.*+?()[\]{}|]/g,Pxe=/^\[object .+?Constructor\]$/,Dxe=Function.prototype,Fxe=Object.prototype,Lxe=Dxe.toString,Mxe=Fxe.hasOwnProperty,Bxe=RegExp("^"+Lxe.call(Mxe).replace(Axe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function zxe(t){if(!ps(t)||Nxe(t))return!1;var e=lI(t)?Bxe:Pxe;return e.test(fu(t))}function jxe(t,e){return t==null?void 0:t[e]}function pu(t,e){var n=jxe(t,e);return zxe(n)?n:void 0}var em=pu(Gs,"Map"),tm=pu(Object,"create");function Vxe(){this.__data__=tm?tm(null):{},this.size=0}function Wxe(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var Uxe="__lodash_hash_undefined__",Gxe=Object.prototype,Hxe=Gxe.hasOwnProperty;function qxe(t){var e=this.__data__;if(tm){var n=e[t];return n===Uxe?void 0:n}return Hxe.call(e,t)?e[t]:void 0}var Kxe=Object.prototype,Xxe=Kxe.hasOwnProperty;function Yxe(t){var e=this.__data__;return tm?e[t]!==void 0:Xxe.call(e,t)}var Qxe="__lodash_hash_undefined__";function Zxe(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=tm&&e===void 0?Qxe:e,this}function Vc(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Vc.prototype.clear=Vxe;Vc.prototype.delete=Wxe;Vc.prototype.get=qxe;Vc.prototype.has=Yxe;Vc.prototype.set=Zxe;function Jxe(){this.size=0,this.__data__={hash:new Vc,map:new(em||So),string:new Vc}}function ebe(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function Yx(t,e){var n=t.__data__;return ebe(e)?n[typeof e=="string"?"string":"hash"]:n.map}function tbe(t){var e=Yx(this,t).delete(t);return this.size-=e?1:0,e}function nbe(t){return Yx(this,t).get(t)}function rbe(t){return Yx(this,t).has(t)}function ibe(t,e){var n=Yx(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}function ko(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}ko.prototype.clear=Jxe;ko.prototype.delete=tbe;ko.prototype.get=nbe;ko.prototype.has=rbe;ko.prototype.set=ibe;var sbe=200;function abe(t,e){var n=this.__data__;if(n instanceof So){var r=n.__data__;if(!em||r.length<sbe-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new ko(r)}return n.set(t,e),this.size=n.size,this}function ga(t){var e=this.__data__=new So(t);this.size=e.size}ga.prototype.clear=pxe;ga.prototype.delete=hxe;ga.prototype.get=mxe;ga.prototype.has=gxe;ga.prototype.set=abe;var f1=function(){try{var t=pu(Object,"defineProperty");return t({},"",{}),t}catch{}}();function cI(t,e,n){e=="__proto__"&&f1?f1(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function iE(t,e,n){(n!==void 0&&!Pm(t[e],n)||n===void 0&&!(e in t))&&cI(t,e,n)}function obe(t){return function(e,n,r){for(var i=-1,s=Object(e),a=r(e),o=a.length;o--;){var l=a[t?o:++i];if(n(s[l],l,s)===!1)break}return e}}var cV=obe(),uV=typeof $i=="object"&&$i&&!$i.nodeType&&$i,mF=uV&&typeof Ei=="object"&&Ei&&!Ei.nodeType&&Ei,lbe=mF&&mF.exports===uV,gF=lbe?Gs.Buffer:void 0,yF=gF?gF.allocUnsafe:void 0;function cbe(t,e){if(e)return t.slice();var n=t.length,r=yF?yF(n):new t.constructor(n);return t.copy(r),r}var p1=Gs.Uint8Array;function ube(t){var e=new t.constructor(t.byteLength);return new p1(e).set(new p1(t)),e}function dbe(t,e){var n=e?ube(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function fbe(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}var vF=Object.create,pbe=function(){function t(){}return function(e){if(!ps(e))return{};if(vF)return vF(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();function dV(t,e){return function(n){return t(e(n))}}var hbe=dV(Object.getPrototypeOf,Object);const fV=hbe;var mbe=Object.prototype;function uI(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||mbe;return t===n}function gbe(t){return typeof t.constructor=="function"&&!uI(t)?pbe(fV(t)):{}}function bl(t){return t!=null&&typeof t=="object"}var ybe="[object Arguments]";function xF(t){return bl(t)&&du(t)==ybe}var pV=Object.prototype,vbe=pV.hasOwnProperty,xbe=pV.propertyIsEnumerable,bbe=xF(function(){return arguments}())?xF:function(t){return bl(t)&&vbe.call(t,"callee")&&!xbe.call(t,"callee")};const h1=bbe;var Pi=Array.isArray,wbe=9007199254740991;function dI(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=wbe}function zf(t){return t!=null&&dI(t.length)&&!lI(t)}function Sbe(t){return bl(t)&&zf(t)}function kbe(){return!1}var hV=typeof $i=="object"&&$i&&!$i.nodeType&&$i,bF=hV&&typeof Ei=="object"&&Ei&&!Ei.nodeType&&Ei,Cbe=bF&&bF.exports===hV,wF=Cbe?Gs.Buffer:void 0,$be=wF?wF.isBuffer:void 0,m1=$be||kbe,Ebe="[object Object]",Tbe=Function.prototype,_be=Object.prototype,mV=Tbe.toString,Ibe=_be.hasOwnProperty,Nbe=mV.call(Object);function Rbe(t){if(!bl(t)||du(t)!=Ebe)return!1;var e=fV(t);if(e===null)return!0;var n=Ibe.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&mV.call(n)==Nbe}var Obe="[object Arguments]",Abe="[object Array]",Pbe="[object Boolean]",Dbe="[object Date]",Fbe="[object Error]",Lbe="[object Function]",Mbe="[object Map]",Bbe="[object Number]",zbe="[object Object]",jbe="[object RegExp]",Vbe="[object Set]",Wbe="[object String]",Ube="[object WeakMap]",Gbe="[object ArrayBuffer]",Hbe="[object DataView]",qbe="[object Float32Array]",Kbe="[object Float64Array]",Xbe="[object Int8Array]",Ybe="[object Int16Array]",Qbe="[object Int32Array]",Zbe="[object Uint8Array]",Jbe="[object Uint8ClampedArray]",ewe="[object Uint16Array]",twe="[object Uint32Array]",Ut={};Ut[qbe]=Ut[Kbe]=Ut[Xbe]=Ut[Ybe]=Ut[Qbe]=Ut[Zbe]=Ut[Jbe]=Ut[ewe]=Ut[twe]=!0;Ut[Obe]=Ut[Abe]=Ut[Gbe]=Ut[Pbe]=Ut[Hbe]=Ut[Dbe]=Ut[Fbe]=Ut[Lbe]=Ut[Mbe]=Ut[Bbe]=Ut[zbe]=Ut[jbe]=Ut[Vbe]=Ut[Wbe]=Ut[Ube]=!1;function nwe(t){return bl(t)&&dI(t.length)&&!!Ut[du(t)]}function rwe(t){return function(e){return t(e)}}var gV=typeof $i=="object"&&$i&&!$i.nodeType&&$i,Th=gV&&typeof Ei=="object"&&Ei&&!Ei.nodeType&&Ei,iwe=Th&&Th.exports===gV,Yk=iwe&&oV.process,SF=function(){try{var t=Th&&Th.require&&Th.require("util").types;return t||Yk&&Yk.binding&&Yk.binding("util")}catch{}}(),kF=SF&&SF.isTypedArray,fI=kF?rwe(kF):nwe;function sE(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}var swe=Object.prototype,awe=swe.hasOwnProperty;function owe(t,e,n){var r=t[e];(!(awe.call(t,e)&&Pm(r,n))||n===void 0&&!(e in t))&&cI(t,e,n)}function lwe(t,e,n,r){var i=!n;n||(n={});for(var s=-1,a=e.length;++s<a;){var o=e[s],l=r?r(n[o],t[o],o,n,t):void 0;l===void 0&&(l=t[o]),i?cI(n,o,l):owe(n,o,l)}return n}function cwe(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var uwe=9007199254740991,dwe=/^(?:0|[1-9]\d*)$/;function pI(t,e){var n=typeof t;return e=e??uwe,!!e&&(n=="number"||n!="symbol"&&dwe.test(t))&&t>-1&&t%1==0&&t<e}var fwe=Object.prototype,pwe=fwe.hasOwnProperty;function yV(t,e){var n=Pi(t),r=!n&&h1(t),i=!n&&!r&&m1(t),s=!n&&!r&&!i&&fI(t),a=n||r||i||s,o=a?cwe(t.length,String):[],l=o.length;for(var c in t)(e||pwe.call(t,c))&&!(a&&(c=="length"||i&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||pI(c,l)))&&o.push(c);return o}function hwe(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var mwe=Object.prototype,gwe=mwe.hasOwnProperty;function ywe(t){if(!ps(t))return hwe(t);var e=uI(t),n=[];for(var r in t)r=="constructor"&&(e||!gwe.call(t,r))||n.push(r);return n}function vV(t){return zf(t)?yV(t,!0):ywe(t)}function vwe(t){return lwe(t,vV(t))}function xwe(t,e,n,r,i,s,a){var o=sE(t,n),l=sE(e,n),c=a.get(l);if(c){iE(t,n,c);return}var u=s?s(o,l,n+"",t,e,a):void 0,d=u===void 0;if(d){var f=Pi(l),h=!f&&m1(l),g=!f&&!h&&fI(l);u=l,f||h||g?Pi(o)?u=o:Sbe(o)?u=fbe(o):h?(d=!1,u=cbe(l,!0)):g?(d=!1,u=dbe(l,!0)):u=[]:Rbe(l)||h1(l)?(u=o,h1(o)?u=vwe(o):(!ps(o)||lI(o))&&(u=gbe(l))):d=!1}d&&(a.set(l,u),i(u,l,r,s,a),a.delete(l)),iE(t,n,u)}function xV(t,e,n,r,i){t!==e&&cV(e,function(s,a){if(i||(i=new ga),ps(s))xwe(t,e,a,n,xV,r,i);else{var o=r?r(sE(t,a),s,a+"",t,e,i):void 0;o===void 0&&(o=s),iE(t,a,o)}},vV)}function Qx(t){return t}function bwe(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var CF=Math.max;function wwe(t,e,n){return e=CF(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,s=CF(r.length-e,0),a=Array(s);++i<s;)a[i]=r[e+i];i=-1;for(var o=Array(e+1);++i<e;)o[i]=r[i];return o[e]=n(a),bwe(t,this,o)}}function Swe(t){return function(){return t}}var kwe=f1?function(t,e){return f1(t,"toString",{configurable:!0,enumerable:!1,value:Swe(e),writable:!0})}:Qx;const Cwe=kwe;var $we=800,Ewe=16,Twe=Date.now;function _we(t){var e=0,n=0;return function(){var r=Twe(),i=Ewe-(r-n);if(n=r,i>0){if(++e>=$we)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var Iwe=_we(Cwe);function Nwe(t,e){return Iwe(wwe(t,e,Qx),t+"")}function Rwe(t,e,n){if(!ps(n))return!1;var r=typeof e;return(r=="number"?zf(n)&&pI(e,n.length):r=="string"&&e in n)?Pm(n[e],t):!1}function Owe(t){return Nwe(function(e,n){var r=-1,i=n.length,s=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(s=t.length>3&&typeof s=="function"?(i--,s):void 0,a&&Rwe(n[0],n[1],a)&&(s=i<3?void 0:s,i=1),e=Object(e);++r<i;){var o=n[r];o&&t(e,o,r,s)}return e})}var hi=Owe(function(t,e,n){xV(t,e,n)}),Dm=function(e){var n=e.zDepth,r=e.radius,i=e.background,s=e.children,a=e.styles,o=a===void 0?{}:a,l=Ge(hi({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+n+"px "+n*4+"px rgba(0,0,0,.24)",borderRadius:r,background:i}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},o),{"zDepth-1":n===1});return M.createElement("div",{style:l.wrap},M.createElement("div",{style:l.bg}),M.createElement("div",{style:l.content},s))};Dm.propTypes={background:ge.string,zDepth:ge.oneOf([0,1,2,3,4,5]),radius:ge.number,styles:ge.object};Dm.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}};var Qk=function(){return Gs.Date.now()},Awe=/\s/;function Pwe(t){for(var e=t.length;e--&&Awe.test(t.charAt(e)););return e}var Dwe=/^\s+/;function Fwe(t){return t&&t.slice(0,Pwe(t)+1).replace(Dwe,"")}var Lwe="[object Symbol]";function Zx(t){return typeof t=="symbol"||bl(t)&&du(t)==Lwe}var $F=NaN,Mwe=/^[-+]0x[0-9a-f]+$/i,Bwe=/^0b[01]+$/i,zwe=/^0o[0-7]+$/i,jwe=parseInt;function EF(t){if(typeof t=="number")return t;if(Zx(t))return $F;if(ps(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=ps(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=Fwe(t);var n=Bwe.test(t);return n||zwe.test(t)?jwe(t.slice(2),n?2:8):Mwe.test(t)?$F:+t}var Vwe="Expected a function",Wwe=Math.max,Uwe=Math.min;function bV(t,e,n){var r,i,s,a,o,l,c=0,u=!1,d=!1,f=!0;if(typeof t!="function")throw new TypeError(Vwe);e=EF(e)||0,ps(n)&&(u=!!n.leading,d="maxWait"in n,s=d?Wwe(EF(n.maxWait)||0,e):s,f="trailing"in n?!!n.trailing:f);function h(T){var _=r,R=i;return r=i=void 0,c=T,a=t.apply(R,_),a}function g(T){return c=T,o=setTimeout(v,e),u?h(T):a}function y(T){var _=T-l,R=T-c,P=e-_;return d?Uwe(P,s-R):P}function x(T){var _=T-l,R=T-c;return l===void 0||_>=e||_<0||d&&R>=s}function v(){var T=Qk();if(x(T))return b(T);o=setTimeout(v,y(T))}function b(T){return o=void 0,f&&r?h(T):(r=i=void 0,a)}function S(){o!==void 0&&clearTimeout(o),c=0,r=l=i=o=void 0}function k(){return o===void 0?a:b(Qk())}function $(){var T=Qk(),_=x(T);if(r=arguments,i=this,l=T,_){if(o===void 0)return g(l);if(d)return clearTimeout(o),o=setTimeout(v,e),h(l)}return o===void 0&&(o=setTimeout(v,e)),a}return $.cancel=S,$.flush=k,$}var Gwe="Expected a function";function Hwe(t,e,n){var r=!0,i=!0;if(typeof t!="function")throw new TypeError(Gwe);return ps(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),bV(t,e,{leading:r,maxWait:e,trailing:i})}var qwe=function(e,n,r){var i=r.getBoundingClientRect(),s=i.width,a=i.height,o=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,l=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,c=o-(r.getBoundingClientRect().left+window.pageXOffset),u=l-(r.getBoundingClientRect().top+window.pageYOffset);c<0?c=0:c>s&&(c=s),u<0?u=0:u>a&&(u=a);var d=c/s,f=1-u/a;return{h:n.h,s:d,v:f,a:n.a,source:"hsv"}},Kwe=function(){function t(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function Xwe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ywe(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Qwe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Jx=function(t){Qwe(e,t);function e(n){Xwe(this,e);var r=Ywe(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return r.handleChange=function(i){typeof r.props.onChange=="function"&&r.throttle(r.props.onChange,qwe(i,r.props.hsl,r.container),i)},r.handleMouseDown=function(i){r.handleChange(i);var s=r.getContainerRenderWindow();s.addEventListener("mousemove",r.handleChange),s.addEventListener("mouseup",r.handleMouseUp)},r.handleMouseUp=function(){r.unbindEventListeners()},r.throttle=Hwe(function(i,s,a){i(s,a)},50),r}return Kwe(e,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"getContainerRenderWindow",value:function(){for(var r=this.container,i=window;!i.document.contains(r)&&i.parent!==i;)i=i.parent;return i}},{key:"unbindEventListeners",value:function(){var r=this.getContainerRenderWindow();r.removeEventListener("mousemove",this.handleChange),r.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var r=this,i=this.props.style||{},s=i.color,a=i.white,o=i.black,l=i.pointer,c=i.circle,u=Ge({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-(this.props.hsv.v*100)+100+"%",left:this.props.hsv.s*100+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:`0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),
            0 0 1px 2px rgba(0,0,0,.4)`,borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:s,white:a,black:o,pointer:l,circle:c}},{custom:!!this.props.style});return M.createElement("div",{style:u.color,ref:function(f){return r.container=f},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},M.createElement("style",null,`
          .saturation-white {
            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));
            background: linear-gradient(to right, #fff, rgba(255,255,255,0));
          }
          .saturation-black {
            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));
            background: linear-gradient(to top, #000, rgba(0,0,0,0));
          }
        `),M.createElement("div",{style:u.white,className:"saturation-white"},M.createElement("div",{style:u.black,className:"saturation-black"}),M.createElement("div",{style:u.pointer},this.props.pointer?M.createElement(this.props.pointer,this.props):M.createElement("div",{style:u.circle}))))}}]),e}(A.PureComponent||A.Component);function Zwe(t,e){for(var n=-1,r=t==null?0:t.length;++n<r&&e(t[n],n,t)!==!1;);return t}var Jwe=dV(Object.keys,Object),e2e=Object.prototype,t2e=e2e.hasOwnProperty;function n2e(t){if(!uI(t))return Jwe(t);var e=[];for(var n in Object(t))t2e.call(t,n)&&n!="constructor"&&e.push(n);return e}function hI(t){return zf(t)?yV(t):n2e(t)}function r2e(t,e){return t&&cV(t,e,hI)}function i2e(t,e){return function(n,r){if(n==null)return n;if(!zf(n))return t(n,r);for(var i=n.length,s=e?i:-1,a=Object(n);(e?s--:++s<i)&&r(a[s],s,a)!==!1;);return n}}var s2e=i2e(r2e);const wV=s2e;function a2e(t){return typeof t=="function"?t:Qx}function o2e(t,e){var n=Pi(t)?Zwe:wV;return n(t,a2e(e))}function g1(t){"@babel/helpers - typeof";return g1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g1(t)}var l2e=/^\s+/,c2e=/\s+$/;function Le(t,e){if(t=t||"",e=e||{},t instanceof Le)return t;if(!(this instanceof Le))return new Le(t,e);var n=u2e(t);this._originalInput=t,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||n.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=n.ok}Le.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},getLuminance:function(){var e=this.toRgb(),n,r,i,s,a,o;return n=e.r/255,r=e.g/255,i=e.b/255,n<=.03928?s=n/12.92:s=Math.pow((n+.055)/1.055,2.4),r<=.03928?a=r/12.92:a=Math.pow((r+.055)/1.055,2.4),i<=.03928?o=i/12.92:o=Math.pow((i+.055)/1.055,2.4),.2126*s+.7152*a+.0722*o},setAlpha:function(e){return this._a=SV(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=_F(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=_F(this._r,this._g,this._b),n=Math.round(e.h*360),r=Math.round(e.s*100),i=Math.round(e.v*100);return this._a==1?"hsv("+n+", "+r+"%, "+i+"%)":"hsva("+n+", "+r+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var e=TF(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=TF(this._r,this._g,this._b),n=Math.round(e.h*360),r=Math.round(e.s*100),i=Math.round(e.l*100);return this._a==1?"hsl("+n+", "+r+"%, "+i+"%)":"hsla("+n+", "+r+"%, "+i+"%, "+this._roundA+")"},toHex:function(e){return IF(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return h2e(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(Zt(this._r,255)*100)+"%",g:Math.round(Zt(this._g,255)*100)+"%",b:Math.round(Zt(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(Zt(this._r,255)*100)+"%, "+Math.round(Zt(this._g,255)*100)+"%, "+Math.round(Zt(this._b,255)*100)+"%)":"rgba("+Math.round(Zt(this._r,255)*100)+"%, "+Math.round(Zt(this._g,255)*100)+"%, "+Math.round(Zt(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:E2e[IF(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var n="#"+NF(this._r,this._g,this._b,this._a),r=n,i=this._gradientType?"GradientType = 1, ":"";if(e){var s=Le(e);r="#"+NF(s._r,s._g,s._b,s._a)}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+n+",endColorstr="+r+")"},toString:function(e){var n=!!e;e=e||this._format;var r=!1,i=this._a<1&&this._a>=0,s=!n&&i&&(e==="hex"||e==="hex6"||e==="hex3"||e==="hex4"||e==="hex8"||e==="name");return s?e==="name"&&this._a===0?this.toName():this.toRgbString():(e==="rgb"&&(r=this.toRgbString()),e==="prgb"&&(r=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(r=this.toHexString()),e==="hex3"&&(r=this.toHexString(!0)),e==="hex4"&&(r=this.toHex8String(!0)),e==="hex8"&&(r=this.toHex8String()),e==="name"&&(r=this.toName()),e==="hsl"&&(r=this.toHslString()),e==="hsv"&&(r=this.toHsvString()),r||this.toHexString())},clone:function(){return Le(this.toString())},_applyModification:function(e,n){var r=e.apply(null,[this].concat([].slice.call(n)));return this._r=r._r,this._g=r._g,this._b=r._b,this.setAlpha(r._a),this},lighten:function(){return this._applyModification(v2e,arguments)},brighten:function(){return this._applyModification(x2e,arguments)},darken:function(){return this._applyModification(b2e,arguments)},desaturate:function(){return this._applyModification(m2e,arguments)},saturate:function(){return this._applyModification(g2e,arguments)},greyscale:function(){return this._applyModification(y2e,arguments)},spin:function(){return this._applyModification(w2e,arguments)},_applyCombination:function(e,n){return e.apply(null,[this].concat([].slice.call(n)))},analogous:function(){return this._applyCombination(C2e,arguments)},complement:function(){return this._applyCombination(S2e,arguments)},monochromatic:function(){return this._applyCombination($2e,arguments)},splitcomplement:function(){return this._applyCombination(k2e,arguments)},triad:function(){return this._applyCombination(RF,[3])},tetrad:function(){return this._applyCombination(RF,[4])}};Le.fromRatio=function(t,e){if(g1(t)=="object"){var n={};for(var r in t)t.hasOwnProperty(r)&&(r==="a"?n[r]=t[r]:n[r]=eh(t[r]));t=n}return Le(t,e)};function u2e(t){var e={r:0,g:0,b:0},n=1,r=null,i=null,s=null,a=!1,o=!1;return typeof t=="string"&&(t=N2e(t)),g1(t)=="object"&&(La(t.r)&&La(t.g)&&La(t.b)?(e=d2e(t.r,t.g,t.b),a=!0,o=String(t.r).substr(-1)==="%"?"prgb":"rgb"):La(t.h)&&La(t.s)&&La(t.v)?(r=eh(t.s),i=eh(t.v),e=p2e(t.h,r,i),a=!0,o="hsv"):La(t.h)&&La(t.s)&&La(t.l)&&(r=eh(t.s),s=eh(t.l),e=f2e(t.h,r,s),a=!0,o="hsl"),t.hasOwnProperty("a")&&(n=t.a)),n=SV(n),{ok:a,format:t.format||o,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:n}}function d2e(t,e,n){return{r:Zt(t,255)*255,g:Zt(e,255)*255,b:Zt(n,255)*255}}function TF(t,e,n){t=Zt(t,255),e=Zt(e,255),n=Zt(n,255);var r=Math.max(t,e,n),i=Math.min(t,e,n),s,a,o=(r+i)/2;if(r==i)s=a=0;else{var l=r-i;switch(a=o>.5?l/(2-r-i):l/(r+i),r){case t:s=(e-n)/l+(e<n?6:0);break;case e:s=(n-t)/l+2;break;case n:s=(t-e)/l+4;break}s/=6}return{h:s,s:a,l:o}}function f2e(t,e,n){var r,i,s;t=Zt(t,360),e=Zt(e,100),n=Zt(n,100);function a(c,u,d){return d<0&&(d+=1),d>1&&(d-=1),d<1/6?c+(u-c)*6*d:d<1/2?u:d<2/3?c+(u-c)*(2/3-d)*6:c}if(e===0)r=i=s=n;else{var o=n<.5?n*(1+e):n+e-n*e,l=2*n-o;r=a(l,o,t+1/3),i=a(l,o,t),s=a(l,o,t-1/3)}return{r:r*255,g:i*255,b:s*255}}function _F(t,e,n){t=Zt(t,255),e=Zt(e,255),n=Zt(n,255);var r=Math.max(t,e,n),i=Math.min(t,e,n),s,a,o=r,l=r-i;if(a=r===0?0:l/r,r==i)s=0;else{switch(r){case t:s=(e-n)/l+(e<n?6:0);break;case e:s=(n-t)/l+2;break;case n:s=(t-e)/l+4;break}s/=6}return{h:s,s:a,v:o}}function p2e(t,e,n){t=Zt(t,360)*6,e=Zt(e,100),n=Zt(n,100);var r=Math.floor(t),i=t-r,s=n*(1-e),a=n*(1-i*e),o=n*(1-(1-i)*e),l=r%6,c=[n,a,s,s,o,n][l],u=[o,n,n,a,s,s][l],d=[s,s,o,n,n,a][l];return{r:c*255,g:u*255,b:d*255}}function IF(t,e,n,r){var i=[Fs(Math.round(t).toString(16)),Fs(Math.round(e).toString(16)),Fs(Math.round(n).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function h2e(t,e,n,r,i){var s=[Fs(Math.round(t).toString(16)),Fs(Math.round(e).toString(16)),Fs(Math.round(n).toString(16)),Fs(kV(r))];return i&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)&&s[3].charAt(0)==s[3].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")}function NF(t,e,n,r){var i=[Fs(kV(r)),Fs(Math.round(t).toString(16)),Fs(Math.round(e).toString(16)),Fs(Math.round(n).toString(16))];return i.join("")}Le.equals=function(t,e){return!t||!e?!1:Le(t).toRgbString()==Le(e).toRgbString()};Le.random=function(){return Le.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function m2e(t,e){e=e===0?0:e||10;var n=Le(t).toHsl();return n.s-=e/100,n.s=eb(n.s),Le(n)}function g2e(t,e){e=e===0?0:e||10;var n=Le(t).toHsl();return n.s+=e/100,n.s=eb(n.s),Le(n)}function y2e(t){return Le(t).desaturate(100)}function v2e(t,e){e=e===0?0:e||10;var n=Le(t).toHsl();return n.l+=e/100,n.l=eb(n.l),Le(n)}function x2e(t,e){e=e===0?0:e||10;var n=Le(t).toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(255*-(e/100)))),n.g=Math.max(0,Math.min(255,n.g-Math.round(255*-(e/100)))),n.b=Math.max(0,Math.min(255,n.b-Math.round(255*-(e/100)))),Le(n)}function b2e(t,e){e=e===0?0:e||10;var n=Le(t).toHsl();return n.l-=e/100,n.l=eb(n.l),Le(n)}function w2e(t,e){var n=Le(t).toHsl(),r=(n.h+e)%360;return n.h=r<0?360+r:r,Le(n)}function S2e(t){var e=Le(t).toHsl();return e.h=(e.h+180)%360,Le(e)}function RF(t,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var n=Le(t).toHsl(),r=[Le(t)],i=360/e,s=1;s<e;s++)r.push(Le({h:(n.h+s*i)%360,s:n.s,l:n.l}));return r}function k2e(t){var e=Le(t).toHsl(),n=e.h;return[Le(t),Le({h:(n+72)%360,s:e.s,l:e.l}),Le({h:(n+216)%360,s:e.s,l:e.l})]}function C2e(t,e,n){e=e||6,n=n||30;var r=Le(t).toHsl(),i=360/n,s=[Le(t)];for(r.h=(r.h-(i*e>>1)+720)%360;--e;)r.h=(r.h+i)%360,s.push(Le(r));return s}function $2e(t,e){e=e||6;for(var n=Le(t).toHsv(),r=n.h,i=n.s,s=n.v,a=[],o=1/e;e--;)a.push(Le({h:r,s:i,v:s})),s=(s+o)%1;return a}Le.mix=function(t,e,n){n=n===0?0:n||50;var r=Le(t).toRgb(),i=Le(e).toRgb(),s=n/100,a={r:(i.r-r.r)*s+r.r,g:(i.g-r.g)*s+r.g,b:(i.b-r.b)*s+r.b,a:(i.a-r.a)*s+r.a};return Le(a)};Le.readability=function(t,e){var n=Le(t),r=Le(e);return(Math.max(n.getLuminance(),r.getLuminance())+.05)/(Math.min(n.getLuminance(),r.getLuminance())+.05)};Le.isReadable=function(t,e,n){var r=Le.readability(t,e),i,s;switch(s=!1,i=R2e(n),i.level+i.size){case"AAsmall":case"AAAlarge":s=r>=4.5;break;case"AAlarge":s=r>=3;break;case"AAAsmall":s=r>=7;break}return s};Le.mostReadable=function(t,e,n){var r=null,i=0,s,a,o,l;n=n||{},a=n.includeFallbackColors,o=n.level,l=n.size;for(var c=0;c<e.length;c++)s=Le.readability(t,e[c]),s>i&&(i=s,r=Le(e[c]));return Le.isReadable(t,r,{level:o,size:l})||!a?r:(n.includeFallbackColors=!1,Le.mostReadable(t,["#fff","#000"],n))};var aE=Le.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},E2e=Le.hexNames=T2e(aE);function T2e(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function SV(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function Zt(t,e){_2e(t)&&(t="100%");var n=I2e(t);return t=Math.min(e,Math.max(0,parseFloat(t))),n&&(t=parseInt(t*e,10)/100),Math.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function eb(t){return Math.min(1,Math.max(0,t))}function bi(t){return parseInt(t,16)}function _2e(t){return typeof t=="string"&&t.indexOf(".")!=-1&&parseFloat(t)===1}function I2e(t){return typeof t=="string"&&t.indexOf("%")!=-1}function Fs(t){return t.length==1?"0"+t:""+t}function eh(t){return t<=1&&(t=t*100+"%"),t}function kV(t){return Math.round(parseFloat(t)*255).toString(16)}function OF(t){return bi(t)/255}var Es=function(){var t="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",n="(?:"+e+")|(?:"+t+")",r="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?",i="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?";return{CSS_UNIT:new RegExp(n),rgb:new RegExp("rgb"+r),rgba:new RegExp("rgba"+i),hsl:new RegExp("hsl"+r),hsla:new RegExp("hsla"+i),hsv:new RegExp("hsv"+r),hsva:new RegExp("hsva"+i),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function La(t){return!!Es.CSS_UNIT.exec(t)}function N2e(t){t=t.replace(l2e,"").replace(c2e,"").toLowerCase();var e=!1;if(aE[t])t=aE[t],e=!0;else if(t=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var n;return(n=Es.rgb.exec(t))?{r:n[1],g:n[2],b:n[3]}:(n=Es.rgba.exec(t))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=Es.hsl.exec(t))?{h:n[1],s:n[2],l:n[3]}:(n=Es.hsla.exec(t))?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=Es.hsv.exec(t))?{h:n[1],s:n[2],v:n[3]}:(n=Es.hsva.exec(t))?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=Es.hex8.exec(t))?{r:bi(n[1]),g:bi(n[2]),b:bi(n[3]),a:OF(n[4]),format:e?"name":"hex8"}:(n=Es.hex6.exec(t))?{r:bi(n[1]),g:bi(n[2]),b:bi(n[3]),format:e?"name":"hex"}:(n=Es.hex4.exec(t))?{r:bi(n[1]+""+n[1]),g:bi(n[2]+""+n[2]),b:bi(n[3]+""+n[3]),a:OF(n[4]+""+n[4]),format:e?"name":"hex8"}:(n=Es.hex3.exec(t))?{r:bi(n[1]+""+n[1]),g:bi(n[2]+""+n[2]),b:bi(n[3]+""+n[3]),format:e?"name":"hex"}:!1}function R2e(t){var e,n;return t=t||{level:"AA",size:"small"},e=(t.level||"AA").toUpperCase(),n=(t.size||"small").toLowerCase(),e!=="AA"&&e!=="AAA"&&(e="AA"),n!=="small"&&n!=="large"&&(n="small"),{level:e,size:n}}var AF=function(e){var n=["r","g","b","a","h","s","l","v"],r=0,i=0;return o2e(n,function(s){if(e[s]&&(r+=1,isNaN(e[s])||(i+=1),s==="s"||s==="l")){var a=/^\d+%$/;a.test(e[s])&&(i+=1)}}),r===i?e:!1},th=function(e,n){var r=e.hex?Le(e.hex):Le(e),i=r.toHsl(),s=r.toHsv(),a=r.toRgb(),o=r.toHex();i.s===0&&(i.h=n||0,s.h=n||0);var l=o==="000000"&&a.a===0;return{hsl:i,hex:l?"transparent":"#"+o,rgb:a,hsv:s,oldHue:e.h||n||i.h,source:e.source}},Fl=function(e){if(e==="transparent")return!0;var n=String(e).charAt(0)==="#"?1:0;return e.length!==4+n&&e.length<7+n&&Le(e).isValid()},mI=function(e){if(!e)return"#fff";var n=th(e);if(n.hex==="transparent")return"rgba(0,0,0,0.4)";var r=(n.rgb.r*299+n.rgb.g*587+n.rgb.b*114)/1e3;return r>=128?"#000":"#fff"},Zk=function(e,n){var r=e.replace("°","");return Le(n+" ("+r+")")._ok},Mp=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},O2e=function(){function t(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function A2e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function P2e(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function D2e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var mi=function(e){var n=function(r){D2e(i,r);function i(s){A2e(this,i);var a=P2e(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return a.handleChange=function(o,l){var c=AF(o);if(c){var u=th(o,o.h||a.state.oldHue);a.setState(u),a.props.onChangeComplete&&a.debounce(a.props.onChangeComplete,u,l),a.props.onChange&&a.props.onChange(u,l)}},a.handleSwatchHover=function(o,l){var c=AF(o);if(c){var u=th(o,o.h||a.state.oldHue);a.props.onSwatchHover&&a.props.onSwatchHover(u,l)}},a.state=Mp({},th(s.color,0)),a.debounce=bV(function(o,l,c){o(l,c)},100),a}return O2e(i,[{key:"render",value:function(){var a={};return this.props.onSwatchHover&&(a.onSwatchHover=this.handleSwatchHover),M.createElement(e,Mp({},this.props,this.state,{onChange:this.handleChange},a))}}],[{key:"getDerivedStateFromProps",value:function(a,o){return Mp({},th(a.color,o.oldHue))}}]),i}(A.PureComponent||A.Component);return n.propTypes=Mp({},e.propTypes),n.defaultProps=Mp({},e.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),n},F2e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},L2e=function(){function t(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function M2e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function PF(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function B2e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var z2e=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(r){B2e(i,r);function i(){var s,a,o,l;M2e(this,i);for(var c=arguments.length,u=Array(c),d=0;d<c;d++)u[d]=arguments[d];return l=(a=(o=PF(this,(s=i.__proto__||Object.getPrototypeOf(i)).call.apply(s,[this].concat(u))),o),o.state={focus:!1},o.handleFocus=function(){return o.setState({focus:!0})},o.handleBlur=function(){return o.setState({focus:!1})},a),PF(o,l)}return L2e(i,[{key:"render",value:function(){return M.createElement(n,{onFocus:this.handleFocus,onBlur:this.handleBlur},M.createElement(e,F2e({},this.props,this.state)))}}]),i}(M.Component)},DF=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},j2e=13,V2e=function(e){var n=e.color,r=e.style,i=e.onClick,s=i===void 0?function(){}:i,a=e.onHover,o=e.title,l=o===void 0?n:o,c=e.children,u=e.focus,d=e.focusStyle,f=d===void 0?{}:d,h=n==="transparent",g=Ge({default:{swatch:DF({background:n,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},r,u?f:{})}}),y=function(k){return s(n,k)},x=function(k){return k.keyCode===j2e&&s(n,k)},v=function(k){return a(n,k)},b={};return a&&(b.onMouseOver=v),M.createElement("div",DF({style:g.swatch,onClick:y,title:l,tabIndex:0,onKeyDown:x},b),c,h&&M.createElement(Mf,{borderRadius:g.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))};const hu=z2e(V2e);var W2e=function(e){var n=e.direction,r=Ge({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:n==="vertical"});return M.createElement("div",{style:r.picker})},U2e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},CV=function(e){var n=e.rgb,r=e.hsl,i=e.width,s=e.height,a=e.onChange,o=e.direction,l=e.style,c=e.renderers,u=e.pointer,d=e.className,f=d===void 0?"":d,h=Ge({default:{picker:{position:"relative",width:i,height:s},alpha:{radius:"2px",style:l}}});return M.createElement("div",{style:h.picker,className:"alpha-picker "+f},M.createElement(oI,U2e({},h.alpha,{rgb:n,hsl:r,pointer:u,renderers:c,onChange:a,direction:o})))};CV.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:W2e};mi(CV);function $V(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var G2e="__lodash_hash_undefined__";function H2e(t){return this.__data__.set(t,G2e),this}function q2e(t){return this.__data__.has(t)}function y1(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new ko;++e<n;)this.add(t[e])}y1.prototype.add=y1.prototype.push=H2e;y1.prototype.has=q2e;function K2e(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function X2e(t,e){return t.has(e)}var Y2e=1,Q2e=2;function EV(t,e,n,r,i,s){var a=n&Y2e,o=t.length,l=e.length;if(o!=l&&!(a&&l>o))return!1;var c=s.get(t),u=s.get(e);if(c&&u)return c==e&&u==t;var d=-1,f=!0,h=n&Q2e?new y1:void 0;for(s.set(t,e),s.set(e,t);++d<o;){var g=t[d],y=e[d];if(r)var x=a?r(y,g,d,e,t,s):r(g,y,d,t,e,s);if(x!==void 0){if(x)continue;f=!1;break}if(h){if(!K2e(e,function(v,b){if(!X2e(h,b)&&(g===v||i(g,v,n,r,s)))return h.push(b)})){f=!1;break}}else if(!(g===y||i(g,y,n,r,s))){f=!1;break}}return s.delete(t),s.delete(e),f}function Z2e(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}function J2e(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var eSe=1,tSe=2,nSe="[object Boolean]",rSe="[object Date]",iSe="[object Error]",sSe="[object Map]",aSe="[object Number]",oSe="[object RegExp]",lSe="[object Set]",cSe="[object String]",uSe="[object Symbol]",dSe="[object ArrayBuffer]",fSe="[object DataView]",FF=xl?xl.prototype:void 0,Jk=FF?FF.valueOf:void 0;function pSe(t,e,n,r,i,s,a){switch(n){case fSe:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case dSe:return!(t.byteLength!=e.byteLength||!s(new p1(t),new p1(e)));case nSe:case rSe:case aSe:return Pm(+t,+e);case iSe:return t.name==e.name&&t.message==e.message;case oSe:case cSe:return t==e+"";case sSe:var o=Z2e;case lSe:var l=r&eSe;if(o||(o=J2e),t.size!=e.size&&!l)return!1;var c=a.get(t);if(c)return c==e;r|=tSe,a.set(t,e);var u=EV(o(t),o(e),r,i,s,a);return a.delete(t),u;case uSe:if(Jk)return Jk.call(t)==Jk.call(e)}return!1}function hSe(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function mSe(t,e,n){var r=e(t);return Pi(t)?r:hSe(r,n(t))}function gSe(t,e){for(var n=-1,r=t==null?0:t.length,i=0,s=[];++n<r;){var a=t[n];e(a,n,t)&&(s[i++]=a)}return s}function ySe(){return[]}var vSe=Object.prototype,xSe=vSe.propertyIsEnumerable,LF=Object.getOwnPropertySymbols,bSe=LF?function(t){return t==null?[]:(t=Object(t),gSe(LF(t),function(e){return xSe.call(t,e)}))}:ySe;const wSe=bSe;function MF(t){return mSe(t,hI,wSe)}var SSe=1,kSe=Object.prototype,CSe=kSe.hasOwnProperty;function $Se(t,e,n,r,i,s){var a=n&SSe,o=MF(t),l=o.length,c=MF(e),u=c.length;if(l!=u&&!a)return!1;for(var d=l;d--;){var f=o[d];if(!(a?f in e:CSe.call(e,f)))return!1}var h=s.get(t),g=s.get(e);if(h&&g)return h==e&&g==t;var y=!0;s.set(t,e),s.set(e,t);for(var x=a;++d<l;){f=o[d];var v=t[f],b=e[f];if(r)var S=a?r(b,v,f,e,t,s):r(v,b,f,t,e,s);if(!(S===void 0?v===b||i(v,b,n,r,s):S)){y=!1;break}x||(x=f=="constructor")}if(y&&!x){var k=t.constructor,$=e.constructor;k!=$&&"constructor"in t&&"constructor"in e&&!(typeof k=="function"&&k instanceof k&&typeof $=="function"&&$ instanceof $)&&(y=!1)}return s.delete(t),s.delete(e),y}var oE=pu(Gs,"DataView"),lE=pu(Gs,"Promise"),cE=pu(Gs,"Set"),uE=pu(Gs,"WeakMap"),BF="[object Map]",ESe="[object Object]",zF="[object Promise]",jF="[object Set]",VF="[object WeakMap]",WF="[object DataView]",TSe=fu(oE),_Se=fu(em),ISe=fu(lE),NSe=fu(cE),RSe=fu(uE),uc=du;(oE&&uc(new oE(new ArrayBuffer(1)))!=WF||em&&uc(new em)!=BF||lE&&uc(lE.resolve())!=zF||cE&&uc(new cE)!=jF||uE&&uc(new uE)!=VF)&&(uc=function(t){var e=du(t),n=e==ESe?t.constructor:void 0,r=n?fu(n):"";if(r)switch(r){case TSe:return WF;case _Se:return BF;case ISe:return zF;case NSe:return jF;case RSe:return VF}return e});const UF=uc;var OSe=1,GF="[object Arguments]",HF="[object Array]",Pv="[object Object]",ASe=Object.prototype,qF=ASe.hasOwnProperty;function PSe(t,e,n,r,i,s){var a=Pi(t),o=Pi(e),l=a?HF:UF(t),c=o?HF:UF(e);l=l==GF?Pv:l,c=c==GF?Pv:c;var u=l==Pv,d=c==Pv,f=l==c;if(f&&m1(t)){if(!m1(e))return!1;a=!0,u=!1}if(f&&!u)return s||(s=new ga),a||fI(t)?EV(t,e,n,r,i,s):pSe(t,e,l,n,r,i,s);if(!(n&OSe)){var h=u&&qF.call(t,"__wrapped__"),g=d&&qF.call(e,"__wrapped__");if(h||g){var y=h?t.value():t,x=g?e.value():e;return s||(s=new ga),i(y,x,n,r,s)}}return f?(s||(s=new ga),$Se(t,e,n,r,i,s)):!1}function gI(t,e,n,r,i){return t===e?!0:t==null||e==null||!bl(t)&&!bl(e)?t!==t&&e!==e:PSe(t,e,n,r,gI,i)}var DSe=1,FSe=2;function LSe(t,e,n,r){var i=n.length,s=i,a=!r;if(t==null)return!s;for(t=Object(t);i--;){var o=n[i];if(a&&o[2]?o[1]!==t[o[0]]:!(o[0]in t))return!1}for(;++i<s;){o=n[i];var l=o[0],c=t[l],u=o[1];if(a&&o[2]){if(c===void 0&&!(l in t))return!1}else{var d=new ga;if(r)var f=r(c,u,l,t,e,d);if(!(f===void 0?gI(u,c,DSe|FSe,r,d):f))return!1}}return!0}function TV(t){return t===t&&!ps(t)}function MSe(t){for(var e=hI(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,TV(i)]}return e}function _V(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}function BSe(t){var e=MSe(t);return e.length==1&&e[0][2]?_V(e[0][0],e[0][1]):function(n){return n===t||LSe(n,t,e)}}var zSe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,jSe=/^\w*$/;function yI(t,e){if(Pi(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||Zx(t)?!0:jSe.test(t)||!zSe.test(t)||e!=null&&t in Object(e)}var VSe="Expected a function";function vI(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(VSe);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var a=t.apply(this,r);return n.cache=s.set(i,a)||s,a};return n.cache=new(vI.Cache||ko),n}vI.Cache=ko;var WSe=500;function USe(t){var e=vI(t,function(r){return n.size===WSe&&n.clear(),r}),n=e.cache;return e}var GSe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,HSe=/\\(\\)?/g,qSe=USe(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(GSe,function(n,r,i,s){e.push(i?s.replace(HSe,"$1"):r||n)}),e}),KSe=1/0,KF=xl?xl.prototype:void 0,XF=KF?KF.toString:void 0;function IV(t){if(typeof t=="string")return t;if(Pi(t))return $V(t,IV)+"";if(Zx(t))return XF?XF.call(t):"";var e=t+"";return e=="0"&&1/t==-KSe?"-0":e}function XSe(t){return t==null?"":IV(t)}function NV(t,e){return Pi(t)?t:yI(t,e)?[t]:qSe(XSe(t))}var YSe=1/0;function tb(t){if(typeof t=="string"||Zx(t))return t;var e=t+"";return e=="0"&&1/t==-YSe?"-0":e}function RV(t,e){e=NV(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[tb(e[n++])];return n&&n==r?t:void 0}function QSe(t,e,n){var r=t==null?void 0:RV(t,e);return r===void 0?n:r}function ZSe(t,e){return t!=null&&e in Object(t)}function JSe(t,e,n){e=NV(e,t);for(var r=-1,i=e.length,s=!1;++r<i;){var a=tb(e[r]);if(!(s=t!=null&&n(t,a)))break;t=t[a]}return s||++r!=i?s:(i=t==null?0:t.length,!!i&&dI(i)&&pI(a,i)&&(Pi(t)||h1(t)))}function eke(t,e){return t!=null&&JSe(t,e,ZSe)}var tke=1,nke=2;function rke(t,e){return yI(t)&&TV(e)?_V(tb(t),e):function(n){var r=QSe(n,t);return r===void 0&&r===e?eke(n,t):gI(e,r,tke|nke)}}function ike(t){return function(e){return e==null?void 0:e[t]}}function ske(t){return function(e){return RV(e,t)}}function ake(t){return yI(t)?ike(tb(t)):ske(t)}function oke(t){return typeof t=="function"?t:t==null?Qx:typeof t=="object"?Pi(t)?rke(t[0],t[1]):BSe(t):ake(t)}function lke(t,e){var n=-1,r=zf(t)?Array(t.length):[];return wV(t,function(i,s,a){r[++n]=e(i,s,a)}),r}function mu(t,e){var n=Pi(t)?$V:lke;return n(t,oke(e))}var cke=function(e){var n=e.colors,r=e.onClick,i=e.onSwatchHover,s=Ge({default:{swatches:{marginRight:"-10px"},swatch:{width:"22px",height:"22px",float:"left",marginRight:"10px",marginBottom:"10px",borderRadius:"4px"},clear:{clear:"both"}}});return M.createElement("div",{style:s.swatches},mu(n,function(a){return M.createElement(hu,{key:a,color:a,style:s.swatch,onClick:r,onHover:i,focusStyle:{boxShadow:"0 0 4px "+a}})}),M.createElement("div",{style:s.clear}))},xI=function(e){var n=e.onChange,r=e.onSwatchHover,i=e.hex,s=e.colors,a=e.width,o=e.triangle,l=e.styles,c=l===void 0?{}:l,u=e.className,d=u===void 0?"":u,f=i==="transparent",h=function(x,v){Fl(x)&&n({hex:x,source:"hex"},v)},g=Ge(hi({default:{card:{width:a,background:"#fff",boxShadow:"0 1px rgba(0,0,0,.1)",borderRadius:"6px",position:"relative"},head:{height:"110px",background:i,borderRadius:"6px 6px 0 0",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},body:{padding:"10px"},label:{fontSize:"18px",color:mI(i),position:"relative"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 10px 10px 10px",borderColor:"transparent transparent "+i+" transparent",position:"absolute",top:"-10px",left:"50%",marginLeft:"-10px"},input:{width:"100%",fontSize:"12px",color:"#666",border:"0px",outline:"none",height:"22px",boxShadow:"inset 0 0 0 1px #ddd",borderRadius:"4px",padding:"0 7px",boxSizing:"border-box"}},"hide-triangle":{triangle:{display:"none"}}},c),{"hide-triangle":o==="hide"});return M.createElement("div",{style:g.card,className:"block-picker "+d},M.createElement("div",{style:g.triangle}),M.createElement("div",{style:g.head},f&&M.createElement(Mf,{borderRadius:"6px 6px 0 0"}),M.createElement("div",{style:g.label},i)),M.createElement("div",{style:g.body},M.createElement(cke,{colors:s,onClick:h,onSwatchHover:r}),M.createElement(at,{style:{input:g.input},value:i,onChange:h})))};xI.propTypes={width:ge.oneOfType([ge.string,ge.number]),colors:ge.arrayOf(ge.string),triangle:ge.oneOf(["top","hide"]),styles:ge.object};xI.defaultProps={width:170,colors:["#D9E3F0","#F47373","#697689","#37D67A","#2CCCE4","#555555","#dce775","#ff8a65","#ba68c8"],triangle:"top",styles:{}};mi(xI);var Ku={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",a100:"#ff8a80",a200:"#ff5252",a400:"#ff1744",a700:"#d50000"},Xu={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",a100:"#ff80ab",a200:"#ff4081",a400:"#f50057",a700:"#c51162"},Yu={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",a100:"#ea80fc",a200:"#e040fb",a400:"#d500f9",a700:"#aa00ff"},Qu={50:"#ede7f6",100:"#d1c4e9",200:"#b39ddb",300:"#9575cd",400:"#7e57c2",500:"#673ab7",600:"#5e35b1",700:"#512da8",800:"#4527a0",900:"#311b92",a100:"#b388ff",a200:"#7c4dff",a400:"#651fff",a700:"#6200ea"},Zu={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",a100:"#8c9eff",a200:"#536dfe",a400:"#3d5afe",a700:"#304ffe"},Ju={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",a100:"#82b1ff",a200:"#448aff",a400:"#2979ff",a700:"#2962ff"},ed={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",a100:"#80d8ff",a200:"#40c4ff",a400:"#00b0ff",a700:"#0091ea"},td={50:"#e0f7fa",100:"#b2ebf2",200:"#80deea",300:"#4dd0e1",400:"#26c6da",500:"#00bcd4",600:"#00acc1",700:"#0097a7",800:"#00838f",900:"#006064",a100:"#84ffff",a200:"#18ffff",a400:"#00e5ff",a700:"#00b8d4"},nd={50:"#e0f2f1",100:"#b2dfdb",200:"#80cbc4",300:"#4db6ac",400:"#26a69a",500:"#009688",600:"#00897b",700:"#00796b",800:"#00695c",900:"#004d40",a100:"#a7ffeb",a200:"#64ffda",a400:"#1de9b6",a700:"#00bfa5"},nh={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",a100:"#b9f6ca",a200:"#69f0ae",a400:"#00e676",a700:"#00c853"},rd={50:"#f1f8e9",100:"#dcedc8",200:"#c5e1a5",300:"#aed581",400:"#9ccc65",500:"#8bc34a",600:"#7cb342",700:"#689f38",800:"#558b2f",900:"#33691e",a100:"#ccff90",a200:"#b2ff59",a400:"#76ff03",a700:"#64dd17"},id={50:"#f9fbe7",100:"#f0f4c3",200:"#e6ee9c",300:"#dce775",400:"#d4e157",500:"#cddc39",600:"#c0ca33",700:"#afb42b",800:"#9e9d24",900:"#827717",a100:"#f4ff81",a200:"#eeff41",a400:"#c6ff00",a700:"#aeea00"},sd={50:"#fffde7",100:"#fff9c4",200:"#fff59d",300:"#fff176",400:"#ffee58",500:"#ffeb3b",600:"#fdd835",700:"#fbc02d",800:"#f9a825",900:"#f57f17",a100:"#ffff8d",a200:"#ffff00",a400:"#ffea00",a700:"#ffd600"},ad={50:"#fff8e1",100:"#ffecb3",200:"#ffe082",300:"#ffd54f",400:"#ffca28",500:"#ffc107",600:"#ffb300",700:"#ffa000",800:"#ff8f00",900:"#ff6f00",a100:"#ffe57f",a200:"#ffd740",a400:"#ffc400",a700:"#ffab00"},od={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",a100:"#ffd180",a200:"#ffab40",a400:"#ff9100",a700:"#ff6d00"},ld={50:"#fbe9e7",100:"#ffccbc",200:"#ffab91",300:"#ff8a65",400:"#ff7043",500:"#ff5722",600:"#f4511e",700:"#e64a19",800:"#d84315",900:"#bf360c",a100:"#ff9e80",a200:"#ff6e40",a400:"#ff3d00",a700:"#dd2c00"},cd={50:"#efebe9",100:"#d7ccc8",200:"#bcaaa4",300:"#a1887f",400:"#8d6e63",500:"#795548",600:"#6d4c41",700:"#5d4037",800:"#4e342e",900:"#3e2723"},ud={50:"#eceff1",100:"#cfd8dc",200:"#b0bec5",300:"#90a4ae",400:"#78909c",500:"#607d8b",600:"#546e7a",700:"#455a64",800:"#37474f",900:"#263238"},OV=function(e){var n=e.color,r=e.onClick,i=e.onSwatchHover,s=e.hover,a=e.active,o=e.circleSize,l=e.circleSpacing,c=Ge({default:{swatch:{width:o,height:o,marginRight:l,marginBottom:l,transform:"scale(1)",transition:"100ms transform ease"},Swatch:{borderRadius:"50%",background:"transparent",boxShadow:"inset 0 0 0 "+(o/2+1)+"px "+n,transition:"100ms box-shadow ease"}},hover:{swatch:{transform:"scale(1.2)"}},active:{Swatch:{boxShadow:"inset 0 0 0 3px "+n}}},{hover:s,active:a});return M.createElement("div",{style:c.swatch},M.createElement(hu,{style:c.Swatch,color:n,onClick:r,onHover:i,focusStyle:{boxShadow:c.Swatch.boxShadow+", 0 0 5px "+n}}))};OV.defaultProps={circleSize:28,circleSpacing:14};const uke=aI(OV);var bI=function(e){var n=e.width,r=e.onChange,i=e.onSwatchHover,s=e.colors,a=e.hex,o=e.circleSize,l=e.styles,c=l===void 0?{}:l,u=e.circleSpacing,d=e.className,f=d===void 0?"":d,h=Ge(hi({default:{card:{width:n,display:"flex",flexWrap:"wrap",marginRight:-u,marginBottom:-u}}},c)),g=function(x,v){return r({hex:x,source:"hex"},v)};return M.createElement("div",{style:h.card,className:"circle-picker "+f},mu(s,function(y){return M.createElement(uke,{key:y,color:y,onClick:g,onSwatchHover:i,active:a===y.toLowerCase(),circleSize:o,circleSpacing:u})}))};bI.propTypes={width:ge.oneOfType([ge.string,ge.number]),circleSize:ge.number,circleSpacing:ge.number,styles:ge.object};bI.defaultProps={width:252,circleSize:28,circleSpacing:14,colors:[Ku[500],Xu[500],Yu[500],Qu[500],Zu[500],Ju[500],ed[500],td[500],nd[500],nh[500],rd[500],id[500],sd[500],ad[500],od[500],ld[500],cd[500],ud[500]],styles:{}};mi(bI);function YF(t){return t===void 0}var AV={};Object.defineProperty(AV,"__esModule",{value:!0});var QF=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dke=A,ZF=fke(dke);function fke(t){return t&&t.__esModule?t:{default:t}}function pke(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}var Dv=24,hke=AV.default=function(t){var e=t.fill,n=e===void 0?"currentColor":e,r=t.width,i=r===void 0?Dv:r,s=t.height,a=s===void 0?Dv:s,o=t.style,l=o===void 0?{}:o,c=pke(t,["fill","width","height","style"]);return ZF.default.createElement("svg",QF({viewBox:"0 0 "+Dv+" "+Dv,style:QF({fill:n,width:i,height:a},l)},c),ZF.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))},mke=function(){function t(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function gke(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yke(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function vke(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var PV=function(t){vke(e,t);function e(n){gke(this,e);var r=yke(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.toggleViews=function(){r.state.view==="hex"?r.setState({view:"rgb"}):r.state.view==="rgb"?r.setState({view:"hsl"}):r.state.view==="hsl"&&(r.props.hsl.a===1?r.setState({view:"hex"}):r.setState({view:"rgb"}))},r.handleChange=function(i,s){i.hex?Fl(i.hex)&&r.props.onChange({hex:i.hex,source:"hex"},s):i.r||i.g||i.b?r.props.onChange({r:i.r||r.props.rgb.r,g:i.g||r.props.rgb.g,b:i.b||r.props.rgb.b,source:"rgb"},s):i.a?(i.a<0?i.a=0:i.a>1&&(i.a=1),r.props.onChange({h:r.props.hsl.h,s:r.props.hsl.s,l:r.props.hsl.l,a:Math.round(i.a*100)/100,source:"rgb"},s)):(i.h||i.s||i.l)&&(typeof i.s=="string"&&i.s.includes("%")&&(i.s=i.s.replace("%","")),typeof i.l=="string"&&i.l.includes("%")&&(i.l=i.l.replace("%","")),i.s==1?i.s=.01:i.l==1&&(i.l=.01),r.props.onChange({h:i.h||r.props.hsl.h,s:Number(YF(i.s)?r.props.hsl.s:i.s),l:Number(YF(i.l)?r.props.hsl.l:i.l),source:"hsl"},s))},r.showHighlight=function(i){i.currentTarget.style.background="#eee"},r.hideHighlight=function(i){i.currentTarget.style.background="transparent"},n.hsl.a!==1&&n.view==="hex"?r.state={view:"rgb"}:r.state={view:n.view},r}return mke(e,[{key:"render",value:function(){var r=this,i=Ge({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),s=void 0;return this.state.view==="hex"?s=M.createElement("div",{style:i.fields,className:"flexbox-fix"},M.createElement("div",{style:i.field},M.createElement(at,{style:{input:i.input,label:i.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):this.state.view==="rgb"?s=M.createElement("div",{style:i.fields,className:"flexbox-fix"},M.createElement("div",{style:i.field},M.createElement(at,{style:{input:i.input,label:i.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),M.createElement("div",{style:i.field},M.createElement(at,{style:{input:i.input,label:i.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),M.createElement("div",{style:i.field},M.createElement(at,{style:{input:i.input,label:i.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),M.createElement("div",{style:i.alpha},M.createElement(at,{style:{input:i.input,label:i.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):this.state.view==="hsl"&&(s=M.createElement("div",{style:i.fields,className:"flexbox-fix"},M.createElement("div",{style:i.field},M.createElement(at,{style:{input:i.input,label:i.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),M.createElement("div",{style:i.field},M.createElement(at,{style:{input:i.input,label:i.label},label:"s",value:Math.round(this.props.hsl.s*100)+"%",onChange:this.handleChange})),M.createElement("div",{style:i.field},M.createElement(at,{style:{input:i.input,label:i.label},label:"l",value:Math.round(this.props.hsl.l*100)+"%",onChange:this.handleChange})),M.createElement("div",{style:i.alpha},M.createElement(at,{style:{input:i.input,label:i.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),M.createElement("div",{style:i.wrap,className:"flexbox-fix"},s,M.createElement("div",{style:i.toggle},M.createElement("div",{style:i.icon,onClick:this.toggleViews,ref:function(o){return r.icon=o}},M.createElement(hke,{style:i.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.hsl.a!==1&&i.view==="hex"?{view:"rgb"}:null}}]),e}(M.Component);PV.defaultProps={view:"hex"};var JF=function(){var e=Ge({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return M.createElement("div",{style:e.picker})},xke=function(){var e=Ge({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return M.createElement("div",{style:e.picker})},wI=function(e){var n=e.width,r=e.onChange,i=e.disableAlpha,s=e.rgb,a=e.hsl,o=e.hsv,l=e.hex,c=e.renderers,u=e.styles,d=u===void 0?{}:u,f=e.className,h=f===void 0?"":f,g=e.defaultView,y=Ge(hi({default:{picker:{width:n,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+s.r+", "+s.g+", "+s.b+", "+s.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},d),{disableAlpha:i});return M.createElement("div",{style:y.picker,className:"chrome-picker "+h},M.createElement("div",{style:y.saturation},M.createElement(Jx,{style:y.Saturation,hsl:a,hsv:o,pointer:xke,onChange:r})),M.createElement("div",{style:y.body},M.createElement("div",{style:y.controls,className:"flexbox-fix"},M.createElement("div",{style:y.color},M.createElement("div",{style:y.swatch},M.createElement("div",{style:y.active}),M.createElement(Mf,{renderers:c}))),M.createElement("div",{style:y.toggles},M.createElement("div",{style:y.hue},M.createElement(Bf,{style:y.Hue,hsl:a,pointer:JF,onChange:r})),M.createElement("div",{style:y.alpha},M.createElement(oI,{style:y.Alpha,rgb:s,hsl:a,pointer:JF,renderers:c,onChange:r})))),M.createElement(PV,{rgb:s,hsl:a,hex:l,view:g,onChange:r,disableAlpha:i})))};wI.propTypes={width:ge.oneOfType([ge.string,ge.number]),disableAlpha:ge.bool,styles:ge.object,defaultView:ge.oneOf(["hex","rgb","hsl"])};wI.defaultProps={width:225,disableAlpha:!1,styles:{}};mi(wI);var bke=function(e){var n=e.color,r=e.onClick,i=r===void 0?function(){}:r,s=e.onSwatchHover,a=e.active,o=Ge({default:{color:{background:n,width:"15px",height:"15px",float:"left",marginRight:"5px",marginBottom:"5px",position:"relative",cursor:"pointer"},dot:{absolute:"5px 5px 5px 5px",background:mI(n),borderRadius:"50%",opacity:"0"}},active:{dot:{opacity:"1"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},dot:{background:"#000"}},transparent:{dot:{background:"#000"}}},{active:a,"color-#FFFFFF":n==="#FFFFFF",transparent:n==="transparent"});return M.createElement(hu,{style:o.color,color:n,onClick:i,onHover:s,focusStyle:{boxShadow:"0 0 4px "+n}},M.createElement("div",{style:o.dot}))},wke=function(e){var n=e.hex,r=e.rgb,i=e.onChange,s=Ge({default:{fields:{display:"flex",paddingBottom:"6px",paddingRight:"5px",position:"relative"},active:{position:"absolute",top:"6px",left:"5px",height:"9px",width:"9px",background:n},HEXwrap:{flex:"6",position:"relative"},HEXinput:{width:"80%",padding:"0px",paddingLeft:"20%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},HEXlabel:{display:"none"},RGBwrap:{flex:"3",position:"relative"},RGBinput:{width:"70%",padding:"0px",paddingLeft:"30%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},RGBlabel:{position:"absolute",top:"3px",left:"0px",lineHeight:"16px",textTransform:"uppercase",fontSize:"12px",color:"#999"}}}),a=function(l,c){l.r||l.g||l.b?i({r:l.r||r.r,g:l.g||r.g,b:l.b||r.b,source:"rgb"},c):i({hex:l.hex,source:"hex"},c)};return M.createElement("div",{style:s.fields,className:"flexbox-fix"},M.createElement("div",{style:s.active}),M.createElement(at,{style:{wrap:s.HEXwrap,input:s.HEXinput,label:s.HEXlabel},label:"hex",value:n,onChange:a}),M.createElement(at,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:"r",value:r.r,onChange:a}),M.createElement(at,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:"g",value:r.g,onChange:a}),M.createElement(at,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:"b",value:r.b,onChange:a}))},SI=function(e){var n=e.onChange,r=e.onSwatchHover,i=e.colors,s=e.hex,a=e.rgb,o=e.styles,l=o===void 0?{}:o,c=e.className,u=c===void 0?"":c,d=Ge(hi({default:{Compact:{background:"#f6f6f6",radius:"4px"},compact:{paddingTop:"5px",paddingLeft:"5px",boxSizing:"initial",width:"240px"},clear:{clear:"both"}}},l)),f=function(g,y){g.hex?Fl(g.hex)&&n({hex:g.hex,source:"hex"},y):n(g,y)};return M.createElement(Dm,{style:d.Compact,styles:l},M.createElement("div",{style:d.compact,className:"compact-picker "+u},M.createElement("div",null,mu(i,function(h){return M.createElement(bke,{key:h,color:h,active:h.toLowerCase()===s,onClick:f,onSwatchHover:r})}),M.createElement("div",{style:d.clear})),M.createElement(wke,{hex:s,rgb:a,onChange:f})))};SI.propTypes={colors:ge.arrayOf(ge.string),styles:ge.object};SI.defaultProps={colors:["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"],styles:{}};mi(SI);var Ske=function(e){var n=e.hover,r=e.color,i=e.onClick,s=e.onSwatchHover,a={position:"relative",zIndex:"2",outline:"2px solid #fff",boxShadow:"0 0 5px 2px rgba(0,0,0,0.25)"},o=Ge({default:{swatch:{width:"25px",height:"25px",fontSize:"0"}},hover:{swatch:a}},{hover:n});return M.createElement("div",{style:o.swatch},M.createElement(hu,{color:r,onClick:i,onHover:s,focusStyle:a}))};const kke=aI(Ske);var kI=function(e){var n=e.width,r=e.colors,i=e.onChange,s=e.onSwatchHover,a=e.triangle,o=e.styles,l=o===void 0?{}:o,c=e.className,u=c===void 0?"":c,d=Ge(hi({default:{card:{width:n,background:"#fff",border:"1px solid rgba(0,0,0,0.2)",boxShadow:"0 3px 12px rgba(0,0,0,0.15)",borderRadius:"4px",position:"relative",padding:"5px",display:"flex",flexWrap:"wrap"},triangle:{position:"absolute",border:"7px solid transparent",borderBottomColor:"#fff"},triangleShadow:{position:"absolute",border:"8px solid transparent",borderBottomColor:"rgba(0,0,0,0.15)"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-14px",left:"10px"},triangleShadow:{top:"-16px",left:"9px"}},"top-right-triangle":{triangle:{top:"-14px",right:"10px"},triangleShadow:{top:"-16px",right:"9px"}},"bottom-left-triangle":{triangle:{top:"35px",left:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",left:"9px",transform:"rotate(180deg)"}},"bottom-right-triangle":{triangle:{top:"35px",right:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",right:"9px",transform:"rotate(180deg)"}}},l),{"hide-triangle":a==="hide","top-left-triangle":a==="top-left","top-right-triangle":a==="top-right","bottom-left-triangle":a==="bottom-left","bottom-right-triangle":a==="bottom-right"}),f=function(g,y){return i({hex:g,source:"hex"},y)};return M.createElement("div",{style:d.card,className:"github-picker "+u},M.createElement("div",{style:d.triangleShadow}),M.createElement("div",{style:d.triangle}),mu(r,function(h){return M.createElement(kke,{color:h,key:h,onClick:f,onSwatchHover:s})}))};kI.propTypes={width:ge.oneOfType([ge.string,ge.number]),colors:ge.arrayOf(ge.string),triangle:ge.oneOf(["hide","top-left","top-right","bottom-left","bottom-right"]),styles:ge.object};kI.defaultProps={width:200,colors:["#B80000","#DB3E00","#FCCB00","#008B02","#006B76","#1273DE","#004DCF","#5300EB","#EB9694","#FAD0C3","#FEF3BD","#C1E1C5","#BEDADC","#C4DEF6","#BED3F3","#D4C4FB"],triangle:"top-left",styles:{}};mi(kI);var Cke=function(e){var n=e.direction,r=Ge({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:n==="vertical"});return M.createElement("div",{style:r.picker})},$ke=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},CI=function(e){var n=e.width,r=e.height,i=e.onChange,s=e.hsl,a=e.direction,o=e.pointer,l=e.styles,c=l===void 0?{}:l,u=e.className,d=u===void 0?"":u,f=Ge(hi({default:{picker:{position:"relative",width:n,height:r},hue:{radius:"2px"}}},c)),h=function(y){return i({a:1,h:y.h,l:.5,s:1})};return M.createElement("div",{style:f.picker,className:"hue-picker "+d},M.createElement(Bf,$ke({},f.hue,{hsl:s,pointer:o,onChange:h,direction:a})))};CI.propTypes={styles:ge.object};CI.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:Cke,styles:{}};mi(CI);var Eke=function(e){var n=e.onChange,r=e.hex,i=e.rgb,s=e.styles,a=s===void 0?{}:s,o=e.className,l=o===void 0?"":o,c=Ge(hi({default:{material:{width:"98px",height:"98px",padding:"16px",fontFamily:"Roboto"},HEXwrap:{position:"relative"},HEXinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"2px solid "+r,outline:"none",height:"30px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},Hex:{style:{}},RGBwrap:{position:"relative"},RGBinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"1px solid #eee",outline:"none",height:"30px"},RGBlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},split:{display:"flex",marginRight:"-10px",paddingTop:"11px"},third:{flex:"1",paddingRight:"10px"}}},a)),u=function(f,h){f.hex?Fl(f.hex)&&n({hex:f.hex,source:"hex"},h):(f.r||f.g||f.b)&&n({r:f.r||i.r,g:f.g||i.g,b:f.b||i.b,source:"rgb"},h)};return M.createElement(Dm,{styles:a},M.createElement("div",{style:c.material,className:"material-picker "+l},M.createElement(at,{style:{wrap:c.HEXwrap,input:c.HEXinput,label:c.HEXlabel},label:"hex",value:r,onChange:u}),M.createElement("div",{style:c.split,className:"flexbox-fix"},M.createElement("div",{style:c.third},M.createElement(at,{style:{wrap:c.RGBwrap,input:c.RGBinput,label:c.RGBlabel},label:"r",value:i.r,onChange:u})),M.createElement("div",{style:c.third},M.createElement(at,{style:{wrap:c.RGBwrap,input:c.RGBinput,label:c.RGBlabel},label:"g",value:i.g,onChange:u})),M.createElement("div",{style:c.third},M.createElement(at,{style:{wrap:c.RGBwrap,input:c.RGBinput,label:c.RGBlabel},label:"b",value:i.b,onChange:u})))))};mi(Eke);var Tke=function(e){var n=e.onChange,r=e.rgb,i=e.hsv,s=e.hex,a=Ge({default:{fields:{paddingTop:"5px",paddingBottom:"9px",width:"80px",position:"relative"},divider:{height:"5px"},RGBwrap:{position:"relative"},RGBinput:{marginLeft:"40%",width:"40%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"5px",fontSize:"13px",paddingLeft:"3px",marginRight:"10px"},RGBlabel:{left:"0px",top:"0px",width:"34px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px",position:"absolute"},HEXwrap:{position:"relative"},HEXinput:{marginLeft:"20%",width:"80%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"6px",fontSize:"13px",paddingLeft:"3px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",width:"14px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px"},fieldSymbols:{position:"absolute",top:"5px",right:"-7px",fontSize:"13px"},symbol:{height:"20px",lineHeight:"22px",paddingBottom:"7px"}}}),o=function(c,u){c["#"]?Fl(c["#"])&&n({hex:c["#"],source:"hex"},u):c.r||c.g||c.b?n({r:c.r||r.r,g:c.g||r.g,b:c.b||r.b,source:"rgb"},u):(c.h||c.s||c.v)&&n({h:c.h||i.h,s:c.s||i.s,v:c.v||i.v,source:"hsv"},u)};return M.createElement("div",{style:a.fields},M.createElement(at,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"h",value:Math.round(i.h),onChange:o}),M.createElement(at,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"s",value:Math.round(i.s*100),onChange:o}),M.createElement(at,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"v",value:Math.round(i.v*100),onChange:o}),M.createElement("div",{style:a.divider}),M.createElement(at,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"r",value:r.r,onChange:o}),M.createElement(at,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"g",value:r.g,onChange:o}),M.createElement(at,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"b",value:r.b,onChange:o}),M.createElement("div",{style:a.divider}),M.createElement(at,{style:{wrap:a.HEXwrap,input:a.HEXinput,label:a.HEXlabel},label:"#",value:s.replace("#",""),onChange:o}),M.createElement("div",{style:a.fieldSymbols},M.createElement("div",{style:a.symbol},"°"),M.createElement("div",{style:a.symbol},"%"),M.createElement("div",{style:a.symbol},"%")))},_ke=function(e){var n=e.hsl,r=Ge({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}},"black-outline":{picker:{boxShadow:"inset 0 0 0 1px #000"}}},{"black-outline":n.l>.5});return M.createElement("div",{style:r.picker})},Ike=function(){var e=Ge({default:{triangle:{width:0,height:0,borderStyle:"solid",borderWidth:"4px 0 4px 6px",borderColor:"transparent transparent transparent #fff",position:"absolute",top:"1px",left:"1px"},triangleBorder:{width:0,height:0,borderStyle:"solid",borderWidth:"5px 0 5px 8px",borderColor:"transparent transparent transparent #555"},left:{Extend:"triangleBorder",transform:"translate(-13px, -4px)"},leftInside:{Extend:"triangle",transform:"translate(-8px, -5px)"},right:{Extend:"triangleBorder",transform:"translate(20px, -14px) rotate(180deg)"},rightInside:{Extend:"triangle",transform:"translate(-8px, -5px)"}}});return M.createElement("div",{style:e.pointer},M.createElement("div",{style:e.left},M.createElement("div",{style:e.leftInside})),M.createElement("div",{style:e.right},M.createElement("div",{style:e.rightInside})))},e4=function(e){var n=e.onClick,r=e.label,i=e.children,s=e.active,a=Ge({default:{button:{backgroundImage:"linear-gradient(-180deg, #FFFFFF 0%, #E6E6E6 100%)",border:"1px solid #878787",borderRadius:"2px",height:"20px",boxShadow:"0 1px 0 0 #EAEAEA",fontSize:"14px",color:"#000",lineHeight:"20px",textAlign:"center",marginBottom:"10px",cursor:"pointer"}},active:{button:{boxShadow:"0 0 0 1px #878787"}}},{active:s});return M.createElement("div",{style:a.button,onClick:n},r||i)},Nke=function(e){var n=e.rgb,r=e.currentColor,i=Ge({default:{swatches:{border:"1px solid #B3B3B3",borderBottom:"1px solid #F0F0F0",marginBottom:"2px",marginTop:"1px"},new:{height:"34px",background:"rgb("+n.r+","+n.g+", "+n.b+")",boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 1px 0 #000"},current:{height:"34px",background:r,boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 -1px 0 #000"},label:{fontSize:"14px",color:"#000",textAlign:"center"}}});return M.createElement("div",null,M.createElement("div",{style:i.label},"new"),M.createElement("div",{style:i.swatches},M.createElement("div",{style:i.new}),M.createElement("div",{style:i.current})),M.createElement("div",{style:i.label},"current"))},Rke=function(){function t(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function Oke(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ake(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Pke(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var $I=function(t){Pke(e,t);function e(n){Oke(this,e);var r=Ake(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.state={currentColor:n.hex},r}return Rke(e,[{key:"render",value:function(){var r=this.props,i=r.styles,s=i===void 0?{}:i,a=r.className,o=a===void 0?"":a,l=Ge(hi({default:{picker:{background:"#DCDCDC",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.25), 0 8px 16px rgba(0,0,0,.15)",boxSizing:"initial",width:"513px"},head:{backgroundImage:"linear-gradient(-180deg, #F0F0F0 0%, #D4D4D4 100%)",borderBottom:"1px solid #B1B1B1",boxShadow:"inset 0 1px 0 0 rgba(255,255,255,.2), inset 0 -1px 0 0 rgba(0,0,0,.02)",height:"23px",lineHeight:"24px",borderRadius:"4px 4px 0 0",fontSize:"13px",color:"#4D4D4D",textAlign:"center"},body:{padding:"15px 15px 0",display:"flex"},saturation:{width:"256px",height:"256px",position:"relative",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0",overflow:"hidden"},hue:{position:"relative",height:"256px",width:"19px",marginLeft:"10px",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0"},controls:{width:"180px",marginLeft:"10px"},top:{display:"flex"},previews:{width:"60px"},actions:{flex:"1",marginLeft:"20px"}}},s));return M.createElement("div",{style:l.picker,className:"photoshop-picker "+o},M.createElement("div",{style:l.head},this.props.header),M.createElement("div",{style:l.body,className:"flexbox-fix"},M.createElement("div",{style:l.saturation},M.createElement(Jx,{hsl:this.props.hsl,hsv:this.props.hsv,pointer:_ke,onChange:this.props.onChange})),M.createElement("div",{style:l.hue},M.createElement(Bf,{direction:"vertical",hsl:this.props.hsl,pointer:Ike,onChange:this.props.onChange})),M.createElement("div",{style:l.controls},M.createElement("div",{style:l.top,className:"flexbox-fix"},M.createElement("div",{style:l.previews},M.createElement(Nke,{rgb:this.props.rgb,currentColor:this.state.currentColor})),M.createElement("div",{style:l.actions},M.createElement(e4,{label:"OK",onClick:this.props.onAccept,active:!0}),M.createElement(e4,{label:"Cancel",onClick:this.props.onCancel}),M.createElement(Tke,{onChange:this.props.onChange,rgb:this.props.rgb,hsv:this.props.hsv,hex:this.props.hex}))))))}}]),e}(M.Component);$I.propTypes={header:ge.string,styles:ge.object};$I.defaultProps={header:"Color Picker",styles:{}};mi($I);var Dke=function(e){var n=e.onChange,r=e.rgb,i=e.hsl,s=e.hex,a=e.disableAlpha,o=Ge({default:{fields:{display:"flex",paddingTop:"4px"},single:{flex:"1",paddingLeft:"6px"},alpha:{flex:"1",paddingLeft:"6px"},double:{flex:"2"},input:{width:"80%",padding:"4px 10% 3px",border:"none",boxShadow:"inset 0 0 0 1px #ccc",fontSize:"11px"},label:{display:"block",textAlign:"center",fontSize:"11px",color:"#222",paddingTop:"3px",paddingBottom:"4px",textTransform:"capitalize"}},disableAlpha:{alpha:{display:"none"}}},{disableAlpha:a}),l=function(u,d){u.hex?Fl(u.hex)&&n({hex:u.hex,source:"hex"},d):u.r||u.g||u.b?n({r:u.r||r.r,g:u.g||r.g,b:u.b||r.b,a:r.a,source:"rgb"},d):u.a&&(u.a<0?u.a=0:u.a>100&&(u.a=100),u.a/=100,n({h:i.h,s:i.s,l:i.l,a:u.a,source:"rgb"},d))};return M.createElement("div",{style:o.fields,className:"flexbox-fix"},M.createElement("div",{style:o.double},M.createElement(at,{style:{input:o.input,label:o.label},label:"hex",value:s.replace("#",""),onChange:l})),M.createElement("div",{style:o.single},M.createElement(at,{style:{input:o.input,label:o.label},label:"r",value:r.r,onChange:l,dragLabel:"true",dragMax:"255"})),M.createElement("div",{style:o.single},M.createElement(at,{style:{input:o.input,label:o.label},label:"g",value:r.g,onChange:l,dragLabel:"true",dragMax:"255"})),M.createElement("div",{style:o.single},M.createElement(at,{style:{input:o.input,label:o.label},label:"b",value:r.b,onChange:l,dragLabel:"true",dragMax:"255"})),M.createElement("div",{style:o.alpha},M.createElement(at,{style:{input:o.input,label:o.label},label:"a",value:Math.round(r.a*100),onChange:l,dragLabel:"true",dragMax:"100"})))},Fke=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},DV=function(e){var n=e.colors,r=e.onClick,i=r===void 0?function(){}:r,s=e.onSwatchHover,a=Ge({default:{colors:{margin:"0 -10px",padding:"10px 0 0 10px",borderTop:"1px solid #eee",display:"flex",flexWrap:"wrap",position:"relative"},swatchWrap:{width:"16px",height:"16px",margin:"0 10px 10px 0"},swatch:{borderRadius:"3px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)"}},"no-presets":{colors:{display:"none"}}},{"no-presets":!n||!n.length}),o=function(c,u){i({hex:c,source:"hex"},u)};return M.createElement("div",{style:a.colors,className:"flexbox-fix"},n.map(function(l){var c=typeof l=="string"?{color:l}:l,u=""+c.color+(c.title||"");return M.createElement("div",{key:u,style:a.swatchWrap},M.createElement(hu,Fke({},c,{style:a.swatch,onClick:o,onHover:s,focusStyle:{boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), 0 0 4px "+c.color}})))}))};DV.propTypes={colors:ge.arrayOf(ge.oneOfType([ge.string,ge.shape({color:ge.string,title:ge.string})])).isRequired};var Lke=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},EI=function(e){var n=e.width,r=e.rgb,i=e.hex,s=e.hsv,a=e.hsl,o=e.onChange,l=e.onSwatchHover,c=e.disableAlpha,u=e.presetColors,d=e.renderers,f=e.styles,h=f===void 0?{}:f,g=e.className,y=g===void 0?"":g,x=Ge(hi({default:Lke({picker:{width:n,padding:"10px 10px 0",boxSizing:"initial",background:"#fff",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.15), 0 8px 16px rgba(0,0,0,.15)"},saturation:{width:"100%",paddingBottom:"75%",position:"relative",overflow:"hidden"},Saturation:{radius:"3px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},controls:{display:"flex"},sliders:{padding:"4px 0",flex:"1"},color:{width:"24px",height:"24px",position:"relative",marginTop:"4px",marginLeft:"4px",borderRadius:"3px"},activeColor:{absolute:"0px 0px 0px 0px",borderRadius:"2px",background:"rgba("+r.r+","+r.g+","+r.b+","+r.a+")",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},hue:{position:"relative",height:"10px",overflow:"hidden"},Hue:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},alpha:{position:"relative",height:"10px",marginTop:"4px",overflow:"hidden"},Alpha:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"}},h),disableAlpha:{color:{height:"10px"},hue:{height:"10px"},alpha:{display:"none"}}},h),{disableAlpha:c});return M.createElement("div",{style:x.picker,className:"sketch-picker "+y},M.createElement("div",{style:x.saturation},M.createElement(Jx,{style:x.Saturation,hsl:a,hsv:s,onChange:o})),M.createElement("div",{style:x.controls,className:"flexbox-fix"},M.createElement("div",{style:x.sliders},M.createElement("div",{style:x.hue},M.createElement(Bf,{style:x.Hue,hsl:a,onChange:o})),M.createElement("div",{style:x.alpha},M.createElement(oI,{style:x.Alpha,rgb:r,hsl:a,renderers:d,onChange:o}))),M.createElement("div",{style:x.color},M.createElement(Mf,null),M.createElement("div",{style:x.activeColor}))),M.createElement(Dke,{rgb:r,hsl:a,hex:i,onChange:o,disableAlpha:c}),M.createElement(DV,{colors:u,onClick:o,onSwatchHover:l}))};EI.propTypes={disableAlpha:ge.bool,width:ge.oneOfType([ge.string,ge.number]),styles:ge.object};EI.defaultProps={disableAlpha:!1,width:200,styles:{},presetColors:["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF"]};const Mke=mi(EI);var Bp=function(e){var n=e.hsl,r=e.offset,i=e.onClick,s=i===void 0?function(){}:i,a=e.active,o=e.first,l=e.last,c=Ge({default:{swatch:{height:"12px",background:"hsl("+n.h+", 50%, "+r*100+"%)",cursor:"pointer"}},first:{swatch:{borderRadius:"2px 0 0 2px"}},last:{swatch:{borderRadius:"0 2px 2px 0"}},active:{swatch:{transform:"scaleY(1.8)",borderRadius:"3.6px/2px"}}},{active:a,first:o,last:l}),u=function(f){return s({h:n.h,s:.5,l:r,source:"hsl"},f)};return M.createElement("div",{style:c.swatch,onClick:u})},Bke=function(e){var n=e.onClick,r=e.hsl,i=Ge({default:{swatches:{marginTop:"20px"},swatch:{boxSizing:"border-box",width:"20%",paddingRight:"1px",float:"left"},clear:{clear:"both"}}}),s=.1;return M.createElement("div",{style:i.swatches},M.createElement("div",{style:i.swatch},M.createElement(Bp,{hsl:r,offset:".80",active:Math.abs(r.l-.8)<s&&Math.abs(r.s-.5)<s,onClick:n,first:!0})),M.createElement("div",{style:i.swatch},M.createElement(Bp,{hsl:r,offset:".65",active:Math.abs(r.l-.65)<s&&Math.abs(r.s-.5)<s,onClick:n})),M.createElement("div",{style:i.swatch},M.createElement(Bp,{hsl:r,offset:".50",active:Math.abs(r.l-.5)<s&&Math.abs(r.s-.5)<s,onClick:n})),M.createElement("div",{style:i.swatch},M.createElement(Bp,{hsl:r,offset:".35",active:Math.abs(r.l-.35)<s&&Math.abs(r.s-.5)<s,onClick:n})),M.createElement("div",{style:i.swatch},M.createElement(Bp,{hsl:r,offset:".20",active:Math.abs(r.l-.2)<s&&Math.abs(r.s-.5)<s,onClick:n,last:!0})),M.createElement("div",{style:i.clear}))},zke=function(){var e=Ge({default:{picker:{width:"14px",height:"14px",borderRadius:"6px",transform:"translate(-7px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return M.createElement("div",{style:e.picker})},TI=function(e){var n=e.hsl,r=e.onChange,i=e.pointer,s=e.styles,a=s===void 0?{}:s,o=e.className,l=o===void 0?"":o,c=Ge(hi({default:{hue:{height:"12px",position:"relative"},Hue:{radius:"2px"}}},a));return M.createElement("div",{style:c.wrap||{},className:"slider-picker "+l},M.createElement("div",{style:c.hue},M.createElement(Bf,{style:c.Hue,hsl:n,pointer:i,onChange:r})),M.createElement("div",{style:c.swatches},M.createElement(Bke,{hsl:n,onClick:r})))};TI.propTypes={styles:ge.object};TI.defaultProps={pointer:zke,styles:{}};mi(TI);var FV={};Object.defineProperty(FV,"__esModule",{value:!0});var t4=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jke=A,n4=Vke(jke);function Vke(t){return t&&t.__esModule?t:{default:t}}function Wke(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}var Fv=24,Uke=FV.default=function(t){var e=t.fill,n=e===void 0?"currentColor":e,r=t.width,i=r===void 0?Fv:r,s=t.height,a=s===void 0?Fv:s,o=t.style,l=o===void 0?{}:o,c=Wke(t,["fill","width","height","style"]);return n4.default.createElement("svg",t4({viewBox:"0 0 "+Fv+" "+Fv,style:t4({fill:n,width:i,height:a},l)},c),n4.default.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))},Gke=function(e){var n=e.color,r=e.onClick,i=r===void 0?function(){}:r,s=e.onSwatchHover,a=e.first,o=e.last,l=e.active,c=Ge({default:{color:{width:"40px",height:"24px",cursor:"pointer",background:n,marginBottom:"1px"},check:{color:mI(n),marginLeft:"8px",display:"none"}},first:{color:{overflow:"hidden",borderRadius:"2px 2px 0 0"}},last:{color:{overflow:"hidden",borderRadius:"0 0 2px 2px"}},active:{check:{display:"block"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},check:{color:"#333"}},transparent:{check:{color:"#333"}}},{first:a,last:o,active:l,"color-#FFFFFF":n==="#FFFFFF",transparent:n==="transparent"});return M.createElement(hu,{color:n,style:c.color,onClick:i,onHover:s,focusStyle:{boxShadow:"0 0 4px "+n}},M.createElement("div",{style:c.check},M.createElement(Uke,null)))},Hke=function(e){var n=e.onClick,r=e.onSwatchHover,i=e.group,s=e.active,a=Ge({default:{group:{paddingBottom:"10px",width:"40px",float:"left",marginRight:"10px"}}});return M.createElement("div",{style:a.group},mu(i,function(o,l){return M.createElement(Gke,{key:o,color:o,active:o.toLowerCase()===s,first:l===0,last:l===i.length-1,onClick:n,onSwatchHover:r})}))},_I=function(e){var n=e.width,r=e.height,i=e.onChange,s=e.onSwatchHover,a=e.colors,o=e.hex,l=e.styles,c=l===void 0?{}:l,u=e.className,d=u===void 0?"":u,f=Ge(hi({default:{picker:{width:n,height:r},overflow:{height:r,overflowY:"scroll"},body:{padding:"16px 0 6px 16px"},clear:{clear:"both"}}},c)),h=function(y,x){return i({hex:y,source:"hex"},x)};return M.createElement("div",{style:f.picker,className:"swatches-picker "+d},M.createElement(Dm,null,M.createElement("div",{style:f.overflow},M.createElement("div",{style:f.body},mu(a,function(g){return M.createElement(Hke,{key:g.toString(),group:g,active:o,onClick:h,onSwatchHover:s})}),M.createElement("div",{style:f.clear})))))};_I.propTypes={width:ge.oneOfType([ge.string,ge.number]),height:ge.oneOfType([ge.string,ge.number]),colors:ge.arrayOf(ge.arrayOf(ge.string)),styles:ge.object};_I.defaultProps={width:320,height:240,colors:[[Ku[900],Ku[700],Ku[500],Ku[300],Ku[100]],[Xu[900],Xu[700],Xu[500],Xu[300],Xu[100]],[Yu[900],Yu[700],Yu[500],Yu[300],Yu[100]],[Qu[900],Qu[700],Qu[500],Qu[300],Qu[100]],[Zu[900],Zu[700],Zu[500],Zu[300],Zu[100]],[Ju[900],Ju[700],Ju[500],Ju[300],Ju[100]],[ed[900],ed[700],ed[500],ed[300],ed[100]],[td[900],td[700],td[500],td[300],td[100]],[nd[900],nd[700],nd[500],nd[300],nd[100]],["#194D33",nh[700],nh[500],nh[300],nh[100]],[rd[900],rd[700],rd[500],rd[300],rd[100]],[id[900],id[700],id[500],id[300],id[100]],[sd[900],sd[700],sd[500],sd[300],sd[100]],[ad[900],ad[700],ad[500],ad[300],ad[100]],[od[900],od[700],od[500],od[300],od[100]],[ld[900],ld[700],ld[500],ld[300],ld[100]],[cd[900],cd[700],cd[500],cd[300],cd[100]],[ud[900],ud[700],ud[500],ud[300],ud[100]],["#000000","#525252","#969696","#D9D9D9","#FFFFFF"]],styles:{}};mi(_I);var II=function(e){var n=e.onChange,r=e.onSwatchHover,i=e.hex,s=e.colors,a=e.width,o=e.triangle,l=e.styles,c=l===void 0?{}:l,u=e.className,d=u===void 0?"":u,f=Ge(hi({default:{card:{width:a,background:"#fff",border:"0 solid rgba(0,0,0,0.25)",boxShadow:"0 1px 4px rgba(0,0,0,0.25)",borderRadius:"4px",position:"relative"},body:{padding:"15px 9px 9px 15px"},label:{fontSize:"18px",color:"#fff"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent #fff transparent",position:"absolute"},triangleShadow:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent rgba(0,0,0,.1) transparent",position:"absolute"},hash:{background:"#F0F0F0",height:"30px",width:"30px",borderRadius:"4px 0 0 4px",float:"left",color:"#98A1A4",display:"flex",alignItems:"center",justifyContent:"center"},input:{width:"100px",fontSize:"14px",color:"#666",border:"0px",outline:"none",height:"28px",boxShadow:"inset 0 0 0 1px #F0F0F0",boxSizing:"content-box",borderRadius:"0 4px 4px 0",float:"left",paddingLeft:"8px"},swatch:{width:"30px",height:"30px",float:"left",borderRadius:"4px",margin:"0 6px 6px 0"},clear:{clear:"both"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-10px",left:"12px"},triangleShadow:{top:"-11px",left:"12px"}},"top-right-triangle":{triangle:{top:"-10px",right:"12px"},triangleShadow:{top:"-11px",right:"12px"}}},c),{"hide-triangle":o==="hide","top-left-triangle":o==="top-left","top-right-triangle":o==="top-right"}),h=function(y,x){Fl(y)&&n({hex:y,source:"hex"},x)};return M.createElement("div",{style:f.card,className:"twitter-picker "+d},M.createElement("div",{style:f.triangleShadow}),M.createElement("div",{style:f.triangle}),M.createElement("div",{style:f.body},mu(s,function(g,y){return M.createElement(hu,{key:y,color:g,hex:g,style:f.swatch,onClick:h,onHover:r,focusStyle:{boxShadow:"0 0 4px "+g}})}),M.createElement("div",{style:f.hash},"#"),M.createElement(at,{label:null,style:{input:f.input},value:i.replace("#",""),onChange:h}),M.createElement("div",{style:f.clear})))};II.propTypes={width:ge.oneOfType([ge.string,ge.number]),triangle:ge.oneOf(["hide","top-left","top-right"]),colors:ge.arrayOf(ge.string),styles:ge.object};II.defaultProps={width:276,colors:["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"],triangle:"top-left",styles:{}};mi(II);var NI=function(e){var n=Ge({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",border:"2px #fff solid",transform:"translate(-12px, -13px)",background:"hsl("+Math.round(e.hsl.h)+", "+Math.round(e.hsl.s*100)+"%, "+Math.round(e.hsl.l*100)+"%)"}}});return M.createElement("div",{style:n.picker})};NI.propTypes={hsl:ge.shape({h:ge.number,s:ge.number,l:ge.number,a:ge.number})};NI.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var RI=function(e){var n=Ge({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",transform:"translate(-10px, -7px)",background:"hsl("+Math.round(e.hsl.h)+", 100%, 50%)",border:"2px white solid"}}});return M.createElement("div",{style:n.picker})};RI.propTypes={hsl:ge.shape({h:ge.number,s:ge.number,l:ge.number,a:ge.number})};RI.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var qke=function(e){var n=e.onChange,r=e.rgb,i=e.hsl,s=e.hex,a=e.hsv,o=function(h,g){if(h.hex)Fl(h.hex)&&n({hex:h.hex,source:"hex"},g);else if(h.rgb){var y=h.rgb.split(",");Zk(h.rgb,"rgb")&&n({r:y[0],g:y[1],b:y[2],a:1,source:"rgb"},g)}else if(h.hsv){var x=h.hsv.split(",");Zk(h.hsv,"hsv")&&(x[2]=x[2].replace("%",""),x[1]=x[1].replace("%",""),x[0]=x[0].replace("°",""),x[1]==1?x[1]=.01:x[2]==1&&(x[2]=.01),n({h:Number(x[0]),s:Number(x[1]),v:Number(x[2]),source:"hsv"},g))}else if(h.hsl){var v=h.hsl.split(",");Zk(h.hsl,"hsl")&&(v[2]=v[2].replace("%",""),v[1]=v[1].replace("%",""),v[0]=v[0].replace("°",""),d[1]==1?d[1]=.01:d[2]==1&&(d[2]=.01),n({h:Number(v[0]),s:Number(v[1]),v:Number(v[2]),source:"hsl"},g))}},l=Ge({default:{wrap:{display:"flex",height:"100px",marginTop:"4px"},fields:{width:"100%"},column:{paddingTop:"10px",display:"flex",justifyContent:"space-between"},double:{padding:"0px 4.4px",boxSizing:"border-box"},input:{width:"100%",height:"38px",boxSizing:"border-box",padding:"4px 10% 3px",textAlign:"center",border:"1px solid #dadce0",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",fontFamily:"Roboto,Arial,sans-serif"},input2:{height:"38px",width:"100%",border:"1px solid #dadce0",boxSizing:"border-box",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",paddingLeft:"10px",fontFamily:"Roboto,Arial,sans-serif"},label:{textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"35px",top:"-6px",left:"0",right:"0",marginLeft:"auto",marginRight:"auto",fontFamily:"Roboto,Arial,sans-serif"},label2:{left:"10px",textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"32px",top:"-6px",fontFamily:"Roboto,Arial,sans-serif"},single:{flexGrow:"1",margin:"0px 4.4px"}}}),c=r.r+", "+r.g+", "+r.b,u=Math.round(i.h)+"°, "+Math.round(i.s*100)+"%, "+Math.round(i.l*100)+"%",d=Math.round(a.h)+"°, "+Math.round(a.s*100)+"%, "+Math.round(a.v*100)+"%";return M.createElement("div",{style:l.wrap,className:"flexbox-fix"},M.createElement("div",{style:l.fields},M.createElement("div",{style:l.double},M.createElement(at,{style:{input:l.input,label:l.label},label:"hex",value:s,onChange:o})),M.createElement("div",{style:l.column},M.createElement("div",{style:l.single},M.createElement(at,{style:{input:l.input2,label:l.label2},label:"rgb",value:c,onChange:o})),M.createElement("div",{style:l.single},M.createElement(at,{style:{input:l.input2,label:l.label2},label:"hsv",value:d,onChange:o})),M.createElement("div",{style:l.single},M.createElement(at,{style:{input:l.input2,label:l.label2},label:"hsl",value:u,onChange:o})))))},OI=function(e){var n=e.width,r=e.onChange,i=e.rgb,s=e.hsl,a=e.hsv,o=e.hex,l=e.header,c=e.styles,u=c===void 0?{}:c,d=e.className,f=d===void 0?"":d,h=Ge(hi({default:{picker:{width:n,background:"#fff",border:"1px solid #dfe1e5",boxSizing:"initial",display:"flex",flexWrap:"wrap",borderRadius:"8px 8px 0px 0px"},head:{height:"57px",width:"100%",paddingTop:"16px",paddingBottom:"16px",paddingLeft:"16px",fontSize:"20px",boxSizing:"border-box",fontFamily:"Roboto-Regular,HelveticaNeue,Arial,sans-serif"},saturation:{width:"70%",padding:"0px",position:"relative",overflow:"hidden"},swatch:{width:"30%",height:"228px",padding:"0px",background:"rgba("+i.r+", "+i.g+", "+i.b+", 1)",position:"relative",overflow:"hidden"},body:{margin:"auto",width:"95%"},controls:{display:"flex",boxSizing:"border-box",height:"52px",paddingTop:"22px"},color:{width:"32px"},hue:{height:"8px",position:"relative",margin:"0px 16px 0px 16px",width:"100%"},Hue:{radius:"2px"}}},u));return M.createElement("div",{style:h.picker,className:"google-picker "+f},M.createElement("div",{style:h.head},l),M.createElement("div",{style:h.swatch}),M.createElement("div",{style:h.saturation},M.createElement(Jx,{hsl:s,hsv:a,pointer:NI,onChange:r})),M.createElement("div",{style:h.body},M.createElement("div",{style:h.controls,className:"flexbox-fix"},M.createElement("div",{style:h.hue},M.createElement(Bf,{style:h.Hue,hsl:s,radius:"4px",pointer:RI,onChange:r}))),M.createElement(qke,{rgb:i,hsl:s,hex:o,hsv:a,onChange:r})))};OI.propTypes={width:ge.oneOfType([ge.string,ge.number]),styles:ge.object,header:ge.string};OI.defaultProps={width:652,styles:{},header:"Color picker"};mi(OI);const Kke=[{type:"color",id:"white",colorCode:"#FFFFFF"},{type:"color",id:"black",colorCode:"#000000"},{type:"color",id:"grey",colorCode:"#404040"},{type:"color",id:"purple",colorCode:"#272755"}],Xke="STAGE",Yke=(t,e)=>t.pipe(voe(dc.addItem.type),foe(1),poe(n=>console.log(""))),na=P_(),LV=Bx({name:Xke,initialState:na.setAll(na.getInitialState(),[]),reducers:{addItem(t,e){if(Array.isArray(e.payload)){na.addMany(t,e.payload);return}na.addOne(t,e.payload)},updateItem(t,e){if(Array.isArray(e.payload)){na.updateMany(t,e.payload.map(n=>({id:n.id,changes:n.attrs})));return}na.updateOne(t,{id:e.payload.id,changes:e.payload})},removeItem(t,e){if(Array.isArray(e.payload)){na.removeMany(t,e.payload);return}na.removeOne(t,e.payload.id)},clearItems(t,e){na.removeAll(t)}}}),Qke=LV.reducer,MV=na.getSelectors(t=>t.currentStageData),dc=LV.actions,qn=()=>{const t=QT(),e=W0(MV.selectAll);return{stageData:e,createItem:o=>{t(dc.addItem(o))},updateItem:(o,l)=>{const c=e.find(d=>d.id===o||d.attrs.id===o),u={...c??{},attrs:{...c?c.attrs:{},...l(c)}};t(dc.updateItem(u))},removeItem:o=>{t(dc.removeItem(o))},alterItems:o=>{t(dc.clearItems({})),t(dc.addItem(o))},clearItems:()=>{t(dc.clearItems({}))}}},nb=()=>({getValue:n=>window.localStorage.getItem(n)&&window.localStorage.getItem(n)!=="null"?JSON.parse(window.localStorage.getItem(n)):null,setValue:(n,r)=>{window.localStorage.setItem(n,JSON.stringify(r))}}),eC="colorList",Zke=({data:t})=>{const{getValue:e,setValue:n}=nb(),{updateItem:r}=qn(),[i,s]=A.useState(!1),[a,o]=A.useState("#000000"),{getTranslation:l}=ms(),[c,u]=A.useState(()=>e(eC)?[...e(eC)]:[...Kke]),d=y=>{o(y.hex)},f=y=>{i&&h(),s(x=>!x)},h=()=>{if(!c.find(y=>y.colorCode===a)){const y=[...c,{id:Xi(),type:"color",colorCode:a}];n(eC,y),u(y)}},g=y=>{t.selectedItems[0]&&(y.shiftKey?t.selectedItems[0].attrs.stroke=void 0:t.selectedItems[0].attrs.fill="transparent",r(t.selectedItems[0].id(),x=>t.selectedItems[0].attrs))};return z.jsxs(Lt,{children:[z.jsxs("h6",{children:[l("widget","colorPalette","name"),z.jsx(M$,{placement:"bottom",overlay:z.jsx(Q0,{id:"tooltip-clear-color",children:l("widget","colorPalette","addColor","name")}),children:z.jsx(Lc,{className:[Lr.transparentDarkColorTheme,vl.none,Z0["inline-block"],Jt.width10,Ds.p0,Ds.ml1rem,Ct["text-left"]].join(" "),onClick:f,children:z.jsx("i",{className:"bi-plus"})})}),z.jsx(M$,{placement:"bottom",overlay:z.jsx(Q0,{id:"tooltip-clear-color",children:l("widget","colorPalette","clearColor","name")}),children:z.jsx(Lc,{className:[Lr.transparentDarkColorTheme,vl.none,Z0["inline-block"],Jt.width10,Ds.p0,Ds.ml1rem,Ct["text-left"]].join(" "),onClick:g,children:z.jsx("i",{className:"bi-x-circle"})})})]}),i&&z.jsx(Mke,{color:a,onChange:d,className:[Dr.absolute,Dr.left0,Dr.zIndex3].join(" ")}),z.jsx(ui,{xs:4,children:c.map(y=>z.jsx(Jke,{data:{id:y.id,"data-item-type":"color",colorCode:y.colorCode,selectedItems:t.selectedItems}},`colorPalette-thumbnail-${y.id}`))}),z.jsx(eCe,{data:{"data-item-type":"opacity",selectedItems:t.selectedItems}}),z.jsx(tCe,{data:{"data-item-type":"brightness",selectedItems:t.selectedItems}}),z.jsx(nCe,{data:{"data-item-type":"grayScale",selectedItems:t.selectedItems}})]})},Jke=({data:{id:t,...e}})=>{const{updateItem:n}=qn(),r=i=>{var s,a;i.preventDefault(),i.stopPropagation(),(s=window.getSelection())==null||s.removeAllRanges(),e.selectedItems.forEach(o=>{i.shiftKey?o.attrs.stroke=e.colorCode:o.attrs.fill=e.colorCode,n(o.id(),()=>o.attrs)}),(a=e.selectedItems[0].getStage())==null||a.batchDraw()};return z.jsxs(ir,{as:Lt,className:[Ct.absoluteCenter,Ct.wrapTrue].join(" "),children:[z.jsx("div",{onClick:r,style:{width:20,height:20,backgroundColor:e.colorCode}}),z.jsx(ir.Caption,{className:[Tf.fontHalf1em,"text-center"].join(" "),children:`${e.colorCode}`})]})},eCe=({data:t})=>{const{updateItem:e}=qn(),{getTranslation:n}=ms(),[r,i]=A.useState(t.selectedItems[0]?t.selectedItems[0].attrs.opacity*100:100);A.useEffect(()=>{i(t.selectedItems[0]&&t.selectedItems[0].attrs.opacity!==void 0&&t.selectedItems[0].attrs.opacity!==null?t.selectedItems[0].attrs.opacity*100:100)},[t.selectedItems]);const s=a=>{var o;i(parseInt(a.currentTarget.value)),t.selectedItems.length!==0&&(t.selectedItems.forEach(l=>{l.opacity(parseInt(a.currentTarget.value)*.01),l.attrs.opacity=parseInt(a.currentTarget.value)*.01,e(l.id(),()=>l.attrs)}),(o=t.selectedItems[0].getStage())==null||o.batchDraw())};return z.jsxs(Lt,{children:[z.jsx("h6",{children:n("widget","colorPalette","opacity","name")}),z.jsx(Sj,{tooltipLabel:a=>`${a}%`,value:r,onChange:s})]})},tCe=({data:t})=>{const{updateItem:e}=qn(),{getTranslation:n}=ms(),[r,i]=A.useState(t.selectedItems[0]&&t.selectedItems[0].attrs.brightness?t.selectedItems[0].attrs.brightness*100:0);A.useEffect(()=>{i(t.selectedItems[0]&&t.selectedItems[0].attrs.brightness!==void 0&&t.selectedItems[0].attrs.brightness!==null?t.selectedItems[0].attrs.brightness*100:0)},[t.selectedItems]);const s=a=>{var o;i(parseInt(a.currentTarget.value)),t.selectedItems.length!==0&&(t.selectedItems.forEach(l=>{l.brightness(parseInt(a.currentTarget.value)*.01),l.attrs.brightness=parseInt(a.currentTarget.value)*.01,e(l.id(),()=>l.attrs)}),(o=t.selectedItems[0].getStage())==null||o.batchDraw())};return z.jsxs(Lt,{children:[z.jsx("h6",{children:n("widget","colorPalette","brightness","name")}),z.jsx(Sj,{tooltipLabel:a=>`${a}%`,value:r,onChange:s})]})},nCe=({data:t})=>{const{updateItem:e}=qn(),{getTranslation:n}=ms(),[r,i]=A.useState(!!(t.selectedItems[0]&&t.selectedItems[0].filters()&&t.selectedItems[0].filters().find(a=>a===Fr.Filters.Grayscale))),s=a=>{var l;if(i(a.currentTarget.checked),t.selectedItems.length===0)return;let o=[];t.selectedItems[0].filters().find(c=>c===Fr.Filters.Grayscale)?(t.selectedItems[0].filters(t.selectedItems[0].filters().filter(c=>c!==Fr.Filters.Grayscale)),o=t.selectedItems[0].filters().filter(c=>c!==Fr.Filters.Grayscale)):(t.selectedItems[0].filters([...t.selectedItems[0].filters(),Fr.Filters.Grayscale]),o=[...t.selectedItems[0].filters(),Fr.Filters.Grayscale]),e(t.selectedItems[0].id(),()=>({...t.selectedItems[0].attrs,_filters:o.map(c=>c.name)})),(l=t.selectedItems[0].getStage())==null||l.batchDraw()};return A.useEffect(()=>{i(!!(t.selectedItems[0]&&t.selectedItems[0].filters()&&t.selectedItems[0].filters().find(a=>a===Fr.Filters.Grayscale)))},[t.selectedItems]),z.jsxs(Lt,{children:[z.jsx("h6",{children:n("widget","colorPalette","grayScale","name")}),z.jsx(pc,{children:z.jsx(pc.Check,{checked:r,onChange:s,type:"switch",label:"",id:"grayScaleSwitch"})})]})},rCe=[{type:"text",id:"sample-text-1",width:250,height:35,fontSize:30,fontFamily:"serif",text:"hello world!"},{type:"text",id:"sample-text-2",width:250,height:35,fontSize:30,fontFamily:"'Fira Mono', monospace",text:"hello world!"},{type:"text",id:"sample-text-3",width:250,height:35,fontSize:30,fontFamily:"'Hurricane', cursive",text:"hello world!"},{type:"text",id:"sample-text-4",width:250,height:35,fontSize:30,fontFamily:"'League Gothic', sans-serif",text:"hello world!"},{type:"text",id:"sample-text-5",width:250,height:35,fontSize:30,fontFamily:"'Roboto Slab', serif",text:"hello world!"},{type:"text",id:"sample-text-6",width:250,height:35,fontSize:30,fontFamily:"'Nanum Gothic', sans-serif",text:"안녕하세요"},{type:"text",id:"sample-text-7",width:250,height:35,fontSize:30,fontFamily:"'Do Hyeon', sans-serif",text:"안녕하세요"},{type:"text",id:"sample-text-8",width:250,height:35,fontSize:30,fontFamily:"'Gamja Flower', cursive",text:"안녕하세요"},{type:"text",id:"sample-text-9",width:250,height:35,fontSize:30,fontFamily:"'Jua', sans-serif",text:"안녕하세요"},{type:"text",id:"sample-text-10",width:250,height:35,fontSize:30,fontFamily:"'Noto Sans KR', sans-serif",text:"안녕하세요"},{type:"text",id:"sample-text-11",width:250,height:35,fontSize:30,fontFamily:"'Noto Serif KR', serif",text:"안녕하세요"},{type:"text",id:"sample-text-12",width:250,height:35,fontSize:30,fontFamily:"'Ma Shan Zheng', cursive",text:"你是我的朋友"},{type:"text",id:"sample-text-13",width:250,height:35,fontSize:30,fontFamily:"'Noto Serif SC', serif",text:"你是我的朋友"},{type:"text",id:"sample-text-14",width:250,height:35,fontSize:30,fontFamily:"'ZCOOL KuaiLe', cursive",text:"你是我的朋友"},{type:"text",id:"sample-text-15",width:250,height:35,fontSize:30,fontFamily:"'M PLUS 1', sans-serif",text:"今日は気持ちいい"},{type:"text",id:"sample-text-16",width:250,height:35,fontSize:30,fontFamily:"'Noto Sans JP', sans-serif",text:"今日は気持ちいい"},{type:"text",id:"sample-text-17",width:250,height:35,fontSize:30,fontFamily:"'Noto Serif JP', serif",text:"今日は気持ちいい"},{type:"text",id:"sample-text-18",width:250,height:35,fontSize:30,fontFamily:"'Rampart One', cursive",text:"今日は気持ちいい"},{type:"text",id:"sample-text-19",width:250,height:35,fontSize:30,fontFamily:"'Yuji Hentaigana Akebono', cursive",text:"今日は気持ちいい"},{type:"text",id:"sample-text-20",width:250,height:35,fontSize:30,fontFamily:"'Zen Kurenaido', sans-serif",text:"今日は気持ちいい"},{type:"text",id:"sample-text-21",width:250,height:35,fontSize:30,fontFamily:"'Anton', sans-serif",text:"bầu trời màu xanh"},{type:"text",id:"sample-text-22",width:250,height:35,fontSize:30,fontFamily:"'Dancing Script', cursive",text:"bầu trời màu xanh"},{type:"text",id:"sample-text-23",width:250,height:35,fontSize:30,fontFamily:"'Inconsolata', monospace",text:"bầu trời màu xanh"},{type:"text",id:"sample-text-24",width:250,height:35,fontSize:30,fontFamily:"'Open Sans', sans-serif",text:"bầu trời màu xanh"},{type:"text",id:"sample-text-25",width:250,height:35,fontSize:30,fontFamily:"'Playfair Display', serif",text:"bầu trời màu xanh"},{type:"text",id:"sample-text-26",width:250,height:35,fontSize:30,fontFamily:"'Roboto Mono', monospace",text:"bầu trời màu xanh"}],iCe=()=>z.jsx(ui,{xs:2,className:[Jt["mx-h-30vh"]].join(" "),children:rCe.map(({type:t,id:e,width:n,height:r,fontSize:i,fontFamily:s,text:a})=>z.jsx(sCe,{data:{id:e,name:a,width:n,height:r,fontSize:i,fontFamily:s,text:a,"data-item-type":t},maxPx:80},`text-thumbnail-${e}`))}),sCe=({data:t,maxPx:e})=>z.jsx(ir,{as:Lt,className:[Ct.absoluteCenter,Ct.wrapTrue].join(" "),children:z.jsx(_f,{dragType:"copyMove",dragSrc:{trigger:Zi.INSERT.TEXT,...t},children:z.jsx("h6",{style:{width:"100%",fontFamily:t.fontFamily,fontSize:t.fontSize-10,textAlign:"center"},children:t.text})})}),aCe=[{type:"align",id:"left",icon:"align-start"},{type:"align",id:"center",icon:"align-center"},{type:"align",id:"right",icon:"align-end"},{type:"align",id:"top",icon:"align-top"},{type:"align",id:"middle",icon:"align-middle"},{type:"align",id:"bottom",icon:"align-bottom"}],oCe=({data:t})=>z.jsx(Lt,{children:z.jsx(ui,{children:aCe.map(e=>z.jsx(lCe,{data:{id:e.id,icon:e.icon,"data-item-type":"align",selectedItems:t.selectedItems}},`align-thumbnail-${e.id}`))})}),lCe=({data:t})=>{const{updateItem:e}=qn(),{getTranslation:n}=ms(),r=(o,l)=>{var c;["left","center","right"].includes(l)?o.align(l):o.verticalAlign(l),(c=o.getStage())==null||c.batchDraw()},i=(o,l,c)=>{switch(o){case"left":return cCe(l,c);case"center":return uCe(l,c);case"right":return dCe(l,c);case"top":return fCe(l,c);case"middle":return pCe(l,c);case"bottom":return hCe(l,c);default:return{x:l.x(),y:l.y()}}},s=(o,l,c)=>{const{x:u,y:d}=i(o,l,c);l.x(u),l.y(d),l.attrs.x=u,l.attrs.y=d,e(l.id(),()=>l.attrs)},a=o=>()=>{var u,d;if(t.selectedItems.length===0)return;if(t.selectedItems.length===1&&t.selectedItems[0].className==="Text"){r(t.selectedItems[0],o);return}const l=t.selectedItems.find(f=>f.attrs["data-item-type"]==="frame");if(l){t.selectedItems.filter(f=>f.id()!==l.id()).forEach(f=>{s(o,f,l)}),(u=t.selectedItems[0].getStage())==null||u.batchDraw();return}const c=t.selectedItems[0].getStage();c&&(t.selectedItems.forEach(f=>{s(o,f,c)}),(d=t.selectedItems[0].getStage())==null||d.batchDraw())};return z.jsxs(ir,{as:Lt,onClick:a(t.id),className:[Ct.absoluteCenter,Ct.wrapTrue].join(" "),children:[z.jsx("i",{className:`bi-${t.icon}`,style:{fontSize:20,width:25}}),z.jsx(ir.Caption,{className:[Tf.font075em,Jt.width100,"text-center"].join(" "),children:`${n("widget","align",t.id,"name")}`})]})},cCe=(t,e)=>t.attrs["data-item-type"]==="shape"&&t.attrs.sides!==4?{x:e.position().x+t.attrs.radius,y:t.y()}:{x:e.position().x,y:t.y()},uCe=(t,e)=>t.attrs["data-item-type"]==="shape"&&t.attrs.sides!==4?{x:e.position().x+e.size().width*e.scaleX()/2,y:t.y()}:{x:e.position().x+e.size().width*e.scaleX()/2-t.size().width*t.scaleX()/2,y:t.y()},dCe=(t,e)=>t.attrs["data-item-type"]==="shape"&&t.attrs.sides!==4?{x:e.position().x+e.size().width*e.scaleX()-t.attrs.radius,y:t.y()}:{x:e.position().x+e.size().width*e.scaleX()-t.size().width*t.scaleX(),y:t.y()},fCe=(t,e)=>t.attrs["data-item-type"]==="shape"&&t.attrs.sides!==4?{x:t.x(),y:e.position().y+t.attrs.radius}:{x:t.x(),y:e.position().y},pCe=(t,e)=>t.attrs["data-item-type"]==="shape"&&t.attrs.sides!==4?{x:t.x(),y:e.position().y+e.size().height*e.scaleY()/2}:{x:t.x(),y:e.position().y+e.size().height*e.scaleY()/2-t.size().height*t.scaleY()/2},hCe=(t,e)=>t.attrs["data-item-type"]==="shape"&&t.attrs.sides!==4?{x:t.x(),y:e.position().y+e.size().height*e.scaleY()-t.attrs.radius}:{x:t.x(),y:e.position().y+e.size().height*e.scaleY()-t.size().height*t.scaleY()},mCe=[{type:"export",id:"export-all-frame",name:"Export All Frame",icon:"download"},{type:"export",id:"export-selected",name:"Export Selected Frame",icon:"box-arrow-down"}],gCe=({data:t})=>z.jsx(Lt,{children:z.jsx(ui,{children:mCe.map(e=>z.jsx(yCe,{data:{id:e.id,icon:e.icon,name:e.name,"data-item-type":"export",selectedItems:t.selectedItems,clearSelection:t.clearSelection,stageRef:t.stageRef}},`export-thumbnail-${e.id}`))})}),yCe=({data:t})=>{const{getTranslation:e}=ms(),n=s=>{const a=document.createElement("a"),o=s??t.selectedItems.find(l=>l.attrs["data-item-type"]==="frame");if(o){const l=o.getStage();t.clearSelection();const c=l.toDataURL({x:o.getClientRect().x,y:o.getClientRect().y,width:o.attrs.width*l.scaleX(),height:o.attrs.height*l.scaleY(),pixelRatio:1/l.scaleX()});c&&(a.download="export.png",a.href=c,document.body.appendChild(a),a.click(),document.body.removeChild(a))}},r=()=>{t.stageRef.current.getChildren()[0].getChildren(a=>a.attrs.name==="label-group").map(a=>a.getChildren(o=>o.attrs.name==="label-target")[0]).forEach(a=>{n(a)})},i=s=>()=>{if(s==="export-all-frame"){r();return}n()};return z.jsxs(ir,{as:Lt,onClick:i(t.id),className:[Ct.absoluteCenter,Ct.wrapTrue].join(" "),children:[z.jsx("i",{className:`bi-${t.icon}`,style:{fontSize:20,width:25}}),z.jsx(ir.Caption,{className:[Tf.font075em,Jt.width100,"text-center"].join(" "),children:`${e("widget","export",t.id,"name")}`})]})},vCe=[{type:"shape",id:"trianle",icon:"triangle-fill",sides:3,radius:100},{type:"shape",id:"square",icon:"square-fill",sides:4,radius:400},{type:"shape",id:"pentagon",icon:"pentagon-fill",sides:5,radius:100},{type:"shape",id:"hexagon",icon:"hexagon-fill",sides:6,radius:100},{type:"shape",id:"heptagon",icon:"heptagon-fill",sides:7,radius:100},{type:"shape",id:"octagon",icon:"octagon-fill",sides:8,radius:100}],xCe=()=>z.jsx(ui,{xs:2,children:vCe.map(({type:t,id:e,sides:n,radius:r,icon:i})=>z.jsx(bCe,{data:{id:e,sides:n,radius:r,icon:i,"data-item-type":t},maxPx:80},`shape-thumbnail-${e}`))}),bCe=({data:t,maxPx:e})=>z.jsx(ir,{as:Lt,className:[Ct.absoluteCenter,Ct.wrapTrue,Jt.width25].join(" "),children:z.jsx(_f,{dragType:"copyMove",dragSrc:{trigger:Zi.INSERT.SHAPE,...t},children:z.jsx("i",{className:[`bi-${t.icon}`].join(" "),style:{fontSize:20,width:25}})})}),r4=[{type:"icon",id:"123",name:"123",icon:"123.svg"},{type:"icon",id:"activity",name:"activity",icon:"activity.svg"},{type:"icon",id:"alarm-fill",name:"alarm fill",icon:"alarm-fill.svg"},{type:"icon",id:"alarm",name:"alarm",icon:"alarm.svg"},{type:"icon",id:"align-bottom",name:"align bottom",icon:"align-bottom.svg"},{type:"icon",id:"align-center",name:"align center",icon:"align-center.svg"},{type:"icon",id:"align-end",name:"align end",icon:"align-end.svg"},{type:"icon",id:"align-middle",name:"align middle",icon:"align-middle.svg"},{type:"icon",id:"align-start",name:"align start",icon:"align-start.svg"},{type:"icon",id:"align-top",name:"align top",icon:"align-top.svg"},{type:"icon",id:"alt",name:"alt",icon:"alt.svg"},{type:"icon",id:"app-indicator",name:"app indicator",icon:"app-indicator.svg"},{type:"icon",id:"app",name:"app",icon:"app.svg"},{type:"icon",id:"apple",name:"apple",icon:"apple.svg"},{type:"icon",id:"archive-fill",name:"archive fill",icon:"archive-fill.svg"},{type:"icon",id:"archive",name:"archive",icon:"archive.svg"},{type:"icon",id:"arrow-90deg-down",name:"arrow 90deg down",icon:"arrow-90deg-down.svg"},{type:"icon",id:"arrow-90deg-left",name:"arrow 90deg left",icon:"arrow-90deg-left.svg"},{type:"icon",id:"arrow-90deg-right",name:"arrow 90deg right",icon:"arrow-90deg-right.svg"},{type:"icon",id:"arrow-90deg-up",name:"arrow 90deg up",icon:"arrow-90deg-up.svg"},{type:"icon",id:"arrow-bar-down",name:"arrow bar down",icon:"arrow-bar-down.svg"},{type:"icon",id:"arrow-bar-left",name:"arrow bar left",icon:"arrow-bar-left.svg"},{type:"icon",id:"arrow-bar-right",name:"arrow bar right",icon:"arrow-bar-right.svg"},{type:"icon",id:"arrow-bar-up",name:"arrow bar up",icon:"arrow-bar-up.svg"},{type:"icon",id:"arrow-clockwise",name:"arrow clockwise",icon:"arrow-clockwise.svg"},{type:"icon",id:"arrow-counterclockwise",name:"arrow counterclockwise",icon:"arrow-counterclockwise.svg"},{type:"icon",id:"arrow-down-circle-fill",name:"arrow down circle fill",icon:"arrow-down-circle-fill.svg"},{type:"icon",id:"arrow-down-circle",name:"arrow down circle",icon:"arrow-down-circle.svg"},{type:"icon",id:"arrow-down-left-circle-fill",name:"arrow down left circle fill",icon:"arrow-down-left-circle-fill.svg"},{type:"icon",id:"arrow-down-left-circle",name:"arrow down left circle",icon:"arrow-down-left-circle.svg"},{type:"icon",id:"arrow-down-left-square-fill",name:"arrow down left square fill",icon:"arrow-down-left-square-fill.svg"},{type:"icon",id:"arrow-down-left-square",name:"arrow down left square",icon:"arrow-down-left-square.svg"},{type:"icon",id:"arrow-down-left",name:"arrow down left",icon:"arrow-down-left.svg"},{type:"icon",id:"arrow-down-right-circle-fill",name:"arrow down right circle fill",icon:"arrow-down-right-circle-fill.svg"},{type:"icon",id:"arrow-down-right-circle",name:"arrow down right circle",icon:"arrow-down-right-circle.svg"},{type:"icon",id:"arrow-down-right-square-fill",name:"arrow down right square fill",icon:"arrow-down-right-square-fill.svg"},{type:"icon",id:"arrow-down-right-square",name:"arrow down right square",icon:"arrow-down-right-square.svg"},{type:"icon",id:"arrow-down-right",name:"arrow down right",icon:"arrow-down-right.svg"},{type:"icon",id:"arrow-down-short",name:"arrow down short",icon:"arrow-down-short.svg"},{type:"icon",id:"arrow-down-square-fill",name:"arrow down square fill",icon:"arrow-down-square-fill.svg"},{type:"icon",id:"arrow-down-square",name:"arrow down square",icon:"arrow-down-square.svg"},{type:"icon",id:"arrow-down-up",name:"arrow down up",icon:"arrow-down-up.svg"},{type:"icon",id:"arrow-down",name:"arrow down",icon:"arrow-down.svg"},{type:"icon",id:"arrow-left-circle-fill",name:"arrow left circle fill",icon:"arrow-left-circle-fill.svg"},{type:"icon",id:"arrow-left-circle",name:"arrow left circle",icon:"arrow-left-circle.svg"},{type:"icon",id:"arrow-left-right",name:"arrow left right",icon:"arrow-left-right.svg"},{type:"icon",id:"arrow-left-short",name:"arrow left short",icon:"arrow-left-short.svg"},{type:"icon",id:"arrow-left-square-fill",name:"arrow left square fill",icon:"arrow-left-square-fill.svg"},{type:"icon",id:"arrow-left-square",name:"arrow left square",icon:"arrow-left-square.svg"},{type:"icon",id:"arrow-left",name:"arrow left",icon:"arrow-left.svg"},{type:"icon",id:"arrow-repeat",name:"arrow repeat",icon:"arrow-repeat.svg"},{type:"icon",id:"arrow-return-left",name:"arrow return left",icon:"arrow-return-left.svg"},{type:"icon",id:"arrow-return-right",name:"arrow return right",icon:"arrow-return-right.svg"},{type:"icon",id:"arrow-right-circle-fill",name:"arrow right circle fill",icon:"arrow-right-circle-fill.svg"},{type:"icon",id:"arrow-right-circle",name:"arrow right circle",icon:"arrow-right-circle.svg"},{type:"icon",id:"arrow-right-short",name:"arrow right short",icon:"arrow-right-short.svg"},{type:"icon",id:"arrow-right-square-fill",name:"arrow right square fill",icon:"arrow-right-square-fill.svg"},{type:"icon",id:"arrow-right-square",name:"arrow right square",icon:"arrow-right-square.svg"},{type:"icon",id:"arrow-right",name:"arrow right",icon:"arrow-right.svg"},{type:"icon",id:"arrow-through-heart-fill",name:"arrow through heart fill",icon:"arrow-through-heart-fill.svg"},{type:"icon",id:"arrow-through-heart",name:"arrow through heart",icon:"arrow-through-heart.svg"},{type:"icon",id:"arrow-up-circle-fill",name:"arrow up circle fill",icon:"arrow-up-circle-fill.svg"},{type:"icon",id:"arrow-up-circle",name:"arrow up circle",icon:"arrow-up-circle.svg"},{type:"icon",id:"arrow-up-left-circle-fill",name:"arrow up left circle fill",icon:"arrow-up-left-circle-fill.svg"},{type:"icon",id:"arrow-up-left-circle",name:"arrow up left circle",icon:"arrow-up-left-circle.svg"},{type:"icon",id:"arrow-up-left-square-fill",name:"arrow up left square fill",icon:"arrow-up-left-square-fill.svg"},{type:"icon",id:"arrow-up-left-square",name:"arrow up left square",icon:"arrow-up-left-square.svg"},{type:"icon",id:"arrow-up-left",name:"arrow up left",icon:"arrow-up-left.svg"},{type:"icon",id:"arrow-up-right-circle-fill",name:"arrow up right circle fill",icon:"arrow-up-right-circle-fill.svg"},{type:"icon",id:"arrow-up-right-circle",name:"arrow up right circle",icon:"arrow-up-right-circle.svg"},{type:"icon",id:"arrow-up-right-square-fill",name:"arrow up right square fill",icon:"arrow-up-right-square-fill.svg"},{type:"icon",id:"arrow-up-right-square",name:"arrow up right square",icon:"arrow-up-right-square.svg"},{type:"icon",id:"arrow-up-right",name:"arrow up right",icon:"arrow-up-right.svg"},{type:"icon",id:"arrow-up-short",name:"arrow up short",icon:"arrow-up-short.svg"},{type:"icon",id:"arrow-up-square-fill",name:"arrow up square fill",icon:"arrow-up-square-fill.svg"},{type:"icon",id:"arrow-up-square",name:"arrow up square",icon:"arrow-up-square.svg"},{type:"icon",id:"arrow-up",name:"arrow up",icon:"arrow-up.svg"},{type:"icon",id:"arrows-angle-contract",name:"arrows angle contract",icon:"arrows-angle-contract.svg"},{type:"icon",id:"arrows-angle-expand",name:"arrows angle expand",icon:"arrows-angle-expand.svg"},{type:"icon",id:"arrows-collapse",name:"arrows collapse",icon:"arrows-collapse.svg"},{type:"icon",id:"arrows-expand",name:"arrows expand",icon:"arrows-expand.svg"},{type:"icon",id:"arrows-fullscreen",name:"arrows fullscreen",icon:"arrows-fullscreen.svg"},{type:"icon",id:"arrows-move",name:"arrows move",icon:"arrows-move.svg"},{type:"icon",id:"aspect-ratio-fill",name:"aspect ratio fill",icon:"aspect-ratio-fill.svg"},{type:"icon",id:"aspect-ratio",name:"aspect ratio",icon:"aspect-ratio.svg"},{type:"icon",id:"asterisk",name:"asterisk",icon:"asterisk.svg"},{type:"icon",id:"at",name:"at",icon:"at.svg"},{type:"icon",id:"award-fill",name:"award fill",icon:"award-fill.svg"},{type:"icon",id:"award",name:"award",icon:"award.svg"},{type:"icon",id:"back",name:"back",icon:"back.svg"},{type:"icon",id:"backspace-fill",name:"backspace fill",icon:"backspace-fill.svg"},{type:"icon",id:"backspace-reverse-fill",name:"backspace reverse fill",icon:"backspace-reverse-fill.svg"},{type:"icon",id:"backspace-reverse",name:"backspace reverse",icon:"backspace-reverse.svg"},{type:"icon",id:"backspace",name:"backspace",icon:"backspace.svg"},{type:"icon",id:"badge-3d-fill",name:"badge 3d fill",icon:"badge-3d-fill.svg"},{type:"icon",id:"badge-3d",name:"badge 3d",icon:"badge-3d.svg"},{type:"icon",id:"badge-4k-fill",name:"badge 4k fill",icon:"badge-4k-fill.svg"},{type:"icon",id:"badge-4k",name:"badge 4k",icon:"badge-4k.svg"},{type:"icon",id:"badge-8k-fill",name:"badge 8k fill",icon:"badge-8k-fill.svg"},{type:"icon",id:"badge-8k",name:"badge 8k",icon:"badge-8k.svg"},{type:"icon",id:"badge-ad-fill",name:"badge ad fill",icon:"badge-ad-fill.svg"},{type:"icon",id:"badge-ad",name:"badge ad",icon:"badge-ad.svg"},{type:"icon",id:"badge-ar-fill",name:"badge ar fill",icon:"badge-ar-fill.svg"},{type:"icon",id:"badge-ar",name:"badge ar",icon:"badge-ar.svg"},{type:"icon",id:"badge-cc-fill",name:"badge cc fill",icon:"badge-cc-fill.svg"},{type:"icon",id:"badge-cc",name:"badge cc",icon:"badge-cc.svg"},{type:"icon",id:"badge-hd-fill",name:"badge hd fill",icon:"badge-hd-fill.svg"},{type:"icon",id:"badge-hd",name:"badge hd",icon:"badge-hd.svg"},{type:"icon",id:"badge-sd-fill",name:"badge sd fill",icon:"badge-sd-fill.svg"},{type:"icon",id:"badge-sd",name:"badge sd",icon:"badge-sd.svg"},{type:"icon",id:"badge-tm-fill",name:"badge tm fill",icon:"badge-tm-fill.svg"},{type:"icon",id:"badge-tm",name:"badge tm",icon:"badge-tm.svg"},{type:"icon",id:"badge-vo-fill",name:"badge vo fill",icon:"badge-vo-fill.svg"},{type:"icon",id:"badge-vo",name:"badge vo",icon:"badge-vo.svg"},{type:"icon",id:"badge-vr-fill",name:"badge vr fill",icon:"badge-vr-fill.svg"},{type:"icon",id:"badge-vr",name:"badge vr",icon:"badge-vr.svg"},{type:"icon",id:"badge-wc-fill",name:"badge wc fill",icon:"badge-wc-fill.svg"},{type:"icon",id:"badge-wc",name:"badge wc",icon:"badge-wc.svg"},{type:"icon",id:"bag-check-fill",name:"bag check fill",icon:"bag-check-fill.svg"},{type:"icon",id:"bag-check",name:"bag check",icon:"bag-check.svg"},{type:"icon",id:"bag-dash-fill",name:"bag dash fill",icon:"bag-dash-fill.svg"},{type:"icon",id:"bag-dash",name:"bag dash",icon:"bag-dash.svg"},{type:"icon",id:"bag-fill",name:"bag fill",icon:"bag-fill.svg"},{type:"icon",id:"bag-heart-fill",name:"bag heart fill",icon:"bag-heart-fill.svg"},{type:"icon",id:"bag-heart",name:"bag heart",icon:"bag-heart.svg"},{type:"icon",id:"bag-plus-fill",name:"bag plus fill",icon:"bag-plus-fill.svg"},{type:"icon",id:"bag-plus",name:"bag plus",icon:"bag-plus.svg"},{type:"icon",id:"bag-x-fill",name:"bag x fill",icon:"bag-x-fill.svg"},{type:"icon",id:"bag-x",name:"bag x",icon:"bag-x.svg"},{type:"icon",id:"bag",name:"bag",icon:"bag.svg"},{type:"icon",id:"balloon-fill",name:"balloon fill",icon:"balloon-fill.svg"},{type:"icon",id:"balloon-heart-fill",name:"balloon heart fill",icon:"balloon-heart-fill.svg"},{type:"icon",id:"balloon-heart",name:"balloon heart",icon:"balloon-heart.svg"},{type:"icon",id:"balloon",name:"balloon",icon:"balloon.svg"},{type:"icon",id:"bandaid-fill",name:"bandaid fill",icon:"bandaid-fill.svg"},{type:"icon",id:"bandaid",name:"bandaid",icon:"bandaid.svg"},{type:"icon",id:"bank",name:"bank",icon:"bank.svg"},{type:"icon",id:"bank2",name:"bank2",icon:"bank2.svg"},{type:"icon",id:"bar-chart-fill",name:"bar chart fill",icon:"bar-chart-fill.svg"},{type:"icon",id:"bar-chart-line-fill",name:"bar chart line fill",icon:"bar-chart-line-fill.svg"},{type:"icon",id:"bar-chart-line",name:"bar chart line",icon:"bar-chart-line.svg"},{type:"icon",id:"bar-chart-steps",name:"bar chart steps",icon:"bar-chart-steps.svg"},{type:"icon",id:"bar-chart",name:"bar chart",icon:"bar-chart.svg"},{type:"icon",id:"basket-fill",name:"basket fill",icon:"basket-fill.svg"},{type:"icon",id:"basket",name:"basket",icon:"basket.svg"},{type:"icon",id:"basket2-fill",name:"basket2 fill",icon:"basket2-fill.svg"},{type:"icon",id:"basket2",name:"basket2",icon:"basket2.svg"},{type:"icon",id:"basket3-fill",name:"basket3 fill",icon:"basket3-fill.svg"},{type:"icon",id:"basket3",name:"basket3",icon:"basket3.svg"},{type:"icon",id:"battery-charging",name:"battery charging",icon:"battery-charging.svg"},{type:"icon",id:"battery-full",name:"battery full",icon:"battery-full.svg"},{type:"icon",id:"battery-half",name:"battery half",icon:"battery-half.svg"},{type:"icon",id:"battery",name:"battery",icon:"battery.svg"},{type:"icon",id:"behance",name:"behance",icon:"behance.svg"},{type:"icon",id:"bell-fill",name:"bell fill",icon:"bell-fill.svg"},{type:"icon",id:"bell-slash-fill",name:"bell slash fill",icon:"bell-slash-fill.svg"},{type:"icon",id:"bell-slash",name:"bell slash",icon:"bell-slash.svg"},{type:"icon",id:"bell",name:"bell",icon:"bell.svg"},{type:"icon",id:"bezier",name:"bezier",icon:"bezier.svg"},{type:"icon",id:"bezier2",name:"bezier2",icon:"bezier2.svg"},{type:"icon",id:"bicycle",name:"bicycle",icon:"bicycle.svg"},{type:"icon",id:"binoculars-fill",name:"binoculars fill",icon:"binoculars-fill.svg"},{type:"icon",id:"binoculars",name:"binoculars",icon:"binoculars.svg"},{type:"icon",id:"blockquote-left",name:"blockquote left",icon:"blockquote-left.svg"},{type:"icon",id:"blockquote-right",name:"blockquote right",icon:"blockquote-right.svg"},{type:"icon",id:"bluetooth",name:"bluetooth",icon:"bluetooth.svg"},{type:"icon",id:"body-text",name:"body text",icon:"body-text.svg"},{type:"icon",id:"book-fill",name:"book fill",icon:"book-fill.svg"},{type:"icon",id:"book-half",name:"book half",icon:"book-half.svg"},{type:"icon",id:"book",name:"book",icon:"book.svg"},{type:"icon",id:"bookmark-check-fill",name:"bookmark check fill",icon:"bookmark-check-fill.svg"},{type:"icon",id:"bookmark-check",name:"bookmark check",icon:"bookmark-check.svg"},{type:"icon",id:"bookmark-dash-fill",name:"bookmark dash fill",icon:"bookmark-dash-fill.svg"},{type:"icon",id:"bookmark-dash",name:"bookmark dash",icon:"bookmark-dash.svg"},{type:"icon",id:"bookmark-fill",name:"bookmark fill",icon:"bookmark-fill.svg"},{type:"icon",id:"bookmark-heart-fill",name:"bookmark heart fill",icon:"bookmark-heart-fill.svg"},{type:"icon",id:"bookmark-heart",name:"bookmark heart",icon:"bookmark-heart.svg"},{type:"icon",id:"bookmark-plus-fill",name:"bookmark plus fill",icon:"bookmark-plus-fill.svg"},{type:"icon",id:"bookmark-plus",name:"bookmark plus",icon:"bookmark-plus.svg"},{type:"icon",id:"bookmark-star-fill",name:"bookmark star fill",icon:"bookmark-star-fill.svg"},{type:"icon",id:"bookmark-star",name:"bookmark star",icon:"bookmark-star.svg"},{type:"icon",id:"bookmark-x-fill",name:"bookmark x fill",icon:"bookmark-x-fill.svg"},{type:"icon",id:"bookmark-x",name:"bookmark x",icon:"bookmark-x.svg"},{type:"icon",id:"bookmark",name:"bookmark",icon:"bookmark.svg"},{type:"icon",id:"bookmarks-fill",name:"bookmarks fill",icon:"bookmarks-fill.svg"},{type:"icon",id:"bookmarks",name:"bookmarks",icon:"bookmarks.svg"},{type:"icon",id:"bookshelf",name:"bookshelf",icon:"bookshelf.svg"},{type:"icon",id:"boombox-fill",name:"boombox fill",icon:"boombox-fill.svg"},{type:"icon",id:"boombox",name:"boombox",icon:"boombox.svg"},{type:"icon",id:"bootstrap-fill",name:"bootstrap fill",icon:"bootstrap-fill.svg"},{type:"icon",id:"bootstrap-icons",name:"bootstrap icons",icon:"bootstrap-icons.svg"},{type:"icon",id:"bootstrap-reboot",name:"bootstrap reboot",icon:"bootstrap-reboot.svg"},{type:"icon",id:"bootstrap",name:"bootstrap",icon:"bootstrap.svg"},{type:"icon",id:"border-all",name:"border all",icon:"border-all.svg"},{type:"icon",id:"border-bottom",name:"border bottom",icon:"border-bottom.svg"},{type:"icon",id:"border-center",name:"border center",icon:"border-center.svg"},{type:"icon",id:"border-inner",name:"border inner",icon:"border-inner.svg"},{type:"icon",id:"border-left",name:"border left",icon:"border-left.svg"},{type:"icon",id:"border-middle",name:"border middle",icon:"border-middle.svg"},{type:"icon",id:"border-outer",name:"border outer",icon:"border-outer.svg"},{type:"icon",id:"border-right",name:"border right",icon:"border-right.svg"},{type:"icon",id:"border-style",name:"border style",icon:"border-style.svg"},{type:"icon",id:"border-top",name:"border top",icon:"border-top.svg"},{type:"icon",id:"border-width",name:"border width",icon:"border-width.svg"},{type:"icon",id:"border",name:"border",icon:"border.svg"},{type:"icon",id:"bounding-box-circles",name:"bounding box circles",icon:"bounding-box-circles.svg"},{type:"icon",id:"bounding-box",name:"bounding box",icon:"bounding-box.svg"},{type:"icon",id:"box-arrow-down-left",name:"box arrow down left",icon:"box-arrow-down-left.svg"},{type:"icon",id:"box-arrow-down-right",name:"box arrow down right",icon:"box-arrow-down-right.svg"},{type:"icon",id:"box-arrow-down",name:"box arrow down",icon:"box-arrow-down.svg"},{type:"icon",id:"box-arrow-in-down-left",name:"box arrow in down left",icon:"box-arrow-in-down-left.svg"},{type:"icon",id:"box-arrow-in-down-right",name:"box arrow in down right",icon:"box-arrow-in-down-right.svg"},{type:"icon",id:"box-arrow-in-down",name:"box arrow in down",icon:"box-arrow-in-down.svg"},{type:"icon",id:"box-arrow-in-left",name:"box arrow in left",icon:"box-arrow-in-left.svg"},{type:"icon",id:"box-arrow-in-right",name:"box arrow in right",icon:"box-arrow-in-right.svg"},{type:"icon",id:"box-arrow-in-up-left",name:"box arrow in up left",icon:"box-arrow-in-up-left.svg"},{type:"icon",id:"box-arrow-in-up-right",name:"box arrow in up right",icon:"box-arrow-in-up-right.svg"},{type:"icon",id:"box-arrow-in-up",name:"box arrow in up",icon:"box-arrow-in-up.svg"},{type:"icon",id:"box-arrow-left",name:"box arrow left",icon:"box-arrow-left.svg"},{type:"icon",id:"box-arrow-right",name:"box arrow right",icon:"box-arrow-right.svg"},{type:"icon",id:"box-arrow-up-left",name:"box arrow up left",icon:"box-arrow-up-left.svg"},{type:"icon",id:"box-arrow-up-right",name:"box arrow up right",icon:"box-arrow-up-right.svg"},{type:"icon",id:"box-arrow-up",name:"box arrow up",icon:"box-arrow-up.svg"},{type:"icon",id:"box-seam",name:"box seam",icon:"box-seam.svg"},{type:"icon",id:"box",name:"box",icon:"box.svg"},{type:"icon",id:"box2-fill",name:"box2 fill",icon:"box2-fill.svg"},{type:"icon",id:"box2-heart-fill",name:"box2 heart fill",icon:"box2-heart-fill.svg"},{type:"icon",id:"box2-heart",name:"box2 heart",icon:"box2-heart.svg"},{type:"icon",id:"box2",name:"box2",icon:"box2.svg"},{type:"icon",id:"boxes",name:"boxes",icon:"boxes.svg"},{type:"icon",id:"braces-asterisk",name:"braces asterisk",icon:"braces-asterisk.svg"},{type:"icon",id:"braces",name:"braces",icon:"braces.svg"},{type:"icon",id:"bricks",name:"bricks",icon:"bricks.svg"},{type:"icon",id:"briefcase-fill",name:"briefcase fill",icon:"briefcase-fill.svg"},{type:"icon",id:"briefcase",name:"briefcase",icon:"briefcase.svg"},{type:"icon",id:"brightness-alt-high-fill",name:"brightness alt high fill",icon:"brightness-alt-high-fill.svg"},{type:"icon",id:"brightness-alt-high",name:"brightness alt high",icon:"brightness-alt-high.svg"},{type:"icon",id:"brightness-alt-low-fill",name:"brightness alt low fill",icon:"brightness-alt-low-fill.svg"},{type:"icon",id:"brightness-alt-low",name:"brightness alt low",icon:"brightness-alt-low.svg"},{type:"icon",id:"brightness-high-fill",name:"brightness high fill",icon:"brightness-high-fill.svg"},{type:"icon",id:"brightness-high",name:"brightness high",icon:"brightness-high.svg"},{type:"icon",id:"brightness-low-fill",name:"brightness low fill",icon:"brightness-low-fill.svg"},{type:"icon",id:"brightness-low",name:"brightness low",icon:"brightness-low.svg"},{type:"icon",id:"broadcast-pin",name:"broadcast pin",icon:"broadcast-pin.svg"},{type:"icon",id:"broadcast",name:"broadcast",icon:"broadcast.svg"},{type:"icon",id:"brush-fill",name:"brush fill",icon:"brush-fill.svg"},{type:"icon",id:"brush",name:"brush",icon:"brush.svg"},{type:"icon",id:"bucket-fill",name:"bucket fill",icon:"bucket-fill.svg"},{type:"icon",id:"bucket",name:"bucket",icon:"bucket.svg"},{type:"icon",id:"bug-fill",name:"bug fill",icon:"bug-fill.svg"},{type:"icon",id:"bug",name:"bug",icon:"bug.svg"},{type:"icon",id:"building",name:"building",icon:"building.svg"},{type:"icon",id:"bullseye",name:"bullseye",icon:"bullseye.svg"},{type:"icon",id:"calculator-fill",name:"calculator fill",icon:"calculator-fill.svg"},{type:"icon",id:"calculator",name:"calculator",icon:"calculator.svg"},{type:"icon",id:"calendar-check-fill",name:"calendar check fill",icon:"calendar-check-fill.svg"},{type:"icon",id:"calendar-check",name:"calendar check",icon:"calendar-check.svg"},{type:"icon",id:"calendar-date-fill",name:"calendar date fill",icon:"calendar-date-fill.svg"},{type:"icon",id:"calendar-date",name:"calendar date",icon:"calendar-date.svg"},{type:"icon",id:"calendar-day-fill",name:"calendar day fill",icon:"calendar-day-fill.svg"},{type:"icon",id:"calendar-day",name:"calendar day",icon:"calendar-day.svg"},{type:"icon",id:"calendar-event-fill",name:"calendar event fill",icon:"calendar-event-fill.svg"},{type:"icon",id:"calendar-event",name:"calendar event",icon:"calendar-event.svg"},{type:"icon",id:"calendar-fill",name:"calendar fill",icon:"calendar-fill.svg"},{type:"icon",id:"calendar-heart-fill",name:"calendar heart fill",icon:"calendar-heart-fill.svg"},{type:"icon",id:"calendar-heart",name:"calendar heart",icon:"calendar-heart.svg"},{type:"icon",id:"calendar-minus-fill",name:"calendar minus fill",icon:"calendar-minus-fill.svg"},{type:"icon",id:"calendar-minus",name:"calendar minus",icon:"calendar-minus.svg"},{type:"icon",id:"calendar-month-fill",name:"calendar month fill",icon:"calendar-month-fill.svg"},{type:"icon",id:"calendar-month",name:"calendar month",icon:"calendar-month.svg"},{type:"icon",id:"calendar-plus-fill",name:"calendar plus fill",icon:"calendar-plus-fill.svg"},{type:"icon",id:"calendar-plus",name:"calendar plus",icon:"calendar-plus.svg"},{type:"icon",id:"calendar-range-fill",name:"calendar range fill",icon:"calendar-range-fill.svg"},{type:"icon",id:"calendar-range",name:"calendar range",icon:"calendar-range.svg"},{type:"icon",id:"calendar-week-fill",name:"calendar week fill",icon:"calendar-week-fill.svg"},{type:"icon",id:"calendar-week",name:"calendar week",icon:"calendar-week.svg"},{type:"icon",id:"calendar-x-fill",name:"calendar x fill",icon:"calendar-x-fill.svg"},{type:"icon",id:"calendar-x",name:"calendar x",icon:"calendar-x.svg"},{type:"icon",id:"calendar",name:"calendar",icon:"calendar.svg"},{type:"icon",id:"calendar2-check-fill",name:"calendar2 check fill",icon:"calendar2-check-fill.svg"},{type:"icon",id:"calendar2-check",name:"calendar2 check",icon:"calendar2-check.svg"},{type:"icon",id:"calendar2-date-fill",name:"calendar2 date fill",icon:"calendar2-date-fill.svg"},{type:"icon",id:"calendar2-date",name:"calendar2 date",icon:"calendar2-date.svg"},{type:"icon",id:"calendar2-day-fill",name:"calendar2 day fill",icon:"calendar2-day-fill.svg"},{type:"icon",id:"calendar2-day",name:"calendar2 day",icon:"calendar2-day.svg"},{type:"icon",id:"calendar2-event-fill",name:"calendar2 event fill",icon:"calendar2-event-fill.svg"},{type:"icon",id:"calendar2-event",name:"calendar2 event",icon:"calendar2-event.svg"},{type:"icon",id:"calendar2-fill",name:"calendar2 fill",icon:"calendar2-fill.svg"},{type:"icon",id:"calendar2-heart-fill",name:"calendar2 heart fill",icon:"calendar2-heart-fill.svg"},{type:"icon",id:"calendar2-heart",name:"calendar2 heart",icon:"calendar2-heart.svg"},{type:"icon",id:"calendar2-minus-fill",name:"calendar2 minus fill",icon:"calendar2-minus-fill.svg"},{type:"icon",id:"calendar2-minus",name:"calendar2 minus",icon:"calendar2-minus.svg"},{type:"icon",id:"calendar2-month-fill",name:"calendar2 month fill",icon:"calendar2-month-fill.svg"},{type:"icon",id:"calendar2-month",name:"calendar2 month",icon:"calendar2-month.svg"},{type:"icon",id:"calendar2-plus-fill",name:"calendar2 plus fill",icon:"calendar2-plus-fill.svg"},{type:"icon",id:"calendar2-plus",name:"calendar2 plus",icon:"calendar2-plus.svg"},{type:"icon",id:"calendar2-range-fill",name:"calendar2 range fill",icon:"calendar2-range-fill.svg"},{type:"icon",id:"calendar2-range",name:"calendar2 range",icon:"calendar2-range.svg"},{type:"icon",id:"calendar2-week-fill",name:"calendar2 week fill",icon:"calendar2-week-fill.svg"},{type:"icon",id:"calendar2-week",name:"calendar2 week",icon:"calendar2-week.svg"},{type:"icon",id:"calendar2-x-fill",name:"calendar2 x fill",icon:"calendar2-x-fill.svg"},{type:"icon",id:"calendar2-x",name:"calendar2 x",icon:"calendar2-x.svg"},{type:"icon",id:"calendar2",name:"calendar2",icon:"calendar2.svg"},{type:"icon",id:"calendar3-event-fill",name:"calendar3 event fill",icon:"calendar3-event-fill.svg"},{type:"icon",id:"calendar3-event",name:"calendar3 event",icon:"calendar3-event.svg"},{type:"icon",id:"calendar3-fill",name:"calendar3 fill",icon:"calendar3-fill.svg"},{type:"icon",id:"calendar3-range-fill",name:"calendar3 range fill",icon:"calendar3-range-fill.svg"},{type:"icon",id:"calendar3-range",name:"calendar3 range",icon:"calendar3-range.svg"},{type:"icon",id:"calendar3-week-fill",name:"calendar3 week fill",icon:"calendar3-week-fill.svg"},{type:"icon",id:"calendar3-week",name:"calendar3 week",icon:"calendar3-week.svg"},{type:"icon",id:"calendar3",name:"calendar3",icon:"calendar3.svg"},{type:"icon",id:"calendar4-event",name:"calendar4 event",icon:"calendar4-event.svg"},{type:"icon",id:"calendar4-range",name:"calendar4 range",icon:"calendar4-range.svg"},{type:"icon",id:"calendar4-week",name:"calendar4 week",icon:"calendar4-week.svg"},{type:"icon",id:"calendar4",name:"calendar4",icon:"calendar4.svg"},{type:"icon",id:"camera-fill",name:"camera fill",icon:"camera-fill.svg"},{type:"icon",id:"camera-reels-fill",name:"camera reels fill",icon:"camera-reels-fill.svg"},{type:"icon",id:"camera-reels",name:"camera reels",icon:"camera-reels.svg"},{type:"icon",id:"camera-video-fill",name:"camera video fill",icon:"camera-video-fill.svg"},{type:"icon",id:"camera-video-off-fill",name:"camera video off fill",icon:"camera-video-off-fill.svg"},{type:"icon",id:"camera-video-off",name:"camera video off",icon:"camera-video-off.svg"},{type:"icon",id:"camera-video",name:"camera video",icon:"camera-video.svg"},{type:"icon",id:"camera",name:"camera",icon:"camera.svg"},{type:"icon",id:"camera2",name:"camera2",icon:"camera2.svg"},{type:"icon",id:"capslock-fill",name:"capslock fill",icon:"capslock-fill.svg"},{type:"icon",id:"capslock",name:"capslock",icon:"capslock.svg"},{type:"icon",id:"card-checklist",name:"card checklist",icon:"card-checklist.svg"},{type:"icon",id:"card-heading",name:"card heading",icon:"card-heading.svg"},{type:"icon",id:"card-image",name:"card image",icon:"card-image.svg"},{type:"icon",id:"card-list",name:"card list",icon:"card-list.svg"},{type:"icon",id:"card-text",name:"card text",icon:"card-text.svg"},{type:"icon",id:"caret-down-fill",name:"caret down fill",icon:"caret-down-fill.svg"},{type:"icon",id:"caret-down-square-fill",name:"caret down square fill",icon:"caret-down-square-fill.svg"},{type:"icon",id:"caret-down-square",name:"caret down square",icon:"caret-down-square.svg"},{type:"icon",id:"caret-down",name:"caret down",icon:"caret-down.svg"},{type:"icon",id:"caret-left-fill",name:"caret left fill",icon:"caret-left-fill.svg"},{type:"icon",id:"caret-left-square-fill",name:"caret left square fill",icon:"caret-left-square-fill.svg"},{type:"icon",id:"caret-left-square",name:"caret left square",icon:"caret-left-square.svg"},{type:"icon",id:"caret-left",name:"caret left",icon:"caret-left.svg"},{type:"icon",id:"caret-right-fill",name:"caret right fill",icon:"caret-right-fill.svg"},{type:"icon",id:"caret-right-square-fill",name:"caret right square fill",icon:"caret-right-square-fill.svg"},{type:"icon",id:"caret-right-square",name:"caret right square",icon:"caret-right-square.svg"},{type:"icon",id:"caret-right",name:"caret right",icon:"caret-right.svg"},{type:"icon",id:"caret-up-fill",name:"caret up fill",icon:"caret-up-fill.svg"},{type:"icon",id:"caret-up-square-fill",name:"caret up square fill",icon:"caret-up-square-fill.svg"},{type:"icon",id:"caret-up-square",name:"caret up square",icon:"caret-up-square.svg"},{type:"icon",id:"caret-up",name:"caret up",icon:"caret-up.svg"},{type:"icon",id:"cart-check-fill",name:"cart check fill",icon:"cart-check-fill.svg"},{type:"icon",id:"cart-check",name:"cart check",icon:"cart-check.svg"},{type:"icon",id:"cart-dash-fill",name:"cart dash fill",icon:"cart-dash-fill.svg"},{type:"icon",id:"cart-dash",name:"cart dash",icon:"cart-dash.svg"},{type:"icon",id:"cart-fill",name:"cart fill",icon:"cart-fill.svg"},{type:"icon",id:"cart-plus-fill",name:"cart plus fill",icon:"cart-plus-fill.svg"},{type:"icon",id:"cart-plus",name:"cart plus",icon:"cart-plus.svg"},{type:"icon",id:"cart-x-fill",name:"cart x fill",icon:"cart-x-fill.svg"},{type:"icon",id:"cart-x",name:"cart x",icon:"cart-x.svg"},{type:"icon",id:"cart",name:"cart",icon:"cart.svg"},{type:"icon",id:"cart2",name:"cart2",icon:"cart2.svg"},{type:"icon",id:"cart3",name:"cart3",icon:"cart3.svg"},{type:"icon",id:"cart4",name:"cart4",icon:"cart4.svg"},{type:"icon",id:"cash-coin",name:"cash coin",icon:"cash-coin.svg"},{type:"icon",id:"cash-stack",name:"cash stack",icon:"cash-stack.svg"},{type:"icon",id:"cash",name:"cash",icon:"cash.svg"},{type:"icon",id:"cast",name:"cast",icon:"cast.svg"},{type:"icon",id:"chat-dots-fill",name:"chat dots fill",icon:"chat-dots-fill.svg"},{type:"icon",id:"chat-dots",name:"chat dots",icon:"chat-dots.svg"},{type:"icon",id:"chat-fill",name:"chat fill",icon:"chat-fill.svg"},{type:"icon",id:"chat-heart-fill",name:"chat heart fill",icon:"chat-heart-fill.svg"},{type:"icon",id:"chat-heart",name:"chat heart",icon:"chat-heart.svg"},{type:"icon",id:"chat-left-dots-fill",name:"chat left dots fill",icon:"chat-left-dots-fill.svg"},{type:"icon",id:"chat-left-dots",name:"chat left dots",icon:"chat-left-dots.svg"},{type:"icon",id:"chat-left-fill",name:"chat left fill",icon:"chat-left-fill.svg"},{type:"icon",id:"chat-left-heart-fill",name:"chat left heart fill",icon:"chat-left-heart-fill.svg"},{type:"icon",id:"chat-left-heart",name:"chat left heart",icon:"chat-left-heart.svg"},{type:"icon",id:"chat-left-quote-fill",name:"chat left quote fill",icon:"chat-left-quote-fill.svg"},{type:"icon",id:"chat-left-quote",name:"chat left quote",icon:"chat-left-quote.svg"},{type:"icon",id:"chat-left-text-fill",name:"chat left text fill",icon:"chat-left-text-fill.svg"},{type:"icon",id:"chat-left-text",name:"chat left text",icon:"chat-left-text.svg"},{type:"icon",id:"chat-left",name:"chat left",icon:"chat-left.svg"},{type:"icon",id:"chat-quote-fill",name:"chat quote fill",icon:"chat-quote-fill.svg"},{type:"icon",id:"chat-quote",name:"chat quote",icon:"chat-quote.svg"},{type:"icon",id:"chat-right-dots-fill",name:"chat right dots fill",icon:"chat-right-dots-fill.svg"},{type:"icon",id:"chat-right-dots",name:"chat right dots",icon:"chat-right-dots.svg"},{type:"icon",id:"chat-right-fill",name:"chat right fill",icon:"chat-right-fill.svg"},{type:"icon",id:"chat-right-heart-fill",name:"chat right heart fill",icon:"chat-right-heart-fill.svg"},{type:"icon",id:"chat-right-heart",name:"chat right heart",icon:"chat-right-heart.svg"},{type:"icon",id:"chat-right-quote-fill",name:"chat right quote fill",icon:"chat-right-quote-fill.svg"},{type:"icon",id:"chat-right-quote",name:"chat right quote",icon:"chat-right-quote.svg"},{type:"icon",id:"chat-right-text-fill",name:"chat right text fill",icon:"chat-right-text-fill.svg"},{type:"icon",id:"chat-right-text",name:"chat right text",icon:"chat-right-text.svg"},{type:"icon",id:"chat-right",name:"chat right",icon:"chat-right.svg"},{type:"icon",id:"chat-square-dots-fill",name:"chat square dots fill",icon:"chat-square-dots-fill.svg"},{type:"icon",id:"chat-square-dots",name:"chat square dots",icon:"chat-square-dots.svg"},{type:"icon",id:"chat-square-fill",name:"chat square fill",icon:"chat-square-fill.svg"},{type:"icon",id:"chat-square-heart-fill",name:"chat square heart fill",icon:"chat-square-heart-fill.svg"},{type:"icon",id:"chat-square-heart",name:"chat square heart",icon:"chat-square-heart.svg"},{type:"icon",id:"chat-square-quote-fill",name:"chat square quote fill",icon:"chat-square-quote-fill.svg"},{type:"icon",id:"chat-square-quote",name:"chat square quote",icon:"chat-square-quote.svg"},{type:"icon",id:"chat-square-text-fill",name:"chat square text fill",icon:"chat-square-text-fill.svg"},{type:"icon",id:"chat-square-text",name:"chat square text",icon:"chat-square-text.svg"},{type:"icon",id:"chat-square",name:"chat square",icon:"chat-square.svg"},{type:"icon",id:"chat-text-fill",name:"chat text fill",icon:"chat-text-fill.svg"},{type:"icon",id:"chat-text",name:"chat text",icon:"chat-text.svg"},{type:"icon",id:"chat",name:"chat",icon:"chat.svg"},{type:"icon",id:"check-all",name:"check all",icon:"check-all.svg"},{type:"icon",id:"check-circle-fill",name:"check circle fill",icon:"check-circle-fill.svg"},{type:"icon",id:"check-circle",name:"check circle",icon:"check-circle.svg"},{type:"icon",id:"check-lg",name:"check lg",icon:"check-lg.svg"},{type:"icon",id:"check-square-fill",name:"check square fill",icon:"check-square-fill.svg"},{type:"icon",id:"check-square",name:"check square",icon:"check-square.svg"},{type:"icon",id:"check",name:"check",icon:"check.svg"},{type:"icon",id:"check2-all",name:"check2 all",icon:"check2-all.svg"},{type:"icon",id:"check2-circle",name:"check2 circle",icon:"check2-circle.svg"},{type:"icon",id:"check2-square",name:"check2 square",icon:"check2-square.svg"},{type:"icon",id:"check2",name:"check2",icon:"check2.svg"},{type:"icon",id:"chevron-bar-contract",name:"chevron bar contract",icon:"chevron-bar-contract.svg"},{type:"icon",id:"chevron-bar-down",name:"chevron bar down",icon:"chevron-bar-down.svg"},{type:"icon",id:"chevron-bar-expand",name:"chevron bar expand",icon:"chevron-bar-expand.svg"},{type:"icon",id:"chevron-bar-left",name:"chevron bar left",icon:"chevron-bar-left.svg"},{type:"icon",id:"chevron-bar-right",name:"chevron bar right",icon:"chevron-bar-right.svg"},{type:"icon",id:"chevron-bar-up",name:"chevron bar up",icon:"chevron-bar-up.svg"},{type:"icon",id:"chevron-compact-down",name:"chevron compact down",icon:"chevron-compact-down.svg"},{type:"icon",id:"chevron-compact-left",name:"chevron compact left",icon:"chevron-compact-left.svg"},{type:"icon",id:"chevron-compact-right",name:"chevron compact right",icon:"chevron-compact-right.svg"},{type:"icon",id:"chevron-compact-up",name:"chevron compact up",icon:"chevron-compact-up.svg"},{type:"icon",id:"chevron-contract",name:"chevron contract",icon:"chevron-contract.svg"},{type:"icon",id:"chevron-double-down",name:"chevron double down",icon:"chevron-double-down.svg"},{type:"icon",id:"chevron-double-left",name:"chevron double left",icon:"chevron-double-left.svg"},{type:"icon",id:"chevron-double-right",name:"chevron double right",icon:"chevron-double-right.svg"},{type:"icon",id:"chevron-double-up",name:"chevron double up",icon:"chevron-double-up.svg"},{type:"icon",id:"chevron-down",name:"chevron down",icon:"chevron-down.svg"},{type:"icon",id:"chevron-expand",name:"chevron expand",icon:"chevron-expand.svg"},{type:"icon",id:"chevron-left",name:"chevron left",icon:"chevron-left.svg"},{type:"icon",id:"chevron-right",name:"chevron right",icon:"chevron-right.svg"},{type:"icon",id:"chevron-up",name:"chevron up",icon:"chevron-up.svg"},{type:"icon",id:"circle-fill",name:"circle fill",icon:"circle-fill.svg"},{type:"icon",id:"circle-half",name:"circle half",icon:"circle-half.svg"},{type:"icon",id:"circle-square",name:"circle square",icon:"circle-square.svg"},{type:"icon",id:"circle",name:"circle",icon:"circle.svg"},{type:"icon",id:"clipboard-check-fill",name:"clipboard check fill",icon:"clipboard-check-fill.svg"},{type:"icon",id:"clipboard-check",name:"clipboard check",icon:"clipboard-check.svg"},{type:"icon",id:"clipboard-data-fill",name:"clipboard data fill",icon:"clipboard-data-fill.svg"},{type:"icon",id:"clipboard-data",name:"clipboard data",icon:"clipboard-data.svg"},{type:"icon",id:"clipboard-fill",name:"clipboard fill",icon:"clipboard-fill.svg"},{type:"icon",id:"clipboard-heart-fill",name:"clipboard heart fill",icon:"clipboard-heart-fill.svg"},{type:"icon",id:"clipboard-heart",name:"clipboard heart",icon:"clipboard-heart.svg"},{type:"icon",id:"clipboard-minus-fill",name:"clipboard minus fill",icon:"clipboard-minus-fill.svg"},{type:"icon",id:"clipboard-minus",name:"clipboard minus",icon:"clipboard-minus.svg"},{type:"icon",id:"clipboard-plus-fill",name:"clipboard plus fill",icon:"clipboard-plus-fill.svg"},{type:"icon",id:"clipboard-plus",name:"clipboard plus",icon:"clipboard-plus.svg"},{type:"icon",id:"clipboard-pulse",name:"clipboard pulse",icon:"clipboard-pulse.svg"},{type:"icon",id:"clipboard-x-fill",name:"clipboard x fill",icon:"clipboard-x-fill.svg"},{type:"icon",id:"clipboard-x",name:"clipboard x",icon:"clipboard-x.svg"},{type:"icon",id:"clipboard",name:"clipboard",icon:"clipboard.svg"},{type:"icon",id:"clipboard2-check-fill",name:"clipboard2 check fill",icon:"clipboard2-check-fill.svg"},{type:"icon",id:"clipboard2-check",name:"clipboard2 check",icon:"clipboard2-check.svg"},{type:"icon",id:"clipboard2-data-fill",name:"clipboard2 data fill",icon:"clipboard2-data-fill.svg"},{type:"icon",id:"clipboard2-data",name:"clipboard2 data",icon:"clipboard2-data.svg"},{type:"icon",id:"clipboard2-fill",name:"clipboard2 fill",icon:"clipboard2-fill.svg"},{type:"icon",id:"clipboard2-heart-fill",name:"clipboard2 heart fill",icon:"clipboard2-heart-fill.svg"},{type:"icon",id:"clipboard2-heart",name:"clipboard2 heart",icon:"clipboard2-heart.svg"},{type:"icon",id:"clipboard2-minus-fill",name:"clipboard2 minus fill",icon:"clipboard2-minus-fill.svg"},{type:"icon",id:"clipboard2-minus",name:"clipboard2 minus",icon:"clipboard2-minus.svg"},{type:"icon",id:"clipboard2-plus-fill",name:"clipboard2 plus fill",icon:"clipboard2-plus-fill.svg"},{type:"icon",id:"clipboard2-plus",name:"clipboard2 plus",icon:"clipboard2-plus.svg"},{type:"icon",id:"clipboard2-pulse-fill",name:"clipboard2 pulse fill",icon:"clipboard2-pulse-fill.svg"},{type:"icon",id:"clipboard2-pulse",name:"clipboard2 pulse",icon:"clipboard2-pulse.svg"},{type:"icon",id:"clipboard2-x-fill",name:"clipboard2 x fill",icon:"clipboard2-x-fill.svg"},{type:"icon",id:"clipboard2-x",name:"clipboard2 x",icon:"clipboard2-x.svg"},{type:"icon",id:"clipboard2",name:"clipboard2",icon:"clipboard2.svg"},{type:"icon",id:"clock-fill",name:"clock fill",icon:"clock-fill.svg"},{type:"icon",id:"clock-history",name:"clock history",icon:"clock-history.svg"},{type:"icon",id:"clock",name:"clock",icon:"clock.svg"},{type:"icon",id:"cloud-arrow-down-fill",name:"cloud arrow down fill",icon:"cloud-arrow-down-fill.svg"},{type:"icon",id:"cloud-arrow-down",name:"cloud arrow down",icon:"cloud-arrow-down.svg"},{type:"icon",id:"cloud-arrow-up-fill",name:"cloud arrow up fill",icon:"cloud-arrow-up-fill.svg"},{type:"icon",id:"cloud-arrow-up",name:"cloud arrow up",icon:"cloud-arrow-up.svg"},{type:"icon",id:"cloud-check-fill",name:"cloud check fill",icon:"cloud-check-fill.svg"},{type:"icon",id:"cloud-check",name:"cloud check",icon:"cloud-check.svg"},{type:"icon",id:"cloud-download-fill",name:"cloud download fill",icon:"cloud-download-fill.svg"},{type:"icon",id:"cloud-download",name:"cloud download",icon:"cloud-download.svg"},{type:"icon",id:"cloud-drizzle-fill",name:"cloud drizzle fill",icon:"cloud-drizzle-fill.svg"},{type:"icon",id:"cloud-drizzle",name:"cloud drizzle",icon:"cloud-drizzle.svg"},{type:"icon",id:"cloud-fill",name:"cloud fill",icon:"cloud-fill.svg"},{type:"icon",id:"cloud-fog-fill",name:"cloud fog fill",icon:"cloud-fog-fill.svg"},{type:"icon",id:"cloud-fog",name:"cloud fog",icon:"cloud-fog.svg"},{type:"icon",id:"cloud-fog2-fill",name:"cloud fog2 fill",icon:"cloud-fog2-fill.svg"},{type:"icon",id:"cloud-fog2",name:"cloud fog2",icon:"cloud-fog2.svg"},{type:"icon",id:"cloud-hail-fill",name:"cloud hail fill",icon:"cloud-hail-fill.svg"},{type:"icon",id:"cloud-hail",name:"cloud hail",icon:"cloud-hail.svg"},{type:"icon",id:"cloud-haze-fill",name:"cloud haze fill",icon:"cloud-haze-fill.svg"},{type:"icon",id:"cloud-haze",name:"cloud haze",icon:"cloud-haze.svg"},{type:"icon",id:"cloud-haze2-fill",name:"cloud haze2 fill",icon:"cloud-haze2-fill.svg"},{type:"icon",id:"cloud-haze2",name:"cloud haze2",icon:"cloud-haze2.svg"},{type:"icon",id:"cloud-lightning-fill",name:"cloud lightning fill",icon:"cloud-lightning-fill.svg"},{type:"icon",id:"cloud-lightning-rain-fill",name:"cloud lightning rain fill",icon:"cloud-lightning-rain-fill.svg"},{type:"icon",id:"cloud-lightning-rain",name:"cloud lightning rain",icon:"cloud-lightning-rain.svg"},{type:"icon",id:"cloud-lightning",name:"cloud lightning",icon:"cloud-lightning.svg"},{type:"icon",id:"cloud-minus-fill",name:"cloud minus fill",icon:"cloud-minus-fill.svg"},{type:"icon",id:"cloud-minus",name:"cloud minus",icon:"cloud-minus.svg"},{type:"icon",id:"cloud-moon-fill",name:"cloud moon fill",icon:"cloud-moon-fill.svg"},{type:"icon",id:"cloud-moon",name:"cloud moon",icon:"cloud-moon.svg"},{type:"icon",id:"cloud-plus-fill",name:"cloud plus fill",icon:"cloud-plus-fill.svg"},{type:"icon",id:"cloud-plus",name:"cloud plus",icon:"cloud-plus.svg"},{type:"icon",id:"cloud-rain-fill",name:"cloud rain fill",icon:"cloud-rain-fill.svg"},{type:"icon",id:"cloud-rain-heavy-fill",name:"cloud rain heavy fill",icon:"cloud-rain-heavy-fill.svg"},{type:"icon",id:"cloud-rain-heavy",name:"cloud rain heavy",icon:"cloud-rain-heavy.svg"},{type:"icon",id:"cloud-rain",name:"cloud rain",icon:"cloud-rain.svg"},{type:"icon",id:"cloud-slash-fill",name:"cloud slash fill",icon:"cloud-slash-fill.svg"},{type:"icon",id:"cloud-slash",name:"cloud slash",icon:"cloud-slash.svg"},{type:"icon",id:"cloud-sleet-fill",name:"cloud sleet fill",icon:"cloud-sleet-fill.svg"},{type:"icon",id:"cloud-sleet",name:"cloud sleet",icon:"cloud-sleet.svg"},{type:"icon",id:"cloud-snow-fill",name:"cloud snow fill",icon:"cloud-snow-fill.svg"},{type:"icon",id:"cloud-snow",name:"cloud snow",icon:"cloud-snow.svg"},{type:"icon",id:"cloud-sun-fill",name:"cloud sun fill",icon:"cloud-sun-fill.svg"},{type:"icon",id:"cloud-sun",name:"cloud sun",icon:"cloud-sun.svg"},{type:"icon",id:"cloud-upload-fill",name:"cloud upload fill",icon:"cloud-upload-fill.svg"},{type:"icon",id:"cloud-upload",name:"cloud upload",icon:"cloud-upload.svg"},{type:"icon",id:"cloud",name:"cloud",icon:"cloud.svg"},{type:"icon",id:"clouds-fill",name:"clouds fill",icon:"clouds-fill.svg"},{type:"icon",id:"clouds",name:"clouds",icon:"clouds.svg"},{type:"icon",id:"cloudy-fill",name:"cloudy fill",icon:"cloudy-fill.svg"},{type:"icon",id:"cloudy",name:"cloudy",icon:"cloudy.svg"},{type:"icon",id:"code-slash",name:"code slash",icon:"code-slash.svg"},{type:"icon",id:"code-square",name:"code square",icon:"code-square.svg"},{type:"icon",id:"code",name:"code",icon:"code.svg"},{type:"icon",id:"coin",name:"coin",icon:"coin.svg"},{type:"icon",id:"collection-fill",name:"collection fill",icon:"collection-fill.svg"},{type:"icon",id:"collection-play-fill",name:"collection play fill",icon:"collection-play-fill.svg"},{type:"icon",id:"collection-play",name:"collection play",icon:"collection-play.svg"},{type:"icon",id:"collection",name:"collection",icon:"collection.svg"},{type:"icon",id:"columns-gap",name:"columns gap",icon:"columns-gap.svg"},{type:"icon",id:"columns",name:"columns",icon:"columns.svg"},{type:"icon",id:"command",name:"command",icon:"command.svg"},{type:"icon",id:"compass-fill",name:"compass fill",icon:"compass-fill.svg"},{type:"icon",id:"compass",name:"compass",icon:"compass.svg"},{type:"icon",id:"cone-striped",name:"cone striped",icon:"cone-striped.svg"},{type:"icon",id:"cone",name:"cone",icon:"cone.svg"},{type:"icon",id:"controller",name:"controller",icon:"controller.svg"},{type:"icon",id:"cpu-fill",name:"cpu fill",icon:"cpu-fill.svg"},{type:"icon",id:"cpu",name:"cpu",icon:"cpu.svg"},{type:"icon",id:"credit-card-2-back-fill",name:"credit card 2 back fill",icon:"credit-card-2-back-fill.svg"},{type:"icon",id:"credit-card-2-back",name:"credit card 2 back",icon:"credit-card-2-back.svg"},{type:"icon",id:"credit-card-2-front-fill",name:"credit card 2 front fill",icon:"credit-card-2-front-fill.svg"},{type:"icon",id:"credit-card-2-front",name:"credit card 2 front",icon:"credit-card-2-front.svg"},{type:"icon",id:"credit-card-fill",name:"credit card fill",icon:"credit-card-fill.svg"},{type:"icon",id:"credit-card",name:"credit card",icon:"credit-card.svg"},{type:"icon",id:"crop",name:"crop",icon:"crop.svg"},{type:"icon",id:"cup-fill",name:"cup fill",icon:"cup-fill.svg"},{type:"icon",id:"cup-straw",name:"cup straw",icon:"cup-straw.svg"},{type:"icon",id:"cup",name:"cup",icon:"cup.svg"},{type:"icon",id:"currency-bitcoin",name:"currency bitcoin",icon:"currency-bitcoin.svg"},{type:"icon",id:"currency-dollar",name:"currency dollar",icon:"currency-dollar.svg"},{type:"icon",id:"currency-euro",name:"currency euro",icon:"currency-euro.svg"},{type:"icon",id:"currency-exchange",name:"currency exchange",icon:"currency-exchange.svg"},{type:"icon",id:"currency-pound",name:"currency pound",icon:"currency-pound.svg"},{type:"icon",id:"currency-yen",name:"currency yen",icon:"currency-yen.svg"},{type:"icon",id:"cursor-fill",name:"cursor fill",icon:"cursor-fill.svg"},{type:"icon",id:"cursor-text",name:"cursor text",icon:"cursor-text.svg"},{type:"icon",id:"cursor",name:"cursor",icon:"cursor.svg"},{type:"icon",id:"dash-circle-dotted",name:"dash circle dotted",icon:"dash-circle-dotted.svg"},{type:"icon",id:"dash-circle-fill",name:"dash circle fill",icon:"dash-circle-fill.svg"},{type:"icon",id:"dash-circle",name:"dash circle",icon:"dash-circle.svg"},{type:"icon",id:"dash-lg",name:"dash lg",icon:"dash-lg.svg"},{type:"icon",id:"dash-square-dotted",name:"dash square dotted",icon:"dash-square-dotted.svg"},{type:"icon",id:"dash-square-fill",name:"dash square fill",icon:"dash-square-fill.svg"},{type:"icon",id:"dash-square",name:"dash square",icon:"dash-square.svg"},{type:"icon",id:"dash",name:"dash",icon:"dash.svg"},{type:"icon",id:"device-hdd-fill",name:"device hdd fill",icon:"device-hdd-fill.svg"},{type:"icon",id:"device-hdd",name:"device hdd",icon:"device-hdd.svg"},{type:"icon",id:"device-ssd-fill",name:"device ssd fill",icon:"device-ssd-fill.svg"},{type:"icon",id:"device-ssd",name:"device ssd",icon:"device-ssd.svg"},{type:"icon",id:"diagram-2-fill",name:"diagram 2 fill",icon:"diagram-2-fill.svg"},{type:"icon",id:"diagram-2",name:"diagram 2",icon:"diagram-2.svg"},{type:"icon",id:"diagram-3-fill",name:"diagram 3 fill",icon:"diagram-3-fill.svg"},{type:"icon",id:"diagram-3",name:"diagram 3",icon:"diagram-3.svg"},{type:"icon",id:"diamond-fill",name:"diamond fill",icon:"diamond-fill.svg"},{type:"icon",id:"diamond-half",name:"diamond half",icon:"diamond-half.svg"},{type:"icon",id:"diamond",name:"diamond",icon:"diamond.svg"},{type:"icon",id:"dice-1-fill",name:"dice 1 fill",icon:"dice-1-fill.svg"},{type:"icon",id:"dice-1",name:"dice 1",icon:"dice-1.svg"},{type:"icon",id:"dice-2-fill",name:"dice 2 fill",icon:"dice-2-fill.svg"},{type:"icon",id:"dice-2",name:"dice 2",icon:"dice-2.svg"},{type:"icon",id:"dice-3-fill",name:"dice 3 fill",icon:"dice-3-fill.svg"},{type:"icon",id:"dice-3",name:"dice 3",icon:"dice-3.svg"},{type:"icon",id:"dice-4-fill",name:"dice 4 fill",icon:"dice-4-fill.svg"},{type:"icon",id:"dice-4",name:"dice 4",icon:"dice-4.svg"},{type:"icon",id:"dice-5-fill",name:"dice 5 fill",icon:"dice-5-fill.svg"},{type:"icon",id:"dice-5",name:"dice 5",icon:"dice-5.svg"},{type:"icon",id:"dice-6-fill",name:"dice 6 fill",icon:"dice-6-fill.svg"},{type:"icon",id:"dice-6",name:"dice 6",icon:"dice-6.svg"},{type:"icon",id:"disc-fill",name:"disc fill",icon:"disc-fill.svg"},{type:"icon",id:"disc",name:"disc",icon:"disc.svg"},{type:"icon",id:"discord",name:"discord",icon:"discord.svg"},{type:"icon",id:"display-fill",name:"display fill",icon:"display-fill.svg"},{type:"icon",id:"display",name:"display",icon:"display.svg"},{type:"icon",id:"displayport-fill",name:"displayport fill",icon:"displayport-fill.svg"},{type:"icon",id:"displayport",name:"displayport",icon:"displayport.svg"},{type:"icon",id:"distribute-horizontal",name:"distribute horizontal",icon:"distribute-horizontal.svg"},{type:"icon",id:"distribute-vertical",name:"distribute vertical",icon:"distribute-vertical.svg"},{type:"icon",id:"door-closed-fill",name:"door closed fill",icon:"door-closed-fill.svg"},{type:"icon",id:"door-closed",name:"door closed",icon:"door-closed.svg"},{type:"icon",id:"door-open-fill",name:"door open fill",icon:"door-open-fill.svg"},{type:"icon",id:"door-open",name:"door open",icon:"door-open.svg"},{type:"icon",id:"dot",name:"dot",icon:"dot.svg"},{type:"icon",id:"download",name:"download",icon:"download.svg"},{type:"icon",id:"dpad-fill",name:"dpad fill",icon:"dpad-fill.svg"},{type:"icon",id:"dpad",name:"dpad",icon:"dpad.svg"},{type:"icon",id:"dribbble",name:"dribbble",icon:"dribbble.svg"},{type:"icon",id:"droplet-fill",name:"droplet fill",icon:"droplet-fill.svg"},{type:"icon",id:"droplet-half",name:"droplet half",icon:"droplet-half.svg"},{type:"icon",id:"droplet",name:"droplet",icon:"droplet.svg"},{type:"icon",id:"ear-fill",name:"ear fill",icon:"ear-fill.svg"},{type:"icon",id:"ear",name:"ear",icon:"ear.svg"},{type:"icon",id:"earbuds",name:"earbuds",icon:"earbuds.svg"},{type:"icon",id:"easel-fill",name:"easel fill",icon:"easel-fill.svg"},{type:"icon",id:"easel",name:"easel",icon:"easel.svg"},{type:"icon",id:"easel2-fill",name:"easel2 fill",icon:"easel2-fill.svg"},{type:"icon",id:"easel2",name:"easel2",icon:"easel2.svg"},{type:"icon",id:"easel3-fill",name:"easel3 fill",icon:"easel3-fill.svg"},{type:"icon",id:"easel3",name:"easel3",icon:"easel3.svg"},{type:"icon",id:"egg-fill",name:"egg fill",icon:"egg-fill.svg"},{type:"icon",id:"egg-fried",name:"egg fried",icon:"egg-fried.svg"},{type:"icon",id:"egg",name:"egg",icon:"egg.svg"},{type:"icon",id:"eject-fill",name:"eject fill",icon:"eject-fill.svg"},{type:"icon",id:"eject",name:"eject",icon:"eject.svg"},{type:"icon",id:"emoji-angry-fill",name:"emoji angry fill",icon:"emoji-angry-fill.svg"},{type:"icon",id:"emoji-angry",name:"emoji angry",icon:"emoji-angry.svg"},{type:"icon",id:"emoji-dizzy-fill",name:"emoji dizzy fill",icon:"emoji-dizzy-fill.svg"},{type:"icon",id:"emoji-dizzy",name:"emoji dizzy",icon:"emoji-dizzy.svg"},{type:"icon",id:"emoji-expressionless-fill",name:"emoji expressionless fill",icon:"emoji-expressionless-fill.svg"},{type:"icon",id:"emoji-expressionless",name:"emoji expressionless",icon:"emoji-expressionless.svg"},{type:"icon",id:"emoji-frown-fill",name:"emoji frown fill",icon:"emoji-frown-fill.svg"},{type:"icon",id:"emoji-frown",name:"emoji frown",icon:"emoji-frown.svg"},{type:"icon",id:"emoji-heart-eyes-fill",name:"emoji heart eyes fill",icon:"emoji-heart-eyes-fill.svg"},{type:"icon",id:"emoji-heart-eyes",name:"emoji heart eyes",icon:"emoji-heart-eyes.svg"},{type:"icon",id:"emoji-kiss-fill",name:"emoji kiss fill",icon:"emoji-kiss-fill.svg"},{type:"icon",id:"emoji-kiss",name:"emoji kiss",icon:"emoji-kiss.svg"},{type:"icon",id:"emoji-laughing-fill",name:"emoji laughing fill",icon:"emoji-laughing-fill.svg"},{type:"icon",id:"emoji-laughing",name:"emoji laughing",icon:"emoji-laughing.svg"},{type:"icon",id:"emoji-neutral-fill",name:"emoji neutral fill",icon:"emoji-neutral-fill.svg"},{type:"icon",id:"emoji-neutral",name:"emoji neutral",icon:"emoji-neutral.svg"},{type:"icon",id:"emoji-smile-fill",name:"emoji smile fill",icon:"emoji-smile-fill.svg"},{type:"icon",id:"emoji-smile-upside-down-fill",name:"emoji smile upside down fill",icon:"emoji-smile-upside-down-fill.svg"},{type:"icon",id:"emoji-smile-upside-down",name:"emoji smile upside down",icon:"emoji-smile-upside-down.svg"},{type:"icon",id:"emoji-smile",name:"emoji smile",icon:"emoji-smile.svg"},{type:"icon",id:"emoji-sunglasses-fill",name:"emoji sunglasses fill",icon:"emoji-sunglasses-fill.svg"},{type:"icon",id:"emoji-sunglasses",name:"emoji sunglasses",icon:"emoji-sunglasses.svg"},{type:"icon",id:"emoji-wink-fill",name:"emoji wink fill",icon:"emoji-wink-fill.svg"},{type:"icon",id:"emoji-wink",name:"emoji wink",icon:"emoji-wink.svg"},{type:"icon",id:"envelope-check-fill",name:"envelope check fill",icon:"envelope-check-fill.svg"},{type:"icon",id:"envelope-check",name:"envelope check",icon:"envelope-check.svg"},{type:"icon",id:"envelope-dash-fill",name:"envelope dash fill",icon:"envelope-dash-fill.svg"},{type:"icon",id:"envelope-dash",name:"envelope dash",icon:"envelope-dash.svg"},{type:"icon",id:"envelope-exclamation-fill",name:"envelope exclamation fill",icon:"envelope-exclamation-fill.svg"},{type:"icon",id:"envelope-exclamation",name:"envelope exclamation",icon:"envelope-exclamation.svg"},{type:"icon",id:"envelope-fill",name:"envelope fill",icon:"envelope-fill.svg"},{type:"icon",id:"envelope-heart-fill",name:"envelope heart fill",icon:"envelope-heart-fill.svg"},{type:"icon",id:"envelope-heart",name:"envelope heart",icon:"envelope-heart.svg"},{type:"icon",id:"envelope-open-fill",name:"envelope open fill",icon:"envelope-open-fill.svg"},{type:"icon",id:"envelope-open-heart-fill",name:"envelope open heart fill",icon:"envelope-open-heart-fill.svg"},{type:"icon",id:"envelope-open-heart",name:"envelope open heart",icon:"envelope-open-heart.svg"},{type:"icon",id:"envelope-open",name:"envelope open",icon:"envelope-open.svg"},{type:"icon",id:"envelope-paper-fill",name:"envelope paper fill",icon:"envelope-paper-fill.svg"},{type:"icon",id:"envelope-paper-heart-fill",name:"envelope paper heart fill",icon:"envelope-paper-heart-fill.svg"},{type:"icon",id:"envelope-paper-heart",name:"envelope paper heart",icon:"envelope-paper-heart.svg"},{type:"icon",id:"envelope-paper",name:"envelope paper",icon:"envelope-paper.svg"},{type:"icon",id:"envelope-plus-fill",name:"envelope plus fill",icon:"envelope-plus-fill.svg"},{type:"icon",id:"envelope-plus",name:"envelope plus",icon:"envelope-plus.svg"},{type:"icon",id:"envelope-slash-fill",name:"envelope slash fill",icon:"envelope-slash-fill.svg"},{type:"icon",id:"envelope-slash",name:"envelope slash",icon:"envelope-slash.svg"},{type:"icon",id:"envelope-x-fill",name:"envelope x fill",icon:"envelope-x-fill.svg"},{type:"icon",id:"envelope-x",name:"envelope x",icon:"envelope-x.svg"},{type:"icon",id:"envelope",name:"envelope",icon:"envelope.svg"},{type:"icon",id:"eraser-fill",name:"eraser fill",icon:"eraser-fill.svg"},{type:"icon",id:"eraser",name:"eraser",icon:"eraser.svg"},{type:"icon",id:"ethernet",name:"ethernet",icon:"ethernet.svg"},{type:"icon",id:"exclamation-circle-fill",name:"exclamation circle fill",icon:"exclamation-circle-fill.svg"},{type:"icon",id:"exclamation-circle",name:"exclamation circle",icon:"exclamation-circle.svg"},{type:"icon",id:"exclamation-diamond-fill",name:"exclamation diamond fill",icon:"exclamation-diamond-fill.svg"},{type:"icon",id:"exclamation-diamond",name:"exclamation diamond",icon:"exclamation-diamond.svg"},{type:"icon",id:"exclamation-lg",name:"exclamation lg",icon:"exclamation-lg.svg"},{type:"icon",id:"exclamation-octagon-fill",name:"exclamation octagon fill",icon:"exclamation-octagon-fill.svg"},{type:"icon",id:"exclamation-octagon",name:"exclamation octagon",icon:"exclamation-octagon.svg"},{type:"icon",id:"exclamation-square-fill",name:"exclamation square fill",icon:"exclamation-square-fill.svg"},{type:"icon",id:"exclamation-square",name:"exclamation square",icon:"exclamation-square.svg"},{type:"icon",id:"exclamation-triangle-fill",name:"exclamation triangle fill",icon:"exclamation-triangle-fill.svg"},{type:"icon",id:"exclamation-triangle",name:"exclamation triangle",icon:"exclamation-triangle.svg"},{type:"icon",id:"exclamation",name:"exclamation",icon:"exclamation.svg"},{type:"icon",id:"exclude",name:"exclude",icon:"exclude.svg"},{type:"icon",id:"explicit-fill",name:"explicit fill",icon:"explicit-fill.svg"},{type:"icon",id:"explicit",name:"explicit",icon:"explicit.svg"},{type:"icon",id:"eye-fill",name:"eye fill",icon:"eye-fill.svg"},{type:"icon",id:"eye-slash-fill",name:"eye slash fill",icon:"eye-slash-fill.svg"},{type:"icon",id:"eye-slash",name:"eye slash",icon:"eye-slash.svg"},{type:"icon",id:"eye",name:"eye",icon:"eye.svg"},{type:"icon",id:"eyedropper",name:"eyedropper",icon:"eyedropper.svg"},{type:"icon",id:"eyeglasses",name:"eyeglasses",icon:"eyeglasses.svg"},{type:"icon",id:"facebook",name:"facebook",icon:"facebook.svg"},{type:"icon",id:"fan",name:"fan",icon:"fan.svg"},{type:"icon",id:"file-arrow-down-fill",name:"file arrow down fill",icon:"file-arrow-down-fill.svg"},{type:"icon",id:"file-arrow-down",name:"file arrow down",icon:"file-arrow-down.svg"},{type:"icon",id:"file-arrow-up-fill",name:"file arrow up fill",icon:"file-arrow-up-fill.svg"},{type:"icon",id:"file-arrow-up",name:"file arrow up",icon:"file-arrow-up.svg"},{type:"icon",id:"file-bar-graph-fill",name:"file bar graph fill",icon:"file-bar-graph-fill.svg"},{type:"icon",id:"file-bar-graph",name:"file bar graph",icon:"file-bar-graph.svg"},{type:"icon",id:"file-binary-fill",name:"file binary fill",icon:"file-binary-fill.svg"},{type:"icon",id:"file-binary",name:"file binary",icon:"file-binary.svg"},{type:"icon",id:"file-break-fill",name:"file break fill",icon:"file-break-fill.svg"},{type:"icon",id:"file-break",name:"file break",icon:"file-break.svg"},{type:"icon",id:"file-check-fill",name:"file check fill",icon:"file-check-fill.svg"},{type:"icon",id:"file-check",name:"file check",icon:"file-check.svg"},{type:"icon",id:"file-code-fill",name:"file code fill",icon:"file-code-fill.svg"},{type:"icon",id:"file-code",name:"file code",icon:"file-code.svg"},{type:"icon",id:"file-diff-fill",name:"file diff fill",icon:"file-diff-fill.svg"},{type:"icon",id:"file-diff",name:"file diff",icon:"file-diff.svg"},{type:"icon",id:"file-earmark-arrow-down-fill",name:"file earmark arrow down fill",icon:"file-earmark-arrow-down-fill.svg"},{type:"icon",id:"file-earmark-arrow-down",name:"file earmark arrow down",icon:"file-earmark-arrow-down.svg"},{type:"icon",id:"file-earmark-arrow-up-fill",name:"file earmark arrow up fill",icon:"file-earmark-arrow-up-fill.svg"},{type:"icon",id:"file-earmark-arrow-up",name:"file earmark arrow up",icon:"file-earmark-arrow-up.svg"},{type:"icon",id:"file-earmark-bar-graph-fill",name:"file earmark bar graph fill",icon:"file-earmark-bar-graph-fill.svg"},{type:"icon",id:"file-earmark-bar-graph",name:"file earmark bar graph",icon:"file-earmark-bar-graph.svg"},{type:"icon",id:"file-earmark-binary-fill",name:"file earmark binary fill",icon:"file-earmark-binary-fill.svg"},{type:"icon",id:"file-earmark-binary",name:"file earmark binary",icon:"file-earmark-binary.svg"},{type:"icon",id:"file-earmark-break-fill",name:"file earmark break fill",icon:"file-earmark-break-fill.svg"},{type:"icon",id:"file-earmark-break",name:"file earmark break",icon:"file-earmark-break.svg"},{type:"icon",id:"file-earmark-check-fill",name:"file earmark check fill",icon:"file-earmark-check-fill.svg"},{type:"icon",id:"file-earmark-check",name:"file earmark check",icon:"file-earmark-check.svg"},{type:"icon",id:"file-earmark-code-fill",name:"file earmark code fill",icon:"file-earmark-code-fill.svg"},{type:"icon",id:"file-earmark-code",name:"file earmark code",icon:"file-earmark-code.svg"},{type:"icon",id:"file-earmark-diff-fill",name:"file earmark diff fill",icon:"file-earmark-diff-fill.svg"},{type:"icon",id:"file-earmark-diff",name:"file earmark diff",icon:"file-earmark-diff.svg"},{type:"icon",id:"file-earmark-easel-fill",name:"file earmark easel fill",icon:"file-earmark-easel-fill.svg"},{type:"icon",id:"file-earmark-easel",name:"file earmark easel",icon:"file-earmark-easel.svg"},{type:"icon",id:"file-earmark-excel-fill",name:"file earmark excel fill",icon:"file-earmark-excel-fill.svg"},{type:"icon",id:"file-earmark-excel",name:"file earmark excel",icon:"file-earmark-excel.svg"},{type:"icon",id:"file-earmark-fill",name:"file earmark fill",icon:"file-earmark-fill.svg"},{type:"icon",id:"file-earmark-font-fill",name:"file earmark font fill",icon:"file-earmark-font-fill.svg"},{type:"icon",id:"file-earmark-font",name:"file earmark font",icon:"file-earmark-font.svg"},{type:"icon",id:"file-earmark-image-fill",name:"file earmark image fill",icon:"file-earmark-image-fill.svg"},{type:"icon",id:"file-earmark-image",name:"file earmark image",icon:"file-earmark-image.svg"},{type:"icon",id:"file-earmark-lock-fill",name:"file earmark lock fill",icon:"file-earmark-lock-fill.svg"},{type:"icon",id:"file-earmark-lock",name:"file earmark lock",icon:"file-earmark-lock.svg"},{type:"icon",id:"file-earmark-lock2-fill",name:"file earmark lock2 fill",icon:"file-earmark-lock2-fill.svg"},{type:"icon",id:"file-earmark-lock2",name:"file earmark lock2",icon:"file-earmark-lock2.svg"},{type:"icon",id:"file-earmark-medical-fill",name:"file earmark medical fill",icon:"file-earmark-medical-fill.svg"},{type:"icon",id:"file-earmark-medical",name:"file earmark medical",icon:"file-earmark-medical.svg"},{type:"icon",id:"file-earmark-minus-fill",name:"file earmark minus fill",icon:"file-earmark-minus-fill.svg"},{type:"icon",id:"file-earmark-minus",name:"file earmark minus",icon:"file-earmark-minus.svg"},{type:"icon",id:"file-earmark-music-fill",name:"file earmark music fill",icon:"file-earmark-music-fill.svg"},{type:"icon",id:"file-earmark-music",name:"file earmark music",icon:"file-earmark-music.svg"},{type:"icon",id:"file-earmark-pdf-fill",name:"file earmark pdf fill",icon:"file-earmark-pdf-fill.svg"},{type:"icon",id:"file-earmark-pdf",name:"file earmark pdf",icon:"file-earmark-pdf.svg"},{type:"icon",id:"file-earmark-person-fill",name:"file earmark person fill",icon:"file-earmark-person-fill.svg"},{type:"icon",id:"file-earmark-person",name:"file earmark person",icon:"file-earmark-person.svg"},{type:"icon",id:"file-earmark-play-fill",name:"file earmark play fill",icon:"file-earmark-play-fill.svg"},{type:"icon",id:"file-earmark-play",name:"file earmark play",icon:"file-earmark-play.svg"},{type:"icon",id:"file-earmark-plus-fill",name:"file earmark plus fill",icon:"file-earmark-plus-fill.svg"},{type:"icon",id:"file-earmark-plus",name:"file earmark plus",icon:"file-earmark-plus.svg"},{type:"icon",id:"file-earmark-post-fill",name:"file earmark post fill",icon:"file-earmark-post-fill.svg"},{type:"icon",id:"file-earmark-post",name:"file earmark post",icon:"file-earmark-post.svg"},{type:"icon",id:"file-earmark-ppt-fill",name:"file earmark ppt fill",icon:"file-earmark-ppt-fill.svg"},{type:"icon",id:"file-earmark-ppt",name:"file earmark ppt",icon:"file-earmark-ppt.svg"},{type:"icon",id:"file-earmark-richtext-fill",name:"file earmark richtext fill",icon:"file-earmark-richtext-fill.svg"},{type:"icon",id:"file-earmark-richtext",name:"file earmark richtext",icon:"file-earmark-richtext.svg"},{type:"icon",id:"file-earmark-ruled-fill",name:"file earmark ruled fill",icon:"file-earmark-ruled-fill.svg"},{type:"icon",id:"file-earmark-ruled",name:"file earmark ruled",icon:"file-earmark-ruled.svg"},{type:"icon",id:"file-earmark-slides-fill",name:"file earmark slides fill",icon:"file-earmark-slides-fill.svg"},{type:"icon",id:"file-earmark-slides",name:"file earmark slides",icon:"file-earmark-slides.svg"},{type:"icon",id:"file-earmark-spreadsheet-fill",name:"file earmark spreadsheet fill",icon:"file-earmark-spreadsheet-fill.svg"},{type:"icon",id:"file-earmark-spreadsheet",name:"file earmark spreadsheet",icon:"file-earmark-spreadsheet.svg"},{type:"icon",id:"file-earmark-text-fill",name:"file earmark text fill",icon:"file-earmark-text-fill.svg"},{type:"icon",id:"file-earmark-text",name:"file earmark text",icon:"file-earmark-text.svg"},{type:"icon",id:"file-earmark-word-fill",name:"file earmark word fill",icon:"file-earmark-word-fill.svg"},{type:"icon",id:"file-earmark-word",name:"file earmark word",icon:"file-earmark-word.svg"},{type:"icon",id:"file-earmark-x-fill",name:"file earmark x fill",icon:"file-earmark-x-fill.svg"},{type:"icon",id:"file-earmark-x",name:"file earmark x",icon:"file-earmark-x.svg"},{type:"icon",id:"file-earmark-zip-fill",name:"file earmark zip fill",icon:"file-earmark-zip-fill.svg"},{type:"icon",id:"file-earmark-zip",name:"file earmark zip",icon:"file-earmark-zip.svg"},{type:"icon",id:"file-earmark",name:"file earmark",icon:"file-earmark.svg"},{type:"icon",id:"file-easel-fill",name:"file easel fill",icon:"file-easel-fill.svg"},{type:"icon",id:"file-easel",name:"file easel",icon:"file-easel.svg"},{type:"icon",id:"file-excel-fill",name:"file excel fill",icon:"file-excel-fill.svg"},{type:"icon",id:"file-excel",name:"file excel",icon:"file-excel.svg"},{type:"icon",id:"file-fill",name:"file fill",icon:"file-fill.svg"},{type:"icon",id:"file-font-fill",name:"file font fill",icon:"file-font-fill.svg"},{type:"icon",id:"file-font",name:"file font",icon:"file-font.svg"},{type:"icon",id:"file-image-fill",name:"file image fill",icon:"file-image-fill.svg"},{type:"icon",id:"file-image",name:"file image",icon:"file-image.svg"},{type:"icon",id:"file-lock-fill",name:"file lock fill",icon:"file-lock-fill.svg"},{type:"icon",id:"file-lock",name:"file lock",icon:"file-lock.svg"},{type:"icon",id:"file-lock2-fill",name:"file lock2 fill",icon:"file-lock2-fill.svg"},{type:"icon",id:"file-lock2",name:"file lock2",icon:"file-lock2.svg"},{type:"icon",id:"file-medical-fill",name:"file medical fill",icon:"file-medical-fill.svg"},{type:"icon",id:"file-medical",name:"file medical",icon:"file-medical.svg"},{type:"icon",id:"file-minus-fill",name:"file minus fill",icon:"file-minus-fill.svg"},{type:"icon",id:"file-minus",name:"file minus",icon:"file-minus.svg"},{type:"icon",id:"file-music-fill",name:"file music fill",icon:"file-music-fill.svg"},{type:"icon",id:"file-music",name:"file music",icon:"file-music.svg"},{type:"icon",id:"file-pdf-fill",name:"file pdf fill",icon:"file-pdf-fill.svg"},{type:"icon",id:"file-pdf",name:"file pdf",icon:"file-pdf.svg"},{type:"icon",id:"file-person-fill",name:"file person fill",icon:"file-person-fill.svg"},{type:"icon",id:"file-person",name:"file person",icon:"file-person.svg"},{type:"icon",id:"file-play-fill",name:"file play fill",icon:"file-play-fill.svg"},{type:"icon",id:"file-play",name:"file play",icon:"file-play.svg"},{type:"icon",id:"file-plus-fill",name:"file plus fill",icon:"file-plus-fill.svg"},{type:"icon",id:"file-plus",name:"file plus",icon:"file-plus.svg"},{type:"icon",id:"file-post-fill",name:"file post fill",icon:"file-post-fill.svg"},{type:"icon",id:"file-post",name:"file post",icon:"file-post.svg"},{type:"icon",id:"file-ppt-fill",name:"file ppt fill",icon:"file-ppt-fill.svg"},{type:"icon",id:"file-ppt",name:"file ppt",icon:"file-ppt.svg"},{type:"icon",id:"file-richtext-fill",name:"file richtext fill",icon:"file-richtext-fill.svg"},{type:"icon",id:"file-richtext",name:"file richtext",icon:"file-richtext.svg"},{type:"icon",id:"file-ruled-fill",name:"file ruled fill",icon:"file-ruled-fill.svg"},{type:"icon",id:"file-ruled",name:"file ruled",icon:"file-ruled.svg"},{type:"icon",id:"file-slides-fill",name:"file slides fill",icon:"file-slides-fill.svg"},{type:"icon",id:"file-slides",name:"file slides",icon:"file-slides.svg"},{type:"icon",id:"file-spreadsheet-fill",name:"file spreadsheet fill",icon:"file-spreadsheet-fill.svg"},{type:"icon",id:"file-spreadsheet",name:"file spreadsheet",icon:"file-spreadsheet.svg"},{type:"icon",id:"file-text-fill",name:"file text fill",icon:"file-text-fill.svg"},{type:"icon",id:"file-text",name:"file text",icon:"file-text.svg"},{type:"icon",id:"file-word-fill",name:"file word fill",icon:"file-word-fill.svg"},{type:"icon",id:"file-word",name:"file word",icon:"file-word.svg"},{type:"icon",id:"file-x-fill",name:"file x fill",icon:"file-x-fill.svg"},{type:"icon",id:"file-x",name:"file x",icon:"file-x.svg"},{type:"icon",id:"file-zip-fill",name:"file zip fill",icon:"file-zip-fill.svg"},{type:"icon",id:"file-zip",name:"file zip",icon:"file-zip.svg"},{type:"icon",id:"file",name:"file",icon:"file.svg"},{type:"icon",id:"files-alt",name:"files alt",icon:"files-alt.svg"},{type:"icon",id:"files",name:"files",icon:"files.svg"},{type:"icon",id:"filetype-aac",name:"filetype aac",icon:"filetype-aac.svg"},{type:"icon",id:"filetype-ai",name:"filetype ai",icon:"filetype-ai.svg"},{type:"icon",id:"filetype-bmp",name:"filetype bmp",icon:"filetype-bmp.svg"},{type:"icon",id:"filetype-cs",name:"filetype cs",icon:"filetype-cs.svg"},{type:"icon",id:"filetype-css",name:"filetype css",icon:"filetype-css.svg"},{type:"icon",id:"filetype-csv",name:"filetype csv",icon:"filetype-csv.svg"},{type:"icon",id:"filetype-doc",name:"filetype doc",icon:"filetype-doc.svg"},{type:"icon",id:"filetype-docx",name:"filetype docx",icon:"filetype-docx.svg"},{type:"icon",id:"filetype-exe",name:"filetype exe",icon:"filetype-exe.svg"},{type:"icon",id:"filetype-gif",name:"filetype gif",icon:"filetype-gif.svg"},{type:"icon",id:"filetype-heic",name:"filetype heic",icon:"filetype-heic.svg"},{type:"icon",id:"filetype-html",name:"filetype html",icon:"filetype-html.svg"},{type:"icon",id:"filetype-java",name:"filetype java",icon:"filetype-java.svg"},{type:"icon",id:"filetype-jpg",name:"filetype jpg",icon:"filetype-jpg.svg"},{type:"icon",id:"filetype-js",name:"filetype js",icon:"filetype-js.svg"},{type:"icon",id:"filetype-json",name:"filetype json",icon:"filetype-json.svg"},{type:"icon",id:"filetype-jsx",name:"filetype jsx",icon:"filetype-jsx.svg"},{type:"icon",id:"filetype-key",name:"filetype key",icon:"filetype-key.svg"},{type:"icon",id:"filetype-m4p",name:"filetype m4p",icon:"filetype-m4p.svg"},{type:"icon",id:"filetype-md",name:"filetype md",icon:"filetype-md.svg"},{type:"icon",id:"filetype-mdx",name:"filetype mdx",icon:"filetype-mdx.svg"},{type:"icon",id:"filetype-mov",name:"filetype mov",icon:"filetype-mov.svg"},{type:"icon",id:"filetype-mp3",name:"filetype mp3",icon:"filetype-mp3.svg"},{type:"icon",id:"filetype-mp4",name:"filetype mp4",icon:"filetype-mp4.svg"},{type:"icon",id:"filetype-otf",name:"filetype otf",icon:"filetype-otf.svg"},{type:"icon",id:"filetype-pdf",name:"filetype pdf",icon:"filetype-pdf.svg"},{type:"icon",id:"filetype-php",name:"filetype php",icon:"filetype-php.svg"},{type:"icon",id:"filetype-png",name:"filetype png",icon:"filetype-png.svg"},{type:"icon",id:"filetype-ppt",name:"filetype ppt",icon:"filetype-ppt.svg"},{type:"icon",id:"filetype-pptx",name:"filetype pptx",icon:"filetype-pptx.svg"},{type:"icon",id:"filetype-psd",name:"filetype psd",icon:"filetype-psd.svg"},{type:"icon",id:"filetype-py",name:"filetype py",icon:"filetype-py.svg"},{type:"icon",id:"filetype-raw",name:"filetype raw",icon:"filetype-raw.svg"},{type:"icon",id:"filetype-rb",name:"filetype rb",icon:"filetype-rb.svg"},{type:"icon",id:"filetype-sass",name:"filetype sass",icon:"filetype-sass.svg"},{type:"icon",id:"filetype-scss",name:"filetype scss",icon:"filetype-scss.svg"},{type:"icon",id:"filetype-sh",name:"filetype sh",icon:"filetype-sh.svg"},{type:"icon",id:"filetype-svg",name:"filetype svg",icon:"filetype-svg.svg"},{type:"icon",id:"filetype-tiff",name:"filetype tiff",icon:"filetype-tiff.svg"},{type:"icon",id:"filetype-tsx",name:"filetype tsx",icon:"filetype-tsx.svg"},{type:"icon",id:"filetype-ttf",name:"filetype ttf",icon:"filetype-ttf.svg"},{type:"icon",id:"filetype-txt",name:"filetype txt",icon:"filetype-txt.svg"},{type:"icon",id:"filetype-wav",name:"filetype wav",icon:"filetype-wav.svg"},{type:"icon",id:"filetype-woff",name:"filetype woff",icon:"filetype-woff.svg"},{type:"icon",id:"filetype-xls",name:"filetype xls",icon:"filetype-xls.svg"},{type:"icon",id:"filetype-xlsx",name:"filetype xlsx",icon:"filetype-xlsx.svg"},{type:"icon",id:"filetype-xml",name:"filetype xml",icon:"filetype-xml.svg"},{type:"icon",id:"filetype-yml",name:"filetype yml",icon:"filetype-yml.svg"},{type:"icon",id:"film",name:"film",icon:"film.svg"},{type:"icon",id:"filter-circle-fill",name:"filter circle fill",icon:"filter-circle-fill.svg"},{type:"icon",id:"filter-circle",name:"filter circle",icon:"filter-circle.svg"},{type:"icon",id:"filter-left",name:"filter left",icon:"filter-left.svg"},{type:"icon",id:"filter-right",name:"filter right",icon:"filter-right.svg"},{type:"icon",id:"filter-square-fill",name:"filter square fill",icon:"filter-square-fill.svg"},{type:"icon",id:"filter-square",name:"filter square",icon:"filter-square.svg"},{type:"icon",id:"filter",name:"filter",icon:"filter.svg"},{type:"icon",id:"fingerprint",name:"fingerprint",icon:"fingerprint.svg"},{type:"icon",id:"flag-fill",name:"flag fill",icon:"flag-fill.svg"},{type:"icon",id:"flag",name:"flag",icon:"flag.svg"},{type:"icon",id:"flower1",name:"flower1",icon:"flower1.svg"},{type:"icon",id:"flower2",name:"flower2",icon:"flower2.svg"},{type:"icon",id:"flower3",name:"flower3",icon:"flower3.svg"},{type:"icon",id:"folder-check",name:"folder check",icon:"folder-check.svg"},{type:"icon",id:"folder-fill",name:"folder fill",icon:"folder-fill.svg"},{type:"icon",id:"folder-minus",name:"folder minus",icon:"folder-minus.svg"},{type:"icon",id:"folder-plus",name:"folder plus",icon:"folder-plus.svg"},{type:"icon",id:"folder-symlink-fill",name:"folder symlink fill",icon:"folder-symlink-fill.svg"},{type:"icon",id:"folder-symlink",name:"folder symlink",icon:"folder-symlink.svg"},{type:"icon",id:"folder-x",name:"folder x",icon:"folder-x.svg"},{type:"icon",id:"folder",name:"folder",icon:"folder.svg"},{type:"icon",id:"folder2-open",name:"folder2 open",icon:"folder2-open.svg"},{type:"icon",id:"folder2",name:"folder2",icon:"folder2.svg"},{type:"icon",id:"fonts",name:"fonts",icon:"fonts.svg"},{type:"icon",id:"forward-fill",name:"forward fill",icon:"forward-fill.svg"},{type:"icon",id:"forward",name:"forward",icon:"forward.svg"},{type:"icon",id:"front",name:"front",icon:"front.svg"},{type:"icon",id:"fullscreen-exit",name:"fullscreen exit",icon:"fullscreen-exit.svg"},{type:"icon",id:"fullscreen",name:"fullscreen",icon:"fullscreen.svg"},{type:"icon",id:"funnel-fill",name:"funnel fill",icon:"funnel-fill.svg"},{type:"icon",id:"funnel",name:"funnel",icon:"funnel.svg"},{type:"icon",id:"gear-fill",name:"gear fill",icon:"gear-fill.svg"},{type:"icon",id:"gear-wide-connected",name:"gear wide connected",icon:"gear-wide-connected.svg"},{type:"icon",id:"gear-wide",name:"gear wide",icon:"gear-wide.svg"},{type:"icon",id:"gear",name:"gear",icon:"gear.svg"},{type:"icon",id:"gem",name:"gem",icon:"gem.svg"},{type:"icon",id:"gender-ambiguous",name:"gender ambiguous",icon:"gender-ambiguous.svg"},{type:"icon",id:"gender-female",name:"gender female",icon:"gender-female.svg"},{type:"icon",id:"gender-male",name:"gender male",icon:"gender-male.svg"},{type:"icon",id:"gender-trans",name:"gender trans",icon:"gender-trans.svg"},{type:"icon",id:"geo-alt-fill",name:"geo alt fill",icon:"geo-alt-fill.svg"},{type:"icon",id:"geo-alt",name:"geo alt",icon:"geo-alt.svg"},{type:"icon",id:"geo-fill",name:"geo fill",icon:"geo-fill.svg"},{type:"icon",id:"geo",name:"geo",icon:"geo.svg"},{type:"icon",id:"gift-fill",name:"gift fill",icon:"gift-fill.svg"},{type:"icon",id:"gift",name:"gift",icon:"gift.svg"},{type:"icon",id:"git",name:"git",icon:"git.svg"},{type:"icon",id:"github",name:"github",icon:"github.svg"},{type:"icon",id:"globe",name:"globe",icon:"globe.svg"},{type:"icon",id:"globe2",name:"globe2",icon:"globe2.svg"},{type:"icon",id:"google",name:"google",icon:"google.svg"},{type:"icon",id:"gpu-card",name:"gpu card",icon:"gpu-card.svg"},{type:"icon",id:"graph-down-arrow",name:"graph down arrow",icon:"graph-down-arrow.svg"},{type:"icon",id:"graph-down",name:"graph down",icon:"graph-down.svg"},{type:"icon",id:"graph-up-arrow",name:"graph up arrow",icon:"graph-up-arrow.svg"},{type:"icon",id:"graph-up",name:"graph up",icon:"graph-up.svg"},{type:"icon",id:"grid-1x2-fill",name:"grid 1x2 fill",icon:"grid-1x2-fill.svg"},{type:"icon",id:"grid-1x2",name:"grid 1x2",icon:"grid-1x2.svg"},{type:"icon",id:"grid-3x2-gap-fill",name:"grid 3x2 gap fill",icon:"grid-3x2-gap-fill.svg"},{type:"icon",id:"grid-3x2-gap",name:"grid 3x2 gap",icon:"grid-3x2-gap.svg"},{type:"icon",id:"grid-3x2",name:"grid 3x2",icon:"grid-3x2.svg"},{type:"icon",id:"grid-3x3-gap-fill",name:"grid 3x3 gap fill",icon:"grid-3x3-gap-fill.svg"},{type:"icon",id:"grid-3x3-gap",name:"grid 3x3 gap",icon:"grid-3x3-gap.svg"},{type:"icon",id:"grid-3x3",name:"grid 3x3",icon:"grid-3x3.svg"},{type:"icon",id:"grid-fill",name:"grid fill",icon:"grid-fill.svg"},{type:"icon",id:"grid",name:"grid",icon:"grid.svg"},{type:"icon",id:"grip-horizontal",name:"grip horizontal",icon:"grip-horizontal.svg"},{type:"icon",id:"grip-vertical",name:"grip vertical",icon:"grip-vertical.svg"},{type:"icon",id:"hammer",name:"hammer",icon:"hammer.svg"},{type:"icon",id:"hand-index-fill",name:"hand index fill",icon:"hand-index-fill.svg"},{type:"icon",id:"hand-index-thumb-fill",name:"hand index thumb fill",icon:"hand-index-thumb-fill.svg"},{type:"icon",id:"hand-index-thumb",name:"hand index thumb",icon:"hand-index-thumb.svg"},{type:"icon",id:"hand-index",name:"hand index",icon:"hand-index.svg"},{type:"icon",id:"hand-thumbs-down-fill",name:"hand thumbs down fill",icon:"hand-thumbs-down-fill.svg"},{type:"icon",id:"hand-thumbs-down",name:"hand thumbs down",icon:"hand-thumbs-down.svg"},{type:"icon",id:"hand-thumbs-up-fill",name:"hand thumbs up fill",icon:"hand-thumbs-up-fill.svg"},{type:"icon",id:"hand-thumbs-up",name:"hand thumbs up",icon:"hand-thumbs-up.svg"},{type:"icon",id:"handbag-fill",name:"handbag fill",icon:"handbag-fill.svg"},{type:"icon",id:"handbag",name:"handbag",icon:"handbag.svg"},{type:"icon",id:"hash",name:"hash",icon:"hash.svg"},{type:"icon",id:"hdd-fill",name:"hdd fill",icon:"hdd-fill.svg"},{type:"icon",id:"hdd-network-fill",name:"hdd network fill",icon:"hdd-network-fill.svg"},{type:"icon",id:"hdd-network",name:"hdd network",icon:"hdd-network.svg"},{type:"icon",id:"hdd-rack-fill",name:"hdd rack fill",icon:"hdd-rack-fill.svg"},{type:"icon",id:"hdd-rack",name:"hdd rack",icon:"hdd-rack.svg"},{type:"icon",id:"hdd-stack-fill",name:"hdd stack fill",icon:"hdd-stack-fill.svg"},{type:"icon",id:"hdd-stack",name:"hdd stack",icon:"hdd-stack.svg"},{type:"icon",id:"hdd",name:"hdd",icon:"hdd.svg"},{type:"icon",id:"hdmi-fill",name:"hdmi fill",icon:"hdmi-fill.svg"},{type:"icon",id:"hdmi",name:"hdmi",icon:"hdmi.svg"},{type:"icon",id:"headphones",name:"headphones",icon:"headphones.svg"},{type:"icon",id:"headset-vr",name:"headset vr",icon:"headset-vr.svg"},{type:"icon",id:"headset",name:"headset",icon:"headset.svg"},{type:"icon",id:"heart-arrow",name:"heart arrow",icon:"heart-arrow.svg"},{type:"icon",id:"heart-fill",name:"heart fill",icon:"heart-fill.svg"},{type:"icon",id:"heart-half",name:"heart half",icon:"heart-half.svg"},{type:"icon",id:"heart-pulse-fill",name:"heart pulse fill",icon:"heart-pulse-fill.svg"},{type:"icon",id:"heart-pulse",name:"heart pulse",icon:"heart-pulse.svg"},{type:"icon",id:"heart",name:"heart",icon:"heart.svg"},{type:"icon",id:"heartbreak-fill",name:"heartbreak fill",icon:"heartbreak-fill.svg"},{type:"icon",id:"heartbreak",name:"heartbreak",icon:"heartbreak.svg"},{type:"icon",id:"hearts",name:"hearts",icon:"hearts.svg"},{type:"icon",id:"heptagon-fill",name:"heptagon fill",icon:"heptagon-fill.svg"},{type:"icon",id:"heptagon-half",name:"heptagon half",icon:"heptagon-half.svg"},{type:"icon",id:"heptagon",name:"heptagon",icon:"heptagon.svg"},{type:"icon",id:"hexagon-fill",name:"hexagon fill",icon:"hexagon-fill.svg"},{type:"icon",id:"hexagon-half",name:"hexagon half",icon:"hexagon-half.svg"},{type:"icon",id:"hexagon",name:"hexagon",icon:"hexagon.svg"},{type:"icon",id:"hospital-fill",name:"hospital fill",icon:"hospital-fill.svg"},{type:"icon",id:"hospital",name:"hospital",icon:"hospital.svg"},{type:"icon",id:"hourglass-bottom",name:"hourglass bottom",icon:"hourglass-bottom.svg"},{type:"icon",id:"hourglass-split",name:"hourglass split",icon:"hourglass-split.svg"},{type:"icon",id:"hourglass-top",name:"hourglass top",icon:"hourglass-top.svg"},{type:"icon",id:"hourglass",name:"hourglass",icon:"hourglass.svg"},{type:"icon",id:"house-door-fill",name:"house door fill",icon:"house-door-fill.svg"},{type:"icon",id:"house-door",name:"house door",icon:"house-door.svg"},{type:"icon",id:"house-fill",name:"house fill",icon:"house-fill.svg"},{type:"icon",id:"house-heart-fill",name:"house heart fill",icon:"house-heart-fill.svg"},{type:"icon",id:"house-heart",name:"house heart",icon:"house-heart.svg"},{type:"icon",id:"house",name:"house",icon:"house.svg"},{type:"icon",id:"hr",name:"hr",icon:"hr.svg"},{type:"icon",id:"hurricane",name:"hurricane",icon:"hurricane.svg"},{type:"icon",id:"hypnotize",name:"hypnotize",icon:"hypnotize.svg"},{type:"icon",id:"image-alt",name:"image alt",icon:"image-alt.svg"},{type:"icon",id:"image-fill",name:"image fill",icon:"image-fill.svg"},{type:"icon",id:"image",name:"image",icon:"image.svg"},{type:"icon",id:"images",name:"images",icon:"images.svg"},{type:"icon",id:"inbox-fill",name:"inbox fill",icon:"inbox-fill.svg"},{type:"icon",id:"inbox",name:"inbox",icon:"inbox.svg"},{type:"icon",id:"inboxes-fill",name:"inboxes fill",icon:"inboxes-fill.svg"},{type:"icon",id:"inboxes",name:"inboxes",icon:"inboxes.svg"},{type:"icon",id:"incognito",name:"incognito",icon:"incognito.svg"},{type:"icon",id:"infinity",name:"infinity",icon:"infinity.svg"},{type:"icon",id:"info-circle-fill",name:"info circle fill",icon:"info-circle-fill.svg"},{type:"icon",id:"info-circle",name:"info circle",icon:"info-circle.svg"},{type:"icon",id:"info-lg",name:"info lg",icon:"info-lg.svg"},{type:"icon",id:"info-square-fill",name:"info square fill",icon:"info-square-fill.svg"},{type:"icon",id:"info-square",name:"info square",icon:"info-square.svg"},{type:"icon",id:"info",name:"info",icon:"info.svg"},{type:"icon",id:"input-cursor-text",name:"input cursor text",icon:"input-cursor-text.svg"},{type:"icon",id:"input-cursor",name:"input cursor",icon:"input-cursor.svg"},{type:"icon",id:"instagram",name:"instagram",icon:"instagram.svg"},{type:"icon",id:"intersect",name:"intersect",icon:"intersect.svg"},{type:"icon",id:"journal-album",name:"journal album",icon:"journal-album.svg"},{type:"icon",id:"journal-arrow-down",name:"journal arrow down",icon:"journal-arrow-down.svg"},{type:"icon",id:"journal-arrow-up",name:"journal arrow up",icon:"journal-arrow-up.svg"},{type:"icon",id:"journal-bookmark-fill",name:"journal bookmark fill",icon:"journal-bookmark-fill.svg"},{type:"icon",id:"journal-bookmark",name:"journal bookmark",icon:"journal-bookmark.svg"},{type:"icon",id:"journal-check",name:"journal check",icon:"journal-check.svg"},{type:"icon",id:"journal-code",name:"journal code",icon:"journal-code.svg"},{type:"icon",id:"journal-medical",name:"journal medical",icon:"journal-medical.svg"},{type:"icon",id:"journal-minus",name:"journal minus",icon:"journal-minus.svg"},{type:"icon",id:"journal-plus",name:"journal plus",icon:"journal-plus.svg"},{type:"icon",id:"journal-richtext",name:"journal richtext",icon:"journal-richtext.svg"},{type:"icon",id:"journal-text",name:"journal text",icon:"journal-text.svg"},{type:"icon",id:"journal-x",name:"journal x",icon:"journal-x.svg"},{type:"icon",id:"journal",name:"journal",icon:"journal.svg"},{type:"icon",id:"journals",name:"journals",icon:"journals.svg"},{type:"icon",id:"joystick",name:"joystick",icon:"joystick.svg"},{type:"icon",id:"justify-left",name:"justify left",icon:"justify-left.svg"},{type:"icon",id:"justify-right",name:"justify right",icon:"justify-right.svg"},{type:"icon",id:"justify",name:"justify",icon:"justify.svg"},{type:"icon",id:"kanban-fill",name:"kanban fill",icon:"kanban-fill.svg"},{type:"icon",id:"kanban",name:"kanban",icon:"kanban.svg"},{type:"icon",id:"key-fill",name:"key fill",icon:"key-fill.svg"},{type:"icon",id:"key",name:"key",icon:"key.svg"},{type:"icon",id:"keyboard-fill",name:"keyboard fill",icon:"keyboard-fill.svg"},{type:"icon",id:"keyboard",name:"keyboard",icon:"keyboard.svg"},{type:"icon",id:"ladder",name:"ladder",icon:"ladder.svg"},{type:"icon",id:"lamp-fill",name:"lamp fill",icon:"lamp-fill.svg"},{type:"icon",id:"lamp",name:"lamp",icon:"lamp.svg"},{type:"icon",id:"laptop-fill",name:"laptop fill",icon:"laptop-fill.svg"},{type:"icon",id:"laptop",name:"laptop",icon:"laptop.svg"},{type:"icon",id:"layer-backward",name:"layer backward",icon:"layer-backward.svg"},{type:"icon",id:"layer-forward",name:"layer forward",icon:"layer-forward.svg"},{type:"icon",id:"layers-fill",name:"layers fill",icon:"layers-fill.svg"},{type:"icon",id:"layers-half",name:"layers half",icon:"layers-half.svg"},{type:"icon",id:"layers",name:"layers",icon:"layers.svg"},{type:"icon",id:"layout-sidebar-inset-reverse",name:"layout sidebar inset reverse",icon:"layout-sidebar-inset-reverse.svg"},{type:"icon",id:"layout-sidebar-inset",name:"layout sidebar inset",icon:"layout-sidebar-inset.svg"},{type:"icon",id:"layout-sidebar-reverse",name:"layout sidebar reverse",icon:"layout-sidebar-reverse.svg"},{type:"icon",id:"layout-sidebar",name:"layout sidebar",icon:"layout-sidebar.svg"},{type:"icon",id:"layout-split",name:"layout split",icon:"layout-split.svg"},{type:"icon",id:"layout-text-sidebar-reverse",name:"layout text sidebar reverse",icon:"layout-text-sidebar-reverse.svg"},{type:"icon",id:"layout-text-sidebar",name:"layout text sidebar",icon:"layout-text-sidebar.svg"},{type:"icon",id:"layout-text-window-reverse",name:"layout text window reverse",icon:"layout-text-window-reverse.svg"},{type:"icon",id:"layout-text-window",name:"layout text window",icon:"layout-text-window.svg"},{type:"icon",id:"layout-three-columns",name:"layout three columns",icon:"layout-three-columns.svg"},{type:"icon",id:"layout-wtf",name:"layout wtf",icon:"layout-wtf.svg"},{type:"icon",id:"life-preserver",name:"life preserver",icon:"life-preserver.svg"},{type:"icon",id:"lightbulb-fill",name:"lightbulb fill",icon:"lightbulb-fill.svg"},{type:"icon",id:"lightbulb-off-fill",name:"lightbulb off fill",icon:"lightbulb-off-fill.svg"},{type:"icon",id:"lightbulb-off",name:"lightbulb off",icon:"lightbulb-off.svg"},{type:"icon",id:"lightbulb",name:"lightbulb",icon:"lightbulb.svg"},{type:"icon",id:"lightning-charge-fill",name:"lightning charge fill",icon:"lightning-charge-fill.svg"},{type:"icon",id:"lightning-charge",name:"lightning charge",icon:"lightning-charge.svg"},{type:"icon",id:"lightning-fill",name:"lightning fill",icon:"lightning-fill.svg"},{type:"icon",id:"lightning",name:"lightning",icon:"lightning.svg"},{type:"icon",id:"line",name:"line",icon:"line.svg"},{type:"icon",id:"link-45deg",name:"link 45deg",icon:"link-45deg.svg"},{type:"icon",id:"link",name:"link",icon:"link.svg"},{type:"icon",id:"linkedin",name:"linkedin",icon:"linkedin.svg"},{type:"icon",id:"list-check",name:"list check",icon:"list-check.svg"},{type:"icon",id:"list-columns-reverse",name:"list columns reverse",icon:"list-columns-reverse.svg"},{type:"icon",id:"list-columns",name:"list columns",icon:"list-columns.svg"},{type:"icon",id:"list-nested",name:"list nested",icon:"list-nested.svg"},{type:"icon",id:"list-ol",name:"list ol",icon:"list-ol.svg"},{type:"icon",id:"list-stars",name:"list stars",icon:"list-stars.svg"},{type:"icon",id:"list-task",name:"list task",icon:"list-task.svg"},{type:"icon",id:"list-ul",name:"list ul",icon:"list-ul.svg"},{type:"icon",id:"list",name:"list",icon:"list.svg"},{type:"icon",id:"lock-fill",name:"lock fill",icon:"lock-fill.svg"},{type:"icon",id:"lock",name:"lock",icon:"lock.svg"},{type:"icon",id:"magic",name:"magic",icon:"magic.svg"},{type:"icon",id:"magnet-fill",name:"magnet fill",icon:"magnet-fill.svg"},{type:"icon",id:"magnet",name:"magnet",icon:"magnet.svg"},{type:"icon",id:"mailbox",name:"mailbox",icon:"mailbox.svg"},{type:"icon",id:"mailbox2",name:"mailbox2",icon:"mailbox2.svg"},{type:"icon",id:"map-fill",name:"map fill",icon:"map-fill.svg"},{type:"icon",id:"map",name:"map",icon:"map.svg"},{type:"icon",id:"markdown-fill",name:"markdown fill",icon:"markdown-fill.svg"},{type:"icon",id:"markdown",name:"markdown",icon:"markdown.svg"},{type:"icon",id:"mask",name:"mask",icon:"mask.svg"},{type:"icon",id:"mastodon",name:"mastodon",icon:"mastodon.svg"},{type:"icon",id:"medium",name:"medium",icon:"medium.svg"},{type:"icon",id:"megaphone-fill",name:"megaphone fill",icon:"megaphone-fill.svg"},{type:"icon",id:"megaphone",name:"megaphone",icon:"megaphone.svg"},{type:"icon",id:"memory",name:"memory",icon:"memory.svg"},{type:"icon",id:"menu-app-fill",name:"menu app fill",icon:"menu-app-fill.svg"},{type:"icon",id:"menu-app",name:"menu app",icon:"menu-app.svg"},{type:"icon",id:"menu-button-fill",name:"menu button fill",icon:"menu-button-fill.svg"},{type:"icon",id:"menu-button-wide-fill",name:"menu button wide fill",icon:"menu-button-wide-fill.svg"},{type:"icon",id:"menu-button-wide",name:"menu button wide",icon:"menu-button-wide.svg"},{type:"icon",id:"menu-button",name:"menu button",icon:"menu-button.svg"},{type:"icon",id:"menu-down",name:"menu down",icon:"menu-down.svg"},{type:"icon",id:"menu-up",name:"menu up",icon:"menu-up.svg"},{type:"icon",id:"messenger",name:"messenger",icon:"messenger.svg"},{type:"icon",id:"meta",name:"meta",icon:"meta.svg"},{type:"icon",id:"mic-fill",name:"mic fill",icon:"mic-fill.svg"},{type:"icon",id:"mic-mute-fill",name:"mic mute fill",icon:"mic-mute-fill.svg"},{type:"icon",id:"mic-mute",name:"mic mute",icon:"mic-mute.svg"},{type:"icon",id:"mic",name:"mic",icon:"mic.svg"},{type:"icon",id:"microsoft",name:"microsoft",icon:"microsoft.svg"},{type:"icon",id:"minecart-loaded",name:"minecart loaded",icon:"minecart-loaded.svg"},{type:"icon",id:"minecart",name:"minecart",icon:"minecart.svg"},{type:"icon",id:"modem-fill",name:"modem fill",icon:"modem-fill.svg"},{type:"icon",id:"modem",name:"modem",icon:"modem.svg"},{type:"icon",id:"moisture",name:"moisture",icon:"moisture.svg"},{type:"icon",id:"moon-fill",name:"moon fill",icon:"moon-fill.svg"},{type:"icon",id:"moon-stars-fill",name:"moon stars fill",icon:"moon-stars-fill.svg"},{type:"icon",id:"moon-stars",name:"moon stars",icon:"moon-stars.svg"},{type:"icon",id:"moon",name:"moon",icon:"moon.svg"},{type:"icon",id:"mortarboard-fill",name:"mortarboard fill",icon:"mortarboard-fill.svg"},{type:"icon",id:"mortarboard",name:"mortarboard",icon:"mortarboard.svg"},{type:"icon",id:"motherboard-fill",name:"motherboard fill",icon:"motherboard-fill.svg"},{type:"icon",id:"motherboard",name:"motherboard",icon:"motherboard.svg"},{type:"icon",id:"mouse-fill",name:"mouse fill",icon:"mouse-fill.svg"},{type:"icon",id:"mouse",name:"mouse",icon:"mouse.svg"},{type:"icon",id:"mouse2-fill",name:"mouse2 fill",icon:"mouse2-fill.svg"},{type:"icon",id:"mouse2",name:"mouse2",icon:"mouse2.svg"},{type:"icon",id:"mouse3-fill",name:"mouse3 fill",icon:"mouse3-fill.svg"},{type:"icon",id:"mouse3",name:"mouse3",icon:"mouse3.svg"},{type:"icon",id:"music-note-beamed",name:"music note beamed",icon:"music-note-beamed.svg"},{type:"icon",id:"music-note-list",name:"music note list",icon:"music-note-list.svg"},{type:"icon",id:"music-note",name:"music note",icon:"music-note.svg"},{type:"icon",id:"music-player-fill",name:"music player fill",icon:"music-player-fill.svg"},{type:"icon",id:"music-player",name:"music player",icon:"music-player.svg"},{type:"icon",id:"newspaper",name:"newspaper",icon:"newspaper.svg"},{type:"icon",id:"nintendo-switch",name:"nintendo switch",icon:"nintendo-switch.svg"},{type:"icon",id:"node-minus-fill",name:"node minus fill",icon:"node-minus-fill.svg"},{type:"icon",id:"node-minus",name:"node minus",icon:"node-minus.svg"},{type:"icon",id:"node-plus-fill",name:"node plus fill",icon:"node-plus-fill.svg"},{type:"icon",id:"node-plus",name:"node plus",icon:"node-plus.svg"},{type:"icon",id:"nut-fill",name:"nut fill",icon:"nut-fill.svg"},{type:"icon",id:"nut",name:"nut",icon:"nut.svg"},{type:"icon",id:"octagon-fill",name:"octagon fill",icon:"octagon-fill.svg"},{type:"icon",id:"octagon-half",name:"octagon half",icon:"octagon-half.svg"},{type:"icon",id:"octagon",name:"octagon",icon:"octagon.svg"},{type:"icon",id:"optical-audio-fill",name:"optical audio fill",icon:"optical-audio-fill.svg"},{type:"icon",id:"optical-audio",name:"optical audio",icon:"optical-audio.svg"},{type:"icon",id:"option",name:"option",icon:"option.svg"},{type:"icon",id:"outlet",name:"outlet",icon:"outlet.svg"},{type:"icon",id:"paint-bucket",name:"paint bucket",icon:"paint-bucket.svg"},{type:"icon",id:"palette-fill",name:"palette fill",icon:"palette-fill.svg"},{type:"icon",id:"palette",name:"palette",icon:"palette.svg"},{type:"icon",id:"palette2",name:"palette2",icon:"palette2.svg"},{type:"icon",id:"paperclip",name:"paperclip",icon:"paperclip.svg"},{type:"icon",id:"paragraph",name:"paragraph",icon:"paragraph.svg"},{type:"icon",id:"patch-check-fill",name:"patch check fill",icon:"patch-check-fill.svg"},{type:"icon",id:"patch-check",name:"patch check",icon:"patch-check.svg"},{type:"icon",id:"patch-exclamation-fill",name:"patch exclamation fill",icon:"patch-exclamation-fill.svg"},{type:"icon",id:"patch-exclamation",name:"patch exclamation",icon:"patch-exclamation.svg"},{type:"icon",id:"patch-minus-fill",name:"patch minus fill",icon:"patch-minus-fill.svg"},{type:"icon",id:"patch-minus",name:"patch minus",icon:"patch-minus.svg"},{type:"icon",id:"patch-plus-fill",name:"patch plus fill",icon:"patch-plus-fill.svg"},{type:"icon",id:"patch-plus",name:"patch plus",icon:"patch-plus.svg"},{type:"icon",id:"patch-question-fill",name:"patch question fill",icon:"patch-question-fill.svg"},{type:"icon",id:"patch-question",name:"patch question",icon:"patch-question.svg"},{type:"icon",id:"pause-btn-fill",name:"pause btn fill",icon:"pause-btn-fill.svg"},{type:"icon",id:"pause-btn",name:"pause btn",icon:"pause-btn.svg"},{type:"icon",id:"pause-circle-fill",name:"pause circle fill",icon:"pause-circle-fill.svg"},{type:"icon",id:"pause-circle",name:"pause circle",icon:"pause-circle.svg"},{type:"icon",id:"pause-fill",name:"pause fill",icon:"pause-fill.svg"},{type:"icon",id:"pause",name:"pause",icon:"pause.svg"},{type:"icon",id:"paypal",name:"paypal",icon:"paypal.svg"},{type:"icon",id:"pc-display-horizontal",name:"pc display horizontal",icon:"pc-display-horizontal.svg"},{type:"icon",id:"pc-display",name:"pc display",icon:"pc-display.svg"},{type:"icon",id:"pc-horizontal",name:"pc horizontal",icon:"pc-horizontal.svg"},{type:"icon",id:"pc",name:"pc",icon:"pc.svg"},{type:"icon",id:"pci-card",name:"pci card",icon:"pci-card.svg"},{type:"icon",id:"peace-fill",name:"peace fill",icon:"peace-fill.svg"},{type:"icon",id:"peace",name:"peace",icon:"peace.svg"},{type:"icon",id:"pen-fill",name:"pen fill",icon:"pen-fill.svg"},{type:"icon",id:"pen",name:"pen",icon:"pen.svg"},{type:"icon",id:"pencil-fill",name:"pencil fill",icon:"pencil-fill.svg"},{type:"icon",id:"pencil-square",name:"pencil square",icon:"pencil-square.svg"},{type:"icon",id:"pencil",name:"pencil",icon:"pencil.svg"},{type:"icon",id:"pentagon-fill",name:"pentagon fill",icon:"pentagon-fill.svg"},{type:"icon",id:"pentagon-half",name:"pentagon half",icon:"pentagon-half.svg"},{type:"icon",id:"pentagon",name:"pentagon",icon:"pentagon.svg"},{type:"icon",id:"people-fill",name:"people fill",icon:"people-fill.svg"},{type:"icon",id:"people",name:"people",icon:"people.svg"},{type:"icon",id:"percent",name:"percent",icon:"percent.svg"},{type:"icon",id:"person-badge-fill",name:"person badge fill",icon:"person-badge-fill.svg"},{type:"icon",id:"person-badge",name:"person badge",icon:"person-badge.svg"},{type:"icon",id:"person-bounding-box",name:"person bounding box",icon:"person-bounding-box.svg"},{type:"icon",id:"person-check-fill",name:"person check fill",icon:"person-check-fill.svg"},{type:"icon",id:"person-check",name:"person check",icon:"person-check.svg"},{type:"icon",id:"person-circle",name:"person circle",icon:"person-circle.svg"},{type:"icon",id:"person-dash-fill",name:"person dash fill",icon:"person-dash-fill.svg"},{type:"icon",id:"person-dash",name:"person dash",icon:"person-dash.svg"},{type:"icon",id:"person-fill",name:"person fill",icon:"person-fill.svg"},{type:"icon",id:"person-heart",name:"person heart",icon:"person-heart.svg"},{type:"icon",id:"person-hearts",name:"person hearts",icon:"person-hearts.svg"},{type:"icon",id:"person-lines-fill",name:"person lines fill",icon:"person-lines-fill.svg"},{type:"icon",id:"person-plus-fill",name:"person plus fill",icon:"person-plus-fill.svg"},{type:"icon",id:"person-plus",name:"person plus",icon:"person-plus.svg"},{type:"icon",id:"person-rolodex",name:"person rolodex",icon:"person-rolodex.svg"},{type:"icon",id:"person-square",name:"person square",icon:"person-square.svg"},{type:"icon",id:"person-video",name:"person video",icon:"person-video.svg"},{type:"icon",id:"person-video2",name:"person video2",icon:"person-video2.svg"},{type:"icon",id:"person-video3",name:"person video3",icon:"person-video3.svg"},{type:"icon",id:"person-workspace",name:"person workspace",icon:"person-workspace.svg"},{type:"icon",id:"person-x-fill",name:"person x fill",icon:"person-x-fill.svg"},{type:"icon",id:"person-x",name:"person x",icon:"person-x.svg"},{type:"icon",id:"person",name:"person",icon:"person.svg"},{type:"icon",id:"phone-fill",name:"phone fill",icon:"phone-fill.svg"},{type:"icon",id:"phone-flip",name:"phone flip",icon:"phone-flip.svg"},{type:"icon",id:"phone-landscape-fill",name:"phone landscape fill",icon:"phone-landscape-fill.svg"},{type:"icon",id:"phone-landscape",name:"phone landscape",icon:"phone-landscape.svg"},{type:"icon",id:"phone-vibrate-fill",name:"phone vibrate fill",icon:"phone-vibrate-fill.svg"},{type:"icon",id:"phone-vibrate",name:"phone vibrate",icon:"phone-vibrate.svg"},{type:"icon",id:"phone",name:"phone",icon:"phone.svg"},{type:"icon",id:"pie-chart-fill",name:"pie chart fill",icon:"pie-chart-fill.svg"},{type:"icon",id:"pie-chart",name:"pie chart",icon:"pie-chart.svg"},{type:"icon",id:"piggy-bank-fill",name:"piggy bank fill",icon:"piggy-bank-fill.svg"},{type:"icon",id:"piggy-bank",name:"piggy bank",icon:"piggy-bank.svg"},{type:"icon",id:"pin-angle-fill",name:"pin angle fill",icon:"pin-angle-fill.svg"},{type:"icon",id:"pin-angle",name:"pin angle",icon:"pin-angle.svg"},{type:"icon",id:"pin-fill",name:"pin fill",icon:"pin-fill.svg"},{type:"icon",id:"pin-map-fill",name:"pin map fill",icon:"pin-map-fill.svg"},{type:"icon",id:"pin-map",name:"pin map",icon:"pin-map.svg"},{type:"icon",id:"pin",name:"pin",icon:"pin.svg"},{type:"icon",id:"pinterest",name:"pinterest",icon:"pinterest.svg"},{type:"icon",id:"pip-fill",name:"pip fill",icon:"pip-fill.svg"},{type:"icon",id:"pip",name:"pip",icon:"pip.svg"},{type:"icon",id:"play-btn-fill",name:"play btn fill",icon:"play-btn-fill.svg"},{type:"icon",id:"play-btn",name:"play btn",icon:"play-btn.svg"},{type:"icon",id:"play-circle-fill",name:"play circle fill",icon:"play-circle-fill.svg"},{type:"icon",id:"play-circle",name:"play circle",icon:"play-circle.svg"},{type:"icon",id:"play-fill",name:"play fill",icon:"play-fill.svg"},{type:"icon",id:"play",name:"play",icon:"play.svg"},{type:"icon",id:"playstation",name:"playstation",icon:"playstation.svg"},{type:"icon",id:"plug-fill",name:"plug fill",icon:"plug-fill.svg"},{type:"icon",id:"plug",name:"plug",icon:"plug.svg"},{type:"icon",id:"plugin",name:"plugin",icon:"plugin.svg"},{type:"icon",id:"plus-circle-dotted",name:"plus circle dotted",icon:"plus-circle-dotted.svg"},{type:"icon",id:"plus-circle-fill",name:"plus circle fill",icon:"plus-circle-fill.svg"},{type:"icon",id:"plus-circle",name:"plus circle",icon:"plus-circle.svg"},{type:"icon",id:"plus-lg",name:"plus lg",icon:"plus-lg.svg"},{type:"icon",id:"plus-slash-minus",name:"plus slash minus",icon:"plus-slash-minus.svg"},{type:"icon",id:"plus-square-dotted",name:"plus square dotted",icon:"plus-square-dotted.svg"},{type:"icon",id:"plus-square-fill",name:"plus square fill",icon:"plus-square-fill.svg"},{type:"icon",id:"plus-square",name:"plus square",icon:"plus-square.svg"},{type:"icon",id:"plus",name:"plus",icon:"plus.svg"},{type:"icon",id:"postage-fill",name:"postage fill",icon:"postage-fill.svg"},{type:"icon",id:"postage-heart-fill",name:"postage heart fill",icon:"postage-heart-fill.svg"},{type:"icon",id:"postage-heart",name:"postage heart",icon:"postage-heart.svg"},{type:"icon",id:"postage",name:"postage",icon:"postage.svg"},{type:"icon",id:"postcard-fill",name:"postcard fill",icon:"postcard-fill.svg"},{type:"icon",id:"postcard-heart-fill",name:"postcard heart fill",icon:"postcard-heart-fill.svg"},{type:"icon",id:"postcard-heart",name:"postcard heart",icon:"postcard-heart.svg"},{type:"icon",id:"postcard",name:"postcard",icon:"postcard.svg"},{type:"icon",id:"power",name:"power",icon:"power.svg"},{type:"icon",id:"printer-fill",name:"printer fill",icon:"printer-fill.svg"},{type:"icon",id:"printer",name:"printer",icon:"printer.svg"},{type:"icon",id:"projector-fill",name:"projector fill",icon:"projector-fill.svg"},{type:"icon",id:"projector",name:"projector",icon:"projector.svg"},{type:"icon",id:"puzzle-fill",name:"puzzle fill",icon:"puzzle-fill.svg"},{type:"icon",id:"puzzle",name:"puzzle",icon:"puzzle.svg"},{type:"icon",id:"qr-code-scan",name:"qr code scan",icon:"qr-code-scan.svg"},{type:"icon",id:"qr-code",name:"qr code",icon:"qr-code.svg"},{type:"icon",id:"question-circle-fill",name:"question circle fill",icon:"question-circle-fill.svg"},{type:"icon",id:"question-circle",name:"question circle",icon:"question-circle.svg"},{type:"icon",id:"question-diamond-fill",name:"question diamond fill",icon:"question-diamond-fill.svg"},{type:"icon",id:"question-diamond",name:"question diamond",icon:"question-diamond.svg"},{type:"icon",id:"question-lg",name:"question lg",icon:"question-lg.svg"},{type:"icon",id:"question-octagon-fill",name:"question octagon fill",icon:"question-octagon-fill.svg"},{type:"icon",id:"question-octagon",name:"question octagon",icon:"question-octagon.svg"},{type:"icon",id:"question-square-fill",name:"question square fill",icon:"question-square-fill.svg"},{type:"icon",id:"question-square",name:"question square",icon:"question-square.svg"},{type:"icon",id:"question",name:"question",icon:"question.svg"},{type:"icon",id:"quora",name:"quora",icon:"quora.svg"},{type:"icon",id:"quote",name:"quote",icon:"quote.svg"},{type:"icon",id:"radioactive",name:"radioactive",icon:"radioactive.svg"},{type:"icon",id:"rainbow",name:"rainbow",icon:"rainbow.svg"},{type:"icon",id:"receipt-cutoff",name:"receipt cutoff",icon:"receipt-cutoff.svg"},{type:"icon",id:"receipt",name:"receipt",icon:"receipt.svg"},{type:"icon",id:"reception-0",name:"reception 0",icon:"reception-0.svg"},{type:"icon",id:"reception-1",name:"reception 1",icon:"reception-1.svg"},{type:"icon",id:"reception-2",name:"reception 2",icon:"reception-2.svg"},{type:"icon",id:"reception-3",name:"reception 3",icon:"reception-3.svg"},{type:"icon",id:"reception-4",name:"reception 4",icon:"reception-4.svg"},{type:"icon",id:"record-btn-fill",name:"record btn fill",icon:"record-btn-fill.svg"},{type:"icon",id:"record-btn",name:"record btn",icon:"record-btn.svg"},{type:"icon",id:"record-circle-fill",name:"record circle fill",icon:"record-circle-fill.svg"},{type:"icon",id:"record-circle",name:"record circle",icon:"record-circle.svg"},{type:"icon",id:"record-fill",name:"record fill",icon:"record-fill.svg"},{type:"icon",id:"record",name:"record",icon:"record.svg"},{type:"icon",id:"record2-fill",name:"record2 fill",icon:"record2-fill.svg"},{type:"icon",id:"record2",name:"record2",icon:"record2.svg"},{type:"icon",id:"recycle",name:"recycle",icon:"recycle.svg"},{type:"icon",id:"reddit",name:"reddit",icon:"reddit.svg"},{type:"icon",id:"reply-all-fill",name:"reply all fill",icon:"reply-all-fill.svg"},{type:"icon",id:"reply-all",name:"reply all",icon:"reply-all.svg"},{type:"icon",id:"reply-fill",name:"reply fill",icon:"reply-fill.svg"},{type:"icon",id:"reply",name:"reply",icon:"reply.svg"},{type:"icon",id:"robot",name:"robot",icon:"robot.svg"},{type:"icon",id:"router-fill",name:"router fill",icon:"router-fill.svg"},{type:"icon",id:"router",name:"router",icon:"router.svg"},{type:"icon",id:"rss-fill",name:"rss fill",icon:"rss-fill.svg"},{type:"icon",id:"rss",name:"rss",icon:"rss.svg"},{type:"icon",id:"rulers",name:"rulers",icon:"rulers.svg"},{type:"icon",id:"safe-fill",name:"safe fill",icon:"safe-fill.svg"},{type:"icon",id:"safe",name:"safe",icon:"safe.svg"},{type:"icon",id:"safe2-fill",name:"safe2 fill",icon:"safe2-fill.svg"},{type:"icon",id:"safe2",name:"safe2",icon:"safe2.svg"},{type:"icon",id:"save-fill",name:"save fill",icon:"save-fill.svg"},{type:"icon",id:"save",name:"save",icon:"save.svg"},{type:"icon",id:"save2-fill",name:"save2 fill",icon:"save2-fill.svg"},{type:"icon",id:"save2",name:"save2",icon:"save2.svg"},{type:"icon",id:"scissors",name:"scissors",icon:"scissors.svg"},{type:"icon",id:"screwdriver",name:"screwdriver",icon:"screwdriver.svg"},{type:"icon",id:"sd-card-fill",name:"sd card fill",icon:"sd-card-fill.svg"},{type:"icon",id:"sd-card",name:"sd card",icon:"sd-card.svg"},{type:"icon",id:"search-heart-fill",name:"search heart fill",icon:"search-heart-fill.svg"},{type:"icon",id:"search-heart",name:"search heart",icon:"search-heart.svg"},{type:"icon",id:"search",name:"search",icon:"search.svg"},{type:"icon",id:"segmented-nav",name:"segmented nav",icon:"segmented-nav.svg"},{type:"icon",id:"send-check-fill",name:"send check fill",icon:"send-check-fill.svg"},{type:"icon",id:"send-check",name:"send check",icon:"send-check.svg"},{type:"icon",id:"send-dash-fill",name:"send dash fill",icon:"send-dash-fill.svg"},{type:"icon",id:"send-dash",name:"send dash",icon:"send-dash.svg"},{type:"icon",id:"send-exclamation-fill",name:"send exclamation fill",icon:"send-exclamation-fill.svg"},{type:"icon",id:"send-exclamation",name:"send exclamation",icon:"send-exclamation.svg"},{type:"icon",id:"send-fill",name:"send fill",icon:"send-fill.svg"},{type:"icon",id:"send-plus-fill",name:"send plus fill",icon:"send-plus-fill.svg"},{type:"icon",id:"send-plus",name:"send plus",icon:"send-plus.svg"},{type:"icon",id:"send-slash-fill",name:"send slash fill",icon:"send-slash-fill.svg"},{type:"icon",id:"send-slash",name:"send slash",icon:"send-slash.svg"},{type:"icon",id:"send-x-fill",name:"send x fill",icon:"send-x-fill.svg"},{type:"icon",id:"send-x",name:"send x",icon:"send-x.svg"},{type:"icon",id:"send",name:"send",icon:"send.svg"},{type:"icon",id:"server",name:"server",icon:"server.svg"},{type:"icon",id:"share-fill",name:"share fill",icon:"share-fill.svg"},{type:"icon",id:"share",name:"share",icon:"share.svg"},{type:"icon",id:"shield-check",name:"shield check",icon:"shield-check.svg"},{type:"icon",id:"shield-exclamation",name:"shield exclamation",icon:"shield-exclamation.svg"},{type:"icon",id:"shield-fill-check",name:"shield fill check",icon:"shield-fill-check.svg"},{type:"icon",id:"shield-fill-exclamation",name:"shield fill exclamation",icon:"shield-fill-exclamation.svg"},{type:"icon",id:"shield-fill-minus",name:"shield fill minus",icon:"shield-fill-minus.svg"},{type:"icon",id:"shield-fill-plus",name:"shield fill plus",icon:"shield-fill-plus.svg"},{type:"icon",id:"shield-fill-x",name:"shield fill x",icon:"shield-fill-x.svg"},{type:"icon",id:"shield-fill",name:"shield fill",icon:"shield-fill.svg"},{type:"icon",id:"shield-lock-fill",name:"shield lock fill",icon:"shield-lock-fill.svg"},{type:"icon",id:"shield-lock",name:"shield lock",icon:"shield-lock.svg"},{type:"icon",id:"shield-minus",name:"shield minus",icon:"shield-minus.svg"},{type:"icon",id:"shield-plus",name:"shield plus",icon:"shield-plus.svg"},{type:"icon",id:"shield-shaded",name:"shield shaded",icon:"shield-shaded.svg"},{type:"icon",id:"shield-slash-fill",name:"shield slash fill",icon:"shield-slash-fill.svg"},{type:"icon",id:"shield-slash",name:"shield slash",icon:"shield-slash.svg"},{type:"icon",id:"shield-x",name:"shield x",icon:"shield-x.svg"},{type:"icon",id:"shield",name:"shield",icon:"shield.svg"},{type:"icon",id:"shift-fill",name:"shift fill",icon:"shift-fill.svg"},{type:"icon",id:"shift",name:"shift",icon:"shift.svg"},{type:"icon",id:"shop-window",name:"shop window",icon:"shop-window.svg"},{type:"icon",id:"shop",name:"shop",icon:"shop.svg"},{type:"icon",id:"shuffle",name:"shuffle",icon:"shuffle.svg"},{type:"icon",id:"signal",name:"signal",icon:"signal.svg"},{type:"icon",id:"signpost-2-fill",name:"signpost 2 fill",icon:"signpost-2-fill.svg"},{type:"icon",id:"signpost-2",name:"signpost 2",icon:"signpost-2.svg"},{type:"icon",id:"signpost-fill",name:"signpost fill",icon:"signpost-fill.svg"},{type:"icon",id:"signpost-split-fill",name:"signpost split fill",icon:"signpost-split-fill.svg"},{type:"icon",id:"signpost-split",name:"signpost split",icon:"signpost-split.svg"},{type:"icon",id:"signpost",name:"signpost",icon:"signpost.svg"},{type:"icon",id:"sim-fill",name:"sim fill",icon:"sim-fill.svg"},{type:"icon",id:"sim",name:"sim",icon:"sim.svg"},{type:"icon",id:"skip-backward-btn-fill",name:"skip backward btn fill",icon:"skip-backward-btn-fill.svg"},{type:"icon",id:"skip-backward-btn",name:"skip backward btn",icon:"skip-backward-btn.svg"},{type:"icon",id:"skip-backward-circle-fill",name:"skip backward circle fill",icon:"skip-backward-circle-fill.svg"},{type:"icon",id:"skip-backward-circle",name:"skip backward circle",icon:"skip-backward-circle.svg"},{type:"icon",id:"skip-backward-fill",name:"skip backward fill",icon:"skip-backward-fill.svg"},{type:"icon",id:"skip-backward",name:"skip backward",icon:"skip-backward.svg"},{type:"icon",id:"skip-end-btn-fill",name:"skip end btn fill",icon:"skip-end-btn-fill.svg"},{type:"icon",id:"skip-end-btn",name:"skip end btn",icon:"skip-end-btn.svg"},{type:"icon",id:"skip-end-circle-fill",name:"skip end circle fill",icon:"skip-end-circle-fill.svg"},{type:"icon",id:"skip-end-circle",name:"skip end circle",icon:"skip-end-circle.svg"},{type:"icon",id:"skip-end-fill",name:"skip end fill",icon:"skip-end-fill.svg"},{type:"icon",id:"skip-end",name:"skip end",icon:"skip-end.svg"},{type:"icon",id:"skip-forward-btn-fill",name:"skip forward btn fill",icon:"skip-forward-btn-fill.svg"},{type:"icon",id:"skip-forward-btn",name:"skip forward btn",icon:"skip-forward-btn.svg"},{type:"icon",id:"skip-forward-circle-fill",name:"skip forward circle fill",icon:"skip-forward-circle-fill.svg"},{type:"icon",id:"skip-forward-circle",name:"skip forward circle",icon:"skip-forward-circle.svg"},{type:"icon",id:"skip-forward-fill",name:"skip forward fill",icon:"skip-forward-fill.svg"},{type:"icon",id:"skip-forward",name:"skip forward",icon:"skip-forward.svg"},{type:"icon",id:"skip-start-btn-fill",name:"skip start btn fill",icon:"skip-start-btn-fill.svg"},{type:"icon",id:"skip-start-btn",name:"skip start btn",icon:"skip-start-btn.svg"},{type:"icon",id:"skip-start-circle-fill",name:"skip start circle fill",icon:"skip-start-circle-fill.svg"},{type:"icon",id:"skip-start-circle",name:"skip start circle",icon:"skip-start-circle.svg"},{type:"icon",id:"skip-start-fill",name:"skip start fill",icon:"skip-start-fill.svg"},{type:"icon",id:"skip-start",name:"skip start",icon:"skip-start.svg"},{type:"icon",id:"skype",name:"skype",icon:"skype.svg"},{type:"icon",id:"slack",name:"slack",icon:"slack.svg"},{type:"icon",id:"slash-circle-fill",name:"slash circle fill",icon:"slash-circle-fill.svg"},{type:"icon",id:"slash-circle",name:"slash circle",icon:"slash-circle.svg"},{type:"icon",id:"slash-lg",name:"slash lg",icon:"slash-lg.svg"},{type:"icon",id:"slash-square-fill",name:"slash square fill",icon:"slash-square-fill.svg"},{type:"icon",id:"slash-square",name:"slash square",icon:"slash-square.svg"},{type:"icon",id:"slash",name:"slash",icon:"slash.svg"},{type:"icon",id:"sliders",name:"sliders",icon:"sliders.svg"},{type:"icon",id:"sliders2-vertical",name:"sliders2 vertical",icon:"sliders2-vertical.svg"},{type:"icon",id:"sliders2",name:"sliders2",icon:"sliders2.svg"},{type:"icon",id:"smartwatch",name:"smartwatch",icon:"smartwatch.svg"},{type:"icon",id:"snapchat",name:"snapchat",icon:"snapchat.svg"},{type:"icon",id:"snow",name:"snow",icon:"snow.svg"},{type:"icon",id:"snow2",name:"snow2",icon:"snow2.svg"},{type:"icon",id:"snow3",name:"snow3",icon:"snow3.svg"},{type:"icon",id:"sort-alpha-down-alt",name:"sort alpha down alt",icon:"sort-alpha-down-alt.svg"},{type:"icon",id:"sort-alpha-down",name:"sort alpha down",icon:"sort-alpha-down.svg"},{type:"icon",id:"sort-alpha-up-alt",name:"sort alpha up alt",icon:"sort-alpha-up-alt.svg"},{type:"icon",id:"sort-alpha-up",name:"sort alpha up",icon:"sort-alpha-up.svg"},{type:"icon",id:"sort-down-alt",name:"sort down alt",icon:"sort-down-alt.svg"},{type:"icon",id:"sort-down",name:"sort down",icon:"sort-down.svg"},{type:"icon",id:"sort-numeric-down-alt",name:"sort numeric down alt",icon:"sort-numeric-down-alt.svg"},{type:"icon",id:"sort-numeric-down",name:"sort numeric down",icon:"sort-numeric-down.svg"},{type:"icon",id:"sort-numeric-up-alt",name:"sort numeric up alt",icon:"sort-numeric-up-alt.svg"},{type:"icon",id:"sort-numeric-up",name:"sort numeric up",icon:"sort-numeric-up.svg"},{type:"icon",id:"sort-up-alt",name:"sort up alt",icon:"sort-up-alt.svg"},{type:"icon",id:"sort-up",name:"sort up",icon:"sort-up.svg"},{type:"icon",id:"soundwave",name:"soundwave",icon:"soundwave.svg"},{type:"icon",id:"speaker-fill",name:"speaker fill",icon:"speaker-fill.svg"},{type:"icon",id:"speaker",name:"speaker",icon:"speaker.svg"},{type:"icon",id:"speedometer",name:"speedometer",icon:"speedometer.svg"},{type:"icon",id:"speedometer2",name:"speedometer2",icon:"speedometer2.svg"},{type:"icon",id:"spellcheck",name:"spellcheck",icon:"spellcheck.svg"},{type:"icon",id:"spotify",name:"spotify",icon:"spotify.svg"},{type:"icon",id:"square-fill",name:"square fill",icon:"square-fill.svg"},{type:"icon",id:"square-half",name:"square half",icon:"square-half.svg"},{type:"icon",id:"square",name:"square",icon:"square.svg"},{type:"icon",id:"stack-overflow",name:"stack overflow",icon:"stack-overflow.svg"},{type:"icon",id:"stack",name:"stack",icon:"stack.svg"},{type:"icon",id:"star-fill",name:"star fill",icon:"star-fill.svg"},{type:"icon",id:"star-half",name:"star half",icon:"star-half.svg"},{type:"icon",id:"star",name:"star",icon:"star.svg"},{type:"icon",id:"stars",name:"stars",icon:"stars.svg"},{type:"icon",id:"steam",name:"steam",icon:"steam.svg"},{type:"icon",id:"stickies-fill",name:"stickies fill",icon:"stickies-fill.svg"},{type:"icon",id:"stickies",name:"stickies",icon:"stickies.svg"},{type:"icon",id:"sticky-fill",name:"sticky fill",icon:"sticky-fill.svg"},{type:"icon",id:"sticky",name:"sticky",icon:"sticky.svg"},{type:"icon",id:"stop-btn-fill",name:"stop btn fill",icon:"stop-btn-fill.svg"},{type:"icon",id:"stop-btn",name:"stop btn",icon:"stop-btn.svg"},{type:"icon",id:"stop-circle-fill",name:"stop circle fill",icon:"stop-circle-fill.svg"},{type:"icon",id:"stop-circle",name:"stop circle",icon:"stop-circle.svg"},{type:"icon",id:"stop-fill",name:"stop fill",icon:"stop-fill.svg"},{type:"icon",id:"stop",name:"stop",icon:"stop.svg"},{type:"icon",id:"stoplights-fill",name:"stoplights fill",icon:"stoplights-fill.svg"},{type:"icon",id:"stoplights",name:"stoplights",icon:"stoplights.svg"},{type:"icon",id:"stopwatch-fill",name:"stopwatch fill",icon:"stopwatch-fill.svg"},{type:"icon",id:"stopwatch",name:"stopwatch",icon:"stopwatch.svg"},{type:"icon",id:"strava",name:"strava",icon:"strava.svg"},{type:"icon",id:"subtract",name:"subtract",icon:"subtract.svg"},{type:"icon",id:"suit-club-fill",name:"suit club fill",icon:"suit-club-fill.svg"},{type:"icon",id:"suit-club",name:"suit club",icon:"suit-club.svg"},{type:"icon",id:"suit-diamond-fill",name:"suit diamond fill",icon:"suit-diamond-fill.svg"},{type:"icon",id:"suit-diamond",name:"suit diamond",icon:"suit-diamond.svg"},{type:"icon",id:"suit-heart-fill",name:"suit heart fill",icon:"suit-heart-fill.svg"},{type:"icon",id:"suit-heart",name:"suit heart",icon:"suit-heart.svg"},{type:"icon",id:"suit-spade-fill",name:"suit spade fill",icon:"suit-spade-fill.svg"},{type:"icon",id:"suit-spade",name:"suit spade",icon:"suit-spade.svg"},{type:"icon",id:"sun-fill",name:"sun fill",icon:"sun-fill.svg"},{type:"icon",id:"sun",name:"sun",icon:"sun.svg"},{type:"icon",id:"sunglasses",name:"sunglasses",icon:"sunglasses.svg"},{type:"icon",id:"sunrise-fill",name:"sunrise fill",icon:"sunrise-fill.svg"},{type:"icon",id:"sunrise",name:"sunrise",icon:"sunrise.svg"},{type:"icon",id:"sunset-fill",name:"sunset fill",icon:"sunset-fill.svg"},{type:"icon",id:"sunset",name:"sunset",icon:"sunset.svg"},{type:"icon",id:"symmetry-horizontal",name:"symmetry horizontal",icon:"symmetry-horizontal.svg"},{type:"icon",id:"symmetry-vertical",name:"symmetry vertical",icon:"symmetry-vertical.svg"},{type:"icon",id:"table",name:"table",icon:"table.svg"},{type:"icon",id:"tablet-fill",name:"tablet fill",icon:"tablet-fill.svg"},{type:"icon",id:"tablet-landscape-fill",name:"tablet landscape fill",icon:"tablet-landscape-fill.svg"},{type:"icon",id:"tablet-landscape",name:"tablet landscape",icon:"tablet-landscape.svg"},{type:"icon",id:"tablet",name:"tablet",icon:"tablet.svg"},{type:"icon",id:"tag-fill",name:"tag fill",icon:"tag-fill.svg"},{type:"icon",id:"tag",name:"tag",icon:"tag.svg"},{type:"icon",id:"tags-fill",name:"tags fill",icon:"tags-fill.svg"},{type:"icon",id:"tags",name:"tags",icon:"tags.svg"},{type:"icon",id:"telegram",name:"telegram",icon:"telegram.svg"},{type:"icon",id:"telephone-fill",name:"telephone fill",icon:"telephone-fill.svg"},{type:"icon",id:"telephone-forward-fill",name:"telephone forward fill",icon:"telephone-forward-fill.svg"},{type:"icon",id:"telephone-forward",name:"telephone forward",icon:"telephone-forward.svg"},{type:"icon",id:"telephone-inbound-fill",name:"telephone inbound fill",icon:"telephone-inbound-fill.svg"},{type:"icon",id:"telephone-inbound",name:"telephone inbound",icon:"telephone-inbound.svg"},{type:"icon",id:"telephone-minus-fill",name:"telephone minus fill",icon:"telephone-minus-fill.svg"},{type:"icon",id:"telephone-minus",name:"telephone minus",icon:"telephone-minus.svg"},{type:"icon",id:"telephone-outbound-fill",name:"telephone outbound fill",icon:"telephone-outbound-fill.svg"},{type:"icon",id:"telephone-outbound",name:"telephone outbound",icon:"telephone-outbound.svg"},{type:"icon",id:"telephone-plus-fill",name:"telephone plus fill",icon:"telephone-plus-fill.svg"},{type:"icon",id:"telephone-plus",name:"telephone plus",icon:"telephone-plus.svg"},{type:"icon",id:"telephone-x-fill",name:"telephone x fill",icon:"telephone-x-fill.svg"},{type:"icon",id:"telephone-x",name:"telephone x",icon:"telephone-x.svg"},{type:"icon",id:"telephone",name:"telephone",icon:"telephone.svg"},{type:"icon",id:"terminal-dash",name:"terminal dash",icon:"terminal-dash.svg"},{type:"icon",id:"terminal-fill",name:"terminal fill",icon:"terminal-fill.svg"},{type:"icon",id:"terminal-plus",name:"terminal plus",icon:"terminal-plus.svg"},{type:"icon",id:"terminal-split",name:"terminal split",icon:"terminal-split.svg"},{type:"icon",id:"terminal-x",name:"terminal x",icon:"terminal-x.svg"},{type:"icon",id:"terminal",name:"terminal",icon:"terminal.svg"},{type:"icon",id:"text-center",name:"text center",icon:"text-center.svg"},{type:"icon",id:"text-indent-left",name:"text indent left",icon:"text-indent-left.svg"},{type:"icon",id:"text-indent-right",name:"text indent right",icon:"text-indent-right.svg"},{type:"icon",id:"text-left",name:"text left",icon:"text-left.svg"},{type:"icon",id:"text-paragraph",name:"text paragraph",icon:"text-paragraph.svg"},{type:"icon",id:"text-right",name:"text right",icon:"text-right.svg"},{type:"icon",id:"textarea-resize",name:"textarea resize",icon:"textarea-resize.svg"},{type:"icon",id:"textarea-t",name:"textarea t",icon:"textarea-t.svg"},{type:"icon",id:"textarea",name:"textarea",icon:"textarea.svg"},{type:"icon",id:"thermometer-half",name:"thermometer half",icon:"thermometer-half.svg"},{type:"icon",id:"thermometer-high",name:"thermometer high",icon:"thermometer-high.svg"},{type:"icon",id:"thermometer-low",name:"thermometer low",icon:"thermometer-low.svg"},{type:"icon",id:"thermometer-snow",name:"thermometer snow",icon:"thermometer-snow.svg"},{type:"icon",id:"thermometer-sun",name:"thermometer sun",icon:"thermometer-sun.svg"},{type:"icon",id:"thermometer",name:"thermometer",icon:"thermometer.svg"},{type:"icon",id:"three-dots-vertical",name:"three dots vertical",icon:"three-dots-vertical.svg"},{type:"icon",id:"three-dots",name:"three dots",icon:"three-dots.svg"},{type:"icon",id:"thunderbolt-fill",name:"thunderbolt fill",icon:"thunderbolt-fill.svg"},{type:"icon",id:"thunderbolt",name:"thunderbolt",icon:"thunderbolt.svg"},{type:"icon",id:"ticket-detailed-fill",name:"ticket detailed fill",icon:"ticket-detailed-fill.svg"},{type:"icon",id:"ticket-detailed",name:"ticket detailed",icon:"ticket-detailed.svg"},{type:"icon",id:"ticket-fill",name:"ticket fill",icon:"ticket-fill.svg"},{type:"icon",id:"ticket-perforated-fill",name:"ticket perforated fill",icon:"ticket-perforated-fill.svg"},{type:"icon",id:"ticket-perforated",name:"ticket perforated",icon:"ticket-perforated.svg"},{type:"icon",id:"ticket",name:"ticket",icon:"ticket.svg"},{type:"icon",id:"tiktok",name:"tiktok",icon:"tiktok.svg"},{type:"icon",id:"toggle-off",name:"toggle off",icon:"toggle-off.svg"},{type:"icon",id:"toggle-on",name:"toggle on",icon:"toggle-on.svg"},{type:"icon",id:"toggle2-off",name:"toggle2 off",icon:"toggle2-off.svg"},{type:"icon",id:"toggle2-on",name:"toggle2 on",icon:"toggle2-on.svg"},{type:"icon",id:"toggles",name:"toggles",icon:"toggles.svg"},{type:"icon",id:"toggles2",name:"toggles2",icon:"toggles2.svg"},{type:"icon",id:"tools",name:"tools",icon:"tools.svg"},{type:"icon",id:"tornado",name:"tornado",icon:"tornado.svg"},{type:"icon",id:"translate",name:"translate",icon:"translate.svg"},{type:"icon",id:"trash-fill",name:"trash fill",icon:"trash-fill.svg"},{type:"icon",id:"trash",name:"trash",icon:"trash.svg"},{type:"icon",id:"trash2-fill",name:"trash2 fill",icon:"trash2-fill.svg"},{type:"icon",id:"trash2",name:"trash2",icon:"trash2.svg"},{type:"icon",id:"trash3-fill",name:"trash3 fill",icon:"trash3-fill.svg"},{type:"icon",id:"trash3",name:"trash3",icon:"trash3.svg"},{type:"icon",id:"tree-fill",name:"tree fill",icon:"tree-fill.svg"},{type:"icon",id:"tree",name:"tree",icon:"tree.svg"},{type:"icon",id:"triangle-fill",name:"triangle fill",icon:"triangle-fill.svg"},{type:"icon",id:"triangle-half",name:"triangle half",icon:"triangle-half.svg"},{type:"icon",id:"triangle",name:"triangle",icon:"triangle.svg"},{type:"icon",id:"trophy-fill",name:"trophy fill",icon:"trophy-fill.svg"},{type:"icon",id:"trophy",name:"trophy",icon:"trophy.svg"},{type:"icon",id:"tropical-storm",name:"tropical storm",icon:"tropical-storm.svg"},{type:"icon",id:"truck-flatbed",name:"truck flatbed",icon:"truck-flatbed.svg"},{type:"icon",id:"truck",name:"truck",icon:"truck.svg"},{type:"icon",id:"tsunami",name:"tsunami",icon:"tsunami.svg"},{type:"icon",id:"tv-fill",name:"tv fill",icon:"tv-fill.svg"},{type:"icon",id:"tv",name:"tv",icon:"tv.svg"},{type:"icon",id:"twitch",name:"twitch",icon:"twitch.svg"},{type:"icon",id:"twitter",name:"twitter",icon:"twitter.svg"},{type:"icon",id:"type-bold",name:"type bold",icon:"type-bold.svg"},{type:"icon",id:"type-h1",name:"type h1",icon:"type-h1.svg"},{type:"icon",id:"type-h2",name:"type h2",icon:"type-h2.svg"},{type:"icon",id:"type-h3",name:"type h3",icon:"type-h3.svg"},{type:"icon",id:"type-italic",name:"type italic",icon:"type-italic.svg"},{type:"icon",id:"type-strikethrough",name:"type strikethrough",icon:"type-strikethrough.svg"},{type:"icon",id:"type-underline",name:"type underline",icon:"type-underline.svg"},{type:"icon",id:"type",name:"type",icon:"type.svg"},{type:"icon",id:"ui-checks-grid",name:"ui checks grid",icon:"ui-checks-grid.svg"},{type:"icon",id:"ui-checks",name:"ui checks",icon:"ui-checks.svg"},{type:"icon",id:"ui-radios-grid",name:"ui radios grid",icon:"ui-radios-grid.svg"},{type:"icon",id:"ui-radios",name:"ui radios",icon:"ui-radios.svg"},{type:"icon",id:"umbrella-fill",name:"umbrella fill",icon:"umbrella-fill.svg"},{type:"icon",id:"umbrella",name:"umbrella",icon:"umbrella.svg"},{type:"icon",id:"union",name:"union",icon:"union.svg"},{type:"icon",id:"unlock-fill",name:"unlock fill",icon:"unlock-fill.svg"},{type:"icon",id:"unlock",name:"unlock",icon:"unlock.svg"},{type:"icon",id:"upc-scan",name:"upc scan",icon:"upc-scan.svg"},{type:"icon",id:"upc",name:"upc",icon:"upc.svg"},{type:"icon",id:"upload",name:"upload",icon:"upload.svg"},{type:"icon",id:"usb-c-fill",name:"usb c fill",icon:"usb-c-fill.svg"},{type:"icon",id:"usb-c",name:"usb c",icon:"usb-c.svg"},{type:"icon",id:"usb-drive-fill",name:"usb drive fill",icon:"usb-drive-fill.svg"},{type:"icon",id:"usb-drive",name:"usb drive",icon:"usb-drive.svg"},{type:"icon",id:"usb-fill",name:"usb fill",icon:"usb-fill.svg"},{type:"icon",id:"usb-micro-fill",name:"usb micro fill",icon:"usb-micro-fill.svg"},{type:"icon",id:"usb-micro",name:"usb micro",icon:"usb-micro.svg"},{type:"icon",id:"usb-mini-fill",name:"usb mini fill",icon:"usb-mini-fill.svg"},{type:"icon",id:"usb-mini",name:"usb mini",icon:"usb-mini.svg"},{type:"icon",id:"usb-plug-fill",name:"usb plug fill",icon:"usb-plug-fill.svg"},{type:"icon",id:"usb-plug",name:"usb plug",icon:"usb-plug.svg"},{type:"icon",id:"usb-symbol",name:"usb symbol",icon:"usb-symbol.svg"},{type:"icon",id:"usb",name:"usb",icon:"usb.svg"},{type:"icon",id:"valentine",name:"valentine",icon:"valentine.svg"},{type:"icon",id:"valentine2",name:"valentine2",icon:"valentine2.svg"},{type:"icon",id:"vector-pen",name:"vector pen",icon:"vector-pen.svg"},{type:"icon",id:"view-list",name:"view list",icon:"view-list.svg"},{type:"icon",id:"view-stacked",name:"view stacked",icon:"view-stacked.svg"},{type:"icon",id:"vimeo",name:"vimeo",icon:"vimeo.svg"},{type:"icon",id:"vinyl-fill",name:"vinyl fill",icon:"vinyl-fill.svg"},{type:"icon",id:"vinyl",name:"vinyl",icon:"vinyl.svg"},{type:"icon",id:"voicemail",name:"voicemail",icon:"voicemail.svg"},{type:"icon",id:"volume-down-fill",name:"volume down fill",icon:"volume-down-fill.svg"},{type:"icon",id:"volume-down",name:"volume down",icon:"volume-down.svg"},{type:"icon",id:"volume-mute-fill",name:"volume mute fill",icon:"volume-mute-fill.svg"},{type:"icon",id:"volume-mute",name:"volume mute",icon:"volume-mute.svg"},{type:"icon",id:"volume-off-fill",name:"volume off fill",icon:"volume-off-fill.svg"},{type:"icon",id:"volume-off",name:"volume off",icon:"volume-off.svg"},{type:"icon",id:"volume-up-fill",name:"volume up fill",icon:"volume-up-fill.svg"},{type:"icon",id:"volume-up",name:"volume up",icon:"volume-up.svg"},{type:"icon",id:"vr",name:"vr",icon:"vr.svg"},{type:"icon",id:"wallet-fill",name:"wallet fill",icon:"wallet-fill.svg"},{type:"icon",id:"wallet",name:"wallet",icon:"wallet.svg"},{type:"icon",id:"wallet2",name:"wallet2",icon:"wallet2.svg"},{type:"icon",id:"watch",name:"watch",icon:"watch.svg"},{type:"icon",id:"water",name:"water",icon:"water.svg"},{type:"icon",id:"webcam-fill",name:"webcam fill",icon:"webcam-fill.svg"},{type:"icon",id:"webcam",name:"webcam",icon:"webcam.svg"},{type:"icon",id:"whatsapp",name:"whatsapp",icon:"whatsapp.svg"},{type:"icon",id:"wifi-1",name:"wifi 1",icon:"wifi-1.svg"},{type:"icon",id:"wifi-2",name:"wifi 2",icon:"wifi-2.svg"},{type:"icon",id:"wifi-off",name:"wifi off",icon:"wifi-off.svg"},{type:"icon",id:"wifi",name:"wifi",icon:"wifi.svg"},{type:"icon",id:"wind",name:"wind",icon:"wind.svg"},{type:"icon",id:"window-dash",name:"window dash",icon:"window-dash.svg"},{type:"icon",id:"window-desktop",name:"window desktop",icon:"window-desktop.svg"},{type:"icon",id:"window-dock",name:"window dock",icon:"window-dock.svg"},{type:"icon",id:"window-fullscreen",name:"window fullscreen",icon:"window-fullscreen.svg"},{type:"icon",id:"window-plus",name:"window plus",icon:"window-plus.svg"},{type:"icon",id:"window-sidebar",name:"window sidebar",icon:"window-sidebar.svg"},{type:"icon",id:"window-split",name:"window split",icon:"window-split.svg"},{type:"icon",id:"window-stack",name:"window stack",icon:"window-stack.svg"},{type:"icon",id:"window-x",name:"window x",icon:"window-x.svg"},{type:"icon",id:"window",name:"window",icon:"window.svg"},{type:"icon",id:"windows",name:"windows",icon:"windows.svg"},{type:"icon",id:"wordpress",name:"wordpress",icon:"wordpress.svg"},{type:"icon",id:"wrench-adjustable-circle-fill",name:"wrench adjustable circle fill",icon:"wrench-adjustable-circle-fill.svg"},{type:"icon",id:"wrench-adjustable-circle",name:"wrench adjustable circle",icon:"wrench-adjustable-circle.svg"},{type:"icon",id:"wrench-adjustable",name:"wrench adjustable",icon:"wrench-adjustable.svg"},{type:"icon",id:"wrench",name:"wrench",icon:"wrench.svg"},{type:"icon",id:"x-circle-fill",name:"x circle fill",icon:"x-circle-fill.svg"},{type:"icon",id:"x-circle",name:"x circle",icon:"x-circle.svg"},{type:"icon",id:"x-diamond-fill",name:"x diamond fill",icon:"x-diamond-fill.svg"},{type:"icon",id:"x-diamond",name:"x diamond",icon:"x-diamond.svg"},{type:"icon",id:"x-lg",name:"x lg",icon:"x-lg.svg"},{type:"icon",id:"x-octagon-fill",name:"x octagon fill",icon:"x-octagon-fill.svg"},{type:"icon",id:"x-octagon",name:"x octagon",icon:"x-octagon.svg"},{type:"icon",id:"x-square-fill",name:"x square fill",icon:"x-square-fill.svg"},{type:"icon",id:"x-square",name:"x square",icon:"x-square.svg"},{type:"icon",id:"x",name:"x",icon:"x.svg"},{type:"icon",id:"xbox",name:"xbox",icon:"xbox.svg"},{type:"icon",id:"yin-yang",name:"yin yang",icon:"yin-yang.svg"},{type:"icon",id:"youtube",name:"youtube",icon:"youtube.svg"},{type:"icon",id:"zoom-in",name:"zoom in",icon:"zoom-in.svg"},{type:"icon",id:"zoom-out",name:"zoom out",icon:"zoom-out.svg"}],wCe=()=>{const[t,e]=A.useState(""),{getTranslation:n}=ms(),r=A.useMemo(()=>t===""?r4.slice(0,10):r4.filter(s=>s.name.indexOf(t)!==-1),[t]),i=s=>{e(s.currentTarget.value)};return z.jsxs(Lt,{className:[Jt["mx-h-30vh"]].join(" "),children:[z.jsx(pc,{children:z.jsxs(pc.Group,{className:"mb-3",controlId:"iconKeyword",children:[z.jsx(pc.Label,{children:n("widget","icon","search","title")}),z.jsx(pc.Control,{onChange:i,type:"text",placeholder:n("widget","icon","search","placeholder")}),z.jsx(pc.Text,{className:"text-muted",children:n("widget","icon","search","desc")})]})}),z.jsx(ui,{xs:2,children:r.map(s=>z.jsx(SCe,{data:{id:s.id,name:s.name,icon:s.icon,"data-item-type":s.type},maxPx:80},`icon-thumbnail-${s.id}`))})]})},SCe=({data:{id:t,...e},maxPx:n})=>z.jsx(ir,{as:Lt,className:[Ct.absoluteCenter,Ct.wrapTrue].join(" "),children:z.jsx(_f,{dragType:"copyMove",dragSrc:{trigger:Zi.INSERT.ICON,...e},children:z.jsx(ir.Image,{alt:e.icon,src:`/assets/icon/bootstrap/${e.icon}`})})}),kCe=[{type:"line",id:"straight-plain",name:"straight-plain",icon:"dash"},{type:"line",id:"one-curve-plain",name:"one-curve-plain",icon:"bezier"},{type:"line",id:"two-curve-plain",name:"two-curve-plain",icon:"bezier2"}],CCe=()=>z.jsx(Lt,{children:z.jsx(ui,{children:kCe.map(t=>z.jsx($Ce,{data:{id:t.id,icon:t.icon,name:t.name,"data-item-type":"line"}},`line-thumbnail-${t.id}`))})}),$Ce=({data:t})=>(qn(),z.jsx(ir,{as:Lt,className:[Ct.absoluteCenter,Ct.wrapTrue].join(" "),children:z.jsx(_f,{dragType:"copyMove",dragSrc:{trigger:Zi.INSERT.LINE,...t},children:z.jsx("i",{className:`bi-${t.icon}`,style:{fontSize:20,width:25}})})})),i4={colorPalette:t=>z.jsx(Zke,{data:t}),align:t=>z.jsx(oCe,{data:t}),image:t=>z.jsx(koe,{}),frame:t=>z.jsx(tse,{}),shape:t=>z.jsx(xCe,{}),text:t=>z.jsx(iCe,{}),line:t=>z.jsx(CCe,{}),icon:t=>z.jsx(wCe,{}),export:t=>z.jsx(gCe,{data:t})},ECe=t=>z.jsx("aside",{children:z.jsx(u0,{children:Hie.map(e=>z.jsx(Gie,{data:{...e,...t},children:i4[e.id]&&i4[e.id]({...e,...t})},`widget-${e.id}`))})}),TCe=({data:t,onClickTab:e,onDeleteTab:n})=>{const r=i=>{i.preventDefault(),i.stopPropagation(),n(t.id)};return z.jsx(Y0.Item,{children:z.jsxs(Y0.Link,{eventKey:t.id,className:[t.active?Lr.greyTheme:Lr.whiteTheme,vl.roundTopSM,Tf.fontHalf1em,Ds.p05em,Ds.pl1rem,Ct["text-center"]].join(" "),"data-file-id":t.id,"data-active":t.active,onClick:e,children:[t.id,z.jsx(Lc,{className:[Lr.transparentDarkColorTheme,vl.none,Z0["inline-block"],Jt.width25,Ds.p0,Ds.ml1rem,Ct["text-left"]].join(" "),onClick:r,children:z.jsx("i",{className:"bi-x"})})]})},`tab-${t.id}`)},_Ce=({onClickTab:t,onCreateTab:e,onDeleteTab:n,tabList:r})=>z.jsxs(Y0,{variant:"tabs",className:[Ct.fromStartBottom,Jt.height100,"pt-2",vl.none].join(" "),children:[r.map(i=>z.jsx(TCe,{onClickTab:t,data:i,onDeleteTab:n},`tab-${i.id}`)),z.jsx(Lc,{className:[Lr.transparentTheme,vl.none].join(" "),onClick:e,children:z.jsx("i",{className:"bi-plus-circle"})})]}),BV=[{id:"select-all",name:"Select All",desc:"Select All Items",icon:"bounding-box"},{id:"remove-background",name:"Remove Background of Selected Image",desc:"Remove Background of Selected Image",icon:"card-image"},{id:"flip-horizontally",name:"Flip Horizontally",desc:"Flip Horizontally",icon:"arrow-left-right"},{id:"flip-vertically",name:"Flip Vertically",desc:"Flip Vertically",icon:"arrow-down-up"},{id:"reset-zoom",name:"Reset Zoom",desc:"Reset Zoom",icon:"arrows-fullscreen"},{id:"zoom-in",name:"Zoom In",desc:"Zoom In",icon:"arrows-angle-expand"},{id:"zoom-out",name:"Zoom Out",desc:"Zoom Out",icon:"arrows-angle-contract"},{id:"layer-up",name:"Layer Up",desc:"Layer Up",icon:"front"},{id:"layer-down",name:"Layer Down",desc:"Layer Down",icon:"back"},{id:"hotkey",name:"Shortcut",desc:"Keyboard Shortcut",icon:"keyboard-fill"}],ICe=({children:t})=>z.jsx(Y0,{className:[Lr.darkTheme,Ct.fromBottomCenter].join(" "),children:z.jsx(Vee,{children:z.jsx(Cz,{vertical:!0,children:t})})}),NCe=({data:t,onClick:e})=>{const{getTranslation:n}=ms();return z.jsx(Cz,{vertical:!0,children:z.jsx(M$,{placement:"right",overlay:z.jsx(Q0,{id:`tooltip_navbar-id_${t.id}`,children:n("workMode",t.id,"desc")}),children:z.jsx(Lc,{"data-navbar-id":t.id,onClick:e,className:[Lr.whiteTheme,vl.colorGrey].join(" "),children:t.icon?z.jsx("i",{className:`bi-${t.icon}`}):n("hotkey",t.id,"name")})})})},RCe=({callback:t,targetDOMElement:e})=>(A.useEffect(()=>{if(!e){console.log("pup");return}e.addEventListener("dragover",n=>{Jie("copy")(n)}),e.addEventListener("drop",n=>{ese(t)(n)})},[e]),z.jsx(z.Fragment,{})),_h="stagePosition",v1="stageScale",rb=()=>{const t=A.useRef(),e=A.useRef({x:0,y:0});return{setStageRef:r=>{t.current=r},stageRef:t,dragBackgroundOrigin:e}},OCe=({data:t,e,onSelect:n})=>{var v,b;const{id:r,attrs:i}=t,{updateItem:s}=qn(),a=rb(),{checkIsInFrame:o,moveToLayer:l,getItemsInThisFrame:c}=ib(a.stageRef,a.dragBackgroundOrigin),u=A.useRef(),d={x:i.x,y:i.y},f=A.useCallback(S=>{S.target.fill("blue"),S.target.getLayer().batchDraw()},[]),h=A.useCallback(S=>{S.target.fill("#000000"),S.target.getLayer().batchDraw()},[]),g=S=>{const k=i;S.beginPath(),S.fillText(i["data-frame-type"],k.x,k.y-15),S.moveTo(k.x,k.y),S.lineTo(k.x+k.width,k.y),S.lineTo(k.x+k.width,k.y+k.height),S.lineTo(k.x,k.y+k.height),S.closePath()},y=A.useCallback(S=>{var T;const k=S.target.getParent();k.findOne("Label").position(S.target.position()),k.children.forEach(_=>{o(_)===!1&&l(_)});const $=c(S.target);$==null||$.forEach(_=>o(_)),k.clipFunc(S.target.getLayer().Context),(T=S.target.getStage())==null||T.batchDraw()},[]),x=A.useCallback(S=>{var k;s(S.target.id(),()=>({...S.target.attrs})),S.target.getParent().clipFunc(S.target.getLayer().Context),(k=S.target.getLayer())==null||k.batchDraw()},[t]);return A.useEffect(()=>{u.current&&(a.setStageRef(u.current.getStage()),u.current.brightness(t.attrs.brightness),u.current.findAncestor("Group").clipFunc(u.current.getLayer().getContext()),u.current.cache())},[t]),z.jsxs(MB,{name:"label-group",onClick:n,clipFunc:g,children:[z.jsxs(_J,{x:((v=u.current)==null?void 0:v.x())??d.x,y:((b=u.current)==null?void 0:b.y())??d.y,onClick:n,children:[z.jsx(IJ,{name:"label-tag",pointerDirection:"left"}),z.jsx(zB,{text:i["data-frame-type"],name:"label-text",fontSize:10,height:50,lineHeight:1.2,padding:0,fill:"#000000",onMouseOver:f,onMouseLeave:h})]}),z.jsx(a_,{ref:u,name:"label-target","data-item-type":"frame","data-frame-type":i["data-frame-type"],id:t.id,x:i.x,y:i.y,width:i.width,height:i.height,scaleX:i.scaleX,scaleY:i.scaleY,fill:i.fill??"#ffffff",opacity:i.opacity??1,filters:[Fr.Filters.Brighten],draggable:!0,onDragMove:y,onDragEnd:x})]})},Wu=(t,e,n,r)=>{t.setPointersPositions(e);const i=t.getAbsolutePosition(),s=t.getPointerPosition();return s?!n||!r?{x:kn(s.x-i.x),y:kn(s.y-i.y)}:{x:kn((s.x-i.x)/t.scaleX()-n/2),y:kn((s.y-i.y)/t.scaleY()-r/2)}:{x:0,y:0}},ib=(t,e)=>{const{createItem:n,updateItem:r}=qn(),i=(x,v)=>{const b=Wu(t.current,x,v.width,v.height),S={id:Xi(),attrs:{name:"label-target","data-item-type":"frame","data-frame-type":v["data-frame-type"],width:v.width,height:v.height,fill:"#ffffff",x:b.x,y:b.y,zIndex:0,brightness:0,updatedAt:Date.now()},className:"sample-frame",children:[]};n(S)},s=(x,v)=>{const b=new Image;let S=v.src;S=v.src,b.onload=()=>{let k,$;b.width>b.height?(k=kn(512),$=kn(k*(b.height/b.width))):($=kn(512),k=kn($*(b.width/b.height)));const T=Wu(t.current,x,k,$),_={id:Xi(),attrs:{name:"label-target","data-item-type":"image",x:T.x,y:T.y,width:k,height:$,src:v.src,zIndex:0,brightness:0,_filters:["Brighten"],updatedAt:Date.now()},className:"sample-image",children:[]};n(_)},b.src=S},a=(x,v)=>{const b=Wu(t.current,x,v.width,v.height),S={id:Xi(),attrs:{name:"label-target","data-item-type":"text",width:v.text.split("").reduce((k,$)=>$.charCodeAt(0)>=32&&$.charCodeAt(0)<=126?k+v.fontSize*(3/5):k+v.fontSize,0),height:v.height,fill:"#00000",x:b.x,y:b.y,fontSize:v.fontSize,fontFamily:v.fontFamily,text:v.text,textAlign:"left",verticalAlign:"top",zIndex:0,brightness:0,updatedAt:Date.now()},className:"sample-text",children:[]};n(S)},o=(x,v)=>{const b=Math.sqrt(v.radius),S=Wu(t.current,x,b,b),k={id:Xi(),attrs:{name:"label-target","data-item-type":"shape",fill:"#00000",x:S.x,y:S.y,width:b,height:b,sides:v.sides,radius:v.radius,zIndex:0,brightness:0,updatedAt:Date.now()},className:"sample-shape",children:[]};n(k)},l=(x,v)=>{const b=Wu(t.current,x,100,100),S={id:Xi(),attrs:{name:"label-target","data-item-type":"icon",width:100,height:100,fill:"#00000",x:b.x,y:b.y,icon:v.icon,brightness:0,zIndex:0,updatedAt:Date.now()},className:"sample-icon",children:[]};n(S)},c=(x,v)=>{const b=Wu(t.current,x,100,100),S=v.name.indexOf("curve")!==-1?v.name.indexOf("one")!==-1?[110,-10]:[80,-10,10,110]:[],k={id:Xi(),attrs:{name:"label-target","data-item-type":"line",stroke:"#00000",x:b.x,y:b.y,width:100,height:100,points:[0,0,...S,100,100],arrow:v.name.indexOf("arrow")!==-1,curve:v.name.indexOf("curve")!==-1,zIndex:0,brightness:0,updatedAt:Date.now()},className:"sample-line",children:[]};n(k)},u=(x,v)=>{if(!t.current)return;const{trigger:b,...S}=x;switch(S.id=Xi(),b){case Zi.INSERT.FRAME:return i(v,S);case Zi.INSERT.IMAGE:return s(v,S);case Zi.INSERT.TEXT:return a(v,S);case Zi.INSERT.SHAPE:return o(v,S);case Zi.INSERT.ICON:return l(v,S);case Zi.INSERT.LINE:return c(v,S)}},d=x=>{const v=x.getStage();return v?v.getChildren()[0].getChildren(S=>S.attrs.name==="label-target"&&S.attrs["data-item-type"]!=="frame").filter(S=>s4(x,S)):void 0},f=x=>{var k;const v=x.getStage();if(!v)return;const S=v.getChildren()[0].getChildren($=>$.attrs.name==="label-group").find($=>{const T=$.findOne("Rect");return T?s4(T,x):!1});return S?(S.add(x),(k=S.getLayer())==null||k.batchDraw(),!0):!1},h=x=>{var b,S;const v=x.getLayer();x.getParent().children=((b=x.getParent().children)==null?void 0:b.filter(k=>k.id()!==x.id()))??x.getParent().children,v&&v.add(x),(S=x.getLayer())==null||S.batchDraw()},g=A.useCallback(x=>{f(x.target)||x.target.getLayer()!==x.target.getParent()&&h(x.target)},[]);return{onDropOnStage:u,checkIsInFrame:f,getItemsInThisFrame:d,onDragMoveFrame:g,onDragEndFrame:x=>{var v;x.evt.preventDefault(),x.evt.stopPropagation(),r(x.target.id(),()=>({...x.target.attrs})),(v=x.target.getLayer())==null||v.batchDraw()},moveToLayer:h}},s4=(t,e)=>{const n=e.position().x,r=e.position().y,i=e.size().width,s=e.size().height,a={x:n,y:r},o={width:i*e.scaleX(),height:s*e.scaleY()};return a.x>=t.x()&&a.x<=t.x()+t.width()&&a.y>=t.y()&&a.y<=t.y()+t.height()||a.x+o.width>=t.x()&&a.x+o.width<=t.x()+t.width()&&a.y+o.height>=t.y()&&a.y+o.height<=t.y()+t.height()||a.x>=t.x()&&a.x<=t.x()+t.width()&&a.y+o.height>=t.y()&&a.y+o.height<=t.y()+t.height()||a.x+o.width>=t.x()&&a.x+o.width<=t.x()+t.width()&&a.y>=t.y()&&a.y<=t.y()+t.height()||a.x+o.width/2>=t.x()&&a.x+o.width/2<=t.x()+t.width()&&a.y+o.height/2>=t.y()&&a.y+o.height/2<=t.y()+t.height()},ACe=({children:t,onSelect:e,stage:{stageRef:n,dragBackgroundOrigin:r}})=>{var x;const{onDropOnStage:i}=ib(n),[s,a]=A.useState(),{setValue:o}=nb(),l=A.useCallback(()=>{if(!n.current||!n.current.container().parentElement)return;const{width:v,height:b}=n.current.container().parentElement.getBoundingClientRect();n.current.width(v),n.current.height(b),n.current.batchDraw()},[n]),c=A.useCallback(v=>{v.evt.preventDefault();const b=n.current;if(!b)return;const S=v.evt.deltaY>0?1:-1,k=1.1,$=b.scaleX(),T=b.getPointerPosition();if(!T)return;const _={x:(T.x-b.x())/$,y:(T.y-b.y())/$},R=S>0?$*k:$/k;b.scale({x:R,y:R}),o(v1,{x:R,y:R});const P={x:T.x-_.x*R,y:T.y-_.y*R};b.position(P),o(_h,P)},[]),u=A.useCallback(()=>{const v=n.current;v&&(v.scale({x:1,y:1}),v.position({x:0,y:0}),o(_h,{x:0,y:0}),o(v1,{x:1,y:1}))},[]),d=A.useCallback(()=>{var b;const v=n.current;!v||!v.container().parentElement||!r.current||(v.on("mousemove",S=>{if(S.evt.which!==1)return;const k=v.getPointerPosition();if(!k)return;if(r.current.x===0&&r.current.y===0){r.current=k;return}const $={x:kn(v.x()+(k.x-r.current.x)),y:kn(v.y()+(k.y-r.current.y))};v.position($),o(_h,$),r.current=k}),v.on("mouseup",S=>{var k;r.current={x:0,y:0},(k=n.current)!=null&&k.draggable()||(v.removeEventListener("mousemove"),v.removeEventListener("mouseup"))}),(b=n.current)==null||b.draggable(!0))},[]),f=A.useCallback(v=>{v.target.getType()==="Stage"&&e(v)},[e]),h=A.useCallback(v=>{var T;f(v);const b=v.target.getStage();if(!b)return;const S=b.findOne(".select-box"),k=a4(b,v.evt),$=b.getPointerPosition();if(S.position(k),b.getAllIntersections($).length||(T=n.current)!=null&&T.draggable()){S.visible(!1);return}S.visible(!0)},[f]),g=v=>{var b;if(v.evt.which===1){const S=v.target.getStage();if(!S)return;const k=S.findOne(".select-box");if(!k.visible())return;const $=a4(S,v.evt),T=k.position(),_=k.size(),R=PCe(T,$,_);k.position({x:R.x,y:R.y}),k.size({width:R.width,height:R.height}),(b=k.getStage())==null||b.batchDraw()}},y=A.useCallback(v=>{var $;const b=v.target.getStage();if(!b)return;const S=b.findOne(".select-box"),k=o4(b,S)?o4(b,S).map(T=>T.attrs["data-item-type"]==="frame"?T.getParent().getChildren()??[]:T).flat().filter(T=>T.className!=="Label"):[];S.visible(!1),S.position({x:0,y:0}),S.size({width:0,height:0}),($=S.getLayer())==null||$.batchDraw(),k!=null&&k.length&&e(void 0,k)},[e]);return Yr("space",v=>{d()},{keydown:!0,enabled:!((x=n.current)!=null&&x.draggable())},[n.current,d]),Yr("space",v=>{var b,S;(b=n.current)==null||b.draggable(!1),(S=n.current)==null||S.fire("mouseup")},{keyup:!0},[n.current,d]),Yr("ctrl+0",v=>{u()},{},[n.current,u]),A.useEffect(()=>(window.addEventListener("load",l),window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)),[l]),A.useEffect(()=>{n.current&&a(n.current.container())},[]),z.jsx(ao.Consumer,{children:({store:v})=>z.jsx(AJ,{ref:n,width:window.innerWidth*.8,height:window.innerHeight*.8,draggable:!1,onWheel:c,onMouseDown:h,onMouseMove:g,onMouseUp:y,className:[Dr.absolute,Dr.top0,Dr.left0].join(" "),children:z.jsxs(X5,{store:v,children:[z.jsxs(TJ,{children:[t,z.jsx(a_,{name:"select-box",x:0,y:0,width:0,height:0,fill:"skyblue",opacity:.4,visible:!1})]}),s?z.jsx(RCe,{callback:i,targetDOMElement:s}):null]})})})},a4=(t,e)=>{t.setPointersPositions(e);const n=t.getAbsolutePosition(),r=t.getPointerPosition();return r?{x:kn((r.x-n.x)/t.scaleX()),y:kn((r.y-n.y)/t.scaleY())}:{x:0,y:0}},o4=(t,e)=>{var i;const n=e.getClientRect({relativeTo:t.getLayer()});return(i=e.getLayer())==null?void 0:i.getChildren(s=>{if(s.name()==="select-box")return!1;const a=s.getClientRect({relativeTo:t.getLayer()});return n.x<=a.x&&n.y<=a.y&&n.x+n.width>=a.x+a.width&&n.y+n.height>=a.y+a.height}).map(s=>s.name()==="label-group"?s.findOne(".label-target")??null:s).filter(Boolean)},PCe=(t,e,n)=>{const r={x:t.x,y:t.y,width:n.width,height:n.height};return r.x=t.x,r.y=t.y,r.width=e.x-t.x,r.height=e.y-t.y,r},DCe="STAGE_LIST",za=P_(),zV=Bx({name:DCe,initialState:za.setAll(za.getInitialState(),[]),reducers:{initialize(t,e){za.setAll(t,e.payload)},addItem(t,e){if(Array.isArray(e.payload)){za.addMany(t,e.payload);return}za.addOne(t,e.payload)},updateItem(t,e){za.updateOne(t,{id:e.payload.id,changes:e.payload})},removeItem(t,e){if(Array.isArray(e.payload)){za.removeMany(t,e.payload);return}za.removeOne(t,e.payload.id)}}}),FCe=zV.reducer,LCe=za.getSelectors(t=>t.stageDataList),Lv=zV.actions,jV=()=>{const t=QT(),e=W0(LCe.selectAll),n=W0(MV.selectAll),{alterItems:r,clearItems:i}=qn(),s=u=>{t(Lv.initialize(u));const d=u[u.length-1]??null;d&&c(d.id,d.id,d.data)},a=u=>{t(Lv.addItem(u))},o=u=>{t(Lv.updateItem(u))},l=u=>{t(Lv.removeItem(u))},c=(u,d,f)=>{var g;u&&u!==d&&o({id:u,data:n}),i();const h=(g=e.find(y=>y.id===d))==null?void 0:g.data;(f||h)&&r(f??h)};return{stageDataList:e,initializeFileDataList:s,createFileData:a,updateFileData:o,removeFileData:l,changeStageData:c}},MCe={Brighten:Fr.Filters.Brighten,Grayscale:Fr.Filters.Grayscale},BCe=({data:t,e,onSelect:n})=>{const{attrs:r}=t,i=A.useRef(),[s,a]=A.useState(new Image),o=rb(),{onDragMoveFrame:l,onDragEndFrame:c,checkIsInFrame:u}=ib(o.stageRef,o.dragBackgroundOrigin),d=A.useMemo(()=>t.attrs._filters?t.attrs._filters.map(f=>MCe[f]):[Fr.Filters.Brighten],[t.attrs]);return A.useEffect(()=>{const f=new Image;f.onload=()=>{a(f)},f.crossOrigin="Anonymous";let h;if(r.src.startsWith("find:"),h=r.src,h.startsWith("data:")){Fr.Image.fromURL(h,g=>{let y,x;g.width()>g.height()?(y=kn(512),x=kn(y*(g.height()/g.width()))):(x=kn(512),y=kn(x*(g.width()/g.height()))),g.width(y),g.height(x);const v=g.toDataURL({x:0,y:0,width:y,height:x,pixelRatio:5});f.src=v});return}f.src=h},[r.src]),A.useEffect(()=>{i.current&&(o.setStageRef(i.current.getStage()),i.current.brightness(t.attrs.brightness),u(i.current),i.current.cache())},[s,t]),A.useEffect(()=>{i.current.cache()},[]),z.jsx(BB,{ref:i,image:s,onClick:n,name:"label-target","data-item-type":"image","data-frame-type":"image",id:t.id,x:r.x,y:r.y,width:r.width,height:r.height,scaleX:r.scaleX,scaleY:r.scaleY,fill:r.fill??"transparent",opacity:r.opacity??1,rotation:r.rotation??0,filters:d??[Fr.Filters.Brighten],draggable:!0,onDragMove:l,onDragEnd:c})},VV=t=>{const[e,n]=A.useState([]);return{selectedItems:e,setSelectedItems:n,onSelectItem:(s,a)=>{if(t==null){console.error("transformer is not given");return}if(!t.transformerRef.current)return;if(a){t.transformerRef.current.nodes(a),t.setTransformerConfig(t.transformerRef.current),n(a);return}if(!s)return;if(s.target.getType()==="Stage"){t.transformerRef.current.nodes([]),t.setTransformerConfig(t.transformerRef.current),n([]);return}let o=[];const l=s.target.name()==="label-text"?s.target.getParent().getParent().findOne(".label-target"):s.target;s.evt.shiftKey?e.find(c=>c.id()===l.id())?o=e.filter(c=>c.id()!==l.id()):o=[...e,l]:o=[l],t.transformerRef.current.nodes(o),t.setTransformerConfig(t.transformerRef.current),n(o)},clearSelection:()=>{t.transformerRef.current&&(t.transformerRef.current.nodes([]),t.setTransformerConfig(t.transformerRef.current)),n([])}}},Mv="tabId",zCe=(t,e)=>{const[n,r]=A.useState([]),{createFileData:i,removeFileData:s,changeStageData:a}=jV(),{clearSelection:o}=VV(t),{setValue:l}=nb();return{tabList:n,onClickTab:h=>{var x;const g=h.currentTarget.dataset.fileId,y=(x=n.find(v=>v.active))==null?void 0:x.id;o(),a(y,g),r(v=>v.map(b=>({id:b.id,active:g===b.id}))),l(Mv,{id:g}),e()},onCreateTab:(h,g)=>{var v;const y=(g==null?void 0:g.id)??`file-${n.length===0?1:parseInt(n[n.length-1].id.slice(5))+1}`,x=(v=n.find(b=>b.active))==null?void 0:v.id;o(),i(g??{id:y,data:[]}),a(x??y,y),r(b=>[...Object.values(b).map((S,k)=>({...S,active:!1})),{id:y,active:!0}]),g||(l(Mv,{id:y}),e())},onDeleteTab:h=>{if(n.length<=1)return;const g=n.find(v=>v.active),y=n.findIndex(v=>v.id===h),x=n[y].id===g.id?n[y===0?y+1:y-1].id:g.id;o(),s(h),a(x,x),r(v=>[...v.filter(b=>b.id!==h).map(b=>b.id===x?{id:b.id,active:!0}:{id:b.id,active:!1})]),l(Mv,{id:x}),e()},moveTab:(h,g)=>{var x;const y=(x=n.find(v=>v.active))==null?void 0:x.id;o(),a(y,h,(g==null?void 0:g.data)??void 0),r(v=>v.map(b=>({id:b.id,active:h===b.id}))),l(Mv,{id:h}),e()}}},jCe={rotateEnabled:!1,enabledAnchors:[]},VCe={rotateEnabled:!1,enabledAnchors:["top-left","top-right","bottom-left","bottom-right"]},WCe={rotateEnabled:!0,enabledAnchors:["top-left","top-right","bottom-left","bottom-right"]},l4={frame:jCe,image:VCe,line:WCe,default:{rotateEnabled:!0,enabledAnchors:["top-left","top-center","top-right","middle-left","middle-right","bottom-left","bottom-center","bottom-right"]}},UCe=()=>{const t=A.useRef(),{updateItem:e}=qn();return{transformerRef:t,onTransformEnd:i=>{var s;e(i.target.id(),()=>({...i.target.attrs,updatedAt:Date.now()})),(s=i.target.getStage())==null||s.batchDraw()},setTransformerConfig:i=>{let s="default";i.nodes().length===1&&(s=i.getNode().attrs["data-item-type"]);for(const a in l4[s])i.attrs[a]=l4[s][a];i.update()}}},WV=()=>{const{removeItem:t,createItem:e,updateItem:n}=qn(),{setValue:r}=nb();return{pasteItems:v=>{v.forEach(b=>{Object.keys(b.attrs).length!==0&&e({id:Xi(),attrs:{...b.attrs},className:b.className,children:b.children})})},selectAll:(v,b)=>{const S=v.stageRef.current.getChildren()[0].getChildren(T=>T.attrs.name==="label-group").map(T=>[...T.children??[]]).flat(),k=v.stageRef.current.getChildren()[0].getChildren(T=>T.attrs.name==="label-target"&&T.attrs["data-item-type"]!=="frame"),$=[...S,...k];b(void 0,$)},copyItems:(v,b,S)=>{const k=v.map($=>S($)).sort(($,T)=>$.attrs.zIndex===T.attrs.zIndex?$.attrs.zIndex<0?T.attrs.updatedAt-$.attrs.updatedAt:$.attrs.updatedAt-T.attrs.updatedAt:$.attrs.zIndex-T.attrs.zIndex);b(k)},deleteItems:(v,b,S)=>{var k;b([]),(k=S.current)==null||k.nodes([]),t(v.map($=>$.id()))},duplicateItems:(v,b)=>{var S;v.map(k=>b(k)).sort((k,$)=>k.attrs.zIndex===$.attrs.zIndex?k.attrs.zIndex<0?$.attrs.updatedAt-k.attrs.updatedAt:k.attrs.updatedAt-$.attrs.updatedAt:k.attrs.zIndex-$.attrs.zIndex).forEach(k=>{e({...k,attrs:{...k.attrs,x:k.attrs.x+v[0].scaleX()*50,y:k.attrs.y+v[0].scaleY()*50}})}),v.length>0&&((S=v[0].getStage())==null||S.batchDraw())},layerUp:v=>{v.forEach(b=>{b.moveUp(),n(b.id(),S=>({...b.attrs,zIndex:1,updatedAt:Date.now()}))})},layerDown:v=>{v.forEach(b=>{b.moveDown(),n(b.id(),S=>({...b.attrs,zIndex:-1,updatedAt:Date.now()}))})},flipHorizontally:v=>{v.forEach(b=>{b.scaleX(-1*b.scaleX()),n(b.id(),S=>({...b.attrs,scaleX:b.scaleX(),updatedAt:Date.now()}))})},flipVertically:v=>{v.forEach(b=>{b.scaleY(-1*b.scaleY()),n(b.id(),S=>({...b.attrs,scaleY:b.scaleY(),updatedAt:Date.now()}))})},zoom:(v,b)=>{const S=v.stageRef.current,k=1.1,$=S.scaleX(),T=S.getPointerPosition();if(!T)return;const _={x:(T.x-S.x())/$,y:(T.y-S.y())/$},R=b>0?$*k:$/k;S.scale({x:R,y:R}),r(v1,{x:R,y:R});const P={x:T.x-_.x*R,y:T.y-_.y*R};S.position(P),r(_h,P)},resetZoom:v=>{v.stageRef.current.scale({x:1,y:1}),v.stageRef.current.position({x:0,y:0}),r(_h,{x:0,y:0}),r(v1,{x:1,y:1})},undo:()=>{},redo:()=>{}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GCe=1e-7,HCe=1e-4;class AI{constructor(e,n){this.backend=e,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,n){this.dataIdsCount++,this.data.set(e,n)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class sb{refCount(e){return xi("refCount")}incRef(e){return xi("incRef")}timerAvailable(){return!0}time(e){return xi("time")}read(e){return xi("read")}readSync(e){return xi("readSync")}readToGPU(e,n){return xi("readToGPU")}numDataIds(){return xi("numDataIds")}disposeData(e,n){return xi("disposeData")}write(e,n,r){return xi("write")}move(e,n,r,i,s){return xi("move")}memory(){return xi("memory")}floatPrecision(){return xi("floatPrecision")}epsilon(){return this.floatPrecision()===32?GCe:HCe}dispose(){return xi("dispose")}}function xi(t){throw new Error(`'${t}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UV(t){let e=t.length,n=0;for(;e>0;)n=Math.random()*e|0,e--,qa(t,e,n)}function qCe(t,e){if(t.length!==e.length)throw new Error(`Array sizes must match to be shuffled together First array length was ${t.length}Second array length was ${e.length}`);let n=t.length,r=0;for(;n>0;)r=Math.random()*n|0,n--,qa(t,n,r),qa(e,n,r)}function wl(t,e,n){return Math.max(t,Math.min(e,n))}function ab(t){return t%2===0?t:t+1}function qa(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function GV(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e}function KCe(t,e){const n=Math.random();return e*n+(1-n)*t}function XCe(t,e){let n=0;for(let r=0;r<t.length;r++){const i=Number(t[r])-Number(e[r]);n+=i*i}return n}function F(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function Kn(t,e,n=""){F($t(t,e),()=>n+` Shapes ${t} and ${e} must match`)}function gu(t){F(t!=null,()=>"The input to the tensor constructor must be a non-null value.")}function uo(t,e=[],n=!1){if(e==null&&(e=[]),Array.isArray(t)||nr(t)&&!n)for(let r=0;r<t.length;++r)uo(t[r],e,n);else e.push(t);return e}function oe(t){if(t.length===0)return 1;let e=t[0];for(let n=1;n<t.length;n++)e*=t[n];return e}function YCe(t){return t.length===0}function $t(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Wc(t){return t%1===0}function QCe(t){if(Math.tanh!=null)return Math.tanh(t);if(t===1/0)return 1;if(t===-1/0)return-1;{const e=Math.exp(2*t);return(e-1)/(e+1)}}function x1(t){const e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function ZCe(t){const e=new Uint32Array(t);for(let n=0;n<t;++n)e[n]=n;return UV(e),e}function Tc(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function dE(t,e=i=>0,n,r=setTimeout){return new Promise((i,s)=>{let a=0;const o=()=>{if(t()){i();return}a++;const l=e(a);if(n!=null&&a>=n){s();return}r(o,l)};o()})}function PI(t,e){let n=1,r=-1;for(let s=0;s<t.length;++s)if(t[s]>=0)n*=t[s];else if(t[s]===-1){if(r!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${s}`);r=s}else if(t[s]<0)throw Error(`Shapes can not be < 0. Found ${t[s]} at dim ${s}`);if(r===-1){if(e>0&&e!==n)throw Error(`Size(${e}) must match the product of shape ${t}`);return t}if(n===0)throw Error(`Cannot infer the missing size in [${t}] when there are 0 elements`);if(e%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / ${n}`);const i=t.slice();return i[r]=e/n,i}function ut(t,e){const n=e.length;return t=t==null?e.map((r,i)=>i):[].concat(t),F(t.every(r=>r>=-n&&r<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${t}`),F(t.every(r=>Wc(r)),()=>`All values in axis param must be integers but got axis ${t}`),t.map(r=>r<0?n+r:r)}function Co(t,e){const n=[],r=[],i=e!=null&&Array.isArray(e)&&e.length===0,s=e==null||i?null:ut(e,t).sort();let a=0;for(let o=0;o<t.length;++o){if(s!=null){if(s[a]===o&&t[o]!==1)throw new Error(`Can't squeeze axis ${o} since its dim '${t[o]}' is not 1`);(s[a]==null||s[a]>o)&&t[o]===1&&(n.push(t[o]),r.push(o)),s[a]<=o&&a++}t[o]!==1&&(n.push(t[o]),r.push(o))}return{newShape:n,keptDims:r}}function Tn(t,e){let n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else throw new Error(`Unknown data type ${t}`);return n}function Cn(t,e){let n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else if(t==="string")n=new Array(e);else throw new Error(`Unknown data type ${t}`);return n}function HV(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${e} being uploaded contains ${r}.`)}}function qV(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function DI(t,e){return!(e==="complex64"||e==="float32"&&t!=="complex64"||e==="int32"&&t!=="float32"&&t!=="complex64"||e==="bool"&&t==="bool")}function nr(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}function b1(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error(`Unknown dtype ${t}`)}function KV(t){if(t==null)return 0;let e=0;return t.forEach(n=>e+=n.length),e}function la(t){return typeof t=="string"||t instanceof String}function XV(t){return typeof t=="boolean"}function YV(t){return typeof t=="number"}function jf(t){return Array.isArray(t)?jf(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":YV(t)?"float32":la(t)?"string":XV(t)?"bool":"float32"}function Sl(t){return!!(t&&t.constructor&&t.call&&t.apply)}function w1(t,e){for(let n=e;n<t;++n)if(t%n===0)return n;return t}function Me(t){const e=t.length;if(e<2)return[];const n=new Array(e-1);n[e-2]=t[e-1];for(let r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function QV(t,e,n,r=!1){const i=new Array;if(e.length===1){const s=e[0]*(r?2:1);for(let a=0;a<s;a++)i[a]=n[t+a]}else{const s=e[0],a=e.slice(1),o=a.reduce((l,c)=>l*c)*(r?2:1);for(let l=0;l<s;l++)i[l]=QV(t+l*o,a,n,r)}return i}function Ii(t,e,n=!1){if(t.length===0)return e[0];const r=t.reduce((i,s)=>i*s)*(n?2:1);if(r===0)return[];if(r!==e.length)throw new Error(`[${t}] does not match the input size ${e.length}${n?" for a complex tensor":""}.`);return QV(0,t,e,n)}function ob(t,e){const n=Gn(t,e);for(let r=0;r<n.length;r++)n[r]=1;return n}function Gn(t,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool")return new Uint8Array(t);throw new Error(`Unknown data type ${e}`)}function FI(t,e){const n=t.reduce((r,i)=>r*i,1);if(e==null||e==="float32")return Ii(t,new Float32Array(n));if(e==="int32")return Ii(t,new Int32Array(n));if(e==="bool")return Ii(t,new Uint8Array(n));throw new Error(`Unknown data type ${e}`)}function LI(t){t.forEach(e=>{F(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function Bs(t,e,n){if(e===0)return 0;if(e===1)return t[0];let r=t[t.length-1];for(let i=0;i<t.length-1;++i)r+=n[i]*t[i];return r}function yu(t,e,n){if(e===0)return[];if(e===1)return[t];const r=new Array(e);for(let i=0;i<r.length-1;++i)r[i]=Math.floor(t/n[i]),t-=r[i]*n[i];return r[r.length-1]=t,r}function Uc(t){return t&&t.then&&typeof t.then=="function"}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c4="tfjsflags";class ZV{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=JCe,this.populateURLFlags()}setPlatform(e,n){this.platform!=null&&(re().getBool("IS_TEST")||re().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=n}registerFlag(e,n,r){if(this.flagRegistry[e]={evaluationFn:n,setHook:r},this.urlFlags[e]!=null){const i=this.urlFlags[e];re().getBool("IS_TEST")||re().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${i}.`),this.set(e,i)}}async getAsync(e){return e in this.flags?this.flags[e]:(this.flags[e]=await this.evaluateFlag(e),this.flags[e])}get(e){if(e in this.flags)return this.flags[e];const n=this.evaluateFlag(e);if(Uc(n))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=n,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,n){if(this.flagRegistry[e]==null)throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=n,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(n)}evaluateFlag(e){if(this.flagRegistry[e]==null)throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const e=this.getQueryParams(this.global.location.search);c4 in e&&e[c4].split(",").forEach(r=>{const[i,s]=r.split(":");this.urlFlags[i]=t$e(i,s)})}}function JCe(t){const e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...r)=>(e$e(e,r[0],r[1]),r.join("="))),e}function e$e(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}function t$e(t,e){if(e=e.toLowerCase(),e==="true"||e==="false")return e==="true";if(`${+e}`===e)return+e;throw new Error(`Could not parse value flag value ${e} for flag ${t}.`)}function re(){return MI}let MI=null;function n$e(t){MI=t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let tC;function JV(){if(tC==null){let t;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else if(typeof self<"u")t=self;else throw new Error("Could not find a global object");tC=t}return tC}function r$e(){const t=JV();return t._tfGlobals==null&&(t._tfGlobals=new Map),t._tfGlobals}function BI(t,e){const n=r$e();if(n.has(t))return n.get(t);{const r=e();return n.set(t,r),n.get(t)}}const lb="Abs",Fm="Acos",Lm="Acosh",Vf="Add",cb="AddN",ub="All",db="Any",fb="ArgMax",pb="ArgMin",Mm="Asin",Bm="Asinh",zm="Atan",jm="Atanh",Vm="Atan2",hb="AvgPool",zI="AvgPoolGrad",mb="AvgPool3D",jI="AvgPool3DGrad",gb="BatchMatMul",yb="BatchToSpaceND",vb="Bincount",i$e="BroadcastTo",xb="BroadcastArgs",Wm="Cast",Um="Ceil",Gm="ClipByValue",bb="Complex",wb="ComplexAbs",Sb="Concat",kb="Conv2D",Cb="Conv2DBackpropFilter",$b="Conv2DBackpropInput",Eb="Conv3D",VI="Conv3DBackpropFilterV2",Tb="Conv3DBackpropInputV2",Hm="Cos",qm="Cosh",_b="Cumprod",Ib="Cumsum",Nb="CropAndResize",Rb="DenseBincount",Ob="DepthToSpace",Ab="DepthwiseConv2dNative",Pb="DepthwiseConv2dNativeBackpropFilter",Db="DepthwiseConv2dNativeBackpropInput",Fb="Diag",Lb="Dilation2D",fE="Dilation2DBackpropInput",pE="Dilation2DBackpropFilter",Km="RealDiv",Mb="Einsum",Xm="Elu",WI="EluGrad",Ym="Erf",Qm="Equal",Zm="Exp",Bb="ExpandDims",Jm="Expm1",zb="FFT",jb="Fill",Vb="FlipLeftRight",eg="Floor",tg="FloorDiv",Wb="FusedBatchNorm",Ub="GatherV2",Gb="GatherNd",ng="Greater",rg="GreaterEqual",ig="Identity",Hb="IFFT",qb="Imag",sg="IsFinite",ag="IsInf",og="IsNan",Kb="LeakyRelu",lg="Less",cg="LessEqual",Xb="LinSpace",ug="Log",dg="Log1p",fg="LogicalAnd",pg="LogicalNot",hg="LogicalOr",s$e="LogicalXor",a$e="LogSoftmax",o$e="LowerBound",Yb="LRN",UI="LRNGrad",Qb="Max",mg="Maximum",Zb="MaxPool",GI="MaxPoolGrad",Jb="MaxPool3D",HI="MaxPool3DGrad",ew="MaxPoolWithArgmax",tw="Mean",nw="Min",gg="Minimum",rw="MirrorPad",yg="Mod",iw="Multinomial",vg="Multiply",sw="Neg",xg="NotEqual",aw="NonMaxSuppressionV3",ow="NonMaxSuppressionV4",lw="NonMaxSuppressionV5",cw="OnesLike",uw="OneHot",dw="Pack",fw="PadV2",l$e="Pool",bg="Pow",pw="Prelu",hw="Prod",mw="RaggedGather",gw="RaggedTensorToTensor",yw="Range",vw="Real",wg="Reciprocal",Sg="Relu",xw="Reshape",bw="ResizeNearestNeighbor",qI="ResizeNearestNeighborGrad",ww="ResizeBilinear",KI="ResizeBilinearGrad",kg="Relu6",Sw="Reverse",Cg="Round",$g="Rsqrt",kw="ScatterNd",Cw="SearchSorted",$w="Select",Eg="Selu",Ew="Slice",Tg="Sin",_g="Sinh",Ig="Sign",Ng="Sigmoid",Rg="Softplus",Og="Sqrt",Tw="Sum",_w="SpaceToBatchND",Iw="SplitV",Nw="Softmax",Rw="SparseFillEmptyRows",Ow="SparseReshape",Aw="SparseSegmentMean",Pw="SparseSegmentSum",Dw="SparseToDense",Ag="SquaredDifference",XI="Square",Fw="StridedSlice",Lw="StringNGrams",Mw="StringSplit",Bw="StringToHashBucketFast",Pg="Sub",Dg="Tan",Fg="Tanh",Lg="Tile",zw="TopK",jw="Transform",Bd="Transpose",Vw="Unique",Ww="Unpack",Uw="UnsortedSegmentSum",c$e="UpperBound",Gw="ZerosLike",Mg="Step",S1="FromPixels",Hw="RotateWithOffset",nm="_FusedMatMul",rm="FusedConv2D",im="FusedDepthwiseConv2D";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Si(...t){re().getBool("IS_TEST")||re().getBool("PROD")||console.warn(...t)}function u$e(...t){re().getBool("IS_TEST")||re().getBool("PROD")||console.log(...t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const af=BI("kernelRegistry",()=>new Map),sm=BI("gradRegistry",()=>new Map);function k1(t,e){const n=YI(t,e);return af.get(n)}function hE(t){return sm.get(t)}function C1(t){const e=af.entries(),n=[];for(;;){const{done:r,value:i}=e.next();if(r)break;const[s,a]=i,[o]=s.split("_");o===t&&n.push(a)}return n}function qw(t){const{kernelName:e,backendName:n}=t,r=YI(e,n);af.has(r)&&Si(`The kernel '${e}' for backend '${n}' is already registered`),af.set(r,t)}function d$e(t){const{kernelName:e}=t;sm.has(e)&&re().getBool("DEBUG")&&Si(`Overriding the gradient for '${e}'`),sm.set(e,t)}function f$e(t,e){const n=YI(t,e);if(!af.has(n))throw new Error(`The kernel '${t}' for backend '${e}' is not registered`);af.delete(n)}function p$e(t){if(!sm.has(t))throw new Error(`The gradient '${t}' for backend is not registered`);sm.delete(t)}function h$e(t,e){C1(t).forEach(r=>{const i=Object.assign({},r,{backendName:e});qw(i)})}function YI(t,e){return`${e}_${t}`}var eW=Mt,ns=null;try{ns=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function Mt(t,e,n){this.low=t|0,this.high=e|0,this.unsigned=!!n}Mt.prototype.__isLong__;Object.defineProperty(Mt.prototype,"__isLong__",{value:!0});function gi(t){return(t&&t.__isLong__)===!0}Mt.isLong=gi;var u4={},d4={};function vu(t,e){var n,r,i;return e?(t>>>=0,(i=0<=t&&t<256)&&(r=d4[t],r)?r:(n=Bt(t,(t|0)<0?-1:0,!0),i&&(d4[t]=n),n)):(t|=0,(i=-128<=t&&t<128)&&(r=u4[t],r)?r:(n=Bt(t,t<0?-1:0,!1),i&&(u4[t]=n),n))}Mt.fromInt=vu;function rs(t,e){if(isNaN(t))return e?bc:is;if(e){if(t<0)return bc;if(t>=tW)return iW}else{if(t<=-p4)return ii;if(t+1>=p4)return rW}return t<0?rs(-t,e).neg():Bt(t%of|0,t/of|0,e)}Mt.fromNumber=rs;function Bt(t,e,n){return new Mt(t,e,n)}Mt.fromBits=Bt;var $1=Math.pow;function QI(t,e,n){if(t.length===0)throw Error("empty string");if(t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return is;if(typeof e=="number"?(n=e,e=!1):e=!!e,n=n||10,n<2||36<n)throw RangeError("radix");var r;if((r=t.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return QI(t.substring(1),e,n).neg();for(var i=rs($1(n,8)),s=is,a=0;a<t.length;a+=8){var o=Math.min(8,t.length-a),l=parseInt(t.substring(a,a+o),n);if(o<8){var c=rs($1(n,o));s=s.mul(c).add(rs(l))}else s=s.mul(i),s=s.add(rs(l))}return s.unsigned=e,s}Mt.fromString=QI;function Hs(t,e){return typeof t=="number"?rs(t,e):typeof t=="string"?QI(t,e):Bt(t.low,t.high,typeof e=="boolean"?e:t.unsigned)}Mt.fromValue=Hs;var f4=65536,m$e=1<<24,of=f4*f4,tW=of*of,p4=tW/2,h4=vu(m$e),is=vu(0);Mt.ZERO=is;var bc=vu(0,!0);Mt.UZERO=bc;var Ed=vu(1);Mt.ONE=Ed;var nW=vu(1,!0);Mt.UONE=nW;var mE=vu(-1);Mt.NEG_ONE=mE;var rW=Bt(-1,2147483647,!1);Mt.MAX_VALUE=rW;var iW=Bt(-1,-1,!0);Mt.MAX_UNSIGNED_VALUE=iW;var ii=Bt(0,-2147483648,!1);Mt.MIN_VALUE=ii;var Se=Mt.prototype;Se.toInt=function(){return this.unsigned?this.low>>>0:this.low};Se.toNumber=function(){return this.unsigned?(this.high>>>0)*of+(this.low>>>0):this.high*of+(this.low>>>0)};Se.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(ii)){var n=rs(e),r=this.div(n),i=r.mul(n).sub(this);return r.toString(e)+i.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var s=rs($1(e,6),this.unsigned),a=this,o="";;){var l=a.div(s),c=a.sub(l.mul(s)).toInt()>>>0,u=c.toString(e);if(a=l,a.isZero())return u+o;for(;u.length<6;)u="0"+u;o=""+u+o}};Se.getHighBits=function(){return this.high};Se.getHighBitsUnsigned=function(){return this.high>>>0};Se.getLowBits=function(){return this.low};Se.getLowBitsUnsigned=function(){return this.low>>>0};Se.getNumBitsAbs=function(){if(this.isNegative())return this.eq(ii)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,n=31;n>0&&!(e&1<<n);n--);return this.high!=0?n+33:n+1};Se.isZero=function(){return this.high===0&&this.low===0};Se.eqz=Se.isZero;Se.isNegative=function(){return!this.unsigned&&this.high<0};Se.isPositive=function(){return this.unsigned||this.high>=0};Se.isOdd=function(){return(this.low&1)===1};Se.isEven=function(){return(this.low&1)===0};Se.equals=function(e){return gi(e)||(e=Hs(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low};Se.eq=Se.equals;Se.notEquals=function(e){return!this.eq(e)};Se.neq=Se.notEquals;Se.ne=Se.notEquals;Se.lessThan=function(e){return this.comp(e)<0};Se.lt=Se.lessThan;Se.lessThanOrEqual=function(e){return this.comp(e)<=0};Se.lte=Se.lessThanOrEqual;Se.le=Se.lessThanOrEqual;Se.greaterThan=function(e){return this.comp(e)>0};Se.gt=Se.greaterThan;Se.greaterThanOrEqual=function(e){return this.comp(e)>=0};Se.gte=Se.greaterThanOrEqual;Se.ge=Se.greaterThanOrEqual;Se.compare=function(e){if(gi(e)||(e=Hs(e)),this.eq(e))return 0;var n=this.isNegative(),r=e.isNegative();return n&&!r?-1:!n&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1};Se.comp=Se.compare;Se.negate=function(){return!this.unsigned&&this.eq(ii)?ii:this.not().add(Ed)};Se.neg=Se.negate;Se.add=function(e){gi(e)||(e=Hs(e));var n=this.high>>>16,r=this.high&65535,i=this.low>>>16,s=this.low&65535,a=e.high>>>16,o=e.high&65535,l=e.low>>>16,c=e.low&65535,u=0,d=0,f=0,h=0;return h+=s+c,f+=h>>>16,h&=65535,f+=i+l,d+=f>>>16,f&=65535,d+=r+o,u+=d>>>16,d&=65535,u+=n+a,u&=65535,Bt(f<<16|h,u<<16|d,this.unsigned)};Se.subtract=function(e){return gi(e)||(e=Hs(e)),this.add(e.neg())};Se.sub=Se.subtract;Se.multiply=function(e){if(this.isZero())return is;if(gi(e)||(e=Hs(e)),ns){var n=ns.mul(this.low,this.high,e.low,e.high);return Bt(n,ns.get_high(),this.unsigned)}if(e.isZero())return is;if(this.eq(ii))return e.isOdd()?ii:is;if(e.eq(ii))return this.isOdd()?ii:is;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(h4)&&e.lt(h4))return rs(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,i=this.high&65535,s=this.low>>>16,a=this.low&65535,o=e.high>>>16,l=e.high&65535,c=e.low>>>16,u=e.low&65535,d=0,f=0,h=0,g=0;return g+=a*u,h+=g>>>16,g&=65535,h+=s*u,f+=h>>>16,h&=65535,h+=a*c,f+=h>>>16,h&=65535,f+=i*u,d+=f>>>16,f&=65535,f+=s*c,d+=f>>>16,f&=65535,f+=a*l,d+=f>>>16,f&=65535,d+=r*u+i*c+s*l+a*o,d&=65535,Bt(h<<16|g,d<<16|f,this.unsigned)};Se.mul=Se.multiply;Se.divide=function(e){if(gi(e)||(e=Hs(e)),e.isZero())throw Error("division by zero");if(ns){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var n=(this.unsigned?ns.div_u:ns.div_s)(this.low,this.high,e.low,e.high);return Bt(n,ns.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?bc:is;var r,i,s;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return bc;if(e.gt(this.shru(1)))return nW;s=bc}else{if(this.eq(ii)){if(e.eq(Ed)||e.eq(mE))return ii;if(e.eq(ii))return Ed;var a=this.shr(1);return r=a.div(e).shl(1),r.eq(is)?e.isNegative()?Ed:mE:(i=this.sub(e.mul(r)),s=r.add(i.div(e)),s)}else if(e.eq(ii))return this.unsigned?bc:is;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();s=is}for(i=this;i.gte(e);){r=Math.max(1,Math.floor(i.toNumber()/e.toNumber()));for(var o=Math.ceil(Math.log(r)/Math.LN2),l=o<=48?1:$1(2,o-48),c=rs(r),u=c.mul(e);u.isNegative()||u.gt(i);)r-=l,c=rs(r,this.unsigned),u=c.mul(e);c.isZero()&&(c=Ed),s=s.add(c),i=i.sub(u)}return s};Se.div=Se.divide;Se.modulo=function(e){if(gi(e)||(e=Hs(e)),ns){var n=(this.unsigned?ns.rem_u:ns.rem_s)(this.low,this.high,e.low,e.high);return Bt(n,ns.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))};Se.mod=Se.modulo;Se.rem=Se.modulo;Se.not=function(){return Bt(~this.low,~this.high,this.unsigned)};Se.and=function(e){return gi(e)||(e=Hs(e)),Bt(this.low&e.low,this.high&e.high,this.unsigned)};Se.or=function(e){return gi(e)||(e=Hs(e)),Bt(this.low|e.low,this.high|e.high,this.unsigned)};Se.xor=function(e){return gi(e)||(e=Hs(e)),Bt(this.low^e.low,this.high^e.high,this.unsigned)};Se.shiftLeft=function(e){return gi(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?Bt(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):Bt(0,this.low<<e-32,this.unsigned)};Se.shl=Se.shiftLeft;Se.shiftRight=function(e){return gi(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?Bt(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):Bt(this.high>>e-32,this.high>=0?0:-1,this.unsigned)};Se.shr=Se.shiftRight;Se.shiftRightUnsigned=function(e){if(gi(e)&&(e=e.toInt()),e&=63,e===0)return this;var n=this.high;if(e<32){var r=this.low;return Bt(r>>>e|n<<32-e,n>>>e,this.unsigned)}else return e===32?Bt(n,0,this.unsigned):Bt(n>>>e-32,0,this.unsigned)};Se.shru=Se.shiftRightUnsigned;Se.shr_u=Se.shiftRightUnsigned;Se.toSigned=function(){return this.unsigned?Bt(this.low,this.high,!1):this};Se.toUnsigned=function(){return this.unsigned?this:Bt(this.low,this.high,!0)};Se.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()};Se.toBytesLE=function(){var e=this.high,n=this.low;return[n&255,n>>>8&255,n>>>16&255,n>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]};Se.toBytesBE=function(){var e=this.high,n=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,n>>>24,n>>>16&255,n>>>8&255,n&255]};Mt.fromBytes=function(e,n,r){return r?Mt.fromBytesLE(e,n):Mt.fromBytesBE(e,n)};Mt.fromBytesLE=function(e,n){return new Mt(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,n)};Mt.fromBytesBE=function(e,n){return new Mt(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],n)};const sW=Tl(eW),g$e=nq({__proto__:null,default:sW},[eW]);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hc=sW||g$e;function Bg(t){return hc.fromString(t,!0,16)}const aW=Bg("c3a5c85c97cb3127"),fc=Bg("b492b66fbe98f273"),Sr=Bg("9ae16a3b2f90404f");function gE(t){return t.xor(t.shru(47))}function oW(t,e,n){const r=t.slice(e,e+n);return hc.fromBytes(Array.from(r),!0,!0)}function _t(t,e){return oW(t,e,8)}function m4(t,e){return oW(t,e,4)}function An(t,e){return e===0?t:t.shru(e).or(t.shl(64-e))}function hl(t,e,n=Bg("9ddfea08eb382d69")){let r=t.xor(e).mul(n);r=r.xor(r.shru(47));let i=e.xor(r).mul(n);return i=i.xor(i.shru(47)),i=i.mul(n),i}function y$e(t,e,n,r,i,s){i=i.add(t),s=An(s.add(i).add(r),21);const a=i;return i=i.add(e),i=i.add(n),s=s.add(An(i,44)),[i.add(r),s.add(a)]}function Bv(t,e,n,r){return y$e(_t(t,e),_t(t,e+8),_t(t,e+16),_t(t,e+24),n,r)}function v$e(t,e=t.length){if(e>=8){const n=Sr.add(e*2),r=_t(t,0).add(Sr),i=_t(t,e-8),s=An(i,37).mul(n).add(r),a=An(r,25).add(i).mul(n);return hl(s,a,n)}if(e>=4){const n=Sr.add(e*2),r=m4(t,0);return hl(r.shl(3).add(e),m4(t,e-4),n)}if(e>0){const n=t[0],r=t[e>>1],i=t[e-1],s=n+(r<<8),a=e+(i<<2);return gE(Sr.mul(s).xor(aW.mul(a))).mul(Sr)}return Sr}function x$e(t,e=t.length){const n=Sr.add(e*2),r=_t(t,0).mul(fc),i=_t(t,8),s=_t(t,e-8).mul(n),a=_t(t,e-16).mul(Sr);return hl(An(r.add(i),43).add(An(s,30)).add(a),r.add(An(i.add(Sr),18)).add(s),n)}function b$e(t,e=t.length){const n=Sr.add(e*2),r=_t(t,0).mul(Sr),i=_t(t,8),s=_t(t,e-8).mul(n),a=_t(t,e-16).mul(Sr),o=An(r.add(i),43).add(An(s,30)).add(a),l=hl(o,r.add(An(i.add(Sr),18)).add(s),n),c=_t(t,16).mul(n),u=_t(t,24),d=o.add(_t(t,e-32)).mul(n),f=l.add(_t(t,e-24)).mul(n);return hl(An(c.add(u),43).add(An(d,30)).add(f),c.add(An(u.add(r),18)).add(d),n)}function lW(t,e=t.length){const n=hc.fromNumber(81,!0);if(e<=32)return e<=16?v$e(t,e):x$e(t,e);if(e<=64)return b$e(t,e);let r=n,i=n.mul(fc).add(113),s=gE(i.mul(Sr).add(113)).mul(Sr),a=[hc.UZERO,hc.UZERO],o=[hc.UZERO,hc.UZERO];r=r.mul(Sr).add(_t(t,0));let l=0;const c=(e-1>>6)*64,u=c+(e-1&63)-63;do r=An(r.add(i).add(a[0]).add(_t(t,l+8)),37).mul(fc),i=An(i.add(a[1]).add(_t(t,l+48)),42).mul(fc),r=r.xor(o[1]),i=i.add(a[0]).add(_t(t,l+40)),s=An(s.add(o[0]),33).mul(fc),a=Bv(t,l,a[1].mul(fc),r.add(o[0])),o=Bv(t,l+32,s.add(o[1]),i.add(_t(t,l+16))),[s,r]=[r,s],l+=64;while(l!==c);const d=fc.add(s.and(255).shl(1));return l=u,o[0]=o[0].add(e-1&63),a[0]=a[0].add(o[0]),o[0]=o[0].add(a[0]),r=An(r.add(i).add(a[0]).add(_t(t,l+8)),37).mul(d),i=An(i.add(a[1]).add(_t(t,l+48)),42).mul(d),r=r.xor(o[1].mul(9)),i=i.add(a[0].mul(9).add(_t(t,l+40))),s=An(s.add(o[0]),33).mul(d),a=Bv(t,l,a[1].mul(d),r.add(o[0])),o=Bv(t,l+32,s.add(o[1]),i.add(_t(t,l+16))),[s,r]=[r,s],hl(hl(a[0],o[0],d).add(gE(i).mul(aW)).add(s),hl(a[1],o[1],d).add(r),d)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $o(t,e){return e==="string"?ya(t):Ll([t],e)}function w$e(t,e){return t instanceof Float32Array&&e==="float32"||t instanceof Int32Array&&e==="int32"||t instanceof Uint8Array&&e==="bool"}function Ll(t,e){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=uo(t)),re().getBool("DEBUG")&&HV(t,e),w$e(t,e))return t;if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool"){const n=new Uint8Array(t.length);for(let r=0;r<n.length;++r)Math.round(t[r])!==0&&(n[r]=1);return n}else throw new Error(`Unknown data type ${e}`)}function Jr(){return re().platform.now()}function S$e(t,e){return re().platform.fetch(t,e)}function ya(t,e="utf-8"){return e=e||"utf-8",re().platform.encode(t,e)}function fo(t,e="utf-8"){return e=e||"utf-8",re().platform.decode(t,e)}const k$e=Object.freeze(Object.defineProperty({__proto__:null,arraysEqual:$t,assert:F,assertNonNegativeIntegerDimensions:LI,assertNonNull:gu,assertShapesMatch:Kn,bytesFromStringArray:KV,bytesPerElement:b1,checkConversionForErrors:HV,clamp:wl,computeStrides:Me,createScalarValue:$o,createShuffledIndices:ZCe,decodeString:fo,distSquared:XCe,encodeString:ya,fetch:S$e,fingerPrint64:lW,flatten:uo,getArrayFromDType:Cn,getTypedArrayFromDType:Tn,hasEncodingLoss:DI,hexToLong:Bg,indexToLoc:yu,inferDtype:jf,inferFromImplicitShape:PI,isBoolean:XV,isFunction:Sl,isInt:Wc,isNumber:YV,isPromise:Uc,isScalarShape:YCe,isString:la,isTypedArray:nr,isValidDtype:qV,locToIndex:Bs,makeOnesTypedArray:ob,makeZerosNestedTypedArray:FI,makeZerosTypedArray:Gn,nearestDivisor:w1,nearestLargerEven:ab,now:Jr,parseAxisParam:ut,randUniform:KCe,repeatedTry:dE,rightPad:Tc,shuffle:UV,shuffleCombo:qCe,sizeFromShape:oe,sizeToSquarishShape:x1,squeezeShape:Co,sum:GV,swap:qa,tanh:QCe,toNestedArray:Ii,toTypedArray:Ll},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class C$e{constructor(e,n){this.backendTimer=e,this.logger=n,n==null&&(this.logger=new E$e)}profileKernel(e,n,r){let i;const s=()=>{i=r()};let a;const o=Jr();if(this.backendTimer.timerAvailable())a=this.backendTimer.time(s);else{s();for(const c of i)c.dataSync();a=Promise.resolve({kernelMs:Jr()-o})}if(re().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let c=0;c<i.length;c++){const u=i[c];u.data().then(d=>{$$e(d,u.dtype,e)})}return{kernelName:e,outputs:i,inputs:n,timeMs:a.then(c=>c.kernelMs),extraInfo:a.then(c=>c.getExtraProfileInfo!=null?c.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:n,outputs:r,timeMs:i,inputs:s,extraInfo:a}=e;r.forEach(o=>{Promise.all([o.data(),i,a]).then(l=>{this.logger.logKernelProfile(n,o,l[0],l[1],s,l[2])})})}}function $$e(t,e,n){if(e!=="float32")return!1;for(let r=0;r<t.length;r++){const i=t[r];if(isNaN(i)||!isFinite(i))return console.warn(`Found ${i} in the result of '${n}'`),!0}return!1}let E$e=class{logKernelProfile(e,n,r,i,s,a){const o=typeof i=="number"?Tc(`${i}ms`,9):i.error,l=Tc(e,25),c=n.rank,u=n.size,d=Tc(n.shape.toString(),14);let f="";for(const h in s){const g=s[h];if(g!=null){const y=g.shape||n.shape,x=y.length;f+=`${h}: ${x}D ${x>0?y:""} `}}console.log(`%c${l}	%c${o}	%c${c}D ${d}	%c${u}	%c${f}	%c${a}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T$e(t,e,n){const r={},i={};for(let l=0;l<e.length;l++)r[e[l].id]=!0;for(let l=0;l<t.length;l++){const c=t[l],u=c.inputs;for(const d in u){const f=u[d];let h=!1;for(let g=0;g<e.length;g++)if(r[f.id]){c.outputs.forEach(y=>r[y.id]=!0),h=!0,i[c.id]=!0;break}if(h)break}}const s={};s[n.id]=!0;const a={};for(let l=t.length-1;l>=0;l--){const c=t[l],u=c.inputs;for(let d=0;d<c.outputs.length;d++)if(s[c.outputs[d].id]){for(const f in u)s[u[f].id]=!0,a[c.id]=!0;break}}const o=[];for(let l=0;l<t.length;l++){const c=t[l];if(i[c.id]&&a[c.id]){const u={};for(const f in c.inputs){const h=c.inputs[f];r[h.id]&&(u[f]=h)}const d=Object.assign({},c);d.inputs=u,d.outputs=c.outputs,o.push(d)}}return o}function _$e(t,e,n,r){for(let i=e.length-1;i>=0;i--){const s=e[i],a=[];if(s.outputs.forEach(l=>{const c=t[l.id];c!=null?a.push(c):a.push(null)}),s.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${s.kernelName}.`);const o=s.gradient(a);for(const l in s.inputs){if(!(l in o))throw new Error(`Cannot backprop through input ${l}. Available gradients found: ${Object.keys(o)}.`);const c=n(()=>o[l]());if(c.dtype!=="float32")throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input ${l} must have 'float32' dtype, but has '${c.dtype}'`);const u=s.inputs[l];if(!$t(c.shape,u.shape))throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input '${l}' has shape '${c.shape}', which does not match the shape of the input '${u.shape}'`);if(t[u.id]==null)t[u.id]=c;else{const d=t[u.id];t[u.id]=r(d,c),d.dispose()}}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g4=20,zp=3,nC=7;function I$e(t,e,n,r){const i=Me(e),s=N$e(t,e,n,i),a=e.length,o=m0(t,e,n,i,s),l=["Tensor"];return r&&(l.push(`  dtype: ${n}`),l.push(`  rank: ${a}`),l.push(`  shape: [${e}]`),l.push("  values:")),l.push(o.map(c=>"    "+c).join(`
`)),l.join(`
`)}function N$e(t,e,n,r){const i=oe(e),s=r[r.length-1],a=new Array(s).fill(0),o=e.length,l=n==="complex64"?ih(t):t;if(o>1)for(let c=0;c<i/s;c++){const u=c*s;for(let d=0;d<s;d++)a[d]=Math.max(a[d],rh(l[u+d],0,n).length)}return a}function rh(t,e,n){let r;return Array.isArray(t)?r=`${parseFloat(t[0].toFixed(nC))} + ${parseFloat(t[1].toFixed(nC))}j`:la(t)?r=`'${t}'`:n==="bool"?r=cW(t):r=parseFloat(t.toFixed(nC)).toString(),Tc(r,e)}function cW(t){return t===0?"false":"true"}function m0(t,e,n,r,i,s=!0){const a=n==="complex64"?2:1,o=e[0],l=e.length;if(l===0){if(n==="complex64"){const y=ih(t);return[rh(y[0],0,n)]}return n==="bool"?[cW(t[0])]:[t[0].toString()]}if(l===1){if(o>g4){const x=zp*a;let v=Array.from(t.slice(0,x)),b=Array.from(t.slice((o-zp)*a,o*a));return n==="complex64"&&(v=ih(v),b=ih(b)),["["+v.map((S,k)=>rh(S,i[k],n)).join(", ")+", ..., "+b.map((S,k)=>rh(S,i[o-zp+k],n)).join(", ")+"]"]}return["["+(n==="complex64"?ih(t):Array.from(t)).map((x,v)=>rh(x,i[v],n)).join(", ")+"]"]}const c=e.slice(1),u=r.slice(1),d=r[0]*a,f=[];if(o>g4){for(let y=0;y<zp;y++){const x=y*d,v=x+d;f.push(...m0(t.slice(x,v),c,n,u,i,!1))}f.push("...");for(let y=o-zp;y<o;y++){const x=y*d,v=x+d;f.push(...m0(t.slice(x,v),c,n,u,i,y===o-1))}}else for(let y=0;y<o;y++){const x=y*d,v=x+d;f.push(...m0(t.slice(x,v),c,n,u,i,y===o-1))}const h=l===2?",":"";f[0]="["+f[0]+h;for(let y=1;y<f.length-1;y++)f[y]=" "+f[y]+h;let g=`,
`;for(let y=2;y<l;y++)g+=`
`;return f[f.length-1]=" "+f[f.length-1]+"]"+(s?"":g),f}function ih(t){const e=[];for(let n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class En{constructor(e,n,r){if(this.dtype=n,this.shape=e.slice(),this.size=oe(e),r!=null){const i=r.length;F(i===this.size,()=>`Length of values '${i}' does not match the size inferred by the shape '${this.size}'.`)}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||Cn(n,this.size),this.strides=Me(e)}set(e,...n){n.length===0&&(n=[0]),F(n.length===this.rank,()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`);const r=this.locToIndex(n);this.values[r]=e}get(...e){e.length===0&&(e=[0]);let n=0;for(const i of e){if(i<0||i>=this.shape[n]){const s=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(s)}n++}let r=e[e.length-1];for(let i=0;i<e.length-1;++i)r+=this.strides[i]*e[i];return this.values[r]}locToIndex(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];let n=e[e.length-1];for(let r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return n}indexToLoc(e){if(this.rank===0)return[];if(this.rank===1)return[e];const n=new Array(this.shape.length);for(let r=0;r<n.length-1;++r)n[r]=Math.floor(e/this.strides[r]),e-=n[r]*this.strides[r];return n[n.length-1]=e,n}get rank(){return this.shape.length}toTensor(){return Ns().makeTensor(this.values,this.shape,this.dtype)}}let Ns=null,dd=null;function R$e(t){Ns=t}function O$e(t){dd=t}class tn{constructor(e,n,r,i){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=n||"float32",this.size=oe(e),this.strides=Me(e),this.dataId=r,this.id=i,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return dd.buffer(this.shape,this.dtype,e)}bufferSync(){return dd.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return Ii(this.shape,e,this.dtype==="complex64")}arraySync(){return Ii(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const e=Ns().read(this.dataId);if(this.dtype==="string"){const n=await e;try{return n.map(r=>fo(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),Ns().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=Ns().readSync(this.dataId);if(this.dtype==="string")try{return e.map(n=>fo(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await Ns().read(this.dataId);return this.dtype==="string"?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(Ns().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return dd.print(this,e)}clone(){return this.throwIfDisposed(),dd.clone(this)}toString(e=!1){const n=this.dataSync();return I$e(n,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),dd.cast(this,e)}variable(e=!0,n,r){return this.throwIfDisposed(),Ns().makeVariable(this,e,n,r)}}Object.defineProperty(tn,Symbol.hasInstance,{value:t=>!!t&&t.data!=null&&t.dataSync!=null&&t.throwIfDisposed!=null});function A$e(){return BI("Tensor",()=>tn)}A$e();class am extends tn{constructor(e,n,r,i){super(e.shape,e.dtype,e.dataId,i),this.trainable=n,this.name=r}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!$t(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);Ns().disposeTensor(this),this.dataId=e.dataId,Ns().incRef(this,null)}dispose(){Ns().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(am,Symbol.hasInstance,{value:t=>t instanceof tn&&t.assign!=null&&t.assign instanceof Function});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var yE;(function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"})(yE||(yE={}));var vE;(function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"})(vE||(vE={}));var xE;(function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"})(xE||(xE={}));var bE;(function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"})(bE||(bE={}));var wE;(function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"})(wE||(wE={}));const P$e={float32:bE,int32:vE,bool:xE,complex64:wE};function Br(t,e){if(t==="string"||e==="string"){if(t==="string"&&e==="string")return"string";throw new Error(`Can not upcast ${t} with ${e}`)}return P$e[t][e]}function Kw(t){return Br(t,"int32")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nn(t,e){if(t.dtype===e.dtype)return[t,e];const n=Br(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function uW(t,e){F(t.dtype===e.dtype,()=>`The dtypes of the first(${t.dtype}) and second(${e.dtype}) input must match`)}function D$e(t,e){return e.some(n=>n.id===t.id)}function ZI(t){const e=[];return dW(t,e,new Set),e}function dW(t,e,n){if(t==null)return;if(t instanceof tn){e.push(t);return}if(!F$e(t))return;const r=t;for(const i in r){const s=r[i];n.has(s)||(n.add(s),dW(s,e,n))}}function F$e(t){return Array.isArray(t)||typeof t=="object"}const L$e=Object.freeze(Object.defineProperty({__proto__:null,assertTypesMatch:uW,getTensorsInContainer:ZI,isTensorInList:D$e,makeTypesMatch:nn},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rC(t){return t.kernelName!=null}class y4{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class lf{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new y4}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n];if(await this.initializeBackend(r).success){await this.setBackend(r);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:e,asyncInit:n}=this.initializeBackendsAndReturnBest();if(n)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){const{asyncInit:n}=this.initializeBackend(e);if(n)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,n,r=1){return e in this.registryFactory?(Si(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:n,priority:r},!0)}async setBackend(e){if(this.registryFactory[e]==null)throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;const{success:n,asyncInit:r}=this.initializeBackend(e);if(!(r?await n:n))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new C$e(this.backendInstance),!0}setupRegisteredKernels(){C1(this.backendName).forEach(n=>{n.setupFunc!=null&&n.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){C1(e).forEach(r=>{r.disposeFunc!=null&&r.disposeFunc(this.registry[e])})}initializeBackend(e){const n=this.registryFactory[e];if(n==null)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const r=n.factory();if(r&&!(r instanceof sb)&&typeof r.then=="function"){const i=++this.pendingBackendInitId,s=r.then(a=>i<this.pendingBackendInitId?!1:(this.registry[e]=a,this.pendingBackendInit=null,!0)).catch(a=>(i<this.pendingBackendInitId||(this.pendingBackendInit=null,Si(`Initialization of backend ${e} failed`),Si(a.stack||a.message)),!1));return this.pendingBackendInit=s,{success:s,asyncInit:!0}}else return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(r){return Si(`Initialization of backend ${e} failed`),Si(r.stack||r.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,n)=>this.registryFactory[n].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n],{success:i,asyncInit:s}=this.initializeBackend(r);if(s||i)return{name:r,asyncInit:s}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,n){const r=this.state.tensorInfo.get(n),i=r.backend,s=this.readSync(n),a=i.refCount(n);i.disposeData(n,!0),r.backend=e,e.move(n,s,r.shape,r.dtype,a),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,n){let r=null;if(n==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");n=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}let i;return this.scopedRun(()=>this.startScope(r),()=>this.endScope(i),()=>(i=n(),i instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),i))}scopedRun(e,n,r){e();try{const i=r();return n(),i}catch(i){throw n(),i}}nextTensorId(){return lf.nextTensorId++}nextVariableId(){return lf.nextVariableId++}clone(e){const n=G.runKernel(ig,{x:e}),r={x:e},i=a=>({x:()=>{const o="float32",l={x:a},c={dtype:o};return G.runKernel(Wm,l,c)}}),s=[];return this.addTapeNode(this.state.activeScope.name,r,[n],i,s,{}),n}runKernel(e,n,r){if(this.backendName==null&&this.backend,!(k1(e,this.backendName)!=null))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:n,attrs:r})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,n,r){const i=this.backend.numDataIds();let s=0;r.forEach(l=>{s+=l.dtype==="complex64"?3:1});const a=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],o=i-n-s-a;if(o>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${o} data ids) after running '${e}'`)}runKernelFunc(e){let n,r=[];const i=this.isTapeOn(),s=this.state.numBytes,a=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let o;this.backendName==null&&this.backend;let l;const c=rC(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(rC(e)){const{kernelName:g,inputs:y,attrs:x}=e;this.backendName==null&&this.backend;const v=k1(g,this.backendName);F(v!=null,()=>`Cannot find registered kernel '${g}' for backend '${this.backendName}'`),o=()=>{const b=this.backend.numDataIds();l=v.kernelFunc({inputs:y,attrs:x,backend:this.backend});const S=Array.isArray(l)?l:[l];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(g,b,S);const k=S.map($=>$.rank!=null?$:this.makeTensorFromTensorInfo($));if(i){const $=this.getTensorsForGradient(g,y,k);r=this.saveTensorsForBackwardMode($)}return k}}else{const{forwardFunc:g}=e,y=x=>{i&&(r=x.map(v=>this.keep(this.clone(v))))};o=()=>{const x=this.backend.numDataIds();l=this.tidy(()=>g(this.backend,y));const v=Array.isArray(l)?l:[l];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(c,x,v),v}}const{inputs:u,attrs:d}=e,f=rC(e)?null:e.backwardsFunc;let h;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?n=o():(h=this.profiler.profileKernel(c,u,()=>o()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(h),n=h.outputs)}),i&&this.addTapeNode(c,u,n,f,r,d),this.state.profiling&&this.state.activeProfile.kernels.push({name:c,bytesAdded:this.state.numBytes-s,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-a,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(u).map(g=>u[g]!=null?u[g].shape:null),outputShapes:n.map(g=>g.shape),kernelTimeMs:h.timeMs,extraInfo:h.extraInfo}),Array.isArray(l)?n:n[0]}saveTensorsForBackwardMode(e){return e.map(r=>this.keep(this.clone(r)))}getTensorsForGradient(e,n,r){const i=hE(e);if(i!=null){const s=i.inputsToSave||[],a=i.outputsToSave||[];let o;i.saveAllInputs?(F(Array.isArray(n),()=>"saveAllInputs is true, expected inputs to be an array."),o=Object.keys(n).map(c=>n[c])):o=s.map(c=>n[c]);const l=r.filter((c,u)=>a[u]);return o.concat(l)}return[]}makeTensor(e,n,r,i){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",i=i||this.backend;let s=e;r==="string"&&la(e[0])&&(s=e.map(l=>ya(l)));const a=i.write(s,n,r),o=new tn(n,r,a,this.nextTensorId());if(this.trackTensor(o,i),r==="string"){const l=this.state.tensorInfo.get(a),c=KV(s);this.state.numBytes+=c-l.bytes,l.bytes=c}return o}makeTensorFromDataId(e,n,r,i){r=r||"float32";const s={dataId:e,shape:n,dtype:r};return this.makeTensorFromTensorInfo(s,i)}makeTensorFromTensorInfo(e,n){const{dataId:r,shape:i,dtype:s}=e,a=new tn(i,s,r,this.nextTensorId());return this.trackTensor(a,n),a}makeVariable(e,n=!0,r,i){r=r||this.nextVariableId().toString(),i!=null&&i!==e.dtype&&(e=e.cast(i));const s=new am(e,n,r,this.nextTensorId());if(this.state.registeredVariables[s.name]!=null)throw new Error(`Variable with name ${s.name} was already registered`);return this.state.registeredVariables[s.name]=s,this.incRef(s,this.backend),s}trackTensor(e,n){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let r=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(r=e.size*b1(e.dtype)),this.state.numBytes+=r,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:n||this.backend,dtype:e.dtype,shape:e.shape,bytes:r})),e instanceof am||this.track(e)}incRef(e,n){this.trackTensor(e,n),this.backend.incRef(e.dataId)}removeDataId(e,n){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===n&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const n=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=n.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){const r=e.size*b1(e.dtype);this.state.numBytes-=r}n.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,n.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const n=this.state.registeredVariables[e];this.disposeVariable(n)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const n=this.state.numBytes,r=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(i=>i.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r;for(const i of this.state.activeProfile.kernels)i.kernelTimeMs=await i.kernelTimeMs,i.extraInfo=await i.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,n,r,i,s,a){const o={id:this.state.nextTapeNodeId++,kernelName:e,inputs:n,outputs:r,saved:s},l=hE(e);l!=null&&(i=l.gradFunc),i!=null&&(o.gradient=c=>(c=c.map((u,d)=>{if(u==null){const f=r[d],h=Gn(f.size,f.dtype);return this.makeTensor(h,f.shape,f.dtype)}return u}),i(c.length>1?c:c[0],s,a))),this.state.activeTape.push(o)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(n.name=e),this.state.scopeStack.push(n),this.state.activeScope=n}endScope(e){const n=ZI(e),r=new Set(n.map(s=>s.id));for(let s=0;s<this.state.activeScope.track.length;s++){const a=this.state.activeScope.track[s];!a.kept&&!r.has(a.id)&&a.dispose()}const i=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(s=>{!s.kept&&s.scopeId===i.id&&this.track(s)})}gradients(e,n,r,i=!1){if(F(n.length>0,()=>"gradients() received an empty list of xs."),r!=null&&r.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${r.dtype}'`);const s=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));F(s instanceof tn,()=>"The result y returned by f() must be a tensor.");const a=T$e(this.state.activeTape,n,s);if(!i&&a.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const o={};o[s.id]=r??M$e(s.shape),_$e(o,a,c=>this.tidy(c),B$e);const l=n.map(c=>o[c.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(c=>{for(const u of c.saved)u.dispose()}),this.state.activeTape=null),{value:s,grads:l}})}customGrad(e){return F(Sl(e),()=>"The f passed in customGrad(f) must be a function."),(...n)=>{F(n.every(o=>o instanceof tn),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let r;const i={};n.forEach((o,l)=>{i[l]=o});const s=(o,l)=>(r=e(...n,l),F(r.value instanceof tn,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),F(Sl(r.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),r.value),a=(o,l)=>{const c=r.gradFunc(o,l),u=Array.isArray(c)?c:[c];F(u.length===n.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),F(u.every(f=>f instanceof tn),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const d={};return u.forEach((f,h)=>{d[h]=()=>f}),d};return this.runKernelFunc({forwardFunc:s,backwardsFunc:a,inputs:i})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,n){return this.state.tensorInfo.get(e).backend.readToGPU(e,n)}async time(e){const n=Jr(),r=await this.backend.time(e);return r.wallMs=Jr()-n,r}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new y4;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}lf.nextTensorId=0;lf.nextVariableId=0;function M$e(t){const e=ob(oe(t),"float32");return G.makeTensor(e,t,"float32")}function fW(){const t=JV();if(t._tfengine==null){const e=new ZV(t);t._tfengine=new lf(e)}return n$e(t._tfengine.ENV),R$e(()=>t._tfengine),t._tfengine}const G=fW();function B$e(t,e){const n={a:t,b:e};return G.runKernel(Vf,n)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z$e(){return typeof navigator<"u"&&navigator!=null}let SE;function j$e(t){SE=t}function JI(t){if(SE!==void 0)return SE;if(t||z$e()){if(t||(t=navigator),t.product==="ReactNative")return!0;const e=t.userAgent||t.vendor||(typeof window<"u"?window.opera:"");if(!e){const n=t;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function eN(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}const V$e=Object.freeze(Object.defineProperty({__proto__:null,isBrowser:eN,isMobile:JI,mockIsMobile:j$e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fi=re();fi.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});fi.registerFlag("IS_BROWSER",()=>eN());fi.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");fi.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));fi.registerFlag("PROD",()=>!1);fi.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>fi.getBool("DEBUG"));fi.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);fi.registerFlag("IS_TEST",()=>!1);fi.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>!0);fi.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);fi.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);fi.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);fi.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wa(t,e){let n=t;if(nr(t))return e==="string"?[]:[t.length];if(!Array.isArray(t))return[];const r=[];for(;Array.isArray(n)||nr(n)&&e!=="string";)r.push(n.length),n=n[0];return Array.isArray(t)&&re().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&pW(t,r,[]),r}function pW(t,e,n){if(n=n||[],!Array.isArray(t)&&!nr(t)){F(e.length===0,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);return}F(e.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${t.length} elements`),F(t.length===e[0],()=>`Element arr[${n.join("][")}] should have ${e[0]} elements, but has ${t.length} elements`);const r=e.slice(1);for(let i=0;i<t.length;++i)pW(t[i],r,n.concat(i))}function v4(t,e,n,r){if(t!=="string_or_numeric"){if(t==null)throw new Error("Expected dtype cannot be null.");if(t!=="numeric"&&t!==e||t==="numeric"&&e==="string")throw new Error(`Argument '${n}' passed to '${r}' must be ${t} tensor, but got ${e} tensor`)}}function D(t,e,n,r="numeric"){if(t instanceof tn)return v4(r,t.dtype,e,n),t;let i=jf(t);if(i!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(i=r),v4(r,i,e,n),t==null||!nr(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){const l=t==null?"null":t.constructor.name;throw new Error(`Argument '${e}' passed to '${n}' must be a Tensor or TensorLike, but got '${l}'`)}const s=wa(t,i);!nr(t)&&!Array.isArray(t)&&(t=[t]);const o=i!=="string"?Ll(t,i):uo(t,[],!0);return G.makeTensor(o,s,i)}function om(t,e,n,r="numeric"){if(!Array.isArray(t))throw new Error(`Argument ${e} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return t.map((s,a)=>D(s,`${e}[${a}]`,n,r))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tN="__op";function U(t){const e=Object.keys(t);if(e.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${e.length} keys.`);let n=e[0];const r=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+tN;const i=(...s)=>{G.startScope(n);try{const a=r(...s);return Uc(a)&&console.error("Cannot return a Promise inside of tidy."),G.endScope(a),a}catch(a){throw G.endScope(null),a}};return Object.defineProperty(i,"name",{value:n,configurable:!0}),i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W$e(t,e){const n=D(t,"real","complex"),r=D(e,"imag","complex");Kn(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`);const i={real:n,imag:r};return G.runKernel(bb,i)}const po=U({complex_:W$e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ml(t,e,n,r){if(r==null&&(r=jf(t)),r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!nr(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){LI(e);const i=oe(e),s=oe(n);F(i===s,()=>`Based on the provided shape, [${e}], the tensor should have ${i} values but has ${s}`);for(let a=0;a<n.length;++a){const o=n[a],l=a===n.length-1?o!==oe(e.slice(a)):!0;F(n[a]===e[a]||!l,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${e}). `)}}return!nr(t)&&!Array.isArray(t)&&(t=[t]),e=e||n,t=r!=="string"?Ll(t,r):uo(t,[],!0),G.makeTensor(t,e,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zs(t,e,n){const r=wa(t,n);return Ml(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kE={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const E1=4;async function U$e(t,e){const n=[],r=[],i=Array.isArray(t)?t.map(a=>a.name):Object.keys(t);for(let a=0;a<i.length;++a){const o=i[a],l=Array.isArray(t)?t[a].tensor:t[o];if(l.dtype!=="float32"&&l.dtype!=="int32"&&l.dtype!=="bool"&&l.dtype!=="string"&&l.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${o}': ${l.dtype}`);const c={name:o,shape:l.shape,dtype:l.dtype};if(l.dtype==="string"){const u=new Promise(async d=>{const f=await l.bytes(),h=f.reduce((x,v)=>x+v.length,0)+E1*f.length,g=new Uint8Array(h);let y=0;for(let x=0;x<f.length;x++){const v=f[x],b=new Uint8Array(new Uint32Array([v.length]).buffer);g.set(b,y),y+=E1,g.set(v,y),y+=v.length}d(g)});r.push(u)}else r.push(l.data());e!=null&&(c.group=e),n.push(c)}const s=await Promise.all(r);return{data:G$e(s),specs:n}}function hW(t,e){const n={};let r,i=0;for(const s of e){const a=s.name,o=s.dtype,l=s.shape,c=oe(l);let u;if("quantization"in s){const d=s.quantization;if(d.dtype==="uint8"||d.dtype==="uint16"){if(!("min"in d&&"scale"in d))throw new Error(`Weight ${s.name} with quantization ${d.dtype} doesn't have corresponding metadata min and scale.`)}else if(d.dtype==="float16"){if(o!=="float32")throw new Error(`Weight ${s.name} is quantized with ${d.dtype} which only supports weights of type float32 not ${o}.`)}else throw new Error(`Weight ${s.name} has unknown quantization dtype ${d.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);const f=kE[d.dtype],h=t.slice(i,i+c*f),g=d.dtype==="uint8"?new Uint8Array(h):new Uint16Array(h);if(o==="float32")if(d.dtype==="uint8"||d.dtype==="uint16"){u=new Float32Array(g.length);for(let y=0;y<g.length;y++){const x=g[y];u[y]=x*d.scale+d.min}}else if(d.dtype==="float16")r===void 0&&(r=Q$e()),u=r(g);else throw new Error(`Unsupported quantization type ${d.dtype} for weight type float32.`);else if(o==="int32"){if(d.dtype!=="uint8"&&d.dtype!=="uint16")throw new Error(`Unsupported quantization type ${d.dtype} for weight type int32.`);u=new Int32Array(g.length);for(let y=0;y<g.length;y++){const x=g[y];u[y]=Math.round(x*d.scale+d.min)}}else throw new Error(`Unsupported dtype in weight '${a}': ${o}`);i+=c*f}else if(o==="string"){const d=oe(s.shape);u=[];for(let f=0;f<d;f++){const h=new Uint32Array(t.slice(i,i+E1))[0];i+=E1;const g=new Uint8Array(t.slice(i,i+h));u.push(g),i+=h}}else{const d=kE[o],f=t.slice(i,i+c*d);if(o==="float32")u=new Float32Array(f);else if(o==="int32")u=new Int32Array(f);else if(o==="bool")u=new Uint8Array(f);else if(o==="complex64"){u=new Float32Array(f);const h=new Float32Array(u.length/2),g=new Float32Array(u.length/2);for(let v=0;v<h.length;v++)h[v]=u[v*2],g[v]=u[v*2+1];const y=zs(h,l,"float32"),x=zs(g,l,"float32");n[a]=po(y,x),y.dispose(),x.dispose()}else throw new Error(`Unsupported dtype in weight '${a}': ${o}`);i+=c*d}o!=="complex64"&&(n[a]=zs(u,l,o))}return n}function G$e(t){if(t===null)throw new Error(`Invalid input value: ${JSON.stringify(t)}`);let e=0;const n=[];t.forEach(s=>{if(e+=s.byteLength,n.push(s.byteLength===s.buffer.byteLength?s:new s.constructor(s)),!(s instanceof Float32Array||s instanceof Int32Array||s instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${s.constructor.name}`)});const r=new Uint8Array(e);let i=0;return n.forEach(s=>{r.set(new Uint8Array(s.buffer),i),i+=s.byteLength}),r.buffer}const nN=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function x4(t){return nN?Buffer.byteLength(t):new Blob([t]).size}function H$e(t){if(nN)return Buffer.from(t).toString("base64");const e=new Uint8Array(t);let n="";for(let r=0,i=e.length;r<i;r++)n+=String.fromCharCode(e[r]);return btoa(n)}function q$e(t){if(nN){const r=Buffer.from(t,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}const e=atob(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;++r)n.set([e.charCodeAt(r)],r);return n.buffer}function rN(t){if(t.length===1)return t[0];let e=0;t.forEach(i=>{e+=i.byteLength});const n=new Uint8Array(e);let r=0;return t.forEach(i=>{n.set(new Uint8Array(i),r),r+=i.byteLength}),n.buffer}function b4(t){const e="/";for(t=t.trim();t.endsWith(e);)t=t.slice(0,t.length-1);const n=t.split(e);return n[n.length-1]}function mW(t,e){const n={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:e};return t.signature!=null&&(n.signature=t.signature),t.userDefinedMetadata!=null&&(n.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(n.modelInitializer=t.modelInitializer),t.trainingConfig!=null&&(n.trainingConfig=t.trainingConfig),n}function gW(t,e,n){const r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy};if(t.trainingConfig!=null&&(r.trainingConfig=t.trainingConfig),t.weightsManifest!=null){if(!e)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=e,r.weightData=n}return t.signature!=null&&(r.signature=t.signature),t.userDefinedMetadata!=null&&(r.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(r.modelInitializer=t.modelInitializer),r}async function iN(t,e){let n,r;return t.weightsManifest!=null&&([n,r]=await e(t.weightsManifest)),gW(t,n,r)}function zg(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:x4(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:x4(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:t.weightData.byteLength}}function yW(t){const e=[];for(const n of t)e.push(...n.weights);return e}function K$e(){const t=n=>{let r=n<<13,i=0;for(;!(r&8388608);)i-=8388608,r<<=1;return r&=-8388609,i+=947912704,r|i},e=new Uint32Array(2048);e[0]=0;for(let n=1;n<1024;n++)e[n]=t(n);for(let n=1024;n<2048;n++)e[n]=939524096+(n-1024<<13);return e}function X$e(){const t=new Uint32Array(64);t[0]=0,t[31]=1199570944,t[32]=2147483648,t[63]=3347054592;for(let e=1;e<31;e++)t[e]=e<<23;for(let e=33;e<63;e++)t[e]=2147483648+(e-32<<23);return t}function Y$e(){const t=new Uint32Array(64);for(let e=0;e<64;e++)t[e]=1024;return t[0]=t[32]=0,t}function Q$e(){const t=K$e(),e=X$e(),n=Y$e();return r=>{const i=new ArrayBuffer(4*r.length),s=new Uint32Array(i);for(let a=0;a<r.length;a++){const o=r[a],l=t[n[o>>10]+(o&1023)]+e[o>>10];s[a]=l}return new Float32Array(i)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Qt{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return Qt.instance==null&&(Qt.instance=new Qt),Qt.instance}static registerSaveRouter(e){Qt.getInstance().saveRouters.push(e)}static registerLoadRouter(e){Qt.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return Qt.getHandlers(e,"save")}static getLoadHandlers(e,n){return Qt.getHandlers(e,"load",n)}static getHandlers(e,n,r){const i=[];return(n==="load"?Qt.getInstance().loadRouters:Qt.getInstance().saveRouters).forEach(a=>{const o=a(e,r);o!==null&&i.push(o)}),i}}const Z$e=t=>Qt.registerSaveRouter(t),J$e=t=>Qt.registerLoadRouter(t),eEe=t=>Qt.getSaveHandlers(t),tEe=(t,e)=>Qt.getLoadHandlers(t,e);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CE="tensorflowjs",$E=1,wc="models_store",nl="model_info_store";function vW(){if(!re().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const t=typeof window>"u"?self:window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function EE(t){const e=t.result;e.createObjectStore(wc,{keyPath:"modelPath"}),e.createObjectStore(nl,{keyPath:"modelPath"})}class Gc{constructor(e){if(this.indexedDB=vW(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,n){return new Promise((r,i)=>{const s=this.indexedDB.open(CE,$E);s.onupgradeneeded=()=>EE(s),s.onsuccess=()=>{const a=s.result;if(n==null){const o=a.transaction(wc,"readonly"),c=o.objectStore(wc).get(this.modelPath);c.onsuccess=()=>{if(c.result==null)return a.close(),i(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));r(c.result.modelArtifacts)},c.onerror=u=>(a.close(),i(c.error)),o.oncomplete=()=>a.close()}else{const o=zg(n),l=a.transaction(nl,"readwrite");let c=l.objectStore(nl);const u=c.put({modelPath:this.modelPath,modelArtifactsInfo:o});let d;u.onsuccess=()=>{d=a.transaction(wc,"readwrite");const h=d.objectStore(wc).put({modelPath:this.modelPath,modelArtifacts:n,modelArtifactsInfo:o});h.onsuccess=()=>r({modelArtifactsInfo:o}),h.onerror=g=>{c=l.objectStore(nl);const y=c.delete(this.modelPath);y.onsuccess=()=>(a.close(),i(h.error)),y.onerror=x=>(a.close(),i(h.error))}},u.onerror=f=>(a.close(),i(u.error)),l.oncomplete=()=>{d==null?a.close():d.oncomplete=()=>a.close()}}},s.onerror=a=>i(s.error)})}}Gc.URL_SCHEME="indexeddb://";const xW=t=>re().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Gc.URL_SCHEME)?nEe(t.slice(Gc.URL_SCHEME.length)):null;Qt.registerSaveRouter(xW);Qt.registerLoadRouter(xW);function nEe(t){return new Gc(t)}function rEe(t){return t.startsWith(Gc.URL_SCHEME)?t.slice(Gc.URL_SCHEME.length):t}class iEe{constructor(){this.indexedDB=vW()}async listModels(){return new Promise((e,n)=>{const r=this.indexedDB.open(CE,$E);r.onupgradeneeded=()=>EE(r),r.onsuccess=()=>{const i=r.result,s=i.transaction(nl,"readonly"),o=s.objectStore(nl).getAll();o.onsuccess=()=>{const l={};for(const c of o.result)l[c.modelPath]=c.modelArtifactsInfo;e(l)},o.onerror=l=>(i.close(),n(o.error)),s.oncomplete=()=>i.close()},r.onerror=i=>n(r.error)})}async removeModel(e){return e=rEe(e),new Promise((n,r)=>{const i=this.indexedDB.open(CE,$E);i.onupgradeneeded=()=>EE(i),i.onsuccess=()=>{const s=i.result,a=s.transaction(nl,"readwrite"),o=a.objectStore(nl),l=o.get(e);let c;l.onsuccess=()=>{if(l.result==null)return s.close(),r(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const u=o.delete(e),d=()=>{c=s.transaction(wc,"readwrite");const h=c.objectStore(wc).delete(e);h.onsuccess=()=>n(l.result.modelArtifactsInfo),h.onerror=g=>r(l.error)};u.onsuccess=d,u.onerror=f=>(d(),s.close(),r(l.error))}},l.onerror=u=>(s.close(),r(l.error)),a.oncomplete=()=>{c==null?s.close():c.oncomplete=()=>s.close()}},i.onerror=s=>r(i.error)})}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ka="/",fd="tensorflowjs_models",bW="info",sEe="model_topology",aEe="weight_specs",oEe="weight_data",lEe="model_metadata";function wW(t){return{info:[fd,t,bW].join(Ka),topology:[fd,t,sEe].join(Ka),weightSpecs:[fd,t,aEe].join(Ka),weightData:[fd,t,oEe].join(Ka),modelMetadata:[fd,t,lEe].join(Ka)}}function SW(t){for(const e of Object.values(t))window.localStorage.removeItem(e)}function cEe(t){const e=t.split(Ka);if(e.length<3)throw new Error(`Invalid key format: ${t}`);return e.slice(1,e.length-1).join(Ka)}function uEe(t){return t.startsWith(Hc.URL_SCHEME)?t.slice(Hc.URL_SCHEME.length):t}class Hc{constructor(e){if(!re().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=wW(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),i=zg(e);try{this.LS.setItem(this.keys.info,JSON.stringify(i)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,H$e(e.weightData));const s={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(s)),{modelArtifactsInfo:i}}catch{throw SW(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${i.modelTopologyBytes}, weightSpecsBytes=${i.weightSpecsBytes}, weightDataBytes=${i.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const n={},r=JSON.parse(this.LS.getItem(this.keys.topology));if(r==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);n.modelTopology=r;const i=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(i==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);n.weightSpecs=i;const s=this.LS.getItem(this.keys.modelMetadata);if(s!=null){const o=JSON.parse(s);n.format=o.format,n.generatedBy=o.generatedBy,n.convertedBy=o.convertedBy,o.signature!=null&&(n.signature=o.signature),o.userDefinedMetadata!=null&&(n.userDefinedMetadata=o.userDefinedMetadata),o.modelInitializer!=null&&(n.modelInitializer=o.modelInitializer),o.trainingConfig!=null&&(n.trainingConfig=o.trainingConfig)}const a=this.LS.getItem(this.keys.weightData);if(a==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return n.weightData=q$e(a),n}}Hc.URL_SCHEME="localstorage://";const kW=t=>re().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Hc.URL_SCHEME)?dEe(t.slice(Hc.URL_SCHEME.length)):null;Qt.registerSaveRouter(kW);Qt.registerLoadRouter(kW);function dEe(t){return new Hc(t)}class fEe{constructor(){F(re().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),F(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},n=fd+Ka,r=Ka+bW;for(let i=0;i<this.LS.length;++i){const s=this.LS.key(i);if(s.startsWith(n)&&s.endsWith(r)){const a=cEe(s);e[a]=JSON.parse(this.LS.getItem(s))}}return e}async removeModel(e){e=uEe(e);const n=wW(e);if(this.LS.getItem(n.info)==null)throw new Error(`Cannot find model at path '${e}'`);const r=JSON.parse(this.LS.getItem(n.info));return SW(n),r}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zd="://";class br{constructor(){this.managers={}}static getInstance(){return br.instance==null&&(br.instance=new br),br.instance}static registerManager(e,n){F(e!=null,()=>"scheme must not be undefined or null."),e.endsWith(zd)&&(e=e.slice(0,e.indexOf(zd))),F(e.length>0,()=>"scheme must not be an empty string.");const r=br.getInstance();F(r.managers[e]==null,()=>`A model store manager is already registered for scheme '${e}'.`),r.managers[e]=n}static getManager(e){const n=br.getInstance().managers[e];if(n==null)throw new Error(`Cannot find model manager for scheme '${e}'`);return n}static getSchemes(){return Object.keys(br.getInstance().managers)}}function g0(t){if(t.indexOf(zd)===-1)throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${br.getSchemes().join(",")}`);return{scheme:t.split(zd)[0],path:t.split(zd)[1]}}async function CW(t,e,n=!1){F(t!==e,()=>`Old path and new path are the same: '${t}'`);const r=Qt.getLoadHandlers(t);F(r.length>0,()=>`Copying failed because no load handler is found for source URL ${t}.`),F(r.length<2,()=>`Copying failed because more than one (${r.length}) load handlers for source URL ${t}.`);const i=r[0],s=Qt.getSaveHandlers(e);F(s.length>0,()=>`Copying failed because no save handler is found for destination URL ${e}.`),F(s.length<2,()=>`Copying failed because more than one (${r.length}) save handlers for destination URL ${e}.`);const a=s[0],o=g0(t).scheme,l=g0(t).path,c=o===g0(t).scheme,u=await i.load();n&&c&&await br.getManager(o).removeModel(l);const d=await a.save(u);return n&&!c&&await br.getManager(o).removeModel(l),d.modelArtifactsInfo}async function pEe(){const t=br.getSchemes(),e={};for(const n of t){const r=await br.getManager(n).listModels();for(const i in r){const s=n+zd+i;e[s]=r[i]}}return e}async function hEe(t){const e=g0(t);return br.getManager(e.scheme).removeModel(e.path)}async function mEe(t,e){return CW(t,e,!1)}async function gEe(t,e){return CW(t,e,!0)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yEe{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,n){return fetch(e,n)}now(){return performance.now()}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${n}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,n){return new TextDecoder(n).decode(e)}setTimeoutCustom(e,n){if(!window||!re().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(e,n);return}this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},n),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",r=>{if(r.source===window&&r.data.name===this.messageName){r.stopPropagation();const i=this.functionRefs[r.data.index];i(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}}if(re().get("IS_BROWSER")){re().setPlatform("browser",new yEe);try{br.registerManager(Hc.URL_SCHEME,new fEe)}catch{}try{br.registerManager(Gc.URL_SCHEME,new iEe)}catch{}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vEe={importFetch:()=>require("node-fetch")};let iC;class xEe{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(e,n){return re().global.fetch!=null?re().global.fetch(e,n):(iC==null&&(iC=vEe.importFetch()),iC(e,n))}now(){const e=process.hrtime();return e[0]*1e3+e[1]/1e6}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${n}`);return this.textEncoder.encode(e)}decode(e,n){return e.length===0?"":new this.util.TextDecoder(n).decode(e)}}re().get("IS_NODE")&&!re().get("IS_BROWSER")&&re().setPlatform("node",new xEe);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qe(t,e="float32",n){return e=e||"float32",LI(t),new En(t,e,n)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bEe(t,e){const n=D(t,"x","cast");if(!qV(e))throw new Error(`Failed to cast to unknown dtype ${e}`);if(e==="string"&&n.dtype!=="string"||e!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");const r={x:n},i={dtype:e};return G.runKernel(Wm,r,i)}const Ht=U({cast_:bEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wEe(t){const n={x:D(t,"x","clone","string_or_numeric")};return G.runKernel(ig,n)}const to=U({clone_:wEe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sN(t,e=!1){console.log(t.toString(e))}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fW();const SEe={buffer:qe,cast:Ht,clone:to,print:sN};O$e(SEe);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kEe="model",CEe=".json",$Ee=".weights.bin";function w4(t){return new Promise(e=>setTimeout(e)).then(t)}class qc{constructor(e){if(!re().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(qc.URL_SCHEME)&&(e=e.slice(qc.URL_SCHEME.length)),(e==null||e.length===0)&&(e=kEe),this.modelJsonFileName=e+CEe,this.weightDataFileName=e+$Ee}async save(e){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");const n=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const r=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],i=mW(e,r),s=window.URL.createObjectURL(new Blob([JSON.stringify(i)],{type:"application/json"})),a=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor;if(a.download=this.modelJsonFileName,a.href=s,await w4(()=>a.dispatchEvent(new MouseEvent("click"))),e.weightData!=null){const o=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;o.download=this.weightDataFileName,o.href=n,await w4(()=>o.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:zg(e)}}}}qc.URL_SCHEME="downloads://";class EEe{constructor(e){if(e==null||e.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${e}`);this.jsonFile=e[0],this.weightsFiles=e.slice(1)}async load(){return new Promise((e,n)=>{const r=new FileReader;r.onload=i=>{const s=JSON.parse(i.target.result),a=s.modelTopology;if(a==null){n(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));return}if(s.weightsManifest==null){n(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));return}if(this.weightsFiles.length===0){e({modelTopology:a});return}const l=iN(s,c=>this.loadWeights(c));e(l)},r.onerror=i=>n(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),r.readAsText(this.jsonFile)})}loadWeights(e){const n=[],r=[];for(const a of e)n.push(...a.weights),r.push(...a.paths);const i=this.checkManifestAndWeightFiles(e),s=r.map(a=>this.loadWeightsFile(a,i[a]));return Promise.all(s).then(a=>[n,rN(a)])}loadWeightsFile(e,n){return new Promise((r,i)=>{const s=new FileReader;s.onload=a=>{const o=a.target.result;r(o)},s.onerror=a=>i(`Failed to weights data from file of path '${e}'.`),s.readAsArrayBuffer(n)})}checkManifestAndWeightFiles(e){const n=[],r=this.weightsFiles.map(s=>b4(s.name)),i={};for(const s of e)s.paths.forEach(a=>{const o=b4(a);if(n.indexOf(o)!==-1)throw new Error(`Duplicate file basename found in weights manifest: '${o}'`);if(n.push(o),r.indexOf(o)===-1)throw new Error(`Weight file with basename '${o}' is not provided.`);i[a]=this.weightsFiles[r.indexOf(o)]});if(n.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${n.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return i}}const TEe=t=>re().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(qc.URL_SCHEME)?_Ee(t.slice(qc.URL_SCHEME.length)):null;Qt.registerSaveRouter(TEe);function _Ee(t="model"){return new qc(t)}function IEe(t){return new EEe(t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S4(t,e,n,r){a(t),n=n??0,r=r??1,o(n,r);let i=0;const s=l=>(l.then(c=>{const u=n+ ++i/t.length*(r-n);return e(u),c}),l);function a(l){F(l!=null&&Array.isArray(l)&&l.length>0,()=>"promises must be a none empty array")}function o(l,c){F(l>=0&&l<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${l}`),F(c>=0&&c<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${c}`),F(c>=l,()=>`startFraction must be no more than endFraction, but got startFraction ${l} and endFraction ${c}`)}return Promise.all(t.map(s))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function $W(t,e){e==null&&(e={});const n=e.fetchFunc==null?re().platform.fetch:e.fetchFunc,r=t.map(d=>n(d,e.requestInit,{isBinary:!0})),o=(e.onProgress==null?await Promise.all(r):await S4(r,e.onProgress,0,.5)).map(d=>d.arrayBuffer());return e.onProgress==null?await Promise.all(o):await S4(o,e.onProgress,.5,1)}async function NEe(t,e="",n,r){return EW(a=>$W(a,{requestInit:r}))(t,e,n)}function EW(t){return async(e,n="",r)=>{const i=e.map(()=>!1),s={},a=r!=null?r.map(()=>!1):[],o=[];if(e.forEach((h,g)=>{let y=0;h.weights.forEach(x=>{const v="quantization"in x?x.quantization.dtype:x.dtype,b=kE[v]*oe(x.shape),S=()=>{i[g]=!0,s[g]==null&&(s[g]=[]),s[g].push({manifestEntry:x,groupOffset:y,sizeBytes:b})};r!=null?r.forEach((k,$)=>{k===x.name&&(S(),a[$]=!0)}):S(),o.push(x.name),y+=b})}),!a.every(h=>h)){const h=r.filter((g,y)=>!a[y]);throw new Error(`Could not find weights in manifest with names: ${h.join(", ")}. 
Manifest JSON has weights with names: ${o.join(", ")}.`)}const l=i.reduce((h,g,y)=>(g&&h.push(y),h),[]),c=[];l.forEach(h=>{e[h].paths.forEach(g=>{const y=n+(n.endsWith("/")?"":"/")+g;c.push(y)})});const u=await t(c),d={};let f=0;return l.forEach(h=>{const g=e[h].paths.length;let y=0;for(let k=0;k<g;k++)y+=u[f+k].byteLength;const x=new ArrayBuffer(y),v=new Uint8Array(x);let b=0;for(let k=0;k<g;k++){const $=new Uint8Array(u[f+k]);v.set($,b),b+=$.byteLength}s[h].forEach(k=>{const $=x.slice(k.groupOffset,k.groupOffset+k.sizeBytes),T=hW($,[k.manifestEntry]);for(const _ in T)d[_]=T[_]}),f+=g}),d}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const REe="application/octet-stream",OEe="application/json";class aN{constructor(e,n){if(this.DEFAULT_METHOD="POST",n==null&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.onProgress=n.onProgress,this.weightUrlConverter=n.weightUrlConverter,n.fetchFunc!=null?(F(typeof n.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=n.fetchFunc):this.fetch=re().platform.fetch,F(e!=null&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&F(e.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`),this.path=e,n.requestInit!=null&&n.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{}}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);n.body=new FormData;const r=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],i=mW(e,r);n.body.append("model.json",new Blob([JSON.stringify(i)],{type:OEe}),"model.json"),e.weightData!=null&&n.body.append("model.weights.bin",new Blob([e.weightData],{type:REe}),"model.weights.bin");const s=await this.fetch(this.path,n);if(s.ok)return{modelArtifactsInfo:zg(e),responses:[s]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${s.status}.`)}async load(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let n;try{n=await e.json()}catch{let a=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?a+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":a+=" Please make sure the server is serving valid JSON for this request.",new Error(a)}const r=n.modelTopology,i=n.weightsManifest;if(r==null&&i==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return iN(n,s=>this.loadWeights(s))}async loadWeights(e){const n=Array.isArray(this.path)?this.path[1]:this.path,[r,i]=AEe(n),s=this.weightPathPrefix||r,a=yW(e),o=[],l=[];for(const u of e)for(const d of u.paths)this.weightUrlConverter!=null?l.push(this.weightUrlConverter(d)):o.push(s+d+i);this.weightUrlConverter&&o.push(...await Promise.all(l));const c=await $W(o,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});return[a,rN(c)]}}aN.URL_SCHEME_REGEX=/^https?:\/\//;function AEe(t){const e=t.lastIndexOf("/"),n=t.lastIndexOf("?"),r=t.substring(0,e),i=n>e?t.substring(n):"";return[r+"/",i]}function TE(t){return t.match(aN.URL_SCHEME_REGEX)!=null}const TW=(t,e)=>{if(typeof fetch>"u"&&(e==null||e.fetchFunc==null))return null;{let n=!0;if(Array.isArray(t)?n=t.every(r=>TE(r)):n=TE(t),n)return oN(t,e)}return null};Qt.registerSaveRouter(TW);Qt.registerLoadRouter(TW);function oN(t,e){return new aN(t,e)}function PEe(t,e){return oN(t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class sC{constructor(e){this.modelArtifacts=e}load(){return this.modelArtifacts}}class _W{constructor(e){this.saveHandler=e}save(e){return this.saveHandler(e)}}class DEe{constructor(e){e.load&&(this.load=()=>Promise.resolve(e.load())),e.save&&(this.save=n=>Promise.resolve(e.save(n)))}}function FEe(t,e,n,r){const i=arguments;return new DEe(IW(...i))}function IW(t,e,n,r){return arguments.length===1?t.modelTopology!=null||t.weightSpecs!=null?new sC(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new sC({modelTopology:t})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new sC({modelTopology:t,weightSpecs:e,weightData:n,trainingConfig:r}))}function LEe(t){return new _W(t)}function MEe(t){return new _W(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lN=Object.freeze(Object.defineProperty({__proto__:null,browserFiles:IEe,browserHTTPRequest:PEe,concatenateArrayBuffers:rN,copyModel:mEe,decodeWeights:hW,encodeWeights:U$e,fromMemory:FEe,fromMemorySync:IW,getLoadHandlers:tEe,getModelArtifactsForJSON:iN,getModelArtifactsForJSONSync:gW,getModelArtifactsInfoForJSON:zg,getSaveHandlers:eEe,getWeightSpecs:yW,http:oN,isHTTPScheme:TE,listModels:pEe,loadWeights:NEe,moveModel:gEe,registerLoadRouter:J$e,registerSaveRouter:Z$e,removeModel:hEe,weightsLoaderFactory:EW,withSaveHandler:LEe,withSaveHandlerSync:MEe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BEe(t,e,n=!1,r=!1){let i=D(t,"a","matMul"),s=D(e,"b","matMul");[i,s]=nn(i,s);const a={a:i,b:s},o={transposeA:n,transposeB:r};return G.runKernel(gb,a,o)}const gt=U({matMul_:BEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zEe(t,e,n=1,r=0,i="int32"){if(e<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${e}`);const a={indices:D(t,"indices","oneHot","int32")},o={dtype:i,depth:e,onValue:n,offValue:r};return G.runKernel(uw,a,o)}const T1=U({oneHot_:zEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jEe(){re().set("PROD",!0)}function VEe(){re().set("DEBUG",!0)}function WEe(){re().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function UEe(t){re().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(t+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function GEe(){G.disposeVariables()}function Ua(){return G}function HEe(){return G.memory()}function qEe(t){return G.profile(t)}function st(t,e){return G.tidy(t,e)}function sr(t){ZI(t).forEach(n=>n.dispose())}function ca(t){return G.keep(t)}function KEe(t){return G.time(t)}function XEe(t){return G.setBackend(t)}function YEe(){return G.ready()}function QEe(){return G.backendName}function ZEe(t){G.removeBackend(t)}function JEe(t){return G.findBackend(t)}function eTe(t){return G.findBackendFactory(t)}function cN(t,e,n=1){return G.registerBackend(t,e,n)}function tTe(){return G.backend}function nTe(t,e){re().setPlatform(t,e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rTe(t){const n={input:D(t,"input","imag")};return G.runKernel(qb,n)}const jg=U({imag_:rTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iTe(t){const n={x:D(t,"x","neg")};return G.runKernel(sw,n)}const va=U({neg_:iTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sTe(t){const n={input:D(t,"input","real")};return G.runKernel(vw,n)}const cf=U({real_:sTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aTe(t,e,n){const r=D(t,"x","transpose");if(e==null&&(e=r.shape.map((a,o)=>o).reverse()),F(r.rank===e.length,()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${e}.`),e.forEach(a=>{F(a>=0&&a<r.rank,()=>`All entries in 'perm' must be between 0 and ${r.rank-1} but got ${e}`)}),r.rank<=1)return r.clone();const i={x:r},s={perm:e};return r.dtype==="complex64"?st(()=>{let a=cf(r),o=jg(r);return a=G.runKernel(Bd,{x:a},s),o=G.runKernel(Bd,{x:o},s),n&&(o=va(o)),po(a,o)}):G.runKernel(Bd,i,s)}const lm=U({transpose_:aTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oTe(t,e,n){const r=D(t,"labels","confusionMatrix"),i=D(e,"predictions","confusionMatrix");F(n==null||n>0&&Number.isInteger(n),()=>`If provided, numClasses must be a positive integer, but got ${n}`),F(r.rank===1,()=>`Expected the rank of labels to be 1, but got ${r.rank}`),F(i.rank===1,()=>`Expected the rank of predictions to be 1, but got ${i.rank}`),F(r.shape[0]===i.shape[0],()=>`Mismatch in the number of examples: ${r.shape[0]} vs. ${i.shape[0]}. Labels and predictions should have the same number of elements.`),F(n>0&&Number.isInteger(n),()=>`numClasses is required to be a positive integer, but got ${n}`);const s=T1(Ht(r,"int32"),n),a=T1(Ht(i,"int32"),n),o=lm(s),l=gt(o,a);return Ht(l,"int32")}const lTe=U({confusionMatrix_:oTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cTe=Object.freeze(Object.defineProperty({__proto__:null,confusionMatrix:lTe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kc(t,e){const n=t.length,r=[];for(let i=0;i<n;i++){const s=n-1-i,a=t[s]||1;(e[e.length-1-i]||1)>1&&a===1&&r.unshift(s)}return r}function uN(t,e){const n=[];for(let r=0;r<e.length;r++){const i=t[t.length-r-1],s=e.length-r-1,a=e[s];(i==null||i===1&&a>1)&&n.unshift(s)}return n}function rt(t,e){const n=[],r=Math.max(t.length,e.length);for(let i=0;i<r;i++){let s=t[t.length-i-1];s==null&&(s=1);let a=e[e.length-i-1];if(a==null&&(a=1),s===1)n.unshift(a);else if(a===1)n.unshift(s);else if(s!==a){const o=`Operands could not be broadcast together with shapes ${t} and ${e}.`;throw Error(o)}else n.unshift(s)}return n}const uTe=Object.freeze(Object.defineProperty({__proto__:null,assertAndGetBroadcastShape:rt,getBroadcastDims:Kc,getReductionAxes:uN},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dN(t,e,n){if(gu(t),e!=null&&e.length!==3)throw new Error("tensor3d() requires shape to have three numbers");const r=wa(t,n);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Ml(t,e,r,n)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let rc;function NW(t,e=3){if(e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(t==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let n=!1,r=!1,i=!1,s=!1,a=!1,o=!1;if(t.data instanceof Uint8Array)n=!0;else if(typeof ImageData<"u"&&t instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement)i=!0;else if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement)s=!0;else if(t.getContext!=null)a=!0;else if(typeof ImageBitmap<"u"&&t instanceof ImageBitmap)o=!0;else throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${t.constructor.name}`);if(k1(S1,G.backendName)!=null){const g={pixels:t},y={numChannels:e};return G.runKernel(S1,g,y)}const[c,u]=i?[t.videoWidth,t.videoHeight]:[t.width,t.height];let d;if(a)d=t.getContext("2d").getImageData(0,0,c,u).data;else if(r||n)d=t.data;else if(s||i||o){if(rc==null)if(typeof document>"u")if(typeof OffscreenCanvas<"u"&&typeof OffscreenCanvasRenderingContext2D<"u")rc=new OffscreenCanvas(1,1).getContext("2d");else throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");else rc=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});rc.canvas.width=c,rc.canvas.height=u,rc.drawImage(t,0,0,c,u),d=rc.getImageData(0,0,c,u).data}let f;if(e===4)f=new Int32Array(d);else{const g=c*u;f=new Int32Array(g*e);for(let y=0;y<g;y++)for(let x=0;x<e;++x)f[y*e+x]=d[y*4+x]}return dN(f,[u,c,e],"int32")}function dTe(t){return t!=null&&t.data instanceof Uint8Array}function fTe(){return typeof window<"u"&&typeof ImageBitmap<"u"&&window.hasOwnProperty("createImageBitmap")}function pTe(t){return t!=null&&t.width!==0&&t.height!==0}function hTe(t){return fTe()&&!(t instanceof ImageBitmap)&&pTe(t)&&!dTe(t)}async function mTe(t,e=3){let n=null;if(re().getBool("WRAP_TO_IMAGEBITMAP")&&hTe(t)){let r;try{r=await createImageBitmap(t,{premultiplyAlpha:"none"})}catch{r=null}r!=null&&r.width===t.width&&r.height===t.height?n=r:n=t}else n=t;return NW(n,e)}async function RW(t,e){let n=D(t,"img","toPixels");if(!(t instanceof tn)){const c=n;n=Ht(c,"int32"),c.dispose()}if(n.rank!==2&&n.rank!==3)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${n.rank}.`);const[r,i]=n.shape.slice(0,2),s=n.rank===2?1:n.shape[2];if(s>4||s===2)throw new Error(`toPixels only supports depth of size 1, 3 or 4 but got ${s}`);if(n.dtype!=="float32"&&n.dtype!=="int32")throw new Error(`Unsupported type for toPixels: ${n.dtype}. Please use float32 or int32 tensors.`);const a=await n.data(),o=n.dtype==="float32"?255:1,l=new Uint8ClampedArray(i*r*4);for(let c=0;c<r*i;++c){const u=[0,0,0,255];for(let f=0;f<s;f++){const h=a[c*s+f];if(n.dtype==="float32"){if(h<0||h>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${h}.`)}else if(n.dtype==="int32"&&(h<0||h>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${h}.`);s===1?(u[0]=h*o,u[1]=h*o,u[2]=h*o):u[f]=h*o}const d=c*4;l[d+0]=Math.round(u[0]),l[d+1]=Math.round(u[1]),l[d+2]=Math.round(u[2]),l[d+3]=Math.round(u[3])}if(e!=null){e.width=i,e.height=r;const c=e.getContext("2d"),u=new ImageData(l,i,r);c.putImageData(u,0,0)}return n!==t&&n.dispose(),l}const OW=U({fromPixels_:NW}),gTe=Object.freeze(Object.defineProperty({__proto__:null,fromPixels:OW,fromPixelsAsync:mTe,toPixels:RW},Symbol.toStringTag,{value:"Module"}));function Xw(t,e){const n=t.shape.length,r=e.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if(e.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[r-1]} vs. ${n}`);if(oe(t.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${t.shape}.`);const i=e.shape,s=i[i.length-1];let a=1;for(let d=0;d<i.length-1;++d)a*=i[d];const o=t.shape,l=i.slice();l.pop();let c=1;for(let d=s;d<n;++d)c*=o[d],l.push(o[d]);const u=[...Me(t.shape).map(d=>d/c),1].slice(0,s);return[l,a,c,u]}const yTe=Object.freeze(Object.defineProperty({__proto__:null,prepareAndValidate:Xw},Symbol.toStringTag,{value:"Module"}));function fN(t,e,n){const r=e.rank>1?e.shape[e.rank-1]:1,i=e.rank>1?e.rank-1:1,s=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${e.shape}, shape: ${t}, sliceDim: ${r}, and batchDim: ${i}.`;if(n.rank<i)throw new Error(s+` update.rank < ${i}. `);if(t.length<r+(n.rank-i))throw new Error(s+` Output shape length < ${r+(n.rank-i)}`);if(n.rank!==i+t.length-r)throw new Error(s+` update.rank != ${i+t.length-r}`);for(let a=0;a<i;++a)if(n.shape[a]!==e.shape[a])throw new Error(s+` updates.shape[${a}] (${n.shape[a]}) != indices.shape[${a}] (${e.shape[a]}).`);for(let a=0;a<n.rank-i;++a)if(n.shape[a+i]!==t[a+r])throw new Error(s+` updates.shape[${a+i}] (${n.shape[a+i]}) != shape[${a+i}] (${t[a+i]})`)}function pN(t,e,n){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${e.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(n.length===0){if(e.size===0)throw new Error(`Indices specified for empty output. indices shape: ${e.shape}`);if(t.size===0)throw new Error(`Updates specified for empty output. updates shape: ${t.shape}`)}fN(n,e,t)}function Wf(t,e,n){const r=e.shape.length,i=r>1?e.shape[r-1]:1,s=n.length;let a=1;for(let d=i;d<s;++d)a*=n[d];const o=i<1?1:i,l=oe(e.shape)/o,c=[...Me(n.slice(0,i)),1],u=oe(n);return{sliceRank:i,numUpdates:l,sliceSize:a,strides:c,outputSize:u}}const vTe=Object.freeze(Object.defineProperty({__proto__:null,calculateShapes:Wf,validateInput:pN,validateUpdateShape:fN},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _E=-2,xTe=-1;function hN(t,e,n){const r=t.shape.length;F(r===e.length,()=>`Error in slice${r}D: Length of begin ${e} must match the rank of the array (${r}).`),F(r===n.length,()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`);for(let i=0;i<r;++i)F(e[i]+n[i]<=t.shape[i],()=>`Error in slice${r}D: begin[${i}] + size[${i}] (${e[i]+n[i]}) would overflow input.shape[${i}] (${t.shape[i]})`)}function bTe(t){const e=[];let n=0;for(;t>0;)t&1&&e.push(n),t/=2,n++;return e}function mN(t,e,n){const r=[];for(let i=0;i<t.length;i++)r[i]=Math.ceil((e[i]-t[i])/n[i]);return r}function AW(t,e,n,r){const i=[...t];for(let s=i.length;s<r.length;s++)i.push(1);for(let s=0;s<n;s++)s===0?i[e]=1:(i.splice(e,0,1),i.pop());return i}function PW(t,e,n){return n<=t?n:n-(e-1)}function DW(t,e){const n=[];for(let r=0;r<t;r++)n.push(e+r);return n}function wTe(t,e,n,r,i,s,a,o,l){const c=t.length;let u=new Array(c),d=new Array(c),f=new Array(c);if(e.length&&n>0){const h=e[0],g=n+1;u=FW(a,h,g,r,t),d=LW(o,h,g,i,t),f=AW(s,h,g,t)}else for(let h=0;h<c;h++)u[h]=BW(a,r,s,t,h,l),d[h]=zW(o,i,s,t,h,l),f[h]=MW(s,h,l);return{begin:u,end:d,strides:f}}function FW(t,e,n,r,i){const s=[...i],a=DW(n,e);for(let o=0;o<s.length;o++)if(a.indexOf(o)>-1)s[o]=0;else{const l=PW(e,n,o);let c=r[l];t&1<<l&&(c=0),s[o]=c}return s}function LW(t,e,n,r,i){const s=[...i],a=DW(n,e);for(let o=0;o<s.length;o++)if(a.indexOf(o)>-1)s[o]=Number.MAX_SAFE_INTEGER;else{const l=PW(e,n,o);let c=r[l];t&1<<l&&(c=Number.MAX_SAFE_INTEGER),s[o]=c}for(let o=0;o<s.length;o++){const l=i[o];s[o]<0&&(s[o]+=l),s[o]=wl(0,s[o],i[o])}return s}function MW(t,e,n){let r=t[e];return(n&1<<e||r==null)&&(r=1),r}function BW(t,e,n,r,i,s){let a=e[i];const o=n[i]||1;(t&1<<i||s&1<<i||a==null)&&(o>0?a=Number.MIN_SAFE_INTEGER:a=Number.MAX_SAFE_INTEGER);const l=r[i];return a<0&&(a+=l),a=wl(0,a,l-1),a}function zW(t,e,n,r,i,s){let a=e[i];const o=n[i]||1;(t&1<<i||s&1<<i||a==null)&&(o>0?a=Number.MAX_SAFE_INTEGER:a=Number.MIN_SAFE_INTEGER);const l=r[i];return a<0&&(a+=l),o>0?a=wl(0,a,l):a=wl(-1,a,l-1),a}function gN(t,e,n){let r=n.length;for(let i=0;i<n.length;i++)if(n[i]>1){r=i;break}for(let i=r+1;i<n.length;i++)if(e[i]>0||n[i]!==t[i])return!1;return!0}function yN(t,e){let n=t.length>0?t[t.length-1]:1;for(let r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}function vN(t,e,n){let r;const i=t.shape.length;typeof e=="number"?r=[e,...new Array(i-1).fill(0)]:e.length<i?r=e.concat(new Array(i-e.length).fill(0)):r=e.slice(),r.forEach(a=>{F(a!==-1,()=>"slice() does not support negative begin indexing.")});let s;return n==null?s=new Array(i).fill(-1):typeof n=="number"?s=[n,...new Array(i-1).fill(-1)]:n.length<i?s=n.concat(new Array(i-n.length).fill(-1)):s=n,s=s.map((a,o)=>a>=0?a:(F(a===-1,()=>`Negative size values should be exactly -1 but got ${a} for the slice() size at index ${o}.`),t.shape[o]-r[o])),[r,s]}function xN(t,e,n,r,i,s,a,o,l){let c;if(r==null?(c=new Array(e.length),c.fill(1)):c=r,a!=null&&a&a-1)throw new Error("Multiple ellipses in slice is not allowed.");let u=!1;const d={dims:c.length,numAddAxisAfterEllipsis:0,begin:e.slice(),end:n.slice(),strides:c.slice(),beginMask:i,endMask:s,ellipsisMask:a,newAxisMask:o,shrinkAxisMask:l};for(let S=0;S<d.dims;S++)u&&1<<S&o&&d.numAddAxisAfterEllipsis++,1<<S&a&&(u=!0);u||(d.ellipsisMask|=1<<d.dims,d.dims++);const f={dims:t.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};STe(d,f);let h=!0,g=!0,y=!0;const x=[],v=[];for(let S=0;S<t.length;++S){if(f.strides[S]===0)throw Error(`strides[${S}] must be non-zero`);const k=!!(f.shrinkAxisMask&1<<S),$=t[S];if($===-1){x.push(k?1:-1);continue}const T=[f.beginMask&1<<S,f.endMask&1<<S],_=[f.strides[S]>0?0:-1,f.strides[S]>0?$:$-1];if(k&&f.strides[S]<=0)throw Error("only stride 1 allowed on non-range indexing.");y=y&&f.strides[S]===1;const R=!!(f.beginMask&1<<S&&f.endMask&1<<S);if(f.beginValid&&f.endValid){if(k){const H=f.begin[S]<0?$+f.begin[S]:f.begin[S];if(f.begin[S]=H,f.end[S]=f.begin[S]+1,H<0||H>=$)throw Error(`slice index ${f.begin[S]} of dimension ${S} out of bounds.`)}else f.begin[S]=k4(f.begin[S],0,f.strides[S],$,T,_),f.end[S]=k4(f.end[S],1,f.strides[S],$,T,_);const B=f.strides[S]===1&&f.begin[S]===0&&f.end[S]===$;h=h&&B,g=g&&(S===0&&f.strides[S]===1||B)}else h=h&&f.strides[S]===1&&R,g=g&&(S===0&&f.strides[S]===1||R);let P,O=!1;if(f.beginValid&&f.endValid?(P=f.end[S]-f.begin[S],O=!0):k?(P=1,O=!0):R&&$>=0&&(f.strides[S]<0?P=-$:P=$,O=!0),O){let B;P===0||P<0!=f.strides[S]<0?B=0:B=Math.trunc(P/f.strides[S])+(P%f.strides[S]!==0?1:0),x.push(B)}else x.push(-1)}for(let S=0;S<f.finalShapeGatherIndices.length;++S){const k=f.finalShapeGatherIndices[S];k>=0?v.push(x[k]):k===_E&&v.push(1)}return{finalShapeSparse:v.filter((S,k)=>f.finalShapeGatherIndices[k]!==_E),finalShape:v,isIdentity:h,sliceDim0:g,isSimpleSlice:y,begin:f.begin,end:f.end,strides:f.strides}}function STe(t,e){e.beginMask=0,e.endMask=0,e.shrinkAxisMask=0;let n=0;e.beginValid=t.begin!=null,e.endValid=t.end!=null,e.begin=new Array(e.dims),e.end=new Array(e.dims),e.strides=new Array(e.dims),e.finalShapeGatherIndices=[],e.finalShapeGatherIndicesSparse=[],e.inputShapeGatherIndicesSparse=new Array(e.dims);for(let r=0;r<t.dims;r++)if(1<<r&t.ellipsisMask){const i=Math.min(e.dims-(t.dims-r)+1+t.numAddAxisAfterEllipsis,e.dims);for(;n<i;n++)e.begin[n]=0,e.end[n]=0,e.strides[n]=1,e.beginMask|=1<<n,e.endMask|=1<<n,e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(-1),e.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&t.newAxisMask)e.finalShapeGatherIndices.push(_E),e.finalShapeGatherIndicesSparse.push(-1);else{if(n===e.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${e.dims} dims, ${e.begin.length}.`);t.begin!=null&&(e.begin[n]=t.begin[r]),t.end!=null&&(e.end[n]=t.end[r]),e.strides[n]=t.strides[r],t.beginMask&1<<r&&(e.beginMask|=1<<n),t.endMask&1<<r&&(e.endMask|=1<<n),t.shrinkAxisMask&1<<r?(e.finalShapeGatherIndices.push(xTe),e.finalShapeGatherIndicesSparse.push(-1),e.shrinkAxisMask|=1<<n):(e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(r)),e.inputShapeGatherIndicesSparse[n]=r,n++}}function k4(t,e,n,r,i,s){if(i[e])return n>0?s[e]:s[e+1&1];{const a=t<0?r+t:t;return a<s[0]?s[0]:a>s[1]?s[1]:a}}const jW=Object.freeze(Object.defineProperty({__proto__:null,assertParamsValid:hN,computeFlatOffset:yN,computeOutShape:mN,getNormalizedAxes:wTe,isSliceContinous:gN,maskToAxes:bTe,parseSliceParams:vN,sliceInfo:xN,startForAxis:BW,startIndicesWithElidedDims:FW,stopForAxis:zW,stopIndicesWithElidedDims:LW,stridesForAxis:MW,stridesWithElidedDims:AW},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class VW{getClassName(){return this.constructor.className}static fromConfig(e,n){return new e(n)}}class Qo{constructor(){this.classNameMap={}}static getMap(){return Qo.instance==null&&(Qo.instance=new Qo),Qo.instance}static register(e){Qo.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function Bl(t){F(t.className!=null,()=>"Class being registered does not have the static className property defined."),F(typeof t.className=="string",()=>"className is required to be a string, but got type "+typeof t.className),F(t.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),Qo.register(t)}const kTe=Object.freeze(Object.defineProperty({__proto__:null,Serializable:VW,SerializationMap:Qo,registerClass:Bl},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CTe=.001,WW=.1;function $Te(t,e,n){return n==null&&(n=bN()),IE(t,e,(r,i)=>wN(r,i,n))}function bN(){return G.backend.floatPrecision()===32?CTe:WW}function IE(t,e,n){let r=!0;if((nr(t)||nr(e))&&(r=!1),nr(t)&&nr(e)&&(r=!0),r){const a=t.constructor.name,o=e.constructor.name;if(a!==o)throw new Error(`Arrays are of different type. Actual: ${a}. Expected: ${o}`)}if(Array.isArray(t)&&Array.isArray(e)){const a=wa(t),o=wa(e);if(!$t(a,o))throw new Error(`Arrays have different shapes. Actual: [${a}]. Expected: [${o}]`)}const i=nr(t)?t:uo(t),s=nr(e)?e:uo(e);if(i.length!==s.length)throw new Error(`Arrays have different lengths actual: ${i.length} vs expected: ${s.length}.
Actual:   ${i}.
Expected: ${s}.`);for(let a=0;a<s.length;++a){const o=i[a],l=s[a];if(!n(o,l))throw new Error(`Arrays differ: actual[${a}] = ${o}, expected[${a}] = ${l}.
Actual:   ${i}.
Expected: ${s}.`)}typeof expect<"u"&&expect().nothing()}function ETe(t,e){t().then(()=>e.fail(),()=>e()),typeof expect<"u"&&expect().nothing()}function TTe(t,e){const n=typeof e=="string"||typeof e=="number"||typeof e=="boolean"?[e]:e;return la(t)||la(t[0])||la(e)||la(e[0])?IE(t,n,(r,i)=>r==i):IE(t,e,(r,i)=>wN(r,i,0))}function _Te(t,e,n){if(n==null&&(n=bN()),!wN(t,e,n))throw new Error(`Numbers differ: actual === ${t}, expected === ${e}`);typeof expect<"u"&&expect().nothing()}function wN(t,e,n){return!isFinite(t)&&!isFinite(e)?!0:!(isNaN(t)||isNaN(e)||Math.abs(t-e)>n)}function ITe(t,e,n){for(let r=0;r<t.length;r++)if(t[r]<e||t[r]>n)throw new Error(`Value out of range:${t[r]} low: ${e}, high: ${n}`)}function NTe(t,e){const n=new Float32Array(t),r=new Float32Array(e);if(n.length!==r.length)throw new Error(`Expected ArrayBuffer to be of length ${r.length}, but it was ${n.length}`);for(let i=0;i<r.length;i++)if(n[i]!==r[i])throw new Error(`Expected ArrayBuffer value at ${i} to be ${r[i]} but got ${n[i]} instead`)}function UW(t){for(let e=0;e<t.length;e++){const n=t[e];Array.isArray(n)?UW(n):t[e]=ya(n)}return t}function RTe(t){const e=document.createElement("video");return"playsInline"in e&&(e.playsInline=!0),e.muted=!0,e.loop=!0,e.style.position="fixed",e.style.left="0px",e.style.top="0px",e.preload="auto",e.appendChild(t),new Promise(n=>{e.addEventListener("loadeddata",r=>n(e)),e.load()})}async function OTe(t){await t.play(),"requestVideoFrameCallback"in t&&await new Promise(e=>{t.requestVideoFrameCallback(e)})}const ATe=Object.freeze(Object.defineProperty({__proto__:null,TEST_EPSILON_FLOAT16:WW,createVideoElement:RTe,encodeStrings:UW,expectArrayBuffersEqual:NTe,expectArraysClose:$Te,expectArraysEqual:TTe,expectNumbersClose:_Te,expectPromiseToFail:ETe,expectValuesInRange:ITe,play:OTe,testEpsilon:bN},Symbol.toStringTag,{value:"Module"}));/** @license See the LICENSE file. */const PTe="3.21.0";/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DTe(t,e){let n=D(t,"a","add"),r=D(e,"b","add");[n,r]=nn(n,r);const i={a:n,b:r};return G.runKernel(Vf,i)}const Ve=U({add_:DTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FTe(t,e){let n=D(t,"a","floorDiv"),r=D(e,"b","floorDiv");[n,r]=nn(n,r);const i={a:n,b:r};return G.runKernel(tg,i)}const SN=U({floorDiv_:FTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LTe(t,e){let n=D(t,"a","div"),r=D(e,"b","div");if([n,r]=nn(n,r),n.dtype==="int32"&&r.dtype==="int32")return SN(n,r);const i={a:n,b:r},s={};return G.runKernel(Km,i,s)}const Nt=U({div_:LTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MTe(t,e){let n=D(t,"a","mul"),r=D(e,"b","mul");[n,r]=nn(n,r);const i={a:n,b:r};return G.runKernel(vg,i)}const ke=U({mul_:MTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BTe(t){const e=D(t,"x","abs");if(e.dtype==="complex64"){const n={x:e};return G.runKernel(wb,n)}else{const n={x:e};return G.runKernel(lb,n)}}const Zr=U({abs_:BTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zTe(t){const n={x:D(t,"x","acos")};return G.runKernel(Fm,n)}const GW=U({acos_:zTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jTe(t){const n={x:D(t,"x","acosh")};return G.runKernel(Lm,n)}const HW=U({acosh_:jTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VTe(t){F(Array.isArray(t),()=>"The argument passed to tf.addN() must be a list of tensors"),F(t.length>=1,()=>`Must pass at least one tensor to tf.addN(), but got ${t.length}`);const e=t.map((i,s)=>D(i,`tensors${s}`,"addN")),n=e[0];e.forEach(i=>{if(i.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),e.forEach(i=>{if(!$t(i.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});const r=e;return G.runKernel(cb,r)}const qW=U({addN_:VTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WTe(t,e=null,n=!1){const i={x:D(t,"x","all","bool")},s={axis:e,keepDims:n};return G.runKernel(ub,i,s)}const KW=U({all_:WTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UTe(t,e=null,n=!1){const i={x:D(t,"x","any","bool")},s={axis:e,keepDims:n};return G.runKernel(db,i,s)}const XW=U({any_:UTe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GTe(t,e=0){const r={x:D(t,"x","argMax")},i={axis:e};return G.runKernel(fb,r,i)}const YW=U({argMax_:GTe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HTe(t,e=0){const r={x:D(t,"x","argMin")},i={axis:e};return G.runKernel(pb,r,i)}const QW=U({argMin_:HTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qTe(t){const n={x:D(t,"x","asin")};return G.runKernel(Mm,n)}const ZW=U({asin_:qTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KTe(t){const n={x:D(t,"x","asinh")};return G.runKernel(Bm,n)}const JW=U({asinh_:KTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XTe(t){const n={x:D(t,"x","atan")};return G.runKernel(zm,n)}const e8=U({atan_:XTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YTe(t,e){let n=D(t,"a","atan2"),r=D(e,"b","atan2");[n,r]=nn(n,r);const i={a:n,b:r};return G.runKernel(Vm,i)}const t8=U({atan2_:YTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QTe(t){const n={x:D(t,"x","atanh")};return G.runKernel(jm,n)}const n8=U({atanh_:QTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vg(t,e,n,r,i="NHWC",s){const a=t[3],o=[...e,a],l=To(i);return Fn(t,o,n,s,r,null,null,l)}function gs(t,e,n,r,i,s,a="channelsLast"){const[o,l]=_1(e);let c;if(a==="channelsLast")c=[o,l,t[3],t[3]];else if(a==="channelsFirst")c=[o,l,t[1],t[1]];else throw new Error(`Unknown dataFormat ${a}`);return Fn(t,c,n,r,i,s,!1,a)}function Eo(t,e,n,r,i,s,a="NDHWC"){const[o,l,c]=NE(e);let u,d;if(a==="NDHWC")d="channelsLast",u=[o,l,c,t[4],t[4]];else if(a==="NCDHW")d="channelsFirst",u=[o,l,c,t[1],t[1]];else throw new Error(`Unknown dataFormat ${a}`);return zl(t,u,n,r,i,!1,d,s)}function Fn(t,e,n,r,i,s,a=!1,o="channelsLast"){let[l,c,u,d]=[-1,-1,-1,-1];if(o==="channelsLast")[l,c,u,d]=t;else if(o==="channelsFirst")[l,d,c,u]=t;else throw new Error(`Unknown dataFormat ${o}`);const[f,h,,g]=e,[y,x]=_1(n),[v,b]=_1(r),S=jd(f,v),k=jd(h,b),{padInfo:$,outHeight:T,outWidth:_}=e_e(i,c,u,y,x,S,k,s,o),R=a?g*d:g;let P;return o==="channelsFirst"?P=[l,R,T,_]:o==="channelsLast"&&(P=[l,T,_,R]),{batchSize:l,dataFormat:o,inHeight:c,inWidth:u,inChannels:d,outHeight:T,outWidth:_,outChannels:R,padInfo:$,strideHeight:y,strideWidth:x,filterHeight:f,filterWidth:h,effectiveFilterHeight:S,effectiveFilterWidth:k,dilationHeight:v,dilationWidth:b,inShape:t,outShape:P,filterShape:e}}function zl(t,e,n,r,i,s=!1,a="channelsLast",o){let[l,c,u,d,f]=[-1,-1,-1,-1,-1];if(a==="channelsLast")[l,c,u,d,f]=t;else if(a==="channelsFirst")[l,f,c,u,d]=t;else throw new Error(`Unknown dataFormat ${a}`);const[h,g,y,,x]=e,[v,b,S]=NE(n),[k,$,T]=NE(r),_=jd(h,k),R=jd(g,$),P=jd(y,T),{padInfo:O,outDepth:B,outHeight:H,outWidth:V}=t_e(i,c,u,d,v,b,S,_,R,P,o),K=s?x*f:x;let X;return a==="channelsFirst"?X=[l,K,B,H,V]:a==="channelsLast"&&(X=[l,B,H,V,K]),{batchSize:l,dataFormat:a,inDepth:c,inHeight:u,inWidth:d,inChannels:f,outDepth:B,outHeight:H,outWidth:V,outChannels:K,padInfo:O,strideDepth:v,strideHeight:b,strideWidth:S,filterDepth:h,filterHeight:g,filterWidth:y,effectiveFilterDepth:_,effectiveFilterHeight:R,effectiveFilterWidth:P,dilationDepth:k,dilationHeight:$,dilationWidth:T,inShape:t,outShape:X,filterShape:e}}function ZTe(t,e,n,r,i){r==null&&(r=kN(t,e,n));const s=t[0],a=t[1],o=_c((s-e+2*r)/n+1,i),l=_c((a-e+2*r)/n+1,i);return[o,l]}function JTe(t,e,n,r,i,s){i==null&&(i=kN(t,e,r));const a=t[0],o=t[1],l=t[2],c=_c((a-e+2*i)/r+1,s),u=_c((o-e+2*i)/r+1,s),d=_c((l-e+2*i)/r+1,s);return[c,u,d,n]}function kN(t,e,n,r=1){const i=jd(e,r);return Math.floor((t[0]*(n-1)-n+i)/2)}function _1(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function NE(t){return typeof t=="number"?[t,t,t]:t}function jd(t,e){return e<=1?t:t+(t-1)*(e-1)}function e_e(t,e,n,r,i,s,a,o,l){let c,u,d;if(typeof t=="number"){c={top:t,bottom:t,left:t,right:t,type:t===0?"VALID":"NUMBER"};const h=ZTe([e,n],s,r,t,o);u=h[0],d=h[1]}else if(t==="same"){u=Math.ceil(e/r),d=Math.ceil(n/i);const f=Math.max(0,(u-1)*r+s-e),h=Math.max(0,(d-1)*i+a-n),g=Math.floor(f/2),y=f-g,x=Math.floor(h/2),v=h-x;c={top:g,bottom:y,left:x,right:v,type:"SAME"}}else if(t==="valid")c={top:0,bottom:0,left:0,right:0,type:"VALID"},u=Math.ceil((e-s+1)/r),d=Math.ceil((n-a+1)/i);else if(typeof t=="object"){const f=l==="channelsLast"?t[1][0]:t[2][0],h=l==="channelsLast"?t[1][1]:t[2][1],g=l==="channelsLast"?t[2][0]:t[3][0],y=l==="channelsLast"?t[2][1]:t[3][1];c={top:f,bottom:h,left:g,right:y,type:f===0&&h===0&&g===0&&y===0?"VALID":"EXPLICIT"},u=_c((e-s+f+h)/r+1,o),d=_c((n-a+g+y)/i+1,o)}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:c,outHeight:u,outWidth:d}}function t_e(t,e,n,r,i,s,a,o,l,c,u){let d,f,h,g;if(typeof t=="number"){d={top:t,bottom:t,left:t,right:t,front:t,back:t,type:t===0?"VALID":"NUMBER"};const x=JTe([e,n,r,1],o,1,i,t,u);f=x[0],h=x[1],g=x[2]}else if(t==="same"){f=Math.ceil(e/i),h=Math.ceil(n/s),g=Math.ceil(r/a);const y=(f-1)*i+o-e,x=(h-1)*s+l-n,v=(g-1)*a+c-r,b=Math.floor(y/2),S=y-b,k=Math.floor(x/2),$=x-k,T=Math.floor(v/2),_=v-T;d={top:k,bottom:$,left:T,right:_,front:b,back:S,type:"SAME"}}else if(t==="valid")d={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},f=Math.ceil((e-o+1)/i),h=Math.ceil((n-l+1)/s),g=Math.ceil((r-c+1)/a);else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:d,outDepth:f,outHeight:h,outWidth:g}}function _c(t,e){if(!e)return Math.trunc(t);switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${e}`)}}function cm(t){const[e,n,r]=_1(t);return e===1&&n===1&&r===1}function lr(t,e){return cm(t)||cm(e)}function To(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${t}`)}function ys(t,e,n){if(n!=null){if(typeof e=="string")throw Error(`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);if(typeof e=="number")F(Wc(e),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);else if(typeof e=="object")e.forEach(r=>{r.forEach(i=>{F(Wc(i),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${i}.`)})});else throw Error(`Error in ${t}: Unknown padding parameter: ${e}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n_e(t,e){const r={x:D(t,"x","reshape","string_or_numeric")},i={shape:e};return G.runKernel(xw,r,i)}const fe=U({reshape_:n_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r_e(t,e,n,r,i){const s=D(t,"x","avgPool","float32"),a=1;F(lr(n,a),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`);let o=s,l=!1;s.rank===3&&(l=!0,o=fe(s,[1,s.shape[0],s.shape[1],s.shape[2]])),F(o.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${o.rank}.`),ys("avgPool",r,i);const c={x:o},u={filterSize:e,strides:n,pad:r,dimRoundingMode:i};let d=G.runKernel(hb,c,u);return d=Ht(d,s.dtype),l?fe(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const CN=U({avgPool_:r_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i_e(t,e,n,r,i,s="NDHWC"){const a=D(t,"x","avgPool3d","float32");let o=a,l=!1;a.rank===4&&(l=!0,o=fe(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),F(o.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${o.rank}.`),F(s==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${s}`),ys("avgPool3d",r,i);const c={x:o},u={filterSize:e,strides:n,pad:r,dimRoundingMode:i,dataFormat:s};let d=G.runKernel(mb,c,u);return d=Ht(d,o.dtype),l?fe(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const r8=U({avgPool3d_:i_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s_e(t,e=0){F(t.length>=1,()=>"Pass at least one tensor to concat");const n=om(t,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(s=>{if(s.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${s.dtype}. `)}),n.length===1)return to(n[0]);const r=n,i={axis:e};return G.runKernel(Sb,r,i)}const ar=U({concat_:s_e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a_e(t){const n={x:D(t,"x","sigmoid","float32")};return G.runKernel(Ng,n)}const Ic=U({sigmoid_:a_e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o_e(t,e,n){const r=D(t,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");const i={x:r},s={begin:e,size:n};return G.runKernel(Ew,i,s)}const kt=U({slice_:o_e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l_e(t){const n={x:D(t,"x","tanh","float32")};return G.runKernel(Fg,n)}const I1=U({tanh_:l_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c_e(t,e,n,r,i,s){const a=D(t,"forgetBias","basicLSTMCell"),o=D(e,"lstmKernel","basicLSTMCell"),l=D(n,"lstmBias","basicLSTMCell"),c=D(r,"data","basicLSTMCell"),u=D(i,"c","basicLSTMCell"),d=D(s,"h","basicLSTMCell"),f=ar([c,d],1),h=gt(f,o),g=Ve(h,l),y=g.shape[0],x=g.shape[1]/4,v=[y,x],b=kt(g,[0,0],v),S=kt(g,[0,x],v),k=kt(g,[0,x*2],v),$=kt(g,[0,x*3],v),T=Ve(ke(Ic(b),I1(S)),ke(u,Ic(Ve(a,k)))),_=ke(I1(T),Ic($));return[T,_]}const i8=U({basicLSTMCell_:c_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u_e(t,e,n){const r=D(t,"x","batchToSpaceND"),i=e.reduce((o,l)=>o*l);F(r.rank>=1+e.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${e.length}`),F(n.length===e.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${e.length}`),F(r.shape[0]%i===0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${i}`);const s={x:r},a={blockShape:e,crops:n};return G.runKernel(yb,s,a)}const $N=U({batchToSpaceND_:u_e});function d_e(t){let e;return t.rank===0||t.rank===1?e=fe(t,[1,1,1,t.size]):t.rank===2?e=fe(t,[1,1,t.shape[0],t.shape[1]]):t.rank===3?e=fe(t,[1,t.shape[0],t.shape[1],t.shape[2]]):e=t,e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f_e(t,e,n,r,i,s){s==null&&(s=.001);const a=D(t,"x","batchNorm"),o=D(e,"mean","batchNorm"),l=D(n,"variance","batchNorm");let c;i!=null&&(c=D(i,"scale","batchNorm"));let u;r!=null&&(u=D(r,"offset","batchNorm")),F(o.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),F(u==null||o.rank===u.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),F(c==null||o.rank===c.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const f={x:d_e(a),scale:c,offset:u,mean:o,variance:l},h={varianceEpsilon:s},g=G.runKernel(Wb,f,h);return fe(g,a.shape)}const Wg=U({batchNorm_:f_e});function p_e(t,e,n,r,i,s){const a=D(t,"x","batchNorm"),o=D(e,"mean","batchNorm"),l=D(n,"variance","batchNorm");let c;i!=null&&(c=D(i,"scale","batchNorm"));let u;return r!=null&&(u=D(r,"offset","batchNorm")),F(a.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${a.rank}.`),F(o.rank===2||o.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${o.rank}.`),F(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`),c!=null&&F(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${c.rank}.`),u!=null&&F(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${u.rank}.`),Wg(a,o,l,u,c,s)}const s8=U({batchNorm2d_:p_e});function h_e(t,e,n,r,i,s){const a=D(t,"x","batchNorm"),o=D(e,"mean","batchNorm"),l=D(n,"variance","batchNorm");let c;i!=null&&(c=D(i,"scale","batchNorm"));let u;return r!=null&&(u=D(r,"offset","batchNorm")),F(a.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${a.rank}.`),F(o.rank===3||o.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${o.rank}.`),F(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`),c!=null&&F(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${c.rank}.`),u!=null&&F(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${u.rank}.`),Wg(a,o,l,u,c,s)}const a8=U({batchNorm3d_:h_e});function m_e(t,e,n,r,i,s){const a=D(t,"x","batchNorm"),o=D(e,"mean","batchNorm"),l=D(n,"variance","batchNorm");let c;i!=null&&(c=D(i,"scale","batchNorm"));let u;return r!=null&&(u=D(r,"offset","batchNorm")),F(a.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${a.rank}.`),F(o.rank===4||o.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${o.rank}.`),F(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`),c!=null&&F(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${c.rank}.`),u!=null&&F(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${u.rank}.`),Wg(a,o,l,u,c,s)}const o8=U({batchNorm4d_:m_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g_e(t,e,n){const r=D(t,"x","bincount"),i=D(e,"weights","bincount");F(r.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),F(n>=0,()=>`size must be non-negative, but got ${n}.`),F(i.size===r.size||i.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${i.shape}.`);const s={x:r,weights:i},a={size:n};return G.runKernel(vb,s,a)}const EN=U({bincount_:g_e});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y_e(t,e){const n=D(t,"s0","broadcastArgs","int32"),r=D(e,"s1","broadcastArgs","int32");if(n.rank!==1)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${n.rank}`);if(r.rank!==1)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${r.rank}`);const i={s0:n,s1:r};return G.runKernel(xb,i)}const l8=U({broadcastArgs_:y_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v_e(t,e){let n=D(t,"broadcastTo","x");const r=n.shape;if(e.some(c=>!(c>0)||c%1!==0))throw new Error(`broadcastTo(): Invalid broadcast shape [${e}].`);if(e.length<n.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${n.rank}.`);if(e.length>n.rank){const c=n.shape.slice();for(;c.length<e.length;)c.unshift(1);n=fe(n,c)}const i=n.shape,s=Array.from(e);for(let c=e.length-1;c>=0;c--)if(i[c]===e[c])s[c]=1;else if(n.shape[c]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${e}].`);if(s.map((c,u)=>c>1?u:-1).filter(c=>c>=0).length===0)return to(n);const o={x:n},l={reps:s};return G.runKernel(Lg,o,l)}const Vd=U({broadcastTo_:v_e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x_e(t){const n={x:D(t,"x","ceil","float32")};return G.runKernel(Um,n)}const c8=U({ceil_:x_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uf(t,e,n){const r={shape:t,value:e,dtype:n};return G.runKernel(jb,{},r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b_e(t,e,n){const r=D(t,"x","clipByValue");if(F(e<=n,()=>`Error in clip: min (${e}) must be less than or equal to max (${n}).`),e===n)return Uf(r.shape,e,r.dtype);const i={x:r},s={clipValueMin:e,clipValueMax:n};return G.runKernel(Gm,i,s)}const u8=U({clipByValue_:b_e});function w_e(t){return ar(t,0)}const d8=U({concat1d_:w_e});function S_e(t,e){return ar(t,e)}const f8=U({concat2d_:S_e});function k_e(t,e){return ar(t,e)}const p8=U({concat3d_:k_e});function C_e(t,e){return ar(t,e)}const h8=U({concat4d_:C_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $_e(t,e,n,r,i="NHWC",s=[1,1],a){const o=D(t,"x","conv2d","float32"),l=D(e,"filter","conv2d","float32");let c=o,u=!1;o.rank===3&&(u=!0,c=fe(o,[1,o.shape[0],o.shape[1],o.shape[2]])),F(c.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${c.rank}.`),F(l.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),ys("conv2d",r,a);const d=i==="NHWC"?c.shape[3]:c.shape[1];F(d===l.shape[2],()=>`Error in conv2d: depth of input (${d}) must match input depth for filter ${l.shape[2]}.`),F(lr(n,s),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`);const f={x:c,filter:l},h={strides:n,pad:r,dataFormat:i,dilations:s,dimRoundingMode:a},g=G.runKernel(kb,f,h);return u?fe(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const Ug=U({conv2d_:$_e});function E_e(t,e,n,r,i="NWC",s=1,a){const o=D(t,"x","conv1d"),l=D(e,"filter","conv1d");let c=o,u=!1;o.rank===2&&(u=!0,c=fe(o,[1,o.shape[0],o.shape[1]])),F(c.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${c.rank}.`),F(l.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),ys("conv1d",r,a),F(c.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${c.shape[2]}) must match input depth for filter ${l.shape[1]}.`),F(lr(n,s),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${s}'`),F(i==="NWC",()=>`Error in conv1d: got dataFormat of ${i} but only NWC is currently supported.`);const d=fe(l,[1,l.shape[0],l.shape[1],l.shape[2]]),f=fe(c,[c.shape[0],1,c.shape[1],c.shape[2]]),x=Ug(f,d,[1,n],r,"NHWC",[1,s],a);return u?fe(x,[x.shape[2],x.shape[3]]):fe(x,[x.shape[0],x.shape[2],x.shape[3]])}const m8=U({conv1d_:E_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T_e(t,e,n,r,i,s="NHWC",a){F(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let o=t,l=e,c=!1;e.rank===3&&(c=!0,l=fe(e,[1,e.shape[0],e.shape[1],e.shape[2]]),o=[1,t[0],t[1],t[2]]),F(o.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${o.length}.`),F(l.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`),F(n.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);const u=s==="NHWC"?o[3]:o[1],d=s==="NHWC"?l.shape[3]:l.shape[1];F(u===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${u}) must match input depth for filter ${n.shape[2]}.`),F(d===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${d}) must match output depth for filter ${n.shape[3]}.`),ys("conv2dDerInput",i,a);const f={dy:l,filter:n},h={strides:r,pad:i,dataFormat:s,dimRoundingMode:a,inputShape:o},g=G.runKernel($b,f,h);return c?fe(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const g8=U({conv2DBackpropInput_:T_e});function __e(t,e,n,r,i,s){const a=D(t,"x","conv2dTranspose"),o=D(e,"filter","conv2dTranspose");return g8(n,a,o,r,i,"NHWC",s)}const y8=U({conv2dTranspose_:__e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I_e(t,e,n,r,i="NDHWC",s=[1,1,1]){const a=D(t,"x","conv3d"),o=D(e,"filter","conv3d");let l=a,c=!1;a.rank===4&&(c=!0,l=fe(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),F(l.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),F(o.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${o.rank}.`),F(l.shape[4]===o.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${o.shape[3]}.`),F(lr(n,s),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),F(i==="NDHWC",()=>`Error in conv3d: got dataFormat of ${i} but only NDHWC is currently supported.`);const u={x:l,filter:o},d={strides:n,pad:r,dataFormat:i,dilations:s},f=G.runKernel(Eb,u,d);return c?fe(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const v8=U({conv3d_:I_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N_e(t,e,n,r,i){F(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let s=t,a=e,o=!1;e.rank===4&&(o=!0,a=fe(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),s=[1,t[0],t[1],t[2],t[3]]);const l=s[4],c=a.shape[4];F(s.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${s.length}.`),F(a.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${a.rank}`),F(n.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),F(l===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${n.shape[3]}.`),F(c===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${c}) must match output depth for filter ${n.shape[4]}.`);const u={dy:a,filter:n},d={pad:i,strides:r,inputShape:s},f=G.runKernel(Tb,u,d);return o?fe(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const R_e=U({conv3DBackpropInput_:N_e});function O_e(t,e,n,r,i){const s=D(t,"x","conv3dTranspose"),a=D(e,"filter","conv3dTranspose");return R_e(n,s,a,r,i)}const x8=U({conv3dTranspose_:O_e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A_e(t){const n={x:D(t,"x","cos","float32")};return G.runKernel(Hm,n)}const b8=U({cos_:A_e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P_e(t){const n={x:D(t,"x","cosh","float32")};return G.runKernel(qm,n)}const w8=U({cosh_:P_e});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D_e(t,e=0,n=!1,r=!1){const s={x:D(t,"x","cumprod")},a={axis:e,exclusive:n,reverse:r};return G.runKernel(_b,s,a)}const S8=U({cumprod_:D_e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F_e(t,e=0,n=!1,r=!1){const s={x:D(t,"x","cumsum")},a={axis:e,exclusive:n,reverse:r};return G.runKernel(Ib,s,a)}const k8=U({cumsum_:F_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L_e(t,e,n,r=!1){const i=D(t,"x","denseBincount"),s=D(e,"weights","denseBincount");F(i.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${i.dtype}`),F(i.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${i.rank}.`),F(n>=0,()=>`size must be non-negative, but got ${n}.`),F(s.size===i.size||s.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${i.shape}, weights shape: ${s.shape}.`);const a={x:i,weights:s},o={size:n,binaryOutput:r};return G.runKernel(Rb,a,o)}const C8=U({denseBincount_:L_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M_e(t,e,n="NHWC"){const r=D(t,"x","depthToSpace","float32"),i=n==="NHWC"?r.shape[1]:r.shape[2],s=n==="NHWC"?r.shape[2]:r.shape[3],a=n==="NHWC"?r.shape[3]:r.shape[1];F(e>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${e}`),F(i*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${i} and ${e}  for depthToSpace with input shape
    ${r.shape}`),F(s*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${s} and ${e} for depthToSpace with input shape
        ${r.shape}`),F(a%(e*e)===0,()=>`Dimension size must be evenly divisible by ${e*e} but is ${a} for depthToSpace with input shape ${r.shape}`);const o={x:r},l={blockSize:e,dataFormat:n};return G.runKernel(Ob,o,l)}const $8=U({depthToSpace_:M_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B_e(t,e,n,r,i="NHWC",s=[1,1],a){const o=D(t,"x","depthwiseConv2d","float32"),l=D(e,"filter","depthwiseConv2d","float32");let c=o,u=!1;o.rank===3&&(u=!0,c=fe(o,[1,o.shape[0],o.shape[1],o.shape[2]])),F(c.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${c.rank}.`),F(l.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`);const d=i==="NHWC"?c.shape[3]:c.shape[1];F(d===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${d}) must match the inChannels dimension in filter ${l.shape[2]}.`),ys("depthwiseConv2d",r,a);const f={x:c,filter:l},h={strides:n,pad:r,dataFormat:i,dilations:s,dimRoundingMode:a},g=G.runKernel(Ab,f,h);return u?fe(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const Yw=U({depthwiseConv2d_:B_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z_e(t){const n={x:D(t,"x","diag")};return G.runKernel(Fb,n)}const E8=U({diag_:z_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j_e(t,e,n,r,i=[1,1],s="NHWC"){const a=D(t,"x","dilation2d"),o=D(e,"filter","dilation2d");F(a.rank===3||a.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${a.rank}.`),F(o.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${o.rank}.`),F(s==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${s}`);let l=a,c=!1;a.rank===3&&(l=fe(a,[1,a.shape[0],a.shape[1],a.shape[2]]),c=!0);const u={x:l,filter:o},d={strides:n,pad:r,dilations:i},f=G.runKernel(Lb,u,d);return c?fe(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const T8=U({dilation2d_:j_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V_e(t,e){let n=D(t,"a","equal","string_or_numeric"),r=D(e,"b","equal","string_or_numeric");[n,r]=nn(n,r),rt(n.shape,r.shape);const i={a:n,b:r};return G.runKernel(Qm,i)}const TN=U({equal_:V_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W_e(t,e,n){const r=D(e,"a","where"),i=D(n,"b","where"),s=D(t,"condition","where","bool"),a=rt(rt(s.shape,r.shape),i.shape),o=Vd(s,a),l=Vd(r,a),c=Vd(i,a),u={condition:o,t:l,e:c};return G.runKernel($w,u)}const Xc=U({where_:W_e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U_e(t){const n={x:D(t,"x","zerosLike")};return G.runKernel(Gw,n)}const di=U({zerosLike_:U_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G_e(t,e){let n=D(t,"a","div"),r=D(e,"b","div");[n,r]=nn(n,r);const i=Nt(n,r),s=di(i),a=TN(r,s);return Xc(a,s,i)}const _8=U({divNoNan_:G_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H_e(t,e){const n=D(t,"t1","dot"),r=D(e,"t2","dot");F((n.rank===1||n.rank===2)&&(r.rank===1||r.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`);const i=n.rank===1?n.size:n.shape[1],s=r.rank===1?r.size:r.shape[0];if(F(i===s,()=>`Error in dot: inner dimensions of inputs must match, but got ${i} and ${s}.`),n.rank===1&&r.rank===1){const a=fe(n,[1,-1]),o=fe(r,[-1,1]),l=gt(a,o);return fe(l,[])}else if(n.rank===1&&r.rank===2){const a=fe(n,[1,-1]),o=fe(r,[r.shape[0],r.shape[1]]),l=gt(a,o);return fe(l,[l.size])}else if(n.rank===2&&r.rank===1){const a=fe(r,[-1,1]),o=gt(n,a);return fe(o,[o.size])}else{const a=fe(r,[r.shape[0],r.shape[1]]);return gt(n,a)}}const I8=U({dot_:H_e});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q_e(t,...e){const n=e.map((i,s)=>D(i,`tensors${s}`,"einsum")),r={equation:t};return G.runKernel(Mb,n,r)}const N8=U({einsum_:q_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K_e(t){const n={x:D(t,"x","elu","float32")};return G.runKernel(Xm,n)}const _N=U({elu_:K_e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X_e(t){let e=D(t,"x","erf");F(e.dtype==="int32"||e.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),e.dtype==="int32"&&(e=Ht(e,"float32"));const n={x:e};return G.runKernel(Ym,n)}const R8=U({erf_:X_e});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IN(t,e){for(let n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function O8(t,e,n){const r=t.length+e.length,i=[];let s=0,a=0;for(let o=0;o<r;o++)n.indexOf(o)===-1?i.push(t[s++]):i.push(e[a++]);return i}function Xn(t,e){const n=[],r=t.length;for(let s=0;s<r;s++)e.indexOf(s)===-1&&n.push(t[s]);const i=e.map(s=>t[s]);return[n,i]}function _n(t,e){const n=e.map(r=>1);return O8(t,n,e)}function Yn(t,e,n){F(IN(e,n),()=>`${t} supports only inner-most axes for now. Got axes ${e} and rank-${n} input.`)}function fn(t,e){if(IN(t,e))return null;const n=[];for(let r=0;r<e;++r)t.indexOf(r)===-1&&n.push(r);return t.forEach(r=>n.push(r)),n}function Gg(t){return t.map((e,n)=>[n,e]).sort((e,n)=>e[1]-n[1]).map(e=>e[0])}function pn(t,e){const n=[];for(let r=e-t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y_e(t,e=null,n=!1){const i={x:D(t,"x","max")},s={reductionIndices:e,keepDims:n};return G.runKernel(Qb,i,s)}const Nc=U({max_:Y_e});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q_e(t,e=null,n=!1){const i={x:D(t,"x","min")},s={axis:e,keepDims:n};return G.runKernel(nw,i,s)}const N1=U({min_:Q_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z_e(t,e){let n=D(t,"base","pow"),r=D(e,"exp","pow");[n,r]=nn(n,r);const i={a:n,b:r};return G.runKernel(bg,i)}const uf=U({pow_:Z_e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tt(t,e){if((nr(t)&&e!=="string"||Array.isArray(t))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&nr(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Ml(t,[],[],e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J_e(t){const n={x:D(t,"x","sqrt","float32")};return G.runKernel(Og,n)}const Sa=U({sqrt_:J_e});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eIe(t){const e=D(t,"x","square"),n={};return G.runKernel("Square",{x:e},n)}const ls=U({square_:eIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tIe(t,e=null,n=!1){let r=D(t,"x","sum");r.dtype==="bool"&&(r=Ht(r,"int32"));const i={x:r},s={axis:e,keepDims:n};return G.runKernel(Tw,i,s)}const It=U({sum_:tIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nIe(t,e="euclidean",n=null,r=!1){t=D(t,"x","norm");const i=A8(t,e,n);let s=i.shape;if(r){const a=ut(n,t.shape);s=_n(i.shape,a)}return fe(i,s)}function A8(t,e,n=null){if(t.rank===0)return Zr(t);if(t.rank!==1&&n===null)return A8(fe(t,[-1]),e,n);if(t.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(e===1)return It(Zr(t),n);if(e===1/0)return Nc(Zr(t),n);if(e===-1/0)return N1(Zr(t),n);if(e==="euclidean"||e===2)return Sa(It(uf(Zr(t),tt(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}if(Array.isArray(n)&&n.length===2){if(e===1)return Nc(It(Zr(t),n[0]),n[1]-1);if(e===1/0)return Nc(It(Zr(t),n[1]),n[0]);if(e===-1/0)return N1(It(Zr(t),n[1]),n[0]);if(e==="fro"||e==="euclidean")return Sa(It(ls(t),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const Hg=U({norm_:nIe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rIe(t,e=null,n=!1){return Hg(t,"euclidean",e,n)}const P8=U({euclideanNorm_:rIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iIe(t){const n={x:D(t,"x","exp")};return G.runKernel(Zm,n)}const kl=U({exp_:iIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sIe(t,e=0){const n=D(t,"x","expandDims","string_or_numeric");F(e<=n.rank,()=>"Axis must be <= rank of the tensor");const r={input:n},i={dim:e};return G.runKernel(Bb,r,i)}const Ga=U({expandDims_:sIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aIe(t){const n={x:D(t,"x","expm1")};return G.runKernel(Jm,n)}const D8=U({expm1_:aIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oIe(t,e){const n=D(t,"x","tile","string_or_numeric");F(n.rank===e.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${e}.`);const r={x:n},i={reps:e};return G.runKernel(Lg,r,i)}const Wd=U({tile_:oIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lIe(t,e,n,r="float32"){e==null&&(e=t);const i=qe([t,e],r),s=t<=e?t:e;for(let o=0;o<s;++o)i.set(1,o,o);const a=fe(i.toTensor(),[t,e]);if(n==null)return a;if(n.length===1)return Wd(Ga(a,0),[n[0],1,1]);if(n.length===2)return Wd(Ga(Ga(a,0),0),[n[0],n[1],1,1]);if(n.length===3)return Wd(Ga(Ga(Ga(a,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}const NN=U({eye_:lIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cIe(t){const n={x:D(t,"x","floor","float32")};return G.runKernel(eg,n)}const RN=U({floor_:cIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uIe(t,e,n=0,r=0){const i=D(t,"x","gather"),s=D(e,"indices","gather","int32"),a={x:i,indices:s},o={axis:n,batchDims:r};return G.runKernel(Ub,a,o)}const ON=U({gather_:uIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dIe(t,e){let n=D(t,"a","greater","string_or_numeric"),r=D(e,"b","greater","string_or_numeric");[n,r]=nn(n,r),rt(n.shape,r.shape);const i={a:n,b:r};return G.runKernel(ng,i)}const qg=U({greater_:dIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fIe(t,e){let n=D(t,"a","greaterEqual","string_or_numeric"),r=D(e,"b","greaterEqual","string_or_numeric");[n,r]=nn(n,r),rt(n.shape,r.shape);const i={a:n,b:r};return G.runKernel(rg,i)}const AN=U({greaterEqual_:fIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pIe(t){const n={x:D(t,"x","isFinite")};return G.runKernel(sg,n)}const F8=U({isFinite_:pIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hIe(t){const n={x:D(t,"x","isInf")};return G.runKernel(ag,n)}const L8=U({isInf_:hIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mIe(t){const n={x:D(t,"x","isNaN")};return G.runKernel(og,n)}const M8=U({isNaN_:mIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gIe(t,e=.2){const r={x:D(t,"x","leakyRelu")},i={alpha:e};return G.runKernel(Kb,r,i)}const PN=U({leakyRelu_:gIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yIe(t,e){let n=D(t,"a","less","string_or_numeric"),r=D(e,"b","less","string_or_numeric");[n,r]=nn(n,r),rt(n.shape,r.shape);const i={a:n,b:r};return G.runKernel(lg,i)}const B8=U({less_:yIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vIe(t,e){let n=D(t,"a","lessEqual","string_or_numeric"),r=D(e,"b","lessEqual","string_or_numeric");[n,r]=nn(n,r),rt(n.shape,r.shape);const i={a:n,b:r};return G.runKernel(cg,i)}const Qw=U({lessEqual_:vIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z8(t,e,n){if(n<=0)throw new Error("The number of values should be positive.");const r={start:t,stop:e,num:n};return G.runKernel(Xb,{},r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xIe(t,e=5,n=1,r=1,i=.5){const s=D(t,"x","localResponseNormalization");F(s.rank===4||s.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${s.rank}.`),F(Wc(e),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${e}.`);let a=s,o=!1;s.rank===3&&(o=!0,a=fe(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const l={x:a},c={depthRadius:e,bias:n,alpha:r,beta:i},u=G.runKernel(Yb,l,c);return o?fe(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const j8=U({localResponseNormalization_:xIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bIe(t){const n={x:D(t,"x","log","float32")};return G.runKernel(ug,n)}const df=U({log_:bIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wIe(t){const n={x:D(t,"x","log1p")};return G.runKernel(dg,n)}const DN=U({log1p_:wIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SIe(t){return F(Sl(t),()=>"The f passed in grad(f) must be a function"),(e,n)=>{const r=D(e,"x","tf.grad","string_or_numeric"),i=n!=null?D(n,"dy","tf.grad"):null;return G.tidy(()=>{const{value:s,grads:a}=G.gradients(()=>t(r),[r],i);return i!=null&&Kn(s.shape,i.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),Zw(a),a[0]})}}function kIe(t){return F(Sl(t),()=>"The f passed in grads(f) must be a function"),(e,n)=>{F(Array.isArray(e),()=>"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s");const r=om(e,"args","tf.grads","string_or_numeric"),i=n!=null?D(n,"dy","tf.grads"):null;return G.tidy(()=>{const{value:s,grads:a}=G.gradients(()=>t(...r),r,i);return i!=null&&Kn(s.shape,i.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),Zw(a),a})}}function CIe(t){return F(Sl(t),()=>"The f passed in valueAndGrad(f) must be a function"),(e,n)=>{F(e instanceof tn,()=>"The x passed in valueAndGrad(f)(x) must be a tensor"),F(n==null||n instanceof tn,()=>"The dy passed in valueAndGrad(f)(x, dy) must be a tensor");const{grads:r,value:i}=G.gradients(()=>t(e),[e],n);return Zw(r),{grad:r[0],value:i}}}function $Ie(t){return F(Sl(t),()=>"The f passed in valueAndGrads(f) must be a function"),(e,n)=>{F(Array.isArray(e)&&e.every(i=>i instanceof tn),()=>"The args passed in valueAndGrads(f)(args) must be array of tensors"),F(n==null||n instanceof tn,()=>"The dy passed in valueAndGrads(f)(args, dy) must be a tensor");const r=G.gradients(()=>t(...e),e,n);return n!=null&&Kn(r.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),Zw(r.grads),r}}function V8(t,e){F(Sl(t),()=>"The f passed in variableGrads(f) must be a function"),F(e==null||Array.isArray(e)&&e.every(c=>c instanceof am),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=e!=null;if(!n){e=[];for(const c in G.registeredVariables)e.push(G.registeredVariables[c])}const r=n?e.filter(c=>!c.trainable):null,i=e.length;e=e.filter(c=>c.trainable),F(e.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${i} variables is trainable.`);const s=!0,{value:a,grads:o}=G.gradients(t,e,null,s);F(o.some(c=>c!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),F(a.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${a.rank} tensor`);const l={};return e.forEach((c,u)=>{o[u]!=null&&(l[c.name]=o[u])}),r!=null&&r.forEach(c=>l[c.name]=null),{value:a,grads:l}}function ka(t){return G.customGrad(t)}function Zw(t){if(t.filter(n=>n==null).length>0)throw new Error(`Cannot compute gradient of y=f(x) with respect to x. Make sure that
    the f you passed encloses all operations that lead from x to y.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EIe(t){const n={x:D(t,"x","softplus")};return G.runKernel(Rg,n)}const FN=U({softplus_:EIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TIe(t){const e=D(t,"x","logSigmoid");return ka(r=>({value:va(FN(va(r))),gradFunc:a=>ke(a,Ic(va(r)))}))(e)}const W8=U({logSigmoid_:TIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Ie(t,e){let n=D(t,"a","sub"),r=D(e,"b","sub");[n,r]=nn(n,r);const i={a:n,b:r};return G.runKernel(Pg,i)}const Je=U({sub_:_Ie});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IIe(t,e=-1){const n=D(t,"logits","logSoftmax");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${e}`);return ka((i,s)=>{const o=Nc(i,e,!0),l=Je(i,o),c=Je(Ht(l,"float32"),df(It(kl(l),e,!0)));return s([c]),{value:c,gradFunc:(d,f)=>{const[h]=f,g=!0,y=kl(h);return Je(d,ke(It(d,e,g),y))}}})(n)}const U8=U({logSoftmax_:IIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NIe(t,e=null,n=!1){const r=D(t,"x","logSumExp"),i=ut(e,r.shape),s=Nc(r,i,!0),a=Je(r,s),o=kl(a),l=It(o,i),c=df(l),u=Ve(fe(s,c.shape),c);if(n){const d=_n(u.shape,i);return fe(u,d)}return u}const LN=U({logSumExp_:NIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RIe(t,e){const n=D(t,"a","logicalAnd","bool"),r=D(e,"b","logicalAnd","bool");rt(n.shape,r.shape);const i={a:n,b:r};return G.runKernel(fg,i)}const um=U({logicalAnd_:RIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OIe(t){const n={x:D(t,"x","logicalNot","bool")};return G.runKernel(pg,n)}const MN=U({logicalNot_:OIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AIe(t,e){const n=D(t,"a","logicalOr","bool"),r=D(e,"b","logicalOr","bool");rt(n.shape,r.shape);const i={a:n,b:r};return G.runKernel(hg,i)}const BN=U({logicalOr_:AIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PIe(t,e){const n=D(t,"a","logicalXor","bool"),r=D(e,"b","logicalXor","bool");return rt(n.shape,r.shape),um(BN(t,e),MN(um(t,e)))}const G8=U({logicalXor_:PIe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zv=2147483648;function DIe(t,e,n="left"){const r=D(t,"sortedSequence","searchSorted"),i=D(e,"values","searchSorted"),s=r.shape[r.shape.length-1],a=i.shape[i.shape.length-1],o=fe(r,[-1,s]),l=fe(i,[-1,a]);if(o.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(o.shape[0]!==l.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(oe(l.shape)>=zv)throw new Error(`values tensor size must less than ${zv}`);if(o.shape[1]>=zv)throw new Error(`trailing dim_size must less than ${zv} for int32 output type, was ${o.shape[1]}`);const c={sortedSequence:o,values:l},u={side:n};return G.runKernel(Cw,c,u)}const Jw=U({searchSorted_:DIe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H8(t,e){return Jw(t,e,"left")}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FIe(t,e,n,r,i){const s=D(t,"x","maxPool"),a=1;let o=s,l=!1;s.rank===3&&(l=!0,o=fe(s,[1,s.shape[0],s.shape[1],s.shape[2]])),F(o.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${o.rank}.`),F(lr(n,a),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`),ys("maxPool",r,i);const c={x:o},u={filterSize:e,strides:n,pad:r,dimRoundingMode:i},d=G.runKernel(Zb,c,u);return l?fe(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const zN=U({maxPool_:FIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LIe(t,e=[1,1,1],n,r,i,s="NDHWC"){const a=D(t,"x","maxPool3d");let o=a,l=!1;a.rank===4&&(l=!0,o=fe(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),F(o.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${o.rank}.`),F(s==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${s}`),ys("maxPool3d",r,i);const c={x:o},u={filterSize:e,strides:n,pad:r,dimRoundingMode:i,dataFormat:s},d=G.runKernel(Jb,c,u);return l?fe(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const q8=U({maxPool3d_:LIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MIe(t,e,n,r,i=!1){const a={x:D(t,"x","maxPoolWithArgmax")},o={filterSize:e,strides:n,pad:r,includeBatchInIndex:i},l=G.runKernel(ew,a,o);return{result:l[0],indexes:l[1]}}const K8=U({maxPoolWithArgmax_:MIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BIe(t,e){let n=D(t,"a","maximum"),r=D(e,"b","maximum");[n,r]=nn(n,r),n.dtype==="bool"&&(n=Ht(n,"int32"),r=Ht(r,"int32")),rt(n.shape,r.shape);const i={a:n,b:r};return G.runKernel(mg,i)}const jN=U({maximum_:BIe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zIe(t,e=null,n=!1){const i={x:D(t,"x","mean")},s={axis:e,keepDims:n};return G.runKernel(tw,i,s)}const dm=U({mean_:zIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cl(t,e="float32"){if(e==="complex64"){const r=Cl(t,"float32"),i=Cl(t,"float32");return po(r,i)}const n=Gn(oe(t),e);return G.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rl(t,e="float32"){if(e==="complex64"){const r=rl(t,"float32"),i=Cl(t,"float32");return po(r,i)}const n=ob(oe(t),e);return G.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X8(t,e,{indexing:n="xy"}={}){if(n!=="xy"&&n!=="ij")throw new TypeError(`${n} is not a valid third argument to meshgrid`);if(t===void 0)return[];let r=D(t,"x","meshgrid",t instanceof tn?t.dtype:"float32");if(e===void 0)return[r];let i=D(e,"y","meshgrid",e instanceof tn?e.dtype:"float32");const s=oe(r.shape),a=oe(i.shape);return n==="xy"?(r=fe(r,[1,-1]),i=fe(i,[-1,1]),[gt(rl([a,1],r.dtype),r),gt(i,rl([1,s],i.dtype))]):(r=fe(r,[-1,1]),i=fe(i,[1,-1]),[gt(r,rl([1,a],r.dtype)),gt(rl([s,1],i.dtype),i)])}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jIe(t,e){let n=D(t,"a","minimum"),r=D(e,"b","minimum");[n,r]=nn(n,r),n.dtype==="bool"&&(n=Ht(n,"int32"),r=Ht(r,"int32")),rt(n.shape,r.shape);const i={a:n,b:r};return G.runKernel(gg,i)}const VN=U({minimum_:jIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VIe(t,e,n){F(n==="reflect"||n==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);const r=D(t,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");F(e.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${e.length}.`);const i=n==="reflect"?1:0;for(let o=0;o<r.rank;o++)F(e[o].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),F(e[o][0]>=0&&e[o][0]<=r.shape[o]-i&&e[o][1]>=0&&e[o][1]<=r.shape[o]-i,()=>`Padding in dimension ${o} cannot be greater than or equal to ${r.shape[o]-i} or less than 0 for input of shape ${r.shape}`);const s={paddings:e,mode:n},a={x:r};return G.runKernel(rw,a,s)}const Y8=U({mirrorPad_:VIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WIe(t,e){let n=D(t,"a","mod"),r=D(e,"b","mod");[n,r]=nn(n,r);const i={a:n,b:r};return G.runKernel(yg,i)}const Q8=U({mod_:WIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UIe(t,e=null,n=!1){t=D(t,"x","moments");const r=ut(e,t.shape),i=dm(t,r,n);let s=i.shape;n||(s=_n(i.shape,r));const a=ls(Je(Ht(t,"float32"),fe(i,s))),o=dm(a,r,n);return{mean:i,variance:o}}const Z8=U({moments_:UIe});function GIe(t,e,n,r){const i=D(e,"data","multiRNNCell"),s=om(n,"c","multiRNNCell"),a=om(r,"h","multiRNNCell");let o=i;const l=[];for(let d=0;d<t.length;d++){const f=t[d](o,s[d],a[d]);l.push(f[0]),l.push(f[1]),o=f[1]}const c=[],u=[];for(let d=0;d<l.length;d+=2)c.push(l[d]),u.push(l[d+1]);return[c,u]}const J8=U({multiRNNCell_:GIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HIe(t,e,n,r=!1){const i=D(t,"logits","multinomial"),s=i.size,a=i.rank;if(s<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${s}.`);if(a>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${a}`);n=n||Math.random();const l={logits:a===1?fe(i,[1,-1]):i},c={numSamples:e,seed:n,normalized:r},u=G.runKernel(iw,l,c);return a===1?fe(u,[u.size]):u}const eU=U({multinomial_:HIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qIe(t,e){let n=D(t,"a","notEqual","string_or_numeric"),r=D(e,"b","notEqual","string_or_numeric");[n,r]=nn(n,r),rt(n.shape,r.shape);const i={a:n,b:r};return G.runKernel(xg,i)}const WN=U({notEqual_:qIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KIe(t){const n={x:D(t,"x","onesLike")};return G.runKernel(cw,n)}const tU=U({onesLike_:KIe});function XIe(t,e){const n=D(t,"v1","outerProduct"),r=D(e,"v2","outerProduct");F(n.rank===1&&r.rank===1,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${n.rank} and ${r.rank}.`);const i=fe(n,[-1,1]),s=fe(r,[1,-1]);return gt(i,s)}const nU=U({outerProduct_:XIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YIe(t,e,n=0){const r=D(t,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const i={paddings:e,constantValue:n},s={x:r};return G.runKernel(fw,s,i)}const Gf=U({pad_:YIe});function QIe(t,e,n=0){return F(e.length===2,()=>"Invalid number of paddings. Must be length of 2."),Gf(t,[e],n)}const rU=U({pad1d_:QIe});function ZIe(t,e,n=0){return F(e.length===2&&e[0].length===2&&e[1].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Gf(t,e,n)}const iU=U({pad2d_:ZIe});function JIe(t,e,n=0){return F(e.length===3&&e[0].length===2&&e[1].length===2&&e[2].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Gf(t,e,n)}const sU=U({pad3d_:JIe});function eNe(t,e,n=0){return F(e.length===4&&e[0].length===2&&e[1].length===2&&e[2].length===2&&e[3].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Gf(t,e,n)}const aU=U({pad4d_:eNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tNe(t,e,n){const r=D(t,"x","spaceToBatchND");F(r.rank>=1+e.length,()=>`input rank ${r.rank} should be > than [blockShape] ${e.length}`),F(n.length===e.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${e.length}`),F(r.shape.reduce((a,o,l)=>l>0&&l<=e.length?a&&(o+n[l-1][0]+n[l-1][1])%e[l-1]===0:a,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${e.toString()}`);const i={x:r},s={blockShape:e,paddings:n};return G.runKernel(_w,i,s)}const UN=U({spaceToBatchND_:tNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nNe(t,e,n,r,i,s,a){i==null&&(i=[1,1]),s==null&&(s=1),r===0&&(r="valid");const o=D(t,"x","maxPool");let l=o,c=!1;o.rank===3&&(c=!0,l=fe(o,[1,o.shape[0],o.shape[1],o.shape[2]])),F(lr(s,i),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${s} and dilations '${i}'`);const u=gs(l.shape,e,s,i,r),d=[u.dilationHeight,u.dilationWidth];let f;r==="same"?f=iNe([u.filterHeight,u.filterWidth],d):f=[[0,0],[0,0]];const h=d[0]===1&&d[1]===1,[g,y]=rNe([u.inHeight,u.inWidth],d,f),x=h?r:"valid",v=h?l:UN(l,d,g),S=(n==="avg"?()=>CN(v,e,s,x,a):()=>zN(v,e,s,x,a))(),k=h?S:$N(S,d,y);return c?fe(k,[k.shape[1],k.shape[2],k.shape[3]]):k}function rNe(t,e,n){const r=n.map(u=>u[0]),i=n.map(u=>u[1]),s=t.concat(r,i),a=e.map((u,d)=>(u-s[d]%u)%u),o=i.map((u,d)=>u+a[d]),l=e.map((u,d)=>[r[d],o[d]]),c=e.map((u,d)=>[0,a[d]]);return[l,c]}function iNe(t,e){const r=t.map((a,o)=>a+(a-1)*(e[o]-1)).map(a=>a-1),i=r.map(a=>Math.floor(a/2)),s=r.map((a,o)=>a-i[o]);return r.map((a,o)=>[i[o],s[o]])}const oU=U({pool_:nNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sNe(t,e){const n=D(t,"x","prelu"),r=D(e,"alpha","prelu"),i={x:n,alpha:r};return G.runKernel(pw,i)}const GN=U({prelu_:sNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aNe(t,e=null,n=!1){let r=D(t,"x","prod");r.dtype==="bool"&&(r=Ht(r,"int32"));const i={x:r},s={axis:e,keepDims:n};return G.runKernel(hw,i,s)}const lU=U({prod_:aNe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oNe(t,e,n,r){const i=t.map((u,d)=>D(u,`tensors${d}`,"raggedGather","int32")),s=D(e,"paramsDenseValues","raggedGather"),a=D(n,"indices","raggedGather","int32"),o={paramsNestedSplits:i,paramsDenseValues:s,indices:a},l={outputRaggedRank:r},c=G.runKernel(mw,o,l);return{outputNestedSplits:c.slice(0,c.length-1),outputDenseValues:c[c.length-1]}}const cU=U({raggedGather_:oNe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lNe(t,e,n,r,i){const s=D(t,"shape","raggedTensorToTensor","int32"),a=D(e,"values","raggedTensorToTensor"),o=D(n,"defaultValue","raggedTensorToTensor",a.dtype),l=r.map((d,f)=>D(d,`tensors${f}`,"raggedTensorToTensor","int32")),c={shape:s,values:a,defaultValue:o,rowPartitionTensors:l},u={rowPartitionTypes:i};return G.runKernel(gw,c,u)}const uU=U({raggedTensorToTensor_:lNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cNe(t,e,n){const r=oe(t);let i=null;if(n==null||n==="float32")i=new Float32Array(r);else if(n==="int32")i=new Int32Array(r);else if(n==="bool")i=new Uint8Array(r);else throw new Error(`Unknown data type ${n}`);for(let s=0;s<r;s++)i[s]=e();return G.makeTensor(i,t,n)}const dU=U({rand_:cNe});var HN={exports:{}};HN.exports;(function(t){(function(e,n,r){function i(l){var c=this,u=o();c.next=function(){var d=2091639*c.s0+c.c*23283064365386963e-26;return c.s0=c.s1,c.s1=c.s2,c.s2=d-(c.c=d|0)},c.c=1,c.s0=u(" "),c.s1=u(" "),c.s2=u(" "),c.s0-=u(l),c.s0<0&&(c.s0+=1),c.s1-=u(l),c.s1<0&&(c.s1+=1),c.s2-=u(l),c.s2<0&&(c.s2+=1),u=null}function s(l,c){return c.c=l.c,c.s0=l.s0,c.s1=l.s1,c.s2=l.s2,c}function a(l,c){var u=new i(l),d=c&&c.state,f=u.next;return f.int32=function(){return u.next()*4294967296|0},f.double=function(){return f()+(f()*2097152|0)*11102230246251565e-32},f.quick=f,d&&(typeof d=="object"&&s(d,u),f.state=function(){return s(u,{})}),f}function o(){var l=4022871197,c=function(u){u=String(u);for(var d=0;d<u.length;d++){l+=u.charCodeAt(d);var f=.02519603282416938*l;l=f>>>0,f-=l,f*=l,l=f>>>0,f-=l,l+=f*4294967296}return(l>>>0)*23283064365386963e-26};return c}n&&n.exports?n.exports=a:r&&r.amd?r(function(){return a}):this.alea=a})(Ps,t,!1)})(HN);var uNe=HN.exports,qN={exports:{}};qN.exports;(function(t){(function(e,n,r){function i(o){var l=this,c="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var d=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^d^d>>>8},o===(o|0)?l.x=o:c+=o;for(var u=0;u<c.length+64;u++)l.x^=c.charCodeAt(u)|0,l.next()}function s(o,l){return l.x=o.x,l.y=o.y,l.z=o.z,l.w=o.w,l}function a(o,l){var c=new i(o),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var f=c.next()>>>11,h=(c.next()>>>0)/4294967296,g=(f+h)/(1<<21);while(g===0);return g},d.int32=c.next,d.quick=d,u&&(typeof u=="object"&&s(u,c),d.state=function(){return s(c,{})}),d}n&&n.exports?n.exports=a:r&&r.amd?r(function(){return a}):this.xor128=a})(Ps,t,!1)})(qN);var dNe=qN.exports,KN={exports:{}};KN.exports;(function(t){(function(e,n,r){function i(o){var l=this,c="";l.next=function(){var d=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(d^d<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,o===(o|0)?l.x=o:c+=o;for(var u=0;u<c.length+64;u++)l.x^=c.charCodeAt(u)|0,u==c.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function s(o,l){return l.x=o.x,l.y=o.y,l.z=o.z,l.w=o.w,l.v=o.v,l.d=o.d,l}function a(o,l){var c=new i(o),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var f=c.next()>>>11,h=(c.next()>>>0)/4294967296,g=(f+h)/(1<<21);while(g===0);return g},d.int32=c.next,d.quick=d,u&&(typeof u=="object"&&s(u,c),d.state=function(){return s(c,{})}),d}n&&n.exports?n.exports=a:r&&r.amd?r(function(){return a}):this.xorwow=a})(Ps,t,!1)})(KN);var fNe=KN.exports,XN={exports:{}};XN.exports;(function(t){(function(e,n,r){function i(o){var l=this;l.next=function(){var u=l.x,d=l.i,f,h;return f=u[d],f^=f>>>7,h=f^f<<24,f=u[d+1&7],h^=f^f>>>10,f=u[d+3&7],h^=f^f>>>3,f=u[d+4&7],h^=f^f<<7,f=u[d+7&7],f=f^f<<13,h^=f^f<<9,u[d]=h,l.i=d+1&7,h};function c(u,d){var f,h=[];if(d===(d|0))h[0]=d;else for(d=""+d,f=0;f<d.length;++f)h[f&7]=h[f&7]<<15^d.charCodeAt(f)+h[f+1&7]<<13;for(;h.length<8;)h.push(0);for(f=0;f<8&&h[f]===0;++f);for(f==8?h[7]=-1:h[f],u.x=h,u.i=0,f=256;f>0;--f)u.next()}c(l,o)}function s(o,l){return l.x=o.x.slice(),l.i=o.i,l}function a(o,l){o==null&&(o=+new Date);var c=new i(o),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var f=c.next()>>>11,h=(c.next()>>>0)/4294967296,g=(f+h)/(1<<21);while(g===0);return g},d.int32=c.next,d.quick=d,u&&(u.x&&s(u,c),d.state=function(){return s(c,{})}),d}n&&n.exports?n.exports=a:r&&r.amd?r(function(){return a}):this.xorshift7=a})(Ps,t,!1)})(XN);var pNe=XN.exports,YN={exports:{}};YN.exports;(function(t){(function(e,n,r){function i(o){var l=this;l.next=function(){var u=l.w,d=l.X,f=l.i,h,g;return l.w=u=u+1640531527|0,g=d[f+34&127],h=d[f=f+1&127],g^=g<<13,h^=h<<17,g^=g>>>15,h^=h>>>12,g=d[f]=g^h,l.i=f,g+(u^u>>>16)|0};function c(u,d){var f,h,g,y,x,v=[],b=128;for(d===(d|0)?(h=d,d=null):(d=d+"\0",h=0,b=Math.max(b,d.length)),g=0,y=-32;y<b;++y)d&&(h^=d.charCodeAt((y+32)%d.length)),y===0&&(x=h),h^=h<<10,h^=h>>>15,h^=h<<4,h^=h>>>13,y>=0&&(x=x+1640531527|0,f=v[y&127]^=h+x,g=f==0?g+1:0);for(g>=128&&(v[(d&&d.length||0)&127]=-1),g=127,y=4*128;y>0;--y)h=v[g+34&127],f=v[g=g+1&127],h^=h<<13,f^=f<<17,h^=h>>>15,f^=f>>>12,v[g]=h^f;u.w=x,u.X=v,u.i=g}c(l,o)}function s(o,l){return l.i=o.i,l.w=o.w,l.X=o.X.slice(),l}function a(o,l){o==null&&(o=+new Date);var c=new i(o),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var f=c.next()>>>11,h=(c.next()>>>0)/4294967296,g=(f+h)/(1<<21);while(g===0);return g},d.int32=c.next,d.quick=d,u&&(u.X&&s(u,c),d.state=function(){return s(c,{})}),d}n&&n.exports?n.exports=a:r&&r.amd?r(function(){return a}):this.xor4096=a})(Ps,t,!1)})(YN);var hNe=YN.exports,QN={exports:{}};QN.exports;(function(t){(function(e,n,r){function i(o){var l=this,c="";l.next=function(){var d=l.b,f=l.c,h=l.d,g=l.a;return d=d<<25^d>>>7^f,f=f-h|0,h=h<<24^h>>>8^g,g=g-d|0,l.b=d=d<<20^d>>>12^f,l.c=f=f-h|0,l.d=h<<16^f>>>16^g,l.a=g-d|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,o===Math.floor(o)?(l.a=o/4294967296|0,l.b=o|0):c+=o;for(var u=0;u<c.length+20;u++)l.b^=c.charCodeAt(u)|0,l.next()}function s(o,l){return l.a=o.a,l.b=o.b,l.c=o.c,l.d=o.d,l}function a(o,l){var c=new i(o),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var f=c.next()>>>11,h=(c.next()>>>0)/4294967296,g=(f+h)/(1<<21);while(g===0);return g},d.int32=c.next,d.quick=d,u&&(typeof u=="object"&&s(u,c),d.state=function(){return s(c,{})}),d}n&&n.exports?n.exports=a:r&&r.amd?r(function(){return a}):this.tychei=a})(Ps,t,!1)})(QN);var mNe=QN.exports,fU={exports:{}};const gNe={},yNe=Object.freeze(Object.defineProperty({__proto__:null,default:gNe},Symbol.toStringTag,{value:"Module"})),vNe=rq(yNe);(function(t){(function(e,n,r){var i=256,s=6,a=52,o="random",l=r.pow(i,s),c=r.pow(2,a),u=c*2,d=i-1,f;function h(k,$,T){var _=[];$=$==!0?{entropy:!0}:$||{};var R=v(x($.entropy?[k,S(n)]:k??b(),3),_),P=new g(_),O=function(){for(var B=P.g(s),H=l,V=0;B<c;)B=(B+V)*i,H*=i,V=P.g(1);for(;B>=u;)B/=2,H/=2,V>>>=1;return(B+V)/H};return O.int32=function(){return P.g(4)|0},O.quick=function(){return P.g(4)/4294967296},O.double=O,v(S(P.S),n),($.pass||T||function(B,H,V,K){return K&&(K.S&&y(K,P),B.state=function(){return y(P,{})}),V?(r[o]=B,H):B})(O,R,"global"in $?$.global:this==r,$.state)}function g(k){var $,T=k.length,_=this,R=0,P=_.i=_.j=0,O=_.S=[];for(T||(k=[T++]);R<i;)O[R]=R++;for(R=0;R<i;R++)O[R]=O[P=d&P+k[R%T]+($=O[R])],O[P]=$;(_.g=function(B){for(var H,V=0,K=_.i,X=_.j,q=_.S;B--;)H=q[K=d&K+1],V=V*i+q[d&(q[K]=q[X=d&X+H])+(q[X]=H)];return _.i=K,_.j=X,V})(i)}function y(k,$){return $.i=k.i,$.j=k.j,$.S=k.S.slice(),$}function x(k,$){var T=[],_=typeof k,R;if($&&_=="object")for(R in k)try{T.push(x(k[R],$-1))}catch{}return T.length?T:_=="string"?k:k+"\0"}function v(k,$){for(var T=k+"",_,R=0;R<T.length;)$[d&R]=d&(_^=$[d&R]*19)+T.charCodeAt(R++);return S($)}function b(){try{var k;return f&&(k=f.randomBytes)?k=k(i):(k=new Uint8Array(i),(e.crypto||e.msCrypto).getRandomValues(k)),S(k)}catch{var $=e.navigator,T=$&&$.plugins;return[+new Date,e,T,e.screen,S(n)]}}function S(k){return String.fromCharCode.apply(0,k)}if(v(r.random(),n),t.exports){t.exports=h;try{f=vNe}catch{}}else r["seed"+o]=h})(typeof self<"u"?self:Ps,[],Math)})(fU);var xNe=fU.exports,bNe=uNe,wNe=dNe,SNe=fNe,kNe=pNe,CNe=hNe,$Ne=mNe,xu=xNe;xu.alea=bNe;xu.xor128=wNe;xu.xorwow=SNe;xu.xorshift7=kNe;xu.xor4096=CNe;xu.tychei=$Ne;var e2=xu;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ZN{constructor(e,n,r,i,s){this.mean=e,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=i,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const a=s||Math.random();this.random=e2.alea(a.toString())}nextValue(){if(!isNaN(this.nextVal)){const i=this.nextVal;return this.nextVal=NaN,i}let e,n,r=!1;for(;!r;){let i,s,a;do i=2*this.random()-1,s=2*this.random()-1,a=i*i+s*s;while(a>=1||a===0);const o=Math.sqrt(-2*Math.log(a)/a);e=this.mean+this.stdDev*i*o,n=this.mean+this.stdDev*s*o,(!this.truncated||this.isValidTruncated(e))&&(r=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(e)}convertValue(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class ENe{constructor(e,n,r,i){this.alpha=e,this.beta=1/n,this.dtype=r;const s=i||Math.random();this.randu=e2.alea(s.toString()),this.randn=new ZN(0,1,r,!1,this.randu()),e<1?this.d=e+2/3:this.d=e-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let e,n,r,i,s,a;for(;;){do i=this.randn.nextValue(),a=1+this.c*i;while(a<=0);if(a*=a*a,e=i*i,n=1-.331*e*e,r=.5*e+this.d*(1-a+Math.log(a)),s=this.randu(),s<n||Math.log(s)<r)break}return a=1/this.beta*this.d*a,this.alpha<1&&(a*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(a)}convertValue(e){return this.dtype==="float32"?e:Math.round(e)}}class TNe{constructor(e=0,n=1,r,i){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=e,this.range=n-e,this.dtype=r,i==null&&(i=Math.random()),typeof i=="number"&&(i=i.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${n} <= 1 and dtype is not float`);this.random=e2.alea(i)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Ne(t,e,n=1,r="float32",i){if(n==null&&(n=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error(`Unsupported data type ${r}`);const s=new ENe(e,n,r,i),a=qe(t,r);for(let o=0;o<a.values.length;o++)a.values[o]=s.nextValue();return a.toTensor()}const pU=U({randomGamma_:_Ne});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function INe(t,e=0,n=1,r,i){if(r!=null&&r==="bool")throw new Error(`Unsupported data type ${r}`);const s=new ZN(e,n,r,!1,i),a=qe(t,r);for(let o=0;o<a.values.length;o++)a.values[o]=s.nextValue();return a.toTensor()}const JN=U({randomNormal_:INe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NNe(t,e,n){if(e!=null&&e==="bool")throw new Error(`Unsupported data type ${e}`);return JN(t,0,1,e,n)}const hU=U({randomStandardNormal_:NNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RNe(t,e=0,n=1,r="float32",i){const s=qe(t,r),a=new TNe(e,n,null,i);for(let o=0;o<s.values.length;o++)s.values[o]=a.nextValue();return s.toTensor()}const eR=U({randomUniform_:RNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ff(t,e,n=1,r="float32"){if(n===0)throw new Error("Cannot have a step of zero");const i={start:t,stop:e,step:n,dtype:r};return G.runKernel(yw,{},i)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ONe(t){const n={x:D(t,"x","reciprocal")};return G.runKernel(wg,n)}const mU=U({reciprocal_:ONe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ANe(t){const n={x:D(t,"x","relu")};return G.runKernel(Sg,n)}const Kg=U({relu_:ANe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PNe(t){const n={x:D(t,"x","relu6")};return G.runKernel(kg,n)}const tR=U({relu6_:PNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DNe(t,e){const r={x:D(t,"x","reverse")},i={dims:e};return G.runKernel(Sw,r,i)}const $l=U({reverse_:DNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FNe(t){const e=D(t,"x","reverse");return F(e.rank===1,()=>`Error in reverse1D: x must be rank 1 but got rank ${e.rank}.`),$l(e,0)}const gU=U({reverse1d_:FNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LNe(t,e){const n=D(t,"x","reverse");return F(n.rank===2,()=>`Error in reverse2D: x must be rank 2 but got rank ${n.rank}.`),$l(n,e)}const yU=U({reverse2d_:LNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MNe(t,e){const n=D(t,"x","reverse");return F(n.rank===3,()=>`Error in reverse3D: x must be rank 3 but got rank ${n.rank}.`),$l(n,e)}const vU=U({reverse3d_:MNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BNe(t,e){const n=D(t,"x","reverse");return F(n.rank===4,()=>`Error in reverse4D: x must be rank 4 but got rank ${n.rank}.`),$l(n,e)}const xU=U({reverse4d_:BNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zNe(t){const n={x:D(t,"x","round")};return G.runKernel(Cg,n)}const nR=U({round_:zNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jNe(t){const n={x:D(t,"x","rsqrt","float32")};return G.runKernel($g,n)}const bU=U({rsqrt_:jNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VNe(t){const n={x:D(t,"x","selu")};return G.runKernel(Eg,n)}const wU=U({selu_:VNe});function WNe(t,e,n,r,i,s=[1,1],a="NHWC"){const o=D(t,"x","separableConv2d"),l=D(e,"depthwiseFilter","separableConv2d"),c=D(n,"pointwiseFilter","separableConv2d");let u=o,d=!1;if(o.rank===3&&(d=!0,u=fe(o,[1,o.shape[0],o.shape[1],o.shape[2]])),a==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");F(u.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${u.rank}.`),F(l.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),F(c.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),F(c.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${c.shape[0]}.`),F(c.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${c.shape[1]}.`);const f=l.shape[2],h=l.shape[3];F(c.shape[2]===f*h,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${f*h}, but got ${c.shape[2]}.`);const g=Yw(u,l,r,i,a,s),x=Ug(g,c,1,"valid",a);return d?fe(x,[x.shape[1],x.shape[2],x.shape[3]]):x}const SU=U({separableConv2d_:WNe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function UNe(t,e){const n=D(t,"x","setdiff1d"),r=D(e,"y","setdiff1d");F(n.dtype===r.dtype,()=>`x and y should have the same dtype, but got x (${n.dtype}) and y (${r.dtype}).`),F(n.rank===1,()=>`x should be 1D tensor, but got x (${n.shape}).`),F(r.rank===1,()=>`y should be 1D tensor, but got y (${r.shape}).`);const i=await n.data(),s=await r.data(),a=new Set(s);let o=0;for(let u=0;u<i.length;u++)a.has(i[u])||o++;const l=new En([o],n.dtype),c=new En([o],"int32");for(let u=0,d=0;u<i.length;u++)a.has(i[u])||(l.values[d]=i[u],c.values[d]=u,d++);return[l.toTensor(),c.toTensor()]}const kU=UNe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GNe(t){const n={x:D(t,"x","sign")};return G.runKernel(Ig,n)}const CU=U({sign_:GNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HNe(t){const n={x:D(t,"x","sin","float32")};return G.runKernel(Tg,n)}const $U=U({sin_:HNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qNe(t){const n={x:D(t,"x","sinh")};return G.runKernel(_g,n)}const EU=U({sinh_:qNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KNe(t,e,n){const r=D(t,"x","slice1d");return F(r.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),kt(r,[e],[n])}const TU=U({slice1d_:KNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XNe(t,e,n){const r=D(t,"x","slice2d");return F(r.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),kt(r,e,n)}const _U=U({slice2d_:XNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YNe(t,e,n){const r=D(t,"x","slice3d");return F(r.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),kt(r,e,n)}const IU=U({slice3d_:YNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QNe(t,e,n){const r=D(t,"x","slice4d");return F(r.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),kt(r,e,n)}const NU=U({slice4d_:QNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZNe(t,e=-1){const n=D(t,"logits","softmax","float32");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${e}`);const r={logits:n},i={dim:e};return G.runKernel(Nw,r,i)}const RU=U({softmax_:ZNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JNe(t){F(t.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${t.dtype}.`);const e={input:t};return G.runKernel(zb,e)}const t2=U({fft_:JNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eRe(t){F(t.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${t.dtype}.`);const e={input:t};return G.runKernel(Hb,e)}const fm=U({ifft_:eRe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tRe(t){const e=t.shape[t.shape.length-1],n=t.size/e;let r;if(e<=2){const i=fe(t,[n,e]);r=fm(i)}else{const i=[n,2*(e-1)],s=fe(cf(t),[n,e]),a=fe(jg(t),[n,e]),o=$l(kt(s,[0,1],[n,e-2]),1),l=ke($l(kt(a,[0,1],[n,e-2]),1),tt(-1)),c=ar([s,o],1),u=ar([a,l],1),d=fe(po(c,u),[i[0],i[1]]);r=fm(d)}if(r=cf(r),t.rank===3&&t.shape[0]!==0){const i=r,s=t.shape[0];r=fe(r,[s,r.shape[0]/s,r.shape[1]]),i.dispose()}return r}const rR=U({irfft_:tRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nRe(t,e,n=0){const i={x:D(t,"x","split")},s={numOrSizeSplits:e,axis:n};return G.runKernel(Iw,i,s)}const pf=U({split_:nRe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rRe(t,e){F(t.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${t.dtype}`);let n=t.shape[t.shape.length-1];const r=t.size/n;let i;if(e!=null&&e<n){const g=t.shape.map(x=>0),y=t.shape.map(x=>x);y[t.shape.length-1]=e,i=kt(t,g,y),n=e}else if(e!=null&&e>n){const g=t.shape.map(y=>y);g[t.shape.length-1]=e-n,i=ar([t,Cl(g)],t.shape.length-1),n=e}else i=t;const s=di(i),a=fe(po(i,s),[r,n]),o=t2(a),l=Math.floor(n/2)+1,c=cf(o),u=jg(o),d=pf(c,[l,n-l],c.shape.length-1),f=pf(u,[l,n-l],u.shape.length-1),h=i.shape.slice();return h[i.shape.length-1]=l,fe(po(d[0],f[0]),h)}const n2=U({rfft_:rRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iRe(t,e){let n=D(t,"a","squaredDifference"),r=D(e,"b","squaredDifference");[n,r]=nn(n,r),rt(n.shape,r.shape);const i={a:n,b:r},s={};return G.runKernel(Ag,i,s)}const iR=U({squaredDifference_:iRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sRe(t,e){const n=D(t,"x","squeeze","string_or_numeric");return fe(n,Co(n.shape,e).newShape)}const Xg=U({squeeze_:sRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aRe(t,e=0){const n=om(t,"tensors","stack","string_or_numeric");F(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&F(e<=n[0].rank,()=>"Axis must be <= rank of the tensor");const r=n,i={axis:e};return G.runKernel(dw,r,i)}const Ca=U({stack_:aRe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oRe(t,e=0){const r={x:D(t,"x","step")},i={alpha:e};return G.runKernel(Mg,r,i)}const sR=U({step_:oRe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lRe(t,e,n,r,i=0,s=0,a=0,o=0,l=0){const u={x:D(t,"x","stridedSlice","string_or_numeric")},d={begin:e,end:n,strides:r,beginMask:i,endMask:s,ellipsisMask:a,newAxisMask:o,shrinkAxisMask:l};return G.runKernel(Fw,u,d)}const OU=U({stridedSlice_:lRe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cRe(t){const n={x:D(t,"x","tan","float32")};return G.runKernel(Dg,n)}const AU=U({tan_:cRe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ss(t,e){gu(t);const n=wa(t,e);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Ml(t,null,n,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ud(t,e,n){if(gu(t),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const r=wa(t,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Ml(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PU(t,e,n){if(gu(t),e!=null&&e.length!==4)throw new Error("tensor4d() requires shape to have four numbers");const r=wa(t,n);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Ml(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DU(t,e,n){if(gu(t),e!=null&&e.length!==5)throw new Error("tensor5d() requires shape to have five numbers");const r=wa(t,n);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Ml(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FU(t,e,n){if(gu(t),e!=null&&e.length!==6)throw new Error("tensor6d() requires shape to have six numbers");const r=wa(t,n);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return e=e||r,Ml(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uRe(t,e=1,n=!0){const r=D(t,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const i=r.shape[r.shape.length-1];if(e<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${e}`);if(e>i)throw new Error(`'k' passed to topk() must be <= the last dimension (${i}) but got ${e}`);const s={x:r},a={k:e,sorted:n},[o,l]=G.runKernel(zw,s,a);return{values:o,indices:l}}const LU=U({topk_:uRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dRe(t,e=0,n=1,r,i){if(r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");const s=new ZN(e,n,r,!0,i),a=qe(t,r);for(let o=0;o<a.values.length;o++)a.values[o]=s.nextValue();return a.toTensor()}const MU=U({truncatedNormal_:dRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fRe(t,e=0){const n=D(t,"x","unique","string_or_numeric");F(n.rank>0,()=>"The input tensor must be at least 1D");const r={x:n},i={axis:e},[s,a]=G.runKernel(Vw,r,i);return{values:s,indices:a}}const BU=U({unique_:fRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pRe(t,e,n){const r=D(t,"x","unsortedSegmentSum"),i=D(e,"segmentIds","unsortedSegmentSum","int32");F(Wc(n),()=>"numSegments must be of dtype int");const s={x:r,segmentIds:i},a={numSegments:n};return G.runKernel(Uw,s,a)}const zU=U({unsortedSegmentSum_:pRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hRe(t,e=0){const n=D(t,"x","unstack","string_or_numeric");F(e>=-n.shape.length&&e<n.shape.length,()=>`Axis = ${e} is not in [-${n.shape.length}, ${n.shape.length})`);const r={value:n},i={axis:e};return G.runKernel(Ww,r,i)}const jl=U({unstack_:hRe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jU(t,e){return Jw(t,e,"right")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VU(t,e=!0,n,r){return G.makeVariable(t,e,n,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r2(t,e){const n=[];for(let s=0;s<e.length;s++)e[s]&&n.push(s);const r=qe(t,"int32"),i=qe([n.length,t.length],"int32");for(let s=0;s<n.length;s++){const a=r.indexToLoc(n[s]),o=s*t.length;i.values.set(a,o)}return i.toTensor()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function mRe(t){const e=D(t,"condition","whereAsync","bool"),n=await e.data(),r=r2(e.shape,n);return t!==e&&e.dispose(),r}const aR=mRe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function gRe(t,e,n){const r=D(t,"tensor","boolMask"),i=D(e,"mask","boolMask","bool"),s=n??0,a=i.rank,o=r.shape;F(a>0,()=>"mask cannot be scalar"),Kn(o.slice(s,s+a),i.shape,"mask's shape must match the first K dimensions of tensor's shape,");let l=1;for(let y=s;y<s+a;y++)l*=o[y];const c=o.slice(0,s).concat([l],o.slice(s+a)),u=fe(r,c),d=fe(i,[-1]),f=await aR(d),h=Xg(f,[1]),g=ON(u,h,s);return t!==r&&r.dispose(),e!==i&&i.dispose(),h.dispose(),u.dispose(),d.dispose(),f.dispose(),g}const WU=gRe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yRe(t,e,n,r,i=!0){const s=D(t,"v","movingAverage"),a=D(e,"x","movingAverage"),o=D(n,"decay","movingAverage");uW(s,a),F($t(s.shape,a.shape),()=>"Shape mismatch in v and x");const l=tt(1),c=Je(l,o);let u=ke(Je(a,s),c);if(i){F(r!=null,()=>"When using zeroDebias: true, step is required.");const d=D(r,"step","movingAverage");u=Nt(u,Je(l,uf(o,d)))}return Ve(s,u)}const UU=U({movingAverage_:yRe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vRe(t,e,n){const r=D(t,"indices","scatterND","int32"),i=D(e,"updates","scatterND");pN(i,r,n);const s={indices:r,updates:i},a={shape:n};return G.runKernel(kw,s,a)}const GU=U({scatterND_:vRe});function xRe(t,e,n,r){if(t.dtype!=="int32")throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${t.shape}.`);const i=t.rank>0?t.shape[0]:1,s=t.rank>1?t.shape[1]:1;if(n.length!==s)throw new Error(`outputShape has incorrect number of elements:, ${n.length}, should be: ${s}.`);const a=e.size;if(!(e.rank===0||e.rank===1&&a===i))throw new Error(`sparseValues has incorrect shape ${e.shape}, should be [] or [${i}]`);if(e.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bRe(t,e,n,r=0){const i=D(t,"sparseIndices","sparseToDense","int32"),s=D(e,"sparseValues","sparseToDense","string_or_numeric"),a=D(r,"defaultValue","sparseToDense",s.dtype);xRe(i,s,n,a);const o={sparseIndices:i,sparseValues:s,defaultValue:a},l={outputShape:n};return G.runKernel(Dw,o,l)}const HU=U({sparseToDense_:bRe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wRe(t,e){const n=D(e,"indices","gatherND","int32"),i={params:D(t,"x","gatherND","string_or_numeric"),indices:n};return G.runKernel(Gb,i)}const qU=U({gatherND_:wRe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SRe(t,e){if(e==null)return t.shape.slice();if($t(t.shape,e))return e;if(t.shape.length===e.length){const n=[];for(let r=0;r<t.shape.length;r++)e[r]==null&&t.shape[r]!=null?n.push(t.shape[r]):n.push(e[r]);return n}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kRe(t,e,n,r){const i=D(t,"x","dropout");if(F(i.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${i.dtype} tensor instead.`),F(e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),e===0)return t instanceof tn?i.clone():i;const s=SRe(i,n),a=1-e,o=Nt(RN(Ve(eR(s,0,1,"float32",r),a)),a);return ke(i,o)}const KU=U({dropout_:kRe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oR(t){return Math.floor(Math.pow(2,Math.ceil(Math.log(t)/Math.log(2))))}function i2(t,e,n){const r=1-t%2,i=new Float32Array(t);for(let s=0;s<t;++s){const a=2*Math.PI*s/(t+r-1);i[s]=e-n*Math.cos(a)}return ss(i,"float32")}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function CRe(t,e,n=1){const r=D(t,"predictions","inTopK"),i=D(e,"targets","inTopK");F(r.rank>1,()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${r.rank}`),F(r.rank-1===i.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${r.rank} and targets rank ${i.rank}`),Kn(r.shape.slice(0,r.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");const s=r.shape[r.shape.length-1];F(n>0&&n<=s,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${s}), but got ${n}`);const a=await r.data(),o=await i.data(),[l,c]=[a.length/s,s],u=Tn("bool",l);for(let d=0;d<l;d++){const f=d*c,h=a.subarray(f,f+c),g=[];for(let y=0;y<h.length;y++)g.push({value:h[y],index:y});g.sort((y,x)=>x.value-y.value),u[d]=0;for(let y=0;y<n;y++)if(g[y].index===o[d]){u[d]=1;break}}return t!==r&&r.dispose(),e!==i&&i.dispose(),zs(u,i.shape,"bool")}const XU=CRe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Re(t,e,n,r,i,s="NHWC",a){let o=t;t.rank===3&&(o=fe(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=fe(e,[1,e.shape[0],e.shape[1],e.shape[2]])),F(o.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${o.shape}.`),F(l.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),F(n.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);const c=s==="NHWC"?o.shape[3]:o.shape[1],u=s==="NHWC"?l.shape[3]:l.shape[1];F(c===n[2],()=>`Error in conv2dDerFilter: depth of input ${c}) must match input depth in filter (${n[2]}.`),F(u===n[3],()=>`Error in conv2dDerFilter: depth of dy (${u}) must match output depth for filter (${n[3]}).`),ys("conv2dDerFilter",i,a);const d={x:o,dy:l},f={strides:r,pad:i,dataFormat:s,dimRoundingMode:a,filterShape:n};return G.runKernel(Cb,d,f)}const ERe=U({conv2DBackpropFilter_:$Re});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s2(t,e,n){if(n==null||n==="linear")return t;if(n==="relu")return ke(t,sR(e));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function a2(t,e){let n=e;const r=uN(t.shape,e.shape);return r.length>0&&(n=It(n,r)),fe(n,t.shape)}function o2(t,e,n,r){if(e==="linear")return t;if(e==="relu")return Kg(t);if(e==="elu")return _N(t);if(e==="relu6")return tR(t);if(e==="prelu")return GN(t,n);if(e==="leakyrelu")return PN(t,r);if(e==="sigmoid")return Ic(t);throw new Error(`Unknown fused activation ${e}.`)}const l2=(t,e)=>!(t>0)||e==="linear";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TRe({x:t,filter:e,strides:n,pad:r,dataFormat:i="NHWC",dilations:s=[1,1],dimRoundingMode:a,bias:o,activation:l="linear",preluActivationWeights:c,leakyreluAlpha:u}){if(l=l||"linear",l2(G.state.gradientDepth,l)===!1){F(i==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${i} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let T=Ug(t,e,n,r,i,s,a);return o!=null&&(T=Ve(T,o)),o2(T,l,c,u)}const d=D(t,"x","conv2d","float32"),f=D(e,"filter","conv2d","float32");let h=d,g=!1;d.rank===3&&(g=!0,h=fe(d,[1,d.shape[0],d.shape[1],d.shape[2]])),F(h.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${h.rank}.`),F(f.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${f.rank}.`),ys("fused conv2d",r,a);const y=i==="NHWC"?h.shape[3]:h.shape[1];F(f.shape[2]===y,()=>`Error in conv2d: depth of input (${y}) must match input depth for filter ${f.shape[2]}.`),F(lr(n,s),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`);const x=Fn(h.shape,f.shape,n,s,r,a);let v;o!=null&&(v=D(o,"bias","fused conv2d"),[v]=nn(v,d),i==="NHWC"?rt(x.outShape,v.shape):(F(v.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${v.shape.length}.`),F(v.shape.length===0||v.shape[0]===x.outChannels||v.shape[0]===1,()=>`Error in fused conv2d: bias shape (${v.shape}) is not compatible with the number of output channels (${x.outChannels})`)));let b;if(c!=null){const T=c.shape;if(F(T.length<=1||T.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${T.length}.`),T.length===1)F(T[0]===1||T[0]===x.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${T}) is not compatible with the number of output channels (${x.outChannels}).`);else if(T.length===3)try{rt(T,x.outShape)}catch{const R=`Error in fused conv2d: PReLU activation weights (${T}) is not compatible with the output shape of the conv2d (${x.outShape}).`;throw Error(R)}b=D(c,"prelu weights","fused conv2d")}const S=(T,_)=>{F(i==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${i} but only NHWC is currently supported.`);const[R,P,O,B]=_,H=s2(T,O,l);F(cm(s),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${s}'`);const V=g8(P.shape,H,R,n,r),K=ERe(P,H,R.shape,n,r),X=[V,K];if(B!=null){const q=a2(B,H);X.push(q)}return X},k={x:h,filter:f,bias:v,preluActivationWeights:b},$={strides:n,pad:r,dataFormat:i,dilations:s,dimRoundingMode:a,activation:l,leakyreluAlpha:u};return o==null?ka((_,R,P)=>{let O=G.runKernel(rm,k,$);return P([R,_,O]),g&&(O=fe(O,[O.shape[1],O.shape[2],O.shape[3]])),{value:O,gradFunc:S}})(h,f):ka((_,R,P,O)=>{let B=G.runKernel(rm,k,$);return O([R,_,B,P]),g&&(B=fe(B,[B.shape[1],B.shape[2],B.shape[3]])),{value:B,gradFunc:S}})(h,f,v)}const _Re=U({fusedConv2d_:TRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IRe(t,e,n,r,i,s=[1,1],a){let o=t;t.rank===3&&(o=fe(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=fe(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const c={x:o,dy:l},u={strides:r,pad:i,dimRoundingMode:a,dilations:s,filterShape:n};return G.runKernel(Pb,c,u)}const NRe=U({depthwiseConv2dNativeBackpropFilter_:IRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RRe(t,e,n,r,i,s=[1,1],a){let o=e,l=!1;e.rank===3&&(l=!0,o=fe(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const c={dy:o,filter:n},u={strides:r,pad:i,dimRoundingMode:a,dilations:s,inputShape:t},d=G.runKernel(Db,c,u);return l?fe(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const ORe=U({depthwiseConv2dNativeBackpropInput_:RRe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ARe({x:t,filter:e,strides:n,pad:r,dataFormat:i="NHWC",dilations:s=[1,1],dimRoundingMode:a,bias:o,activation:l="linear",preluActivationWeights:c,leakyreluAlpha:u}){if(l2(G.state.gradientDepth,l)===!1){let $=Yw(t,e,n,r,i,s,a);return o!=null&&($=Ve($,o)),o2($,l,c,u)}const d=D(t,"x","depthwiseConv2d","float32"),f=D(e,"filter","depthwiseConv2d","float32");let h=d,g=!1;d.rank===3&&(g=!0,h=fe(d,[1,d.shape[0],d.shape[1],d.shape[2]])),F(h.rank===4,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${h.rank}.`),F(f.rank===4,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${f.rank}.`),F(h.shape[3]===f.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${h.shape[3]}) must match the inChannels dimension in filter ${f.shape[2]}.`),s==null&&(s=[1,1]),F(lr(n,s),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),ys("fused depthwiseConv2d",r,a);const y=Fn(h.shape,f.shape,n,s,r,a,!0);let x;o!=null&&(x=D(o,"bias","fused conv2d"),[x]=nn(x,d),rt(y.outShape,x.shape));let v;c!=null&&(v=D(c,"prelu weights","fused depthwiseConv2d"));const b=($,T)=>{F(cm(s),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${s}'`);const[_,R,P,O]=T,B=s2($,P,l),H=ORe(R.shape,B,_,n,r,s,a),V=NRe(R,B,_.shape,n,r,s,a);if(O!=null){const K=a2(x,B);return[H,V,K]}return[H,V]},S={x:h,filter:f,bias:x,preluActivationWeights:v},k={strides:n,pad:r,dataFormat:i,dilations:s,dimRoundingMode:a,activation:l,leakyreluAlpha:u};return o==null?ka((T,_,R)=>{let P=G.runKernel(im,S,k);return R([_,T,P]),g&&(P=fe(P,[P.shape[1],P.shape[2],P.shape[3]])),{value:P,gradFunc:b}})(h,f):ka((T,_,R,P)=>{let O=G.runKernel(im,S,k);return P([_,T,O,R]),g&&(O=fe(O,[O.shape[1],O.shape[2],O.shape[3]])),{value:O,gradFunc:b}})(h,f,x)}const PRe=U({fusedDepthwiseConv2d_:ARe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DRe({a:t,b:e,transposeA:n=!1,transposeB:r=!1,bias:i,activation:s="linear",preluActivationWeights:a,leakyreluAlpha:o=.2}){if(l2(G.state.gradientDepth,s)===!1){let B=gt(t,e,n,r);return i!=null&&(B=Ve(B,i)),o2(B,s,a,o)}let l=D(t,"a","fused matMul"),c=D(e,"b","fused matMul");[l,c]=nn(l,c);const u=n?l.shape[l.rank-2]:l.shape[l.rank-1],d=r?c.shape[c.rank-1]:c.shape[c.rank-2],f=n?l.shape[l.rank-1]:l.shape[l.rank-2],h=r?c.shape[c.rank-2]:c.shape[c.rank-1],g=l.shape.slice(0,-2),y=c.shape.slice(0,-2),x=oe(g),v=oe(y);F(u===d,()=>`Error in fused matMul: inner shapes (${u}) and (${d}) of Tensors with shapes ${l.shape} and ${c.shape} and transposeA=${n} and transposeB=${r} must match.`);const S=rt(l.shape.slice(0,-2),c.shape.slice(0,-2)).concat([f,h]),k=n?fe(l,[x,u,f]):fe(l,[x,f,u]),$=r?fe(c,[v,h,d]):fe(c,[v,d,h]);let T;i!=null&&(T=D(i,"bias","fused matMul"),[T]=nn(T,l),rt(S,T.shape));let _;a!=null&&(_=D(a,"prelu weights","fused matMul"));const R=(B,H)=>{const[V,K,X,q]=H,te=s2(fe(B,X.shape),X,s);let j,Y;if(!n&&!r?(j=gt(te,K,!1,!0),Y=gt(V,te,!0,!1)):!n&&r?(j=gt(te,K,!1,!1),Y=gt(te,V,!0,!1)):n&&!r?(j=gt(K,te,!1,!0),Y=gt(V,te,!1,!1)):(j=gt(K,te,!0,!0),Y=gt(te,V,!0,!0)),i!=null){const Q=a2(q,te);return[j,Y,Q]}else return[j,Y]},P={a:k,b:$,bias:T,preluActivationWeights:_},O={transposeA:n,transposeB:r,activation:s,leakyreluAlpha:o};return i==null?ka((H,V,K)=>{const X=G.runKernel(nm,P,O);return K([H,V,X]),{value:fe(X,S),gradFunc:R}})(k,$):ka((H,V,K,X)=>{const q=G.runKernel(nm,P,O);return X([H,V,q,K]),{value:fe(q,S),gradFunc:R}})(k,$,T)}const FRe=U({fusedMatMul_:DRe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YU=Object.freeze(Object.defineProperty({__proto__:null,conv2d:_Re,depthwiseConv2d:PRe,matMul:FRe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LRe(t){return i2(t,.54,.46)}const MRe=U({hammingWindow_:LRe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BRe(t){return i2(t,.5,.5)}const QU=U({hannWindow_:BRe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zRe(t,e,n,r=!1,i=0){let s=0;const a=[];for(;s+e<=t.size;)a.push(kt(t,s,e)),s+=n;if(r)for(;s<t.size;){const o=s+e-t.size,l=ar([kt(t,s,e-o),Uf([o],i)]);a.push(l),s+=n}return a.length===0?Ud([],[0,e]):fe(ar(a),[a.length,e])}const ZU=U({frame_:zRe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jRe(t,e,n,r,i=QU){r==null&&(r=oR(e));const s=ZU(t,e,n),a=ke(s,i(e));return n2(a,r)}const VRe=U({stft_:jRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WRe(t,e,n,r,i="bilinear",s=0){const a=D(t,"image","cropAndResize"),o=D(e,"boxes","cropAndResize","float32"),l=D(n,"boxInd","cropAndResize","int32"),c=o.shape[0];F(a.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${a.rank}.`),F(o.rank===2&&o.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${c},4] but had shape ${o.shape}.`),F(l.rank===1&&l.shape[0]===c,()=>`Error in cropAndResize: boxInd must be have size [${c}] but had shape ${o.shape}.`),F(r.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),F(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),F(i==="bilinear"||i==="nearest",()=>`method must be bilinear or nearest, but was ${i}`);const u={image:a,boxes:o,boxInd:l},d={method:i,extrapolationValue:s,cropSize:r};return G.runKernel(Nb,u,d)}const URe=U({cropAndResize_:WRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GRe(t){const e=D(t,"image","flipLeftRight","float32");F(e.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${e.rank}.`);const n={image:e};return G.runKernel(Vb,n,{})}const HRe=U({flipLeftRight_:GRe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qRe(t){const e=D(t,"image","grayscaleToRGB"),n=e.rank-1,r=e.shape[n];F(e.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${e.rank}.`),F(r===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);const i=new Array(e.rank);return i.fill(1,0,n),i[n]=3,Wd(e,i)}const KRe=U({grayscaleToRGB_:qRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XRe(t,e,n=0,r=.5){const i=D(t,"image","rotateWithOffset","float32");F(i.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${i.rank}.`);const s={image:i},a={radians:e,fillValue:n,center:r};return G.runKernel(Hw,s,a)}const YRe=U({rotateWithOffset_:XRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hf(t,e,n,r,i,s){r==null&&(r=.5),i==null&&(i=Number.NEGATIVE_INFINITY),s==null&&(s=0);const a=t.shape[0];return n=Math.min(n,a),F(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),F(t.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),F(t.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${t.shape[1]}`),F(e.rank===1,()=>"scores must be a 1D tensor"),F(e.shape[0]===a,()=>`scores has incompatible shape with boxes. Expected ${a}, but was ${e.shape[0]}`),F(0<=s&&s<=1,()=>`softNmsSigma must be in [0, 1], but was '${s}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:i,softNmsSigma:s}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QRe(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY){const s=D(t,"boxes","nonMaxSuppression","float32"),a=D(e,"scores","nonMaxSuppression","float32"),o=Hf(s,a,n,r,i);n=o.maxOutputSize,r=o.iouThreshold,i=o.scoreThreshold;const l={maxOutputSize:n,iouThreshold:r,scoreThreshold:i};return G.runKernel(aw,{boxes:s,scores:a},l)}const ZRe=U({nonMaxSuppression_:QRe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JRe(t,e,n){const r=eOe(t,e,n),i=r<0?-(r+1):r;t.splice(i,0,e)}function eOe(t,e,n){return nOe(t,e,n||tOe)}function tOe(t,e){return t>e?1:t<e?-1:0}function nOe(t,e,n){let r=0,i=t.length,s=0,a=!1;for(;r<i;){s=r+(i-r>>>1);const o=n(e,t[s]);o>0?r=s+1:(i=s,a=!o)}return a?r:-r-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c2(t,e,n,r,i){return lR(t,e,n,r,i,0)}function u2(t,e,n,r,i,s){return lR(t,e,n,r,i,0,!1,s,!0)}function d2(t,e,n,r,i,s){return lR(t,e,n,r,i,s,!0)}function lR(t,e,n,r,i,s,a=!1,o=!1,l=!1){const c=[];for(let x=0;x<e.length;x++)e[x]>i&&c.push({score:e[x],boxIndex:x,suppressBeginIndex:0});c.sort(C4);const u=s>0?-.5/s:0,d=[],f=[];for(;d.length<n&&c.length>0;){const x=c.pop(),{score:v,boxIndex:b,suppressBeginIndex:S}=x;if(v<i)break;let k=!1;for(let $=d.length-1;$>=S;--$){const T=rOe(t,b,d[$]);if(T>=r){k=!0;break}if(x.score=x.score*iOe(r,u,T),x.score<=i)break}x.suppressBeginIndex=d.length,k||(x.score===v?(d.push(b),f.push(x.score)):x.score>i&&JRe(c,x,C4))}const h=d.length,g=n-h;o&&g>0&&(d.push(...new Array(g).fill(0)),f.push(...new Array(g).fill(0)));const y={selectedIndices:d};return a&&(y.selectedScores=f),l&&(y.validOutputs=h),y}function rOe(t,e,n){const r=t.subarray(e*4,e*4+4),i=t.subarray(n*4,n*4+4),s=Math.min(r[0],r[2]),a=Math.min(r[1],r[3]),o=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),c=Math.min(i[0],i[2]),u=Math.min(i[1],i[3]),d=Math.max(i[0],i[2]),f=Math.max(i[1],i[3]),h=(o-s)*(l-a),g=(d-c)*(f-u);if(h<=0||g<=0)return 0;const y=Math.max(s,c),x=Math.max(a,u),v=Math.min(o,d),b=Math.min(l,f),S=Math.max(v-y,0)*Math.max(b-x,0);return S/(h+g-S)}function iOe(t,e,n){const r=Math.exp(e*n*n);return n<=t?r:0}function C4(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function sOe(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY){const s=D(t,"boxes","nonMaxSuppressionAsync"),a=D(e,"scores","nonMaxSuppressionAsync"),o=Hf(s,a,n,r,i);n=o.maxOutputSize,r=o.iouThreshold,i=o.scoreThreshold;const l=await Promise.all([s.data(),a.data()]),c=l[0],u=l[1],{selectedIndices:d}=c2(c,u,n,r,i);return s!==t&&s.dispose(),a!==e&&a.dispose(),ss(d,"int32")}const aOe=sOe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oOe(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,s=0){const a=D(t,"boxes","nonMaxSuppression"),o=D(e,"scores","nonMaxSuppression"),l=Hf(a,o,n,r,i,s);n=l.maxOutputSize,r=l.iouThreshold,i=l.scoreThreshold,s=l.softNmsSigma;const c={boxes:a,scores:o},u={maxOutputSize:n,iouThreshold:r,scoreThreshold:i,softNmsSigma:s},d=G.runKernel(lw,c,u);return{selectedIndices:d[0],selectedScores:d[1]}}const lOe=U({nonMaxSuppressionWithScore_:oOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function cOe(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,s=0){const a=D(t,"boxes","nonMaxSuppressionAsync"),o=D(e,"scores","nonMaxSuppressionAsync"),l=Hf(a,o,n,r,i,s);n=l.maxOutputSize,r=l.iouThreshold,i=l.scoreThreshold,s=l.softNmsSigma;const c=await Promise.all([a.data(),o.data()]),u=c[0],d=c[1],{selectedIndices:f,selectedScores:h}=d2(u,d,n,r,i,s);return a!==t&&a.dispose(),o!==e&&o.dispose(),{selectedIndices:ss(f,"int32"),selectedScores:ss(h)}}const uOe=cOe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dOe(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,s=!1){const a=D(t,"boxes","nonMaxSuppression"),o=D(e,"scores","nonMaxSuppression"),l=Hf(a,o,n,r,i,null),c=l.maxOutputSize,u=l.iouThreshold,d=l.scoreThreshold,f={boxes:a,scores:o},h={maxOutputSize:c,iouThreshold:u,scoreThreshold:d,padToMaxOutputSize:s},g=G.runKernel(ow,f,h);return{selectedIndices:g[0],validOutputs:g[1]}}const fOe=U({nonMaxSuppressionPadded_:dOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function pOe(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,s=!1){const a=D(t,"boxes","nonMaxSuppressionAsync"),o=D(e,"scores","nonMaxSuppressionAsync"),l=Hf(a,o,n,r,i,null),c=l.maxOutputSize,u=l.iouThreshold,d=l.scoreThreshold,[f,h]=await Promise.all([a.data(),o.data()]),{selectedIndices:g,validOutputs:y}=u2(f,h,c,u,d,s);return a!==t&&a.dispose(),o!==e&&o.dispose(),{selectedIndices:ss(g,"int32"),validOutputs:tt(y,"int32")}}const hOe=pOe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mOe(t,e,n=!1,r=!1){const i=D(t,"images","resizeBilinear");F(i.rank===3||i.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${i.rank}.`),F(e.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${e}.`),F(r===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let s=i,a=!1;i.rank===3&&(a=!0,s=fe(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const o={images:s},l={alignCorners:n,halfPixelCenters:r,size:e},c=G.runKernel(ww,o,l);return a?fe(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const gOe=U({resizeBilinear_:mOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yOe(t,e,n=!1,r=!1){const i=D(t,"images","resizeNearestNeighbor");F(i.rank===3||i.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${i.rank}.`),F(e.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${e}.`),F(i.dtype==="float32"||i.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),F(r===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let s=i,a=!1;i.rank===3&&(a=!0,s=fe(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const o={images:s},l={alignCorners:n,halfPixelCenters:r,size:e},c=G.runKernel(bw,o,l);return a?fe(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const vOe=U({resizeNearestNeighbor_:yOe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xOe(t,e="binary",n=!1,r=.5){const i=D(t,"image","threshold"),s=.2989,a=.587,o=.114,l=i.shape[0]*i.shape[1];let c=ke(ss([r]),255),u,d,f,h;if(F(i.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${i.rank}.`),F(i.shape[2]===3||i.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${i.shape[2]}.`),F(i.dtype==="int32"||i.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${i.dtype}.`),F(e==="otsu"||e==="binary",()=>`Method must be binary or otsu, but was ${e}`),i.shape[2]===3){[u,d,f]=pf(i,[1,1,1],-1);const x=ke(u,s),v=ke(d,a),b=ke(f,o);h=Ve(Ve(x,v),b)}else h=t;if(e==="otsu"){const x=EN(Ht(nR(h),"int32"),zs([]),256);c=bOe(x,l)}const g=n?Qw(h,c):qg(h,c);return Ht(ke(g,255),"int32")}function bOe(t,e){let n=ss([-1]),r=ss([0]),i=ss([0]),s,a,o,l,c,u;for(let d=0;d<t.size-1;d++){s=kt(t,0,d+1),a=kt(t,d+1),c=Nt(It(s),e),u=Nt(It(a),e);const f=It(ke(s,ff(0,s.size)));o=Nt(f,It(s));const h=Uf(a.shape,s.size),g=Ve(ff(0,a.size),h),y=ke(a,g);l=Nt(It(y),It(a));const x=Je(o,l),v=Je(o,l),b=ke(c,u);i=ke(ke(b,x),v);const S=qg(i,r);r=Xc(S,i,r),n=Xc(S,ss([d]),n)}return n}const wOe=U({threshold_:xOe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SOe(t,e,n="nearest",r="constant",i=0,s){const a=D(t,"image","transform","float32"),o=D(e,"transforms","transform","float32");F(a.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${a.rank}.`),F(o.rank===2&&(o.shape[0]===a.shape[0]||o.shape[0]===1)&&o.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),F(s==null||s.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${s}.`);const l={image:a,transforms:o},c={interpolation:n,fillMode:r,fillValue:i,outputShape:s};return G.runKernel(jw,l,c)}const kOe=U({transform_:SOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function COe(t,e,n){F(e%1===0,()=>`bandPart(): numLower must be an integer, got ${e}.`),F(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`);const r=D(t,"a","bandPart");F(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);const i=r.shape,[s,a]=r.shape.slice(-2);if(!(e<=s))throw new Error(`bandPart(): numLower (${e}) must not be greater than the number of rows (${s}).`);if(!(n<=a))throw new Error(`bandPart(): numUpper (${n}) must not be greater than the number of columns (${a}).`);e<0&&(e=s),n<0&&(n=a);const o=fe(ff(0,s,1,"int32"),[-1,1]),l=ff(0,a,1,"int32"),c=Je(o,l),u=um(Qw(c,tt(+e,"int32")),AN(c,tt(-n,"int32"))),d=Cl([s,a],r.dtype);return fe(Ca(jl(fe(r,[-1,s,a])).map(f=>Xc(u,f,d))),i)}const $Oe=U({bandPart_:COe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EOe(t){let e;if(Array.isArray(t)){e=!1,F(t!=null&&t.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const i=t[0].shape[0];for(let s=1;s<t.length;++s)F(t[s].shape[0]===i,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${t[s].shape[0]} vs. ${i})`)}else e=!0,t=pf(t,t.shape[0],0).map(i=>Xg(i,[0]));F(t.length<=t[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${t.length}) exceeds number of dimensions (${t[0].shape[0]}).`);const n=[],r=t;for(let i=0;i<t.length;++i)n.push(G.tidy(()=>{let s=r[i];if(i>0)for(let a=0;a<i;++a){const o=ke(It(ke(n[a],s)),n[a]);s=Je(s,o)}return Nt(s,Hg(s,"euclidean"))}));return e?Ca(n,0):n}const TOe=U({gramSchmidt_:EOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Oe(t,e=!1){if(F(t.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${t.rank}`),t.rank===2)return $4(t,e);{const n=t.shape.slice(0,t.shape.length-2).reduce((l,c)=>l*c),r=jl(fe(t,[n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),i=[],s=[];r.forEach(l=>{const[c,u]=$4(l,e);i.push(c),s.push(u)});const a=fe(Ca(i,0),t.shape),o=fe(Ca(s,0),t.shape);return[a,o]}}function $4(t,e=!1){return G.tidy(()=>{F(t.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${t.shape.length}D Tensor.`);const n=t.shape[0],r=t.shape[1];let i=NN(n),s=to(t);const a=Ud([[1]],[1,1]);let o=to(a);const l=n>=r?r:n;for(let c=0;c<l;++c){const u=s,d=o,f=i;[o,s,i]=G.tidy(()=>{const h=kt(s,[c,c],[n-c,1]),g=Hg(h),y=kt(s,[c,c],[1,1]),x=Xc(qg(y,0),Ud([[-1]]),Ud([[1]])),v=Je(y,ke(x,g)),b=Nt(h,v);b.shape[0]===1?o=to(a):o=ar([a,kt(b,[1,0],[b.shape[0]-1,b.shape[1]])],0);const S=va(Nt(gt(x,v),g)),k=kt(s,[c,0],[n-c,r]),$=ke(S,o),T=lm(o);if(c===0)s=Je(k,gt($,gt(T,k)));else{const P=Je(k,gt($,gt(T,k)));s=ar([kt(s,[0,0],[c,r]),P],0)}const _=lm($),R=kt(i,[0,c],[n,i.shape[1]-c]);if(c===0)i=Je(R,gt(gt(R,o),_));else{const P=Je(R,gt(gt(R,o),_));i=ar([kt(i,[0,0],[n,c]),P],1)}return[o,s,i]}),sr([u,d,f])}return!e&&n>r&&(i=kt(i,[0,0],[n,r]),s=kt(s,[0,0],[r,r])),[i,s]})}const IOe=U({qr_:_Oe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Cr;(function(t){t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(Cr||(Cr={}));function NOe(t,e,n=Cr.SUM_BY_NONZERO_WEIGHTS){const r=D(t,"losses","computeWeightedLoss");let i=null;e!=null&&(i=D(e,"weights","computeWeightedLoss"));const s=i==null?r:ke(r,i);if(n===Cr.NONE)return s;if(n===Cr.SUM)return It(s);if(n===Cr.MEAN){if(i==null)return dm(s);{const a=r.size/i.size,o=Nt(It(s),It(i));return a>1?Nt(o,tt(a)):o}}if(n===Cr.SUM_BY_NONZERO_WEIGHTS){if(i==null)return Nt(It(s),tt(r.size));{const a=ke(i,rl(r.shape)),o=Ht(It(WN(a,tt(0))),"float32");return Nt(It(s),o)}}throw Error(`Unknown reduction: ${n}`)}const _o=U({computeWeightedLoss_:NOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ROe(t,e,n,r=Cr.SUM_BY_NONZERO_WEIGHTS){const i=D(t,"labels","absoluteDifference"),s=D(e,"predictions","absoluteDifference");let a=null;n!=null&&(a=D(n,"weights","absoluteDifference")),Kn(i.shape,s.shape,"Error in absoluteDifference: ");const o=Zr(Je(i,s));return _o(o,a,r)}const OOe=U({absoluteDifference_:ROe});function AOe(t,e,n,r,i=Cr.SUM_BY_NONZERO_WEIGHTS){const s=D(t,"labels","cosineDistance"),a=D(e,"predictions","cosineDistance");let o=null;r!=null&&(o=D(r,"weights","cosineDistance")),Kn(s.shape,a.shape,"Error in cosineDistance: ");const l=tt(1),c=Je(l,It(ke(s,a),n,!0));return _o(c,o,i)}const POe=U({cosineDistance_:AOe});function DOe(t,e,n,r=Cr.SUM_BY_NONZERO_WEIGHTS){let i=D(t,"labels","hingeLoss");const s=D(e,"predictions","hingeLoss");let a=null;n!=null&&(a=D(n,"weights","hingeLoss")),Kn(i.shape,s.shape,"Error in hingeLoss: ");const o=tt(1);i=Je(ke(tt(2),i),o);const l=Kg(Je(o,ke(i,s)));return _o(l,a,r)}const FOe=U({hingeLoss_:DOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LOe(t,e,n,r=1,i=Cr.SUM_BY_NONZERO_WEIGHTS){const s=D(t,"labels","huberLoss"),a=D(e,"predictions","huberLoss");let o=null;n!=null&&(o=D(n,"weights","huberLoss")),Kn(s.shape,a.shape,"Error in huberLoss: ");const l=tt(r),c=Zr(Je(a,s)),u=VN(c,l),d=Je(c,u),f=Ve(ke(tt(.5),ls(u)),ke(l,d));return _o(f,o,i)}const MOe=U({huberLoss_:LOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BOe(t,e,n,r=1e-7,i=Cr.SUM_BY_NONZERO_WEIGHTS){const s=D(t,"labels","logLoss"),a=D(e,"predictions","logLoss");let o=null;n!=null&&(o=D(n,"weights","logLoss")),Kn(s.shape,a.shape,"Error in logLoss: ");const l=tt(1),c=tt(r),u=va(ke(s,df(Ve(a,c)))),d=ke(Je(l,s),df(Ve(Je(l,a),c))),f=Je(u,d);return _o(f,o,i)}const zOe=U({logLoss_:BOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jOe(t,e,n,r=Cr.SUM_BY_NONZERO_WEIGHTS){const i=D(t,"labels","meanSquaredError"),s=D(e,"predictions","meanSquaredError");let a=null;n!=null&&(a=D(n,"weights","meanSquaredError")),Kn(i.shape,s.shape,"Error in meanSquaredError: ");const o=iR(i,s);return _o(o,a,r)}const VOe=U({meanSquaredError_:jOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WOe(t,e){const n=D(t,"labels","sigmoidCrossEntropyWithLogits"),r=D(e,"logits","sigmoidCrossEntropyWithLogits");Kn(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");const i=Kg(r),s=ke(r,n),a=DN(kl(va(Zr(r))));return Ve(Je(i,s),a)}function UOe(t,e,n,r=0,i=Cr.SUM_BY_NONZERO_WEIGHTS){let s=D(t,"multiClassLabels","sigmoidCrossEntropy");const a=D(e,"logits","sigmoidCrossEntropy");let o=null;if(n!=null&&(o=D(n,"weights","sigmoidCrossEntropy")),Kn(s.shape,a.shape,"Error in sigmoidCrossEntropy: "),r>0){const c=tt(r),u=tt(1),d=tt(.5);s=Ve(ke(s,Je(u,c)),ke(d,c))}const l=WOe(s,a);return _o(l,o,i)}const GOe=U({sigmoidCrossEntropy_:UOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HOe(t,e,n=-1){if(n===-1&&(n=e.rank-1),n!==e.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${e.rank} and dim was ${n}`);return ka((i,s,a)=>{const l=LN(s,[n],!0),c=Je(Ht(s,"float32"),l);a([i,c]);const u=va(ke(c,i));return{value:It(u,[n]),gradFunc:(h,g)=>{const[y,x]=g,v=_n(h.shape,[n]);return[ke(fe(h,v),Je(Ht(y,"float32"),kl(x))),ke(fe(h,v),Je(kl(x),Ht(y,"float32")))]}}})(t,e)}function qOe(t,e,n,r=0,i=Cr.SUM_BY_NONZERO_WEIGHTS){let s=D(t,"onehotLabels","softmaxCrossEntropy");const a=D(e,"logits","softmaxCrossEntropy");let o=null;if(n!=null&&(o=D(n,"weights","softmaxCrossEntropy")),Kn(s.shape,a.shape,"Error in softmaxCrossEntropy: "),r>0){const c=tt(r),u=tt(1),d=tt(s.shape[1]);s=Ve(ke(s,Je(u,c)),Nt(c,d))}const l=HOe(s,a);return _o(l,o,i)}const KOe=U({softmaxCrossEntropy_:qOe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XOe(t,e,n,r){const i=D(t,"indices","sparseFillEmptyRows","int32"),s=D(e,"values","sparseFillEmptyRows"),a=D(n,"denseShape","sparseFillEmptyRows","int32"),o=D(r,"defaultValue","sparseFillEmptyRows",s.dtype);if(i.rank!==2)throw new Error(`Indices should be Tensor2D but received shape
        ${i.shape}`);if(s.rank!==1)throw new Error(`Values should be Tensor1D but received shape ${s.shape}`);if(a.rank!==1)throw new Error(`Dense shape should be Tensor1D but received shape ${a.shape}`);if(o.rank!==0)throw new Error(`Default value should be a scalar but received shape ${o.shape}`);const l={indices:i,values:s,denseShape:a,defaultValue:o},c=G.runKernel(Rw,l);return{outputIndices:c[0],outputValues:c[1],emptyRowIndicator:c[2],reverseIndexMap:c[3]}}const YOe=U({sparseFillEmptyRows_:XOe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QOe(t,e,n){const r=D(t,"inputIndices","sparseReshape","int32"),i=D(e,"inputShape","sparseReshape","int32"),s=D(n,"newShape","sparseReshape","int32");if(r.rank!==2)throw new Error(`Input indices should be Tensor2D but received shape
        ${r.shape}`);if(i.rank!==1)throw new Error(`Input shape should be Tensor1D but received shape ${i.shape}`);if(s.rank!==1)throw new Error(`New shape should be Tensor1D but received shape ${s.shape}`);const a={inputIndices:r,inputShape:i,newShape:s},o=G.runKernel(Ow,a);return{outputIndices:o[0],outputShape:o[1]}}const ZOe=U({sparseReshape_:QOe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JOe(t,e,n){const r=D(t,"data","sparseSegmentMean"),i=D(e,"indices","sparseSegmentMean","int32"),s=D(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
          ${i.shape}`);if(s.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
          ${s.shape}`);const a={data:r,indices:i,segmentIds:s};return G.runKernel(Aw,a)}const eAe=U({sparseSegmentMean_:JOe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tAe(t,e,n){const r=D(t,"data","sparseSegmentSum"),i=D(e,"indices","sparseSegmentSum","int32"),s=D(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
         ${i.shape}`);if(s.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
         ${s.shape}`);const a={data:r,indices:i,segmentIds:s};return G.runKernel(Pw,a)}const nAe=U({sparseSegmentSum_:tAe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rAe(t,e,n,r,i,s,a,o){const l=D(t,"data","stringNGrams","string");if(l.dtype!=="string")throw new Error("Data must be of datatype string");if(l.shape.length!==1)throw new Error(`Data must be a vector, saw: ${l.shape}`);const c=D(e,"dataSplits","stringNGrams");if(c.dtype!=="int32")throw new Error("Data splits must be of datatype int32");const u={separator:n,nGramWidths:r,leftPad:i,rightPad:s,padWidth:a,preserveShortSequences:o},d={data:l,dataSplits:c},f=G.runKernel(Lw,d,u);return{nGrams:f[0],nGramsSplits:f[1]}}const iAe=U({stringNGrams_:rAe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sAe(t,e,n=!0){const r=D(t,"input","stringSplit","string"),i=D(e,"delimiter","stringSplit","string");if(r.rank!==1)throw new Error(`Input should be Tensor1D but received shape ${r.shape}`);if(i.rank!==0)throw new Error(`Delimiter should be a scalar but received shape ${i.shape}`);const s={skipEmpty:n},a={input:r,delimiter:i},o=G.runKernel(Mw,a,s);return{indices:o[0],values:o[1],shape:o[2]}}const aAe=U({stringSplit_:sAe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oAe(t,e){const n=D(t,"input","stringToHashBucketFast","string"),r={numBuckets:e};if(e<=0)throw new Error("Number of buckets must be at least 1");const i={input:n};return G.runKernel(Bw,i,r)}const lAe=U({stringToHashBucketFast_:oAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JU={fft:t2,ifft:fm,rfft:n2,irfft:rR},eG={hammingWindow:MRe,hannWindow:QU,frame:ZU,stft:VRe},cR={flipLeftRight:HRe,grayscaleToRGB:KRe,resizeNearestNeighbor:vOe,resizeBilinear:gOe,rotateWithOffset:YRe,cropAndResize:URe,nonMaxSuppression:ZRe,nonMaxSuppressionAsync:aOe,nonMaxSuppressionWithScore:lOe,nonMaxSuppressionWithScoreAsync:uOe,nonMaxSuppressionPadded:fOe,nonMaxSuppressionPaddedAsync:hOe,threshold:wOe,transform:kOe},tG={bandPart:$Oe,gramSchmidt:TOe,qr:IOe},nG={absoluteDifference:OOe,computeWeightedLoss:_o,cosineDistance:POe,hingeLoss:FOe,huberLoss:MOe,logLoss:zOe,meanSquaredError:VOe,sigmoidCrossEntropy:GOe,softmaxCrossEntropy:KOe},rG={sparseFillEmptyRows:YOe,sparseReshape:ZOe,sparseSegmentMean:eAe,sparseSegmentSum:nAe},iG={stringNGrams:iAe,stringSplit:aAe,stringToHashBucketFast:lAe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Vl extends VW{minimize(e,n=!1,r){const{value:i,grads:s}=this.computeGradients(e,r);if(r!=null){const a=r.map(o=>({name:o.name,tensor:s[o.name]}));this.applyGradients(a)}else this.applyGradients(s);return sr(s),n?i:(i.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,n){return V8(e,n)}dispose(){this.iterations_!=null&&sr(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:tt(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(Vl,Symbol.hasInstance,{value:t=>t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class f2 extends Vl{constructor(e,n,r=null){super(),this.learningRate=e,this.rho=n,this.epsilon=r,this.accumulatedGrads=[],this.accumulatedUpdates=[],r==null&&(this.epsilon=G.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const s=G.registeredVariables[r],a=!1;this.accumulatedGrads[i]==null&&(this.accumulatedGrads[i]={originalName:`${r}/accum_grad`,variable:st(()=>di(s).variable(a))}),this.accumulatedUpdates[i]==null&&(this.accumulatedUpdates[i]={originalName:`${r}/accum_var`,variable:st(()=>di(s).variable(a))});const o=Array.isArray(e)?e[i].tensor:e[r];if(o==null)return;const l=this.accumulatedGrads[i].variable,c=this.accumulatedUpdates[i].variable;st(()=>{const u=Ve(ke(l,this.rho),ke(ls(o),1-this.rho)),d=ke(Nt(Sa(Ve(c,this.epsilon)),Sa(Ve(l,this.epsilon))),o),f=Ve(ke(c,this.rho),ke(ls(d),1-this.rho));l.assign(u),c.assign(f);const h=Ve(ke(d,-this.learningRate),s);s.assign(h)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(sr(this.accumulatedGrads.map(e=>e.variable)),sr(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=e.length/2,r=!1;this.accumulatedGrads=e.slice(0,n).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.accumulatedUpdates=e.slice(n,n*2).map(i=>({originalName:i.name,variable:i.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.rho,n.epsilon)}}f2.className="Adadelta";Bl(f2);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class p2 extends Vl{constructor(e,n=.1){super(),this.learningRate=e,this.initialAccumulatorValue=n,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const s=G.registeredVariables[r];this.accumulatedGrads[i]==null&&(this.accumulatedGrads[i]={originalName:`${r}/accumulator`,variable:st(()=>Uf(s.shape,this.initialAccumulatorValue).variable(!1))});const a=Array.isArray(e)?e[i].tensor:e[r];if(a==null)return;const o=this.accumulatedGrads[i].variable;st(()=>{const l=Ve(o,ls(a));o.assign(l);const c=Ve(ke(Nt(a,Sa(Ve(l,G.backend.epsilon()))),-this.learningRate),s);s.assign(c)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&sr(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulatedGrads=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,n){return new e(n.learningRate,n.initialAccumulatorValue)}}p2.className="Adagrad";Bl(p2);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class h2 extends Vl{constructor(e,n,r,i=null){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=i,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],st(()=>{this.accBeta1=tt(n).variable(),this.accBeta2=tt(r).variable()}),i==null&&(this.epsilon=G.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);st(()=>{const r=Je(1,this.accBeta1),i=Je(1,this.accBeta2);n.forEach((s,a)=>{const o=G.registeredVariables[s],l=!1;this.accumulatedFirstMoment[a]==null&&(this.accumulatedFirstMoment[a]={originalName:`${s}/m`,variable:st(()=>di(o).variable(l))}),this.accumulatedSecondMoment[a]==null&&(this.accumulatedSecondMoment[a]={originalName:`${s}/v`,variable:st(()=>di(o).variable(l))});const c=Array.isArray(e)?e[a].tensor:e[s];if(c==null)return;const u=this.accumulatedFirstMoment[a].variable,d=this.accumulatedSecondMoment[a].variable,f=Ve(ke(u,this.beta1),ke(c,1-this.beta1)),h=Ve(ke(d,this.beta2),ke(ls(c),1-this.beta2)),g=Nt(f,r),y=Nt(h,i);u.assign(f),d.assign(h);const x=Ve(ke(Nt(g,Ve(Sa(y),this.epsilon)),-this.learningRate),o);o.assign(x)}),this.accBeta1.assign(ke(this.accBeta1,this.beta1)),this.accBeta2.assign(ke(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&sr(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedSecondMoment!=null&&sr(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e),st(()=>{this.accBeta1.assign(uf(this.beta1,this.iterations_+1)),this.accBeta2.assign(uf(this.beta2,this.iterations_+1))});const n=e.length/2,r=!1;this.accumulatedFirstMoment=e.slice(0,n).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.accumulatedSecondMoment=e.slice(n,n*2).map(i=>({originalName:i.name,variable:i.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon)}}h2.className="Adam";Bl(h2);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class m2 extends Vl{constructor(e,n,r,i=null,s=0){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=i,this.decay=s,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],st(()=>{this.iteration=tt(0).variable(),this.accBeta1=tt(n).variable()}),i==null&&(this.epsilon=G.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);st(()=>{const r=Je(1,this.accBeta1),i=Nt(-this.learningRate,Ve(ke(this.iteration,this.decay),1));n.forEach((s,a)=>{const o=G.registeredVariables[s],l=!1;this.accumulatedFirstMoment[a]==null&&(this.accumulatedFirstMoment[a]={originalName:`${s}/m`,variable:di(o).variable(l)}),this.accumulatedWeightedInfNorm[a]==null&&(this.accumulatedWeightedInfNorm[a]={originalName:`${s}/v`,variable:di(o).variable(l)});const c=Array.isArray(e)?e[a].tensor:e[s];if(c==null)return;const u=this.accumulatedFirstMoment[a].variable,d=this.accumulatedWeightedInfNorm[a].variable,f=Ve(ke(u,this.beta1),ke(c,1-this.beta1)),h=ke(d,this.beta2),g=Zr(c),y=jN(h,g);u.assign(f),d.assign(y);const x=Ve(ke(Nt(i,r),Nt(f,Ve(y,this.epsilon))),o);o.assign(x)}),this.iteration.assign(Ve(this.iteration,1)),this.accBeta1.assign(ke(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&sr(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedWeightedInfNorm!=null&&sr(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)}}m2.className="Adamax";Bl(m2);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Yg extends Vl{constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const s=Array.isArray(e)?e[i].tensor:e[r];if(s==null)return;const a=G.registeredVariables[r];st(()=>{const o=Ve(ke(this.c,s),a);a.assign(o)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=ca(tt(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(e=await this.extractIterations(e),e.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,n){return new e(n.learningRate)}}Yg.className="SGD";Bl(Yg);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class g2 extends Yg{constructor(e,n,r=!1){super(e),this.learningRate=e,this.momentum=n,this.useNesterov=r,this.accumulations=[],this.m=tt(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const s=G.registeredVariables[r];this.accumulations[i]==null&&(this.accumulations[i]={originalName:`${r}/momentum`,variable:st(()=>di(s).variable(!1))});const a=this.accumulations[i].variable,o=Array.isArray(e)?e[i].tensor:e[r];o!=null&&st(()=>{let l;const c=Ve(ke(this.m,a),o);this.useNesterov?l=Ve(ke(this.c,Ve(o,ke(c,this.m))),s):l=Ve(ke(this.c,c),s),a.assign(c),s.assign(l)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&sr(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulations=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,n){return new e(n.learningRate,n.momentum,n.useNesterov)}}g2.className="Momentum";Bl(g2);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class y2 extends Vl{constructor(e,n=.9,r=0,i=null,s=!1){if(super(),this.learningRate=e,this.decay=n,this.momentum=r,this.epsilon=i,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=s,i==null&&(this.epsilon=G.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const s=G.registeredVariables[r],a=!1;this.accumulatedMeanSquares[i]==null&&(this.accumulatedMeanSquares[i]={originalName:`${r}/rms`,variable:st(()=>di(s).variable(a))}),this.accumulatedMoments[i]==null&&(this.accumulatedMoments[i]={originalName:`${r}/momentum`,variable:st(()=>di(s).variable(a))}),this.accumulatedMeanGrads[i]==null&&this.centered&&(this.accumulatedMeanGrads[i]={originalName:`${r}/mg`,variable:st(()=>di(s).variable(a))});const o=Array.isArray(e)?e[i].tensor:e[r];if(o==null)return;const l=this.accumulatedMeanSquares[i].variable,c=this.accumulatedMoments[i].variable;st(()=>{const u=Ve(ke(l,this.decay),ke(ls(o),1-this.decay));if(this.centered){const d=this.accumulatedMeanGrads[i].variable,f=Ve(ke(d,this.decay),ke(o,1-this.decay)),h=Nt(ke(o,this.learningRate),Sa(Je(u,Ve(ls(f),this.epsilon)))),g=Ve(ke(c,this.momentum),h);l.assign(u),d.assign(f),c.assign(g);const y=Je(s,g);s.assign(y)}else{const d=Ve(ke(l,this.decay),ke(ls(o),1-this.decay)),f=Ve(ke(c,this.momentum),Nt(ke(o,this.learningRate),Sa(Ve(d,this.epsilon))));l.assign(d),c.assign(f);const h=Je(s,f);s.assign(h)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&sr(this.accumulatedMeanSquares.map(e=>e.variable)),this.accumulatedMeanGrads!=null&&this.centered&&sr(this.accumulatedMeanGrads.map(e=>e.variable)),this.accumulatedMoments!=null&&sr(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=this.centered?e.length/3:e.length/2,r=!1;this.accumulatedMeanSquares=e.slice(0,n).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.accumulatedMoments=e.slice(n,n*2).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.centered&&(this.accumulatedMeanGrads=e.slice(n*2,n*3).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,n){return new e(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)}}y2.className="RMSProp";Bl(y2);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Wo{static sgd(e){return new Yg(e)}static momentum(e,n,r=!1){return new g2(e,n,r)}static rmsprop(e,n=.9,r=0,i=null,s=!1){return new y2(e,n,r,i,s)}static adam(e=.001,n=.9,r=.999,i=null){return new h2(e,n,r,i)}static adadelta(e=.001,n=.95,r=null){return new f2(e,n,r)}static adamax(e=.002,n=.9,r=.999,i=null,s=0){return new m2(e,n,r,i,s)}static adagrad(e,n=.1){return new p2(e,n)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cAe={sgd:Wo.sgd,momentum:Wo.momentum,adadelta:Wo.adadelta,adagrad:Wo.adagrad,rmsprop:Wo.rmsprop,adamax:Wo.adamax,adam:Wo.adam};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uAe=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:t=>t();function sG(){return new Promise(t=>uAe(()=>t()))}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uR(t,e){const n=t[0].length;t.forEach((i,s)=>{F(i.length===n,()=>`Error in concat${n}D: rank of tensors[${s}] must be the same as the rank of the rest (${n})`)}),F(e>=0&&e<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const r=t[0];t.forEach((i,s)=>{for(let a=0;a<n;a++)F(a===e||i[a]===r[a],()=>`Error in concat${n}D: Shape of tensors[${s}] (${i}) does not match the shape of the rest (${r}) along the non-concatenated axis ${s}.`)})}function xa(t,e){const n=t[0].slice();for(let r=1;r<t.length;r++)n[e]+=t[r][e];return n}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Rs;(function(t){t[t.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",t[t.VALUE_ROWIDS=1]="VALUE_ROWIDS",t[t.ROW_LENGTHS=2]="ROW_LENGTHS",t[t.ROW_SPLITS=3]="ROW_SPLITS",t[t.ROW_LIMITS=4]="ROW_LIMITS",t[t.ROW_STARTS=5]="ROW_STARTS"})(Rs||(Rs={}));function aG(t,e,n){let r=new Array;if(n==null&&e==null)return r;if(e==null)for(;r.length<t+n.length;)r.push(-1);else r=e.slice();if(n==null)return r;if(t+n.length!==r.length)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.rank = ${t+n.length}, but shape.rank = ${r.length}`);for(let i=1;i<n.length;++i){const s=n[i],a=r[r.length-n.length+i],o=r[a];if(s>=0)if(o>=0){if(o!==s)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.shape[${i+t}] = ${s} but shape[${i+t}] = ${o}`)}else r[a]=s}return r}function oG(t){const e={FIRST_DIM_SIZE:Rs.FIRST_DIM_SIZE,VALUE_ROWIDS:Rs.VALUE_ROWIDS,ROW_LENGTHS:Rs.ROW_LENGTHS,ROW_SPLITS:Rs.ROW_SPLITS,ROW_LIMITS:Rs.ROW_LIMITS,ROW_STARTS:Rs.ROW_STARTS},n=[];for(const r of t)if(r in e)n.push(e[r]);else break;return n}function lG(t){return t.length===0?0:t[0]===Rs.FIRST_DIM_SIZE?t.length-1:t.length}function cG(t,e){if(t==null||e==null)return;const n=t.length,r=e.length;if(n>=r)throw new Error(`defaultValue.shape=${t} and ragged tensor flatValues.shape=${e}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${r})`);for(let i=0;i<Math.min(n,r-1);++i){const s=t[i],a=e[i+1];if(s>=0&&a>=0&&s!==1&&s!==a)throw new Error(`defaultValue.shape=${t}, and ragged tensor input flatValues.shape=${e} are incompatible: defaultValue.shape[${i-t.length}] = ${s} but ragged tensor input.flatValues.shape[${i-t.length}] = ${a}`)}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dR=30;function v2(t){return t<=dR?t:w1(t,Math.floor(Math.sqrt(t)))}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fR(t,e,n){const r=n*(typeof t=="number"?t:t[0]),i=e*(typeof t=="number"?t:t[1]);return[r,i]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qg(t,e,n,r=!0){let i=[];if(r)i=i.concat(e.slice(0)),i.push(t[0]/n),i=i.concat(t.slice(1));else{i=i.concat(t[0]);const s=e.length;for(let a=0;a<s;++a)i=i.concat([t[a+1]/e[a],e[a]]);i=i.concat(t.slice(s+1))}return i}function Zg(t,e,n=!0){const r=[];if(n){r.push(e);for(let i=e+1;i<t;++i)i<=2*e?(r.push(i),r.push(i-(e+1))):r.push(i)}else{const i=[],s=[];for(let a=1;a<t;++a)a>=e*2+1||a%2===1?s.push(a):i.push(a);r.push(...i),r.push(0),r.push(...s)}return r}function Jg(t,e,n,r=!0){const i=[];r?i.push(t[0]/n):i.push(t[0]*n);for(let s=1;s<t.length;++s)s<=e.length?r?i.push(e[s-1]*t[s]):i.push(t[s]/e[s-1]):i.push(t[s]);return i}function pR(t,e){const n=[0];for(let r=0;r<e;++r)n.push(t[r][0]);return n}function hR(t,e,n){const r=t.slice(0,1);for(let i=0;i<n;++i)r.push(t[i+1]-e[i][0]-e[i][1]);return r}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mR=1.7580993408473768,gR=1.0507009873554805;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yR=.3275911,vR=.254829592,xR=-.284496736,bR=1.421413741,wR=-1.453152027,SR=1.061405429;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ho(t,e){if(t.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${e.length}.`);const n=new Float32Array(t.length*2);for(let r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function uG(t){const e=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let r=0;r<t.length;r+=2)e[r/2]=t[r],n[r/2]=t[r+1];return{real:e,imag:n}}function dG(t){const e=Math.ceil(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let i=0;i<t.length;i+=4)n[Math.floor(i/4)]=t[i],r[Math.floor(i/4)]=t[i+1];return{real:n,imag:r}}function fG(t){const e=Math.floor(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let i=2;i<t.length;i+=4)n[Math.floor(i/4)]=t[i],r[Math.floor(i/4)]=t[i+1];return{real:n,imag:r}}function kR(t,e){const n=t[e*2],r=t[e*2+1];return{real:n,imag:r}}function pG(t,e,n,r){t[r*2]=e,t[r*2+1]=n}function hG(t,e){const n=new Float32Array(t/2),r=new Float32Array(t/2);for(let i=0;i<Math.ceil(t/2);i++){const s=(e?2:-2)*Math.PI*(i/t);n[i]=Math.cos(s),r[i]=Math.sin(s)}return{real:n,imag:r}}function mG(t,e,n){const r=(n?2:-2)*Math.PI*(t/e),i=Math.cos(r),s=Math.sin(r);return{real:i,imag:s}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aC="->",dAe=/->/g,E4=",",T4="...";function CR(t,e){t=t.replace(/\s/g,"");const n=(t.length-t.replace(dAe,"").length)/aC.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${aC}").`);const[r,i]=t.split(aC);F(r.indexOf(T4)===-1,()=>`The ellipsis notation ("${T4}") is not supported yet.`);const s=r.split(E4),a=s.length;if(e!==a)throw new Error(`Expected ${a} input tensors, received ${e}`);if(a>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const o=[];for(let f=0;f<i.length;++f){const h=i[f];if(!s.some(g=>g.indexOf(h)!==-1))throw new Error(`Output subscripts contain the label ${h} not present in the input subscripts.`);o.indexOf(h)===-1&&o.push(h)}for(let f=0;f<r.length;++f){const h=r[f];o.indexOf(h)===-1&&h!==E4&&o.push(h)}const l=new Array(s.length);for(let f=0;f<a;++f){if(new Set(s[f].split("")).size!==s[f].length)throw new Error(`Found duplicate axes in input component ${s[f]}. Support for duplicate axes in input is not implemented yet.`);l[f]=[];for(let h=0;h<s[f].length;++h)l[f].push(o.indexOf(s[f][h]))}const c=o.length,u=i.length,d=[];for(let f=u;f<c;++f)d.push(f);return{allDims:o,summedDims:d,idDims:l}}function $R(t,e){let n=new Array(t);n.fill(-1);for(let i=0;i<e.length;++i)n[e[i]]=i;const r=[];for(let i=0;i<t;++i)n[i]===-1&&r.push(i);return n=n.filter(i=>i!==-1),{permutationIndices:n,expandDims:r}}function ER(t,e,n){const r=new Array(t);for(let i=0;i<n.length;++i){const s=n[i].shape;for(let a=0;a<e[i].length;++a)r[e[i][a]]===void 0?r[e[i][a]]=s[a]:F(r[e[i][a]]===s[a],()=>`Expected dimension ${r[e[i][a]]} at axis ${a} of input shaped ${JSON.stringify(s)}, but got dimension ${s[a]}`)}}function TR(t,e){const n=t,r=[];let i=0;t.length===0&&n.push(-1),i=t.length+1;for(let a=0;a<i;++a)r.push([]);const s=[];for(let a=0;a<n.length;++a){const o=n[a],l=fAe(e,o);for(const c of l)s.indexOf(c)===-1&&(r[a].push(c),s.push(c))}return{path:n,steps:r}}function _R(t){return t.every((e,n)=>e===n)}function fAe(t,e){const n=[];for(let r=0;r<t.length;++r)(t[r].length===0||t[r].indexOf(e)!==-1||e===-1)&&n.push(r);return n}function IR(t,e,n=0){let r=[];if(typeof e=="number")F(t.shape[n]%e===0,()=>"Number of splits must evenly divide the axis."),r=new Array(e).fill(t.shape[n]/e);else{const i=e.reduce((a,o)=>(o===-1&&(a+=1),a),0);F(i<=1,()=>"There should be only one negative value in split array.");const s=e.indexOf(-1);if(s!==-1){const a=e.reduce((o,l)=>l>0?o+l:o);e[s]=t.shape[n]-a}F(t.shape[n]===e.reduce((a,o)=>a+o),()=>"The sum of sizes must match the size of the axis dimension."),r=e}return r}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gG(t){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${t}`}function yG(t,e){return`indices(${t}, 0) is invalid: ${e} < 0`}function vG(t,e,n){return`indices(${t}, 0) is invalid: ${e} >= ${n}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xG(t,e){return`only one output dimension may be -1, not both ${t} and ${e}`}function bG(t,e){return`size ${t} must be non-negative, not ${e}`}function wG(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function SG(t,e){const n=oe(t),r=oe(e);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${r}. inputShape=${t} outputShape= ${e}`}function kG(t,e){const n=oe(t),r=oe(e);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${r}. inputShape=${t} outputShape=${e}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RE(){return"segment ids must be >= 0"}function CG(){return"segment ids are not increasing"}function $G(t,e){return`Segment id ${t} out of range [0, ${e}), possibly because segmentIds input is not sorted.`}function EG(t,e,n){return`Bad: indices[${t}] == ${e} out of range [0, ${n})`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TG(t,e){let n=!1,r;for(t<=dR?(r=t,n=!0):r=w1(t,Math.floor(Math.sqrt(t)));!n;)r>e||r===t?n=!0:r=w1(t,r+1);return r}function _G(t,e,n){const r=[],i=t.length;for(let s=0;s<i;s++)s!==e?r.push(t[s]):r.push(n);return r}function NR(t,e,n,r){const i=e.shape.length,s=t.shape.length;if(r!==0&&(r<-i||r>i))throw new Error(`Expect batchDims in the range of [-${i}, ${i}], but got ${r}`);if(r<0&&(r+=i),r>s)throw new Error(`batchDims (${r}) must be less than rank(x) (
    ${s}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let d=0;d<r;++d)if(t.shape[d]!==e.shape[d])throw new Error(`x.shape[${d}]: ${t.shape[d]} should be equal to indices.shape[${d}]: ${e.shape[d]}.`);const a=t.shape[n],o=[];let l=1,c=1,u=1;for(let d=0;d<r;++d)o.push(t.shape[d]),l*=t.shape[d];for(let d=r;d<n;d++)o.push(t.shape[d]),c*=t.shape[d];for(let d=r;d<i;d++)o.push(e.shape[d]);for(let d=n+1;d<s;d++)o.push(t.shape[d]),u*=t.shape[d];return{batchSize:l,sliceSize:u,outerSize:c,dimSize:a,outputShape:o}}const pAe=Object.freeze(Object.defineProperty({__proto__:null,collectGatherOpShapeInfo:NR,computeOutShape:_G,segOpComputeOptimalWindowSize:TG},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yc(t){try{return t.map(e=>fo(e))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function IG(t){return t.map(e=>ya(e))}const NG=Object.freeze(Object.defineProperty({__proto__:null,ERF_A1:vR,ERF_A2:xR,ERF_A3:bR,ERF_A4:wR,ERF_A5:SR,ERF_P:yR,PARALLELIZE_THRESHOLD:dR,get RowPartitionType(){return Rs},SELU_SCALE:gR,SELU_SCALEALPHA:mR,applyActivation:o2,assertAndGetBroadcastShape:rt,assertAxesAreInnerMostDims:Yn,assertParamsConsistent:uR,assignToTypedArray:pG,axesAreInnerMostDims:IN,calculateShapes:Wf,checkEinsumDimSizes:ER,checkPadOnDimRoundingMode:ys,combineLocations:O8,combineRaggedTensorToTensorShapes:aG,complexWithEvenIndex:dG,complexWithOddIndex:fG,computeConv2DInfo:Fn,computeConv3DInfo:zl,computeDefaultPad:kN,computeDilation2DInfo:Vg,computeOptimalWindowSize:v2,computeOutAndReduceShapes:Xn,computeOutShape:xa,computePool2DInfo:gs,computePool3DInfo:Eo,convertConv2DDataFormat:To,decodeEinsumEquation:CR,eitherStridesOrDilationsAreOne:lr,expandShapeToKeepDim:_n,exponent:mG,exponents:hG,fromStringArrayToUint8:IG,fromUint8ToStringArray:Yc,getAxesPermutation:fn,getBroadcastDims:Kc,getComplexWithIndex:kR,getEinsumComputePath:TR,getEinsumPermutation:$R,getFusedBiasGradient:a2,getFusedDyActivation:s2,getImageCenter:fR,getInnerMostAxes:pn,getPermuted:Zg,getRaggedRank:lG,getReductionAxes:uN,getReshaped:Qg,getReshapedPermuted:Jg,getRowPartitionTypesHelper:oG,getSliceBeginCoords:pR,getSliceSize:hR,getSparseFillEmptyRowsIndicesDenseShapeMismatch:gG,getSparseFillEmptyRowsNegativeIndexErrorMessage:yG,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:vG,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:wG,getSparseReshapeInputOutputMismatchErrorMessage:kG,getSparseReshapeInputOutputMultipleErrorMessage:SG,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:xG,getSparseReshapeNegativeOutputDimErrorMessage:bG,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:EG,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:RE,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:CG,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:$G,getUndoAxesPermutation:Gg,isIdentityPermutation:_R,log:u$e,mergeRealAndImagArrays:ho,prepareAndValidate:Xw,prepareSplitSize:IR,segment_util:pAe,shouldFuse:l2,slice_util:jW,splitRealAndImagArrays:uG,tupleValuesAreOne:cm,upcastType:Br,validateDefaultValueShape:cG,validateInput:pN,validateUpdateShape:fN,warn:Si},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hAe=Object.freeze(Object.defineProperty({__proto__:null,nonMaxSuppressionV3Impl:c2,nonMaxSuppressionV4Impl:u2,nonMaxSuppressionV5Impl:d2,whereImpl:r2},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mAe=Object.freeze(Object.defineProperty({__proto__:null,Abs:lb,Acos:Fm,Acosh:Lm,AdadeltaOptimizer:f2,AdagradOptimizer:p2,AdamOptimizer:h2,AdamaxOptimizer:m2,Add:Vf,AddN:cb,All:ub,Any:db,ArgMax:fb,ArgMin:pb,Asin:Mm,Asinh:Bm,Atan:zm,Atan2:Vm,Atanh:jm,AvgPool:hb,AvgPool3D:mb,AvgPool3DGrad:jI,AvgPoolGrad:zI,BatchMatMul:gb,BatchToSpaceND:yb,Bincount:vb,BroadcastArgs:xb,BroadcastTo:i$e,Cast:Wm,Ceil:Um,ClipByValue:Gm,Complex:bb,ComplexAbs:wb,Concat:Sb,Conv2D:kb,Conv2DBackpropFilter:Cb,Conv2DBackpropInput:$b,Conv3D:Eb,Conv3DBackpropFilterV2:VI,Conv3DBackpropInputV2:Tb,Cos:Hm,Cosh:qm,CropAndResize:Nb,Cumprod:_b,Cumsum:Ib,DataStorage:AI,DenseBincount:Rb,DepthToSpace:Ob,DepthwiseConv2dNative:Ab,DepthwiseConv2dNativeBackpropFilter:Pb,DepthwiseConv2dNativeBackpropInput:Db,Diag:Fb,Dilation2D:Lb,Dilation2DBackpropFilter:pE,Dilation2DBackpropInput:fE,get ENV(){return MI},Einsum:Mb,Elu:Xm,EluGrad:WI,Environment:ZV,Equal:Qm,Erf:Ym,Exp:Zm,ExpandDims:Bb,Expm1:Jm,FFT:zb,Fill:jb,FlipLeftRight:Vb,Floor:eg,FloorDiv:tg,FromPixels:S1,FusedBatchNorm:Wb,FusedConv2D:rm,FusedDepthwiseConv2D:im,GatherNd:Gb,GatherV2:Ub,Greater:ng,GreaterEqual:rg,IFFT:Hb,Identity:ig,Imag:qb,IsFinite:sg,IsInf:ag,IsNan:og,KernelBackend:sb,LRN:Yb,LRNGrad:UI,LeakyRelu:Kb,Less:lg,LessEqual:cg,LinSpace:Xb,Log:ug,Log1p:dg,LogSoftmax:a$e,LogicalAnd:fg,LogicalNot:pg,LogicalOr:hg,LogicalXor:s$e,LowerBound:o$e,Max:Qb,MaxPool:Zb,MaxPool3D:Jb,MaxPool3DGrad:HI,MaxPoolGrad:GI,MaxPoolWithArgmax:ew,Maximum:mg,Mean:tw,Min:nw,Minimum:gg,MirrorPad:rw,Mod:yg,MomentumOptimizer:g2,Multinomial:iw,Multiply:vg,Neg:sw,NonMaxSuppressionV3:aw,NonMaxSuppressionV4:ow,NonMaxSuppressionV5:lw,NotEqual:xg,OP_SCOPE_SUFFIX:tN,OneHot:uw,OnesLike:cw,Optimizer:Vl,OptimizerConstructors:Wo,Pack:dw,PadV2:fw,Pool:l$e,Pow:bg,Prelu:pw,Prod:hw,RMSPropOptimizer:y2,RaggedGather:mw,RaggedTensorToTensor:gw,Range:yw,get Rank(){return yE},Real:vw,RealDiv:Km,Reciprocal:wg,get Reduction(){return Cr},Relu:Sg,Relu6:kg,Reshape:xw,ResizeBilinear:ww,ResizeBilinearGrad:KI,ResizeNearestNeighbor:bw,ResizeNearestNeighborGrad:qI,Reverse:Sw,RotateWithOffset:Hw,Round:Cg,Rsqrt:$g,SGDOptimizer:Yg,ScatterNd:kw,SearchSorted:Cw,Select:$w,Selu:Eg,Sigmoid:Ng,Sign:Ig,Sin:Tg,Sinh:_g,Slice:Ew,Softmax:Nw,Softplus:Rg,SpaceToBatchND:_w,SparseFillEmptyRows:Rw,SparseReshape:Ow,SparseSegmentMean:Aw,SparseSegmentSum:Pw,SparseToDense:Dw,SplitV:Iw,Sqrt:Og,Square:XI,SquaredDifference:Ag,Step:Mg,StridedSlice:Fw,StringNGrams:Lw,StringSplit:Mw,StringToHashBucketFast:Bw,Sub:Pg,Sum:Tw,Tan:Dg,Tanh:Fg,Tensor:tn,TensorBuffer:En,Tile:Lg,TopK:zw,Transform:jw,Transpose:Bd,Unique:Vw,Unpack:Ww,UnsortedSegmentSum:Uw,UpperBound:c$e,Variable:am,ZerosLike:Gw,_FusedMatMul:nm,abs:Zr,acos:GW,acosh:HW,add:Ve,addN:qW,all:KW,any:XW,argMax:YW,argMin:QW,asin:ZW,asinh:JW,atan:e8,atan2:t8,atanh:n8,avgPool:CN,avgPool3d:r8,backend:tTe,backend_util:NG,basicLSTMCell:i8,batchNorm:Wg,batchNorm2d:s8,batchNorm3d:a8,batchNorm4d:o8,batchToSpaceND:$N,bincount:EN,booleanMaskAsync:WU,broadcastArgs:l8,broadcastTo:Vd,broadcast_util:uTe,browser:gTe,buffer:qe,cast:Ht,ceil:c8,clipByValue:u8,clone:to,complex:po,concat:ar,concat1d:d8,concat2d:f8,concat3d:p8,concat4d:h8,conv1d:m8,conv2d:Ug,conv2dTranspose:y8,conv3d:v8,conv3dTranspose:x8,copyRegisteredKernels:h$e,cos:b8,cosh:w8,cosineWindow:i2,cumprod:S8,cumsum:k8,customGrad:ka,denseBincount:C8,deprecationWarn:UEe,depthToSpace:$8,depthwiseConv2d:Yw,device_util:V$e,diag:E8,dilation2d:T8,disableDeprecationWarnings:WEe,dispose:sr,disposeVariables:GEe,div:Nt,divNoNan:_8,dot:I8,dropout:KU,einsum:N8,elu:_N,enableDebugMode:VEe,enableProdMode:jEe,enclosingPowerOfTwo:oR,engine:Ua,env:re,equal:TN,erf:R8,euclideanNorm:P8,exp:kl,expandDims:Ga,expm1:D8,eye:NN,fft:t2,fill:Uf,findBackend:JEe,findBackendFactory:eTe,floor:RN,floorDiv:SN,fused:YU,gather:ON,gatherND:qU,gather_util:yTe,getBackend:QEe,getGradient:hE,getKernel:k1,getKernelsForBackend:C1,grad:SIe,grads:kIe,greater:qg,greaterEqual:AN,ifft:fm,imag:jg,image:cR,inTopKAsync:XU,io:lN,irfft:rR,isFinite:F8,isInf:L8,isNaN:M8,keep:ca,kernel_impls:hAe,leakyRelu:PN,less:B8,lessEqual:Qw,linalg:tG,linspace:z8,localResponseNormalization:j8,log:df,log1p:DN,logSigmoid:W8,logSoftmax:U8,logSumExp:LN,logicalAnd:um,logicalNot:MN,logicalOr:BN,logicalXor:G8,losses:nG,lowerBound:H8,matMul:gt,math:cTe,max:Nc,maxPool:zN,maxPool3d:q8,maxPoolWithArgmax:K8,maximum:jN,mean:dm,memory:HEe,meshgrid:X8,min:N1,minimum:VN,mirrorPad:Y8,mod:Q8,moments:Z8,movingAverage:UU,mul:ke,multiRNNCell:J8,multinomial:eU,neg:va,nextFrame:sG,norm:Hg,notEqual:WN,oneHot:T1,ones:rl,onesLike:tU,op:U,outerProduct:nU,pad:Gf,pad1d:rU,pad2d:iU,pad3d:sU,pad4d:aU,pool:oU,pow:uf,prelu:GN,print:sN,prod:lU,profile:qEe,raggedGather:cU,raggedTensorToTensor:uU,rand:dU,randomGamma:pU,randomNormal:JN,randomStandardNormal:hU,randomUniform:eR,range:ff,ready:YEe,real:cf,reciprocal:mU,registerBackend:cN,registerGradient:d$e,registerKernel:qw,relu:Kg,relu6:tR,removeBackend:ZEe,reshape:fe,reverse:$l,reverse1d:gU,reverse2d:yU,reverse3d:vU,reverse4d:xU,rfft:n2,round:nR,rsqrt:bU,scalar:tt,scatterND:GU,scatter_util:vTe,searchSorted:Jw,selu:wU,separableConv2d:SU,serialization:kTe,setBackend:XEe,setPlatform:nTe,setdiff1dAsync:kU,sigmoid:Ic,sign:CU,signal:eG,sin:$U,sinh:EU,slice:kt,slice1d:TU,slice2d:_U,slice3d:IU,slice4d:NU,slice_util:jW,softmax:RU,softplus:FN,spaceToBatchND:UN,sparse:rG,sparseToDense:HU,spectral:JU,split:pf,sqrt:Sa,square:ls,squaredDifference:iR,squeeze:Xg,stack:Ca,step:sR,stridedSlice:OU,string:iG,sub:Je,sum:It,sumOutType:Kw,tan:AU,tanh:I1,tensor:zs,tensor1d:ss,tensor2d:Ud,tensor3d:dN,tensor4d:PU,tensor5d:DU,tensor6d:FU,tensor_util:L$e,test_util:ATe,tidy:st,tile:Wd,time:KEe,topk:LU,train:cAe,transpose:lm,truncatedNormal:MU,unique:BU,unregisterGradient:p$e,unregisterKernel:f$e,unsortedSegmentSum:zU,unstack:jl,upcastType:Br,upperBound:jU,util:k$e,valueAndGrad:CIe,valueAndGrads:$Ie,variable:VU,variableGrads:V8,version_core:PTe,where:Xc,whereAsync:aR,zeros:Cl,zerosLike:di},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gAe=re();gAe.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,t=>{t&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var qi;(function(t){t[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_QINT16=15]="DT_QINT16",t[t.DT_QUINT16=16]="DT_QUINT16",t[t.DT_UINT16=17]="DT_UINT16",t[t.DT_COMPLEX128=18]="DT_COMPLEX128",t[t.DT_HALF=19]="DT_HALF",t[t.DT_RESOURCE=20]="DT_RESOURCE",t[t.DT_VARIANT=21]="DT_VARIANT",t[t.DT_UINT32=22]="DT_UINT32",t[t.DT_UINT64=23]="DT_UINT64",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",t[t.DT_QINT16_REF=115]="DT_QINT16_REF",t[t.DT_QUINT16_REF=116]="DT_QUINT16_REF",t[t.DT_UINT16_REF=117]="DT_UINT16_REF",t[t.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",t[t.DT_HALF_REF=119]="DT_HALF_REF",t[t.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",t[t.DT_VARIANT_REF=121]="DT_VARIANT_REF",t[t.DT_UINT32_REF=122]="DT_UINT32_REF",t[t.DT_UINT64_REF=123]="DT_UINT64_REF"})(qi||(qi={}));var _4;(function(t){(function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"})(t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))})(_4||(_4={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yAe={};function RG(t){return yAe[t]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I(t,e,n,r,i){const s=e.inputParams[t];if(s&&s.inputIndexStart!==void 0){const o=s.inputIndexStart,l=s.inputIndexEnd===0?void 0:s.inputIndexEnd===void 0?o+1:s.inputIndexEnd;if(s.type==="tensor")return $r(e.inputNames[s.inputIndexStart],n,r,i);if(s.type==="tensors")return e.inputNames.slice(o,l).map(f=>$r(f,n,r,i));const c=$r(e.inputNames.slice(o)[0],n,r,i),u=c.dataSync();return s.type==="number"?u[0]:Ii(c.shape,u)}const a=e.attrParams[t];return a&&a.value}function $r(t,e,n,r){const[i,s]=Qr(t);if(r!=null){const o=r.getHashTableHandleByName(i);if(o!=null)return o}const a=n.currentContextIds.find(o=>!!e[R1(i,o)]);return a!==void 0?e[R1(i,a)][s]:void 0}function vAe(t,e,n){return e[R1(t,n.currentContextId)]}function aa(t,e){const[n,r,i]=Qr(t);return[R1(n,e&&e.currentContextId),r,i]}function R1(t,e){return e?`${t}-${e}`:t}function Qr(t){const e=t.split(":");if(e.length===1)return[t,0,void 0];const n=e[0],r=e.length===3?e[1]:void 0,i=Number(e[e.length-1]);return[n,i,r]}function y0(t,e,n){let r=I("pad",t,e,n);if(r==="explicit"){r=I("explicitPaddings",t,e,n);const i=[[0,0],[0,0],[0,0],[0,0]];for(let s=0;s<4;s++)i[s][0]=r[s*2],i[s][1]=r[s*2+1];return i}return r}function Ha(t){return t.kept?t:to(t)}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xAe=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],bAe=Object.freeze(Object.defineProperty({__proto__:null,json:xAe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wAe=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Prod",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axes",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],SAe=Object.freeze(Object.defineProperty({__proto__:null,json:wAe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kAe=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],CAe=Object.freeze(Object.defineProperty({__proto__:null,json:kAe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Ae=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],EAe=Object.freeze(Object.defineProperty({__proto__:null,json:$Ae},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TAe=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],_Ae=Object.freeze(Object.defineProperty({__proto__:null,json:TAe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IAe=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],NAe=Object.freeze(Object.defineProperty({__proto__:null,json:IAe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RAe=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],OAe=Object.freeze(Object.defineProperty({__proto__:null,json:RAe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AAe=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],PAe=Object.freeze(Object.defineProperty({__proto__:null,json:AAe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DAe=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]}],FAe=Object.freeze(Object.defineProperty({__proto__:null,json:DAe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LAe=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],MAe=Object.freeze(Object.defineProperty({__proto__:null,json:LAe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BAe=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],zAe=Object.freeze(Object.defineProperty({__proto__:null,json:BAe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jAe=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]}],VAe=Object.freeze(Object.defineProperty({__proto__:null,json:jAe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WAe=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"SparseToDense",category:"normalization",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!0,notSupported:!0}]}],UAe=Object.freeze(Object.defineProperty({__proto__:null,json:WAe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GAe=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],HAe=Object.freeze(Object.defineProperty({__proto__:null,json:GAe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qAe=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]}],KAe=Object.freeze(Object.defineProperty({__proto__:null,json:qAe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XAe=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],YAe=Object.freeze(Object.defineProperty({__proto__:null,json:XAe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QAe=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],ZAe=Object.freeze(Object.defineProperty({__proto__:null,json:QAe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JAe=[{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],ePe=Object.freeze(Object.defineProperty({__proto__:null,json:JAe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tPe=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}],nPe=Object.freeze(Object.defineProperty({__proto__:null,json:tPe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class I4{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const e=[bAe,SAe,CAe,EAe,_Ae,NAe,OAe,PAe,FAe,MAe,zAe,VAe,UAe,HAe,KAe,YAe,ZAe,ePe,nPe],n=[].concat(...e.map(r=>r.json));this.opMappers=n.reduce((r,i)=>(r[i.tfOpName]=i,r),{})}transformGraph(e,n={}){const r=e.node,i=[],s=[],a=[],o=r.reduce((y,x)=>(y[x.name]=this.mapNode(x),x.op.startsWith("Placeholder")?i.push(y[x.name]):x.op==="Const"?s.push(y[x.name]):(x.input==null||x.input.length===0)&&a.push(y[x.name]),y),{});let l=[];const c=[];let u={},d={};n!=null&&(u=this.mapSignatureEntries(n.inputs),d=this.mapSignatureEntries(n.outputs));const f=Object.keys(o);f.forEach(y=>{const x=o[y];x.inputNames.forEach((v,b)=>{const[S,,k]=aa(v),$=o[S];if($.outputs!=null){const T=$.outputs.indexOf(k);if(T!==-1){const _=`${S}:${T}`;x.inputNames[b]=_}}x.inputs.push($),$.children.push(x)})}),Object.keys(d).length===0?f.forEach(y=>{const x=o[y];x.children.length===0&&c.push(x)}):Object.keys(d).forEach(y=>{const[x]=aa(y),v=o[x];v!=null&&(v.signatureKey=d[y],c.push(v))}),Object.keys(u).length>0?Object.keys(u).forEach(y=>{const[x]=aa(y),v=o[x];v&&(v.signatureKey=u[y],l.push(v))}):l=i;let h={};e.library!=null&&e.library.function!=null&&(h=e.library.function.reduce((y,x)=>(y[x.signature.name]=this.mapFunction(x),y),{}));const g={nodes:o,inputs:l,outputs:c,weights:s,placeholders:i,signature:n,functions:h};return a.length>0&&(g.initNodes=a),g}mapSignatureEntries(e){return Object.keys(e||{}).reduce((n,r)=>(n[e[r].name]=r,n),{})}mapNode(e){const n=RG(e.op)||this.opMappers[e.op]||{};e.attr==null&&(e.attr={});const r={name:e.name,op:e.op,category:n.category,inputNames:(e.input||[]).map(i=>i.startsWith("^")?i.slice(1):i),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:n.outputs};return n.inputs!=null&&(r.inputParams=n.inputs.reduce((i,s)=>(i[s.name]={type:s.type,inputIndexStart:s.start,inputIndexEnd:s.end},i),{})),n.attrs!=null&&(r.attrParams=n.attrs.reduce((i,s)=>{const a=s.type;let o;switch(s.type){case"string":o=OE(e.attr,s.tfName,s.defaultValue),o===void 0&&s.tfDeprecatedName&&(o=OE(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"string[]":o=BE(e.attr,s.tfName,s.defaultValue),o===void 0&&s.tfDeprecatedName&&(o=BE(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"number":o=PE(e.attr,s.tfName,s.defaultValue||0),o===void 0&&s.tfDeprecatedName&&(o=PE(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"number[]":o=ME(e.attr,s.tfName,s.defaultValue),o===void 0&&s.tfDeprecatedName&&(o=ME(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"bool":o=AE(e.attr,s.tfName,s.defaultValue),o===void 0&&s.tfDeprecatedName&&(o=AE(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"bool[]":o=jE(e.attr,s.tfName,s.defaultValue),o===void 0&&s.tfDeprecatedName&&(o=jE(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"shape":o=LE(e.attr,s.tfName,s.defaultValue),o===void 0&&s.tfDeprecatedName&&(o=LE(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"shape[]":o=zE(e.attr,s.tfName,s.defaultValue),o===void 0&&s.tfDeprecatedName&&(o=zE(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"dtype":o=DE(e.attr,s.tfName,s.defaultValue),o===void 0&&s.tfDeprecatedName&&(o=DE(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"dtype[]":o=FE(e.attr,s.tfName,s.defaultValue),o===void 0&&s.tfDeprecatedName&&(o=FE(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"func":o=N4(e.attr,s.tfName,s.defaultValue),o===void 0&&s.tfDeprecatedName&&(o=N4(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${s.type} for op: ${e.op}`)}return i[s.name]={value:o,type:a},i},{})),r}mapFunction(e){const n=e.nodeDef,r=[],i=[];let s={};n!=null&&(s=n.reduce((d,f)=>(d[f.name]=this.mapNode(f),f.op==="Const"&&i.push(d[f.name]),d),{}));const a=[],o=[];e.signature.inputArg.forEach(d=>{const[f]=aa(d.name),h={name:f,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:RR(d.type),type:"dtype"}},children:[]};h.signatureKey=d.name,a.push(h),s[f]=h}),Object.keys(s).forEach(d=>{const f=s[d];f.inputNames.forEach((h,g)=>{const[y,,x]=aa(h),v=s[y];if(v.outputs!=null){const b=v.outputs.indexOf(x);if(b!==-1){const S=`${y}:${b}`;f.inputNames[g]=S}}f.inputs.push(v),v.children.push(f)})});const c=e.ret;e.signature.outputArg.forEach(d=>{const[f,h]=aa(c[d.name]),g=s[f];g!=null&&(g.defaultOutput=h,o.push(g))});const u=this.mapArgsToSignature(e);return{nodes:s,inputs:a,outputs:o,weights:i,placeholders:r,signature:u}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r),n),{}),outputs:e.signature.outputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r,e.ret),n),{})}}mapArgToTensorInfo(e,n){let r=e.name;return n!=null&&(r=n[r]),{name:r,dtype:e.type}}}function rPe(t){const e=re().global;if(typeof e.atob<"u")return e.atob(t);if(typeof Buffer<"u")return new Buffer(t,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function OG(t,e){const n=Array.isArray(t)?String.fromCharCode.apply(null,t):rPe(t);return e?n:n.toLowerCase()}function OE(t,e,n,r=!1){const i=t[e];return i!=null?OG(i.s,r):n}function AE(t,e,n){const r=t[e];return r?r.b:n}function PE(t,e,n){const r=t[e]||{},i=r.i!=null?r.i:r.f!=null?r.f:n;return typeof i=="number"?i:parseInt(i,10)}function RR(t){switch(typeof t=="string"&&(t=qi[t]),t){case qi.DT_FLOAT:case qi.DT_HALF:return"float32";case qi.DT_INT32:case qi.DT_INT64:case qi.DT_INT8:case qi.DT_UINT8:return"int32";case qi.DT_BOOL:return"bool";case qi.DT_DOUBLE:return"float32";case qi.DT_STRING:return"string";default:return null}}function N4(t,e,n){const r=t[e];return r&&r.func?r.func.name:n}function DE(t,e,n){const r=t[e];return r&&r.type?RR(r.type):n}function FE(t,e,n){const r=t[e];return r&&r.list&&r.list.type?r.list.type.map(i=>RR(i)):n}function AG(t){if(!t.unknownRank)return t.dim!=null?t.dim.map(e=>typeof e.size=="number"?e.size:parseInt(e.size,10)):[]}function LE(t,e,n){const r=t[e];return r&&r.shape?AG(r.shape):n}function ME(t,e,n){const r=t[e];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(i=>typeof i=="number"?i:parseInt(i,10)):n}function BE(t,e,n,r=!1){const i=t[e];return i&&i.list&&i.list.s?i.list.s.map(s=>OG(s,r)):n}function zE(t,e,n){const r=t[e];return r&&r.list&&r.list.shape?r.list.shape.map(i=>AG(i)):n}function jE(t,e,n){const r=t[e];return r&&r.list&&r.list.b?r.list.b:n}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class iPe{constructor(e,n,r){this.node=e,this.tensorMap=n,this.context=r,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map(i=>this.getInput(i)),e.rawAttrs!=null&&(this.attrs=Object.keys(e.rawAttrs).reduce((i,s)=>(i[s]=this.getAttr(s),i),{}))}getInput(e){return $r(e,this.tensorMap,this.context)}getAttr(e,n){const r=this.node.rawAttrs[e];if(r.tensor!=null)return $r(e,this.tensorMap,this.context);if(r.i!=null||r.f!=null)return PE(this.node.rawAttrs,e,n);if(r.s!=null)return OE(this.node.rawAttrs,e,n);if(r.b!=null)return AE(this.node.rawAttrs,e,n);if(r.shape!=null)return LE(this.node.rawAttrs,e,n);if(r.type!=null)return DE(this.node.rawAttrs,e,n);if(r.list!=null){if(r.list.i!=null||r.list.f!=null)return ME(this.node.rawAttrs,e,n);if(r.list.s!=null)return BE(this.node.rawAttrs,e,n);if(r.list.shape!=null)return zE(this.node.rawAttrs,e,n);if(r.list.b!=null)return jE(this.node.rawAttrs,e,n);if(r.list.type!=null)return FE(this.node.rawAttrs,e,n)}return n}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cr=Object.freeze(Object.defineProperty({__proto__:null,OP_SCOPE_SUFFIX:tN,abs:Zr,acos:GW,acosh:HW,add:Ve,addN:qW,all:KW,any:XW,argMax:YW,argMin:QW,asin:ZW,asinh:JW,atan:e8,atan2:t8,atanh:n8,avgPool:CN,avgPool3d:r8,basicLSTMCell:i8,batchNorm:Wg,batchNorm2d:s8,batchNorm3d:a8,batchNorm4d:o8,batchToSpaceND:$N,bincount:EN,booleanMaskAsync:WU,broadcastArgs:l8,broadcastTo:Vd,buffer:qe,cast:Ht,ceil:c8,clipByValue:u8,clone:to,complex:po,concat:ar,concat1d:d8,concat2d:f8,concat3d:p8,concat4d:h8,conv1d:m8,conv2d:Ug,conv2dTranspose:y8,conv3d:v8,conv3dTranspose:x8,cos:b8,cosh:w8,cosineWindow:i2,cumprod:S8,cumsum:k8,denseBincount:C8,depthToSpace:$8,depthwiseConv2d:Yw,diag:E8,dilation2d:T8,div:Nt,divNoNan:_8,dot:I8,dropout:KU,einsum:N8,elu:_N,enclosingPowerOfTwo:oR,equal:TN,erf:R8,euclideanNorm:P8,exp:kl,expandDims:Ga,expm1:D8,eye:NN,fft:t2,fill:Uf,floor:RN,floorDiv:SN,fused:YU,gather:ON,gatherND:qU,greater:qg,greaterEqual:AN,ifft:fm,imag:jg,image:cR,inTopKAsync:XU,irfft:rR,isFinite:F8,isInf:L8,isNaN:M8,leakyRelu:PN,less:B8,lessEqual:Qw,linalg:tG,linspace:z8,localResponseNormalization:j8,log:df,log1p:DN,logSigmoid:W8,logSoftmax:U8,logSumExp:LN,logicalAnd:um,logicalNot:MN,logicalOr:BN,logicalXor:G8,losses:nG,lowerBound:H8,matMul:gt,max:Nc,maxPool:zN,maxPool3d:q8,maxPoolWithArgmax:K8,maximum:jN,mean:dm,meshgrid:X8,min:N1,minimum:VN,mirrorPad:Y8,mod:Q8,moments:Z8,movingAverage:UU,mul:ke,multiRNNCell:J8,multinomial:eU,neg:va,norm:Hg,notEqual:WN,oneHot:T1,ones:rl,onesLike:tU,op:U,outerProduct:nU,pad:Gf,pad1d:rU,pad2d:iU,pad3d:sU,pad4d:aU,pool:oU,pow:uf,prelu:GN,print:sN,prod:lU,raggedGather:cU,raggedTensorToTensor:uU,rand:dU,randomGamma:pU,randomNormal:JN,randomStandardNormal:hU,randomUniform:eR,range:ff,real:cf,reciprocal:mU,relu:Kg,relu6:tR,reshape:fe,reverse:$l,reverse1d:gU,reverse2d:yU,reverse3d:vU,reverse4d:xU,rfft:n2,round:nR,rsqrt:bU,scalar:tt,scatterND:GU,searchSorted:Jw,selu:wU,separableConv2d:SU,setdiff1dAsync:kU,sigmoid:Ic,sign:CU,signal:eG,sin:$U,sinh:EU,slice:kt,slice1d:TU,slice2d:_U,slice3d:IU,slice4d:NU,softmax:RU,softplus:FN,spaceToBatchND:UN,sparse:rG,sparseToDense:HU,spectral:JU,split:pf,sqrt:Sa,square:ls,squaredDifference:iR,squeeze:Xg,stack:Ca,step:sR,stridedSlice:OU,string:iG,sub:Je,sum:It,tan:AU,tanh:I1,tensor:zs,tensor1d:ss,tensor2d:Ud,tensor3d:dN,tensor4d:PU,tensor5d:DU,tensor6d:FU,tile:Wd,topk:LU,transpose:lm,truncatedNormal:MU,unique:BU,unsortedSegmentSum:zU,unstack:jl,upperBound:jU,variable:VU,where:Xc,whereAsync:aR,zeros:Cl,zerosLike:di},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sPe=(t,e,n,r=cr)=>{switch(t.op){case"BiasAdd":case"AddV2":case"Add":return[r.add(I("a",t,e,n),I("b",t,e,n))];case"AddN":return[r.addN(I("tensors",t,e,n))];case"FloorMod":case"Mod":return[r.mod(I("a",t,e,n),I("b",t,e,n))];case"Mul":return[r.mul(I("a",t,e,n),I("b",t,e,n))];case"RealDiv":case"Div":return[r.div(I("a",t,e,n),I("b",t,e,n))];case"DivNoNan":return[r.divNoNan(I("a",t,e,n),I("b",t,e,n))];case"FloorDiv":return[r.floorDiv(I("a",t,e,n),I("b",t,e,n))];case"Sub":return[r.sub(I("a",t,e,n),I("b",t,e,n))];case"Minimum":return[r.minimum(I("a",t,e,n),I("b",t,e,n))];case"Maximum":return[r.maximum(I("a",t,e,n),I("b",t,e,n))];case"Pow":return[r.pow(I("a",t,e,n),I("b",t,e,n))];case"SquaredDifference":return[r.squaredDifference(I("a",t,e,n),I("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aPe=(t,e,n,r=cr)=>{switch(t.op){case"Abs":case"ComplexAbs":return[r.abs(I("x",t,e,n))];case"Acos":return[r.acos(I("x",t,e,n))];case"Acosh":return[r.acosh(I("x",t,e,n))];case"Asin":return[r.asin(I("x",t,e,n))];case"Asinh":return[r.asinh(I("x",t,e,n))];case"Atan":return[r.atan(I("x",t,e,n))];case"Atan2":return[r.atan2(I("x",t,e,n),I("y",t,e,n))];case"Atanh":return[r.atanh(I("x",t,e,n))];case"Ceil":return[r.ceil(I("x",t,e,n))];case"Complex":return[r.complex(I("real",t,e,n),I("imag",t,e,n))];case"Cos":return[r.cos(I("x",t,e,n))];case"Cosh":return[r.cosh(I("x",t,e,n))];case"Elu":return[r.elu(I("x",t,e,n))];case"Erf":return[r.erf(I("x",t,e,n))];case"Exp":return[r.exp(I("x",t,e,n))];case"Expm1":return[r.expm1(I("x",t,e,n))];case"Floor":return[r.floor(I("x",t,e,n))];case"Log":return[r.log(I("x",t,e,n))];case"Log1p":return[r.log1p(I("x",t,e,n))];case"Imag":return[r.imag(I("x",t,e,n))];case"Neg":return[r.neg(I("x",t,e,n))];case"Reciprocal":return[r.reciprocal(I("x",t,e,n))];case"Real":return[r.real(I("x",t,e,n))];case"Relu":return[r.relu(I("x",t,e,n))];case"Round":return[r.round(I("x",t,e,n))];case"Selu":return[r.selu(I("x",t,e,n))];case"Sigmoid":return[r.sigmoid(I("x",t,e,n))];case"Sin":return[r.sin(I("x",t,e,n))];case"Sign":return[r.sign(I("x",t,e,n))];case"Sinh":return[r.sinh(I("x",t,e,n))];case"Softplus":return[r.softplus(I("x",t,e,n))];case"Sqrt":return[r.sqrt(I("x",t,e,n))];case"Square":return[r.square(I("x",t,e,n))];case"Tanh":return[r.tanh(I("x",t,e,n))];case"Tan":return[r.tan(I("x",t,e,n))];case"ClipByValue":return[r.clipByValue(I("x",t,e,n),I("clipValueMin",t,e,n),I("clipValueMax",t,e,n))];case"Relu6":return[r.relu6(I("x",t,e,n))];case"Rsqrt":return[r.rsqrt($r(t.inputNames[0],e,n))];case"Prod":return[r.prod(I("x",t,e,n),I("axes",t,e,n))];case"LeakyRelu":return[r.leakyRelu(I("x",t,e,n),I("alpha",t,e,n))];case"Prelu":return[r.prelu(I("x",t,e,n),I("alpha",t,e,n))];case"IsNan":return[r.isNaN($r(t.inputNames[0],e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ki(t,e,n=""){if(!(typeof t=="number"||typeof e=="number")){F(t.length===e.length,()=>n+` Shapes ${t} and ${e} must match`);for(let r=0;r<t.length;r++){const i=t[r],s=e[r];F(i<0||s<0||i===s,()=>n+` Shapes ${t} and ${e} must match`)}}}function R4(t){return!(typeof t=="number"||t.some(e=>e<0))}function jp(t,e,n){let r=VE(t,n);const i=!R4(r);if(i&&e.length===0)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${r}`);if(i&&e.forEach(s=>{r=VE(s.shape,r)}),!R4(r))throw new Error(`Non-fully-defined elementShape: ${r}`);return r}function VE(t,e){if(typeof t=="number")return e;if(typeof e=="number")return t;if(t.length!==e.length)throw new Error(`Incompatible ranks during merge: ${t} vs. ${e}`);const n=[];for(let r=0;r<t.length;++r){const i=t[r],s=e[r];if(i>=0&&s>=0&&i!==s)throw new Error(`Incompatible shape during merge: ${t} vs. ${e}`);n[r]=i>=0?i:s}return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class oPe{constructor(e,n,r,i,s,a,o){this.name=e,this.dtype=n,this.maxSize=r,this.elementShape=i,this.identicalElementShapes=s,this.dynamicSize=a,this.clearAfterRead=o,this.tensors=[],this.closed_=!1,this.idTensor=tt(0),ca(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach(n=>{(e==null||!e.has(n.tensor.id))&&n.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||e>=this.size())throw new Error(`Tried to read from index ${e}, but array size is: ${this.size()}`);const n=this.tensors[e];if(n.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${e} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(n.cleared=!0),n.read=!0,n.tensor}readMany(e){return e.map(n=>this.read(n))}write(e,n){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error(`Tried to write to index ${e}, but array is not resizeable and size is: ${this.maxSize}`);const r=this.tensors[e]||{};if(n.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e},
          because the value dtype is ${n.dtype}, but TensorArray dtype is ${this.dtype}.`);if(this.size()===0&&(this.elementShape==null||this.elementShape.length===0)&&(this.elementShape=n.shape),Ki(this.elementShape,n.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${e}.`),r.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been read.`);if(r.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been written.`);r.tensor=n,ca(n),r.written=!0,this.tensors[e]=r}writeMany(e,n){if(e.length!==n.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${e.length} is not the same as tensors size: ${n.length}.`);e.forEach((r,i)=>this.write(r,n[i]))}gather(e,n){if(n&&n!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${n}`);if(e)e=e.slice(0,this.size());else{e=[];for(let i=0;i<this.size();i++)e.push(i)}if(e.length===0)return zs([],[0].concat(this.elementShape));const r=this.readMany(e);return Ki(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),Ca(r,0)}concat(e){if(e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${e}`);if(this.size()===0)return zs([],[0].concat(this.elementShape));const n=[];for(let i=0;i<this.size();i++)n.push(i);const r=this.readMany(n);return Ki(this.elementShape,r[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${r[0].shape})`),ar(r,0)}scatter(e,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);if(e.length!==n.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${n.shape[0]}`);const r=Math.max(...e);if(!this.dynamicSize&&r>=this.maxSize)throw new Error(`Max index must be < array size (${r}  vs. ${this.maxSize})`);this.writeMany(e,jl(n,0))}split(e,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);let r=0;const i=e.map(l=>(r+=l,r));if(r!==n.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${n.shape}`);if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${e.length}), and the TensorArray is not marked as dynamically resizeable`);const s=r===0?0:n.size/r,a=[];st(()=>{n=fe(n,[1,r,s]);for(let l=0;l<e.length;++l){const u=[0,l===0?0:i[l-1],0],d=[1,e[l],s];a[l]=fe(kt(n,u,d),this.elementShape)}return a});const o=[];for(let l=0;l<e.length;l++)o[l]=l;this.writeMany(o,a)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Qc{constructor(e,n,r,i=-1){this.tensors=e,this.elementShape=n,this.elementDtype=r,e!=null&&e.forEach(s=>{if(r!==s.dtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${s.dtype}`);Ki(n,s.shape,"TensorList shape mismatch: "),ca(s)}),this.idTensor=tt(0),this.maxNumElements=i,ca(this.idTensor)}get id(){return this.idTensor.id}copy(){return new Qc([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(e){this.tensors.forEach(n=>{(e==null||!e.has(n.id))&&n.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(e,n,r=-1){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(r!==-1&&this.tensors.length!==r)throw new Error(`Operation expected a list with ${r} elements but got a list with ${this.tensors.length} elements.`);Ki(e,this.elementShape,"TensorList shape mismatch: ");const i=jp(this.elementShape,this.tensors,e);return st(()=>{const s=this.tensors.map(a=>fe(a,i));return Ca(s,0)})}popBack(e,n){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(this.size()===0)throw new Error("Trying to pop from an empty list.");const r=jp(this.elementShape,this.tensors,e),i=this.tensors.pop();return i.kept=!1,Ki(i.shape,e,"TensorList shape mismatch: "),fe(i,r)}pushBack(e){if(e.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${this.elementDtype}`);if(Ki(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");ca(e),this.tensors.push(e)}resize(e){if(e<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${e}`);if(this.maxNumElements!==-1&&e>this.maxNumElements)throw new Error(`TensorListResize input size ${e} is greater maxNumElement ${this.maxNumElements}.`);const n=new Qc([],this.elementShape,this.elementDtype,this.maxNumElements);n.tensors.length=e;for(let r=0;r<Math.min(this.tensors.length,e);++r)n.tensors[r]=this.tensors[r];return n}getItem(e,n,r){if(r!==this.elementDtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${this.elementDtype}`);if(e<0||e>this.tensors.length)throw new Error(`Trying to access element ${e} in a list with ${this.tensors.length} elements.`);if(this.tensors[e]==null)throw new Error(`element at index ${e} is null.`);Ki(this.tensors[e].shape,n,"TensorList shape mismatch: ");const i=jp(this.elementShape,this.tensors,n);return fe(this.tensors[e],i)}setItem(e,n){if(n.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n.dtype}, but list elements ${this.elementDtype}`);if(e<0||this.maxNumElements!==-1&&e>=this.maxNumElements)throw new Error(`Trying to set element ${e} in a list with max ${this.maxNumElements} elements.`);Ki(this.elementShape,n.shape,"TensorList shape mismatch: "),ca(n),this.tensors[e]!=null&&(this.tensors[e].kept=!1),this.tensors[e]=n}gather(e,n,r){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);Ki(this.elementShape,r,"TensorList shape mismatch: "),e=e.slice(0,this.size());const i=jp(this.elementShape,this.tensors,r);return e.length===0?zs([],[0].concat(i)):st(()=>{const s=e.map(a=>fe(this.tensors[a],i));return Ca(s,0)})}concat(e,n){if(e&&e!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${e}`);Ki(this.elementShape,n,"TensorList shape mismatch: ");const r=jp(this.elementShape,this.tensors,n);return this.size()===0?zs([],[0].concat(r)):st(()=>{const i=this.tensors.map(s=>fe(s,r));return ar(i,0)})}}function lPe(t,e,n){const r=t.dtype;if(t.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${t.shape}`);if(t.dtype!==n)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${n}`);const i=t.shape.slice(1);Ki(i,e,"TensorList shape mismatch: ");const s=jl(t);return new Qc(s,e,r)}function cPe(t,e,n,r){return new Qc([],t,e,r)}function uPe(t,e,n,r){if(e.length!==t.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${t.shape[0]}`);const i=Math.max(...e);if(r!=null&&r!==-1&&i>=r)throw new Error(`Max index must be < array size (${i}  vs. ${r})`);const s=new Qc([],n,t.dtype,r),a=jl(t,0);return e.forEach((o,l)=>{s.setItem(o,a[l])}),s}function dPe(t,e,n){let r=0;const i=e.map(u=>(r+=u,r));if(r!==t.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${t.shape}`);const s=t.shape.slice(1),a=VE(s,n),o=r===0?0:t.size/r,l=st(()=>{const u=[];t=fe(t,[1,r,o]);for(let d=0;d<e.length;++d){const h=[0,d===0?0:i[d-1],0],g=[1,e[d],o];u[d]=fe(kt(t,h,g),a)}return t.dispose(),u}),c=new Qc([],n,t.dtype,e.length);for(let u=0;u<l.length;u++)c.setItem(u,l[u]);return c}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fPe=async(t,e,n)=>{switch(t.op){case"If":case"StatelessIf":{const r=I("thenBranch",t,e,n),i=I("elseBranch",t,e,n),s=I("cond",t,e,n),a=I("args",t,e,n);return(await s.data())[0]?n.functionMap[r].executeFunctionAsync(a,n.tensorArrayMap,n.tensorListMap):n.functionMap[i].executeFunctionAsync(a,n.tensorArrayMap,n.tensorListMap)}case"While":case"StatelessWhile":{const r=I("body",t,e,n),i=I("cond",t,e,n),s=I("args",t,e,n),a=await n.functionMap[i].executeFunctionAsync(s,n.tensorArrayMap,n.tensorListMap),o=s.map(u=>u.id);let l=await a[0].data();a.forEach(u=>{!u.kept&&o.indexOf(u.id)===-1&&u.dispose()});let c=s;for(;l[0];){const u=c;c=await n.functionMap[r].executeFunctionAsync(c,n.tensorArrayMap,n.tensorListMap);const d=c.map(h=>h.id);u.forEach(h=>{!h.kept&&o.indexOf(h.id)===-1&&d.indexOf(h.id)===-1&&h.dispose()});const f=await n.functionMap[i].executeFunctionAsync(c,n.tensorArrayMap,n.tensorListMap);l=await f[0].data(),f.forEach(h=>{!h.kept&&o.indexOf(h.id)===-1&&d.indexOf(h.id)===-1&&h.dispose()})}return c}case"LoopCond":{const r=I("pred",t,e,n);return[Ha(r)]}case"Switch":{const r=I("pred",t,e,n);let i=I("data",t,e,n);return i.kept||(i=Ha(i)),(await r.data())[0]?[void 0,i]:[i,void 0]}case"Merge":{const r=t.inputNames.find(i=>$r(i,e,n)!==void 0);if(r){const i=$r(r,e,n);return[Ha(i)]}return}case"Enter":{const r=I("frameName",t,e,n),i=I("tensor",t,e,n);return n.enterFrame(r),[Ha(i)]}case"Exit":{const r=I("tensor",t,e,n);return n.exitFrame(),[Ha(r)]}case"NextIteration":{const r=I("tensor",t,e,n);return n.nextIteration(),[Ha(r)]}case"TensorArrayV3":{const r=I("size",t,e,n),i=I("dtype",t,e,n),s=I("elementShape",t,e,n),a=I("dynamicSize",t,e,n),o=I("clearAfterRead",t,e,n),l=I("identicalElementShapes",t,e,n),c=I("name",t,e,n),u=new oPe(c,i,r,s,l,a,o);return n.addTensorArray(u),[u.idTensor,tt(1)]}case"TensorArrayWriteV3":{const r=I("tensorArrayId",t,e,n),i=I("index",t,e,n),s=I("tensor",t,e,n),a=n.getTensorArray(r.id);return a.write(i,s),[a.idTensor]}case"TensorArrayReadV3":{const r=I("tensorArrayId",t,e,n),i=I("index",t,e,n);return[n.getTensorArray(r.id).read(i)]}case"TensorArrayGatherV3":{const r=I("tensorArrayId",t,e,n),i=I("indices",t,e,n),s=I("dtype",t,e,n);return[n.getTensorArray(r.id).gather(i,s)]}case"TensorArrayScatterV3":{const r=I("tensorArrayId",t,e,n),i=I("indices",t,e,n),s=I("tensor",t,e,n),a=n.getTensorArray(r.id);return a.scatter(i,s),[a.idTensor]}case"TensorArrayConcatV3":{const r=I("tensorArrayId",t,e,n),i=n.getTensorArray(r.id),s=I("dtype",t,e,n);return[i.concat(s)]}case"TensorArraySplitV3":{const r=I("tensorArrayId",t,e,n),i=I("tensor",t,e,n),s=I("lengths",t,e,n),a=n.getTensorArray(r.id);return a.split(s,i),[a.idTensor]}case"TensorArraySizeV3":{const r=I("tensorArrayId",t,e,n),i=n.getTensorArray(r.id);return[tt(i.size(),"int32")]}case"TensorArrayCloseV3":{const r=I("tensorArrayId",t,e,n),i=n.getTensorArray(r.id);return i.clearAndClose(),[i.idTensor]}case"TensorListSetItem":{const r=I("tensorListId",t,e,n),i=I("index",t,e,n),s=I("tensor",t,e,n),a=n.getTensorList(r.id);return a.setItem(i,s),[a.idTensor]}case"TensorListGetItem":{const r=I("tensorListId",t,e,n),i=I("index",t,e,n),s=I("elementShape",t,e,n),a=I("elementDType",t,e,n);return[n.getTensorList(r.id).getItem(i,s,a)]}case"TensorListScatterV2":case"TensorListScatter":{const r=I("indices",t,e,n),i=I("tensor",t,e,n),s=I("elementShape",t,e,n),a=I("numElements",t,e,n),o=uPe(i,r,s,a);return n.addTensorList(o),[o.idTensor]}case"TensorListReserve":case"EmptyTensorList":{const r=I("elementShape",t,e,n),i=I("elementDType",t,e,n);let s;t.op==="TensorListReserve"?s="numElements":s="maxNumElements";const a=I(s,t,e,n),o=t.op==="TensorListReserve"?-1:a,l=cPe(r,i,a,o);return n.addTensorList(l),[l.idTensor]}case"TensorListGather":{const r=I("tensorListId",t,e,n),i=I("indices",t,e,n),s=I("elementShape",t,e,n),a=I("elementDType",t,e,n);return[n.getTensorList(r.id).gather(i,a,s)]}case"TensorListStack":{const r=I("tensorListId",t,e,n),i=I("elementShape",t,e,n),s=I("elementDType",t,e,n),a=I("numElements",t,e,n);return[n.getTensorList(r.id).stack(i,s,a)]}case"TensorListFromTensor":{const r=I("tensor",t,e,n),i=I("elementShape",t,e,n),s=I("elementDType",t,e,n),a=lPe(r,i,s);return n.addTensorList(a),[a.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{const r=I("tensorListId",t,e,n),i=n.getTensorList(r.id),s=I("dtype",t,e,n),a=I("elementShape",t,e,n);return[i.concat(s,a)]}case"TensorListPushBack":{const r=I("tensorListId",t,e,n),i=I("tensor",t,e,n),s=n.getTensorList(r.id);return s.pushBack(i),[s.idTensor]}case"TensorListPopBack":{const r=I("tensorListId",t,e,n),i=I("elementShape",t,e,n),s=I("elementDType",t,e,n);return[n.getTensorList(r.id).popBack(i,s)]}case"TensorListSplit":{const r=I("tensor",t,e,n),i=I("elementShape",t,e,n),s=I("lengths",t,e,n),a=dPe(r,s,i);return n.addTensorList(a),[a.idTensor]}case"TensorListLength":{const r=I("tensorListId",t,e,n),i=n.getTensorList(r.id);return[tt(i.size(),"int32")]}case"TensorListResize":{const r=I("tensorListId",t,e,n),i=I("size",t,e,n),a=n.getTensorList(r.id).resize(i);return n.addTensorList(a),[a.idTensor]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O4(t,e,n){const[r,i]=I("fusedOps",t,e,n),s=r==="biasadd",a=!s,o=i==="prelu",l=r==="fusedbatchnorm",c=I("numArgs",t,e,n);if(s){if(o&&c!==2)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!o&&s&&c!==1)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(l)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");const u=I("strides",t,e,n),d=y0(t,e,n),f=I("dataFormat",t,e,n).toUpperCase(),h=I("dilations",t,e,n);let[g,y]=I("args",t,e,n);a&&(y=g,g=void 0);const x=I("leakyreluAlpha",t,e,n);return{stride:u,pad:d,dataFormat:f,dilations:h,biasArg:g,preluArg:y,activationFunc:i,leakyreluAlpha:x}}const pPe=(t,e,n,r=cr)=>{switch(t.op){case"Conv1D":{const i=I("stride",t,e,n),s=I("pad",t,e,n),a=I("dataFormat",t,e,n).toUpperCase(),o=I("dilation",t,e,n);return[r.conv1d(I("x",t,e,n),I("filter",t,e,n),i,s,a,o)]}case"Conv2D":{const i=I("strides",t,e,n),s=y0(t,e,n),a=I("dataFormat",t,e,n).toUpperCase(),o=I("dilations",t,e,n);return[r.conv2d(I("x",t,e,n),I("filter",t,e,n),[i[1],i[2]],s,a,[o[1],o[2]])]}case"_FusedConv2D":{const{stride:i,pad:s,dataFormat:a,dilations:o,biasArg:l,preluArg:c,activationFunc:u,leakyreluAlpha:d}=O4(t,e,n);return[r.fused.conv2d({x:I("x",t,e,n),filter:I("filter",t,e,n),strides:[i[1],i[2]],pad:s,dataFormat:a,dilations:[o[1],o[2]],bias:l,activation:u,preluActivationWeights:c,leakyreluAlpha:d})]}case"FusedDepthwiseConv2dNative":{const{stride:i,pad:s,dataFormat:a,dilations:o,biasArg:l,preluArg:c,activationFunc:u,leakyreluAlpha:d}=O4(t,e,n);return[r.fused.depthwiseConv2d({x:I("x",t,e,n),filter:I("filter",t,e,n),strides:[i[1],i[2]],pad:s,dataFormat:a,dilations:[o[1],o[2]],bias:l,activation:u,preluActivationWeights:c,leakyreluAlpha:d})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const i=I("outputShape",t,e,n),s=I("strides",t,e,n),a=y0(t,e,n);return[r.conv2dTranspose(I("x",t,e,n),I("filter",t,e,n),i,[s[1],s[2]],a)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const i=I("strides",t,e,n),s=y0(t,e,n),a=I("dilations",t,e,n),o=I("dataFormat",t,e,n).toUpperCase();return[r.depthwiseConv2d(I("input",t,e,n),I("filter",t,e,n),[i[1],i[2]],s,o,[a[1],a[2]])]}case"Conv3D":{const i=I("strides",t,e,n),s=I("pad",t,e,n),a=I("dataFormat",t,e,n).toUpperCase(),o=I("dilations",t,e,n);return[r.conv3d(I("x",t,e,n),I("filter",t,e,n),[i[1],i[2],i[3]],s,a,[o[1],o[2],o[3]])]}case"AvgPool":{const i=I("strides",t,e,n),s=I("pad",t,e,n),a=I("kernelSize",t,e,n);return[r.avgPool(I("x",t,e,n),[a[1],a[2]],[i[1],i[2]],s)]}case"MaxPool":{const i=I("strides",t,e,n),s=I("pad",t,e,n),a=I("kernelSize",t,e,n);return[r.maxPool(I("x",t,e,n),[a[1],a[2]],[i[1],i[2]],s)]}case"MaxPoolWithArgmax":{const i=I("strides",t,e,n),s=I("pad",t,e,n),a=I("kernelSize",t,e,n),o=I("includeBatchInIndex",t,e,n),{result:l,indexes:c}=r.maxPoolWithArgmax(I("x",t,e,n),[a[1],a[2]],[i[1],i[2]],s,o);return[l,c]}case"AvgPool3D":{const i=I("strides",t,e,n),s=I("pad",t,e,n),a=I("kernelSize",t,e,n);return[r.avgPool3d(I("x",t,e,n),[a[1],a[2],a[3]],[i[1],i[2],i[3]],s)]}case"MaxPool3D":{const i=I("strides",t,e,n),s=I("pad",t,e,n),a=I("kernelSize",t,e,n);return[r.maxPool3d(I("x",t,e,n),[a[1],a[2],a[3]],[i[1],i[2],i[3]],s)]}case"Dilation2D":{const i=I("strides",t,e,n),s=I("pad",t,e,n),a=I("dilations",t,e,n),o=i[1],l=i[2],c=a[1],u=a[2];return[r.dilation2d(I("x",t,e,n),I("filter",t,e,n),[o,l],s,[c,u],"NHWC")]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hPe=(t,e,n,r=cr)=>{switch(t.op){case"Fill":{const i=I("shape",t,e,n),s=I("dtype",t,e,n),a=I("value",t,e,n);return[r.fill(i,a,s)]}case"LinSpace":{const i=I("start",t,e,n),s=I("stop",t,e,n),a=I("num",t,e,n);return[r.linspace(i,s,a)]}case"Multinomial":{const i=I("logits",t,e,n),s=I("numSamples",t,e,n),a=I("seed",t,e,n);return[r.multinomial(i,s,a)]}case"OneHot":{const i=I("indices",t,e,n),s=I("depth",t,e,n),a=I("onValue",t,e,n),o=I("offValue",t,e,n),l=I("dtype",t,e,n);return[r.oneHot(i,s,a,o,l)]}case"Ones":return[r.ones(I("shape",t,e,n),I("dtype",t,e,n))];case"OnesLike":return[r.onesLike(I("x",t,e,n))];case"RandomStandardNormal":return[r.randomStandardNormal(I("shape",t,e,n),I("dtype",t,e,n),I("seed",t,e,n))];case"RandomUniform":return[r.randomUniform(I("shape",t,e,n),I("minval",t,e,n),I("maxval",t,e,n),I("dtype",t,e,n))];case"Range":{const i=I("start",t,e,n),s=I("stop",t,e,n),a=I("step",t,e,n);return[r.range(i,s,a,I("dtype",t,e,n))]}case"TruncatedNormal":{const i=I("shape",t,e,n),s=I("mean",t,e,n),a=I("stdDev",t,e,n),o=I("seed",t,e,n);return[r.truncatedNormal(i,s,a,I("dtype",t,e,n),o)]}case"Zeros":return[r.zeros(I("shape",t,e,n),I("dtype",t,e,n))];case"ZerosLike":return[r.zerosLike(I("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oC(t,e,n){const r=I("boxes",t,e,n),i=I("scores",t,e,n),s=I("maxOutputSize",t,e,n),a=I("iouThreshold",t,e,n),o=I("scoreThreshold",t,e,n),l=I("softNmsSigma",t,e,n);return{boxes:r,scores:i,maxOutputSize:s,iouThreshold:a,scoreThreshold:o,softNmsSigma:l}}const mPe=async(t,e,n,r,i=cr)=>{switch(t.op){case"NonMaxSuppressionV5":{const{boxes:s,scores:a,maxOutputSize:o,iouThreshold:l,scoreThreshold:c,softNmsSigma:u}=oC(t,e,n),d=await i.image.nonMaxSuppressionWithScoreAsync(s,a,o,l,c,u);return[d.selectedIndices,d.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:s,scores:a,maxOutputSize:o,iouThreshold:l,scoreThreshold:c}=oC(t,e,n),u=I("padToMaxOutputSize",t,e,n),d=await i.image.nonMaxSuppressionPaddedAsync(s,a,o,l,c,u);return[d.selectedIndices,d.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:s,scores:a,maxOutputSize:o,iouThreshold:l,scoreThreshold:c}=oC(t,e,n);return[await i.image.nonMaxSuppressionAsync(s,a,o,l,c)]}case"Where":{const s=i.cast(I("condition",t,e,n),"bool"),a=[await i.whereAsync(s)];return s.dispose(),a}case"ListDiff":return i.setdiff1dAsync(I("x",t,e,n),I("y",t,e,n));default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gPe=(t,e,n,r=cr)=>{switch(t.op){case"LowerBound":{const i=I("sortedSequence",t,e,n),s=I("values",t,e,n);return[r.lowerBound(i,s)]}case"TopKV2":{const i=I("x",t,e,n),s=I("k",t,e,n),a=I("sorted",t,e,n),o=r.topk(i,s,a);return[o.values,o.indices]}case"UpperBound":{const i=I("sortedSequence",t,e,n),s=I("values",t,e,n);return[r.upperBound(i,s)]}case"Unique":{const i=I("x",t,e,n),s=r.unique(i);return[s.values,s.indices]}case"UniqueV2":{const i=I("x",t,e,n),s=I("axis",t,e,n),a=r.unique(i,s);return[a.values,a.indices]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yPe=(t,e,n,r=cr)=>{switch(t.op){case"Const":return e[t.name];case"PlaceholderWithDefault":const i=I("default",t,e,n);return[$r(t.name,e,n)||i];case"Placeholder":return[$r(t.name,e,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":{const u=I("x",t,e,n);return[Ha(u)]}case"IdentityN":return I("x",t,e,n).map(u=>Ha(u));case"Snapshot":const s=I("x",t,e,n);return[Ha(s)];case"Shape":return[r.tensor1d(I("x",t,e,n).shape,"int32")];case"ShapeN":return I("x",t,e,n).map(u=>r.tensor1d(u.shape));case"Size":return[r.scalar(I("x",t,e,n).size,"int32")];case"Rank":return[r.scalar(I("x",t,e,n).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":const a=I("x",t,e,n),o=I("data",t,e,n),l=I("message",t,e,n),c=I("summarize",t,e,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(l);for(let u=0;u<o.length;u++)console.log(Array.prototype.slice.call(o[u].dataSync()).slice(0,c));return[a];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vPe{constructor(e,n){this.keyDType=e,this.valueDType=n,this.handle=tt(0),this.tensorMap=new Map,ca(this.handle)}get id(){return this.handle.id}clearAndClose(){this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return tt(this.size(),"int32")}async import(e,n){this.checkKeyAndValueTensor(e,n);const r=await e.data();return this.tensorMap.forEach(i=>i.dispose()),this.tensorMap.clear(),st(()=>{const i=jl(n),s=r.length,a=i.length;F(s===a,()=>`The number of elements doesn't match, keys has ${s} elements, the values has ${a} elements.`);for(let o=0;o<s;o++){const l=r[o],c=i[o];ca(c),this.tensorMap.set(l,c)}return this.handle})}async find(e,n){this.checkKeyAndValueTensor(e,n);const r=await e.data();return st(()=>{const i=[];for(let s=0;s<r.length;s++){const a=r[s],o=this.findWithDefault(a,n);i.push(o)}return Ca(i)})}findWithDefault(e,n){const r=this.tensorMap.get(e);return r??n}checkKeyAndValueTensor(e,n){if(e.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${e.dtype}`);if(n.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${n.dtype}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xPe=async(t,e,n,r)=>{switch(t.op){case"HashTable":case"HashTableV2":{const i=I("keyDType",t,e,n),s=I("valueDType",t,e,n),a=new vPe(i,s);return r.addHashTable(t.name,a),[a.handle]}case"LookupTableImport":case"LookupTableImportV2":{const i=I("tableHandle",t,e,n,r),s=I("keys",t,e,n),a=I("values",t,e,n);return[await r.getHashTableById(i.id).import(s,a)]}case"LookupTableFind":case"LookupTableFindV2":{const i=I("tableHandle",t,e,n,r),s=I("keys",t,e,n),a=I("defaultValue",t,e,n);return[await r.getHashTableById(i.id).find(s,a)]}case"LookupTableSize":case"LookupTableSizeV2":{const i=I("tableHandle",t,e,n,r);return[r.getHashTableById(i.id).tensorSize()]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bPe=(t,e,n,r=cr)=>{switch(t.op){case"ResizeBilinear":{const i=I("images",t,e,n),s=I("size",t,e,n),a=I("alignCorners",t,e,n),o=I("halfPixelCenters",t,e,n);return[r.image.resizeBilinear(i,[s[0],s[1]],a,o)]}case"ResizeNearestNeighbor":{const i=I("images",t,e,n),s=I("size",t,e,n),a=I("alignCorners",t,e,n),o=I("halfPixelCenters",t,e,n);return[r.image.resizeNearestNeighbor(i,[s[0],s[1]],a,o)]}case"CropAndResize":{const i=I("image",t,e,n),s=I("boxes",t,e,n),a=I("boxInd",t,e,n),o=I("cropSize",t,e,n),l=I("method",t,e,n),c=I("extrapolationValue",t,e,n);return[r.image.cropAndResize(i,s,a,o,l,c)]}case"ImageProjectiveTransformV3":{const i=I("images",t,e,n),s=I("transforms",t,e,n),a=I("outputShape",t,e,n),o=I("fillValue",t,e,n),l=I("interpolation",t,e,n),c=I("fillMode",t,e,n);return[r.image.transform(i,s,l.toLowerCase(),c.toLowerCase(),o,a)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wPe=(t,e,n,r=cr)=>{switch(t.op){case"Equal":return[r.equal(I("a",t,e,n),I("b",t,e,n))];case"NotEqual":return[r.notEqual(I("a",t,e,n),I("b",t,e,n))];case"Greater":return[r.greater(I("a",t,e,n),I("b",t,e,n))];case"GreaterEqual":return[r.greaterEqual(I("a",t,e,n),I("b",t,e,n))];case"Less":return[r.less(I("a",t,e,n),I("b",t,e,n))];case"LessEqual":return[r.lessEqual(I("a",t,e,n),I("b",t,e,n))];case"LogicalAnd":return[r.logicalAnd(I("a",t,e,n),I("b",t,e,n))];case"LogicalNot":return[r.logicalNot(I("a",t,e,n))];case"LogicalOr":return[r.logicalOr(I("a",t,e,n),I("b",t,e,n))];case"Select":case"SelectV2":return[r.where(I("condition",t,e,n),I("a",t,e,n),I("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SPe=(t,e,n,r=cr)=>{switch(t.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul(I("a",t,e,n),I("b",t,e,n),I("transposeA",t,e,n),I("transposeB",t,e,n))];case"Einsum":return[r.einsum(I("equation",t,e,n),...I("tensors",t,e,n))];case"Transpose":return[r.transpose(I("x",t,e,n),I("perm",t,e,n))];case"_FusedMatMul":const[i,s]=I("fusedOps",t,e,n),a=i==="biasadd",o=s==="prelu",l=I("numArgs",t,e,n),c=I("leakyreluAlpha",t,e,n);if(a){if(o&&l!==2)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!o&&l!==1)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[u,d]=I("args",t,e,n);return[r.fused.matMul({a:I("a",t,e,n),b:I("b",t,e,n),transposeA:I("transposeA",t,e,n),transposeB:I("transposeB",t,e,n),bias:u,activation:s,preluActivationWeights:d,leakyreluAlpha:c})];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kPe=(t,e,n,r=cr)=>{switch(t.op){case"EuclideanNorm":return[r.euclideanNorm(I("x",t,e,n),I("axis",t,e,n),I("keepDims",t,e,n))];case"FusedBatchNorm":case"FusedBatchNormV2":return[r.batchNorm(I("x",t,e,n),I("mean",t,e,n),I("variance",t,e,n),I("offset",t,e,n),I("scale",t,e,n),I("epsilon",t,e,n))];case"FusedBatchNormV3":return[r.batchNorm(I("x",t,e,n),I("mean",t,e,n),I("variance",t,e,n),I("offset",t,e,n),I("scale",t,e,n),I("epsilon",t,e,n))];case"LRN":return[r.localResponseNormalization(I("x",t,e,n),I("radius",t,e,n),I("bias",t,e,n),I("alpha",t,e,n),I("beta",t,e,n))];case"Softmax":return[r.softmax(I("x",t,e,n))];case"LogSoftmax":return[r.logSoftmax(I("x",t,e,n))];case"SparseToDense":return[r.sparseToDense(I("sparseIndices",t,e,n),I("outputShape",t,e,n),I("sparseValues",t,e,n),I("defaultValue",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CPe=(t,e,n,r=cr)=>{switch(t.op){case"Max":{const o=I("axis",t,e,n),l=I("keepDims",t,e,n);return[r.max(I("x",t,e,n),o,l)]}case"Mean":{const o=I("axis",t,e,n),l=I("keepDims",t,e,n);return[r.mean(I("x",t,e,n),o,l)]}case"Min":{const o=I("axis",t,e,n),l=I("keepDims",t,e,n);return[r.min(I("x",t,e,n),o,l)]}case"Sum":{const o=I("axis",t,e,n),l=I("keepDims",t,e,n);return[r.sum(I("x",t,e,n),o,l)]}case"All":{const o=I("axis",t,e,n),l=I("keepDims",t,e,n);return[r.all(I("x",t,e,n),o,l)]}case"Any":{const o=I("axis",t,e,n),l=I("keepDims",t,e,n);return[r.any(I("x",t,e,n),o,l)]}case"ArgMax":{const o=I("axis",t,e,n);return[r.argMax(I("x",t,e,n),o)]}case"ArgMin":{const o=I("axis",t,e,n);return[r.argMin(I("x",t,e,n),o)]}case"Prod":{const o=I("axis",t,e,n),l=I("keepDims",t,e,n);return[r.prod(I("x",t,e,n),o,l)]}case"Cumprod":{const o=I("axis",t,e,n),l=I("exclusive",t,e,n),c=I("reverse",t,e,n);return[r.cumprod(I("x",t,e,n),o,l,c)]}case"Cumsum":{const o=I("axis",t,e,n),l=I("exclusive",t,e,n),c=I("reverse",t,e,n);return[r.cumsum(I("x",t,e,n),o,l,c)]}case"Bincount":const i=I("x",t,e,n),s=I("weights",t,e,n),a=I("size",t,e,n);return[r.bincount(i,s,a)];case"DenseBincount":{const o=I("x",t,e,n),l=I("weights",t,e,n),c=I("size",t,e,n),u=I("binaryOutput",t,e,n);return[r.denseBincount(o,l,c,u)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Pe=(t,e,n,r=cr)=>{switch(t.op){case"ConcatV2":case"Concat":{const i=I("n",t,e,n),s=I("axis",t,e,n);let a=I("tensors",t,e,n);return a=a.slice(0,i),[r.concat(a,s)]}case"Gather":{const i=I("x",t,e,n),s=I("indices",t,e,n);return[r.gather(i,r.cast(s,"int32"),0)]}case"GatherV2":{const i=I("axis",t,e,n),s=I("batchDims",t,e,n),a=I("x",t,e,n),o=I("indices",t,e,n);return[r.gather(a,r.cast(o,"int32"),i,s)]}case"Reverse":{const i=I("dims",t,e,n),s=[];for(let o=0;o<i.length;o++)i[o]&&s.push(o);const a=I("x",t,e,n);return[r.reverse(a,s)]}case"ReverseV2":{const i=I("axis",t,e,n),s=I("x",t,e,n);return[r.reverse(s,i)]}case"Slice":{const i=I("begin",t,e,n),s=I("size",t,e,n);return[r.slice(I("x",t,e,n),i,s)]}case"StridedSlice":{const i=I("begin",t,e,n),s=I("end",t,e,n),a=I("strides",t,e,n),o=I("beginMask",t,e,n),l=I("endMask",t,e,n),c=I("ellipsisMask",t,e,n),u=I("newAxisMask",t,e,n),d=I("shrinkAxisMask",t,e,n),f=I("x",t,e,n);return[r.stridedSlice(f,i,s,a,o,l,c,u,d)]}case"Pack":return st(()=>{const i=I("axis",t,e,n),s=I("tensors",t,e,n),a=s[0].shape,o=r.squeeze(s[0]).shape,l=s.map(c=>{const u=$t(c.shape,a);if(!u&&!$t(r.squeeze(c).shape,o))throw new Error("the input tensors shape does not match");return u?c:r.reshape(c,a)});return[r.stack(l,i)]});case"Unpack":{const i=I("axis",t,e,n),s=I("tensor",t,e,n);return r.unstack(s,i)}case"Tile":{const i=I("reps",t,e,n);return[r.tile(I("x",t,e,n),i)]}case"Split":case"SplitV":{const i=I("axis",t,e,n),s=I("numOrSizeSplits",t,e,n),a=I("x",t,e,n);return r.split(a,s,i)}case"ScatterNd":{const i=I("indices",t,e,n),s=I("values",t,e,n),a=I("shape",t,e,n);return[r.scatterND(i,s,a)]}case"GatherNd":{const i=I("x",t,e,n),s=I("indices",t,e,n);return[r.gatherND(i,s)]}case"SparseToDense":{const i=I("sparseIndices",t,e,n),s=I("outputShape",t,e,n),a=I("sparseValues",t,e,n),o=I("defaultValue",t,e,n);return[r.sparseToDense(i,a,s,a.dtype===o.dtype?o:r.cast(o,a.dtype))]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EPe=(t,e,n,r=cr)=>{switch(t.op){case"SparseFillEmptyRows":{const{outputIndices:i,outputValues:s,emptyRowIndicator:a,reverseIndexMap:o}=r.sparse.sparseFillEmptyRows(I("indices",t,e,n),I("values",t,e,n),I("denseShape",t,e,n),I("defaultValue",t,e,n));return[i,s,a,o]}case"SparseReshape":{const{outputIndices:i,outputShape:s}=r.sparse.sparseReshape(I("inputIndices",t,e,n),I("inputShape",t,e,n),I("newShape",t,e,n));return[i,s]}case"SparseSegmentMean":return[r.sparse.sparseSegmentMean(I("data",t,e,n),I("indices",t,e,n),I("segmentIds",t,e,n))];case"SparseSegmentSum":return[r.sparse.sparseSegmentSum(I("data",t,e,n),I("indices",t,e,n),I("segmentIds",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TPe=(t,e,n,r=cr)=>{switch(t.op){case"FFT":return[r.fft(I("x",t,e,n))];case"IFFT":return[r.ifft(I("x",t,e,n))];case"RFFT":return[r.rfft(I("x",t,e,n))];case"IRFFT":return[r.irfft(I("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Pe=(t,e,n,r=cr)=>{switch(t.op){case"StringNGrams":{const{nGrams:i,nGramsSplits:s}=r.string.stringNGrams(I("data",t,e,n),I("dataSplits",t,e,n),I("separator",t,e,n),I("nGramWidths",t,e,n),I("leftPad",t,e,n),I("rightPad",t,e,n),I("padWidth",t,e,n),I("preserveShortSequences",t,e,n));return[i,s]}case"StringSplit":{const{indices:i,values:s,shape:a}=r.string.stringSplit(I("input",t,e,n),I("delimiter",t,e,n),I("skipEmpty",t,e,n));return[i,s,a]}case"StringToHashBucketFast":return[r.string.stringToHashBucketFast(I("input",t,e,n),I("numBuckets",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IPe=(t,e,n,r=cr)=>{switch(t.op){case"Cast":return[r.cast(I("x",t,e,n),I("dtype",t,e,n))];case"ExpandDims":{const i=I("axis",t,e,n);return[r.expandDims(I("x",t,e,n),i)]}case"Squeeze":{const i=I("axis",t,e,n);return[r.squeeze(I("x",t,e,n),i)]}case"Reshape":return[r.reshape(I("x",t,e,n),I("shape",t,e,n))];case"MirrorPad":return[r.mirrorPad(I("x",t,e,n),I("padding",t,e,n),I("mode",t,e,n))];case"PadV2":case"Pad":return[r.pad(I("x",t,e,n),I("padding",t,e,n),I("constantValue",t,e,n))];case"SpaceToBatchND":{const i=I("blockShape",t,e,n),s=I("paddings",t,e,n);return[r.spaceToBatchND(I("x",t,e,n),i,s)]}case"BatchToSpaceND":{const i=I("blockShape",t,e,n),s=I("crops",t,e,n);return[r.batchToSpaceND(I("x",t,e,n),i,s)]}case"DepthToSpace":{const i=I("blockSize",t,e,n),s=I("dataFormat",t,e,n).toUpperCase();return[r.depthToSpace(I("x",t,e,n),i,s)]}case"BroadcastTo":return[r.broadcastTo(I("x",t,e,n),I("shape",t,e,n))];case"BroadcastArgs":return[r.broadcastArgs(I("s0",t,e,n),I("s1",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A4(t,e,n,r,i=st){const s=((a,o,l)=>{switch(a.category){case"arithmetic":return i(()=>sPe(a,o,l));case"basic_math":return i(()=>aPe(a,o,l));case"control":return fPe(a,o,l);case"convolution":return i(()=>pPe(a,o,l));case"creation":return i(()=>hPe(a,o,l));case"dynamic":return mPe(a,o,l);case"evaluation":return i(()=>gPe(a,o,l));case"image":return i(()=>bPe(a,o,l));case"graph":return i(()=>yPe(a,o,l));case"logical":return i(()=>wPe(a,o,l));case"matrices":return i(()=>SPe(a,o,l));case"normalization":return i(()=>kPe(a,o,l));case"reduction":return i(()=>CPe(a,o,l));case"slice_join":return i(()=>$Pe(a,o,l));case"sparse":return i(()=>EPe(a,o,l));case"spectral":return i(()=>TPe(a,o,l));case"string":return i(()=>_Pe(a,o,l));case"transformation":return i(()=>IPe(a,o,l));case"hash_table":return xPe(a,o,l,r);case"custom":const c=RG(a.op);if(c&&c.customExecutor)return c.customExecutor(new iPe(a,o,l));throw TypeError(`Custom op ${a.op} is not registered.`);default:throw TypeError(`Unknown op '${a.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(t,e,n);return Uc(s)?s.then(a=>[].concat(a)):[].concat(s)}class P4{constructor(e={},n={},r={},i={}){this.weightMap=e,this.tensorArrayMap=n,this.tensorListMap=r,this.functionMap=i,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(e,n){return{id:e,frameName:n,iterationId:0}}set currentContext(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const e=[];for(let n=0;n<this.contexts.length-1;n++){const r=this.contexts.slice(0,this.contexts.length-n);e.push(this.contextIdforContexts(r))}e.push(""),this._currentContextIds=e}contextIdforContexts(e){return e?e.map(n=>n.id===0&&n.iterationId===0?"":`${n.frameName}-${n.iterationId}`).join("/"):""}enterFrame(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(this.contexts&&this.contexts.length>1)this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift();else throw new Error("Cannot exit frame, the context is empty")}nextIteration(){if(this.contexts&&this.contexts.length>0){this.contexts=this.contexts.slice(),this.lastId++;const e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}else throw new Error("Cannot increase frame iteration, the context is empty")}getWeight(e){return this.weightMap[e]}addTensorArray(e){this.tensorArrayMap[e.id]=e}getTensorArray(e){return this.tensorArrayMap[e]}addTensorList(e){this.tensorListMap[e.id]=e}getTensorList(e){return this.tensorListMap[e]}dispose(e){for(const n in this.tensorArrayMap)this.tensorArrayMap[n].clearAndClose(e);for(const n in this.tensorListMap)this.tensorListMap[n].clearAndClose(e)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D4(t,e,n,r){const i=new Set,s=[];let a=null,o=null;const l=new Set,c=Object.keys(t).map(f=>Qr(f)[0]);let u=[];r!=null&&(u=r.map(f=>Qr(f.name)[0]));const d=[...e];for(;d.length>0;){const f=d.pop();if((PG(f)||PPe(f)||DPe(f))&&a==null&&(a=f,o=a.children.map(h=>h.name).filter(h=>i.has(h))),i.add(f.name),n[f.name]==null&&c.indexOf(f.name)===-1&&u.indexOf(f.name)===-1){if(f.inputs.length===0){s.push(f.name);continue}f.inputs.forEach(h=>{l.has(h.name)||(l.add(h.name),d.push(h))})}}return{inputs:t,outputs:e,usedNodes:i,missingInputs:s,dynamicNode:a,syncInputs:o}}function NPe(t,e,n){const{usedNodes:r,inputs:i}=n,s=[],a=Object.keys(i).map(u=>Qr(u)[0]).map(u=>t.nodes[u]),o=t.initNodes;a.forEach(u=>{r.has(u.name)&&s.push(u)}),t.weights.forEach(u=>{r.has(u.name)&&s.push(u)}),o!=null&&o.forEach(u=>{r.has(u.name)&&s.push(u)});const l=new Set,c=[];for(;s.length>0;){const u=s.pop();l.add(u.name),e[u.name]||c.push(u),u.children.forEach(d=>{!l.has(d.name)&&r.has(d.name)&&d.inputs.every(f=>l.has(f.name))&&s.push(d)})}return c}const RPe=["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"],OPe=["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"],APe=["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"];function PG(t){return RPe.indexOf(t.op)>=0}function PPe(t){return OPe.indexOf(t.op)>=0}function DPe(t){return APe.indexOf(t.op)>=0}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class O1{constructor(e,n){this.graph=e,this.parent=n,this.compiledMap=new Map,this._weightMap={},this.SEPERATOR=",",this._functions={},this._functionExecutorMap={},this.intermediateTensors={},this.keepTensorForDebug=!1,this._outputs=e.outputs,this._inputs=e.inputs,this._initNodes=e.initNodes,this._signature=e.signature,this._functions=e.functions,e.functions!=null&&Object.keys(e.functions).forEach(r=>{this._functionExecutorMap[r]=new O1(e.functions[r],this)})}get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(e){const n=Object.keys(e).map(r=>e[r].map(i=>i.id));this._weightIds=[].concat(...n),this._weightMap=e}set resourceManager(e){this._resourceManager=e}get inputs(){return this._inputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(e=>e.signatureKey||e.name)}get outputNodes(){return this._outputs.map(e=>{const n=e.signatureKey||e.name;return e.defaultOutput?`${n}:${e.defaultOutput}`:n})}get functions(){return Object.keys(this._functions).reduce((e,n)=>(e[n]=this._functions[n].signature,e),{})}getCompilationKey(e,n){const r=e.map(s=>s.name).sort(),i=n.map(s=>s.name).sort();return r.join(this.SEPERATOR)+"--"+i.join(this.SEPERATOR)}compile(e,n){const r=D4(e,n,this.weightMap,this._initNodes),{missingInputs:i,dynamicNode:s,syncInputs:a}=r;if(s!=null)throw new Error(`This execution contains the node '${s.name}', which has the dynamic op '${s.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${a}]`);if(i.length>0){const o=n.map(c=>c.name),l=Object.keys(e);throw new Error(`Cannot compute the outputs [${o}] from the provided inputs [${l}]. Missing the following inputs: [${i}]`)}return NPe(this.graph,this.weightMap,r)}execute(e,n){e=this.mapInputs(e);const r=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),n=this.mapOutputs(n),this.checkOutputs(n);const i=r.map(d=>this.graph.nodes[Qr(d)[0]]),s=n.map(d=>Qr(d)[0]);let a=s.map(d=>this.graph.nodes[d]);this.resetIntermediateTensors(),a.length===0&&(a=this._outputs);const o=this.getCompilationKey(i,a);let l=this.compiledMap.get(o);l==null&&(l=this.compile(e,a),this.compiledMap.set(o,l));const c={},u={};return st(()=>{const d=new P4(this.weightMap,c,u,this.functionExecutorMap),f=Object.assign({},this.weightMap);Object.keys(e).forEach(y=>{const[x,v]=Qr(y),b=[];b[v]=e[y],f[x]=b});const h=this.getFrozenTensorIds(f),g={};for(let y=0;y<l.length;y++){const x=l[y];if(!f[x.name]){const v=A4(x,f,d,this._resourceManager);if(Uc(v))throw new Error(`The execution of the op '${x.op}' returned a promise. Please use model.executeAsync() instead.`);f[x.name]=v,this.checkTensorForDisposal(x.name,x,f,d,h,s,g)}}return this.parent==null&&d.dispose(h),n.map(y=>$r(y,f,d))})}getFrozenTensorIds(e){const n=[].concat.apply([],Object.keys(e).map(r=>e[r]).map(r=>r.map(i=>i.id)));return new Set(n)}checkTensorForDisposal(e,n,r,i,s,a,o){n.category==="control"||a.indexOf(e)!==-1||(r[e].forEach(l=>{l!=null&&(o[l.id]=(o[l.id]||0)+n.children.length)}),n.inputs.forEach(l=>{if(l.category!=="control"){const c=vAe(l.name,r,i);c!=null&&c.forEach(u=>{if(u&&!u.kept&&!s.has(u.id)){const d=o[u.id];if(d===1){if(!this.keepTensorForDebug)u.dispose();else{const[f,h]=aa(n.name,i);this.intermediateTensors[f]?this.intermediateTensors[f][h]=u:(this.intermediateTensors[f]=[],this.intermediateTensors[f][h]=u)}delete o[u.id]}else d!=null&&o[u.id]--}})}}))}async executeAsync(e,n){return this._executeAsync(e,n)}disposeIntermediateTensors(){this.intermediateTensors&&(Object.keys(this.intermediateTensors).forEach(e=>this.intermediateTensors[e].forEach(n=>n.dispose())),this.disposeTensorsMap())}disposeTensorsMap(){this.tensorsMap&&Object.keys(this.tensorsMap).forEach(e=>{this.tensorsMap[e].forEach(r=>{r&&!r.kept&&!r.isDisposed&&!this.keepIds.has(r.id)&&r.dispose()})})}getIntermediateTensors(){return this.tensorsMap}resetIntermediateTensors(){for(const e in this.intermediateTensors)this.intermediateTensors[e].forEach(n=>n.dispose()),delete this.intermediateTensors[e]}async _executeAsync(e,n,r=!1,i={},s={}){r||(e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),n=this.mapOutputs(n),this.checkOutputs(n));try{this.keepTensorForDebug=re().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(u){console.warn(u.message)}this.resetIntermediateTensors();const a=new P4(this.weightMap,i,s,this.functionExecutorMap);this.tensorsMap=await this.executeWithControlFlow(e,a,n,r);const o=n.map(u=>$r(u,this.tensorsMap,a)),l=o.map(u=>u.id),c=Object.keys(e).map(u=>e[u].id);return this.keepIds=new Set([...l,...c,...this.weightIds]),this.keepTensorForDebug||this.disposeTensorsMap(),this.parent==null&&a.dispose(this.keepIds),o}async executeFunctionAsync(e,n,r){const i=e.reduce((s,a,o)=>(s[this.inputs[o].name]=a,s),{});return this._executeAsync(i,this.outputNodes,!0,n,r)}async executeWithControlFlow(e,n,r,i){const s=Object.keys(e),a=s.map(S=>this.graph.nodes[Qr(S)[0]]),o=r.map(S=>Qr(S)[0]);let l=o.map(S=>this.graph.nodes[S]);l.length===0&&(l=this._outputs);const{usedNodes:c,missingInputs:u,dynamicNode:d,syncInputs:f}=D4(e,l,this.weightMap,this._initNodes),h=[...a,...this.graph.weights,...this._initNodes||[]].map(S=>({node:S,contexts:n.currentContext})),g=Object.assign({},this.weightMap);Object.keys(e).forEach(S=>{const[k,$]=Qr(S),T=[];T[$]=e[S],g[k]=T});const y={},x=this.getFrozenTensorIds(g),v={};for(;h.length>0;){const S=this.processStack(a,h,n,g,v,x,o,y,c);await Promise.all(S)}d==null&&!i&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const b=l.filter(S=>!PG(S)&&!$r(S.name,g,n)).map(S=>S.name);if(b.length>0){let S="";throw d!=null&&(S=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${f}]`),new Error(`Cannot compute the outputs [${b}] from the provided inputs [${s}]. Consider providing the following inputs: [${u}]. ${S}`)}return g}processStack(e,n,r,i,s,a,o,l,c){const u=[];for(;n.length>0;){const d=n.pop();r.currentContext=d.contexts;let f="";if(d.node.op==="Enter"&&I("isConstant",d.node,i,r)&&([f]=aa(d.node.name,r)),i[d.node.name]==null){const h=A4(d.node,i,r,this._resourceManager);f||([f]=aa(d.node.name,r));const g=r.currentContext;Uc(h)?u.push(h.then(y=>(i[f]=y,r.currentContext=g,this.checkTensorForDisposal(f,d.node,i,r,a,o,l),this.processChildNodes(d.node,n,r,i,s,c),y))):(i[f]=h,this.checkTensorForDisposal(f,d.node,i,r,a,o,l),this.processChildNodes(d.node,n,r,i,s,c))}else this.processChildNodes(d.node,n,r,i,s,c)}return u}processChildNodes(e,n,r,i,s,a){e.children.forEach(o=>{const[l]=aa(o.name,r);s[l]||!a.has(o.name)||(o.op==="Merge"?o.inputNames.some(c=>!!$r(c,i,r))&&(s[l]=!0,n.push({contexts:r.currentContext,node:o})):o.inputNames.every(c=>!!$r(c,i,r))&&(s[l]=!0,n.push({contexts:r.currentContext,node:o})))})}dispose(){Object.keys(this.weightMap).forEach(e=>this.weightMap[e].forEach(n=>n.dispose()))}checkInputShapeAndType(e){Object.keys(e).forEach(n=>{const r=e[n],[i]=Qr(n),s=this.graph.nodes[i];if(s.attrParams.shape&&s.attrParams.shape.value){const a=s.attrParams.shape.value,o=a.length===r.shape.length&&r.shape.every((l,c)=>a[c]===-1||a[c]===l);F(o,()=>`The shape of dict['${s.name}'] provided in model.execute(dict) must be [${a}], but was [${r.shape}]`)}s.attrParams.dtype&&s.attrParams.dtype.value&&F(r.dtype===s.attrParams.dtype.value,()=>`The dtype of dict['${s.name}'] provided in model.execute(dict) must be ${s.attrParams.dtype.value}, but was ${r.dtype}`)})}mapInputs(e){const n={};for(const r in e)if(this._signature!=null&&this._signature.inputs!=null&&this._signature.inputs[r]!=null){const i=this._signature.inputs[r];n[i.name]=e[r]}else n[r]=e[r];return n}checkInputs(e){const n=Object.keys(e).filter(r=>{const[i]=Qr(r);return this.graph.nodes[i]==null});if(n.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${n}] that are not part of graph`)}mapOutputs(e){return e.map(n=>this._signature!=null&&this._signature.outputs!=null&&this._signature.outputs[n]!=null?this._signature.outputs[n].name:n,{})}checkOutputs(e){e.forEach(n=>{const[r]=Qr(n);if(!this.graph.nodes[r])throw new Error(`The output '${n}' is not found in the graph`)})}}class FPe{constructor(e={},n={}){this.hashTableNameToHandle=e,this.hashTableMap=n}addHashTable(e,n){this.hashTableNameToHandle[e]=n.handle,this.hashTableMap[n.id]=n}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(const e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(const e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LPe="?tfjs-format=file",MPe="model.json";class BPe{constructor(e,n={},r=lN){this.modelUrl=e,this.loadOptions=n,this.version="n/a",this.io=r,n==null&&(this.loadOptions={}),this.resourceManager=new FPe}get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}findIOHandler(){const e=this.modelUrl;if(e.load!=null)this.handler=e;else if(this.loadOptions.requestInit!=null)this.handler=this.io.browserHTTPRequest(e,this.loadOptions);else{const n=this.io.getLoadHandlers(e,this.loadOptions);if(n.length===0)n.push(this.io.browserHTTPRequest(e,this.loadOptions));else if(n.length>1)throw new Error(`Found more than one (${n.length}) load handlers for URL '${[e]}'`);this.handler=n[0]}}load(){if(this.findIOHandler(),this.handler.load==null)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const e=this.handler.load();return Uc(e)?e.then(n=>this.loadSync(n)):this.loadSync(e)}loadSync(e){this.artifacts=e;const n=this.artifacts.modelTopology;let r=this.artifacts.signature;if(this.artifacts.userDefinedMetadata!=null){const s=this.artifacts.userDefinedMetadata;s.signature!=null&&(r=s.signature),s.structuredOutputKeys!=null&&(this.structuredOutputKeys=s.structuredOutputKeys)}this.signature=r,this.version=`${n.versions.producer}.${n.versions.minConsumer}`;const i=this.io.decodeWeights(this.artifacts.weightData,this.artifacts.weightSpecs);if(this.executor=new O1(I4.Instance.transformGraph(n,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(i),this.executor.resourceManager=this.resourceManager,e.modelInitializer!=null&&e.modelInitializer.node!=null){const s=I4.Instance.transformGraph(e.modelInitializer);this.initializer=new O1(s),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializer.executeAsync({},[])}return!0}async save(e,n){if(typeof e=="string"){const r=this.io.getSaveHandlers(e);if(r.length===0)throw new Error(`Cannot find any save handlers for URL '${e}'`);if(r.length>1)throw new Error(`Found more than one (${r.length}) save handlers for URL '${e}'`);e=r[0]}if(e.save==null)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return e.save(this.artifacts)}predict(e,n){const r=this.execute(e,this.outputNodes);if(this.structuredOutputKeys){const i=r instanceof tn?[r]:r,s={};return i.forEach((a,o)=>s[this.structuredOutputKeys[o]]=a),s}return r}normalizeInputs(e){if(!(e instanceof tn)&&!Array.isArray(e))return e;if(e=Array.isArray(e)?e:[e],e.length!==this.inputNodes.length)throw new Error(`Input tensor count mismatch,the graph model has ${this.inputNodes.length} placeholders, while there are ${e.length} input tensors.`);return this.inputNodes.reduce((n,r,i)=>(n[r]=e[i],n),{})}normalizeOutputs(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}execute(e,n){e=this.normalizeInputs(e),n=this.normalizeOutputs(n);const r=this.executor.execute(e,n);return r.length>1?r:r[0]}async executeAsync(e,n){e=this.normalizeInputs(e),n=this.normalizeOutputs(n);const r=await this.executor.executeAsync(e,n);return r.length>1?r:r[0]}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce((n,r)=>(n[r]=[e[r]],n),{})}dispose(){this.executor.dispose(),this.initializer&&this.initializer.dispose(),this.resourceManager.dispose()}}async function zPe(t,e={},n=lN){if(t==null)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");e==null&&(e={}),e.fromTFHub&&typeof t=="string"&&(t=jPe(t));const r=new BPe(t,e,n);return await r.load(),r}function jPe(t){return t.endsWith("/")||(t=t+"/"),`${t}${MPe}${LPe}`}/**
    * @license
    * Copyright 2023 Google LLC. All Rights Reserved.
    * Licensed under the Apache License, Version 2.0 (the "License");
    * you may not use this file except in compliance with the License.
    * You may obtain a copy of the License at
    *
    * http://www.apache.org/licenses/LICENSE-2.0
    *
    * Unless required by applicable law or agreed to in writing, software
    * distributed under the License is distributed on an "AS IS" BASIS,
    * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    * See the License for the specific language governing permissions and
    * limitations under the License.
    * =============================================================================
    *//**
    * @license
    * Copyright 2023 Google LLC. All Rights Reserved.
    * Licensed under the Apache License, Version 2.0 (the "License");
    * you may not use this file except in compliance with the License.
    * You may obtain a copy of the License at
    *
    * http://www.apache.org/licenses/LICENSE-2.0
    *
    * Unless required by applicable law or agreed to in writing, software
    * distributed under the License is distributed on an "AS IS" BASIS,
    * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    * See the License for the specific language governing permissions and
    * limitations under the License.
    * =============================================================================
    *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function A1(t,e,n,r){return new(n||(n=Promise))(function(i,s){function a(c){try{l(r.next(c))}catch(u){s(u)}}function o(c){try{l(r.throw(c))}catch(u){s(u)}}function l(c){c.done?i(c.value):new n(function(u){u(c.value)}).then(a,o)}l((r=r.apply(t,e||[])).next())})}function P1(t,e){var n,r,i,s,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(l){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||u[0]!==6&&u[0]!==2)){a=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){a.label=u[1];break}if(u[0]===6&&a.label<i[1]){a.label=i[1],i=u;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(u);break}i[2]&&a.ops.pop(),a.trys.pop();continue}u=e.call(t,a)}catch(d){u=[6,d],r=0}finally{n=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([l,c])}}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var VPe="https://tfhub.dev/tensorflow/tfjs-model/deeplab",WPe=513,lC={ADE20K:[[0,0,0],[120,120,120],[180,120,120],[6,230,230],[80,50,50],[4,200,3],[120,120,80],[140,140,140],[204,5,255],[230,230,230],[4,250,7],[224,5,255],[235,255,7],[150,5,61],[120,120,70],[8,255,51],[255,6,82],[143,255,140],[204,255,4],[255,51,7],[204,70,3],[0,102,200],[61,230,250],[255,6,51],[11,102,255],[255,7,71],[255,9,224],[9,7,230],[220,220,220],[255,9,92],[112,9,255],[8,255,214],[7,255,224],[255,184,6],[10,255,71],[255,41,10],[7,255,255],[224,255,8],[102,8,255],[255,61,6],[255,194,7],[255,122,8],[0,255,20],[255,8,41],[255,5,153],[6,51,255],[235,12,255],[160,150,20],[0,163,255],[140,140,140],[250,10,15],[20,255,0],[31,255,0],[255,31,0],[255,224,0],[153,255,0],[0,0,255],[255,71,0],[0,235,255],[0,173,255],[31,0,255],[11,200,200],[255,82,0],[0,255,245],[0,61,255],[0,255,112],[0,255,133],[255,0,0],[255,163,0],[255,102,0],[194,255,0],[0,143,255],[51,255,0],[0,82,255],[0,255,41],[0,255,173],[10,0,255],[173,255,0],[0,255,153],[255,92,0],[255,0,255],[255,0,245],[255,0,102],[255,173,0],[255,0,20],[255,184,184],[0,31,255],[0,255,61],[0,71,255],[255,0,204],[0,255,194],[0,255,82],[0,10,255],[0,112,255],[51,0,255],[0,194,255],[0,122,255],[0,255,163],[255,153,0],[0,255,10],[255,112,0],[143,255,0],[82,0,255],[163,255,0],[255,235,0],[8,184,170],[133,0,255],[0,255,92],[184,0,255],[255,0,31],[0,184,255],[0,214,255],[255,0,112],[92,255,0],[0,224,255],[112,224,255],[70,184,160],[163,0,255],[153,0,255],[71,255,0],[255,0,163],[255,204,0],[255,0,143],[0,255,235],[133,255,0],[255,0,235],[245,0,255],[255,0,122],[255,245,0],[10,190,212],[214,255,0],[0,204,255],[20,0,255],[255,255,0],[0,153,255],[0,41,255],[0,255,204],[41,0,255],[41,255,0],[173,0,255],[0,245,255],[71,0,255],[122,0,255],[0,255,184],[0,92,255],[184,255,0],[0,133,255],[255,214,0],[25,194,194],[102,255,0],[92,0,255]],CITYSCAPES:[[128,64,128],[244,35,232],[70,70,70],[102,102,156],[190,153,153],[153,153,153],[250,170,30],[220,220,0],[107,142,35],[152,251,152],[70,130,180],[220,20,60],[255,0,0],[0,0,142],[0,0,70],[0,60,100],[0,80,100],[0,0,230],[119,11,32]],PASCAL:[[0,0,0],[128,0,0],[0,128,0],[128,128,0],[0,0,128],[128,0,128],[0,128,128],[128,128,128],[64,0,0],[192,0,0],[64,128,0],[192,128,0],[64,0,128],[192,0,128],[64,128,128],[192,128,128],[0,64,0],[128,64,0],[0,192,0],[128,192,0],[0,64,128],[128,64,128],[0,192,128],[128,192,128],[64,64,0],[192,64,0],[64,192,0],[192,192,0],[64,64,128],[192,64,128],[64,192,128],[192,192,128],[0,0,64],[128,0,64],[0,128,64],[128,128,64],[0,0,192],[128,0,192],[0,128,192],[128,128,192],[64,0,64],[192,0,64],[64,128,64],[192,128,64],[64,0,192],[192,0,192],[64,128,192],[192,128,192],[0,64,64],[128,64,64],[0,192,64],[128,192,64],[0,64,192],[128,64,192],[0,192,192],[128,192,192],[64,64,64],[192,64,64],[64,192,64],[192,192,64],[64,64,192],[192,64,192],[64,192,192],[192,192,192],[32,0,0],[160,0,0],[32,128,0],[160,128,0],[32,0,128],[160,0,128],[32,128,128],[160,128,128],[96,0,0],[224,0,0],[96,128,0],[224,128,0],[96,0,128],[224,0,128],[96,128,128],[224,128,128],[32,64,0],[160,64,0],[32,192,0],[160,192,0],[32,64,128],[160,64,128],[32,192,128],[160,192,128],[96,64,0],[224,64,0],[96,192,0],[224,192,0],[96,64,128],[224,64,128],[96,192,128],[224,192,128],[32,0,64],[160,0,64],[32,128,64],[160,128,64],[32,0,192],[160,0,192],[32,128,192],[160,128,192],[96,0,64],[224,0,64],[96,128,64],[224,128,64],[96,0,192],[224,0,192],[96,128,192],[224,128,192],[32,64,64],[160,64,64],[32,192,64],[160,192,64],[32,64,192],[160,64,192],[32,192,192],[160,192,192],[96,64,64],[224,64,64],[96,192,64],[224,192,64],[96,64,192],[224,64,192],[96,192,192],[224,192,192],[0,32,0],[128,32,0],[0,160,0],[128,160,0],[0,32,128],[128,32,128],[0,160,128],[128,160,128],[64,32,0],[192,32,0],[64,160,0],[192,160,0],[64,32,128],[192,32,128],[64,160,128],[192,160,128],[0,96,0],[128,96,0],[0,224,0],[128,224,0],[0,96,128],[128,96,128],[0,224,128],[128,224,128],[64,96,0],[192,96,0],[64,224,0],[192,224,0],[64,96,128],[192,96,128],[64,224,128],[192,224,128],[0,32,64],[128,32,64],[0,160,64],[128,160,64],[0,32,192],[128,32,192],[0,160,192],[128,160,192],[64,32,64],[192,32,64],[64,160,64],[192,160,64],[64,32,192],[192,32,192],[64,160,192],[192,160,192],[0,96,64],[128,96,64],[0,224,64],[128,224,64],[0,96,192],[128,96,192],[0,224,192],[128,224,192],[64,96,64],[192,96,64],[64,224,64],[192,224,64],[64,96,192],[192,96,192],[64,224,192],[192,224,192],[32,32,0],[160,32,0],[32,160,0],[160,160,0],[32,32,128],[160,32,128],[32,160,128],[160,160,128],[96,32,0],[224,32,0],[96,160,0],[224,160,0],[96,32,128],[224,32,128],[96,160,128],[224,160,128],[32,96,0],[160,96,0],[32,224,0],[160,224,0],[32,96,128],[160,96,128],[32,224,128],[160,224,128],[96,96,0],[224,96,0],[96,224,0],[224,224,0],[96,96,128],[224,96,128],[96,224,128],[224,224,128],[32,32,64],[160,32,64],[32,160,64],[160,160,64],[32,32,192],[160,32,192],[32,160,192],[160,160,192],[96,32,64],[224,32,64],[96,160,64],[224,160,64],[96,32,192],[224,32,192],[96,160,192],[224,160,192],[32,96,64],[160,96,64],[32,224,64],[160,224,64],[32,96,192],[160,96,192],[32,224,192],[160,224,192],[96,96,64],[224,96,64],[96,224,64],[224,224,64],[96,96,192],[224,96,192],[96,224,192],[224,224,192]]},cC={PASCAL:["background","aeroplane","bicycle","bird","boat","bottle","bus","car","cat","chair","cow","dining table","dog","horse","motorbike","person","potted plant","sheep","sofa","train","TV"],CITYSCAPES:["road","sidewalk","building","wall","fence","pole","traffic light","traffic sign","vegetation","terrain","sky","person","rider","car","truck","bus","train","motorcycle","bicycle"],ADE20K:["background","wall","building","sky","floor","tree","ceiling","road","bed","windowpane","grass","cabinet","sidewalk","person","earth","door","table","mountain","plant","curtain","chair","car","water","painting","sofa","shelf","house","sea","mirror","rug","field","armchair","seat","fence","desk","rock","wardrobe","lamp","bathtub","railing","cushion","base","box","column","signboard","chest","counter","sand","sink","skyscraper","fireplace","refrigerator","grandstand","path","stairs","runway","case","pool","pillow","screen","stairway","river","bridge","bookcase","blind","coffee","toilet","flower","book","hill","bench","countertop","stove","palm","kitchen","computer","swivel","boat","bar","arcade","hovel","bus","towel","light","truck","tower","chandelier","awning","streetlight","booth","television","airplane","dirt","apparel","pole","land","bannister","escalator","ottoman","bottle","buffet","poster","stage","van","ship","fountain","conveyer","canopy","washer","plaything","swimming","stool","barrel","basket","waterfall","tent","bag","minibike","cradle","oven","ball","food","step","tank","trade","microwave","pot","animal","bicycle","lake","dishwasher","screen","blanket","sculpture","hood","sconce","vase","traffic","tray","ashcan","fan","pier","screen","plate","monitor","bulletin","shower","radiator","glass","clock","flag"]};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UPe(t,e){return""+VPe+"/"+(e===4?t+"/1/default/1/model.json":t+"/1/quantized/"+e+"/1/model.json")+"?tfjs-format=file"}function GPe(t){if(t==="pascal")return lC.PASCAL;if(t==="ade20k")return lC.ADE20K;if(t==="cityscapes")return lC.CITYSCAPES;throw new Error("SemanticSegmentation cannot be constructed with an invalid base model "+t+". Try one of 'pascal', 'cityscapes' and 'ade20k'.")}function HPe(t){if(t==="pascal")return cC.PASCAL;if(t==="ade20k")return cC.ADE20K;if(t==="cityscapes")return cC.CITYSCAPES;throw new Error("SemanticSegmentation cannot be constructed with an invalid base model "+t+". Try one of 'pascal', 'cityscapes' and 'ade20k'.")}function qPe(t,e,n,r){return A1(this,void 0,void 0,function(){var i,s,a,o,l,c,u,d,f,h,g,y,x,v;return P1(this,function(b){switch(b.label){case 0:if(t.length<e.length)throw new Error("The colormap must be expansive enough to encode each label. Aborting, since the given colormap has length "+t.length+", but there are "+e.length+" labels.");return i=n.shape,s=i[0],a=i[1],o=qe([s,a,3],"int32"),[4,n.array()];case 1:for(l=b.sent(),c=new Set,u=0;u<s;++u)for(d=0;d<a;++d)v=l[u][d],c.add(v),o.set(t[v][0],u,d,0),o.set(t[v][1],u,d,1),o.set(t[v][2],u,d,2);return f=o.toTensor(),[4,RW(f,r)];case 2:for(h=b.sent(),sr(f),g={},y=0,x=Array.from(c);y<x.length;y++)v=x[y],g[e[v]]=t[v];return[2,{legend:g,segmentationMap:h}]}})})}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KPe(t){return t===void 0&&(t={base:"pascal",quantizationBytes:2}),A1(this,void 0,void 0,function(){var e;return P1(this,function(n){switch(n.label){case 0:if(mAe==null)throw new Error("Cannot find TensorFlow.js. If you are using a <script> tag, please also include @tensorflow/tfjs on the page before using this model.");if(t.base){if(["pascal","cityscapes","ade20k"].indexOf(t.base)===-1)throw new Error("SemanticSegmentation cannot be constructed with an invalid base model "+t.base+". Try one of 'pascal', 'cityscapes' and 'ade20k'.");if([1,2,4].indexOf(t.quantizationBytes)===-1)throw new Error("Only quantization to 1, 2 or 4 bytes is supported.")}else if(!t.modelUrl)throw new Error("SemanticSegmentation can be constructed either by passing the weights URL or one of the supported base model names from 'pascal', 'cityscapes' and 'ade20k',together with the degree of quantization (either 1, 2 or 4).Aborting, since neither has been provided.");return[4,zPe(t.modelUrl||UPe(t.base,t.quantizationBytes))];case 1:return e=n.sent(),[2,new XPe(e,t.base)]}})})}var XPe=function(){function t(e,n){this.model=e,this.base=n}return t.prototype.predict=function(e){var n=this;return st(function(){var r=Ht(function(i){return st(function(){var s=i instanceof tn?i:OW(i),a=s.shape,o=a[0],l=a[1],c=WPe/Math.max(l,o),u=Math.round(o*c),d=Math.round(l*c);return Ga(cR.resizeBilinear(s,[u,d]))})}(e),"int32");return Xg(n.model.execute(r))})},t.prototype.segment=function(e,n){return n===void 0&&(n={}),A1(this,void 0,void 0,function(){var r,i,s,a,o,l,c,u,d,f,h=this;return P1(this,function(g){switch(g.label){case 0:if(!(n.colormap&&n.labels||this.base))throw new Error("Calling the 'segment' method requires either the 'base' attribute to be defined (e.g. 'pascal', 'cityscapes' or'ade20k'), or 'colormap' and 'labels' options to be set. Aborting, since neither has been provided.");return n.colormap&&n.labels||(n.colormap=GPe(this.base),n.labels=HPe(this.base)),r=n.colormap,i=n.labels,s=n.canvas,a=st(function(){return h.predict(e)}),o=a.shape,l=o[0],c=o[1],[4,qPe(r,i,a,s)];case 1:return u=g.sent(),d=u.legend,f=u.segmentationMap,sr(a),[2,{legend:d,height:l,width:c,segmentationMap:f}]}})})},t.prototype.dispose=function(){return A1(this,void 0,void 0,function(){return P1(this,function(e){return this.model&&this.model.dispose(),[2]})})},t}();/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mc={},jv={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function YPe(t,e){mc[t]=e}function Vs(t,e){if(!(t in mc)||e!=null){const r=ZPe(t,e);if(r!==null)mc[t]=r;else return console.log("Could not get context for WebGL version",t),null}const n=mc[t];return n==null||n.isContextLost()?(delete mc[t],Vs(t)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),mc[t])}function QPe(t){if(typeof OffscreenCanvas<"u"&&t===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function ZPe(t,e){if(t!==1&&t!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=e??QPe(t);return n.addEventListener("webglcontextlost",r=>{r.preventDefault(),delete mc[t]},!1),re().getBool("SOFTWARE_WEBGL_ENABLED")&&(jv.failIfMajorPerformanceCaveat=!1),t===1?n.getContext("webgl",jv)||n.getContext("experimental-webgl",jv):n.getContext("webgl2",jv)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var pm;(function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"})(pm||(pm={}));var Ci;(function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"})(Ci||(Ci={}));var Wn;(function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(Wn||(Wn={}));function ey(t,e){return[e,t]}function JPe(t,e){return t*e}function Vv(t){const e=oe(t),n=Math.ceil(e/4);return x1(n)}function qf(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function e3e(t,e){const[n,r]=qf(t,e);return n*r*4}function OR(t,e){const n=t;let r,i,s,a,o,l,c,u,d,f;return re().getNumber("WEBGL_VERSION")===2?(r=n.R32F,i=n.R16F,s=n.RGBA16F,a=n.RGBA32F,o=n.RED,c=4,u=1,d=n.HALF_FLOAT,f=n.FLOAT,l=n.RGBA8):(r=t.RGBA,i=t.RGBA,s=t.RGBA,a=n.RGBA,o=t.RGBA,c=4,u=4,d=e!=null?e.HALF_FLOAT_OES:null,f=t.FLOAT,l=t.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:i,internalFormatPackedHalfFloat:s,internalFormatPackedFloat:a,textureFormatFloat:o,downloadTextureFormat:l,downloadUnpackNumChannels:c,defaultNumChannels:u,textureTypeHalfFloat:d,textureTypeFloat:f}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ae(t,e){const n=e();return re().getBool("DEBUG")&&t3e(t),n}function t3e(t){const e=t.getError();if(e!==t.NO_ERROR)throw new Error("WebGL Error: "+s3e(t,e))}const n3e=596e-10,r3e=65504;function i3e(t){return!!(re().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||n3e<Math.abs(t)&&Math.abs(t)<r3e)}function s3e(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${e}`}}function Wv(t,e){return Io(t,()=>t.getExtension(e),'Extension "'+e+'" not supported on this browser.')}function a3e(t,e){const n=Io(t,()=>t.createShader(t.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(Ae(t,()=>t.shaderSource(n,e)),Ae(t,()=>t.compileShader(n)),t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function o3e(t,e){const n=Io(t,()=>t.createShader(t.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(Ae(t,()=>t.shaderSource(n,e)),Ae(t,()=>t.compileShader(n)),re().get("ENGINE_COMPILE_ONLY"))return n;if(t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw DG(e,t.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}const l3e=/ERROR: [0-9]+:([0-9]+):/g;function DG(t,e){const n=l3e.exec(e);if(n==null){console.log(`Couldn't parse line number in error: ${e}`),console.log(t);return}const r=+n[1],i=t.split(`
`),s=i.length.toString().length+2,a=i.map((d,f)=>Tc((f+1).toString(),s)+d);let o=0;for(let d=0;d<a.length;d++)o=Math.max(a[d].length,o);const l=a.slice(0,r-1),c=a.slice(r-1,r),u=a.slice(r);console.log(l.join(`
`)),console.log(e.split(`
`)[0]),console.log(`%c ${Tc(c[0],o)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(u.join(`
`))}function c3e(t){return Io(t,()=>t.createProgram(),"Unable to create WebGLProgram.")}function u3e(t,e){if(Ae(t,()=>t.linkProgram(e)),!re().get("ENGINE_COMPILE_ONLY")&&t.getProgramParameter(e,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function uC(t,e){if(Ae(t,()=>t.validateProgram(e)),t.getProgramParameter(e,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function d3e(t,e){const n=Io(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return Ae(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),Ae(t,()=>t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function f3e(t,e){const n=Io(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return Ae(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n)),Ae(t,()=>t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function p3e(t){return Io(t,()=>t.createTexture(),"Unable to create WebGLTexture.")}function h3e(t,e){const n=re().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0){const r=`[${t}x${e}]`;throw new Error("Requested texture size "+r+" is invalid.")}if(t>n||e>n){const r=`[${t}x${e}]`,i=`[${n}x${n}]`;throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+i+".")}}function m3e(t){return Io(t,()=>t.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function F4(t,e,n,r,i,s,a){const o=t.getAttribLocation(e,n);return o===-1?!1:(Ae(t,()=>t.bindBuffer(t.ARRAY_BUFFER,r)),Ae(t,()=>t.vertexAttribPointer(o,i,t.FLOAT,!1,s,a)),Ae(t,()=>t.enableVertexAttribArray(o)),!0)}function g3e(t,e,n){w3e(t,n),Ae(t,()=>t.activeTexture(t.TEXTURE0+n)),Ae(t,()=>t.bindTexture(t.TEXTURE_2D,e))}function y3e(t,e,n){return Io(t,()=>t.getUniformLocation(e,n),'uniform "'+n+'" not present in program.')}function v3e(t,e,n){return t.getUniformLocation(e,n)}function x3e(t,e,n,r){Ae(t,()=>g3e(t,e,r)),Ae(t,()=>t.uniform1i(n,r))}function dC(t,e,n){Ae(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,n)),Ae(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0))}function L4(t,e){Ae(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,e)),Ae(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0))}function Uv(t){const e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+b3e(t,e))}function b3e(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${e}`}}function Io(t,e,n){const r=Ae(t,()=>e());if(r==null)throw new Error(n);return r}function w3e(t,e){const n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n){const i=`[gl.TEXTURE0, gl.TEXTURE${n}]`;throw new Error(`textureUnit must be in ${i}.`)}}function hf(t,e=2){return oe(t.slice(0,t.length-e))}function mf(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function fC(t){let e=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(e=[hf(t),...mf(t)]),e}function S3e(t,e=!1){let n=re().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=re().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");r===1/0&&re().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),e&&(n=n*2,r=r*2,t=t.map((o,l)=>l>=t.length-2?ab(t[l]):t[l]),t.length===1&&(t=[2,t[0]])),t.length!==2&&(t=Co(t).newShape);let i=oe(t),s=null;t.length<=1&&i<=n?s=[1,i]:t.length===2&&t[0]<=n&&t[1]<=n?s=t:t.length===3&&t[0]*t[1]<=n&&t[2]<=n?s=[t[0]*t[1],t[2]]:t.length===3&&t[0]<=n&&t[1]*t[2]<=n?s=[t[0],t[1]*t[2]]:t.length===4&&t[0]*t[1]*t[2]<=n&&t[3]<=n?s=[t[0]*t[1]*t[2],t[3]]:t.length===4&&t[0]<=n&&t[1]*t[2]*t[3]<=n&&(s=[t[0],t[1]*t[2]*t[3]]);const a=s!=null&&Math.max(...s)>r&&Math.min(...s)<=(e?2:1)&&Math.min(...s)>0;if(s==null||a)if(e){const o=hf(t);let l=2,c=2;t.length&&([l,c]=mf(t)),i=o*(l/2)*(c/2),s=x1(i).map(u=>u*2)}else s=x1(i);return s}function Gv(t){return t%2===0}function D1(t,e){if(t=t.slice(-2),e=e.slice(-2),$t(t,e)||!t.length||!e.length||t[0]===0||t[1]===0||e[0]===0||e[1]===0)return!0;if(t.length!==e.length){const n=t.slice(-1)[0],r=e.slice(-1)[0];if(n===r||Gv(n)&&Gv(r)&&(t[0]===1||e[0]===1))return!0}return t[1]===e[1]&&Gv(t[0])&&Gv(e[0])}let pC,hC;function k3e(t){if(pC==null){const e=Vs(t);pC=e.getParameter(e.MAX_TEXTURE_SIZE)}return pC}function C3e(t){if(hC==null){const e=Vs(t);hC=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,hC)}function $3e(t){if(t===0)return 0;let e;const n=Vs(t);return as(n,"EXT_disjoint_timer_query_webgl2")&&t===2?e=2:as(n,"EXT_disjoint_timer_query")?e=1:e=0,e}function as(t,e){return t.getExtension(e)!=null}function M4(t){try{if(Vs(t)!=null)return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function E3e(t){if(t===0)return!1;const e=Vs(t);if(t===1){if(!as(e,"OES_texture_float"))return!1}else if(!as(e,"EXT_color_buffer_float"))return!1;return WE(e)}function T3e(t){if(t===0)return!1;const e=Vs(t);if(t===1){if(!as(e,"OES_texture_float")||!as(e,"WEBGL_color_buffer_float"))return!1}else{if(as(e,"EXT_color_buffer_float"))return WE(e);const r="EXT_color_buffer_half_float";if(as(e,r)){const i=e.getExtension(r);return _3e(e,i)}return!1}return WE(e)}function WE(t){const e=OR(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,e.internalFormatFloat,1,1,0,e.textureFormatFloat,e.textureTypeFloat,null);const s=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,s),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);const a=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(s),a}function _3e(t,e){const n=OR(t,e),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const a=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,a),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);const o=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(r),t.deleteFramebuffer(a),o}function I3e(t){return t!==2?!1:Vs(t).fenceSync!=null}function ty(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&F(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the WebGL backend.`)})}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fe=re();Fe.registerFlag("HAS_WEBGL",()=>Fe.getNumber("WEBGL_VERSION")>0);Fe.registerFlag("WEBGL_VERSION",()=>M4(2)?2:M4(1)?1:0);Fe.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);Fe.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>Fe.get("WEBGL_VERSION")===2);Fe.registerFlag("WEBGL_CPU_FORWARD",()=>!0);Fe.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);Fe.registerFlag("WEBGL_PACK",()=>Fe.getBool("HAS_WEBGL"));Fe.registerFlag("WEBGL_PACK_NORMALIZATION",()=>Fe.getBool("WEBGL_PACK"));Fe.registerFlag("WEBGL_PACK_CLIP",()=>Fe.getBool("WEBGL_PACK"));Fe.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>Fe.getBool("WEBGL_PACK"));Fe.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>Fe.getBool("WEBGL_PACK"));Fe.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>Fe.getBool("WEBGL_PACK"));Fe.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>Fe.getBool("WEBGL_PACK"));Fe.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>Fe.getBool("WEBGL_PACK"));Fe.registerFlag("WEBGL_PACK_REDUCE",()=>Fe.getBool("WEBGL_PACK"));Fe.registerFlag("WEBGL_LAZILY_UNPACK",()=>Fe.getBool("WEBGL_PACK"));Fe.registerFlag("WEBGL_CONV_IM2COL",()=>Fe.getBool("WEBGL_PACK"));Fe.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>k3e(Fe.getNumber("WEBGL_VERSION")));Fe.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>C3e(Fe.getNumber("WEBGL_VERSION")));Fe.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const t=Fe.getNumber("WEBGL_VERSION");return t===0?0:$3e(t)});Fe.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>Fe.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!JI());Fe.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>E3e(Fe.getNumber("WEBGL_VERSION")));Fe.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>Fe.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:Fe.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));Fe.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>T3e(Fe.getNumber("WEBGL_VERSION")));Fe.registerFlag("WEBGL_FENCE_API_ENABLED",()=>I3e(Fe.getNumber("WEBGL_VERSION")));Fe.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>Fe.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);Fe.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,t=>{if(t<0&&t!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${t}.`)});Fe.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>JI()?1:-1,t=>{if(t<0&&t!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${t}.`)});Fe.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);Fe.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);Fe.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);Fe.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);Fe.registerFlag("WEBGL_EXP_CONV",()=>!1);Fe.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>Fe.getBool("IS_TEST"));Fe.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0);Fe.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1);Fe.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ir(){let t,e,n,r,i,s,a,o,l,c;return re().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",e="in",n="out",r="in",i="texture",s="outputColor",a="out vec4 outputColor;",o=re().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",l="",c=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",e="attribute",n="varying",r="varying",i="texture2D",s="gl_FragColor",a="",o=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,l=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,c=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:e,varyingVs:n,varyingFs:r,texture2D:i,output:s,defineOutput:a,defineSpecialNaN:o,defineSpecialInf:l,defineRound:c}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bu(t,e,n="index"){const r=Me(e);return r.map((i,s)=>{const a=`int ${t[s]} = ${n} / ${i}`,o=s===r.length-1?`int ${t[s+1]} = ${n} - ${t[s]} * ${i}`:`index -= ${t[s]} * ${i}`;return`${a}; ${o};`}).join("")}function x2(t,e,n="index"){const r=Me(e);return r.map((i,s)=>{const a=`int ${t[s]} = ${n} / outShapeStrides[${s}]`,o=s===r.length-1?`int ${t[s+1]} = ${n} - ${t[s]} * outShapeStrides[${s}]`:`index -= ${t[s]} * outShapeStrides[${s}]`;return`${a}; ${o};`}).join("")}function N3e(t,e){const n=t.length,r=t.map(s=>`${e}[${s}]`),i=new Array(n-1);i[n-2]=r[n-1];for(let s=n-3;s>=0;--s)i[s]=`(${i[s+1]} * ${r[s+1]})`;return i}function R3e(t,e,n="index"){const r=t.map((s,a)=>a),i=N3e(r,e);return i.map((s,a)=>{const o=`int ${t[a]} = ${n} / ${i[a]}`,l=a===i.length-1?`int ${t[a+1]} = ${n} - ${t[a]} * ${i[a]}`:`index -= ${t[a]} * ${i[a]}`;return`${o}; ${l};`}).join("")}function AR(t){const e=Me(t).map(n=>n.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${e[0]} + coords.y * ${e[1]} + coords.z;
  }
`}function PR(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}const FG=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{getBroadcastDims:LG}=NG;function O3e(t,e,n){const r=[];if(t.forEach(h=>{const g=oe(h.shapeInfo.logicalShape);if(h.shapeInfo.isUniform?r.push(`uniform float ${h.name}${g>1?`[${g}]`:""};`):(r.push(`uniform sampler2D ${h.name};`),r.push(`uniform int offset${h.name};`)),n.enableShapeUniforms){const{uniformShape:y}=DR(n.packedInputs,h.shapeInfo.logicalShape,h.shapeInfo.texShape);switch(y.length){case 1:r.push(`uniform int ${h.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${h.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${h.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${h.name}Shape;`);break}r.push(`uniform ivec2 ${h.name}TexShape;`)}}),n.enableShapeUniforms){switch(e.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;");break}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(h=>{r.push(`uniform ${h.type} ${h.name}${h.arrayIndex?`[${h.arrayIndex}]`:""};`)});const i=r.join(`
`),s=t.map(h=>A3e(h,e,n.packedInputs,n.enableShapeUniforms)).join(`
`),a=e.texShape,o=Ir(),l=F3e(o);let c,u,d=B3e(o);return e.isPacked?(c=P3e(e.logicalShape,a,n.enableShapeUniforms),u=M3e(o)):(c=D3e(e.logicalShape,a,n.enableShapeUniforms),u=L3e(o)),n.packedInputs&&(d+=W3e),[d,l,u,i,c,s,n.userCode].join(`
`)}function Kf(t,e=!1){const n=t.shapeInfo.logicalShape;switch(n.length){case 0:return tDe(t,e);case 1:return rDe(t,e);case 2:return sDe(t,e);case 3:return oDe(t,e);case 4:return cDe(t,e);case 5:return uDe(t);case 6:return dDe(t);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function MG(t,e){switch(t.shapeInfo.logicalShape.length){case 0:return eDe(t);case 1:return nDe(t,e);case 2:return iDe(t,e);case 3:return aDe(t,e);default:return lDe(t,e)}}function A3e(t,e,n=!1,r){let i="";n?i+=MG(t,r):i+=Kf(t,r);const s=t.shapeInfo.logicalShape,a=e.logicalShape;return s.length<=a.length&&(n?i+=fDe(t,e):i+=pDe(t,e)),i}function P3e(t,e,n){switch(t.length){case 0:return BG();case 1:return U3e(t,e,n);case 2:return Z3e(t,e,n);case 3:return H3e(t,e,n);default:return K3e(t,e,n)}}function D3e(t,e,n){switch(t.length){case 0:return BG();case 1:return G3e(t,e,n);case 2:return J3e(t,e,n);case 3:return q3e(t,e,n);case 4:return X3e(t,e,n);case 5:return Y3e(t,e);case 6:return Q3e(t,e);default:throw new Error(`${t.length}-D output sampling is not yet supported`)}}function F3e(t){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${t.texture2D}(textureSampler, uv).r;
    }
  `}function L3e(t){return`
    void setOutput(float val) {
      ${t.output} = vec4(val, 0, 0, 0);
    }
  `}function M3e(t){return`
    void setOutput(vec4 val) {
      ${t.output} = val;
    }
  `}function B3e(t){return`${t.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${t.varyingFs} vec2 resultUV;
    ${t.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${t.defineSpecialNaN}
    ${t.defineSpecialInf}
    ${t.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${z3e}
    ${j3e}
    ${V3e}
  `}const z3e=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,j3e=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,V3e=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,W3e=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function BG(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function U3e(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return r[0]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${r[1]}.0);
      }
    `:r[1]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${r[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);
    }
  `}function G3e(t,e,n){return e[0]===1?n?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${e[1]}.0);
      }
    `:e[1]===1?n?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${e[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      return resTexRC.x * ${e[1]} + resTexRC.y;
    }
  `}function H3e(t,e,n){if(n)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],i=Math.ceil(t[2]/2),s=i*Math.ceil(t[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      int b = index / ${s};
      index -= b * ${s};

      int r = 2 * (index / ${i});
      int c = imod(index, ${i}) * 2;

      return ivec3(b, r, c);
    }
  `}function q3e(t,e,n){if(n)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${x2(["r","c","d"],t)}
    return ivec3(r, c, d);
  }
`;const r=bu(["r","c","d"],t);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec3(r, c, d);
    }
  `}function K3e(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],i=Math.ceil(t[t.length-1]/2),s=i*Math.ceil(t[t.length-2]/2);let a=s,o="",l="b, r, c";for(let c=2;c<t.length-1;c++)a*=t[t.length-c-1],o=`
      int b${c} = index / ${a};
      index -= b${c} * ${a};
    `+o,l=`b${c}, `+l;return`
    ivec${t.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      ${o}

      int b = index / ${s};
      index -= b * ${s};

      int r = 2 * (index / ${i});
      int c = imod(index, ${i}) * 2;

      return ivec${t.length}(${l});
    }
  `}function X3e(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${x2(["r","c","d","d2"],t)}
      return ivec4(r, c, d, d2);
    }
  `;const r=bu(["r","c","d","d2"],t);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec4(r, c, d, d2);
    }
  `}function Y3e(t,e){const n=bu(["r","c","d","d2","d3"],t);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${e[0]},
                             ${e[1]}));

      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function Q3e(t,e){const n=bu(["r","c","d","d2","d3","d4"],t);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function Z3e(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if($t(t,e))return n?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));
      }
    `;const i=Math.ceil(t[1]/2);return n?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));

      int index = resTexRC.x * ${r[1]} + resTexRC.y;
      int r = 2 * (index / ${i});
      int c = imod(index, ${i}) * 2;

      return ivec2(r, c);
    }
  `}function J3e(t,e,n){return $t(t,e)?n?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${e[0]}, ${e[1]}));
      }
    `:t[1]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:t[0]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:n?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      int r = index / ${t[1]};
      int c = index - r * ${t[1]};
      return ivec2(r, c);
    }
  `}function wu(t){return`offset${t}`}function eDe(t){const e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=Ir();return`
    vec4 ${n}() {
      return ${r.texture2D}(${e}, halfCR);
    }
  `}function tDe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`float ${r}() {return ${n};}`;const[i,s]=t.shapeInfo.texShape;if(i===1&&s===1)return`
      float ${r}() {
        return sampleTexture(${n}, halfCR);
      }
    `;const a=wu(n);if(e)return`
    float ${r}() {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${a});
      return sampleTexture(${n}, uv);
    }
  `;const[o,l]=t.shapeInfo.texShape;return`
    float ${r}() {
      vec2 uv = uvFromFlat(${o}, ${l}, ${a});
      return sampleTexture(${n}, uv);
    }
  `}function nDe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=t.shapeInfo.texShape,s=Ir();if(e)return`
    vec4 ${r}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${s.texture2D}(${n}, uv);
    }
  `;const a=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];return`
    vec4 ${r}(int index) {
      vec2 uv = packedUVfrom1D(
        ${a[0]}, ${a[1]}, index);
      return ${s.texture2D}(${n}, uv);
    }
  `}function rDe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`
      float ${r}(int index) {
        ${Xf(t)}
      }
    `;const i=t.shapeInfo.texShape,s=i[0],a=i[1];if(a===1&&s===1)return`
      float ${r}(int index) {
        return sampleTexture(${n}, halfCR);
      }
    `;const o=wu(n);return a===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${o}) + 0.5) / float(${n}TexShape[0]));
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${o}) + 0.5) / ${s}.0);
        return sampleTexture(${n}, uv);
      }
    `:s===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${o}) + 0.5) / float(${n}TexShape[1]), 0.5);
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${o}) + 0.5) / ${a}.0, 0.5);
        return sampleTexture(${n}, uv);
      }
    `:e?`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${o});
      return sampleTexture(${n}, uv);
    }
  `:`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${s}, ${a}, index + ${o});
      return sampleTexture(${n}, uv);
    }
  `}function iDe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=t.shapeInfo.texShape,a=s[0],o=s[1],l=Ir();if(s!=null&&$t(n,s))return e?`
      vec4 ${i}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);

        return ${l.texture2D}(${r}, uv);
      }
    `:`
      vec4 ${i}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${o}.0, ${a}.0);

        return ${l.texture2D}(${r}, uv);
      }
    `;if(e)return`
    vec4 ${i}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `;const c=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],u=Math.ceil(n[1]/2);return`
    vec4 ${i}(int row, int col) {
      vec2 uv = packedUVfrom2D(${u}, ${c[0]}, ${c[1]}, row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `}function sDe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=t.shapeInfo.texShape;if(s!=null&&$t(n,s)){if(e)return`
      float ${i}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `;const f=s[0],h=s[1];return`
    float ${i}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${h}.0, ${f}.0);
      return sampleTexture(${r}, uv);
    }
  `}const{newShape:a,keptDims:o}=Co(n),l=a;if(l.length<n.length){const f=Yf(t,l),h=["row","col"];return`
      ${Kf(f,e)}
      float ${i}(int row, int col) {
        return ${i}(${Qf(h,o)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${i}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));
        ${Xf(t)}
      }
    `;const c=s[0],u=s[1],d=wu(r);return u===1?e?`
      float ${i}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${i}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${c}.0);
      return sampleTexture(${r}, uv);
    }
  `:c===1?e?`
      float ${i}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${i}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${u}.0, 0.5);
      return sampleTexture(${r}, uv);
    }
  `:e?`
      float ${i}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${r}Shape[1] + col + ${d};
        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
        return sampleTexture(${r}, uv);
      }
    `:`
  float ${i}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${n[1]} + col + ${d};
    vec2 uv = uvFromFlat(${c}, ${u}, index);
    return sampleTexture(${r}, uv);
  }
`}function aDe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=t.shapeInfo.texShape,a=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)];if(n[0]===1){const f=n.slice(1),h=[1,2],g=Yf(t,f),y=["b","row","col"];return`
        ${MG(g,e)}
        vec4 ${i}(int b, int row, int col) {
          return ${i}(${Qf(y,h)});
        }
      `}const o=Ir();if(e)return`
    vec4 ${i}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${o.texture2D}(${r}, uv);
    }
  `;const l=a[0],c=a[1],u=Math.ceil(n[2]/2),d=u*Math.ceil(n[1]/2);return`
    vec4 ${i}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${l}, ${c}, ${d}, ${u}, b, row, col);
      return ${o.texture2D}(${r}, uv);
    }
  `}function oDe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=n[1]*n[2],a=n[2],{newShape:o,keptDims:l}=Co(n),c=o;if(c.length<n.length){const y=Yf(t,c),x=["row","col","depth"];return`
        ${Kf(y,e)}
        float ${i}(int row, int col, int depth) {
          return ${i}(${Qf(x,l)});
        }
      `}if(t.shapeInfo.isUniform)return`
      float ${i}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${s}, ${a}, 1)));
        ${Xf(t)}
      }
    `;const u=t.shapeInfo.texShape,d=u[0],f=u[1],h=t.shapeInfo.flatOffset;if(f===s&&h==null)return e?`
      float ${i}(int row, int col, int depth) {
        int stride1 = ${r}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
        float ${i}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${a}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${f}.0, ${d}.0);
          return sampleTexture(${r}, uv);
        }
      `;if(f===a&&h==null)return e?`
      float ${i}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${i}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${f}.0, ${d}.0);
      return sampleTexture(${r}, uv);
    }
  `;const g=wu(r);return e?`
    float ${i}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${r}Shape[1] * ${r}Shape[2];
      int stride1 = ${r}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${g};
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
      return sampleTexture(${r}, uv);
    }
    `:`
      float ${i}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${s} + col * ${a} + depth + ${g};
        vec2 uv = uvFromFlat(${d}, ${f}, index);
        return sampleTexture(${r}, uv);
      }
  `}function lDe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=Ir();if(e)return`
    vec4 ${r}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${n}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${i.texture2D}(${n}, uv);
    }
  `;const s=t.shapeInfo.logicalShape,a=s.length,o=t.shapeInfo.texShape,l=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)],c=l[0],u=l[1],d=Math.ceil(s[a-1]/2);let f=d*Math.ceil(s[a-2]/2),h="int b, int row, int col",g=`b * ${f} + (row / 2) * ${d} + (col / 2)`;for(let y=2;y<a-1;y++)h=`int b${y}, `+h,f*=s[a-y-1],g=`b${y} * ${f} + `+g;return`
    vec4 ${r}(${h}) {
      int index = ${g};
      int texR = index / ${u};
      int texC = index - texR * ${u};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${u}, ${c});
      return ${i.texture2D}(${n}, uv);
    }
  `}function cDe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=n[3],a=n[2]*s,o=n[1]*a,{newShape:l,keptDims:c}=Co(n);if(l.length<n.length){const b=Yf(t,l),S=["row","col","depth","depth2"];return`
      ${Kf(b,e)}
      float ${i}(int row, int col, int depth, int depth2) {
        return ${i}(${Qf(S,c)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${i}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${o}, ${a}, ${s}, 1)));
        ${Xf(t)}
      }
    `;const u=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,f=d[0],h=d[1],g=`int stride2 = ${r}Shape[3];`,y=`int stride1 = ${r}Shape[2] * stride2;`,x=`int stride0 = ${r}Shape[1] * stride1;`;if(h===o&&u==null)return e?`
      float ${i}(int row, int col, int depth, int depth2) {
        ${g}
        ${y}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${i}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${a}, ${s}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${h}.0, ${f}.0);
        return sampleTexture(${r}, uv);
      }
    `;if(h===s&&u==null)return e?`
      float ${i}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${i}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${n[1]*n[2]}, ${n[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${h}.0, ${f}.0);
        return sampleTexture(${r}, uv);
      }
    `;const v=wu(r);return e?`
    float ${i}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${g}
      ${y}
      ${x}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${v});
      return sampleTexture(${r}, uv);
    }
  `:`
    float ${i}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${o} + col * ${a} +
          depth * ${s} + depth2;
      vec2 uv = uvFromFlat(${f}, ${h}, index + ${v});
      return sampleTexture(${r}, uv);
    }
  `}function uDe(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=e[4],s=e[3]*i,a=e[2]*s,o=e[1]*a,{newShape:l,keptDims:c}=Co(e);if(l.length<e.length){const y=Yf(t,l),x=["row","col","depth","depth2","depth3"];return`
      ${Kf(y)}
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        return ${r}(${Qf(x,c)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${o}, ${a}, ${s}, ${i})) +
          depth3;
        ${Xf(t)}
      }
    `;const u=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,f=d[0],h=d[1];if(h===o&&u==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${a}, ${s}, ${i}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${h}.0, ${f}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(h===i&&u==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]},
               ${e[2]*e[3]}, ${e[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${h}.0, ${f}.0);
        return sampleTexture(${n}, uv);
      }
    `;const g=wu(n);return`
    float ${r}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${o} + col * ${a} + depth * ${s} +
          depth2 * ${i} + depth3 + ${g};
      vec2 uv = uvFromFlat(${f}, ${h}, index);
      return sampleTexture(${n}, uv);
    }
  `}function dDe(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:i,keptDims:s}=Co(e);if(i.length<e.length){const x=Yf(t,i),v=["row","col","depth","depth2","depth3","depth4"];return`
      ${Kf(x)}
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${r}(${Qf(v,s)});
      }
    `}const a=e[5],o=e[4]*a,l=e[3]*o,c=e[2]*l,u=e[1]*c;if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${u}, ${c}, ${l}, ${o})) +
          dot(
            vec2(depth3, depth4),
            vec2(${a}, 1)));
        ${Xf(t)}
      }
    `;const d=t.shapeInfo.flatOffset,f=t.shapeInfo.texShape,h=f[0],g=f[1];if(g===u&&d==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${c}, ${l}, ${o}, ${a})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${g}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(g===a&&d==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]*e[4]},
               ${e[2]*e[3]*e[4]},
               ${e[3]*e[4]},
               ${e[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${g}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;const y=wu(n);return`
    float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${u} + col * ${c} + depth * ${l} +
          depth2 * ${o} + depth3 * ${a} + depth4 + ${y};
      vec2 uv = uvFromFlat(${h}, ${g}, index);
      return sampleTexture(${n}, uv);
    }
  `}function Xf(t){const e=t.name,n=oe(t.shapeInfo.logicalShape);return n<2?`return ${e};`:`
    for (int i = 0; i < ${n}; i++) {
      if (i == index) {
        return ${e}[i];
      }
    }
  `}function fDe(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),i="get"+r+"AtOutCoords",s=t.shapeInfo.logicalShape.length,a=e.logicalShape.length,o=LG(t.shapeInfo.logicalShape,e.logicalShape),l=Rt(a),c=a-s;let u;const d=["x","y","z","w","u","v"];s===0?u="":a<2&&o.length>=1?u="coords = 0;":u=o.map(b=>`coords.${d[b+c]} = 0;`).join(`
`);let f="";a<2&&s>0?f="coords":f=t.shapeInfo.logicalShape.map((b,S)=>`coords.${d[S+c]}`).join(", ");let h="return outputValue;";const y=oe(t.shapeInfo.logicalShape)===1,v=oe(e.logicalShape)===1;if(s===1&&!y&&!v)h=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(y&&!v)a===1?h=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:h=`
        return vec4(outputValue.x);
      `;else if(o.length){const b=s-2,S=s-1;o.indexOf(b)>-1&&o.indexOf(S)>-1?h="return vec4(outputValue.x);":o.indexOf(b)>-1?h="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":o.indexOf(S)>-1&&(h="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${i}() {
      ${l} coords = getOutputCoords();
      ${u}
      vec4 outputValue = get${r}(${f});
      ${h}
    }
  `}function pDe(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),i="get"+r+"AtOutCoords",s=e.texShape,a=t.shapeInfo.texShape,o=t.shapeInfo.logicalShape.length,l=e.logicalShape.length;if(!t.shapeInfo.isUniform&&o===l&&t.shapeInfo.flatOffset==null&&$t(a,s))return`
      float ${i}() {
        return sampleTexture(${n}, resultUV);
      }
    `;const c=Rt(l),u=LG(t.shapeInfo.logicalShape,e.logicalShape),d=l-o;let f;const h=["x","y","z","w","u","v"];o===0?f="":l<2&&u.length>=1?f="coords = 0;":f=u.map(y=>`coords.${h[y+d]} = 0;`).join(`
`);let g="";return l<2&&o>0?g="coords":g=t.shapeInfo.logicalShape.map((y,x)=>`coords.${h[x+d]}`).join(", "),`
    float ${i}() {
      ${c} coords = getOutputCoords();
      ${f}
      return get${r}(${g});
    }
  `}function Rt(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)}function DR(t,e,n){const{newShape:r,keptDims:i}=Co(e),s=e.length,a=t&&s===3&&e[0]===1,o=a?e.slice(1):r,l=!t&&s>1&&!$t(e,n)&&r.length<s||a;return{useSqueezeShape:l,uniformShape:l?o:e,keptDims:i}}function Yf(t,e){const n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function Qf(t,e){return e.map(n=>t[n]).join(", ")}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hDe(t,e,n,r){const i=n.map((u,d)=>{const f={logicalShape:u.shape,texShape:u.isUniform?null:u.texData.texShape,isUniform:u.isUniform,isPacked:u.isUniform?!1:u.texData.isPacked,flatOffset:null};return u.texData!=null&&u.texData.slice!=null&&u.texData.slice.flatOffset>0&&(f.flatOffset=u.texData.slice.flatOffset),{name:e.variableNames[d],shapeInfo:f}}),s=i.map(u=>u.shapeInfo),a={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},o=O3e(i,a,e),l=o3e(t.gl,o),c=t.createProgram(l);return re().get("ENGINE_COMPILE_ONLY")?{program:e,fragmentShader:l,source:o,webGLProgram:c,inShapeInfos:s,outShapeInfo:a,uniformLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,inShapesLocations:null,inTexShapesLocations:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:Object.assign({program:e,fragmentShader:l,source:o,webGLProgram:c,inShapeInfos:s,outShapeInfo:a},zG(t,e,c))}function zG(t,e,n){const r={},i={},s={},a=[];let o,l,c,u=null,d=null;d=t.getUniformLocation(n,"NAN",!1),re().getNumber("WEBGL_VERSION")===1&&(u=t.getUniformLocation(n,"INFINITY",!1));const f=!1;for(let h=0;h<e.variableNames.length;h++){const g=e.variableNames[h];r[g]=t.getUniformLocation(n,g,f),r[`offset${g}`]=t.getUniformLocation(n,`offset${g}`,f),e.enableShapeUniforms&&(i[`${g}Shape`]=t.getUniformLocation(n,`${g}Shape`,f),s[`${g}TexShape`]=t.getUniformLocation(n,`${g}TexShape`,f))}return e.enableShapeUniforms&&(o=t.getUniformLocation(n,"outShape",f),c=t.getUniformLocation(n,"outShapeStrides",f),l=t.getUniformLocation(n,"outTexShape",f)),e.customUniforms&&e.customUniforms.forEach((h,g)=>{a[g]=t.getUniformLocation(n,h.name,f)}),{uniformLocations:r,customUniformLocations:a,infLoc:u,nanLoc:d,inShapesLocations:i,inTexShapesLocations:s,outShapeLocation:o,outShapeStridesLocation:c,outTexShapeLocation:l}}function B4(t,e){if(t.length!==e.length)throw Error(`Binary was compiled with ${t.length} inputs, but was executed with ${e.length} inputs`);t.forEach((n,r)=>{const i=n.logicalShape,s=e[r],a=s.shape;if(!$t(i,a))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${i} and ${a} must match`);if(n.isUniform&&s.isUniform)return;const o=n.texShape,l=s.isUniform?null:s.texData.texShape;if(!$t(o,l))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${o} and ${l} must match`)})}function mDe(t,e,n,r,i){e.program.enableShapeUniforms||(B4(e.inShapeInfos,n),B4([e.outShapeInfo],[r]));const s=r.texData.texture,a=r.texData.texShape;r.texData.isPacked?t.setOutputPackedMatrixTexture(s.texture,a[0],a[1]):t.setOutputMatrixTexture(s.texture,a[0],a[1]),t.setProgram(e.webGLProgram),re().getNumber("WEBGL_VERSION")===1&&e.infLoc!==null&&t.gl.uniform1f(e.infLoc,1/0),e.nanLoc!==null&&t.gl.uniform1f(e.nanLoc,NaN),n.forEach((l,c)=>{const u=e.program.variableNames[c],d=e.uniformLocations[u],f=e.uniformLocations[`offset${u}`],h=e.inShapesLocations[`${u}Shape`],g=e.inTexShapesLocations[`${u}TexShape`];if(h){const{uniformShape:y}=DR(e.program.packedInputs,l.shape,l.texData.texShape);switch(y.length){case 1:t.gl.uniform1iv(h,new Int32Array(y));break;case 2:t.gl.uniform2iv(h,new Int32Array(y));break;case 3:t.gl.uniform3iv(h,new Int32Array(y));break;case 4:t.gl.uniform4iv(h,new Int32Array(y));break}}if(g&&t.gl.uniform2i(g,l.texData.texShape[0],l.texData.texShape[1]),d!=null){if(l.isUniform){if(oe(l.shape)<2)t.gl.uniform1f(d,l.uniformValues[0]);else{let y=l.uniformValues;y instanceof Float32Array||(y=new Float32Array(y)),t.gl.uniform1fv(d,y)}return}l.texData.slice!=null&&f!=null&&t.gl.uniform1i(f,l.texData.slice.flatOffset),t.setInputMatrixTexture(l.texData.texture.texture,d,c)}});const o=e.outShapeLocation;if(o)switch(r.shape.length){case 1:t.gl.uniform1iv(o,new Int32Array(r.shape));break;case 2:t.gl.uniform2iv(o,new Int32Array(r.shape));break;case 3:t.gl.uniform3iv(o,new Int32Array(r.shape));break;case 4:t.gl.uniform4iv(o,new Int32Array(r.shape));break}if(e.outShapeStridesLocation){const l=Me(r.shape);switch(r.shape.length){case 2:t.gl.uniform1iv(e.outShapeStridesLocation,new Int32Array(l));break;case 3:t.gl.uniform2iv(e.outShapeStridesLocation,new Int32Array(l));break;case 4:t.gl.uniform3iv(e.outShapeStridesLocation,new Int32Array(l));break}}e.outTexShapeLocation&&t.gl.uniform2i(e.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),e.program.customUniforms&&i&&e.program.customUniforms.forEach((l,c)=>{const u=e.customUniformLocations[c],d=i[c];if(l.type==="float")t.gl.uniform1fv(u,d);else if(l.type==="vec2")t.gl.uniform2fv(u,d);else if(l.type==="vec3")t.gl.uniform3fv(u,d);else if(l.type==="vec4")t.gl.uniform4fv(u,d);else if(l.type==="int")t.gl.uniform1iv(u,d);else if(l.type==="ivec2")t.gl.uniform2iv(u,d);else if(l.type==="ivec3")t.gl.uniform3iv(u,d);else if(l.type==="ivec4")t.gl.uniform4iv(u,d);else throw Error(`uniform type ${l.type} is not supported yet.`)}),t.executeProgram()}function gDe(t,e,n){let r="";e.concat(n).forEach(a=>{const o=a.texData!=null&&a.texData.slice!=null&&a.texData.slice.flatOffset>0;if(t.enableShapeUniforms&&!a.isUniform){const l=a.texData.texShape,{useSqueezeShape:c,uniformShape:u,keptDims:d}=DR(t.packedInputs,a.shape,l);let f="",h="",g="";if(u.length===1&&t.packedInputs){const $=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)];f=`${$[0]>1}_${$[1]>1}`}else if(u.length===2&&!t.packedInputs)h=`${u[0]>1}_${u[1]>1}`;else if(u.length>2&&!t.packedInputs){const $=Me(u);g=`${$[0]===l[1]}_${$[$.length-1]===l[1]}`}const y=a.shape.length,x=u.length===2&&$t(a.shape,l),v=oe(a.shape)===1,b=Kc(a.shape,n.shape),S=!t.packedInputs&&y===n.shape.length&&$t(l,n.texData.texShape),k=t.packedInputs||u.length>2?"":`${l[0]>1}_${l[1]>1}`;r+=`${y}_${S}_${c?d:""}_${u.length}_${v}_${b}_${x}_${f}_${h}_${g}_${k}_${o}`}else{const l=a.isUniform?"uniform":a.texData.texShape;r+=`${a.shape}_${l}_${o}`}});const i=t.userCode;let s=t.constructor.name;return s+="_"+r+"_"+i+`${re().getNumber("WEBGL_VERSION")}`,s}function Nr(t){return re().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&t<=4}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yDe{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=pm.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=Ir();this.outputShape=e,this.enableShapeUniforms=Nr(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?x2(["r","c","d"],e):bu(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vDe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=pm.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=Ir();this.outputShape=e,this.enableShapeUniforms=Nr(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?x2(["r","c","d"],e):bu(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xDe{constructor(e){this.variableNames=["A"],this.outTexUsage=Ci.DOWNLOAD;const n=Ir();this.outputShape=e,this.userCode=`
      ${FG}

      void main() {
        float x = getAAtOutCoords();
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bDe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Ci.DOWNLOAD;const n=Ir();this.outputShape=e,this.userCode=`
      ${FG}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wDe{constructor(e,n=!1){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=Ir();this.outputShape=e,this.enableShapeUniforms=Nr(this.outputShape.length);let i="result";n&&(i="floor(result * 255. + 0.5)"),this.userCode=`
      ${this.enableShapeUniforms?PR():AR(e)}

      void main() {
        ivec3 coords = getOutputCoords();

        int flatIndex = getFlatIndex(coords);
        int offset = imod(flatIndex, 4);

        flatIndex = idiv(flatIndex, 4, 1.);

        int r = flatIndex / texShape[1];
        int c = imod(flatIndex, texShape[1]);
        vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
        vec4 values = ${r.texture2D}(A, uv);

        float result;

        if(offset == 0) {
          result = values[0];
        } else if(offset == 1) {
          result = values[1];
        } else if(offset == 2) {
          result = values[2];
        } else {
          result = values[3];
        }

        ${r.output} = vec4(${i}, 0., 0., 0.);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SDe{constructor(e,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=Ir();this.outputShape=e,this.enableShapeUniforms=Nr(this.outputShape.length);let i="",s="result";n&&(s="floor(result * 255. + 0.5)");for(let a=0;a<=1;a++)for(let o=0;o<=1;o++){const l=a*2+o;i+=`
          localCoords = coords;
          if(localCoords[2] + ${o} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {
          localCoords[2] += ${o};
          if (localCoords[1] + ${a} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {
            localCoords[1] += ${a};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${r.texture2D}(A, uv);

            if (offset == 0) {
              result[${l}] = values[0];
            } else if (offset == 1) {
              result[${l}] = values[1];
            } else if (offset == 2) {
              result[${l}] = values[2];
            } else {
              result[${l}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?PR():AR(e)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${i}

          ${r.output} = ${s};
        }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kDe(t){const e=Ir(),n=`${e.version}
    precision highp float;
    ${e.attribute} vec3 clipSpacePos;
    ${e.attribute} vec2 uv;
    ${e.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return a3e(t,n)}function CDe(t){const e=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return d3e(t,e)}function $De(t){const e=new Uint16Array([0,1,2,2,1,3]);return f3e(t,e)}function ny(t,e,n,r,i,s){h3e(e,n);const a=p3e(t),o=t.TEXTURE_2D;return Ae(t,()=>t.bindTexture(o,a)),Ae(t,()=>t.texParameteri(o,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)),Ae(t,()=>t.texParameteri(o,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),Ae(t,()=>t.texParameteri(o,t.TEXTURE_MIN_FILTER,t.NEAREST)),Ae(t,()=>t.texParameteri(o,t.TEXTURE_MAG_FILTER,t.NEAREST)),re().getNumber("WEBGL_VERSION")===1?Ae(t,()=>t.texImage2D(o,0,r,e,n,0,i,s,null)):Ae(t,()=>t.texStorage2D(o,1,r,e,n)),Ae(t,()=>t.bindTexture(t.TEXTURE_2D,null)),{texture:a,texShape:[n,e]}}function jG(t){return t.internalFormatFloat}function EDe(t,e,n,r){const[i,s]=ey(e,n);return ny(t,i,s,jG(r),r.textureFormatFloat,t.FLOAT)}function VG(t){return t.internalFormatHalfFloat}function TDe(t,e,n,r){const[i,s]=ey(e,n);return ny(t,i,s,VG(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function WG(t){return t.downloadTextureFormat}function _De(t,e,n,r){const[i,s]=ey(e,n);return ny(t,i,s,WG(r),t.RGBA,t.UNSIGNED_BYTE)}function UG(t){return t.internalFormatPackedFloat}function IDe(t,e,n,r){const[i,s]=qf(e,n);return ny(t,i,s,UG(r),t.RGBA,t.FLOAT)}function GG(t){return t.internalFormatPackedHalfFloat}function NDe(t,e,n,r){const[i,s]=qf(e,n);return ny(t,i,s,GG(r),t.RGBA,r.textureTypeHalfFloat)}function RDe(t,e,n){return Ae(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),F4(t,e,"clipSpacePos",n,3,20,0)&&F4(t,e,"uv",n,2,20,12)}function ODe(t,e,n,r,i,s){Ae(t,()=>t.bindTexture(t.TEXTURE_2D,e));let a,o,l;i instanceof Uint8Array?(a=new Uint8Array(n*r*4),o=t.UNSIGNED_BYTE,l=t.RGBA):(a=new Float32Array(n*r*4),o=t.FLOAT,l=s.internalFormatPackedFloat),a.set(i),re().getNumber("WEBGL_VERSION")===2?Ae(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n,r,t.RGBA,o,a)):Ae(t,()=>t.texImage2D(t.TEXTURE_2D,0,l,n,r,0,t.RGBA,o,a)),Ae(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function ADe(t,e,n){Ae(t,()=>t.bindTexture(t.TEXTURE_2D,e)),n.data instanceof Uint8Array?re().getNumber("WEBGL_VERSION")===2?Ae(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n.width,n.height,t.RGBA,t.UNSIGNED_BYTE,n.data)):Ae(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n.width,n.height,0,t.RGBA,t.UNSIGNED_BYTE,n.data)):re().getNumber("WEBGL_VERSION")===2?Ae(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,n)):Ae(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)),Ae(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function PDe(t,e,n,r){const i=t.createBuffer();Ae(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,i));const o=4*4*e*n;return Ae(t,()=>t.bufferData(t.PIXEL_PACK_BUFFER,o,t.STREAM_READ)),Ae(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,0)),Ae(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,null)),i}function DDe(t,e,n){const r=t,i=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,i),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),i}function FDe(t,e,n,r){const[i,s]=ey(e,n),a=4,o=new Uint8Array(JPe(e*n,a));return Ae(t,()=>t.readPixels(0,0,i,s,r.downloadTextureFormat,t.UNSIGNED_BYTE,o)),new Float32Array(o.buffer)}function LDe(t,e,n,r,i,s,a,o){const l=t,c=new Float32Array(e3e(s,a));return l.bindBuffer(l.PIXEL_PACK_BUFFER,e),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,c),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),c}function MDe(t,e,n){const r=new Float32Array(e*n*4);return Ae(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,r)),r}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mC{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];const n=re().getNumber("WEBGL_VERSION");e!=null?(this.gl=e,YPe(n,e)):this.gl=Vs(n);let r="WEBGL_color_buffer_float";const i="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),re().getNumber("WEBGL_VERSION")===1){const s="OES_texture_float",a="OES_texture_half_float";if(this.textureFloatExtension=Wv(this.gl,s),as(this.gl,a))this.textureHalfFloatExtension=Wv(this.gl,a);else if(re().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),as(this.gl,i))this.colorBufferHalfFloatExtension=Wv(this.gl,i);else if(re().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",as(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else if(as(this.gl,i))this.colorBufferHalfFloatExtension=this.gl.getExtension(i);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=CDe(this.gl),this.indexBuffer=$De(this.gl),this.framebuffer=m3e(this.gl),this.textureConfig=OR(this.gl,this.textureHalfFloatExtension)}get debug(){return re().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;Ae(e,()=>e.finish()),Ae(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),Ae(e,()=>e.deleteFramebuffer(this.framebuffer)),Ae(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),Ae(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),Ae(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,n){return this.throwIfDisposed(),EDe(this.gl,e,n,this.textureConfig)}createFloat16MatrixTexture(e,n){return this.throwIfDisposed(),TDe(this.gl,e,n,this.textureConfig)}createUnsignedBytesMatrixTexture(e,n){return this.throwIfDisposed(),_De(this.gl,e,n,this.textureConfig)}uploadPixelDataToTexture(e,n){this.throwIfDisposed(),ADe(this.gl,e,n)}uploadDenseMatrixToTexture(e,n,r,i){this.throwIfDisposed(),ODe(this.gl,e,n,r,i,this.textureConfig)}createFloat16PackedMatrixTexture(e,n){return this.throwIfDisposed(),NDe(this.gl,e,n,this.textureConfig)}createPackedMatrixTexture(e,n){return this.throwIfDisposed(),IDe(this.gl,e,n,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(L4(this.gl,this.framebuffer),this.outputTexture=null),Ae(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,n,r){return this.downloadMatrixDriver(e,()=>FDe(this.gl,n,r,this.textureConfig))}downloadPackedMatrixFromBuffer(e,n,r,i,s,a){return LDe(this.gl,e,n,r,i,s,a,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,n){return DDe(this.gl,e,n)}createBufferFromTexture(e,n,r){this.bindTextureToFrameBuffer(e);const i=PDe(this.gl,n,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),i}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let n,r;if(re().getBool("WEBGL_FENCE_API_ENABLED")){const i=e,s=i.fenceSync(i.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),r=()=>{const a=i.clientWaitSync(s,0,0);return a===i.ALREADY_SIGNALED||a===i.CONDITION_SATISFIED},n=s}else re().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),r=()=>this.isQueryAvailable(n,re().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):r=()=>!0;return{query:n,isFencePassed:r}}downloadMatrixFromPackedTexture(e,n,r){return this.downloadMatrixDriver(e,()=>MDe(this.gl,n,r))}createProgram(e){this.throwIfDisposed();const n=this.gl;this.vertexShader==null&&(this.vertexShader=kDe(n));const r=c3e(n);return Ae(n,()=>n.attachShader(r,this.vertexShader)),Ae(n,()=>n.attachShader(r,e)),u3e(n,r),this.debug&&uC(n,r),this.vertexAttrsAreBound||(this.setProgram(r),this.vertexAttrsAreBound=RDe(n,this.program,this.vertexBuffer)),r}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&Ae(this.gl,()=>this.gl.deleteProgram(e))}setProgram(e){this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&uC(this.gl,this.program),Ae(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,n,r=!0){return this.throwIfDisposed(),r?y3e(this.gl,e,n):v3e(this.gl,e,n)}getAttributeLocation(e,n){return this.throwIfDisposed(),Ae(this.gl,()=>this.gl.getAttribLocation(e,n))}getUniformLocationNoThrow(e,n){return this.throwIfDisposed(),this.gl.getUniformLocation(e,n)}setInputMatrixTexture(e,n,r){this.throwIfDisposed(),this.throwIfNoProgram(),x3e(this.gl,e,n,r)}setOutputMatrixTexture(e,n,r){this.setOutputMatrixTextureDriver(e,r,n)}setOutputPackedMatrixTexture(e,n,r){this.throwIfDisposed();const[i,s]=qf(n,r);this.setOutputMatrixTextureDriver(e,i,s)}setOutputMatrixWriteRegion(e,n,r,i){this.setOutputMatrixWriteRegionDriver(r,e,i,n)}setOutputPackedMatrixWriteRegion(e,n,r,i){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&uC(this.gl,this.program),Uv(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;this.debug&&this.debugValidate(),Ae(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),Ae(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=Wv(this.gl,re().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(re().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const r=this.gl,i=this.getQueryTimerExtensionWebGL2(),s=r.createQuery();return r.beginQuery(i.TIME_ELAPSED_EXT,s),s}const e=this.getQueryTimerExtensionWebGL1(),n=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,n),n}endQuery(){if(re().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const n=this.gl,r=this.getQueryTimerExtensionWebGL2();n.endQuery(r.TIME_ELAPSED_EXT);return}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await dE(()=>this.disposed||this.isQueryAvailable(e,re().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,re().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,n){if(n===0)return null;if(n===2){const r=this.gl;return r.getQueryParameter(e,r.QUERY_RESULT)/1e6}else{const r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,n){if(n===0)return!0;if(n===2){const r=this.gl,i=this.getQueryTimerExtensionWebGL2(),s=r.getQueryParameter(e,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),s&&!this.disjoint}else{const r=this.getQueryTimerExtensionWebGL1(),i=r.getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),i&&!this.disjoint}}pollFence(e){return new Promise(n=>{this.addItemToPoll(()=>e.isFencePassed(),()=>n())})}pollItems(){const e=BDe(this.itemsToPoll.map(n=>n.isDoneFn));for(let n=0;n<=e;++n){const{resolveFn:r}=this.itemsToPoll[n];r()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,n){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:n}),this.itemsToPoll.length>1)return;let r;"setTimeoutCustom"in re().platform&&(r=re().platform.setTimeoutCustom.bind(re().platform)),dE(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,r)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),dC(this.gl,e,this.framebuffer),this.debug&&Uv(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(dC(this.gl,this.outputTexture,this.framebuffer),this.debug&&Uv(this.gl)):L4(this.gl,this.framebuffer)}downloadMatrixDriver(e,n){this.bindTextureToFrameBuffer(e);const r=n();return this.unbindTextureToFrameBuffer(),r}setOutputMatrixTextureDriver(e,n,r){this.throwIfDisposed();const i=this.gl;dC(i,e,this.framebuffer),this.debug&&Uv(i),this.outputTexture=e,Ae(i,()=>i.viewport(0,0,n,r)),Ae(i,()=>i.scissor(0,0,n,r))}setOutputMatrixWriteRegionDriver(e,n,r,i){this.throwIfDisposed(),Ae(this.gl,()=>this.gl.scissor(e,n,r,i))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function BDe(t){let e=0;for(;e<t.length&&t[e]();++e);return e-1}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Re(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&F(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the CPU backend.`)})}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HG(t){const e=new Float32Array(t.length);for(let n=0;n<t.length;++n)e[n]=Math.abs(t[n]);return e}const zDe=t=>{const{x:e}=t.inputs,n=t.backend;Re(e,"abs");let r=new Float32Array(oe(e.shape));const i=n.data.get(e.dataId).values;return r=HG(i),n.makeOutput(r,e.shape,e.dtype)},jDe={kernelName:lb,backendName:"cpu",kernelFunc:zDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vn(t){return(e,n,r,i,s)=>{const a=rt(e,n),o=a.length,l=Me(a),c=oe(a),u=Tn(s,c),d=e.length,f=n.length,h=Me(e),g=Me(n),y=Kc(e,a),x=Kc(n,a);if(y.length+x.length===0)for(let v=0;v<u.length;++v)u[v]=t(r[v%r.length],i[v%i.length]);else for(let v=0;v<u.length;++v){const b=yu(v,o,l),S=b.slice(-d);y.forEach(_=>S[_]=0);const k=Bs(S,d,h),$=b.slice(-f);x.forEach(_=>$[_]=0);const T=Bs($,f,g);u[v]=t(r[k],i[T])}return[u,a]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ti(t){const{inputs:e,backend:n}=t,{real:r,imag:i}=e,s=n.data.get(r.dataId).values,a=n.data.get(i.dataId).values,o=n.makeTensorInfo(r.shape,"complex64"),l=n.data.get(o.dataId);return l.complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",s),imag:n.makeTensorInfo(i.shape,"float32",a)},o}const VDe={kernelName:bb,backendName:"cpu",kernelFunc:ti};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F1(t,e,n="float32"){if(n==="complex64"){const i=F1(t,e,"float32"),s=F1(t,e,"float32");return ti({inputs:{real:i,imag:s},backend:t})}const r=Gn(oe(e),n);return t.makeTensorInfo(e,n,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $a(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const WDe={kernelName:ig,backendName:"cpu",kernelFunc:$a};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zc(t){const{inputs:e,backend:n}=t,{input:r}=e,i=n.data.get(r.dataId).complexTensorInfos.real,s=n.data.get(i.dataId).values;return n.makeTensorInfo(i.shape,i.dtype,s)}const UDe={kernelName:vw,backendName:"cpu",kernelFunc:Zc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qG(t,e,n,r){if(r==="int32"){const i=Int32Array.from(t);return[e,"int32",i]}if(r==="bool"){const i=Ll([0],n),[s,a]=vn((o,l)=>o!==l?1:0)(e,[],t,i,"bool");return[a,"bool",s]}throw new Error(`Error in Cast: failed to cast ${n} to ${r}`)}function El(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{dtype:s}=r;if(s==="complex64"){if(i.dtype==="complex64")return $a({inputs:{x:i},backend:n});const u=F1(n,i.shape,i.dtype),d=El({inputs:{x:i},backend:n,attrs:{dtype:"float32"}}),f=ti({inputs:{real:d,imag:u},backend:n});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),f}if(i.dtype==="complex64"){const u=Zc({inputs:{input:i},backend:n}),d=El({inputs:{x:u},backend:n,attrs:{dtype:s}});return n.disposeIntermediateTensorInfo(u),d}if(!DI(i.dtype,s)){const u=$a({inputs:{x:i},backend:n});return{dataId:u.dataId,shape:u.shape,dtype:s}}const a=n.data.get(i.dataId).values,[o,l,c]=qG(a,i.shape,i.dtype,s);return n.makeTensorInfo(o,l,c)}const GDe={kernelName:Wm,backendName:"cpu",kernelFunc:El};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ln(t,e,n,r){return n==null?({inputs:i,backend:s})=>{const{a,b:o}=i,l=s;Re([a,o],t);const c=l.data.get(a.dataId).values,u=l.data.get(o.dataId).values,d=a.dtype==="string"?Yc(c):c,f=a.dtype==="string"?Yc(u):u,h=r||a.dtype,[g,y]=e(a.shape,o.shape,d,f,h);return l.makeTensorInfo(y,h,g)}:({inputs:i,backend:s})=>{const{a,b:o}=i,l=s;if(a.dtype==="complex64"||o.dtype==="complex64"){const c=El({inputs:{x:a},backend:l,attrs:{dtype:"complex64"}}),u=l.data.get(c.dataId),d=u.complexTensorInfos.real,f=u.complexTensorInfos.imag,h=l.data.get(d.dataId).values,g=l.data.get(f.dataId).values,y=El({inputs:{x:o},backend:l,attrs:{dtype:"complex64"}}),x=l.data.get(y.dataId),v=x.complexTensorInfos.real,b=x.complexTensorInfos.imag,S=l.data.get(v.dataId).values,k=l.data.get(b.dataId).values,[$,T,_]=n(a.shape,o.shape,h,g,S,k),R=l.makeTensorInfo(_,"float32",$),P=l.makeTensorInfo(_,"float32",T),O=ti({inputs:{real:R,imag:P},backend:l});return l.disposeIntermediateTensorInfo(c),l.disposeIntermediateTensorInfo(y),l.disposeIntermediateTensorInfo(R),l.disposeIntermediateTensorInfo(P),O}else{const c=l.data.get(a.dataId).values,u=l.data.get(o.dataId).values,d=r||a.dtype,[f,h]=e(a.shape,o.shape,c,u,d);return l.makeTensorInfo(h,d,f)}}}function FR(t){return(e,n,r,i,s,a)=>{const o=rt(e,n),l=oe(o),c=o.length,u=Me(o),d=Tn("float32",l),f=Tn("float32",l),h=Kc(e,o),g=Kc(n,o),y=ho(r,i),x=ho(s,a),v=e.length,b=Me(e),S=n.length,k=Me(n);if(h.length+g.length===0)for(let $=0;$<d.length;$++){const T=$%y.length,_=$%x.length,R=t(y[T*2],y[T*2+1],x[_*2],x[_*2+1]);d[$]=R.real,f[$]=R.imag}else for(let $=0;$<d.length;$++){const T=yu($,c,u),_=T.slice(-v);h.forEach(H=>_[H]=0);const R=Bs(_,v,b),P=T.slice(-S);g.forEach(H=>P[H]=0);const O=Bs(P,S,k),B=t(y[R*2],y[R*2+1],x[O*2],x[O*2+1]);d[$]=B.real,f[$]=B.imag}return[d,f,o]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KG=vn((t,e)=>t+e),HDe=FR((t,e,n,r)=>({real:t+n,imag:e+r})),gf=Ln(Vf,KG,HDe),qDe={kernelName:Vf,backendName:"cpu",kernelFunc:gf};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LR(t,e,n,r,i){const s=oe(r),a=Gn(i,n);for(let o=0;o<t.length;o++){const l=t[o];if(l<0)throw new Error("Input x must be non-negative!");l>=i||(s>0?a[l]+=e[o]:a[l]+=1)}return a}function XG(t,e,n,r=!1){const i=t.shape[0],s=t.shape[1],a=qe([i,n],e.dtype);for(let o=0;o<i;o++)for(let l=0;l<s;l++){const c=t.get(o,l);if(c<0)throw new Error("Input x must be non-negative!");c>=n||(r?a.set(1,o,c):e.size>0?a.set(a.get(o,c)+e.get(o,l),o,c):a.set(a.get(o,c)+1,o,c))}return a}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wl(t){return(e,n,r)=>{const i=Tn(n,e.length);for(let s=0;s<e.length;++s)i[s]=t(e[s],r);return i}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vt(t,e,n){return({inputs:r,attrs:i,backend:s})=>{const{x:a}=r;if(Re(a,t),a.dtype==="string"||n==="string")throw new Error("unaryKernelFunc does not support string input/output");const o=s,l=o.data.get(a.dataId).values,c=oe(a.shape),u=n||a.dtype,d=Cn(u,c);for(let f=0;f<c;++f)d[f]=e(l[f],i);return o.makeTensorInfo(a.shape,u,d)}}function Zf(t,e,n){return({inputs:r,attrs:i,backend:s})=>{const{x:a}=r;if(Re(a,t),a.dtype==="string"||n==="string")throw new Error("unaryKernelFunc does not support string input/output");const o=s,l=o.data.get(a.dataId).values,c=n||a.dtype,u=e(l,c,i);return o.makeTensorInfo(a.shape,c,u)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YG=Wl(t=>Math.ceil(t)),KDe=Zf(Um,YG),XDe={kernelName:Um,backendName:"cpu",kernelFunc:KDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QG(t,e,n,r){const i=Cn(n,oe(e));if(r&&n!=="string"){let s=0;t.forEach(a=>{const o=oe(a.shape);i.set(a.vals,s),s+=o})}else{let s=0;t.forEach(a=>{const o=n==="string"?Yc(a.vals):a.vals;let l=0;for(let c=0;c<a.shape[0];++c){const u=c*e[1]+s;for(let d=0;d<a.shape[1];++d)i[u+d]=o[l++]}s+=a.shape[1]})}return i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZG=vn((t,e)=>t===e?1:0),JG=Ln(Qm,ZG,null,"bool"),YDe={kernelName:Qm,backendName:"cpu",kernelFunc:JG};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eH=Wl(t=>Math.exp(t)),tH=Zf(Zm,eH,"float32"),QDe={kernelName:Zm,backendName:"cpu",kernelFunc:tH};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nH=Wl(t=>Math.expm1(t)),ZDe=Zf(Jm,nH),JDe={kernelName:Jm,backendName:"cpu",kernelFunc:ZDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rH=Wl(t=>Math.floor(t)),eFe=Zf(eg,rH),tFe={kernelName:eg,backendName:"cpu",kernelFunc:eFe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iH(t,e,n,r,i,s,a,o,l){const c=qe([r,s],n);for(let u=0;u<r;u++){const d=[];let f=0;for(let h=0;h<i;h++){const g=t[u*i+h];f+=g*a[h],d.push(g)}if(f<0||f>=l/s)throw new Error(`Invalid indices: ${d} does not index into ${o}`);for(let h=0;h<s;h++)c.values[u*s+h]=e.get(...e.indexToLoc(f*s+h))}return c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sH(t,e,n){const r=qe(n,t.dtype);for(let i=0;i<r.size;++i){const a=r.indexToLoc(i).slice(),o=a[0],l=a[2],c=e.locToIndex([o,l]);a[2]=e.values[c];const u=t.locToIndex(a);0<=u&&u<t.values.length&&(r.values[i]=t.values[u])}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aH=vn((t,e)=>t>e?1:0),nFe=Ln(ng,aH,null,"bool"),rFe={kernelName:ng,backendName:"cpu",kernelFunc:nFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oH=vn((t,e)=>t>=e?1:0),iFe=Ln(rg,oH,null,"bool"),sFe={kernelName:rg,backendName:"cpu",kernelFunc:iFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lH=vn((t,e)=>t<e?1:0),aFe=Ln(lg,lH,null,"bool"),oFe={kernelName:lg,backendName:"cpu",kernelFunc:aFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cH=vn((t,e)=>t<=e?1:0),lFe=Ln(cg,cH,null,"bool"),cFe={kernelName:cg,backendName:"cpu",kernelFunc:lFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uH(t,e,n){const r=(e-t)/(n-1),i=Gn(n,"float32");i[0]=t;for(let s=1;s<i.length;s++)i[s]=i[s-1]+r;return i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dH=Wl(t=>Math.log(t)),uFe=Zf(ug,dH),dFe={kernelName:ug,backendName:"cpu",kernelFunc:uFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fH(t,e,n,r){const i=Tn(r,oe(n));for(let s=0;s<i.length;++s){const a=s*e;let o=t[a];for(let l=0;l<e;++l){const c=t[a+l];(Number.isNaN(c)||c>o)&&(o=c)}i[s]=o}return i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pH=vn((t,e)=>Math.max(t,e)),fFe=Ln(mg,pH),pFe={kernelName:mg,backendName:"cpu",kernelFunc:fFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hH=vn((t,e)=>Math.min(t,e)),hFe=Ln(gg,hH),mFe={kernelName:gg,backendName:"cpu",kernelFunc:hFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MR=vn((t,e)=>t*e),gFe=FR((t,e,n,r)=>({real:t*n-e*r,imag:t*r+e*n})),b2=Ln(vg,MR,gFe),yFe={kernelName:vg,backendName:"cpu",kernelFunc:b2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mH(t,e,n){const r=$o(-1,n);return MR([],e,r,t,n)}function vFe(t){const{inputs:e,backend:n}=t,{x:r}=e;Re(r,"neg");const i=n.data.get(r.dataId).values,[s,a]=mH(i,r.shape,r.dtype);return n.makeTensorInfo(a,r.dtype,s)}const xFe={kernelName:sw,backendName:"cpu",kernelFunc:vFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gH=vn((t,e)=>t!==e?1:0),bFe=Ln(xg,gH,null,"bool"),wFe={kernelName:xg,backendName:"cpu",kernelFunc:bFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BR(t,e,n,r,i){const s=e.length,a=oe(e),o=Me(e),l=Me(i),c=Tn(n,oe(i));for(let u=0;u<a;++u){const d=yu(u,s,o),f=new Array(d.length);for(let g=0;g<f.length;g++)f[g]=d[r[g]];const h=Bs(f,s,l);c[h]=t[u]}return c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zr(t){const{inputs:e,attrs:n,backend:r}=t,{x:i}=e,{perm:s}=n;Re(i,"transpose");const a=i.shape.length,o=new Array(a);for(let d=0;d<o.length;d++)o[d]=i.shape[s[d]];const l=r.data.get(i.dataId).values,c=BR(l,i.shape,i.dtype,s,o);return{dataId:r.write(c,o,i.dtype),shape:o,dtype:i.dtype}}const SFe={kernelName:Bd,backendName:"cpu",kernelFunc:zr};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yH(t,e,n,r){const[i,s]=Xn(t,r),a=Br(e,"int32"),o=Gn(oe(i),a),l=oe(s);for(let c=0;c<o.length;++c){const u=c*l;let d=1;for(let f=0;f<l;++f)d*=n[u+f];o[c]=d}return{outVals:o,outShape:i,outDtype:a}}function kFe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:a}=r;Re(i,"prod");const o=i.shape.length,l=ut(s,i.shape),c=fn(l,o);let u=l,d=i;const f=[];c!=null&&(d=zr({inputs:{x:i},backend:n,attrs:{perm:c}}),f.push(d),u=pn(u.length,o));const h=n.data.get(d.dataId).values,{outVals:g,outShape:y,outDtype:x}=yH(d.shape,d.dtype,h,u);let v=y;return a&&(v=_n(y,l)),f.forEach(b=>n.disposeIntermediateTensorInfo(b)),n.makeTensorInfo(v,x,g)}const CFe={kernelName:hw,backendName:"cpu",kernelFunc:kFe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Fe(t,e,n){t.forEach((r,i)=>{if(r<0||r>=n){const s=yu(i,e.length,Me(e)).join(",");throw new Error(`indices[${s}] = ${r} is not in [0, ${n})`)}})}function EFe(t,e){for(let n=0;n<t.length;++n){const r=t[n],i=n===t.length-1?e:t[n+1].length;if(r.length===0)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>i)throw new Error("Ragged splits must not point past values");for(let s=1;s<r.length;++s)if(r[s-1]>r[s])throw new Error("Ragged splits must be sorted in ascending order")}}function TFe(t,e,n,r){const i=[];let s=0;const a=e.length-1+n.length,o=new Array(a).fill(null).map(()=>[0]);EFe(n,r);let l=1;for(let c=0;c<e.length-1;++c){l*=e[c];const u=e[c+1];for(let d=1;d<l+1;++d)o[c].push(d*u)}for(let c=0;c<t.length;++c){let u=t[c],d=t[c]+1;for(let f=0;f<n.length;++f){const h=n[f],g=f+e.length-1;if(g>=0){const y=o[g],x=y[y.length-1]-h[u];for(let v=u;v<d;++v)o[g].push(h[v+1]+x)}u=h[u],d=h[d]}d!==u&&(i.push([u,d]),s+=d-u)}return{outSplits:o,valueSlices:i,numValues:s}}function _Fe(t){const e=[];for(let n=0;n<t.length;++n){const r=t[n].length,i=Cn("int32",r);e.push(i),t[n].forEach((s,a)=>i[a]=s)}return e}function z4(t,e){const n=t.slice(0,e);for(;n.length<e;)n.push(1);for(let r=e;r<t.length;r++)n[e-1]*=t[r];return n}function IFe(t,e,n,r,i,s){const a=z4(e,2)[1],o=z4(s,2)[1];let l=0;for(const c of n)for(let u=c[0];u<c[1];++u){for(let d=0;d<r;++d)i[l*o+d]=t[u*a+d];++l}}function NFe(t,e,n,r,i){const s=e.slice();s[0]=i;const a=Cn(n,oe(s)),o=t.length,l=o===0?0:o/e[0];return IFe(t,e,r,l,a,s),[a,s]}function vH(t,e,n,r,i,s,a,o){if(t.length===0)throw new Error("paramsNestedSplits must be non empty");if(e[0].length===0)throw new Error("Split tensors must not be scalars");const l=e[0][0]-1;if($Fe(s,a,l),r.length===0)throw new Error("params.rank must be nonzero");const c=r[0],{outSplits:u,valueSlices:d,numValues:f}=TFe(s,a,t,c),h=_Fe(u),g=NFe(n,r,i,d,f);return[h,g[0],g[1]]}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Hi=Rs;class L1{constructor(e,n,r,i,s,a,o,l,c,u){this.shape=e,this.shapeShape=n,this.values=r,this.valuesShape=i,this.valuesDType=s,this.defaultValue=a,this.defaultValueShape=o,this.rowPartitionValues=l,this.rowPartitionValuesShapes=c,this.rowPartitionTypes=oG(u),this.raggedRank=lG(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===Hi.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===Hi.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const n=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case Hi.VALUE_ROWIDS:return L1.getMaxWidthValueRowID(n);case Hi.ROW_SPLITS:return L1.getMaxWidthRowSplit(n);default:throw new Error(`Cannot handle partition type ${Hi[this.getRowPartitionTypeByDimension(e-1)]}`)}}static getMaxWidthRowSplit(e){const n=e.length;if(n===0||n===1)return 0;let r=0;for(let i=0;i<n-1;++i){const s=e[i+1]-e[i];s>r&&(r=s)}return r}static getMaxWidthValueRowID(e){const n=e.length;if(n===0)return 0;let r=0,i=e[0],s=0;for(let a=1;a<n;++a){const o=e[a];o!==i&&(i=o,s=Math.max(a-r,s),r=a)}return Math.max(n-r,s)}tensorShapeFromTensor(e,n,r=!0){if(n.length===0){if(e[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return V4(e,r)}calculateOutputSize(e){const n=this.valuesShape,r=this.defaultValueShape;cG(r,n);const i=this.tensorShapeFromTensor(this.shape,this.shapeShape),a=aG(this.raggedRank,i,n);a[0]<0&&(a[0]=e);for(let o=1;o<=this.raggedRank;++o)a[o]<0&&(a[o]=this.getMaxWidth(o));return a}calculateFirstParentOutputIndex(e,n,r){const i=Math.min(e,r),s=[];let a=0;for(let o=0;o<i;++o,a+=n)s.push(a);for(let o=i;o<e;++o)s.push(-1);return F(s.length===e,()=>"Final length of result must be equal to firstDimension."),s}calculateOutputIndexRowSplit(e,n,r,i){const s=e.length,a=[];for(let o=0;o<s-1;++o){const l=e[o+1]-e[o];let c=Math.min(i,l),u=n[o];u===-1&&(c=0);for(let d=0;d<c;++d)a.push(u),u+=r;for(let d=0;d<l-c;++d)a.push(-1)}if(s>0&&a.length!==e[s-1])throw new Error("Invalid row split size.");return a}calculateOutputIndexValueRowID(e,n,r,i){const s=e.length,a=[];if(s===0)return[];let o=0,l=e[0];if(l>=n.length)throw new Error(`Got currentValueRowId=${l}, which is not less than ${n.length}`);let c=n[l];a.push(c);for(let u=1;u<s;++u){const d=e[u];if(d===l)c>=0&&(++o,o<i?c+=r:c=-1);else{if(o=0,l=d,d>=n.length)throw new Error(`Got nextValueRowId=${d} which is not less than ${n.length}`);c=n[d]}a.push(c)}if(a.length!==e.length)throw new Error("Invalid row ids.");return a}calculateOutputIndex(e,n,r,i){const s=this.getRowPartitionTensor(e),a=this.getRowPartitionTypeByDimension(e);switch(a){case Hi.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(s,n,r,i);case Hi.ROW_SPLITS:if(s.length-1>n.length)throw new Error(`Row partition size is greater than output size: ${s.length-1} > ${n.length}`);return this.calculateOutputIndexRowSplit(s,n,r,i);default:throw new Error(`Unsupported partition type: ${Hi[a]}`)}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");const n=this.rowPartitionTypes[0];switch(n){case Hi.FIRST_DIM_SIZE:return e[0];case Hi.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case Hi.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${Hi[n]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const n=this.getFirstDimensionSize(),r=this.calculateOutputSize(n),i=new Array(this.raggedRank+1);i[i.length-1]=1;for(let l=i.length-2;l>=0;--l)i[l]=i[l+1]*r[l+1];const s=V4(r,!1),a=Cn(this.valuesDType,oe(s));if(i[0]*r[0]>0){let l=this.calculateFirstParentOutputIndex(n,i[0],r[0]);for(let c=1;c<=this.raggedRank;++c)l=this.calculateOutputIndex(c-1,l,i[c],r[c]);this.setOutput(this.raggedRank,l,a,s)}return[s,a]}setOutput(e,n,r,i){if(r.length===0)return;const s=this.values,a=r;let o=i.slice();o=o.slice(e+1);const l=oe(o),c=n.length;let u=this.defaultValue;if(u.length!==l&&u.length!==1){const g=this.defaultValueShape;st(()=>{const y=fe(u,g);u=Vd(y,o).dataSync()})}let d=0,f=0,h=0;for(let g=0;g<=c;++g){let y=g<c?n[g]:-1;if(y===h){++h;continue}if(f<h){const x=s.subarray(d*l),v=a.subarray(f*l),b=(h-f)*l;j4(v,x,b)}if(g>=c){const x=r.length;y=Math.floor(x/l)}if(y>h)if(this.defaultValue.length===1)a.subarray(h*l,y*l).fill(this.defaultValue[0]),h=y;else for(;y>h;){const x=a.slice(h*l);j4(x,u,l),++h}y<0?(d=g+1,f=h):(d=g,f=h,h=f+1)}}}function j4(t,e,n){for(let r=0;r<n;r++)t[r]=e[r]}function V4(t,e){const n=[];for(let r of t){if(r<0){if(!e)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}n.push(r)}return n}function xH(t,e,n,r,i,s,a,o,l,c){return new L1(t,e,n,r,i,s,a,o,l,c).compute()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bH(t,e,n,r){const i=t===e,s=t<e&&n<0,a=e<t&&n>1;if(i||s||a)return Gn(0,r);const o=Math.abs(Math.ceil((e-t)/n)),l=Gn(o,r);e<t&&n===1&&(n=-1),l[0]=t;for(let c=1;c<l.length;c++)l[c]=l[c-1]+n;return l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wH=Wl(t=>1/Math.sqrt(t)),RFe=Zf($g,wH),OFe={kernelName:$g,backendName:"cpu",kernelFunc:RFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Td(t,e,n,r,i,s,a,o,l,c){const u=[r/i,i],d=t.values,f=e.values;if(r===0)return qe(n,e.dtype);const h=qe(u,e.dtype);typeof l=="string"||typeof l=="number"?h.values.fill(l):typeof l=="boolean"&&h.values.fill(+l);for(let g=0;g<s;g++){const y=[];let x=0;for(let v=0;v<a;v++){const b=d[g*a+v];y.push(b),x+=b*o[v]}if(x<0||x>=r/i)throw new Error(`Invalid indices: ${y} does not index into ${n}`);for(let v=0;v<i;v++)c?h.values[x*i+v]+=f[g*i+v]:h.values[x*i+v]=e.rank===0?f[0]:f[g*i+v]}return h}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AFe=Wl(t=>1/(1+Math.exp(-t))),SH=vt(Ng,t=>1/(1+Math.exp(-t))),PFe={kernelName:Ng,backendName:"cpu",kernelFunc:SH};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kH(t,e,n,r,i){const s=gN(r,e,n),a=oe(n),o=Me(r);if(s){const d=yN(e,o);return i==="string"?t.slice(d,d+a):t.subarray(d,d+a)}const l=i==="string"?Yc(t):t,c=qe(r,i,l),u=qe(n,i);for(let d=0;d<u.size;++d){const f=u.indexToLoc(d),h=f.map((g,y)=>g+e[y]);u.set(c.get(...h),...f)}return i==="string"?IG(u.values):u.values}function Jc(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{begin:s,size:a}=r;Re(i,"slice");const[o,l]=vN(i,s,a);hN(i,o,l);const c=n.data.get(i.dataId).values,u=kH(c,o,l,i.shape,i.dtype);return n.makeTensorInfo(l,i.dtype,u)}const DFe={kernelName:Ew,backendName:"cpu",kernelFunc:Jc};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CH(t,e,n,r,i,s,a){const o=e[0],l=s[0],c=new Array(l),u=new Array(o),d=e[1];if(l===0){if(o!==0)throw new Error(gG(o));const x=Cn(n,0),v=Cn(i,0);return[x,[0,d],v,c,u]}let f=!0,h=0;const g=new Array(l).fill(0);for(let x=0;x<o;++x){const v=t[x*d];if(v<0)throw new Error(yG(x,v));if(v>=l)throw new Error(vG(x,v,l));++g[v],f=f&&v>=h,h=v}let y=!0;for(let x=0;x<l;++x){const v=g[x]===0;c[x]=v,y=y&&!v,g[x]=Math.max(g[x],1),x>0&&(g[x]+=g[x-1])}if(y&&f){const x=t,v=r;for(let b=0;b<o;++b)u[b]=b;return[x,[o,d],v,c,u]}else{const x=g[l-1],v=Cn(n,x*d),b=Cn(i,x),S=new Array(l).fill(0);for(let k=0;k<o;++k){const $=t[k*d],T=S[$],_=($===0?0:g[$-1])+T;S[$]++;for(let R=0;R<d;++R)v[_*d+R]=t[k*d+R];b[_]=r[k],u[k]=_}for(let k=0;k<l;++k)if(S[k]===0){const T=k===0?0:g[k-1];v[T*d+0]=k;for(let _=1;_<d;++_)v[T*d+_]=0;b[T]=a}return[v,[x,d],b,c,u]}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $H(t,e,n,r,i){const s=oe(r),a=e[0],o=i.length,l=[];let c=1,u=-1;for(let x=0;x<o;++x){const v=i[x];if(v===-1){if(u!==-1)throw new Error(xG(u,x));u=x,l.push(1)}else{if(v<0)throw new Error(bG(x,v));c*=v,l.push(v)}}if(u!==-1){if(c<=0)throw new Error(wG());const x=Math.trunc(s/c);if(c*x!==s)throw new Error(SG(r,l));l[u]=x}if(oe(l)!==s)throw new Error(kG(r,l));const f=r.length,h=[];if(f>0){h[f-1]=1;for(let x=f-2;x>=0;--x)h[x]=h[x+1]*r[x+1]}const g=[];if(o>0){g[o-1]=1;for(let x=o-2;x>=0;--x)g[x]=g[x+1]*l[x+1]}const y=Cn(n,a*o);for(let x=0;x<a;++x){let v=0;for(let b=0;b<f;++b)v+=t[x*f+b]*h[b];for(let b=0;b<o;++b)y[x*o+b]=Math.trunc(v/g[b]),v%=g[b]}return[y,[a,o],l]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zR(t,e,n,r,i,s=!1,a=0){const o=r.length,l=[e[0],t.length/e[0]],c=l[1],d=o>0?i[o-1]+1:0;if(d<0)throw new Error(RE());const f=e.slice();f[0]=d;const h=f.reduce((S,k)=>S*k,1),g=Cn(n,h);if(o===0)return d>0&&g.fill(a),[g,f];if(d<=0)throw new Error(RE());let y=0,x=1,v=0,b=i[y];for(;;){let S=0;if(x<o){if(S=i[x],b===S){++x;continue}if(b>=S)throw new Error(CG())}if(b<0||b>=d)throw new Error($G(b,d));b>v&&g.fill(a,v*c,b*c);for(let k=y;k<x;++k){const $=r[k];if($<0||$>=l[0])throw new Error(EG(k,r[k],l[0]));for(let T=0;T<c;T++)g[b*c+T]+=t[$*c+T]}if(s)for(let k=0;k<c;k++)g[b*c+k]/=x-y;if(y=x,++x,v=b+1,b=S,x>o)break}return v<d&&g.fill(a,v*c,d*c),[g,f]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FFe=Wl(t=>Math.sqrt(t)),LFe=vt(Og,t=>Math.sqrt(t)),MFe={kernelName:Og,backendName:"cpu",kernelFunc:LFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EH=vn((t,e)=>{const n=t-e;return n*n}),BFe=Ln(Ag,EH),zFe={kernelName:Ag,backendName:"cpu",kernelFunc:BFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TH(t,e,n,r){const i=qe(t,e.dtype);for(let s=0;s<i.size;s++){const a=i.indexToLoc(s),o=new Array(a.length);for(let l=0;l<o.length;l++)o[l]=a[l]*n[l]+r[l];i.set(e.get(...o),...a)}return i}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jFe{constructor(e,n,r,i,s,a){this.separator=ya(e),this.nGramWidths=n,this.leftPad=ya(r),this.rightPad=ya(i),this.padWidth=s,this.preserveShort=a}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,n){const r=this.getPadWidth(n);return Math.max(0,e+2*r-n+1)}createNGrams(e,n,r,i,s,a){for(let o=0;o<s;++o){const l=this.getPadWidth(a),c=Math.max(0,l-o),u=Math.max(0,l-(s-(o+1))),d=a-(c+u),f=n+(c>0?0:o-l);let h=0;h+=c*this.leftPad.length;for(let b=0;b<d;++b)h+=e[f+b].length;h+=u*this.rightPad.length;const g=c+u+d-1;h+=g*this.separator.length,r[i+o]=new Uint8Array(h);const y=r[i+o];let x=0;const v=b=>b.forEach(S=>y[x++]=S);for(let b=0;b<c;++b)v(this.leftPad),v(this.separator);for(let b=0;b<d-1;++b)v(e[f+b]),v(this.separator);if(d>0){v(e[f+d-1]);for(let b=0;b<u;++b)v(this.separator),v(this.rightPad)}else{for(let b=0;b<u-1;++b)v(this.rightPad),v(this.separator);v(this.rightPad)}}}compute(e,n){const r=e.length,i=n.length;if(i>0){let l=n[0];if(l!==0)throw new Error(`First split value must be 0, got ${l}`);for(let c=1;c<i;++c){let u=n[c]>=l;if(u=u&&n[c]<=r,!u)throw new Error(`Invalid split value ${n[c]}, must be in [${l}, ${r}]`);l=n[c]}if(l!==r)throw new Error(`Last split value must be data size. Expected ${r}, got ${l}`)}const s=i-1,a=Cn("int32",i);if(r===0||i===0){const l=new Array(r);for(let c=0;c<=s;++c)a[c]=0;return[l,a]}a[0]=0;for(let l=1;l<=s;++l){const c=n[l]-n[l-1];let u=0;this.nGramWidths.forEach(d=>{u+=this.getNumNGrams(c,d)}),this.preserveShort&&c>0&&u===0&&(u=1),a[l]=a[l-1]+u}const o=new Array(a[s]);for(let l=0;l<s;++l){const c=n[l];let u=a[l];if(this.nGramWidths.forEach(d=>{const f=n[l+1]-n[l],h=this.getNumNGrams(f,d);this.createNGrams(e,c,o,u,h,d),u+=h}),this.preserveShort&&u===a[l]){const d=n[l+1]-n[l];if(d===0)continue;const f=d+2*this.padWidth;this.createNGrams(e,c,o,u,1,f)}}return[o,a]}}function _H(t,e,n,r,i,s,a,o){return new jFe(n,r,i,s,a,o).compute(t,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VFe(t,e,n,r){if(!t.length)return;if(e.length===0){for(let s=0;s<t.length;++s)r.push(t.subarray(s,s+1));return}if(e.length===1){const s=e[0];let a=t.indexOf(s);for(;a!==-1;){const o=t.subarray(0,a);(!n||o.length!==0)&&r.push(o),t=t.subarray(a+1),a=t.indexOf(s)}(!n||t.length!==0)&&r.push(t);return}let i=0;for(let s=0;s<t.length+1;s++)if(s===t.length||e.indexOf(t[s])!==-1){const a=t.subarray(i,s);(!n||a.length!==0)&&r.push(a),i=s+1}}function IH(t,e,n){const r=t.length,i=[];let s=0,a=0;const o=new Array(r);for(let f=0;f<r;++f){const h=i.length;VFe(t[f],e,n,i);const g=i.length-h;o[f]=g,s+=g,a=Math.max(a,g)}const l=Cn("int32",s*2),c=new Array(s),u=[r,a];let d=0;for(let f=0;f<r;++f)for(let h=0;h<o[f];++h)l[d*2]=f,l[d*2+1]=h,c[d]=i[d],++d;return[l,c,u]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NH(t,e){const n=Cn("int32",t.length);for(let r=0;r<t.length;++r)n[r]=lW(t[r]).modulo(e).getLowBitsUnsigned();return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RH=vn((t,e)=>t-e),WFe=FR((t,e,n,r)=>({real:t-n,imag:e-r})),jR=Ln(Pg,RH,WFe),UFe={kernelName:Pg,backendName:"cpu",kernelFunc:jR};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OH(t,e){const n=new Array(t.rank);for(let i=0;i<n.length;i++)n[i]=t.shape[i]*e[i];const r=qe(n,t.dtype);for(let i=0;i<r.values.length;++i){const s=r.indexToLoc(i),a=new Array(t.rank);for(let l=0;l<a.length;l++)a[l]=s[l]%t.shape[l];const o=t.locToIndex(a);r.values[i]=t.values[o]}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sh=(t,e)=>{const n=e.value-t.value;return n===0?t.index-e.index:n};function AH(t,e,n=0,r=t.length-1){for(;r>n;){if(r-n>600){const o=r-n+1,l=e-n+1,c=Math.log(o),u=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*u*(o-u)/o)*Math.sign(l-o/2),f=Math.max(n,Math.floor(e-l*u/o+d)),h=Math.min(r,Math.floor(e+(o-l)*u/o+d));AH(t,e,f,h)}const i=t[e];let s=n,a=r;for(qa(t,n,e),sh(t[r],i)>0&&qa(t,n,r);s<a;){for(qa(t,s,a),s++,a--;sh(t[s],i)<0;)s=s+1;for(;sh(t[a],i)>0;)a=a-1}sh(t[n],i)===0?qa(t,n,a):(a=a+1,qa(t,a,r)),a<=e&&(n=a+1),e<=a&&(r=a-1)}}function PH(t,e,n,r,i){const s=e[e.length-1],[a,o]=[t.length/s,s],l=Tn(n,a*r),c=Tn("int32",a*r);for(let d=0;d<a;d++){const f=d*o,h=t.subarray(f,f+o);let g=new Array(h.length);h.forEach((b,S)=>g[S]={value:b,index:S}),r<g.length&&(AH(g,r),g=g.slice(0,r)),i&&g.sort(sh);const y=d*r,x=l.subarray(y,y+r),v=c.subarray(y,y+r);for(let b=0;b<r;b++)x[b]=g[b].value,v[b]=g[b].index}const u=e.slice();return u[u.length-1]=r,[qe(u,n,l),qe(u,"int32",c)]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DH(t,e,n,r){const i=ut(e,n)[0],s=[1,n[0],1];for(let g=0;g<i;g++)s[0]*=n[g];s[1]=n[i];for(let g=i+1;g<n.length;g++)s[2]*=n[g];const a={},o=new Int32Array(n[i]),l=new En(s,r,t),c=[],u=s[0]===1&&s[2]===1;for(let g=0;g<n[i];g++){let y;if(u)y=t[g].toString();else{const x=[];for(let v=0;v<s[0];v++)for(let b=0;b<s[2];b++)x.push(l.get(v,g,b));y=x.join(",")}if(a[y]!==void 0)o[g]=a[y];else{const x=Object.keys(a).length;a[y]=x,o[g]=x,c.push(g)}}const d=s.slice();d[1]=Object.keys(a).length;const f=new En(d,r);c.forEach((g,y)=>{for(let x=0;x<s[0];x++)for(let v=0;v<s[2];v++)f.set(l.get(x,g,v),x,y,v)});const h=n.slice();return h[i]=d[1],{outputValues:f.values,outputShape:h,indices:o}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GFe=Object.freeze(Object.defineProperty({__proto__:null,addImpl:KG,bincountImpl:LR,bincountReduceImpl:XG,castImpl:qG,ceilImpl:YG,concatImpl:QG,equalImpl:ZG,expImpl:eH,expm1Impl:nH,floorImpl:rH,gatherNdImpl:iH,gatherV2Impl:sH,greaterEqualImpl:oH,greaterImpl:aH,lessEqualImpl:cH,lessImpl:lH,linSpaceImpl:uH,logImpl:dH,maxImpl:fH,maximumImpl:pH,minimumImpl:hH,multiplyImpl:MR,negImpl:mH,notEqualImpl:gH,prodImpl:yH,raggedGatherImpl:vH,raggedTensorToTensorImpl:xH,rangeImpl:bH,rsqrtImpl:wH,scatterImpl:Td,sigmoidImpl:AFe,simpleAbsImpl:HG,sliceImpl:kH,sparseFillEmptyRowsImpl:CH,sparseReshapeImpl:$H,sparseSegmentReductionImpl:zR,sqrtImpl:FFe,squaredDifferenceImpl:EH,stridedSliceImpl:TH,stringNGramsImpl:_H,stringSplitImpl:IH,stringToHashBucketFastImpl:NH,subImpl:RH,tileImpl:OH,topKImpl:PH,transposeImpl:BR,uniqueImpl:DH},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{addImpl:HFe,bincountImpl:FH,bincountReduceImpl:qFe,castImpl:KFe,ceilImpl:XFe,concatImpl:YFe,equalImpl:QFe,expImpl:ZFe,expm1Impl:JFe,floorImpl:e4e,gatherNdImpl:t4e,gatherV2Impl:n4e,greaterImpl:r4e,greaterEqualImpl:i4e,lessImpl:s4e,lessEqualImpl:a4e,linSpaceImpl:o4e,logImpl:l4e,maxImpl:c4e,maximumImpl:u4e,minimumImpl:d4e,multiplyImpl:f4e,negImpl:p4e,notEqualImpl:h4e,prodImpl:m4e,raggedGatherImpl:g4e,raggedTensorToTensorImpl:y4e,rangeImpl:v4e,rsqrtImpl:x4e,scatterImpl:b4e,sigmoidImpl:w4e,simpleAbsImpl:LH,sliceImpl:S4e,sparseFillEmptyRowsImpl:k4e,sparseReshapeImpl:C4e,sparseSegmentReductionImpl:MH,sqrtImpl:$4e,stridedSliceImpl:E4e,stringNGramsImpl:T4e,stringSplitImpl:_4e,stringToHashBucketFastImpl:I4e,subImpl:N4e,tileImpl:R4e,topKImpl:O4e,transposeImpl:VR,uniqueImpl:A4e}=GFe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BH(t,e){return["x","y","z","w","u","v"].slice(0,e).map(n=>`${t}.${n}`)}function Er(t,e){return e===1?[t]:BH(t,e)}function P4e(t,e){if(t===1)return"rc";let n="";for(let r=0;r<t;r++)n+=e[r],r<t-1&&(n+=",");return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class D4e{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=Nr(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const n=Er("rc",this.rank),r=Rt(this.rank),i=this.getOutOfBoundsCondition(n),s=this.getSetup(n),a=this.getOutput(n);this.userCode=`
        void main() {
          ${r} rc = getOutputCoords();

          if(${i}) {
            setOutput(vec4(0));
          } else {
            ${s}

            setOutput(vec4(${a}));
          }
        }
      `}}getSourceCoordsArr(e){const n=[];for(let r=0;r<=1;r++)for(let i=0;i<=1;i++){let s=`${r===0?"r":"rp1"}, ${i===0?"c":"cp1"}`;for(let a=2;a<this.rank;a++)s=`${e[e.length-1-a]},`+s;n.push(s)}return n}getOutOfBoundsCondition(e){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let n="";for(let r=this.rank-2;r<this.rank;r++)n+=`${e[r]} >= ${this.enableShapeUniforms?`outShape[${r}]`:this.outputShape[r]}`,r<this.rank-1&&(n+="||");return n}getSetup(e){if(this.rank===1)return"";const n=e.slice(-2),r=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],i=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${n[0]};
      int c = ${n[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${r};
      bool rEdge = rp1 >= ${i};
    `}getOutput(e){const n=this.getSourceCoordsArr(e);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${n[0]}),
            cEdge ? 0. : getA(${n[1]}),
            rEdge ? 0. : getA(${n[2]}),
            rEdge || cEdge ? 0. : getA(${n[3]})`}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zH{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=Nr(this.outputShape.length);let r="";for(let i=0;i<4;i++){let s="thisRC = rc;";i%2===1&&(s+="thisRC.z += 1;"),i>1&&(s+="thisRC.y += 1;"),r+=`
        ${s}
        ${i>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${i}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${i>0?"}":""}
      `}this.userCode=`
      ${F4e(n,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?PR():AR(e)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};

        ${r}

        setOutput(result);
      }
    `}}function F4e(t,e){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${e?R3e(["r","c","d"],"inputShape"):bu(["r","c","d"],t)}
      return ivec3(r, c, d);
    }
  `}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class L4e{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}acquireTexture(e,n,r){const i=U4(n,r),s=G4(e,i,r);s in this.freeTextures||(this.freeTextures[s]=[]),s in this.usedTextures||(this.usedTextures[s]=[]);const a=W4(e,i,this.gpgpu.gl,this.gpgpu.textureConfig,r);if(this.freeTextures[s].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=a,this.log();const l=this.freeTextures[s].shift();return this.usedTextures[s].push(l),l}let o;return i===Wn.PACKED_2X2_FLOAT32?o=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):i===Wn.PACKED_2X2_FLOAT16?o=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):i===Wn.UNPACKED_FLOAT32?o=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):i===Wn.UNPACKED_FLOAT16?o=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):i===Wn.PACKED_4X1_UNSIGNED_BYTE&&(o=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[s].push(o),this.numUsedTextures++,this._numBytesAllocated+=a,this.log(),o}releaseTexture(e,n,r,i){if(this.freeTextures==null)return;const s=U4(r,i),a=G4(n,s,i);a in this.freeTextures||(this.freeTextures[a]=[]);const o=W4(n,s,this.gpgpu.gl,this.gpgpu.textureConfig,i),l=re().get("WEBGL_DELETE_TEXTURE_THRESHOLD");l!==-1&&this._numBytesAllocated>l?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=o):(this.freeTextures[a].push(e),this.numFreeTextures++,this._numBytesFree+=o),this.numUsedTextures--;const c=this.usedTextures[a],u=c.indexOf(e);if(u<0)throw new Error("Cannot release a texture that was never provided by this texture manager");c.splice(u,1),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const n=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*n)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const e in this.freeTextures)this.freeTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});for(const e in this.usedTextures)this.usedTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function M4e(t,e){const n=t;if(e===n.R32F)return 4;if(e===n.R16F)return 2;if(e===n.RGBA32F)return 16;if(e===t.RGBA)return 16;if(e===n.RGBA16F)return 8;if(e===n.RGBA8)return 4;throw new Error(`Unknown internal format ${e}`)}function W4(t,e,n,r,i){const s=B4e(e,r);let a;if(i){const[l,c]=qf(t[0],t[1]);a=l*c}else{const[l,c]=ey(t[0],t[1]);a=l*c}const o=M4e(n,s);return a*o}function B4e(t,e){switch(t){case Wn.PACKED_2X2_FLOAT32:return UG(e);case Wn.PACKED_2X2_FLOAT16:return GG(e);case Wn.UNPACKED_FLOAT32:return jG(e);case Wn.UNPACKED_FLOAT16:return VG(e);case Wn.PACKED_4X1_UNSIGNED_BYTE:return WG(e);default:throw new Error(`Unknown physical texture type ${t}`)}}function z4e(t){return re().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?Wn.PACKED_2X2_FLOAT32:Wn.UNPACKED_FLOAT32:t?Wn.PACKED_2X2_FLOAT16:Wn.UNPACKED_FLOAT16}function U4(t,e){if(t===Ci.UPLOAD)return Wn.PACKED_2X2_FLOAT32;if(t===Ci.RENDER||t==null)return z4e(e);if(t===Ci.DOWNLOAD||t===Ci.PIXELS)return Wn.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${t}`)}function G4(t,e,n){return`${t[0]}_${t[1]}_${e}_${n}`}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Za{constructor(e,n){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=Nr(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${n}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const vs="if (isnan(x)) return x;",j4e="return x;",H4="return abs(x);",V4e="return (x >= 0.0) ? x : (exp(x) - 1.0);",W4e=vs+`
  return (x < 0.0) ? 0.0 : x;
`,U4e=vs+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,Uu="return x;",G4e="return 1.0 / (1.0 + exp(-1.0 * x));";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H4e="return x;",q4e=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,K4e=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,X4e=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Y4e="return 1.0 / (1.0 + exp(-1.0 * x));";class Sc{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=Nr(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${n}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Q4e{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=Nr(this.outputShape.length);const n=e.length,r=Er("rc",n),i=Rt(n),s=P4e(n,r),a=r.slice(-2),o=n<=1?"rc":`vec2(${a.join(",")})`;this.userCode=`
      void main() {
        ${i} rc = getOutputCoords();
        vec4 packedInput = getA(${s});

        setOutput(getChannel(packedInput, ${o}));
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z4e=r2,J4e=1e-7,eLe=1e-4,Hv={};function tLe(t){return t in Hv||(Hv[t]={}),Hv[t]}const nLe=re().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),rLe=600;function iLe(){return re().global.screen==null?1024:re().global.screen.height*re().global.screen.width*window.devicePixelRatio*rLe/1024/1024}class w2 extends sb{constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!re().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let n;if(e!=null){if(e instanceof mC)n=e;else{const r=Vs(re().getNumber("WEBGL_VERSION"),e);n=new mC(r)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const r=Vs(re().getNumber("WEBGL_VERSION"));n=new mC(r),this.binaryCache=tLe(re().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=n,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new L4e(this.gpgpu),this.numMBBeforeWarning=iLe(),this.texData=new AI(this,Ua())}nextDataId(){return w2.nextDataId++}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}write(e,n,r){if((re().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||re().getBool("DEBUG"))&&this.checkNumericalProblems(e),r==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const i={id:this.nextDataId()};return this.texData.set(i,{shape:n,dtype:r,values:e,usage:Ci.UPLOAD,refCount:1}),i}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){const n=this.texData.get(e);n.refCount++}decRef(e){if(this.texData.has(e)){const n=this.texData.get(e);n.refCount--}}move(e,n,r,i,s){if(re().getBool("DEBUG")&&this.checkNumericalProblems(n),i==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:r,dtype:i,values:n,usage:Ci.UPLOAD,refCount:s})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const n=this.texData.get(e),{values:r,dtype:i,complexTensorInfos:s,slice:a,shape:o,isPacked:l}=n;if(a!=null){let f;l?f=new Sc(o,Uu):f=new Za(o,Uu);const h=this.runWebGLProgram(f,[{dataId:e,shape:o,dtype:i}],i),g=this.readSync(h.dataId);return this.disposeIntermediateTensorInfo(h),g}if(r!=null)return this.convertAndCacheOnCPU(e);if(i==="string")return r;const c=this.activeTimers!=null;let u;c&&(u=Jr());let d;if(i==="complex64"){const f=this.readSync(s.real.dataId),h=this.readSync(s.imag.dataId);d=ho(f,h)}else d=this.getValuesFromTexture(e);return c&&(this.downloadWaitMs+=Jr()-u),this.convertAndCacheOnCPU(e,d)}async read(e){if(this.pendingRead.has(e)){const g=this.pendingRead.get(e);return new Promise(y=>g.push(y))}const n=this.texData.get(e),{values:r,shape:i,slice:s,dtype:a,complexTensorInfos:o,isPacked:l}=n;if(s!=null){let g;l?g=new Sc(i,Uu):g=new Za(i,Uu);const y=this.runWebGLProgram(g,[{dataId:e,shape:i,dtype:a}],a),x=this.read(y.dataId);return this.disposeIntermediateTensorInfo(y),x}if(r!=null)return this.convertAndCacheOnCPU(e);if(re().getBool("DEBUG")&&!re().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&re().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let c=null,u;if(a!=="complex64"&&re().get("WEBGL_BUFFER_SUPPORTED")){u=this.decode(e);const g=this.texData.get(u.dataId);c=this.gpgpu.createBufferFromTexture(g.texture.texture,...Vv(i))}this.pendingRead.set(e,[]),a!=="complex64"&&await this.gpgpu.createAndWaitForFence();let d;if(a==="complex64"){const g=await Promise.all([this.read(o.real.dataId),this.read(o.imag.dataId)]),y=g[0],x=g[1];d=ho(y,x)}else if(c==null)d=this.getValuesFromTexture(e);else{const g=oe(i);d=this.gpgpu.downloadFloat32MatrixFromBuffer(c,g)}if(u!=null&&this.disposeIntermediateTensorInfo(u),c!=null){const g=this.gpgpu.gl;Ae(g,()=>g.deleteBuffer(c))}const f=this.convertAndCacheOnCPU(e,d),h=this.pendingRead.get(e);return this.pendingRead.delete(e),h.forEach(g=>g(f)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&Ua().removeDataId(e,this),this.pendingDeletes--),f}readToGPU(e,n={}){const r=this.texData.get(e),{values:i,shape:s,slice:a,dtype:o,isPacked:l,texture:c}=r;if(o==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(a!=null){let h;l?h=new Sc(s,Uu):h=new Za(s,Uu);const g=this.runWebGLProgram(h,[{dataId:e,shape:s,dtype:o}],o),y=this.readToGPU(g,n);return this.disposeIntermediateTensorInfo(g),y}if(c==null)throw i!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const u=this.decode(e,n.customTexShape),d=Ua().makeTensorFromTensorInfo(u),f=this.texData.get(u.dataId);return Object.assign({tensorRef:d},f.texture)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(i=>fo(i));return qe(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return qe(e.shape,e.dtype,n)}checkNumericalProblems(e){if(e!=null)for(let n=0;n<e.length;n++){const r=e[n];if(!i3e(r))throw re().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${r} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${r} cannot be represented on this device.`)}}getValuesFromTexture(e){const{shape:n,dtype:r,isPacked:i}=this.texData.get(e),s=oe(n);if(re().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const f=this.decode(e),h=this.texData.get(f.dataId),g=this.gpgpu.downloadMatrixFromPackedTexture(h.texture.texture,...Vv(n)).subarray(0,s);return this.disposeIntermediateTensorInfo(f),g}const a=re().getBool("WEBGL_PACK")&&i===!0,o=a?fC(n):n,l=a?new bDe(o):new xDe(o),c=this.runWebGLProgram(l,[{shape:o,dtype:r,dataId:e}],"float32"),u=this.texData.get(c.dataId),d=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(u.texture.texture,u.texShape[0],u.texShape[1]).subarray(0,s);return this.disposeIntermediateTensorInfo(c),d}timerAvailable(){return re().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const n=this.activeTimers,r=[];let i=!1;this.programTimersStack==null?(this.programTimersStack=r,i=!0):this.activeTimers.push(r),this.activeTimers=r,e();const s=uo(this.activeTimers.map(l=>l.query)).filter(l=>l!=null),a=uo(this.activeTimers.map(l=>l.name)).filter(l=>l!=null);this.activeTimers=n,i&&(this.programTimersStack=null);const o={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(re().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const l=await Promise.all(s);o.kernelMs=GV(l),o.getExtraProfileInfo=()=>l.map((c,u)=>({name:a[u],ms:c})).map(c=>`${c.name}: ${c.ms}`).join(", ")}else o.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,o})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return re().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Jr(),endMs:null}}endTimer(e){return re().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=Jr(),e)}async getQueryTime(e){if(re().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const n=e;return n.endMs-n.startMs}disposeData(e,n=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(n?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!n&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:r}=this.texData.get(e);return r!=null&&(this.disposeData(r.real.dataId,n),this.disposeData(r.imag.dataId,n)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:n,dtype:r,texShape:i,usage:s,isPacked:a,slice:o}=this.texData.get(e),l=o&&o.origDataId||e,c=this.dataRefCount.get(l);c>1?this.dataRefCount.set(l,c-1):(this.dataRefCount.delete(l),n!=null&&(this.numBytesInGPU-=this.computeBytes(i,r),this.textureManager.releaseTexture(n,i,s,a)));const u=this.texData.get(e);u.texture=null,u.texShape=null,u.isPacked=!1,u.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,n=nLe){return re().getBool("WEBGL_CPU_FORWARD")&&e.every(r=>this.texData.get(r.dataId).texture==null&&oe(r.shape)<n)}getGPGPUContext(){return this.gpgpu}where(e){Si("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const n=e.dataSync();return Z4e(e.shape,n)}packedUnaryOp(e,n,r){const i=new Sc(e.shape,n),s=this.compileAndRun(i,[e],r);return Ua().makeTensorFromTensorInfo(s)}abs(e){if(this.shouldExecuteOnCPU([e])&&e.dtype!=="complex64"){const i=LH(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,i)}if(re().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,H4,e.dtype);const n=new Za(e.shape,H4),r=this.compileAndRun(n,[e]);return Ua().makeTensorFromTensorInfo(r)}makeTensorInfo(e,n,r){let i;if(n==="string"&&r!=null&&r.length>0&&la(r[0])){const s=r.map(a=>ya(a));i=this.write(s,e,n)}else i=this.write(r,e,n);return this.texData.get(i).usage=null,{dataId:i,shape:e,dtype:n}}makeOutput(e,n,r){return Ua().makeTensorFromTensorInfo(this.makeTensorInfo(e,n,r),this)}unpackTensor(e){const n=new Q4e(e.shape);return this.runWebGLProgram(n,[e],e.dtype)}packTensor(e){const n=new D4e(e.shape);return this.runWebGLProgram(n,[e],e.dtype,null,!0)}packedReshape(e,n){const r=[hf(e.shape),...mf(e.shape)],i={dtype:e.dtype,shape:r,dataId:e.dataId},s=[hf(n),...mf(n)],a=new zH(s,r),o=!0,l=[r],c=this.runWebGLProgram(a,[i],e.dtype,l,o);return{dataId:c.dataId,shape:n,dtype:c.dtype}}decode(e,n){const r=this.texData.get(e),{isPacked:i,shape:s,dtype:a}=r;if(n!=null){const f=oe(s),h=n[0]*n[1]*4;F(f<=h,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const o=fC(s);let l;i?l=new vDe(o):l=new yDe(o);const c=!0,u=[n??Vv(o)],d=this.runWebGLProgram(l,[{shape:o,dtype:a,dataId:e}],a,u,c,n);return{dtype:a,shape:s,dataId:d.dataId}}runWebGLProgram(e,n,r,i,s=!1,a){const o=this.makeTensorInfo(e.outputShape,r),l=this.texData.get(o.dataId);if(e.packedOutput&&(l.isPacked=!0),e.outPackingScheme===pm.DENSE){const v=a??Vv(e.outputShape);l.texShape=v.map(b=>b*2)}if(e.outTexUsage!=null&&(l.usage=e.outTexUsage),oe(o.shape)===0)return l.values=Tn(o.dtype,0),o;const c=[],u=n.map(v=>{if(v.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let b=this.texData.get(v.dataId);if(b.texture==null){if(!e.packedInputs&&oe(v.shape)<=re().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:v.shape,texData:null,isUniform:!0,uniformValues:b.values};e.packedInputs&&(b.isPacked=!0,b.shape=v.shape)}if(this.uploadToGPU(v.dataId),!!b.isPacked!=!!e.packedInputs)v=b.isPacked?this.unpackTensor(v):this.packTensor(v),c.push(v),b=this.texData.get(v.dataId);else if(b.isPacked&&!D1(b.shape,v.shape)){const S=v,k=v.shape;v.shape=b.shape,v=this.packedReshape(v,k),c.push(v),b=this.texData.get(v.dataId),S.shape=k}return{shape:v.shape,texData:b,isUniform:!1}});this.uploadToGPU(o.dataId);const d={shape:o.shape,texData:l,isUniform:!1},f=gDe(e,u,d),h=this.getAndSaveBinary(f,()=>hDe(this.gpgpu,e,u,d)),g=this.activeTimers!=null;let y;g&&(y=this.startTimer()),re().get("ENGINE_COMPILE_ONLY")||mDe(this.gpgpu,h,u,d,i),c.forEach(v=>this.disposeIntermediateTensorInfo(v)),g&&(y=this.endTimer(y),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(y)}));const x=re().get("WEBGL_FLUSH_THRESHOLD");if(x>0){const v=Jr();v-this.lastGlFlushTime>x&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=v)}if(!re().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&s===!1){const v=this.unpackTensor(o);return this.disposeIntermediateTensorInfo(o),v}return o}compileAndRun(e,n,r,i,s=!1){return r=r||n[0].dtype,this.runWebGLProgram(e,n,r,i,s)}getAndSaveBinary(e,n){return e in this.binaryCache||(this.binaryCache[e]=n()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(re().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(n=>{this.gpgpu.deleteProgram(this.binaryCache[n].webGLProgram),delete this.binaryCache[n]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=st(()=>{if(!re().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=re().getBool("DEBUG");re().set("DEBUG",!1);const n=this.abs(tt(1e-8)).dataSync()[0];if(re().set("DEBUG",e),n>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?J4e:eLe}uploadToGPU(e){const n=this.texData.get(e),{shape:r,dtype:i,values:s,texture:a,usage:o,isPacked:l}=n;if(a!=null)return;const c=this.activeTimers!=null;let u;c&&(u=Jr());let d=n.texShape;if(d==null&&(d=S3e(r,l),n.texShape=d),s!=null){const f=fC(r);let h,g=d[1],y=d[0];const x=s instanceof Uint8Array||s instanceof Uint8ClampedArray;(l||!x)&&([g,y]=qf(d[0],d[1])),l?h=new SDe(f,x):h=new wDe(f,x);const v=x?[y,g]:d,b=this.makeTensorInfo(v,i),S=this.texData.get(b.dataId);x?S.usage=Ci.PIXELS:S.usage=Ci.UPLOAD,S.texShape=v,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(b.dataId),g,y,s);const k=[[y,g]],T=this.runWebGLProgram(h,[b],i,k,!0),_=this.texData.get(T.dataId);n.texShape=_.texShape,n.isPacked=_.isPacked,n.usage=_.usage,re().get("ENGINE_COMPILE_ONLY")?this.disposeData(T.dataId):(n.texture=_.texture,n.values=null,this.texData.delete(T.dataId)),this.disposeIntermediateTensorInfo(b),c&&(this.uploadWaitMs+=Jr()-u)}else{const f=this.acquireTexture(d,o,i,l);n.texture=f}}convertAndCacheOnCPU(e,n){const r=this.texData.get(e),{dtype:i}=r;return this.releaseGPUData(e),n!=null&&(r.values=sLe(n,i)),r.values}acquireTexture(e,n,r,i){if(this.numBytesInGPU+=this.computeBytes(e,r),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const s=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${s} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,n,i)}computeBytes(e,n){return e[0]*e[1]*b1(n)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,n]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(n));return Promise.all(e)}else{for(const[,n]of Object.entries(this.binaryCache)){const r=new Promise(i=>{try{this.checkCompletion_(n),i(!0)}catch(s){throw s}});e.push(r)}return Promise.all(e)}}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await sG(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(DG(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(const[,e]of Object.entries(this.binaryCache)){const{uniformLocations:n,customUniformLocations:r,infLoc:i,nanLoc:s,inShapesLocations:a,inTexShapesLocations:o,outShapeLocation:l,outShapeStridesLocation:c,outTexShapeLocation:u}=zG(this.gpgpu,e.program,e.webGLProgram);e.uniformLocations=n,e.customUniformLocations=r,e.infLoc=i,e.nanLoc=s,e.inShapesLocations=a,e.inTexShapesLocations=o,e.outShapeLocation=l,e.outShapeStridesLocation=c,e.outTexShapeLocation=u}}}w2.nextDataId=0;function sLe(t,e){if(e==="float32"||e==="complex64")return t;if(e==="int32"||e==="bool"){const n=e==="int32"?new Int32Array(t.length):new Uint8Array(t.length);for(let r=0;r<n.length;++r)n[r]=Math.round(t[r]);return n}else throw new Error(`Unknown dtype ${e}`)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */eN()&&cN("webgl",()=>new w2,2);/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WR=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class yf{constructor(e,n,r){this.variableNames=["A","B"],this.outputShape=rt(n,r),this.enableShapeUniforms=Nr(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${e}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ry=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;class iy{constructor(e,n,r,i=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=rt(n,r);const s=this.outputShape.length;this.enableShapeUniforms=Nr(s);let a="";if(i)if(s===0||oe(this.outputShape)===1)a=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(a=`
          ${Rt(s)} coords = getOutputCoords();
        `,s===1)this.enableShapeUniforms?a+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:a+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const l=Er("coords",s);this.enableShapeUniforms?a+=`
            bool nextRowOutOfBounds =
              (${l[s-2]} + 1) >= outShape[${s} - 2];
            bool nextColOutOfBounds =
              (${l[s-1]} + 1) >= outShape[${s} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:a+=`
            bool nextRowOutOfBounds =
              (${l[s-2]} + 1) >= ${this.outputShape[s-2]};
            bool nextColOutOfBounds =
              (${l[s-1]} + 1) >= ${this.outputShape[s-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${e}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${a}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pi(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const aLe={kernelName:ig,backendName:"webgl",kernelFunc:pi};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ul(t){const{inputs:e,backend:n}=t,{real:r,imag:i}=e,s=n.makeTensorInfo(r.shape,"complex64"),a=n.texData.get(s.dataId),o=pi({inputs:{x:r},backend:n}),l=pi({inputs:{x:i},backend:n});return a.complexTensorInfos={real:o,imag:l},s}const oLe={kernelName:bb,backendName:"webgl",kernelFunc:Ul};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jH="return (a < 0.) ? b * a : a;",VH=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function lLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{alpha:s}=r,a=n.makeTensorInfo([],"float32",$o(s,"float32")),o=re().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new iy(VH,i.shape,a.shape):new yf(jH,i.shape,a.shape),l=n.runWebGLProgram(o,[i,a],"float32");return n.disposeIntermediateTensorInfo(a),l}const cLe={kernelName:Kb,backendName:"webgl",kernelFunc:lLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WH="return (a < 0.) ? b * a : a;",UH=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function uLe(t){const{inputs:e,backend:n}=t,{x:r,alpha:i}=e,s=re().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new iy(UH,r.shape,i.shape):new yf(WH,r.shape,i.shape);return n.runWebGLProgram(s,[r,i],"float32")}const dLe={kernelName:pw,backendName:"webgl",kernelFunc:uLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jf="if (isnan(x)) return x;";function ot({opSnippet:t,packedOpSnippet:e,cpuKernelImpl:n,dtype:r}){return({inputs:i,backend:s})=>{const{x:a}=i,o=s,l=r||a.dtype;if(o.shouldExecuteOnCPU([a])&&n!=null){const d=o.texData.get(a.dataId),f=n(d.values,l);return o.makeTensorInfo(a.shape,l,f)}const c=re().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&e!=null;let u;return c?u=new Sc(a.shape,e):u=new Za(a.shape,t),o.runWebGLProgram(u,[a],l)}}function Qn({opSnippet:t,packedOpSnippet:e,checkOutOfBounds:n=!1,supportsComplex:r=!1,cpuKernelImpl:i,dtype:s}){return({inputs:a,backend:o})=>{const{a:l,b:c}=a,u=o;if(r&&l.dtype==="complex64"){const g=u.texData.get(l.dataId),y=u.texData.get(c.dataId),[x,v]=[[g.complexTensorInfos.real,y.complexTensorInfos.real],[g.complexTensorInfos.imag,y.complexTensorInfos.imag]].map(S=>{const[k,$]=S,T={dataId:k.dataId,dtype:k.dtype,shape:l.shape},_={dataId:$.dataId,dtype:$.dtype,shape:c.shape},R=new yf(t,l.shape,c.shape);return u.runWebGLProgram(R,[T,_],Br(k.dtype,$.dtype))}),b=Ul({inputs:{real:x,imag:v},backend:u});return u.disposeIntermediateTensorInfo(x),u.disposeIntermediateTensorInfo(v),b}const d=s||Br(l.dtype,c.dtype);if((l.dtype==="string"||c.dtype==="string"||u.shouldExecuteOnCPU([l,c]))&&i!=null){const g=u.texData.get(l.dataId).values,y=u.texData.get(c.dataId).values,x=l.dtype==="string"?Yc(g):g,v=l.dtype==="string"?Yc(y):y,[b,S]=i(l.shape,c.shape,x,v,d),k=u.makeTensorInfo(S,d),$=u.texData.get(k.dataId);return $.values=b,k}const f=re().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&e!=null;let h;return f?h=new iy(e,l.shape,c.shape,n):h=new yf(t,l.shape,c.shape),u.runWebGLProgram(h,[l,c],d)}}function hm(t,e=!1){if(t==="linear")return e?H4e:j4e;if(t==="relu")return e?K4e:W4e;if(t==="elu")return e?q4e:V4e;if(t==="relu6")return e?X4e:U4e;if(t==="prelu")return e?UH:WH;if(t==="leakyrelu")return e?VH:jH;if(t==="sigmoid")return e?Y4e:G4e;throw new Error(`Activation ${t} has not been implemented for the WebGL backend.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class GH{constructor(e,n,r,i=!1,s=!1,a=!1,o=null,l=!1,c=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=Nr(this.outputShape.length);const u=i?e[1]:e[2],d=Math.ceil(u/2),f=i?"i * 2, rc.y":"rc.y, i * 2",h=s?"rc.z, i * 2":"i * 2, rc.z",g=i?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],y=s?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let x="",v="";o&&(l?x=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${o}
        }`:c?x=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${o}
        }`:x=`vec4 activation(vec4 x) {
          ${o}
        }`,v="result = activation(result);");const b=a?"result += getBiasAtOutCoords();":"";a&&this.variableNames.push("bias"),l&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");let S="rc.x",k="rc.x";e[0]<n[0]?S=`int(min(float(rc.x), ${e[0]-1}.))`:n[0]<e[0]&&(k=`int(min(float(rc.x), ${n[0]-1}.))`),this.userCode=`
      ${x}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${d}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        for (int i = 0; i < ${d}; i++) {
          int batchA = ${S};
          int batchB = ${k};
          vec4 a = getMatrixA(batchA, ${f});
          vec4 b = getMatrixB(batchB, ${h});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${g[0]} * ${y[0]});
          result += (${g[1]} * ${y[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${b}

        ${v}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const q4={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class K4{constructor(e,n,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=rt(n,r),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${e}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X4="return a * b;";function UR(t){const{inputs:e,backend:n}=t,{a:r,b:i}=e,s=Br(r.dtype,i.dtype);if(r.dtype==="complex64"){const o=n.texData.get(r.dataId),l=n.texData.get(i.dataId),c=new K4(q4.REAL,r.shape,i.shape),u=new K4(q4.IMAG,r.shape,i.shape),d=[{dataId:o.complexTensorInfos.real.dataId,dtype:o.complexTensorInfos.real.dtype,shape:r.shape},{dataId:o.complexTensorInfos.imag.dataId,dtype:o.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:i.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:i.shape}],f=n.runWebGLProgram(c,d,"float32"),h=n.runWebGLProgram(u,d,"float32"),g=Ul({inputs:{real:f,imag:h},backend:n});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),g}if(n.shouldExecuteOnCPU([r,i])){const o=n.texData.get(r.dataId),l=n.texData.get(i.dataId),[c,u]=f4e(r.shape,i.shape,o.values,l.values,s),d=n.makeTensorInfo(u,s),f=n.texData.get(d.dataId);return f.values=c,d}let a;return re().getBool("WEBGL_PACK_BINARY_OPERATIONS")?a=new iy(X4,r.shape,i.shape):a=new yf(X4,r.shape,i.shape),n.runWebGLProgram(a,[r,i],s)}const fLe={kernelName:vg,backendName:"webgl",kernelFunc:UR};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pLe(t,e,n){const r=[hf(t.shape),...mf(t.shape)],i={dtype:t.dtype,shape:r,dataId:t.dataId},s=[hf(e),...mf(e)],a=new zH(s,r),o=!0,l=[r],c=n.runWebGLProgram(a,[i],t.dtype,l,o);return{dataId:c.dataId,shape:e,dtype:c.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ce(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{shape:s}=r,a=n,o=oe(i.shape),l=PI(s,o),c=oe(l);F(o===c,()=>`The new shape (${l}) has ${c} elements and the old shape (${i.shape}) has ${o} elements. The new shape and old shape must have the same number of elements.`);const u=a.texData.get(i.dataId);return u.isPacked&&!D1(i.shape,l)&&!(u.texture!==null&&D1(u.shape,l))?pLe(i,l,a):(a.incRef(i.dataId),{dataId:i.dataId,shape:l,dtype:i.dtype})}const hLe={kernelName:xw,backendName:"webgl",kernelFunc:Ce};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Y4{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:i,inSize:s,outSize:a}=e;this.outputShape=[i,a];const o=Math.floor(r/4)*4,l=r%4;let c="sumValue += dot(values, ones);";if(n!=null){const d=1/n;c=`sumValue += dot(values * ${Wc(d)?d.toPrecision(2):d}, ones);`}let u="";s%r>0&&(u=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${u}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        float sumValue = 0.0;

        for (int i = 0; i < ${o}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${c}
        }

        int inIdx = inOffset + ${o};
        if (${l===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${c}
        } else if (${l===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${c}
        } else if (${l===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${c}
        }
        setOutput(sumValue);
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mLe{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:i,inSize:s,outSize:a}=e;this.outputShape=[i,a];let o="0.0",l="";n==="prod"?o="1.0":n==="min"?(o="1.0 / 1e-20",l="min"):n==="max"&&(o="-1.0 / 1e-20",l="max");let c=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="sum"?c="sumValue":n==="prod"?c="prodValue":n==="all"?c="allValue":n==="any"&&(c="anyValue");const u=Math.floor(r/4)*4,d=r%4;let f=`
      if (${n==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${n==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${l}(values, minMaxValue);
        if (${n==="min"} || ${n==="max"}) {
          minMaxValue = ${l}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,h="vec4";n==="all"?(o="1.0",f=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,h="bvec4"):n==="any"&&(o="0.0",f=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,h="bvec4");let g="";s%r>0&&(g=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${o};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${g}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        vec4 minMaxValue = vec4(${o});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${u}; i += 4) {
          int inIdx = inOffset + i;
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${f}
        }

        int inIdx = inOffset + ${u};
        if (${d===1}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${f}
        } else if (${d===2}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${f}
        } else if (${d===3}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${f}
        }
        setOutput(${c});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gLe(t){const e=[];for(;e.length===0||e[e.length-1].outSize!==1;){const n=e.length?e[e.length-1].outSize:t[1],r=v2(n);e.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return e}function Su(t,e,n,r){const i=gLe(t.shape);let s=t;for(let a=0;a<i.length;a++){const{inSize:o,windowSize:l,outSize:c}=i[a];let u,d;n==="mean"?u=a===0?new Y4({windowSize:l,inSize:o,batchSize:t.shape[0],outSize:c},o):new Y4({windowSize:l,inSize:o,batchSize:t.shape[0],outSize:c}):u=new mLe({windowSize:l,inSize:o,batchSize:t.shape[0],outSize:c},n),d=s,s=r.runWebGLProgram(u,[s],e),d.dataId!==t.dataId&&r.disposeIntermediateTensorInfo(d)}return s}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yLe{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let a=0;a<r.length;a++)r[a]=e[n[a]];this.outputShape=r,this.rank=r.length;const i=Rt(this.rank),s=vLe(n);this.userCode=`
    void main() {
      ${i} resRC = getOutputCoords();
      setOutput(getA(${s}));
    }
    `}}function vLe(t){const e=t.length;if(e>6)throw Error(`Transpose for rank ${e} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(e);for(let i=0;i<t.length;i++)r[t[i]]=n[i];return r.join()}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xLe{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const r=new Array(e.length);for(let u=0;u<r.length;u++)r[u]=e[n[u]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const i=Rt(this.rank),s=BH("rc",this.rank),a=new Array(this.rank);for(let u=0;u<n.length;u++)a[n[u]]=s[u];const o=`vec2(${a.slice(-2).join()})`,l=`++${s[this.rank-1]} < ${r[this.rank-1]}`,c=`getChannel(getA(${a.join()}), ${o})`;this.userCode=`
    void main() {
      ${i} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${c};
      if(${l}) {
        result[1] = ${c};
      }
      --${s[this.rank-1]};
      if(++${s[this.rank-2]} < ${r[this.rank-2]}) {
        result[2] = ${c};
        if(${l}) {
          result[3] = ${c};
        }
      }
      setOutput(result);
    }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S2(t,e,n){const r=re().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new xLe(t.shape,e):new yLe(t.shape,e);return n.runWebGLProgram(r,[t],t.dtype)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bLe(t,e,n,r){const i=e,s=t.shape.length,a=ut(i,t.shape);let o=a;const l=fn(o,s),c=l!=null;let u=t;c&&(u=S2(t,l,r),o=pn(o.length,s)),Yn("sum",o,s);const[d,f]=Xn(u.shape,o);let h=d;n&&(h=_n(d,a));const g=oe(f),x=oe(t.shape)/g,v=Ce({inputs:{x:u},attrs:{shape:[x,g]},backend:r}),b=Kw(t.dtype),S=Su(v,b,"sum",r),k=Ce({inputs:{x:S},attrs:{shape:h},backend:r});return r.disposeIntermediateTensorInfo(v),r.disposeIntermediateTensorInfo(S),c&&r.disposeIntermediateTensorInfo(u),k}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k2(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:a}=r;return bLe(i,s,a,n)}const wLe={kernelName:Tw,backendName:"webgl",kernelFunc:k2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _r(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{perm:s}=r,a=n,o=i.shape.length,l=new Array(o);for(let u=0;u<l.length;u++)l[u]=i.shape[s[u]];let c;if(a.shouldExecuteOnCPU([i])){const d=a.texData.get(i.dataId).values,f=VR(d,i.shape,i.dtype,s,l);c=a.makeTensorInfo(l,i.dtype);const h=a.texData.get(c.dataId);h.values=f}else c=S2(i,s,a);return c}const SLe={kernelName:Bd,backendName:"webgl",kernelFunc:_r};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HH=1e3;function M1({a:t,b:e,transposeA:n,transposeB:r,backend:i,bias:s=null,preluActivationWeights:a=null,leakyreluAlpha:o=0,activation:l=null}){const c=t.shape.length,u=e.shape.length,d=n?t.shape[c-2]:t.shape[c-1],f=r?e.shape[u-1]:e.shape[u-2],h=n?t.shape[c-1]:t.shape[c-2],g=r?e.shape[u-2]:e.shape[u-1],y=t.shape.slice(0,-2),x=e.shape.slice(0,-2),v=oe(y),b=oe(x),k=rt(t.shape.slice(0,-2),e.shape.slice(0,-2)).concat([h,g]);F(d===f,()=>`Error in matMul: inner shapes (${d}) and (${f}) of Tensors with shapes ${t.shape} and ${e.shape} and transposeA=${n} and transposeB=${r} must match.`);const $=n?[v,d,h]:[v,h,d],T=r?[b,g,f]:[b,f,g],_=Ce({inputs:{x:t},backend:i,attrs:{shape:$}}),R=Ce({inputs:{x:e},backend:i,attrs:{shape:T}}),P=[_,R],O=Math.max(v,b),B=n?_.shape[1]:_.shape[2],H=s!=null,V=a!=null,K=l==="leakyrelu",X=l!=null?hm(l,!0):null,q=H||V||K||X!=null;let te;if((h===1||g===1)&&B>HH&&q===!1){let Y=_,Q=R;n&&(Y=_r({inputs:{x:_},backend:i,attrs:{perm:[0,2,1]}}),P.push(Y)),r&&(Q=_r({inputs:{x:R},backend:i,attrs:{perm:[0,2,1]}}),P.push(Q));const ne=g!==1,le=g===1;let ue=Y;ne&&(ue=Ce({inputs:{x:Y},backend:i,attrs:{shape:[O,B,1]}}),P.push(ue));const de=g===1?2:1;let pe=Q;le&&(pe=Ce({inputs:{x:Q},backend:i,attrs:{shape:[O,1,B]}}),P.push(pe));const me=UR({inputs:{a:ue,b:pe},backend:i});te=k2({inputs:{x:me},backend:i,attrs:{axis:de,keepDims:!0}}),P.push(me)}else{const Y=Br(t.dtype,e.dtype),Q=new GH($,T,[O,h,g],n,r,H,X,V,K),ne=[_,R];if(s!=null&&ne.push(s),V&&ne.push(a),K){const le=i.makeTensorInfo([],"float32",$o(o,"float32"));ne.push(le),P.push(le)}te=i.runWebGLProgram(Q,ne,Y)}const j=Ce({inputs:{x:te},backend:i,attrs:{shape:k}});P.push(te);for(const Y of P)i.disposeIntermediateTensorInfo(Y);return j}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kLe(t){const{inputs:e,backend:n,attrs:r}=t,{a:i,b:s,bias:a,preluActivationWeights:o}=e,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:d}=r;return M1({a:i,b:s,transposeA:l,transposeB:c,backend:n,bias:a,preluActivationWeights:o,leakyreluAlpha:d,activation:u})}const CLe={kernelName:nm,backendName:"webgl",kernelFunc:kLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q4="return abs(x);";function $Le(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])&&r.dtype!=="complex64"){const s=n.texData.get(r.dataId),a=LH(s.values);return n.makeTensorInfo(r.shape,r.dtype,a)}let i;return re().getBool("WEBGL_PACK_UNARY_OPERATIONS")?i=new Sc(r.shape,Q4):i=new Za(r.shape,Q4),n.runWebGLProgram(i,[r],r.dtype)}const ELe={kernelName:lb,backendName:"webgl",kernelFunc:$Le};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TLe=vs+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,_Le=ot({opSnippet:TLe}),ILe={kernelName:Fm,backendName:"webgl",kernelFunc:_Le};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NLe=vs+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,RLe=ot({opSnippet:NLe}),OLe={kernelName:Lm,backendName:"webgl",kernelFunc:RLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z4="return a + b;",ALe=Qn({opSnippet:Z4,packedOpSnippet:Z4,supportsComplex:!0,cpuKernelImpl:HFe}),PLe={kernelName:Vf,backendName:"webgl",kernelFunc:ALe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class DLe{constructor(e,n){this.outputShape=[],this.outputShape=e,this.variableNames=n.map((s,a)=>`T${a}`);const r=[];this.variableNames.forEach(s=>{r.push(`float v${s} = get${s}AtOutCoords();`)});const i=this.variableNames.map(s=>`v${s}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        float result = ${i};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FLe{constructor(e,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=n.map((s,a)=>`T${a}`);const r=[];this.variableNames.forEach(s=>{r.push(`vec4 v${s} = get${s}AtOutCoords();`)});const i=this.variableNames.map(s=>`v${s}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        vec4 result = ${i};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v0(t){const{inputs:e,backend:n}=t,r=e;if(r.length===1)return pi({inputs:{x:r[0]},backend:n});if(r.length>re().get("WEBGL_MAX_TEXTURES_IN_SHADER")){const l=Math.floor(r.length/2),c=v0({inputs:r.slice(0,l),backend:n}),u=v0({inputs:r.slice(l),backend:n});return v0({inputs:[c,u],backend:n})}const i=r.map(l=>l.dtype).reduce((l,c)=>Br(l,c)),s=r.map(l=>l.shape),o=re().getBool("WEBGL_PACK")?new FLe(r[0].shape,s):new DLe(r[0].shape,s);return n.runWebGLProgram(o,r,i)}const LLe={kernelName:cb,backendName:"webgl",kernelFunc:v0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:a}=r,o=i.shape.length,l=ut(s,i.shape);let c=l;const u=fn(c,o);let d=i;u!=null&&(d=_r({inputs:{x:i},backend:n,attrs:{perm:u}}),c=pn(c.length,o)),Yn("all",c,o);const[f,h]=Xn(d.shape,c),g=oe(h),y=Ce({inputs:{x:d},backend:n,attrs:{shape:[-1,g]}}),x=Su(y,y.dtype,"all",n);let v;if(a){const b=_n(f,l);v=Ce({inputs:{x},backend:n,attrs:{shape:b}})}else v=Ce({inputs:{x},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(x),u!=null&&n.disposeIntermediateTensorInfo(d),v}const BLe={kernelName:ub,backendName:"webgl",kernelFunc:MLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:a}=r,o=i.shape.length,l=ut(s,i.shape);let c=l;const u=fn(c,o);let d=i;u!=null&&(d=_r({inputs:{x:i},backend:n,attrs:{perm:u}}),c=pn(c.length,o)),Yn("any",c,o);const[f,h]=Xn(d.shape,c),g=oe(h),y=Ce({inputs:{x:d},backend:n,attrs:{shape:[-1,g]}}),x=Su(y,y.dtype,"any",n);let v;if(a){const b=_n(f,l);v=Ce({inputs:{x},backend:n,attrs:{shape:b}})}else v=Ce({inputs:{x},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(x),u!=null&&n.disposeIntermediateTensorInfo(d),v}const jLe={kernelName:db,backendName:"webgl",kernelFunc:zLe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class VLe{constructor(e,n,r){this.variableNames=["A"];const{windowSize:i,batchSize:s,outSize:a}=e;r||this.variableNames.push("bestIndicesA"),this.outputShape=[s,a];const o=n==="max"?">":"<",l=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${i};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${i}; i++) {
          int inIdx = ${l};
          float candidate = getA(batch, inIdx);
          if (candidate ${o} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class WLe{constructor(e,n,r,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,F(e.length>2,()=>`Packed arg${r.charAt(0).toUpperCase()+r.slice(1)} supports only inputs with rank above 2.`);const s=e[e.length-1],a=Math.ceil(s/n);this.outputShape=e.slice(0,-1),a>1&&this.outputShape.push(a),i||this.variableNames.push("bestIndicesA");const o=this.outputShape,l=o.length,c=Rt(l),u=Er("coords",l);let d,f;if(a===1){f=l+1;const R=Rt(f);d=`
        ${R} sourceLocR = ${R}(${u.join()}, 0);
        ++${u[l-1]};
        ${R} sourceLocG = ${R}(${u.join()}, 0);
        ++${u[l-2]};
        ${R} sourceLocA = ${R}(${u.join()}, 0);
        --${u[l-1]};
        ${R} sourceLocB = ${R}(${u.join()}, 0);
        --${u[l-2]};`}else f=l,d=`
        ${c} sourceLocR = coords;
        ++${u[l-1]};
        ${c} sourceLocG = coords;
        ++${u[l-2]};
        ${c} sourceLocA = coords;
        --${u[l-1]};
        ${c} sourceLocB = coords;
        --${u[l-2]};`;const h=["x","y","z","w","u","v"].slice(0,f),g="."+h[f-1],y=h.map(R=>"int "+R),x=Er("sourceLocR",f-1).concat("inIdx.r"),v=Er("sourceLocG",f-1).concat("inIdx.g"),b=Er("sourceLocB",f-1).concat("inIdx.b"),S=Er("sourceLocA",f-1).concat("inIdx.a"),k=r==="max"?"greaterThan":"lessThan",$=i?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${x.join()}),
                             getBestIndicesAChannel(${v.join()}),
                             getBestIndicesAChannel(${b.join()}),
                             getBestIndicesAChannel(${S.join()})));`,T=`vec4(
            getAChannel(${x.join()}),
            hasNextCol ? getAChannel(${v.join()}) : 0.,
            hasNextRow ? getAChannel(${b.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${S.join()}) : 0.)`,_=i?"":`
      float getBestIndicesAChannel(${y.join()}) {
        return getChannel(getBestIndicesA(${h.join()}),
                                          vec2(${h.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${y.join()}) {
        return getChannel(getA(${h.join()}),
                               vec2(${h.slice(-2).join()}));
      }
      ${_}
      void main() {
        ${c} coords = getOutputCoords();
        bool hasNextCol = ${u[l-1]} < ${o[l-1]-1};
        bool hasNextRow = ${u[l-2]} < ${o[l-2]-1};
        ${d}
        ivec4 srcIdx = ivec4(sourceLocR${g}, sourceLocG${g},
          sourceLocB${g}, sourceLocA${g}) * ${n};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${T};

        for (int i = 0; i < ${n}; i++) {
          inIdx = srcIdx;
          ${$}
          vec4 candidate = ${T};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${k}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qH(t,e,n,r=null){let i=e.shape[0],s=e.shape[1];r!=null&&(i=r.shape[0],s=r.shape[1]);const a=v2(s),o={windowSize:a,inSize:s,batchSize:i,outSize:Math.ceil(s/a)},l=new VLe(o,n,r==null),c=[e];r!=null&&c.push(r);const u=t.runWebGLProgram(l,c,"int32");if(u.shape[1]===1)return u;const d=qH(t,e,n,u);return t.disposeIntermediateTensorInfo(u),d}function KH(t,e,n,r=null){const i=r!=null?r.shape:e.shape,s=i[i.length-1],a=v2(s),o=new WLe(i,a,n,r==null),l=r==null?[e]:[e,r],c=t.runWebGLProgram(o,l,"int32");if(c.shape.length===e.shape.length){const u=KH(t,e,n,c);return t.disposeIntermediateTensorInfo(c),u}return c}function XH(t,e,n,r){const i=[n];if(Yn("arg"+r.charAt(0).toUpperCase()+r.slice(1),i,e.shape.length),!re().getBool("WEBGL_PACK_REDUCE")||e.shape.length<=2){const s=[],a=t.texData.get(e.dataId),o=a!==null&&a.isPacked;let l=e;o&&(l=t.unpackTensor(e),s.push(l));const[c,u]=Xn(l.shape,i),d=oe(u),f=Ce({inputs:{x:l},backend:t,attrs:{shape:[-1,d]}});s.push(f);const h=qH(t,f,r);s.push(h);const g=Ce({inputs:{x:h},backend:t,attrs:{shape:c}});return s.forEach(y=>t.disposeIntermediateTensorInfo(y)),g}return KH(t,e,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ULe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s}=r;let a=ut(s,i.shape);const o=fn(a,i.shape.length);let l=i;const c=[];o!=null&&(l=_r({inputs:{x:i},backend:n,attrs:{perm:o}}),c.push(l),a=pn(a.length,l.shape.length)),Yn("argMax",[a[0]],l.shape.length);const u=XH(n,l,a[0],"max");return c.forEach(d=>n.disposeIntermediateTensorInfo(d)),u}const GLe={kernelName:fb,backendName:"webgl",kernelFunc:ULe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s}=r;let a=ut(s,i.shape);const o=fn(a,i.shape.length);let l=i;const c=[];o!=null&&(l=_r({inputs:{x:i},backend:n,attrs:{perm:o}}),c.push(l),a=pn(a.length,l.shape.length)),Yn("argMin",[a[0]],l.shape.length);const u=XH(n,l,a[0],"min");return c.forEach(d=>n.disposeIntermediateTensorInfo(d)),u}const qLe={kernelName:pb,backendName:"webgl",kernelFunc:HLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KLe=vs+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,XLe=ot({opSnippet:KLe}),YLe={kernelName:Mm,backendName:"webgl",kernelFunc:XLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QLe=vs+"return log(x + sqrt(x * x + 1.0));",ZLe=ot({opSnippet:QLe}),JLe={kernelName:Bm,backendName:"webgl",kernelFunc:ZLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eMe=vs+`
  return atan(x);
`,tMe=ot({opSnippet:eMe}),nMe={kernelName:zm,backendName:"webgl",kernelFunc:tMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rMe=WR+`
  return atan(a, b);
`,iMe=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+ry+`
  return result;
`,sMe=Qn({opSnippet:rMe,packedOpSnippet:iMe}),aMe={kernelName:Vm,backendName:"webgl",kernelFunc:sMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oMe=vs+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,lMe=ot({opSnippet:oMe}),cMe={kernelName:jm,backendName:"webgl",kernelFunc:lMe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mm{constructor(e,n,r,i=!1,s=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const a=e.filterWidth,o=e.strideHeight,l=e.strideWidth,c=e.dilationHeight,u=e.dilationWidth,d=e.effectiveFilterHeight,f=e.effectiveFilterWidth,h=e.padInfo.top,g=e.padInfo.left;this.outputShape=e.outShape;const y=n==="avg",x=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,v=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`;let b="0.0";if(y||(b="-1.0 / 1e-20"),r){const R=">=";this.userCode=`
        const ivec2 strides = ivec2(${o}, ${l});
        const ivec2 pads = ivec2(${h}, ${g});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${d};
              wR += ${c}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${f};
                wC += ${u}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${R} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${i?s?x:v:`wR * ${f} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const S="max";let k=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(k="avgValue / count");const $=Math.floor(a/4)*4,T=a%4,_=`
      if (${y}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${S}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${o}, ${l});
      const ivec2 pads = ivec2(${h}, ${g});
      const float initializationValue = ${b};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${b});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${d};
            wR += ${c}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${$}; wC += 4) {
            int xC = xCCorner + wC * ${u};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              getValue(batch, xR, xC + 2 * ${u}, d),
              getValue(batch, xR, xC + 3 * ${u}, d)
            );

            ${_}
          }

          int xC = xCCorner + ${$};
          if (${T===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${_}
          } else if (${T===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              initializationValue,
              initializationValue
            );

            ${_}
          } else if (${T===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              getValue(batch, xR, xC + 2 * ${u}, d),
              initializationValue
            );

            ${_}
          }
        }
        setOutput(${k});
      }
    `}}class GR{constructor(e,n,r,i=!1,s=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const a=e.filterWidth,o=e.strideDepth,l=e.strideHeight,c=e.strideWidth,u=e.dilationDepth,d=e.dilationHeight,f=e.dilationWidth,h=e.effectiveFilterDepth,g=e.effectiveFilterHeight,y=e.effectiveFilterWidth,x=e.padInfo.front,v=e.padInfo.top,b=e.padInfo.left;this.outputShape=e.outShape;const S=n==="avg";let k="0.0";if(S||(k="-1.0 / 1e-20"),r){const O=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${o}, ${l}, ${c});
        const ivec3 pads = ivec3(${x}, ${v}, ${b});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${h};
              wD += ${u}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${e.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${g};
                wR += ${d}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${y};
                  wC += ${f}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${O} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${i?s?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${g} * ${y} +
                      wR * ${y} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const $="max";let T=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(T="avgValue / count");const _=Math.floor(a/4)*4,R=a%4,P=`
      if (${S}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${$}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${o}, ${l}, ${c});
      const ivec3 pads = ivec3(${x}, ${v}, ${b});
      const float initializationValue = ${k};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${k});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${h};
            wD += ${u}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${g};
            wR += ${d}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${_}; wC += 4) {
              int xC = xCCorner + wC * ${f};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${f}, ch),
                getValue(batch, xD, xR, xC + 2 * ${f}, ch),
                getValue(batch, xD, xR, xC + 3 * ${f}, ch)
              );

              ${P}
            }

            int xC = xCCorner + ${_};
            if (${R===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${P}
            } else if (${R===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${f}, ch),
                initializationValue,
                initializationValue
              );

              ${P}
            } else if (${R===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${f}, ch),
                getValue(batch, xD, xR, xC + 2 * ${f}, ch),
                initializationValue
              );

              ${P}
            }
          }
          setOutput(${T});
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uMe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;ty(i,"avgPool");const{filterSize:s,strides:a,pad:o,dimRoundingMode:l}=r,c=1;F(lr(a,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${c}'`);const u=gs(i.shape,s,a,c,o,l);if(u.filterWidth===1&&u.filterHeight===1&&$t(u.inShape,u.outShape))return pi({inputs:{x:i},backend:n});const d=new mm(u,"avg",!1);return n.runWebGLProgram(d,[i],"float32")}const dMe={kernelName:hb,backendName:"webgl",kernelFunc:uMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fMe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{filterSize:s,strides:a,pad:o,dimRoundingMode:l,dataFormat:c}=r,u=[1,1,1],d=Eo(i.shape,s,a,u,o,l,c),f=new GR(d,"avg",!1);return n.runWebGLProgram(f,[i],"float32")}const pMe={kernelName:mb,backendName:"webgl",kernelFunc:fMe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hMe{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,i=e.strideHeight,s=e.strideWidth,a=e.dilationHeight,o=e.dilationWidth,l=e.effectiveFilterHeight,c=e.effectiveFilterWidth,u=l-1-e.padInfo.top,d=c-1-e.padInfo.left,f=1/(n*r);this.userCode=`
      const ivec2 pads = ivec2(${u}, ${d});
      const float avgMultiplier = float(${f});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${l};
            wR += ${a}) {
          float dyR = float(dyRCorner + wR) / ${i}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${c};
            wC+= ${o}) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class mMe{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,i=e.filterWidth,s=e.strideDepth,a=e.strideHeight,o=e.strideWidth,l=e.dilationDepth,c=e.dilationHeight,u=e.dilationWidth,d=e.effectiveFilterDepth,f=e.effectiveFilterHeight,h=e.effectiveFilterWidth,g=d-1-e.padInfo.front,y=f-1-e.padInfo.top,x=h-1-e.padInfo.left,v=1/(n*r*i);this.userCode=`
      const ivec3 pads = ivec3(${g}, ${y}, ${x});
      const float avgMultiplier = float(${v});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${d};
            wD += ${l}) {
          float dyD = float(dyDCorner + wD) / ${s}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${f};
              wR += ${c}) {
            float dyR = float(dyRCorner + wR) / ${a}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${h};
                wC += ${u}) {
              float dyC = float(dyCCorner + wC) / ${o}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gMe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s}=e,a=s,{filterSize:o,strides:l,pad:c,dimRoundingMode:u}=r,d=[1,1,1],f=Eo(a.shape,o,l,d,c,u),h=new mMe(f);return n.runWebGLProgram(h,[i],a.dtype)}const yMe={kernelName:jI,backendName:"webgl",kernelFunc:gMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vMe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s}=e,a=s;ty([i,s],"avgPoolGrad");const{filterSize:o,strides:l,pad:c}=r,u=gs(a.shape,o,l,1,c),d=new hMe(u);return n.runWebGLProgram(d,[i],a.dtype)}const xMe={kernelName:zI,backendName:"webgl",kernelFunc:vMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bMe(t){const{inputs:e,backend:n,attrs:r}=t,{a:i,b:s}=e,{transposeA:a,transposeB:o}=r;return M1({a:i,b:s,transposeA:a,transposeB:o,backend:n})}const wMe={kernelName:gb,backendName:"webgl",kernelFunc:bMe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SMe{constructor(e,n,r,i,s,a){this.outputShape=[],this.variableNames=["x","mean","variance"],rt(e,n),rt(e,r);let o="0.0";i!=null&&(rt(e,i),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");let l="1.0";s!=null&&(rt(e,s),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${o};
        float scale = ${l};
        float inv = scale * inversesqrt(variance + float(${a}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kMe{constructor(e,n,r,i,s,a){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],rt(e,n),rt(e,r);let o="vec4(0.0)";i!=null&&(rt(e,i),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");let l="vec4(1.0)";s!=null&&(rt(e,s),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = ${o};
        vec4 scale = ${l};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${a}));

        setOutput((x - mean) * inv + offset);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CMe=({inputs:t,backend:e,attrs:n})=>{const{x:r,mean:i,variance:s,offset:a,scale:o}=t;F(i.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),F(a==null||i.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),F(o==null||i.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=n;l==null&&(l=.001);const c=[r,i,s];let u=null;a!=null&&(u=a.shape,c.push(a));let d=null;o!=null&&(d=o.shape,c.push(o));const f=re().getBool("WEBGL_PACK_NORMALIZATION")?new kMe(r.shape,i.shape,s.shape,u,d,l):new SMe(r.shape,i.shape,s.shape,u,d,l);return e.runWebGLProgram(f,c,c[0].dtype)},$Me={kernelName:Wb,backendName:"webgl",kernelFunc:CMe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class EMe{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const n=Rt(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const r=TMe(this.rank);let i;const s=e.map((a,o)=>`sourceLoc.${UE[o]} = start[${o}] + coords.${UE[o]};`);i=`
        ${n} sourceLoc;
        ${n} coords = getOutputCoords();
        ${s.join(`
`)}
      `,this.userCode=`
      void main() {
        ${i}
        setOutput(getSource(${r}));
      }
    `}}const UE=["x","y","z","w","u","v"];function TMe(t){if(t===1)return"sourceLoc";if(t<=6)return UE.slice(0,t).map(e=>"sourceLoc."+e).join(",");throw Error(`Slicing for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _Me{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=Rt(this.rank),r=Er("coords",this.rank),i=Er("sourceLoc",this.rank),s=this.rank===1?"sourceLoc":`vec2(${i.slice(-2).join()})`,a=`getChannel(getSource(${i.join()}), ${s})`,o=`
      result.x = ${a};
      if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
        ++${i[this.rank-1]};
        result.y = ${a};
        --${i[this.rank-1]};
      }
    `,l=this.rank===1?"":`
      --${r[this.rank-1]};
      if (++${r[this.rank-2]} < ${e[this.rank-2]}) {
        ++${i[this.rank-2]};
        result.z = ${a};
        if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
          ++${i[this.rank-1]};
          result.w = ${a};
        }
      }
    `,c=this.rank<=4?`sourceLoc = coords +
            ${n}(${e.map((u,d)=>`start[${d}]`).join()});`:e.map((u,d)=>`${i[d]} = ${r[d]} + start[${d}];`).join(`
`);this.userCode=`
      void main() {
        ${n} coords = getOutputCoords();
        ${n} sourceLoc;
        ${c}
        vec4 result = vec4(0.);
        ${o}
        ${l}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IMe(t,e,n,r){const i=r.texData.get(t.dataId),s=r.makeTensorInfo(n,t.dtype),a=r.texData.get(s.dataId);Object.assign(a,i),a.refCount=1,a.shape=n,a.dtype=t.dtype;let o=yN(e,Me(t.shape));i.slice&&(o+=i.slice.flatOffset),a.slice={flatOffset:o,origDataId:i.slice&&i.slice.origDataId||t.dataId};const l=r.dataRefCount.get(a.slice.origDataId)||1;return r.dataRefCount.set(a.slice.origDataId,l+1),s}function ep(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{begin:s,size:a}=r,[o,l]=vN(i,s,a);if(hN(i,o,l),oe(l)===0)return n.makeTensorInfo(l,i.dtype,[]);if(n.shouldExecuteOnCPU([i])||i.dtype==="string"){const d=n.texData.get(i.dataId),f=S4e(d.values,o,l,i.shape,i.dtype);return n.makeTensorInfo(l,i.dtype,f)}const{isPacked:c}=n.texData.get(i.dataId),u=gN(i.shape,o,l);if(c||!u){const d=re().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new _Me(l):new EMe(l),f=[o];return n.runWebGLProgram(d,[i],i.dtype,f)}return n.uploadToGPU(i.dataId),IMe(i,o,l,n)}const NMe={kernelName:Ew,backendName:"webgl",kernelFunc:ep};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RMe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockShape:s,crops:a}=r;F(i.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const o=s.reduce((b,S)=>b*S),l=Qg(i.shape,s,o),c=Zg(l.length,s.length),u=Jg(i.shape,s,o),d=pR(a,s.length),f=hR(u,a,s.length),h=[],g=Ce({inputs:{x:i},backend:n,attrs:{shape:l}}),y=_r({inputs:{x:g},backend:n,attrs:{perm:c}}),x=Ce({inputs:{x:y},backend:n,attrs:{shape:u}}),v=ep({inputs:{x},backend:n,attrs:{begin:d,size:f}});return h.push(g),h.push(y),h.push(x),h.forEach(b=>n.disposeIntermediateTensorInfo(b)),v},OMe={kernelName:yb,backendName:"webgl",kernelFunc:RMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AMe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,weights:s}=e,{size:a}=r,o=n.readSync(i.dataId),l=n.readSync(s.dataId),c=FH(o,l,s.dtype,s.shape,a);return n.makeTensorInfo([a],s.dtype,c)}const PMe={kernelName:vb,backendName:"webgl",kernelFunc:AMe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DMe(t){const{inputs:e,backend:n}=t,{s0:r,s1:i}=e,s=n.readSync(r.dataId),a=n.readSync(i.dataId),o=rt(Array.from(s),Array.from(a));return n.makeTensorInfo([o.length],"int32",Int32Array.from(o))}const FMe={kernelName:xb,backendName:"webgl",kernelFunc:DMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LMe="return float(a != b);",YH=Qn({opSnippet:LMe,cpuKernelImpl:h4e,dtype:"bool"}),MMe={kernelName:xg,backendName:"webgl",kernelFunc:YH};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sy(t){const{inputs:e,backend:n}=t,{input:r}=e,i=n.texData.get(r.dataId);return pi({inputs:{x:i.complexTensorInfos.real},backend:n})}const BMe={kernelName:vw,backendName:"webgl",kernelFunc:sy};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zMe="return float(int(x));";function jMe(t,e){const n=new Za(t.shape,zMe),r=e.runWebGLProgram(n,[t],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GE(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{dtype:s}=r;if(s==="complex64"){if(i.dtype==="complex64")return pi({inputs:{x:i},backend:n});const a=Cl(i.shape),o=GE({inputs:{x:i},backend:n,attrs:{dtype:"float32"}}),l=Ul({inputs:{real:o,imag:a},backend:n});return a.dispose(),n.disposeIntermediateTensorInfo(o),l}if(i.dtype==="complex64"){const a=sy({inputs:{input:i},backend:n}),o=GE({inputs:{x:a},backend:n,attrs:{dtype:s}});return n.disposeIntermediateTensorInfo(a),o}if(!DI(i.dtype,s)){const a=pi({inputs:{x:i},backend:n});return{dataId:a.dataId,shape:a.shape,dtype:s}}if(n.shouldExecuteOnCPU([i])){const a=n.texData.get(i.dataId).values,[o,l,c]=KFe(a,i.shape,i.dtype,s);return n.makeTensorInfo(o,l,c)}if(s==="int32")return jMe(i,n);if(s==="bool"){const a=n.makeTensorInfo([],"bool",Tn("bool",1)),l=YH({inputs:{a:i,b:a},backend:n});return n.disposeIntermediateTensorInfo(a),l}throw new Error(`Error in Cast: failed to cast ${i.dtype} to ${s}`)}const VMe={kernelName:Wm,backendName:"webgl",kernelFunc:GE};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J4="return ceil(x);",WMe=ot({opSnippet:J4,packedOpSnippet:J4,cpuKernelImpl:XFe}),UMe={kernelName:Um,backendName:"webgl",kernelFunc:WMe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class GMe{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class HMe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qMe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{clipValueMin:s,clipValueMax:a}=r;let o;re().getBool("WEBGL_PACK_CLIP")?o=new HMe(i.shape):o=new GMe(i.shape);const l=[[s],[a]];return n.runWebGLProgram(o,[i],i.dtype,l)}const KMe={kernelName:Gm,backendName:"webgl",kernelFunc:qMe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class XMe{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eL(t,e){return{dataId:e.dataId,dtype:e.dtype,shape:t.shape}}function YMe(t){const{inputs:e,backend:n}=t,{x:r}=e,i=n.texData.get(r.dataId),s=new XMe(r.shape),a=[eL(r,i.complexTensorInfos.real),eL(r,i.complexTensorInfos.imag)];return n.runWebGLProgram(s,a,a[0].dtype)}const QMe={kernelName:wb,backendName:"webgl",kernelFunc:YMe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ZMe{constructor(e){this.outputShape=[],this.outputShape=xa(e,1),this.variableNames=e.map((a,o)=>`T${o}`);const n=new Array(e.length-1);n[0]=e[0][1];for(let a=1;a<n.length;a++)n[a]=n[a-1]+e[a][1];const r=[`if (yC < ${n[0]}) setOutput(getT0(yR, yC));`];for(let a=1;a<n.length;a++){const o=n[a-1];r.push(`else if (yC < ${n[a]}) setOutput(getT${a}(yR, yC-${o}));`)}const i=n.length,s=n[n.length-1];r.push(`else setOutput(getT${i}(yR, yC-${s}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${r.join(`
        `)}
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class JMe{constructor(e,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=xa(e,n);const r=this.outputShape,i=r.length,s=Rt(i),a=Er("coords",i),o=["x","y","z","w","u","v"].slice(0,i);this.variableNames=e.map((y,x)=>`T${x}`);const l=new Array(e.length-1);l[0]=e[0][n];for(let y=1;y<l.length;y++)l[y]=l[y-1]+e[y][n];const c=o[n],u=o.slice(-2),d=o.join();let f=`if (${c} < ${l[0]}) {
        return getChannel(
            getT0(${d}), vec2(${u.join()}));
        }`;for(let y=1;y<l.length;y++){const x=l[y-1];f+=`
        if (${c} < ${l[y]}  && ${c} >= ${l[y-1]}) {
          return getChannel(
            getT${y}(${qv(o,c,x)}),
            vec2(${qv(u,c,x)}));
        }`}const h=l.length,g=l[l.length-1];f+=`
        return getChannel(
          getT${h}(${qv(o,c,g)}),
          vec2(${qv(u,c,g)}));`,this.userCode=`
      float getValue(${o.map(y=>"int "+y)}) {
        ${f}
      }

      void main() {
        ${s} coords = getOutputCoords();
        vec4 result = vec4(getValue(${a}), 0., 0., 0.);

        ${a[i-1]} = ${a[i-1]} + 1;
        if (${a[i-1]} < ${r[i-1]}) {
          result.g = getValue(${a});
        }

        ${a[i-2]} = ${a[i-2]} + 1;
        if (${a[i-2]} < ${r[i-2]}) {
          result.a = getValue(${a});
        }

        ${a[i-1]} = ${a[i-1]} - 1;
        if (${a[i-2]} < ${r[i-2]} &&
            ${a[i-1]} < ${r[i-1]}) {
          result.b = getValue(${a});
        }
        setOutput(result);
      }
    `}}function qv(t,e,n){const r=t.indexOf(e);return t.map((s,a)=>a===r?`${s} - ${n}`:s).join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C2(t){const{inputs:e,backend:n}=t,{input:r}=e,i=n.texData.get(r.dataId);return pi({inputs:{x:i.complexTensorInfos.imag},backend:n})}const e5e={kernelName:qb,backendName:"webgl",kernelFunc:C2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ah(t,e,n){const r=t[0].dtype;if(r==="complex64"){const d=t.map(x=>sy({inputs:{input:x},backend:n})),f=t.map(x=>C2({inputs:{input:x},backend:n})),h=ah(d,e,n),g=ah(f,e,n),y=Ul({inputs:{real:h,imag:g},backend:n});return d.forEach(x=>n.disposeIntermediateTensorInfo(x)),f.forEach(x=>n.disposeIntermediateTensorInfo(x)),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(g),y}let i=n.shouldExecuteOnCPU(t);if(r==="string"&&(i=!0),i){const d=t.map(b=>{const k=[-1,oe(b.shape.slice(e))];return Ce({inputs:{x:b},backend:n,attrs:{shape:k}})}),f=d.map(b=>({vals:n.readSync(b.dataId),shape:b.shape})),h=xa(d.map(b=>b.shape),1),g=d[0].shape[0]===1,y=YFe(f,h,r,g),x=xa(t.map(b=>b.shape),e),v=n.makeTensorInfo(x,r,y);return d.forEach(b=>n.disposeIntermediateTensorInfo(b)),v}const s=re().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(t.length>s){const d=[];for(let h=0;h<t.length;h+=s){const g=t.slice(h,h+s);d.push(ah(g,e,n))}const f=ah(d,e,n);for(const h of d)n.disposeIntermediateTensorInfo(h);return f}if(re().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&t[0].shape.length>1){const d=new JMe(t.map(f=>f.shape),e);return n.runWebGLProgram(d,t,r)}const{tensors2D:a,outShape:o}=t5e(t,e,n),l=new ZMe(a.map(d=>d.shape)),c=n.runWebGLProgram(l,a,r);a.forEach(d=>n.disposeIntermediateTensorInfo(d));const u=Ce({inputs:{x:c},attrs:{shape:o},backend:n});return n.disposeIntermediateTensorInfo(c),u}function t5e(t,e,n){const r=xa(t.map(s=>s.shape),e);return{tensors2D:t.map(s=>Ce({inputs:{x:s},attrs:{shape:[-1,oe(s.shape.slice(e))]},backend:n})),outShape:r}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QH(t){const{inputs:e,backend:n,attrs:r}=t,{axis:i}=r,s=ut(i,e[0].shape)[0],a=e.map(c=>c.shape);uR(a,s);const o=xa(e.map(c=>c.shape),s);if(oe(o)===0)return n.makeTensorInfo(o,e[0].dtype,[]);const l=e.filter(c=>oe(c.shape)>0);return l.length===1?pi({inputs:{x:l[0]},backend:n}):ah(l,s,n)}const n5e={kernelName:Sb,backendName:"webgl",kernelFunc:QH};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ZH{constructor(e,n=!1,r=null,i=!1,s=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const a=e.padInfo.top,o=e.padInfo.left,l=e.strideHeight,c=e.strideWidth,u=e.dilationHeight,d=e.dilationWidth,f=e.filterHeight,h=e.filterWidth,g=Math.floor(e.inChannels/4)*4,y=e.inChannels%4,x=e.dataFormat==="channelsLast",v=x?1:2,b=x?2:3,S=x?3:1;let k="",$="";r&&(i?k=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:s?k=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:k=`
          float activation(float x) {
            ${r}
          }
        `,$="result = activation(result);");const T=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${k}

      const ivec2 strides = ivec2(${l}, ${c});
      const ivec2 pads = ivec2(${a}, ${o});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${S}];

        ivec2 xRCCorner =
            ivec2(coords[${v}], coords[${b}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${f}; wR++) {
          int xR = xRCorner + wR * ${u};

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${h}; wC++) {
            int xC = xCCorner + wC * ${d};

            if (xC < 0 || xC >= ${e.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${g}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${x}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${y===1}) {

              if (${x}) {
                dotProd +=
                    getX(batch, xR, xC, ${g}) *
                    getW(wR, wC, ${g}, d2);
              } else {
                dotProd +=
                    getX(batch, ${g}, xR, xC) *
                    getW(wR, wC, ${g}, d2);
              }

            } else if (${y===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${g}, d2),
                getW(wR, wC, ${g} + 1, d2)
              );

              if (${x}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${g}),
                  getX(batch, xR, xC, ${g} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${g}, xR, xC),
                  getX(batch, ${g} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${y===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${g}, d2),
                getW(wR, wC, ${g} + 1, d2),
                getW(wR, wC, ${g} + 2, d2)
              );

              if (${x}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${g}),
                  getX(batch, xR, xC, ${g} + 1),
                  getX(batch, xR, xC, ${g} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${g}, xR, xC),
                  getX(batch, ${g} + 1, xR, xC),
                  getX(batch, ${g} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${T}
        ${$}
        setOutput(result);
      }
    `}}class r5e{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const n=e.padInfo.front,r=e.padInfo.top,i=e.padInfo.left,s=e.strideDepth,a=e.strideHeight,o=e.strideWidth,l=e.dilationDepth,c=e.dilationHeight,u=e.dilationWidth,d=e.filterDepth,f=e.filterHeight,h=e.filterWidth,g=Math.floor(e.inChannels/4)*4,y=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${s}, ${a}, ${o});
      const ivec3 pads = ivec3(${n}, ${r}, ${i});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${d}; wF++) {
          int xF = xFCorner + wF * ${l};

          if (xF < 0 || xF >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${f}; wR++) {
            int xR = xRCorner + wR * ${c};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${h}; wC++) {
              int xC = xCCorner + wC * ${u};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${g}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${y===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${g}) *
                  getW(wF, wR, wC, ${g}, d2);
              } else if (${y===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${g}),
                  getX(batch, xF, xR, xC, ${g} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${g}, d2),
                  getW(wF, wR, wC, ${g} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${y===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${g}),
                  getX(batch, xF, xR, xC, ${g} + 1),
                  getX(batch, xF, xR, xC, ${g} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${g}, d2),
                  getW(wF, wR, wC, ${g} + 1, d2),
                  getW(wF, wR, wC, ${g} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class JH{constructor(e,n=!1,r=null,i=!1,s=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Nr(this.outputShape.length);const a=e.padInfo.left,o=e.strideWidth,l=e.dilationWidth,c=e.filterHeight,u=e.filterWidth,d=u;let f=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let x=0;x<u;x++)f+=`
           vec4 xTexelC${x*2};
           int xTexelC${x*2}Ready;
           vec4 xTexelC${x*2+1};
           int xTexelC${x*2+1}Ready;
           vec4 xC${x};`;f+=`
     for (int r = 0; r < ${c}; r++) {
      for (int d1 = 0; d1 < ${e.inChannels}; d1 += 2) {
       `;for(let x=0;x<u;x++)f+=`
           xTexelC${x*2} = vec4(0.0);
           xTexelC${x*2}Ready = 0;
           xTexelC${x*2+1} = vec4(0.0);
           xTexelC${x*2+1}Ready = 0;
           xC${x} = vec4(0.0);`;f+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let x=0;x<(d+1)/2;x++){const v=x*2;if(f+=`
           xC = xCCorner + ${v*l};
           `,o===1){if(v<u&&(a%2===1?(f+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v}Ready == 0) {
                   xTexelC${v} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${v}.zw = vec2(0.0);
                   }
                   xTexelC${v}Ready = 1;
                 }
               `,l===1&&v>0?f+=`
                 xC${v} = vec4(xTexelC${v-2}.zw, xTexelC${v}.xy);
                 `:f+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${v} = vec4(previous.zw, xTexelC${v}.xy);
                   } else {
                     xC${v} = vec4(0.0, 0.0, xTexelC${v}.xy);
                   }
                   `):f+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${v}Ready == 0) {
                   xTexelC${v} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${v}.zw = vec2(0.0);
                   }
                   xTexelC${v}Ready = 1;
                 }

                 xC${v} = xTexelC${v};
                 `,v+1<u)){const b=a%2===0?ab(l):l;l%2===0&&a%2===1||l%2!==0&&a%2!==1?(f+=`
                   xCOffset = xC + imod(pads[1], 2) + ${b};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                     xTexelC${v+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${v+1}.zw = vec2(0.0);
                     }
                     xTexelC${v+1}Ready = 1;
                   }
                   `,l>1?f+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${v+1} = vec4(previous.zw, xTexelC${v+1}.xy);
                     } else {
                      xC${v+1} = vec4(0.0, 0.0, xTexelC${v+1}.xy);
                     }
                     `:f+=`
                     xC${v+1} = vec4(xTexelC${v}.zw, xTexelC${v+1}.xy);
                     `):b===1?f+=`
                     xC${v+1} = xTexelC${v};
                     `:f+=`
                     xCOffset = xC + ${b};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                       xTexelC${v+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${v+1}.zw = vec2(0.0);
                       }
                       xTexelC${v+1}Ready = 1;
                     }

                     xC${v+1} = xTexelC${v+1};
                     `}}else v<u&&(a%2===1?(f+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v}Ready == 0) {
                   xTexelC${v} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${v}.zw = vec2(0.0);
                   }
                   xTexelC${v}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${v+1}Ready == 0) {
                   xTexelC${v+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${v+1}.zw = vec2(0.0);
                   }
                   xTexelC${v+1}Ready = 1;
                 }

                 xC${v} = vec4(xTexelC${v}.zw, xTexelC${v+1}.zw);
               `,v+1<u&&(f+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${v+1} = vec4(xTexelC${v+1}.xy, final.xy);
                 `)):(f+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${v}Ready == 0) {
                   xTexelC${v} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${v}.zw = vec2(0.0);
                   }
                   xTexelC${v}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                   xTexelC${v+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${v+1}.zw = vec2(0.);
                   }
                   xTexelC${v+1}Ready = 1;
                 }

                 xC${v} = vec4(
                   xTexelC${v}.xy, xTexelC${v+1}.xy);
               `,v+1<u&&(f+=`
                   xC${v+1} = vec4(xTexelC${v}.zw, xTexelC${v+1}.zw);
                 `)));v<u&&(f+=`
             wTexel = getW(r, ${v}, d1, d2);
             dotProd += xC${v}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${e.inChannels}) {
               dotProd += xC${v}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,v+1<u&&(f+=`
               wTexel = getW(r, ${v+1}, d1, d2);
               dotProd += xC${v+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${e.inChannels}) {
                 dotProd += xC${v+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}f+=`
     }
   `,f+=`
     }
   `,f+=`
     }
   `;let h="",g="";r&&(i?h=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${r}
         }`:s?h=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${r}
         }`:h=`vec4 activation(vec4 x) {
           ${r}
         }`,g="result = activation(result);");const y=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${h}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${f}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${y}
         ${g}
         setOutput(result);
       }
     `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class i5e{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=Nr(this.outputShape.length);const{dataFormat:r}=n,i=Ir(),s=r==="channelsLast",a=s?1:2,o=s?2:3,l=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${e[2]} && pos < ${e[1]}) {`;let c="";for(let u=0;u<=1;u++)for(let d=0;d<=1;d++)c+=`
          blockIndex = rc.z + ${d};
          pos = rc.y + ${u};

          ${l}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${a}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${o}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${s}) {
                  innerDims = vec2(d1, ch);
                  result[${u*2+d}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${u*2+d}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${c}

        ${i.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B1(t,e){const n=t.length;return n>=3?e?[...t.slice(0,-3),t[n-3]*t[n-2],t[n-1]]:[...t.slice(0,-3),t[n-3],t[n-2]*t[n-1]]:!e&&n===1&&t[0]>1?[t[0],1]:null}function e9({x:t,filter:e,convInfo:n,backend:r,bias:i=null,preluActivationWeights:s=null,leakyreluAlpha:a=0,activation:o=null}){const l=t.shape,c=r.texData.get(t.dataId),u=n.inChannels,d=l[0]*l[1]*l[2],f=n.outChannels,h=n.dataFormat==="channelsLast",g=!1,y=!1;let x;const v=[];if(s!=null){const k=B1(s.shape,h);k!=null&&(s=Ce({inputs:{x:s},backend:r,attrs:{shape:k}}),v.push(s))}if(i!=null){const k=B1(i.shape,h);k!=null&&(i=Ce({inputs:{x:i},backend:r,attrs:{shape:k}}),v.push(i))}if(!((d===1||f===1)&&u>HH)&&c.isPacked&&h&&c.texture!=null&&l[2]%2!==0&&$t(c.shape.slice(-3),l.slice(-3))){const k=l[0]*l[1]*(l[2]+1),$={dataId:t.dataId,shape:[1,k,n.inChannels],dtype:t.dtype},T=c.shape;c.shape=c.shape.slice(),c.shape[c.shape.length-2]++,F(D1(c.shape,$.shape),()=>`packed reshape ${c.shape} to ${$.shape} isn't free`);const _=Ce({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}});v.push(_);const R=M1({a:$,b:_,backend:r,transposeA:g,transposeB:y,bias:i,activation:o,preluActivationWeights:s,leakyreluAlpha:a}),P=r.texData.get(R.dataId);F(P.isPacked,()=>"batchMatMul result is expected to be packed"),c.shape=T,P.shape=n.outShape,x=pi({inputs:{x:R},backend:r}),x.shape=n.outShape,v.push(R)}else{const k=n.outHeight*n.outWidth,$=Ce({inputs:{x:t},backend:r,attrs:{shape:h?[n.batchSize,k,n.inChannels]:[n.batchSize,n.inChannels,k]}}),T=Ce({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}}),_=M1({a:h?$:T,b:h?T:$,transposeA:!h,transposeB:y,backend:r,bias:i,activation:o,preluActivationWeights:s,leakyreluAlpha:a});x=Ce({inputs:{x:_},backend:r,attrs:{shape:n.outShape}}),v.push($),v.push(T),v.push(_)}for(const k of v)r.disposeIntermediateTensorInfo(k);return x}function t9({x:t,filter:e,convInfo:n,backend:r,bias:i=null,preluActivationWeights:s=null,leakyreluAlpha:a=0,activation:o=null}){const{filterWidth:l,filterHeight:c,inChannels:u,outWidth:d,outHeight:f,dataFormat:h}=n,g=h==="channelsLast",y=l*c*u,x=f*d,v=[n.batchSize,y,x],b=!0,S=!1,k=[];if(s!=null){const j=B1(s.shape,g);j!=null&&(s=Ce({inputs:{x:s},backend:r,attrs:{shape:j}}),k.push(s))}if(i!=null){const j=B1(i.shape,g);j!=null&&(i=Ce({inputs:{x:i},backend:r,attrs:{shape:j}}),k.push(i))}const $=Ce({inputs:{x:e},backend:r,attrs:{shape:[1,y,oe(e.shape)/y]}});k.push($);const T=new i5e(v,n),_=[t.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],R=r.runWebGLProgram(T,[t],"float32",_),P=Ce({inputs:{x:R},backend:r,attrs:{shape:v}});k.push(R),k.push(P);const O=i!=null,B=s!=null,H=o==="leakyrelu",V=o?hm(o,!0):null,K=new GH(g?P.shape:$.shape,g?$.shape:P.shape,g?[n.batchSize,x,n.outChannels]:[n.batchSize,n.outChannels,x],b,S,O,V,B,H),X=g?[P,$]:[$,P];if(i&&X.push(i),B&&X.push(s),H){const j=r.makeTensorInfo([],"float32",$o(a,"float32"));X.push(j),k.push(j)}const q=r.runWebGLProgram(K,X,"float32"),te=Ce({inputs:{x:q},backend:r,attrs:{shape:n.outShape}});k.push(q);for(const j of k)r.disposeIntermediateTensorInfo(j);return te}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s}=e,{strides:a,pad:o,dataFormat:l,dilations:c,dimRoundingMode:u}=r,d=To(l),f=Fn(i.shape,s.shape,a,c,o,u,!1,d);let h;if(f.filterHeight===1&&f.filterWidth===1&&f.dilationHeight===1&&f.dilationWidth===1&&f.strideHeight===1&&f.strideWidth===1&&(f.padInfo.type==="SAME"||f.padInfo.type==="VALID"))h=e9({x:i,filter:s,convInfo:f,backend:n});else if(f.strideWidth<=2&&d==="channelsLast"&&re().getBool("WEBGL_EXP_CONV")){const y=new JH(f),x=[[f.padInfo.top,f.padInfo.left],[f.strideHeight,f.strideWidth],[f.dilationHeight,f.dilationWidth],[f.inHeight,f.inWidth]];h=n.runWebGLProgram(y,[i,s],"float32",x)}else if(re().getBool("WEBGL_CONV_IM2COL"))h=t9({x:i,filter:s,convInfo:f,backend:n});else{const y=new ZH(f);h=n.runWebGLProgram(y,[i,s],"float32")}const g=Ce({inputs:{x:h},backend:n,attrs:{shape:f.outShape}});return n.disposeIntermediateTensorInfo(h),g}const a5e={kernelName:kb,backendName:"webgl",kernelFunc:s5e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class o5e{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,i=e.padInfo.top,s=e.padInfo.left,a=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${i};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${s};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              if (${a}) {
                float dyValue = getDy(b, yR, yC, d2);
                float xValue = getX(b, xR, xC, d1);
                dotProd += (xValue * dyValue);
              } else {
                float dyValue = getDy(b, d2, yR, yC);
                float xValue = getX(b, d1, xR, xC);
                dotProd += (xValue * dyValue);
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class l5e{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,i=e.strideHeight,s=e.strideWidth,a=e.dataFormat==="channelsLast",o=n-1-e.padInfo.top,l=r-1-e.padInfo.left,c=a?1:2,u=a?2:3,d=a?3:1;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${d}];

        ivec2 dyCorner = ivec2(coords[${c}], coords[${u}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${i}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {

              if (${a}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class c5e{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideDepth,r=e.strideHeight,i=e.strideWidth,s=e.padInfo.front,a=e.padInfo.top,o=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yF = 0; yF < ${e.outDepth}; yF++) {
            int xF = wF + yF * ${n} - ${s};

            if (xF < 0 || xF >= ${e.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${e.outHeight}; yR++) {
              int xR = wR + yR * ${r} - ${a};

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${e.outWidth}; yC++) {
                int xC = wC + yC * ${i} - ${o};

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class u5e{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,i=e.filterWidth,s=e.strideDepth,a=e.strideHeight,o=e.strideWidth,l=n-1-e.padInfo.front,c=r-1-e.padInfo.top,u=i-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${l}, ${c}, ${u});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${n}; wF++) {
          float dyF = float(dyFCorner + wF) / ${s}.0;

          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${n} - 1 - wF;

          for (int wR = 0; wR < ${r}; wR++) {
            float dyR = float(dyRCorner + wR) / ${a}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${r} - 1 - wR;

            for (int wC = 0; wC < ${i}; wC++) {
              float dyC = float(dyCCorner + wC) / ${o}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${i} - 1 - wC;

              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:s}=e,{strides:a,pad:o,dataFormat:l,dimRoundingMode:c,filterShape:u}=r,d=To(l),f=Fn(i.shape,u,a,1,o,c,!1,d),h=new o5e(f);return n.runWebGLProgram(h,[i,s],"float32")}const f5e={kernelName:Cb,backendName:"webgl",kernelFunc:d5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p5e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:s}=e,{inputShape:a,strides:o,pad:l,dataFormat:c,dimRoundingMode:u}=r,d=To(c),f=Fn(a,s.shape,o,1,l,u,!1,d),h=new l5e(f);return n.runWebGLProgram(h,[i,s],"float32")}const h5e={kernelName:$b,backendName:"webgl",kernelFunc:p5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s}=e,{strides:a,pad:o,dilations:l}=r,c=zl(i.shape,s.shape,a,l,o),u=new r5e(c);return n.runWebGLProgram(u,[i,s],"float32")}const g5e={kernelName:Eb,backendName:"webgl",kernelFunc:m5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:s}=e,{strides:a,pad:o,filterShape:l}=r,c=zl(i.shape,l,a,1,o),u=new c5e(c);return n.runWebGLProgram(u,[i,s],"float32")}const v5e={kernelName:VI,backendName:"webgl",kernelFunc:y5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x5e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:s}=e,{pad:a,strides:o,inputShape:l}=r,c=zl(l,s.shape,o,1,a),u=new u5e(c);return n.runWebGLProgram(u,[i,s],"float32")}const b5e={kernelName:Tb,backendName:"webgl",kernelFunc:x5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w5e=Jf+`
  return cos(x);
`,S5e=ot({opSnippet:w5e}),k5e={kernelName:Hm,backendName:"webgl",kernelFunc:S5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C5e=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,$5e=ot({opSnippet:C5e}),E5e={kernelName:qm,backendName:"webgl",kernelFunc:$5e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class T5e{constructor(e,n,r,i,s){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[a,o,l,c]=e,[u]=n,[d,f]=r;this.outputShape=[u,d,f,c];const h=i==="bilinear"?1:0,[g,y]=[`${o-1}.0`,`${l-1}.0`],[x,v,b]=d>1?[`${(o-1)/(d-1)}`,"(y2-y1) * height_ratio",`y1*${g} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${g}`],[S,k,$]=f>1?[`${(l-1)/(f-1)}`,"(x2-x1) * width_ratio",`x1*${y} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${y}`];this.userCode=`
      const float height_ratio = float(${x});
      const float width_ratio = float(${S});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${a}) {
          return;
        }

        float height_scale = ${v};
        float width_scale = ${k};

        float in_y = ${b};
        if( in_y < 0.0 || in_y > ${g} ) {
          setOutput(float(${s}));
          return;
        }
        float in_x = ${$};
        if( in_x < 0.0 || in_x > ${y} ) {
          setOutput(float(${s}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${h} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _5e=t=>{const{inputs:e,backend:n,attrs:r}=t,{image:i,boxes:s,boxInd:a}=e,{cropSize:o,method:l,extrapolationValue:c}=r,u=new T5e(i.shape,s.shape,o,l,c);return n.runWebGLProgram(u,[i,s,a],"float32")},I5e={kernelName:Nb,backendName:"webgl",kernelFunc:_5e};var gm;(function(t){t.Prod="*",t.Sum="+"})(gm||(gm={}));class tL{constructor(e,n,r,i){this.op=e,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const s=this.outputShape.length,a=this.op===gm.Prod?"1.0":"0.0",o=r?a:`getX(${nL(s,"coords",this.op)})`,l=this.outputShape[this.outputShape.length-1];let c="",u="";r?(c=i?`end != ${l-1}`:"end != 0",u=i?"end + 1":"end - 1"):(c=i?`end + pow2 < ${l}`:"end >= pow2",u=i?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${Rt(s)} coords = getOutputCoords();
        int end = ${rL(s,"coords",this.op)};
        float val = ${o};
        int pow2 = int(pow(2.0, index));
        if (${c}) {
          int idx = ${u};
          ${rL(s,"coords",this.op)} = idx;
          val ${this.op}= getX(${nL(s,"coords",this.op)});
        }
        setOutput(val);
      }
    `}}function nL(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.x, ${e}.y`;if(t===3)return`${e}.x, ${e}.y, ${e}.z`;if(t===4)return`${e}.x, ${e}.y, ${e}.z, ${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}function rL(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.y`;if(t===3)return`${e}.z`;if(t===4)return`${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n9(t,e,n,r,i,s){const a=e.shape.length,o=fn([r],a);let l=e;o!=null&&(l=_r({inputs:{x:e},backend:n,attrs:{perm:o}}));const c=pn(1,a)[0];if(c!==a-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${e.shape.length-1} but got axis=${r}`);const u=l.shape[c];let d=pi({inputs:{x:l},backend:n});for(let f=0;f<=Math.ceil(Math.log2(u))-1;f++){const h=new tL(t,l.shape,!1,s),g=[[f]],y=d;d=n.runWebGLProgram(h,[d],d.dtype,g),n.disposeIntermediateTensorInfo(y)}if(i){const f=new tL(t,l.shape,i,s),h=d;d=n.runWebGLProgram(f,[d],d.dtype),n.disposeIntermediateTensorInfo(h)}if(o!=null){const f=Gg(o),h=_r({inputs:{x:d},backend:n,attrs:{perm:f}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(l),h}return d}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,exclusive:a,reverse:o}=r;return n9(gm.Prod,i,n,s,a,o)}const R5e={kernelName:_b,backendName:"webgl",kernelFunc:N5e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,exclusive:a,reverse:o}=r;return n9(gm.Sum,i,n,s,a,o)}const A5e={kernelName:Ib,backendName:"webgl",kernelFunc:O5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,weights:s}=e,{size:a,binaryOutput:o}=r;if(i.shape.length===1){const l=n.readSync(i.dataId),c=n.readSync(s.dataId),u=FH(l,c,s.dtype,s.shape,a);return n.makeTensorInfo([a],s.dtype,u)}else if(i.shape.length===2){const l=n.bufferSync(i),c=n.bufferSync(s),u=qFe(l,c,a,o);return n.makeTensorInfo(u.shape,s.dtype,u.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${i.shape.length}.`)}const D5e={kernelName:Rb,backendName:"webgl",kernelFunc:P5e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class F5e{constructor(e,n,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=n,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${n};
      int offset_h = imod(h, ${n});
      int in_w = w / ${n};
      int offset_w = imod(w, ${n});
      int offset_d = (offset_h * ${n} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockSize:s,dataFormat:a}=r,o=i.shape[0],l=a==="NHWC"?i.shape[1]:i.shape[2],c=a==="NHWC"?i.shape[2]:i.shape[3],u=a==="NHWC"?i.shape[3]:i.shape[1],d=l*s,f=c*s,h=u/(s*s),g=a==="NHWC"?[o,d,f,h]:[o,h,d,f],y=new F5e(g,s,a);return n.runWebGLProgram(y,[i],i.dtype)}const M5e={kernelName:Ob,backendName:"webgl",kernelFunc:L5e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class r9{constructor(e,n=!1,r=null,i=!1,s=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Nr(this.outputShape.length);const a=e.filterHeight,o=e.filterWidth,l=e.outChannels/e.inChannels;let c="",u="";r&&(i?c=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:s?c=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:c=`
          float activation(float x) {
            ${r}
          }
        `,u="result = activation(result);");const d=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${c}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${l};
        int q = d2 - d1 * ${l};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${a}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${o}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${d}
        ${u}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class i9{constructor(e,n=!1,r=null,i=!1,s=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Nr(this.outputShape.length);const a=e.outChannels/e.inChannels,o=e.padInfo.left,l=e.strideWidth,c=e.dilationWidth,u=e.filterHeight,d=e.filterWidth,f=d;let h=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let v=0;v<d;v++)h+=`
          vec4 xTexelC${v*2};
          int xTexelC${v*2}Ready;
          vec4 xTexelC${v*2+1};
          int xTexelC${v*2+1}Ready;
          vec4 xC${v};`;h+=`
    for (int r = 0; r < ${u}; r++) {
      `;for(let v=0;v<d;v++)h+=`
          xTexelC${v*2} = vec4(0.0);
          xTexelC${v*2}Ready = 0;
          xTexelC${v*2+1} = vec4(0.0);
          xTexelC${v*2+1}Ready = 0;
          xC${v} = vec4(0.0);`;h+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let v=0;v<(f+1)/2;v++){const b=v*2;if(h+=`
          xC = xCCorner + ${b*c};
          `,l===1){if(b<d&&(o%2===1?(h+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b}Ready == 0) {
                  xTexelC${b} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${b}.zw = vec2(0.0);
                  }
                  xTexelC${b}Ready = 1;
                }
              `,c===1&&b>0?h+=`
                xC${b} = vec4(xTexelC${b-2}.zw, xTexelC${b}.xy);
                `:h+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${b} = vec4(previous.zw, xTexelC${b}.xy);
                  } else {
                    xC${b} = vec4(0.0, 0.0, xTexelC${b}.xy);
                  }
                  `):h+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${b}Ready == 0) {
                  xTexelC${b} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${b}.zw = vec2(0.0);
                  }
                  xTexelC${b}Ready = 1;
                }

                xC${b} = xTexelC${b};
                `,b+1<d)){const S=o%2===0?ab(c):c;c%2===0&&o%2===1||c%2!==0&&o%2!==1?(h+=`
                  xCOffset = xC + imod(pads[1], 2) + ${S};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                    xTexelC${b+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${b+1}.zw = vec2(0.0);
                    }
                    xTexelC${b+1}Ready = 1;
                  }
                  `,c>1?h+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${b+1} = vec4(previous.zw, xTexelC${b+1}.xy);
                    } else {
                     xC${b+1} = vec4(0.0, 0.0, xTexelC${b+1}.xy);
                    }
                    `:h+=`
                    xC${b+1} = vec4(xTexelC${b}.zw, xTexelC${b+1}.xy);
                    `):S===1?h+=`
                    xC${b+1} = xTexelC${b};
                    `:h+=`
                    xCOffset = xC + ${S};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                      xTexelC${b+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${b+1}.zw = vec2(0.0);
                      }
                      xTexelC${b+1}Ready = 1;
                    }

                    xC${b+1} = xTexelC${b+1};
                    `}}else b<d&&(o%2===1?(h+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b}Ready == 0) {
                  xTexelC${b} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${b}.zw = vec2(0.0);
                  }
                  xTexelC${b}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${b+1}Ready == 0) {
                  xTexelC${b+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${b+1}.zw = vec2(0.0);
                  }
                  xTexelC${b+1}Ready = 1;
                }

                xC${b} = vec4(xTexelC${b}.zw, xTexelC${b+1}.zw);
              `,b+1<d&&(h+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${b+1} = vec4(xTexelC${b+1}.xy, final.xy);
                `)):(h+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${b}Ready == 0) {
                  xTexelC${b} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${b}.zw = vec2(0.0);
                  }
                  xTexelC${b}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                  xTexelC${b+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${b+1}.zw = vec2(0.);
                  }
                  xTexelC${b+1}Ready = 1;
                }

                xC${b} = vec4(
                  xTexelC${b}.xy, xTexelC${b+1}.xy);
              `,b+1<d&&(h+=`
                  xC${b+1} = vec4(xTexelC${b}.zw, xTexelC${b+1}.zw);
                `)));b<d&&(h+=`
            wTexel = getW(r, ${b}, d1, q);
            dotProd += xC${b} * vec4(wTexel.xz, wTexel.xz);
          `,b+1<d&&(h+=`
              wTexel = getW(r, ${b+1}, d1, q);
              dotProd += xC${b+1} * vec4(wTexel.xz, wTexel.xz);
            `))}h+=`
    }
  `,h+=`
      }
    `;let g="",y="";r&&(i?g=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:s?g=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:g=`vec4 activation(vec4 x) {
          ${r}
        }`,y="result = activation(result);");const x=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${g}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${a};
        int q = d2 - d1 * ${a};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${h}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${x}
        ${y}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s}=e,{strides:a,pad:o,dilations:l,dimRoundingMode:c}=r;let u=l;u==null&&(u=[1,1]),F(lr(a,u),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${a} and dilations '${u}'`);const d=Fn(i.shape,s.shape,a,u,o,c,!0);let f;re().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels===1?f=new i9(d):f=new r9(d);const h=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];return n.runWebGLProgram(f,[i,s],"float32",h)}const z5e={kernelName:Ab,backendName:"webgl",kernelFunc:B5e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class j5e{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,i=e.padInfo.top,s=e.padInfo.left,a=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${a} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${i};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${s};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class V5e{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,i=e.strideHeight,s=e.strideWidth,a=n-1-e.padInfo.top,o=r-1-e.padInfo.left,l=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${o});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${i}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${l}; dm++) {
              int d2 = d1 * ${l} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:s}=e,{strides:a,dilations:o,pad:l,dimRoundingMode:c,filterShape:u}=r,d=Fn(i.shape,u,a,o,l,c,!0),f=new j5e(d);return n.runWebGLProgram(f,[i,s],"float32")}const U5e={kernelName:Pb,backendName:"webgl",kernelFunc:W5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G5e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:s}=e,{strides:a,dilations:o,pad:l,dimRoundingMode:c,inputShape:u}=r,d=Fn(u,s.shape,a,o,l,c,!0),f=new V5e(d);return n.runWebGLProgram(f,[i,s],"float32")}const H5e={kernelName:Db,backendName:"webgl",kernelFunc:G5e};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class q5e{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K5e(t){const{inputs:e,backend:n}=t,{x:r}=e,i=[...r.shape,...r.shape],s=oe(r.shape),a=Ce({inputs:{x:r},backend:n,attrs:{shape:[s]}}),o=new q5e(s),l=n.runWebGLProgram(o,[a],a.dtype),c=Ce({inputs:{x:l},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),c}const X5e={kernelName:Fb,backendName:"webgl",kernelFunc:K5e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Y5e{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:n,inWidth:r,padInfo:i,strideHeight:s,strideWidth:a,filterHeight:o,filterWidth:l,dilationHeight:c,dilationWidth:u}=e,{top:d,left:f}=i;this.userCode=`
      const ivec2 strides = ivec2(${s}, ${a});
      const ivec2 pads = ivec2(${d}, ${f});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${o}; h++) {
          int hIn = hBeg + h * ${c};

          if (hIn >= 0 && hIn < ${n}) {
            for (int w = 0; w < ${l}; w++) {
              int wIn = wBeg + w * ${u};

              if (wIn >= 0 && wIn < ${r}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s}=e,{strides:a,pad:o,dilations:l}=r,c=Vg(i.shape,s.shape,a,o,"NHWC",l);let u;const d=new Y5e(c);u=n.runWebGLProgram(d,[i,s],"float32");const f=Ce({inputs:{x:u},backend:n,attrs:{shape:c.outShape}});return n.disposeIntermediateTensorInfo(u),f}const Z5e={kernelName:Lb,backendName:"webgl",kernelFunc:Q5e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J5e(t){const{inputs:e,backend:n,attrs:r}=t,{equation:i}=r,s=e,{allDims:a,summedDims:o,idDims:l}=CR(i,s.length);ER(a.length,l,s);const{path:c,steps:u}=TR(o,l),d=u.length;let f=null,h=a.length;const g=[];for(let y=0;y<d;++y){for(const x of u[y]){const{permutationIndices:v,expandDims:b}=$R(h,l[x]);let S;_R(v)?S=s[x]:(S=_r({inputs:{x:s[x]},backend:n,attrs:{perm:v}}),g.push(S));const k=S.shape.slice();for(let $=0;$<b.length;++$)k.splice(b[$],0,1);$t(S.shape,k)||(S=Ce({inputs:{x:S},backend:n,attrs:{shape:k}}),g.push(S)),f===null?f=S:(f=UR({inputs:{a:S,b:f},backend:n}),g.push(f))}y<d-1&&(c[y]>=0&&(f=k2({inputs:{x:f},backend:n,attrs:{axis:c[y]-(a.length-h),keepDims:!1}}),g.push(f)),h--)}for(const y of g)y!==f&&n.disposeIntermediateTensorInfo(y);return f}const eBe={kernelName:Mb,backendName:"webgl",kernelFunc:J5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tBe="return (x >= 0.0) ? x : (exp(x) - 1.0);",nBe=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,rBe=ot({opSnippet:tBe,packedOpSnippet:nBe}),iBe={kernelName:Xm,backendName:"webgl",kernelFunc:rBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sBe="return (b >= 1.0) ? a : a * (b + 1.0);",aBe=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,oBe=t=>{const{inputs:e,backend:n}=t,{dy:r,y:i}=e,s=re().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new iy(aBe,r.shape,i.shape):new yf(sBe,r.shape,i.shape);return n.runWebGLProgram(s,[r,i],r.dtype)},lBe={kernelName:WI,backendName:"webgl",kernelFunc:oBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cBe=`
  return vec4(equal(a, b));
`,uBe="return float(a == b);",dBe=Qn({opSnippet:uBe,packedOpSnippet:cBe,dtype:"bool",cpuKernelImpl:QFe}),fBe={kernelName:Qm,backendName:"webgl",kernelFunc:dBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pBe=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${yR};
  float a1 = ${vR};
  float a2 = ${xR};
  float a3 = ${bR};
  float a4 = ${wR};
  float a5 = ${SR};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,hBe=ot({opSnippet:pBe}),mBe={kernelName:Ym,backendName:"webgl",kernelFunc:hBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gBe=Jf+`
  return exp(x);
`,yBe=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,s9=ot({opSnippet:gBe,packedOpSnippet:yBe,cpuKernelImpl:ZFe,dtype:"float32"}),vBe={kernelName:Zm,backendName:"webgl",kernelFunc:s9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HE(t){const{inputs:e,attrs:n,backend:r}=t,{dim:i}=n,{input:s}=e,a=s.shape.length,o=s.shape.slice();let l=i;return i<0&&(F(-(a+1)<=i,()=>`Axis must be in the interval [${-(a+1)}, ${a}]`),l=a+i+1),o.splice(l,0,1),Ce({inputs:{x:s},backend:r,attrs:{shape:o}})}const xBe={kernelName:Bb,backendName:"webgl",kernelFunc:HE};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iL="return exp(x) - 1.0;",bBe=ot({opSnippet:iL,packedOpSnippet:iL,cpuKernelImpl:JFe}),wBe={kernelName:Jm,backendName:"webgl",kernelFunc:bBe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class sL{constructor(e,n,r){this.variableNames=["real","imag"];const i=n[1];this.outputShape=n;const s=r?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,a=r?`${i}.0`:"1.0";let o;if(e==="real")o="return real * expR - imag * expI;";else if(e==="imag")o="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);this.userCode=`
      const float exponentMultiplier = ${s};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${o}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${i});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${i}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${a};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a9(t,e,n){const r=n.texData.get(t.dataId),i=oe(t.shape),s=t.shape[t.shape.length-1],a=i/s,o=Ce({inputs:{x:t},backend:n,attrs:{shape:[a,s]}}),l=o.shape,c=new sL("real",l,e),u=new sL("imag",l,e),d=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:l},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:l}],f=n.runWebGLProgram(c,d,"float32"),h=n.runWebGLProgram(u,d,"float32"),g=Ul({inputs:{real:f,imag:h},backend:n});n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h);const y=Ce({inputs:{x:g},backend:n,attrs:{shape:t.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(g),y}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SBe(t){const{inputs:e,backend:n}=t,{input:r}=e;return a9(r,!1,n)}const kBe={kernelName:zb,backendName:"webgl",kernelFunc:SBe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class CBe{constructor(e,n){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ay(t){const{backend:e,attrs:n}=t,{shape:r,value:i}=n;let{dtype:s}=n;if(s=s||jf(i),s==="string"){const a=Cn(s,oe(r));return a.fill(i),e.makeTensorInfo(r,s,a)}else{const a=new CBe(r,i),o=[[i]];return e.runWebGLProgram(a,[],s,o)}}const $Be={kernelName:jb,backendName:"webgl",kernelFunc:ay};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class EBe{constructor(e){this.variableNames=["Image"],this.outputShape=[];const n=e[2];this.outputShape=e,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${n} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${n}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TBe={kernelName:Vb,backendName:"webgl",kernelFunc:({inputs:t,backend:e})=>{const{image:n}=t,r=e,i=new EBe(n.shape);return r.runWebGLProgram(i,[n],n.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aL="return floor(x);",_Be=ot({opSnippet:aL,packedOpSnippet:aL,cpuKernelImpl:e4e}),IBe={kernelName:eg,backendName:"webgl",kernelFunc:_Be};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NBe=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,RBe=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,OBe=Qn({opSnippet:NBe,packedOpSnippet:RBe,dtype:"int32"}),ABe={kernelName:tg,backendName:"webgl",kernelFunc:OBe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class PBe{constructor(e){this.variableNames=["A"];const n=Ir(),[r,i]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${i}.0, ${r}.0);

        vec4 values = ${n.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class DBe{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const n=Ir(),[r,i]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${i}.0, ${r}.0);
            vec4 values = ${n.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FBe={kernelName:S1,backendName:"webgl",kernelFunc:LBe};let Gu,gC=re().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function LBe(t){const{inputs:e,backend:n,attrs:r}=t;let{pixels:i}=e;const{numChannels:s}=r,a=typeof HTMLVideoElement<"u"&&i instanceof HTMLVideoElement,o=typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement,[l,c]=a?[i.videoWidth,i.videoHeight]:[i.width,i.height],u=[c,l],d=[c,l,s];if(o||a){const y=re().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(Gu==null||y!==gC)&&(gC=y,Gu=document.createElement("canvas").getContext("2d",{willReadFrequently:gC})),Gu.canvas.width=l,Gu.canvas.height=c,Gu.drawImage(i,0,0,l,c),i=Gu.canvas}const f=n.makeTensorInfo(u,"int32");n.texData.get(f.dataId).usage=Ci.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(f.dataId),i);const h=re().getBool("WEBGL_PACK")?new DBe(d):new PBe(d),g=n.runWebGLProgram(h,[f],"int32");return n.disposeData(f.dataId),g}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MBe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s,bias:a,preluActivationWeights:o}=e,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:f,activation:h,leakyreluAlpha:g}=r,y=To(u),x=Fn(i.shape,s.shape,l,d,c,f,!1,y);let v;const b=[],S=a!=null,k=o!=null,$=h==="leakyrelu",T=()=>{const R=[i,s],P=(O,B)=>{if(B==="NCHW"&&O.shape.length===1&&O.shape[0]!==1){const H=Ce({inputs:{x:O},backend:n,attrs:{shape:[O.shape[0],1,1]}});return b.push(H),H}return O};if(S&&R.push(P(a,u)),k&&R.push(P(o,u)),$){const O=n.makeTensorInfo([],"float32",$o(g,"float32"));R.push(O),b.push(O)}return R};if(x.filterHeight===1&&x.filterWidth===1&&x.dilationHeight===1&&x.dilationWidth===1&&x.strideHeight===1&&x.strideWidth===1&&(x.padInfo.type==="SAME"||x.padInfo.type==="VALID"))v=e9({x:i,filter:s,convInfo:x,backend:n,bias:a,activation:h,preluActivationWeights:o,leakyreluAlpha:g});else if(x.strideWidth<=2&&y==="channelsLast"&&re().getBool("WEBGL_EXP_CONV")){const R=h?hm(h,!0):null,P=new JH(x,S,R,k,$),O=[[x.padInfo.top,x.padInfo.left],[x.strideHeight,x.strideWidth],[x.dilationHeight,x.dilationWidth],[x.inHeight,x.inWidth]],B=T();v=n.runWebGLProgram(P,B,"float32",O)}else if(re().getBool("WEBGL_CONV_IM2COL"))v=t9({x:i,filter:s,convInfo:x,backend:n,bias:a,activation:h,preluActivationWeights:o,leakyreluAlpha:g});else{const R=h?hm(h,!1):null,P=new ZH(x,S,R,k,$),O=T();v=n.runWebGLProgram(P,O,"float32")}const _=Ce({inputs:{x:v},backend:n,attrs:{shape:x.outShape}});return b.push(v),b.forEach(R=>n.disposeIntermediateTensorInfo(R)),_}const BBe={kernelName:rm,backendName:"webgl",kernelFunc:MBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zBe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s,bias:a,preluActivationWeights:o}=e,{strides:l,pad:c,dilations:u,dimRoundingMode:d,activation:f,leakyreluAlpha:h}=r,g=[];let y=u;y==null&&(y=[1,1]),F(lr(l,y),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${y}'`);const x=Fn(i.shape,s.shape,l,y,c,d,!0),v=re().getBool("WEBGL_PACK_DEPTHWISECONV")&&x.strideWidth<=2&&x.outChannels/x.inChannels===1,b=f?hm(f,v):null,S=[i,s],k=a!=null,$=o!=null,T=f==="leakyrelu";if(k&&S.push(a),$&&S.push(o),T){const O=n.makeTensorInfo([],"float32",$o(h,"float32"));S.push(O),g.push(O)}let _;v?_=new i9(x,k,b,$,T):_=new r9(x,k,b,$,T);const R=[[x.padInfo.top,x.padInfo.left],[x.strideHeight,x.strideWidth],[x.dilationHeight,x.dilationWidth],[x.inHeight,x.inWidth]],P=n.runWebGLProgram(_,S,"float32",R);return g.forEach(O=>n.disposeIntermediateTensorInfo(O)),P}const jBe={kernelName:im,backendName:"webgl",kernelFunc:zBe};class VBe{constructor(e,n,r,i){this.sliceDim=e,this.strides=n,this.paramsShape=i,this.variableNames=["x","indices"],this.outputShape=r;const s=Rt(r.length);let a=`
    int index;`;for(let o=0;o<this.sliceDim;o++)a+=`
          index = round(getIndices(coords[0], ${o}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[o]};
          flattenIndex += index * ${this.strides[o]};`;this.userCode=`
         void main() {
          ${s} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${a}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WBe(t){const{inputs:e,backend:n}=t,{params:r,indices:i}=e,s=i.shape,a=s[s.length-1],o=oe(r.shape),[l,c,u,d]=Xw(r,i),f=Ce({inputs:{x:i},backend:n,attrs:{shape:[c,a]}}),h=Ce({inputs:{x:r},backend:n,attrs:{shape:[oe(r.shape)/u,u]}});if(n.shouldExecuteOnCPU([r,i])||r.dtype==="string"){const v=n.readSync(i.dataId),b=n.bufferSync(r),S=t4e(v,b,r.dtype,c,a,u,d,r.shape,o);return n.makeTensorInfo(l,r.dtype,S.values)}const g=new VBe(a,d,[c,u],r.shape),y=n.runWebGLProgram(g,[h,f],h.dtype),x=Ce({inputs:{x:y},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(y),x}const UBe={kernelName:Gb,backendName:"webgl",kernelFunc:WBe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class GBe{constructor(e,n){this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;const r=Rt(this.rank),i=HBe(e);this.userCode=`
      void main() {
        ${r} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${e[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${i}));
      }
    `}}function HBe(t,e){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let i=0;i<t.length;i++)i===2?r.push("index"):r.push(`${n[i]}`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o9(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,indices:s}=e,{axis:a,batchDims:o}=r,l=ut(a,i.shape)[0];if(re().get("DEBUG")){const b=n.readSync(s.dataId),S=i.shape[l];for(let k=0;k<b.length;++k){const $=b[k];F($<=S-1&&$>=0,()=>`GatherV2: the index value ${$} is not in [0, ${S-1}]`)}}const c=NR(i,s,l,o),u=oe(s.shape),d=[],f=Ce({inputs:{x:i},backend:n,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),h=Ce({inputs:{x:s},backend:n,attrs:{shape:[c.batchSize,u/c.batchSize]}});d.push(f),d.push(h);const g=[c.batchSize,c.outerSize,u/c.batchSize,c.sliceSize];if(n.shouldExecuteOnCPU([i,s])||i.dtype==="string"){const b=n.bufferSync(h),S=n.bufferSync(f),k=n4e(S,b,g);return d.forEach($=>n.disposeIntermediateTensorInfo($)),n.makeTensorInfo(c.outputShape,k.dtype,k.values)}const y=new GBe(f.shape,g),x=n.runWebGLProgram(y,[f,h],f.dtype);d.push(x);const v=Ce({inputs:{x},backend:n,attrs:{shape:c.outputShape}});return d.forEach(b=>n.disposeIntermediateTensorInfo(b)),v}const qBe={kernelName:Ub,backendName:"webgl",kernelFunc:o9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KBe="return float(a > b);",XBe=`
  return vec4(greaterThan(a, b));
`,YBe=Qn({opSnippet:KBe,packedOpSnippet:XBe,cpuKernelImpl:r4e,dtype:"bool"}),QBe={kernelName:ng,backendName:"webgl",kernelFunc:YBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZBe="return float(a >= b);",JBe=`
  return vec4(greaterThanEqual(a, b));
`,eze=Qn({opSnippet:ZBe,packedOpSnippet:JBe,dtype:"bool",cpuKernelImpl:i4e}),tze={kernelName:rg,backendName:"webgl",kernelFunc:eze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nze(t){const{inputs:e,backend:n}=t,{input:r}=e;return a9(r,!0,n)}const rze={kernelName:Hb,backendName:"webgl",kernelFunc:nze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ize="return float(!isnan(x) && !isinf(x));",sze=ot({opSnippet:ize,dtype:"bool"}),aze={kernelName:sg,backendName:"webgl",kernelFunc:sze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oze="return float(isinf(x));",lze=ot({opSnippet:oze,dtype:"bool"}),cze={kernelName:ag,backendName:"webgl",kernelFunc:lze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uze="return float(isnan(x));",dze=ot({opSnippet:uze,dtype:"bool"}),fze={kernelName:og,backendName:"webgl",kernelFunc:dze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pze="return float(a < b);",hze=`
  return vec4(lessThan(a, b));
`,mze=Qn({opSnippet:pze,packedOpSnippet:hze,cpuKernelImpl:s4e,dtype:"bool"}),gze={kernelName:lg,backendName:"webgl",kernelFunc:mze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yze="return float(a <= b);",vze=`
  return vec4(lessThanEqual(a, b));
`,xze=Qn({opSnippet:yze,packedOpSnippet:vze,cpuKernelImpl:a4e,dtype:"bool"}),bze={kernelName:cg,backendName:"webgl",kernelFunc:xze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wze(t){const{backend:e,attrs:n}=t,{start:r,stop:i,num:s}=n,a=o4e(r,i,s);return e.makeTensorInfo([a.length],"float32",a)}const Sze={kernelName:Xb,backendName:"webgl",kernelFunc:wze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kze=Jf+`
  return x < 0.0 ? 0./0. : log(x);
`,Cze=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,$ze=ot({opSnippet:kze,packedOpSnippet:Cze,cpuKernelImpl:l4e}),Eze={kernelName:ug,backendName:"webgl",kernelFunc:$ze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tze=Jf+`
  return log(1.0 + x);
`,_ze=ot({opSnippet:Tze}),Ize={kernelName:dg,backendName:"webgl",kernelFunc:_ze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nze="return float(a >= 1.0 && b >= 1.0);",Rze=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,Oze=Qn({opSnippet:Nze,packedOpSnippet:Rze,dtype:"bool"}),Aze={kernelName:fg,backendName:"webgl",kernelFunc:Oze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pze="return float(!(x >= 1.0));",Dze=ot({opSnippet:Pze}),Fze={kernelName:pg,backendName:"webgl",kernelFunc:Dze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lze="return float(a >= 1.0 || b >= 1.0);",Mze=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,Bze=Qn({opSnippet:Lze,packedOpSnippet:Mze,dtype:"bool"}),zze={kernelName:hg,backendName:"webgl",kernelFunc:Bze};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jze{constructor(e,n,r,i,s){this.variableNames=["x"],this.outputShape=[];const a=n,o=e[3]-1;this.outputShape=e;let l;const c=`float(${r}) + float(${i}) * sum`;s===.5?l=`inversesqrt(${c})`:s===1?l=`1.0/(${c})`:l=`exp(log(${c}) * float(-${s}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${a}; j <= ${a}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${o}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${l};
        setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Vze{constructor(e,n,r,i,s){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const a=n,o=e[3]-1;this.outputShape=e;let l;const c=`float(${r}) + float(${i}) * sum`;s===.5?l=`inversesqrt(${c})`:s===1?l=`1.0/(${c})`:l=`exp(log(${c}) * float(-${s}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${a};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${a}; j <= ${a}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${o}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${l};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wze=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{depthRadius:s,bias:a,alpha:o,beta:l}=r,c=re().getBool("WEBGL_PACK_NORMALIZATION")?new Vze(i.shape,s,a,o,l):new jze(i.shape,s,a,o,l);return n.runWebGLProgram(c,[i],i.dtype)},Uze={kernelName:Yb,backendName:"webgl",kernelFunc:Wze};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Gze{constructor(e,n,r,i,s){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=n,this.bias=r,this.alpha=i,this.beta=s,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${n})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${n} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${i}) * norm + float(${r});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${i})
                * float(${s})
                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${s});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hze=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i,y:s,dy:a}=e,{depthRadius:o,bias:l,alpha:c,beta:u}=r,d=new Gze(i.shape,o,l,c,u);return n.runWebGLProgram(d,[i,s,a],i.dtype)},qze={kernelName:UI,backendName:"webgl",kernelFunc:Hze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kze(t,e,n,r){const i=oe(e),a=oe(t.shape)/i,o=Ce({inputs:{x:t},attrs:{shape:[a,i]},backend:r}),l=Su(o,t.dtype,"max",r),c=Ce({inputs:{x:l},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(l),c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l9(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{reductionIndices:s,keepDims:a}=r,o=i.shape.length,l=ut(s,i.shape);let c=l;const u=fn(c,o),d=u!=null,f=n.shouldExecuteOnCPU([i]);let h=i;if(d){if(f){const S=n.texData.get(h.dataId).values,k=new Array(o);for(let _=0;_<k.length;_++)k[_]=i.shape[u[_]];const $=VR(S,i.shape,i.dtype,u,k);h=n.makeTensorInfo(k,i.dtype);const T=n.texData.get(h.dataId);T.values=$}else h=S2(i,u,n);c=pn(c.length,o)}Yn("max",c,o);const[g,y]=Xn(h.shape,c);let x=g;a&&(x=_n(g,l));let v;if(f){const S=n.texData.get(h.dataId).values,k=c4e(S,oe(y),x,i.dtype);v=n.makeTensorInfo(x,i.dtype);const $=n.texData.get(v.dataId);$.values=k}else v=Kze(h,y,x,n);return d&&n.disposeIntermediateTensorInfo(h),v}const Xze={kernelName:Qb,backendName:"webgl",kernelFunc:l9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yze=WR+`
  return max(a, b);
`,Qze=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+ry+`
  return result;
`,Zze=Qn({opSnippet:Yze,packedOpSnippet:Qze,cpuKernelImpl:u4e}),Jze={kernelName:mg,backendName:"webgl",kernelFunc:Zze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;ty(i,"maxPool");const{filterSize:s,strides:a,pad:o,dimRoundingMode:l}=r,c=1;F(lr(a,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${c}'`);const u=gs(i.shape,s,a,c,o,l);if(u.filterWidth===1&&u.filterHeight===1&&$t(u.inShape,u.outShape))return pi({inputs:{x:i},backend:n});const d=new mm(u,"max",!1);return n.runWebGLProgram(d,[i],i.dtype)}const t6e={kernelName:Zb,backendName:"webgl",kernelFunc:e6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{filterSize:s,strides:a,pad:o,dataFormat:l,dimRoundingMode:c}=r,u=[1,1,1],d=Eo(i.shape,s,a,u,o,c,l),f=new GR(d,"max",!1);return n.runWebGLProgram(f,[i],i.dtype)}const r6e={kernelName:Jb,backendName:"webgl",kernelFunc:n6e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class i6e{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideHeight,r=e.strideWidth,i=e.dilationHeight,s=e.effectiveFilterHeight,a=e.effectiveFilterWidth,o=s-1-e.padInfo.top,l=a-1-e.padInfo.left,c=s*a-1;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${s};
          wR += ${i}) {
          float dyR = float(dyRCorner + wR) / ${n}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${a}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${c} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${a} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class s6e{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideDepth,r=e.strideHeight,i=e.strideWidth,s=e.dilationDepth,a=e.dilationHeight,o=e.dilationWidth,l=e.effectiveFilterDepth,c=e.effectiveFilterHeight,u=e.effectiveFilterWidth,d=l-1-e.padInfo.front,f=c-1-e.padInfo.top,h=u-1-e.padInfo.left,g=l*c*u-1;this.userCode=`
      const ivec3 pads = ivec3(${d}, ${f}, ${h});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${l};
           wD += ${s}) {
          float dyD = float(dyDCorner + wD) / ${n}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${c};
              wR += ${a}) {
            float dyR = float(dyRCorner + wR) / ${r}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${u};
                wC += ${o}) {
              float dyC = float(dyCCorner + wC) / ${i}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${g} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${c} * ${u} +
                  wR * ${u} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a6e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s}=e,a=s,{filterSize:o,strides:l,pad:c,dimRoundingMode:u}=r,d=[1,1,1],f=Eo(a.shape,o,l,d,c,u),h=new GR(f,"max",!0),g=n.runWebGLProgram(h,[a],a.dtype),y=new s6e(f),x=n.runWebGLProgram(y,[i,g],a.dtype);return n.disposeIntermediateTensorInfo(g),x}const o6e={kernelName:HI,backendName:"webgl",kernelFunc:a6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l6e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s,output:a}=e,o=s;ty([s,a],"maxPoolGrad");const{filterSize:l,strides:c,pad:u,dimRoundingMode:d}=r,f=gs(o.shape,l,c,1,u,d),h=!0,g=new mm(f,"max",h),y=n.runWebGLProgram(g,[o],o.dtype),x=new i6e(f),v=n.runWebGLProgram(x,[i,y],o.dtype);return n.disposeIntermediateTensorInfo(y),v}const c6e={kernelName:GI,backendName:"webgl",kernelFunc:l6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u6e(t,e,n,r){let i=new mm(n,"max",!1);const s=r.runWebGLProgram(i,[t],"float32");i=new mm(n,"max",!0,!0,e);const a=r.runWebGLProgram(i,[t],"float32");return[s,a]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d6e={kernelName:ew,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:i,strides:s,pad:a,includeBatchInIndex:o}=e,l=n;F(r.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`);const c=[1,1];F(lr(s,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${c}'`);const u=gs(r.shape,i,s,c,a),[d,f]=u6e(r,o,u,l);return[d,f]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f6e(t,e,n,r){const i=oe(e),a=oe(t.shape)/i,o=Ce({inputs:{x:t},attrs:{shape:[a,i]},backend:r}),l=Su(o,"float32","mean",r),c=Ce({inputs:{x:l},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(l),c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p6e={kernelName:tw,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{keepDims:i,axis:s}=e,a=n,o=r.shape.length,l=ut(s,r.shape);let c=l;const u=fn(c,o),d=u!=null,f=a.shouldExecuteOnCPU([r]),h=[];let g=r;if(d){if(f){const k=a.texData.get(g.dataId).values,$=new Array(o);for(let R=0;R<$.length;R++)$[R]=r.shape[u[R]];const T=VR(k,r.shape,r.dtype,u,$);g=a.makeTensorInfo($,r.dtype);const _=a.texData.get(g.dataId);_.values=T}else g=S2(r,u,a);h.push(g),c=pn(c.length,o)}Yn("sum",c,o);const[y,x]=Xn(g.shape,c);let v=y;i&&(v=_n(y,l));const b=f6e(g,x,v,a);for(const S of h)a.disposeIntermediateTensorInfo(S);return b}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:a}=r,o=i.shape.length,l=ut(s,i.shape);let c=l;const u=fn(c,o);let d=i;u!=null&&(d=_r({inputs:{x:i},backend:n,attrs:{perm:u}}),c=pn(c.length,i.shape.length)),Yn("min",c,o);const[f,h]=Xn(d.shape,c),g=oe(h),y=Ce({inputs:{x:d},backend:n,attrs:{shape:[-1,g]}}),x=Su(y,y.dtype,"min",n);let v;if(a){const b=_n(f,l);v=Ce({inputs:{x},backend:n,attrs:{shape:b}})}else v=Ce({inputs:{x},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(x),u!=null&&n.disposeIntermediateTensorInfo(d),v}const m6e={kernelName:nw,backendName:"webgl",kernelFunc:h6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g6e=WR+`
  return min(a, b);
`,y6e=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+ry+`
  return result;
`,v6e=Qn({opSnippet:g6e,packedOpSnippet:y6e,cpuKernelImpl:d4e}),x6e={kernelName:gg,backendName:"webgl",kernelFunc:v6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class b6e{constructor(e,n,r){this.variableNames=["x"],this.outputShape=n.map((u,d)=>u[0]+e[d]+u[1]);const i=e.length,s=Rt(i),a=n.map(u=>u[0]).join(","),o=n.map((u,d)=>u[0]+e[d]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,i),c=r==="reflect"?0:1;if(i===1){this.userCode=`
        int start = ${a};
        int end = ${o};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${c};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${c};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${s} start = ${s}(${a});
      ${s} end = ${s}(${o});

      void main() {
        ${s} outC = getOutputCoords();
        for (int i = 0; i < ${i}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${c};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${c};
          }
        }
        ${s} coords = outC - start;
        setOutput(getX(${l}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class w6e{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((g,y)=>g[0]+e[y]+g[1]);const i=e.length,s=Rt(i),a=n.map(g=>g[0]).join(","),o=n.map((g,y)=>g[0]+e[y]).join(","),l=Er("rc",i),c=Er("source",i),u=`${l[i-1]} < ${this.outputShape[i-1]}`,d=i===1?"source":`vec2(${c.slice(-2).join()})`,f=r==="reflect"?0:1;let h="";if(i===1){const g=`
        ${s} source = rc;
        if (source < start) {
          source = start * 2 - source - ${f};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${f};
        }
        source -= start;
      `;h=`
        ${s} rc = outputLoc;
        ${g}
        result[0] = getChannel(getX(${c.join()}), ${d});
        ${l[i-1]} += 1;
        if(${u}) {
          ${g}
          result[1] = getChannel(getX(${c.join()}), ${d});
        }
      `}else{const g=`
        ${s} source = rc;
        ${s} lt = ${s}(lessThan(source, start));
        ${s} gte = ${s}(greaterThanEqual(source, end));
        ${s} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${f}) +
                gte * ((end - 1) * 2 - source + ${f});
        source -= start;
      `;h=`
        ${s} rc = outputLoc;
        ${g}
        result[0] = getChannel(getX(${c.join()}), ${d});
        ${l[i-1]} += 1;
        if(${u}) {
          ${g}
          result[1] = getChannel(getX(${c.join()}), ${d});
        }
        rc = outputLoc;
        ${l[i-2]} += 1;
        if(${l[i-2]} < ${this.outputShape[i-2]}) {
          ${g}
          result[2] = getChannel(getX(${c.join()}), ${d});
          ${l[i-1]} += 1;
          if(${u}) {
            ${g}
            result[3] = getChannel(getX(${c.join()}), ${d});
          }
        }
      `}this.userCode=`
      const ${s} start = ${s}(${a});
      const ${s} end = ${s}(${o});

      void main() {
        ${s} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${h}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S6e=({inputs:t,backend:e,attrs:n})=>{const{x:r}=t,{paddings:i,mode:s}=n,a=re().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new w6e(r.shape,i,s):new b6e(r.shape,i,s);return e.runWebGLProgram(a,[r],r.dtype)},k6e={kernelName:rw,backendName:"webgl",kernelFunc:S6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C6e=`if (b == 0.0) return NAN;
  return mod(a, b);`,$6e=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+ry+`
  return result;
`,E6e=Qn({opSnippet:C6e,packedOpSnippet:$6e}),T6e={kernelName:yg,backendName:"webgl",kernelFunc:E6e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _6e{constructor(e,n,r){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,r],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${n-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${n-1}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I6e=`
if (a == b) {
  return 1.0;
};
return a / b;`,N6e=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,c9=Qn({opSnippet:I6e,packedOpSnippet:N6e,checkOutOfBounds:!0}),R6e={kernelName:Km,backendName:"webgl",kernelFunc:c9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oL="return a - b;",u9=Qn({opSnippet:oL,packedOpSnippet:oL,supportsComplex:!0,cpuKernelImpl:N4e}),O6e={kernelName:Pg,backendName:"webgl",kernelFunc:u9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d9(t){const{inputs:e,backend:n,attrs:r}=t,{logits:i}=e,{dim:s}=r,a=ut([s],i.shape),o=l9({inputs:{x:i},backend:n,attrs:{reductionIndices:a,keepDims:!1}}),l=_n(o.shape,a),c=Ce({inputs:{x:o},backend:n,attrs:{shape:l}}),u=u9({inputs:{a:i,b:c},backend:n}),d=s9({inputs:{x:u},backend:n}),f=k2({inputs:{x:d},backend:n,attrs:{axis:a,keepDims:!1}}),h=Ce({inputs:{x:f},backend:n,attrs:{shape:l}}),g=c9({inputs:{a:d,b:h},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),g}const A6e={kernelName:Nw,backendName:"webgl",kernelFunc:d9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P6e(t){const{inputs:e,backend:n,attrs:r}=t,{logits:i}=e,{numSamples:s,seed:a,normalized:o}=r,l=o?i:d9({inputs:{logits:i},backend:n,attrs:{dim:i.shape.length-1}}),c=l.shape[0],u=l.shape[1],d=new _6e(c,u,s),f=[[a]],h=n.runWebGLProgram(d,[l],"int32",f);return o||n.disposeIntermediateTensorInfo(l),h}const D6e={kernelName:iw,backendName:"webgl",kernelFunc:P6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F6e=vs+`
  return -x;
`,L6e=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function M6e(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])){const s=n.texData.get(r.dataId),[a,o]=p4e(s.values,r.shape,r.dtype);return n.makeTensorInfo(o,r.dtype,a)}let i;return re().getBool("WEBGL_PACK_UNARY_OPERATIONS")?i=new Sc(r.shape,L6e):i=new Za(r.shape,F6e),n.runWebGLProgram(i,[r],r.dtype)}const B6e={kernelName:sw,backendName:"webgl",kernelFunc:M6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const z6e=c2;function j6e(t){Si("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:s}=e,{maxOutputSize:a,iouThreshold:o,scoreThreshold:l}=r,c=n.readSync(i.dataId),u=n.readSync(s.dataId),{selectedIndices:d}=z6e(c,u,a,o,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}const V6e={kernelName:aw,backendName:"webgl",kernelFunc:j6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W6e=u2;function U6e(t){Si("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:s}=e,{maxOutputSize:a,iouThreshold:o,scoreThreshold:l,padToMaxOutputSize:c}=r,u=n.readSync(i.dataId),d=n.readSync(s.dataId),{selectedIndices:f,validOutputs:h}=W6e(u,d,a,o,l,c);return[n.makeTensorInfo([f.length],"int32",new Int32Array(f)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}const G6e={kernelName:ow,backendName:"webgl",kernelFunc:U6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H6e=d2;function q6e(t){Si("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:s}=e,{maxOutputSize:a,iouThreshold:o,scoreThreshold:l,softNmsSigma:c}=r,u=n.readSync(i.dataId),d=n.readSync(s.dataId),f=a,h=o,g=l,y=c,{selectedIndices:x,selectedScores:v}=H6e(u,d,f,h,g,y);return[n.makeTensorInfo([x.length],"int32",new Int32Array(x)),n.makeTensorInfo([v.length],"float32",new Float32Array(v))]}const K6e={kernelName:lw,backendName:"webgl",kernelFunc:q6e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class X6e{constructor(e,n,r,i){this.variableNames=["indices"],this.outputShape=[e,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${i}), float(${r}),
                      float(index == coords.y)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y6e=t=>{const{inputs:e,backend:n,attrs:r}=t,{indices:i}=e,{dtype:s,depth:a,onValue:o,offValue:l}=r,c=oe(i.shape),u=new X6e(c,a,o,l),d=Ce({inputs:{x:i},backend:n,attrs:{shape:[c]}}),f=n.runWebGLProgram(u,[d],s);n.disposeIntermediateTensorInfo(d);const h=[...i.shape,a],g=Ce({inputs:{x:f},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(f),g},Q6e={kernelName:uw,backendName:"webgl",kernelFunc:Y6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z1(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="complex64"){const i=sy({inputs:{input:r},backend:n}),s=z1({inputs:{x:i},backend:n}),a=C2({inputs:{input:r},backend:n}),o=z1({inputs:{x:a},backend:n}),l=Ul({inputs:{real:s,imag:o},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),l}else return ay({attrs:{shape:r.shape,dtype:r.dtype,value:r.dtype==="string"?"":0},backend:n})}const Z6e={kernelName:Gw,backendName:"webgl",kernelFunc:z1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f9(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(r.dtype==="complex64"){const i=sy({inputs:{input:r},backend:n}),s=f9({inputs:{x:i},backend:n}),a=C2({inputs:{input:r},backend:n}),o=z1({inputs:{x:a},backend:n}),l=Ul({inputs:{real:s,imag:o},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),l}else return ay({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:n})}const J6e={kernelName:cw,backendName:"webgl",kernelFunc:f9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eje(t){const{inputs:e,backend:n,attrs:r}=t,{axis:i}=r;if(e.length===1)return HE({inputs:{input:e[0]},backend:n,attrs:{dim:i}});const s=e[0].shape,a=e[0].dtype;e.forEach(u=>{Kn(s,u.shape,"All tensors passed to stack must have matching shapes"),F(a===u.dtype,()=>"All tensors passed to stack must have matching dtypes")});const o=[],l=e.map(u=>{const d=HE({inputs:{input:u},backend:n,attrs:{dim:i}});return o.push(d),d}),c=QH({inputs:l,backend:n,attrs:{axis:i}});return o.forEach(u=>n.disposeIntermediateTensorInfo(u)),c}const tje={kernelName:dw,backendName:"webgl",kernelFunc:eje};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nje{constructor(e,n,r){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((c,u)=>c[0]+e[u]+c[1]);const i=e.length,s=Rt(i),a=n.map(c=>c[0]).join(","),o=n.map((c,u)=>c[0]+e[u]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,i);if(i===1){this.userCode=`
        int start = ${a};
        int end = ${o};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${s} start = ${s}(${a});
      ${s} end = ${s}(${o});

      void main() {
        ${s} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${s} coords = outC - start;
          setOutput(getX(${l}));
        }
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rje{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((y,x)=>y[0]+e[x]+y[1]);const i=e.length,s=Rt(i),a=n.map(y=>y[0]).join(","),o=n.map((y,x)=>y[0]+e[x]).join(","),l=Er("rc",i),c=Er("source",i),u=`${l[i-1]} < ${this.outputShape[i-1]}`,d=i===1?"source":`vec2(${c.slice(-2).join()})`,f=[`${s} rc = outputLoc;`,`${l[i-1]} += 1;
       if(${u}) {
      `,i===1?"":`}
       rc = outputLoc;
       ${l[i-2]} += 1;
       if(${l[i-2]} < ${this.outputShape[i-2]}) {`,i===1?"":`  ${l[i-1]} += 1;
         if(${u}) {`],h=i===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let g="";for(let y=0,x=i===1?2:4;y<x;y++)g+=`
        ${f[y]}
        if (${h}) {
          result[${y}] = float(value);
        } else {
          ${s} source = rc - start;
          result[${y}] = getChannel(getX(${c.join()}), ${d});
        }
      `;g+=i===1?"} ":"}}",this.userCode=`
      const ${s} start = ${s}(${a});
      const ${s} end = ${s}(${o});

      void main() {
        ${s} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${g}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p9=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{paddings:s,constantValue:a}=r;if(oe(i.shape)===0){const c=s.map((u,d)=>u[0]+i.shape[d]+u[1]);return ay({backend:n,attrs:{shape:c,value:a,dtype:i.dtype}})}const o=re().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new rje(i.shape,s,a):new nje(i.shape,s,a),l=[[a]];return n.runWebGLProgram(o,[i],i.dtype,l)},ije={kernelName:fw,backendName:"webgl",kernelFunc:p9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sje=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,aje=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+ry+`
  return result;
`,oje=Qn({opSnippet:sje,packedOpSnippet:aje}),lje={kernelName:bg,backendName:"webgl",kernelFunc:oje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cje(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:a}=r,o=i.shape.length,l=[],c=ut(s,i.shape);let u=c;const d=fn(u,o);let f=i;d!=null&&(f=_r({inputs:{x:i},backend:n,attrs:{perm:d}}),u=pn(u.length,o),l.push(f)),Yn("prod",u,o);let h;if(n.shouldExecuteOnCPU([f])){const g=n.texData.get(f.dataId).values,{outVals:y,outShape:x,outDtype:v}=m4e(f.shape,f.dtype,g,u);h=n.makeTensorInfo(x,v,y)}else{const[g,y]=Xn(f.shape,u),x=oe(y),v=Ce({inputs:{x:f},backend:n,attrs:{shape:[-1,x]}}),b=Kw(i.dtype),S=Su(v,b,"prod",n);h=Ce({inputs:{x:S},backend:n,attrs:{shape:g}}),l.push(v),l.push(S)}if(a){l.push(h);const g=_n(h.shape,c);h=Ce({inputs:{x:h},backend:n,attrs:{shape:g}})}return l.forEach(g=>n.disposeIntermediateTensorInfo(g)),h}const uje={kernelName:hw,backendName:"webgl",kernelFunc:cje};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dje(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:i,paramsDenseValues:s,indices:a}=e,{outputRaggedRank:o}=r,l=i.map(v=>n.readSync(v.dataId)),c=i.map(v=>v.shape),u=n.readSync(s.dataId),d=n.readSync(a.dataId),[f,h,g]=g4e(l,c,u,s.shape,s.dtype,d,a.shape,o),y=f.map(v=>n.makeTensorInfo([v.length],"int32",v)),x=n.makeTensorInfo(g,s.dtype,h);return y.concat([x])}const fje={kernelName:mw,backendName:"webgl",kernelFunc:dje};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pje(t){const{inputs:e,backend:n,attrs:r}=t,{shape:i,values:s,defaultValue:a,rowPartitionTensors:o}=e,{rowPartitionTypes:l}=r,c=n.readSync(i.dataId),u=n.readSync(s.dataId),d=n.readSync(a.dataId),f=o.map(x=>n.readSync(x.dataId)),h=o.map(x=>x.shape),[g,y]=y4e(c,i.shape,u,s.shape,s.dtype,d,a.shape,f,h,l);return n.makeTensorInfo(g,s.dtype,y)}const hje={kernelName:gw,backendName:"webgl",kernelFunc:pje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h9=t=>{const{backend:e,attrs:n}=t,{start:r,stop:i,step:s,dtype:a}=n,o=v4e(r,i,s,a);return e.makeTensorInfo([o.length],a,o)},mje={kernelName:yw,backendName:"webgl",kernelFunc:h9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gje="return 1.0 / x;",yje=ot({opSnippet:gje}),vje={kernelName:wg,backendName:"webgl",kernelFunc:yje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xje=vs+`
  return (x < 0.0) ? 0.0 : x;
`,bje=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,wje=ot({opSnippet:xje,packedOpSnippet:bje}),Sje={kernelName:Sg,backendName:"webgl",kernelFunc:wje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kje=vs+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,Cje=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,$je=ot({opSnippet:kje,packedOpSnippet:Cje}),Eje={kernelName:kg,backendName:"webgl",kernelFunc:$je};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Tje{constructor(e,n,r,i,s){this.variableNames=["A"],this.outputShape=[];const[a,o,l,c]=e;this.outputShape=[a,n,r,c];const u=[i&&n>1?o-1:o,i&&r>1?l-1:l],d=[i&&n>1?n-1:n,i&&r>1?r-1:r];let f;s?f="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":f="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${u[0]/d[0]},
          ${u[1]/d[1]});
      const vec2 inputShapeRC = vec2(${o}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${f};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _je{constructor(e,n,r,i,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[a,o,l,c]=e;this.outputShape=[a,n,r,c];const u=[i&&n>1?o-1:o,i&&r>1?l-1:l],d=[i&&n>1?n-1:n,i&&r>1?r-1:r];let f;s?f="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":f="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${u[0]/d[0]},
          ${u[1]/d[1]},
          ${u[1]/d[1]});
      const vec3 inputShapeRC = vec3(${o}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${f};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${r-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ije(t){const{inputs:e,backend:n,attrs:r}=t,{images:i}=e,{alignCorners:s,halfPixelCenters:a,size:o}=r,[l,c]=o,u=re().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new _je(i.shape,l,c,s,a):new Tje(i.shape,l,c,s,a);return n.runWebGLProgram(u,[i],"float32")}const Nje={kernelName:ww,backendName:"webgl",kernelFunc:Ije};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Rje{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,i,s]=n,[,a,o]=e,l=[r&&a>1?i-1:i,r&&o>1?s-1:s],c=[r&&a>1?a-1:a,r&&o>1?o-1:o],u=l[0]/c[0],d=l[1]/c[1],f=1/u,h=1/d,g=Math.ceil(f)*2+2,y=Math.ceil(h)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${u});
        const float widthScale = float(${d});

        const float invHeightScale = float(${f});
        const float invWidthScale = float(${h});

        const int winHeight = int(${g});
        const int winWidth = int(${y});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${a}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${o}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${i-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${s-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oje(t){const{inputs:e,backend:n,attrs:r}=t,{images:i,dy:s}=e,{alignCorners:a}=r,o=new Rje(s.shape,i.shape,a);return n.runWebGLProgram(o,[s],s.dtype)}const Aje={kernelName:KI,backendName:"webgl",kernelFunc:Oje};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Pje{constructor(e,n,r,i,s){this.variableNames=["A"],this.outputShape=[];const[a,o,l,c]=e;this.outputShape=[a,n,r,c];const u=[i&&n>1?o-1:o,i&&r>1?l-1:l],d=[i&&n>1?n-1:n,i&&r>1?r-1:r],f=i?"0.5":"0.0";let h;s?h="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":h="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${u[0]/d[0]},
          ${u[1]/d[1]});
      const vec2 inputShapeRC = vec2(${o}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${h};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${f})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Dje{constructor(e,n,r,i,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[a,o,l,c]=e;this.outputShape=[a,n,r,c];const u=[i&&n>1?o-1:o,i&&r>1?l-1:l],d=[i&&n>1?n-1:n,i&&r>1?r-1:r],f=i?"0.5":"0.0";let h;s?h="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":h="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${u[0]/d[0]},
          ${u[1]/d[1]},
          ${u[1]/d[1]});
      const vec3 inputShapeRC = vec3(${o}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${h};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${f})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${r-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fje(t){const{inputs:e,backend:n,attrs:r}=t,{images:i}=e,{alignCorners:s,halfPixelCenters:a,size:o}=r,[l,c]=o,u=re().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Dje(i.shape,l,c,s,a):new Pje(i.shape,l,c,s,a);return n.runWebGLProgram(u,[i],i.dtype)}const Lje={kernelName:bw,backendName:"webgl",kernelFunc:Fje};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Mje{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,i,s]=n,[,a,o]=e,l=[r&&a>1?i-1:i,r&&o>1?s-1:s],c=[r&&a>1?a-1:a,r&&o>1?o-1:o],u=l[0]/c[0],d=l[1]/c[1],f=1/u,h=1/d,g=Math.ceil(f)*2+2,y=Math.ceil(h)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${u});
        const float widthScale = float(${d});

        const float invHeightScale = float(${f});
        const float invWidthScale = float(${h});

        const int winHeight = int(${g});
        const int winWidth = int(${y});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${a}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${o}) {
              continue;
            }

            float sourceFracRow =
              float(${l[0]}) *
                (float(dyR) / float(${c[0]}));

            float sourceFracCol =
                float(${l[1]}) *
                  (float(dyC) / float(${c[1]}));

            int sourceNearestRow = int(min(
                float(int(${i}) - 1),
                ${r} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${s}) - 1),
                ${r} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bje(t){const{inputs:e,backend:n,attrs:r}=t,{images:i,dy:s}=e,{alignCorners:a}=r,o=new Mje(s.shape,i.shape,a);return n.runWebGLProgram(o,[s],s.dtype)}const zje={kernelName:qI,backendName:"webgl",kernelFunc:Bje};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jje{constructor(e,n){this.variableNames=["x"];const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);if(this.outputShape=e,r===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${e[0]} - coord - 1));
        }
      `;return}const i=o=>n.indexOf(o)!==-1&&e[o]!==1?`${e[o]} - coords[${o}] - 1`:`coords[${o}]`,s=e.map((o,l)=>i(l)).join(","),a=Rt(r);this.userCode=`
      void main() {
        ${a} coords = getOutputCoords();
        setOutput(getX(${s}));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Vje{constructor(e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);this.outputShape=e;const i=Er("rc",r),s=`${i[r-1]} + 1 < ${this.outputShape[r-1]}`,a=`${i[r-2]} + 1 < ${this.outputShape[r-2]}`,o=Rt(r);r===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${e[0]} - rc - 1),
            ${e[0]} - rc - 1);
          if(${s}){
              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),
                ${e[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${o} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${l(i.slice())};
          if(${s}){
            result.g = ${c(i.slice())};
          }
          if(${a}) {
            result.b = ${u(i.slice())};
            if(${s}) {
              result.a = ${d(i.slice())};
            }
          }
          setOutput(result);
        }
    `;function l(g){return f(g)}function c(g){return g[r-1]="("+g[r-1]+" + 1)",f(g)}function u(g){return g[r-2]="("+g[r-2]+" + 1)",f(g)}function d(g){return g[r-1]="("+g[r-1]+" + 1)",g[r-2]="("+g[r-2]+" + 1)",f(g)}function f(g){const y=e.map((b,S)=>h(S,g)),x=y.join(","),v=y.slice(-2).join(",");return`getChannel(getX(${x}), vec2(${v}))`}function h(g,y){return n.indexOf(g)!==-1&&e[g]!==1?`${e[g]} - ${y[g]} - 1`:`${y[g]}`}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wje(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{dims:s}=r,a=i.shape.length,o=ut(s,i.shape);if(a===0)return pi({inputs:{x:i},backend:n});const l=re().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Vje(i.shape,o):new jje(i.shape,o);return n.runWebGLProgram(l,[i],i.dtype)}const Uje={kernelName:Sw,backendName:"webgl",kernelFunc:Wje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Gje{constructor(e,n){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const r=e[1],i=e[2];this.outputShape=e;let s="";typeof n=="number"?s=`float outputValue = ${n.toFixed(2)};`:s=`
        vec3 fill = vec3(${n.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${s}
          if(coordX >= 0 && coordX < ${i} && coordY >= 0 && coordY < ${r}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hje={kernelName:Hw,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:i,fillValue:s,center:a}=e,o=n,l=new Gje(r.shape,s),[c,u]=fR(a,r.shape[1],r.shape[2]),d=[[c,u,Math.sin(i),Math.cos(i)]];return o.runWebGLProgram(l,[r],r.dtype,d)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qje=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,Kje=ot({opSnippet:qje}),Xje={kernelName:Cg,backendName:"webgl",kernelFunc:Kje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yje="return inversesqrt(x);",Qje=ot({opSnippet:Yje,cpuKernelImpl:x4e}),Zje={kernelName:$g,backendName:"webgl",kernelFunc:Qje};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class m9{constructor(e,n,r,i,s,a,o=!0){this.variableNames=["updates","indices","defaultValue"],this.outputShape=a;const l=Rt(s.length),c=Rt(a.length);let u="";r===1?u="i":r===2&&(u="i, j");const d=`getIndices(${u})`;let f="";i===1?f="i":i===2&&(f="i, coords[1]");const h=`getUpdates(${f})`,g=n>1?"strides[j]":"strides";this.userCode=`
        ${l} strides = ${l}(${s});

        void main() {
          ${c} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${e}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${n}; j++) {
              int index = round(${d});
              flattenedIndex += index * ${g};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${h};
              found = true;
            }
          }
          setOutput(mix(getDefaultValue(), sum, float(found)));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jje(t){const{inputs:e,backend:n,attrs:r}=t,{indices:i,updates:s}=e,{shape:a}=r,{sliceRank:o,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=Wf(s,i,a),f=[d/c,c];if(d===0)return n.makeTensorInfo(a,i.dtype);const h=Ce({inputs:{x:i},backend:n,attrs:{shape:[l,o]}}),g=Ce({inputs:{x:s},backend:n,attrs:{shape:[l,c]}}),y=n.makeTensorInfo([],"float32",new Float32Array([0])),x=new m9(l,o,h.shape.length,g.shape.length,u,f),v=n.runWebGLProgram(x,[g,h,y],g.dtype),b=Ce({inputs:{x:v},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(y),b}const eVe={kernelName:kw,backendName:"webgl",kernelFunc:Jje};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tVe{constructor(e,n,r,i){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,r];const s="while (left < right) {",a=`for (int i = 0; i < ${Math.ceil(Math.log2(n+1))}; ++i) { if (left >= right) break;`,o=re().getNumber("WEBGL_VERSION")===2?s:a,l=i==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${o}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${l} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nVe(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:i,values:s}=e,{side:a}=r,o=new tVe(i.shape[0],i.shape[1],s.shape[1],a),l=[[i.shape[1]]];return n.runWebGLProgram(o,[i,s],"int32",l)}const rVe={kernelName:Cw,backendName:"webgl",kernelFunc:nVe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class iVe{constructor(e,n,r){this.variableNames=["c","a","b"],this.outputShape=n;let i,s;if(r>4)throw Error(`Where for rank ${r} is not yet supported`);if(r===1)s="resRC",i="resRC";else{const o=["resRC.x","resRC.y","resRC.z","resRC.w"],l=[],c=[];for(let u=0;u<n.length;u++)c.push(`${o[u]}`),u<e&&l.push(`${o[u]}`);i=l.join(),s=c.join()}const a=Rt(r);this.userCode=`
      void main() {
        ${a} resRC = getOutputCoords();
        float cVal = getC(${i});
        if (cVal >= 1.0) {
          setOutput(getA(${s}));
        } else {
          setOutput(getB(${s}));
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sVe(t){const{inputs:e,backend:n}=t,{condition:r,t:i,e:s}=e,a=new iVe(r.shape.length,i.shape,i.shape.length);return n.runWebGLProgram(a,[r,i,s],Br(i.dtype,s.dtype))}const aVe={kernelName:$w,backendName:"webgl",kernelFunc:sVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oVe=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${mR};
  float scale = ${gR};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,lVe=ot({opSnippet:oVe}),cVe={kernelName:Eg,backendName:"webgl",kernelFunc:lVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uVe=Jf+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,dVe=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,fVe=ot({opSnippet:uVe,packedOpSnippet:dVe,cpuKernelImpl:w4e}),pVe={kernelName:Ng,backendName:"webgl",kernelFunc:fVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hVe=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,mVe=ot({opSnippet:hVe}),gVe={kernelName:Ig,backendName:"webgl",kernelFunc:mVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yVe=Jf+`
  return sin(x);
`,vVe=ot({opSnippet:yVe}),xVe={kernelName:Tg,backendName:"webgl",kernelFunc:vVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bVe=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,wVe=ot({opSnippet:bVe}),SVe={kernelName:_g,backendName:"webgl",kernelFunc:wVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kVe=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,CVe=ot({opSnippet:kVe}),$Ve={kernelName:Rg,backendName:"webgl",kernelFunc:CVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EVe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockShape:s,paddings:a}=r;F(i.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const o=s.reduce((v,b)=>v*b),l=[[0,0]];l.push(...a);for(let v=1+s.length;v<i.shape.length;++v)l.push([0,0]);const c=[],u=p9({inputs:{x:i},backend:n,attrs:{paddings:l,constantValue:0}}),d=Qg(u.shape,s,o,!1),f=Zg(d.length,s.length,!1),h=Jg(u.shape,s,o,!1),g=Ce({inputs:{x:u},backend:n,attrs:{shape:d}}),y=_r({inputs:{x:g},backend:n,attrs:{perm:f}}),x=Ce({inputs:{x:y},backend:n,attrs:{shape:h}});return c.push(u),c.push(g),c.push(y),c.forEach(v=>n.disposeIntermediateTensorInfo(v)),x},TVe={kernelName:_w,backendName:"webgl",kernelFunc:EVe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Ve(t){const{inputs:e,backend:n}=t,{indices:r,values:i,denseShape:s,defaultValue:a}=e;if(s.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${s.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${r.shape}`);if(i.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${i.shape}`);if(a.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${a.shape}`);const o=n.readSync(r.dataId),l=n.readSync(i.dataId),c=n.readSync(s.dataId),u=n.readSync(a.dataId)[0],[d,f,h,g,y]=k4e(o,r.shape,r.dtype,l,i.dtype,c,u);return[n.makeTensorInfo(f,r.dtype,d),n.makeTensorInfo([f[0]],i.dtype,h),n.makeTensorInfo([g.length],"bool",new Uint8Array(g.map(x=>Number(x)))),n.makeTensorInfo([y.length],r.dtype,new Int32Array(y))]}const IVe={kernelName:Rw,backendName:"webgl",kernelFunc:_Ve};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NVe(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:i,newShape:s}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(i.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${i.shape}`);if(s.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${s.shape}`);const a=Array.from(n.readSync(i.dataId)),o=n.readSync(r.dataId),l=Array.from(n.readSync(s.dataId)),[c,u,d]=C4e(o,r.shape,r.dtype,a,l);return[n.makeTensorInfo(u,r.dtype,c),n.makeTensorInfo([d.length],s.dtype,new Int32Array(d))]}const RVe={kernelName:Ow,backendName:"webgl",kernelFunc:NVe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OVe(t){const{inputs:e,backend:n}=t,{data:r,indices:i,segmentIds:s}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${i.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${s.shape}`);const a=n.readSync(r.dataId),o=n.readSync(i.dataId),l=n.readSync(s.dataId),[c,u]=MH(a,r.shape,r.dtype,o,l,!0);return n.makeTensorInfo(u,r.dtype,c)}const AVe={kernelName:Aw,backendName:"webgl",kernelFunc:OVe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PVe(t){const{inputs:e,backend:n}=t,{data:r,indices:i,segmentIds:s}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${i.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${s.shape}`);const a=n.readSync(r.dataId),o=n.readSync(i.dataId),l=n.readSync(s.dataId),[c,u]=MH(a,r.shape,r.dtype,o,l);return n.makeTensorInfo(u,r.dtype,c)}const DVe={kernelName:Pw,backendName:"webgl",kernelFunc:PVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FVe(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:i,sparseValues:s,defaultValue:a}=e,{outputShape:o}=r,{sliceRank:l,numUpdates:c,sliceSize:u,strides:d,outputSize:f}=Wf(s,i,o),h=!1;if(s.dtype==="string"){const v=n.bufferSync(i),b=n.bufferSync(s),S=fo(n.readSync(a.dataId)[0]),k=b4e(v,b,o,f,u,c,l,d,S,h);return n.makeTensorInfo(o,k.dtype,k.values)}const g=new m9(c,l,i.shape.length,s.shape.length,d,[f,1],h),y=n.runWebGLProgram(g,[s,i,a],s.dtype),x=Ce({inputs:{x:y},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(y),x}const LVe={kernelName:Dw,backendName:"webgl",kernelFunc:FVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MVe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{numOrSizeSplits:s,axis:a}=r,o=ut(a,i.shape)[0],l=IR(i,s,o),c=i.shape.length,u=new Array(c).fill(0),d=i.shape.slice();return l.map(f=>{const h=[...d];h[o]=f;const g=ep({inputs:{x:i},backend:n,attrs:{begin:u,size:h}});return u[o]+=f,g})}const BVe={kernelName:Iw,backendName:"webgl",kernelFunc:MVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lL="return sqrt(x);",zVe=ot({opSnippet:lL,packedOpSnippet:lL,cpuKernelImpl:$4e}),jVe={kernelName:Og,backendName:"webgl",kernelFunc:zVe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VVe="return x * x;",WVe=ot({opSnippet:VVe}),UVe={kernelName:XI,backendName:"webgl",kernelFunc:WVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cL="return (a - b) * (a - b);",GVe=Qn({opSnippet:cL,packedOpSnippet:cL}),HVe={kernelName:Ag,backendName:"webgl",kernelFunc:GVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qVe({inputs:t,attrs:e,backend:n}){const{x:r}=t,i=vs+`
    return x > 0.0 ? 1.0 : float(${e.alpha});
  `,s=new Za(r.shape,i);return n.runWebGLProgram(s,[r],r.dtype)}const KVe={kernelName:Mg,backendName:"webgl",kernelFunc:qVe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class XVe{constructor(e,n,r){this.variableNames=["x"],this.outputShape=r;const i=r.length,s=Rt(r.length),a=Rt(r.length);let o="";if(i===1)o="coords * strides + begin";else{let l=0;o=r.map((c,u)=>(l++,r.length===1?`coords * strides[${u}] + begin[${u}]`:`coords[${l-1}] * strides[${u}] + begin[${u}]`)).join(",")}this.userCode=`
      ${s} begin = ${s}(${e});
      ${s} strides = ${s}(${n});

      void main() {
        ${a} coords = getOutputCoords();
        setOutput(getX(${o}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YVe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{begin:s,end:a,strides:o,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:d,shrinkAxisMask:f}=r,{finalShapeSparse:h,finalShape:g,isIdentity:y,sliceDim0:x,isSimpleSlice:v,begin:b,end:S,strides:k}=xN(i.shape,s,a,o,l,c,u,d,f);let $;if(y)$=Ce({inputs:{x:i},backend:n,attrs:{shape:g}});else if(x||v){F(i.shape.length>=1,()=>`Input must have rank at least 1, got: ${i.shape.length}`);const _=mN(b,S,k),R=ep({inputs:{x:i},backend:n,attrs:{begin:b,size:_}});$=Ce({inputs:{x:R},backend:n,attrs:{shape:g}}),n.disposeIntermediateTensorInfo(R)}else if(n.shouldExecuteOnCPU([i])){const R=n.readSync(i.dataId),P=qe(i.shape,i.dtype,R),O=E4e(h,P,k,b);$=n.makeTensorInfo(g,i.dtype,O.values)}else{const R=new XVe(b,k,h);$=n.runWebGLProgram(R,[i],i.dtype)}const T=Ce({inputs:{x:$},backend:n,attrs:{shape:g}});return n.disposeIntermediateTensorInfo($),T}const QVe={kernelName:Fw,backendName:"webgl",kernelFunc:YVe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZVe(t){const{inputs:e,backend:n,attrs:r}=t,{separator:i,nGramWidths:s,leftPad:a,rightPad:o,padWidth:l,preserveShortSequences:c}=r,{data:u,dataSplits:d}=e,f=n.readSync(u.dataId),h=n.readSync(d.dataId),[g,y]=T4e(f,h,i,s,a,o,l,c);return[n.makeTensorInfo([g.length],"string",g),n.makeTensorInfo(d.shape,"int32",y)]}const JVe={kernelName:Lw,backendName:"webgl",kernelFunc:ZVe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eWe(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:i}=r,{input:s,delimiter:a}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(s.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${s.shape}`);if(a.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${a.shape}`);const o=n.readSync(s.dataId),l=n.readSync(a.dataId)[0],[c,u,d]=_4e(o,l,i),f=u.length;return[n.makeTensorInfo([f,2],"int32",c),n.makeTensorInfo([f],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const tWe={kernelName:Mw,backendName:"webgl",kernelFunc:eWe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nWe(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:i}=r,{input:s}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(i<=0)throw new Error("Number of buckets must be at least 1");const a=n.readSync(s.dataId),o=I4e(a,i);return n.makeTensorInfo(s.shape,"int32",o)}const rWe={kernelName:Bw,backendName:"webgl",kernelFunc:nWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iWe="return tan(x);",sWe=ot({opSnippet:iWe}),aWe={kernelName:Dg,backendName:"webgl",kernelFunc:sWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oWe=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,lWe=ot({opSnippet:oWe}),cWe={kernelName:Fg,backendName:"webgl",kernelFunc:lWe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uWe{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let a=0;a<r.length;a++)r[a]=e[a]*n[a];this.outputShape=r,this.rank=r.length;const i=Rt(this.rank),s=dWe(e);this.userCode=`
      void main() {
        ${i} resRC = getOutputCoords();
        setOutput(getA(${s}));
      }
    `}}function dWe(t){const e=t.length;if(e>5)throw Error(`Tile for rank ${e} is not yet supported`);if(e===1)return`imod(resRC, ${t[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let i=0;i<t.length;i++)r.push(`imod(${n[i]}, ${t[i]})`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g9(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{reps:s}=r;if(i.dtype==="string"||i.shape.length>5){const l=n.readSync(i.dataId),c=i.dtype==="string"?l.map(f=>fo(f)):l,u=qe(i.shape,i.dtype,c),d=R4e(u,s);return n.makeTensorInfo(d.shape,d.dtype,d.values)}const a=new uWe(i.shape,s);return n.runWebGLProgram(a,[i],i.dtype)}const fWe={kernelName:Lg,backendName:"webgl",kernelFunc:g9};class pWe{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}}class hWe{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ic(t,e){e!==null&&t.disposeIntermediateTensorInfo(e)}function uL(t){let e=1;for(;e<t;)e*=2;return e}function mWe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{k:s,sorted:a}=r,o=re().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=re().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),c=i.shape,u=c[c.length-1];if(n.shouldExecuteOnCPU([i])||u<o||s>l){const O=n.readSync(i.dataId),[B,H]=O4e(O,c,i.dtype,s,a);return[n.makeTensorInfo(B.shape,B.dtype,B.values),n.makeTensorInfo(H.shape,H.dtype,H.values)]}if(s===0)return c[c.length-1]=0,[n.makeTensorInfo(c,i.dtype,[]),n.makeTensorInfo(c,"int32",[])];if(u===1)return[i,ay({attrs:{shape:c,dtype:"int32",value:0},backend:n})];const d=n.texData.get(i.dataId),f=d!==null&&d.isPacked,h=f?n.unpackTensor(i):i,y=oe(c)/u,x=Ce({inputs:{x:h},attrs:{shape:[y,u]},backend:n});f&&ic(n,h);const v=uL(s),b=uL(u);let S=null;const k=()=>S===null?[x,x]:[x,S],$=(O,B,H)=>{const V=k(),K=new pWe(H),q=[[u],[S===null?1:0],[Number.NEGATIVE_INFINITY],[O],[B]],te=S;S=n.runWebGLProgram(K,V,"int32",q),ic(n,te)};for(let O=1;O<v;O*=2){const B=O*2;for(let H=O;H>=1;H/=2)$(B,H,[y,b])}for(let O=b;O>v;O/=2){const B=k(),H=new hWe([y,O/2]),K=[[u],[S===null?1:0],[v]],X=S;S=n.runWebGLProgram(H,B,"int32",K),ic(n,X);const q=v/2,te=q*2;for(let j=q;j>=1;j/=2)$(te,j,S.shape)}let T=S;S=ep({inputs:{x:S},backend:n,attrs:{begin:0,size:[y,s]}}),ic(n,T);let _=o9({inputs:{x,indices:S},backend:n,attrs:{axis:1,batchDims:1}});ic(n,x);const R=c.slice(0,-1);R.push(s),T=S,S=Ce({inputs:{x:S},attrs:{shape:R},backend:n}),ic(n,T);const P=_;return _=Ce({inputs:{x:_},attrs:{shape:R},backend:n}),ic(n,P),[_,S]}const gWe={kernelName:zw,backendName:"webgl",kernelFunc:mWe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yWe{constructor(e,n,r,i,s,a){this.variableNames=["Image","Transforms"],this.outputShape=a;const o=r==="nearest"?1:2;let l;switch(i){case"constant":l=1;break;case"reflect":l=2;break;case"wrap":l=3;break;case"nearest":l=4;break;default:l=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${l} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${n}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${s});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${s});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${n}));
                float mapY = mapCoord(inY, float(${e}));

                if (${o} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vWe(t){const{inputs:e,backend:n,attrs:r}=t,{image:i,transforms:s}=e,{interpolation:a,fillMode:o,fillValue:l,outputShape:c}=r,[u,d,f,h]=i.shape,[g,y]=c??[d,f],x=[u,g,y,h],v=new yWe(d,f,a,o,l,x);return n.runWebGLProgram(v,[i,s],"float32")}const xWe={kernelName:jw,backendName:"webgl",kernelFunc:vWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bWe(t){const{inputs:e,attrs:n,backend:r}=t,{axis:i}=n,{x:s}=e;ty(s,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const a=r.readSync(s.dataId),{outputValues:o,outputShape:l,indices:c}=A4e(a,i,s.shape,s.dtype);return[r.makeTensorInfo(l,s.dtype,o),r.makeTensorInfo([c.length],"int32",c)]}const wWe={kernelName:Vw,backendName:"webgl",kernelFunc:bWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SWe(t){const{inputs:e,backend:n,attrs:r}=t,{value:i}=e;let{axis:s}=r;s<0&&(s+=i.shape.length);const a=i,o=a.shape.length,l=i.shape[s],c=new Array(o-1);let u=0;for(let y=0;y<o;y++)y!==s&&(c[u++]=a.shape[y]);const d=[],f=new Array(o).fill(0),h=a.shape.slice();h[s]=1;const g=new Array(l);for(let y=0;y<g.length;y++){f[s]=y;const x=ep({inputs:{x:a},backend:n,attrs:{begin:f,size:h}}),v=Ce({inputs:{x},backend:n,attrs:{shape:c}});g[y]=v,d.push(x)}return d.forEach(y=>n.disposeIntermediateTensorInfo(y)),g}const kWe={kernelName:Ww,backendName:"webgl",kernelFunc:SWe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class CWe{constructor(e,n){this.variableNames=["x","segmentIds"];const r=e.windowSize,i=e.batchSize,s=e.inSize,a=e.numSegments,o=a*Math.ceil(s/r);this.outputShape=[i,o];const l="0.0",c="sumValue",u=Math.floor(r/4)*4,d=r%4,f=`
        sumValue += dot(values, segFilter);
    `;let h="";s%r>0&&(h=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return initializationValue;
        }
      `);let g="";s%r>0&&(g=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${l};

      float getValue(int batch, int inIdx) {
        ${h}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${g}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${a})) * float(${r}));
        int currentSeg = int(mod(float(outIdx), float(${a})));

        float sumValue = 0.0;

        for (int i = 0; i < ${u}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${f}
        }

        int inIdx = inOffset + ${u};
        if (${d===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${f}
        } else if (${d===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${f}
        } else if (${d===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${f}
        }
        setOutput(${c});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $We(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,segmentIds:s}=e,{numSegments:a}=r,o=i.shape.length,l=[];let c=0;const u=fn([c],o);let d=i;u!=null&&(d=_r({inputs:{x:i},backend:n,attrs:{perm:u}}),l.push(d),c=pn(1,o)[0]);const f=_G(d.shape,c,a),h=oe([d.shape[c]]),g=Ce({inputs:{x:d},backend:n,attrs:{shape:[-1,h]}});l.push(g);const y=Kw(i.dtype),x=(k,$,T,_,R)=>{const P=k.shape[0],O=k.shape[1],B=TG(O,R),H={windowSize:B,inSize:O,batchSize:P,numSegments:R},V=new CWe(H,$),K=n.compileAndRun(V,[k,T],_);if(l.push(K),K.shape[1]===R)return K;const X=h9({backend:n,attrs:{start:0,stop:R,step:1,dtype:"float32"}}),q=g9({inputs:{x:X},backend:n,attrs:{reps:[O/B]}});return l.push(X),l.push(q),x(K,$,q,_,R)},v=x(g,"unsortedSegmentSum",s,y,a),b=Ce({inputs:{x:v},backend:n,attrs:{shape:f}});let S=b;if(u!=null){l.push(b);const k=Gg(u);S=_r({inputs:{x:S},backend:n,attrs:{perm:k}})}return l.forEach(k=>n.disposeIntermediateTensorInfo(k)),S}const EWe={kernelName:Uw,backendName:"webgl",kernelFunc:$We};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TWe=[CLe,ELe,ILe,OLe,PLe,LLe,BLe,jLe,GLe,qLe,YLe,JLe,nMe,aMe,cMe,dMe,pMe,yMe,xMe,wMe,$Me,OMe,PMe,FMe,VMe,UMe,KMe,oLe,QMe,n5e,a5e,f5e,h5e,g5e,v5e,b5e,k5e,E5e,I5e,R5e,A5e,D5e,M5e,z5e,U5e,H5e,X5e,Z5e,eBe,iBe,lBe,fBe,mBe,vBe,xBe,wBe,kBe,$Be,TBe,IBe,ABe,FBe,BBe,jBe,UBe,qBe,QBe,tze,aLe,rze,e5e,aze,cze,fze,cLe,gze,bze,Sze,Eze,Ize,Aze,Fze,zze,Uze,qze,Xze,Jze,t6e,r6e,o6e,c6e,d6e,p6e,m6e,x6e,k6e,T6e,D6e,fLe,B6e,V6e,G6e,K6e,MMe,Q6e,J6e,tje,ije,lje,dLe,uje,fje,hje,mje,BMe,R6e,vje,Sje,Eje,hLe,Nje,Aje,Lje,zje,Uje,Hje,Xje,Zje,eVe,rVe,aVe,cVe,pVe,gVe,xVe,SVe,NMe,A6e,$Ve,TVe,IVe,RVe,AVe,DVe,LVe,BVe,jVe,UVe,HVe,KVe,QVe,JVe,tWe,rWe,O6e,wLe,aWe,cWe,fWe,gWe,xWe,SLe,wWe,kWe,EWe,Z6e];for(const t of TWe)qw(t);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _We=r2;class $2 extends sb{constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new AI(this,Ua())}nextDataId(){return $2.nextDataId++}write(e,n,r){this.firstUse&&(this.firstUse=!1,re().get("IS_NODE")&&Si(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));const i={id:this.nextDataId()};return this.data.set(i,{values:e,dtype:r,refCount:1}),i}makeTensorInfo(e,n,r){let i;if(n==="string"&&r!=null&&r.length>0&&la(r[0])){const s=r.map(a=>ya(a));i=this.write(s,e,n)}else i=this.write(r,e,n);return{dataId:i,shape:e,dtype:n}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){const n=this.data.get(e);n.refCount++}decRef(e){if(this.data.has(e)){const n=this.data.get(e);n.refCount--}}move(e,n,r,i,s){this.data.set(e,{values:n,dtype:i,refCount:s})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:n,complexTensorInfos:r}=this.data.get(e);if(n==="complex64"){const i=this.readSync(r.real.dataId),s=this.readSync(r.imag.dataId);return ho(i,s)}return this.data.get(e).values}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(i=>fo(i));return qe(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return qe(e.shape,e.dtype,n)}makeOutput(e,n,r){return Ua().makeTensorFromTensorInfo(this.makeTensorInfo(n,r,e),this)}disposeData(e,n=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!n&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:r}=this.data.get(e);r!=null&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const n=Jr();return e(),{kernelMs:Jr()-n}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){Re([e],"where");const n=this.readSync(e.dataId);return _We(e.shape,n)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}$2.nextDataId=0;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */cN("cpu",()=>new $2,1);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y9=vt(Xm,t=>t>=0?t:Math.exp(t)-1),IWe={kernelName:Xm,backendName:"cpu",kernelFunc:y9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v9(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{alpha:s}=r;Re([i],"leakyRelu");const a=oe(i.shape),o=n.data.get(i.dataId).values,l=Tn("float32",a);for(let c=0;c<o.length;c++)l[c]=o[c]<0?s*o[c]:o[c];return n.makeTensorInfo(i.shape,"float32",l)}const NWe={kernelName:Kb,backendName:"cpu",kernelFunc:v9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RWe=vn((t,e)=>t<0?e*t:t);function x9(t){const{inputs:e,backend:n}=t,{x:r,alpha:i}=e;Re([r,i],"prelu");const s=n.data.get(r.dataId).values,a=n.data.get(i.dataId).values,[o,l]=RWe(r.shape,i.shape,s,a,"float32");return n.makeTensorInfo(l,"float32",o)}const OWe={kernelName:pw,backendName:"cpu",kernelFunc:x9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b9=vt(Sg,t=>Math.max(0,t)),AWe={kernelName:Sg,backendName:"cpu",kernelFunc:b9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w9=vt(kg,t=>Math.min(Math.max(0,t),6)),PWe={kernelName:kg,backendName:"cpu",kernelFunc:w9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j1(t,e,n,r,i){if(n==="linear")return $a({inputs:{x:e},backend:t});if(n==="relu")return b9({inputs:{x:e},backend:t});if(n==="elu")return y9({inputs:{x:e},backend:t});if(n==="relu6")return w9({inputs:{x:e},backend:t});if(n==="prelu")return x9({inputs:{x:e,alpha:r},backend:t});if(n==="leakyrelu")return v9({inputs:{x:e},backend:t,attrs:{alpha:i}});if(n==="sigmoid")return SH({inputs:{x:e},backend:t});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ot(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{shape:s}=r,a=oe(i.shape),o=PI(s,a),l=oe(o);F(a===l,()=>`The new shape (${o}) has ${l} elements and the old shape (${i.shape}) has ${a} elements. The new shape and old shape must have the same number of elements.`),n.incRef(i.dataId);const c=n.data.get(i.dataId);if(c.complexTensorInfos!=null){const u=c.complexTensorInfos.real,d=c.complexTensorInfos.imag;u.shape=o,d.shape=o}return{dataId:i.dataId,shape:o,dtype:i.dtype}}const DWe={kernelName:xw,backendName:"cpu",kernelFunc:Ot};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S9(t){const{inputs:e,backend:n,attrs:r}=t,{a:i,b:s}=e,{transposeA:a,transposeB:o}=r;Re([i,s],"matMul");const l=i.shape.length,c=s.shape.length,u=a?i.shape[l-2]:i.shape[l-1],d=o?s.shape[c-1]:s.shape[c-2],f=a?i.shape[l-1]:i.shape[l-2],h=o?s.shape[c-2]:s.shape[c-1],g=i.shape.slice(0,-2),y=s.shape.slice(0,-2),x=oe(g),v=oe(y),S=rt(i.shape.slice(0,-2),s.shape.slice(0,-2)).concat([f,h]);F(u===d,()=>`Error in matMul: inner shapes (${u}) and (${d}) of Tensors with shapes ${i.shape} and ${s.shape} and transposeA=${a} and transposeB=${o} must match.`);const k=a?[x,u,f]:[x,f,u],$=o?[v,h,d]:[v,d,h],T=Ot({inputs:{x:i},backend:n,attrs:{shape:k}}),_=Ot({inputs:{x:s},backend:n,attrs:{shape:$}}),R=a?T.shape[1]:T.shape[2],P=a?T.shape[2]:T.shape[1],O=o?_.shape[1]:_.shape[2],B=Math.max(x,v),H=n.data.get(T.dataId).values,V=n.data.get(_.dataId).values,K=Me(T.shape),X=Me(_.shape),[q,te,j]=a?[K[0],1,K[1]]:[K[0],K[1],1],[Y,Q,ne]=o?[1,X[1],X[0]]:[X[1],1,X[0]],le=P*O,ue=qe([B,P,O],T.dtype),de=ue.values,pe=n.blockSize;for(let me=0;me<B;me++)for(let ie=0;ie<P;ie+=pe)for(let we=0;we<O;we+=pe)for(let $e=0;$e<R;$e+=pe){const De=Math.min(ie+pe,P),Oe=Math.min(we+pe,O),Ue=Math.min($e+pe,R);for(let je=ie;je<De;je++)for(let Ye=we;Ye<Oe;Ye++){let Be=0;for(let et=$e;et<Ue;et++){const lt=Math.min(me,x-1)*q,wt=Math.min(me,v-1)*ne,Or=H[lt+je*te+et*j],ct=V[et*Y+Ye*Q+wt];Be+=Or*ct}de[me*le+(je*O+Ye)]+=Be}}return n.disposeIntermediateTensorInfo(T),n.disposeIntermediateTensorInfo(_),n.makeTensorInfo(S,ue.dtype,ue.values)}const FWe={kernelName:gb,backendName:"cpu",kernelFunc:S9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LWe(t){const{inputs:e,backend:n,attrs:r}=t,{a:i,b:s,bias:a,preluActivationWeights:o}=e,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:d}=r;let f,h,g;const y=[];f=S9({inputs:{a:i,b:s},attrs:{transposeA:l,transposeB:c},backend:n}),a&&(h=gf({inputs:{a:f,b:a},backend:n}),y.push(f),f=h),u&&(g=j1(n,f,u,o,d),y.push(f),f=g);for(const v of y)n.disposeIntermediateTensorInfo(v);return f}const MWe={kernelName:nm,backendName:"cpu",kernelFunc:LWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BWe=vt(Fm,t=>Math.acos(t)),zWe={kernelName:Fm,backendName:"cpu",kernelFunc:BWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jWe=vt(Lm,t=>Math.acosh(t)),VWe={kernelName:Lm,backendName:"cpu",kernelFunc:jWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WWe(t){const{inputs:e,backend:n}=t,r=e;Re(e,"addN");const i=r.map(o=>n.data.get(o.dataId).values),s=qe(r[0].shape,r[0].dtype),a=s.values;for(let o=0;o<r.length;o++){const l=i[o];for(let c=0;c<a.length;c++)a[c]+=l[c]}return n.makeTensorInfo(s.shape,s.dtype,s.values)}const UWe={kernelName:cb,backendName:"cpu",kernelFunc:WWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GWe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:a}=r;Re(i,"all");const o=ut(s,i.shape);let l=o;const c=fn(l,i.shape.length);let u=i;c!=null&&(u=zr({inputs:{x:i},backend:n,attrs:{perm:c}}),l=pn(l.length,i.shape.length)),Yn("all",l,u.shape.length);const[d,f]=Xn(u.shape,l),h=oe(f),g=Gn(oe(d),u.dtype),y=n.data.get(u.dataId).values;for(let v=0;v<g.length;++v){const b=v*h;let S=y[b];for(let k=0;k<h;++k){const $=y[b+k];S=S&&$}g[v]=S}c!=null&&n.disposeIntermediateTensorInfo(u);const x=n.makeTensorInfo(d,u.dtype,g);if(a){const v=_n(d,o),b=Ot({inputs:{x},backend:n,attrs:{shape:v}});return n.disposeIntermediateTensorInfo(x),b}return x}const HWe={kernelName:ub,backendName:"cpu",kernelFunc:GWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qWe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:a}=r;Re(i,"any");const o=ut(s,i.shape);let l=o;const c=fn(l,i.shape.length);let u=i;c!=null&&(u=zr({inputs:{x:i},backend:n,attrs:{perm:c}}),l=pn(l.length,i.shape.length)),Yn("any",l,u.shape.length);const[d,f]=Xn(u.shape,l),h=oe(f),g=Gn(oe(d),u.dtype),y=n.data.get(u.dataId).values;for(let v=0;v<g.length;++v){const b=v*h;let S=y[b];for(let k=0;k<h;++k){const $=y[b+k];S=S||$}g[v]=S}c!=null&&n.disposeIntermediateTensorInfo(u);const x=n.makeTensorInfo(d,u.dtype,g);if(a){const v=_n(d,o),b=Ot({inputs:{x},backend:n,attrs:{shape:v}});return n.disposeIntermediateTensorInfo(x),b}return x}const KWe={kernelName:db,backendName:"cpu",kernelFunc:qWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XWe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s}=r;Re(i,"argMax");let a=ut(s,i.shape);const o=fn(a,i.shape.length);let l=i;const c=[];o!=null&&(l=zr({inputs:{x:i},backend:n,attrs:{perm:o}}),c.push(l),a=pn(a.length,l.shape.length)),a=[a[0]],Yn("argMax",a,l.shape.length);const[u,d]=Xn(l.shape,a),f=oe(u),h=Gn(f,"int32"),g=oe(d),y=n.data.get(l.dataId).values;for(let x=0;x<h.length;++x){const v=x*g;let b=y[v],S=0;for(let k=0;k<g;++k){const $=y[v+k];$>b&&(b=$,S=k)}h[x]=S}return c.forEach(x=>n.disposeIntermediateTensorInfo(x)),n.makeTensorInfo(u,"int32",h)}const YWe={kernelName:fb,backendName:"cpu",kernelFunc:XWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QWe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s}=r;Re(i,"argMin");let a=ut(s,i.shape);const o=fn(a,i.shape.length);let l=i;const c=[];o!=null&&(l=zr({inputs:{x:i},backend:n,attrs:{perm:o}}),c.push(l),a=pn(a.length,l.shape.length)),a=[a[0]],Yn("argMin",a,l.shape.length);const[u,d]=Xn(l.shape,a),f=oe(u),h=Gn(f,"int32"),g=oe(d),y=n.data.get(l.dataId).values;for(let x=0;x<h.length;++x){const v=x*g;let b=y[v],S=0;for(let k=0;k<g;++k){const $=y[v+k];$<b&&(b=$,S=k)}h[x]=S}return c.forEach(x=>n.disposeIntermediateTensorInfo(x)),n.makeTensorInfo(u,"int32",h)}const ZWe={kernelName:pb,backendName:"cpu",kernelFunc:QWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JWe=vt(Mm,t=>Math.asin(t)),e8e={kernelName:Mm,backendName:"cpu",kernelFunc:JWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t8e=vt(Bm,t=>Math.asinh(t)),n8e={kernelName:Bm,backendName:"cpu",kernelFunc:t8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r8e=vt(zm,t=>Math.atan(t)),i8e={kernelName:zm,backendName:"cpu",kernelFunc:r8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s8e=vn((t,e)=>Math.atan2(t,e)),a8e=Ln(Vm,s8e),o8e={kernelName:Vm,backendName:"cpu",kernelFunc:a8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l8e=vt(jm,t=>Math.atanh(t)),c8e={kernelName:jm,backendName:"cpu",kernelFunc:l8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HR(t,e,n,r,i,s){const a=i.strideHeight,o=i.strideWidth,l=i.dilationHeight,c=i.dilationWidth,u=i.effectiveFilterHeight,d=i.effectiveFilterWidth,f=i.padInfo.top,h=i.padInfo.left,g=s==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,y=qe(i.outShape,n),x=y.values,v=i.outShape[1]*i.outShape[2]*i.outShape[3],b=i.outShape[2]*i.outShape[3],S=i.outShape[3];for(let k=0;k<i.batchSize;++k){const $=k*v,T=k*r[0];for(let _=0;_<i.inChannels;++_)for(let R=0;R<i.outHeight;++R){const P=R*a-f,O=Math.max(0,P),B=Math.min(i.inHeight,u+P),H=$+R*b;for(let V=0;V<i.outWidth;++V){const K=V*o-h,X=Math.max(0,K),q=Math.min(i.inWidth,d+K);let te=g,j=0,Y=0;for(let ne=O;ne<B;ne+=l){const le=T+ne*r[1];for(let ue=X;ue<q;ue+=c){const de=le+ue*r[2],pe=t[de+_];s==="max"&&pe>te?te=pe:s==="avg"&&(j+=pe,Y++)}if(isNaN(te))break}const Q=H+V*S+_;x[Q]=s==="avg"?j/Y:te}}}return y}function k9(t,e,n,r,i=!1,s=!1){const a=qe(r.outShape,"int32"),o=r.strideHeight,l=r.strideWidth,c=r.dilationHeight,u=r.dilationWidth,d=r.effectiveFilterHeight,f=r.effectiveFilterWidth,h=r.padInfo.top,g=r.padInfo.left,y=qe(e,n,t);for(let x=0;x<r.batchSize;++x)for(let v=0;v<r.inChannels;++v)for(let b=0;b<r.outHeight;++b){const S=b*o-h;let k=S;for(;k<0;)k+=c;const $=Math.min(r.inHeight,d+S);for(let T=0;T<r.outWidth;++T){const _=T*l-g;let R=_;for(;R<0;)R+=u;const P=Math.min(r.inWidth,f+_);let O=Number.NEGATIVE_INFINITY,B=-1;for(let H=k;H<$;H+=c){const V=H-S;for(let K=R;K<P;K+=u){const X=K-_,q=y.get(x,H,K,v);q>O&&(O=q,i?B=s?((x*r.inHeight+H)*r.inWidth+K)*r.inChannels+v:(H*r.inWidth+K)*r.inChannels+v:B=V*f+X)}}a.set(B,x,b,T,v)}}return a}function C9(t,e,n,r,i,s){const a=i.strideDepth,o=i.strideHeight,l=i.strideWidth,c=i.dilationDepth,u=i.dilationHeight,d=i.dilationWidth,f=i.effectiveFilterDepth,h=i.effectiveFilterHeight,g=i.effectiveFilterWidth,y=i.padInfo.front,x=i.padInfo.top,v=i.padInfo.left,b=s==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,S=qe(i.outShape,n),k=S.values,$=i.outShape[1]*i.outShape[2]*i.outShape[3]*i.outShape[4],T=i.outShape[2]*i.outShape[3]*i.outShape[4],_=i.outShape[3]*i.outShape[4],R=i.outShape[4];for(let P=0;P<i.batchSize;++P){const O=P*$,B=P*r[0];for(let H=0;H<i.inChannels;++H)for(let V=0;V<i.outDepth;++V){const K=V*a-y;let X=K;for(;X<0;)X+=c;const q=Math.min(i.inDepth,f+K),te=O+V*T;for(let j=0;j<i.outHeight;++j){const Y=j*o-x;let Q=Y;for(;Q<0;)Q+=u;const ne=Math.min(i.inHeight,h+Y),le=te+j*_;for(let ue=0;ue<i.outWidth;++ue){const de=ue*l-v;let pe=de;for(;pe<0;)pe+=d;const me=Math.min(i.inWidth,g+de),ie=le+ue*R;let we=b,$e=0,De=0;for(let Ue=X;Ue<q;Ue+=c){const je=B+Ue*r[1];for(let Ye=Q;Ye<ne;Ye+=u){const Be=je+Ye*r[2];for(let et=pe;et<me;et+=d){const lt=Be+et*r[3],wt=t[lt+H];if(s==="max"&&wt>we?we=wt:s==="avg"&&($e+=wt,De++),isNaN(we))break}if(isNaN(we))break}if(isNaN(we))break}const Oe=ie+H;k[Oe]=s==="avg"?$e/De:we}}}}return S}function u8e(t,e){const n=qe(e.outShape,"int32"),r=e.strideDepth,i=e.strideHeight,s=e.strideWidth,a=e.dilationDepth,o=e.dilationHeight,l=e.dilationWidth,c=e.effectiveFilterDepth,u=e.effectiveFilterHeight,d=e.effectiveFilterWidth,f=e.padInfo.front,h=e.padInfo.top,g=e.padInfo.left;for(let y=0;y<e.batchSize;++y)for(let x=0;x<e.inChannels;++x)for(let v=0;v<e.outDepth;++v){const b=v*r-f;let S=b;for(;S<0;)S+=a;const k=Math.min(e.inDepth,c+b);for(let $=0;$<e.outHeight;++$){const T=$*i-h;let _=T;for(;_<0;)_+=o;const R=Math.min(e.inHeight,u+T);for(let P=0;P<e.outWidth;++P){const O=P*s-g;let B=O;for(;B<0;)B+=l;const H=Math.min(e.inWidth,d+O);let V=Number.NEGATIVE_INFINITY,K=-1;for(let X=S;X<k;X+=a){const q=X-b;for(let te=_;te<R;te+=o){const j=te-T;for(let Y=B;Y<H;Y+=l){const Q=Y-O,ne=t.get(y,X,te,Y,x);ne>=V&&(V=ne,K=q*u*d+j*u+Q)}}}n.set(K,y,v,$,P,x)}}}return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d8e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;Re(i,"avgPool");const{filterSize:s,strides:a,pad:o,dimRoundingMode:l}=r,c=1;F(lr(a,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${c}'`);const u=gs(i.shape,s,a,c,o,l);let d;if(u.filterWidth===1&&u.filterHeight===1&&$t(u.inShape,u.outShape))d=$a({inputs:{x:i},backend:n});else{const f=n.data.get(i.dataId).values,h=Me(i.shape),g=HR(f,i.shape,i.dtype,h,u,"avg");d=n.makeTensorInfo(u.outShape,i.dtype,g.values)}return d}const f8e={kernelName:hb,backendName:"cpu",kernelFunc:d8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p8e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{filterSize:s,strides:a,pad:o,dimRoundingMode:l,dataFormat:c}=r;Re(i,"avgPool3d");const u=Eo(i.shape,s,a,1,o,l,c),d=n.data.get(i.dataId).values,f=C9(d,i.shape,i.dtype,Me(i.shape),u,"avg");return n.makeTensorInfo(f.shape,"float32",f.values)}const h8e={kernelName:mb,backendName:"cpu",kernelFunc:p8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m8e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s}=e,{filterSize:a,strides:o,pad:l,dimRoundingMode:c}=r;Re([i,s],"avgPool3DGrad");const u=Eo(s.shape,a,o,1,l,c),d=u.strideDepth,f=u.strideHeight,h=u.strideWidth,g=u.filterDepth,y=u.filterHeight,x=u.filterWidth,v=u.dilationDepth,b=u.dilationHeight,S=u.dilationWidth,k=u.effectiveFilterDepth,$=u.effectiveFilterHeight,T=u.effectiveFilterWidth,_=k-1-u.padInfo.front,R=T-1-u.padInfo.left,P=$-1-u.padInfo.top,O=qe(s.shape,"float32"),B=1/(g*y*x),H=n.bufferSync(i);for(let V=0;V<u.batchSize;++V)for(let K=0;K<u.inChannels;++K)for(let X=0;X<u.inDepth;++X)for(let q=0;q<u.inHeight;++q)for(let te=0;te<u.inWidth;++te){const j=X-_,Y=q-P,Q=te-R;let ne=0;for(let le=0;le<k;le+=v){const ue=(j+le)/d;if(!(ue<0||ue>=u.outDepth||Math.floor(ue)!==ue))for(let de=0;de<$;de+=b){const pe=(Y+de)/f;if(!(pe<0||pe>=u.outHeight||Math.floor(pe)!==pe))for(let me=0;me<T;me+=S){const ie=(Q+me)/h;if(ie<0||ie>=u.outWidth||Math.floor(ie)!==ie)continue;const we=H.get(V,ue,pe,ie,K);ne+=we}}}O.set(ne*B,V,X,q,te,K)}return n.makeTensorInfo(O.shape,O.dtype,O.values)}const g8e={kernelName:jI,backendName:"cpu",kernelFunc:m8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y8e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s}=e,a=s;Re([i,s],"avgPoolGrad");const{filterSize:o,strides:l,pad:c}=r,u=gs(a.shape,o,l,1,c),d=u.strideHeight,f=u.strideWidth,h=u.filterHeight,g=u.filterWidth,y=u.dilationHeight,x=u.dilationWidth,v=u.effectiveFilterHeight,b=u.effectiveFilterWidth,S=b-1-u.padInfo.left,k=v-1-u.padInfo.top,$=qe(a.shape,"float32"),T=1/(h*g),_=n.data.get(i.dataId).values,R=qe(i.shape,"float32",_);for(let P=0;P<u.batchSize;++P)for(let O=0;O<u.inChannels;++O)for(let B=0;B<u.inHeight;++B)for(let H=0;H<u.inWidth;++H){const V=B-k,K=H-S;let X=0;for(let q=0;q<v;q+=y){const te=(V+q)/d;if(!(te<0||te>=u.outHeight||Math.floor(te)!==te))for(let j=0;j<b;j+=x){const Y=(K+j)/f;if(Y<0||Y>=u.outWidth||Math.floor(Y)!==Y)continue;const Q=R.get(P,te,Y,O);X+=Q}}$.set(X*T,P,B,H,O)}return n.makeTensorInfo($.shape,$.dtype,$.values)}const v8e={kernelName:zI,backendName:"cpu",kernelFunc:y8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x8e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,scale:s,offset:a,mean:o,variance:l}=e;F(o.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),F(a==null||o.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),F(s==null||o.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),Re([i,o,l,s,a],"batchNorm");let{varianceEpsilon:c}=r;c==null&&(c=.001);const u=n.data.get(i.dataId).values,d=n.data.get(o.dataId).values,f=n.data.get(l.dataId).values,h=s?n.data.get(s.dataId).values:new Float32Array([1]),g=a?n.data.get(a.dataId).values:new Float32Array([0]),y=new Float32Array(u.length),x=g.length,v=h.length,b=f.length,S=d.length;let k=0,$=0,T=0,_=0;for(let R=0;R<u.length;++R)y[R]=g[k++]+(u[R]-d[$++])*h[T++]/Math.sqrt(f[_++]+c),k>=x&&(k=0),$>=S&&($=0),T>=v&&(T=0),_>=b&&(_=0);return n.makeTensorInfo(i.shape,i.dtype,y)}const b8e={kernelName:Wb,backendName:"cpu",kernelFunc:x8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w8e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockShape:s,crops:a}=r;Re([i],"batchToSpaceND");const o=s.reduce((v,b)=>v*b),l=Qg(i.shape,s,o),c=Zg(l.length,s.length),u=Jg(i.shape,s,o),d=pR(a,s.length),f=hR(u,a,s.length),h=Ot({inputs:{x:i},backend:n,attrs:{shape:l}}),g=zr({inputs:{x:h},backend:n,attrs:{perm:c}}),y=Ot({inputs:{x:g},backend:n,attrs:{shape:u}}),x=Jc({inputs:{x:y},backend:n,attrs:{begin:d,size:f}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),x}const S8e={kernelName:yb,backendName:"cpu",kernelFunc:w8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k8e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,weights:s}=e,{size:a}=r,o=n.data.get(i.dataId).values,l=n.data.get(s.dataId).values,c=LR(o,l,s.dtype,s.shape,a);return n.makeTensorInfo([a],s.dtype,c)}const C8e={kernelName:vb,backendName:"cpu",kernelFunc:k8e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $8e(t){const{inputs:e,backend:n}=t,{s0:r,s1:i}=e,s=n.data.get(r.dataId).values,a=n.data.get(i.dataId).values,o=rt(Array.from(s),Array.from(a));return n.makeTensorInfo([o.length],"int32",Int32Array.from(o))}const E8e={kernelName:xb,backendName:"cpu",kernelFunc:$8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T8e=vt(Gm,(t,e)=>{const n=e;return t>n.clipValueMax?n.clipValueMax:t<n.clipValueMin?n.clipValueMin:t}),_8e={kernelName:Gm,backendName:"cpu",kernelFunc:T8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I8e=t=>{const{x:e}=t.inputs,n=t.backend,r=new Float32Array(oe(e.shape)),i=n.data.get(e.dataId),s=i.complexTensorInfos.real,a=i.complexTensorInfos.imag,o=n.data.get(s.dataId).values,l=n.data.get(a.dataId).values;for(let c=0;c<o.length;c++){const u=o[c],d=l[c];r[c]=Math.hypot(u,d)}return n.makeOutput(r,e.shape,"float32")},N8e={kernelName:wb,backendName:"cpu",kernelFunc:I8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vf(t){const{inputs:e,backend:n}=t,{input:r}=e,i=n.data.get(r.dataId).complexTensorInfos.imag,s=n.data.get(i.dataId).values;return n.makeTensorInfo(i.shape,i.dtype,s)}const R8e={kernelName:qb,backendName:"cpu",kernelFunc:vf};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xf(t){const{inputs:e,backend:n,attrs:r}=t,{axis:i}=r,s=ut(i,e[0].shape)[0],a=e.map(y=>y.shape);uR(a,s);let o=xa(e.map(y=>y.shape),s);if(oe(o)===0)return n.makeTensorInfo(o,e[0].dtype,[]);const l=e.filter(y=>oe(y.shape)>0);if(l.length===1)return $a({inputs:{x:l[0]},backend:n});if(l[0].dtype==="complex64"){const y=l.map(k=>Zc({inputs:{input:k},backend:n})),x=l.map(k=>vf({inputs:{input:k},backend:n})),v=xf({inputs:y,backend:n,attrs:{axis:s}}),b=xf({inputs:x,backend:n,attrs:{axis:s}}),S=ti({inputs:{real:v,imag:b},backend:n});return y.forEach(k=>n.disposeIntermediateTensorInfo(k)),x.forEach(k=>n.disposeIntermediateTensorInfo(k)),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(b),S}const c=l.map(y=>{const v=[-1,oe(y.shape.slice(s))];return Ot({inputs:{x:y},backend:n,attrs:{shape:v}})}),u=c.map(y=>({vals:n.data.get(y.dataId).values,shape:y.shape}));o=xa(c.map(y=>y.shape),1);const d=c[0].shape[0]===1,f=QG(u,o,e[0].dtype,d),h=xa(l.map(y=>y.shape),s),g=n.makeTensorInfo(h,e[0].dtype,f);return c.forEach(y=>n.disposeIntermediateTensorInfo(y)),g}const O8e={kernelName:Sb,backendName:"cpu",kernelFunc:xf};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $9(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s}=e,{strides:a,pad:o,dataFormat:l,dilations:c,dimRoundingMode:u}=r;Re([i,s],"conv2d");const d=To(l),f=Fn(i.shape,s.shape,a,c,o,u,!1,d),h=f.filterHeight,g=f.filterWidth,y=f.dilationHeight,x=f.dilationWidth,v=f.padInfo.left,b=f.padInfo.top,S=f.dataFormat==="channelsLast",k=new En(f.outShape,i.dtype),$=Me(i.shape),T=Me(s.shape),_=$[0],R=S?$[1]:$[2],P=S?$[2]:1,O=S?1:$[1],B=k.strides[0],H=S?k.strides[1]:k.strides[2],V=S?k.strides[2]:1,K=S?1:k.strides[1],X=n.data.get(i.dataId).values,q=n.data.get(s.dataId).values,te=k.values;for(let j=0;j<f.batchSize;++j){const Y=j*_,Q=j*B;for(let ne=0;ne<f.outHeight;++ne){const le=Q+ne*H,ue=ne*f.strideHeight-b;for(let de=0;de<h;++de){const pe=ue+de*y;if(pe<0||pe>=f.inHeight)continue;const me=de*T[0],ie=Y+pe*R;for(let we=0;we<f.outWidth;++we){const $e=le+we*V,De=we*f.strideWidth-v;for(let Oe=0;Oe<g;++Oe){const Ue=De+Oe*x;if(Ue<0||Ue>=f.inWidth)continue;const je=me+Oe*T[1],Ye=ie+Ue*P;let Be=je;for(let et=0;et<f.inChannels;++et){const lt=X[Ye+et*O];for(let wt=0;wt<f.outChannels;++wt)te[$e+wt*K]+=lt*q[Be+wt];Be+=f.outChannels}}}}}}return n.makeTensorInfo(k.shape,k.dtype,te)}const A8e={kernelName:kb,backendName:"cpu",kernelFunc:$9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P8e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:s}=e,{strides:a,pad:o,dataFormat:l,dimRoundingMode:c,filterShape:u}=r;Re([i,s],"conv2dBackpropFilter");const d=To(l),f=Fn(i.shape,u,a,1,o,c,!1,d),{strideHeight:h,strideWidth:g,filterHeight:y,filterWidth:x}=f,v=f.dataFormat==="channelsLast",b=new En(f.filterShape,"float32"),S=f.padInfo.left,k=f.padInfo.top,$=n.data.get(i.dataId).values,T=n.data.get(s.dataId).values,_=new En(i.shape,i.dtype,$),R=new En(s.shape,s.dtype,T);for(let P=0;P<y;++P){const O=Math.max(0,Math.ceil((k-P)/h)),B=Math.min(f.outHeight,(f.inHeight+k-P)/h);for(let H=0;H<x;++H){const V=Math.max(0,Math.ceil((S-H)/g)),K=Math.min(f.outWidth,(f.inWidth+S-H)/g);for(let X=0;X<f.inChannels;++X)for(let q=0;q<f.outChannels;++q){let te=0;for(let j=0;j<f.batchSize;++j)for(let Y=O;Y<B;++Y){const Q=P+Y*h-k;for(let ne=V;ne<K;++ne){const le=H+ne*g-S;v?te+=_.get(j,Q,le,X)*R.get(j,Y,ne,q):te+=_.get(j,X,Q,le)*R.get(j,q,Y,ne)}}b.set(te,P,H,X,q)}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}const D8e={kernelName:Cb,backendName:"cpu",kernelFunc:P8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F8e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:s}=e,{inputShape:a,strides:o,pad:l,dataFormat:c,dimRoundingMode:u}=r;Re([i,s],"conv2dBackpropInput");const d=Me(s.shape),f=Me(i.shape);let h=To(c);const g=Fn(a,s.shape,o,1,l,u,!1,h),y=new En(g.inShape,"float32"),x=y.values,v=n.data.get(i.dataId).values,b=n.data.get(s.dataId).values,[S,k,$]=d,{batchSize:T,filterHeight:_,filterWidth:R,inChannels:P,inHeight:O,inWidth:B,outChannels:H,outHeight:V,outWidth:K,strideHeight:X,strideWidth:q}=g;h=g.dataFormat;const te=_-1-g.padInfo.top,j=R-1-g.padInfo.left,Y=h==="channelsLast",Q=y.strides[0],ne=Y?y.strides[1]:y.strides[2],le=Y?y.strides[2]:1,ue=Y?1:y.strides[1],de=f[0],pe=Y?f[1]:f[2],me=Y?f[2]:1,ie=Y?1:f[1];for(let we=0;we<T;++we)for(let $e=0;$e<P;++$e)for(let De=0;De<O;++De){const Oe=De-te,Ue=Math.max(0,Math.ceil(Oe/X)),je=Math.min(V,(_+Oe)/X);for(let Ye=0;Ye<B;++Ye){const Be=Ye-j,et=Math.max(0,Math.ceil(Be/q)),lt=Math.min(K,(R+Be)/q);let wt=0;for(let ct=Ue;ct<je;++ct){const Zn=ct*X-Oe;for(let xn=et;xn<lt;++xn){const Wr=xn*q-Be,qt=de*we+pe*ct+me*xn,ur=S*(_-1-Zn)+k*(R-1-Wr)+$*$e;for(let He=0;He<H;++He){const bn=v[qt+ie*He],dr=b[ur+He];wt+=bn*dr}}}const Or=Q*we+ne*De+le*Ye+ue*$e;x[Or]=wt}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}const L8e={kernelName:$b,backendName:"cpu",kernelFunc:F8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M8e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s}=e,{strides:a,pad:o,dilations:l}=r;Re([i,s],"conv3d");const c=zl(i.shape,s.shape,a,l,o),{filterDepth:u,filterHeight:d,filterWidth:f,dilationDepth:h,dilationHeight:g,dilationWidth:y,padInfo:x}=c,v=x.front,b=x.left,S=x.top,k=new En(c.outShape,i.dtype),$=n.data.get(i.dataId).values,T=n.data.get(s.dataId).values,_=k.values,R=Me(i.shape),P=Me(s.shape);for(let O=0;O<c.batchSize;++O){const B=O*R[0],H=O*k.strides[0];for(let V=0;V<c.outDepth;++V){const K=H+V*k.strides[1],X=V*c.strideDepth-v;for(let q=0;q<u;++q){const te=X+q*h;if(te<0||te>=c.inDepth)continue;const j=q*P[0],Y=B+te*R[1];for(let Q=0;Q<c.outHeight;++Q){const ne=K+Q*k.strides[2],le=Q*c.strideHeight-S;for(let ue=0;ue<d;++ue){const de=le+ue*g;if(de<0||de>=c.inHeight)continue;const pe=j+ue*P[1],me=Y+de*R[2];for(let ie=0;ie<c.outWidth;++ie){const we=ne+ie*c.outChannels,$e=ie*c.strideWidth-b;for(let De=0;De<f;++De){const Oe=$e+De*y;if(Oe<0||Oe>=c.inWidth)continue;const Ue=pe+De*P[2],je=me+Oe*c.inChannels;let Ye=Ue;for(let Be=0;Be<c.inChannels;++Be){const et=$[je+Be];for(let lt=0;lt<c.outChannels;++lt)_[we+lt]+=et*T[Ye+lt];Ye+=c.outChannels}}}}}}}}return n.makeTensorInfo(k.shape,k.dtype,k.values)}const B8e={kernelName:Eb,backendName:"cpu",kernelFunc:M8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z8e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:s}=e,{strides:a,pad:o,filterShape:l}=r;Re([i,s],"conv3dBackpropFilterV2");const c=Me(i.shape),u=Me(s.shape),d=zl(i.shape,l,a,1,o),f=d.strideDepth,h=d.strideHeight,g=d.strideWidth,y=d.filterDepth,x=d.filterHeight,v=d.filterWidth,b=new En(d.filterShape,"float32"),S=b.values,[k,$,T,_]=b.strides,R=n.data.get(s.dataId).values,[P,O,B,H]=u,V=n.data.get(i.dataId).values,[K,X,q,te]=c,j=d.padInfo.front,Y=d.padInfo.left,Q=d.padInfo.top;for(let ne=0;ne<y;++ne){const le=Math.max(0,Math.ceil((j-ne)/f)),ue=Math.min(d.outDepth,(d.inDepth+j-ne)/f),de=ne*k;for(let pe=0;pe<x;++pe){const me=Math.max(0,Math.ceil((Q-pe)/h)),ie=Math.min(d.outHeight,(d.inHeight+Q-pe)/h),we=pe*$+de;for(let $e=0;$e<v;++$e){const De=Math.max(0,Math.ceil((Y-$e)/g)),Oe=Math.min(d.outWidth,(d.inWidth+Y-$e)/g),Ue=$e*T+we;for(let je=0;je<d.inChannels;++je){const Ye=je*_+Ue;for(let Be=0;Be<d.outChannels;++Be){let et=0;for(let lt=0;lt<d.batchSize;++lt){const wt=lt*K,Or=lt*P;for(let ct=le;ct<ue;++ct){const xn=(ne+ct*f-j)*X+wt,Wr=ct*O+Or;for(let qt=me;qt<ie;++qt){const He=(pe+qt*h-Q)*q+xn,bn=qt*B+Wr;for(let dr=De;dr<Oe;++dr){const tp=($e+dr*g-Y)*te+He,np=dr*H+bn;et+=V[tp+je]*R[np+Be]}}}}S[Ye+Be]=et}}}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}const j8e={kernelName:VI,backendName:"cpu",kernelFunc:z8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V8e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:s}=e,{pad:a,strides:o,inputShape:l}=r;Re([i],"conv3dBackpropInputV2");const c=Me(i.shape),u=Me(s.shape),d=zl(l,s.shape,o,1,a),f=new En(d.inShape,"float32"),h=f.values,[g,y,x,v]=f.strides,b=n.data.get(i.dataId).values,[S,k,$,T]=c,_=n.data.get(s.dataId).values,[R,P,O,B]=u,{batchSize:H,filterDepth:V,filterHeight:K,filterWidth:X,inChannels:q,inDepth:te,inHeight:j,inWidth:Y,outChannels:Q,outDepth:ne,outHeight:le,outWidth:ue,strideDepth:de,strideHeight:pe,strideWidth:me}=d,ie=V-1-d.padInfo.front,we=K-1-d.padInfo.top,$e=X-1-d.padInfo.left;for(let De=0;De<H;++De)for(let Oe=0;Oe<q;++Oe)for(let Ue=0;Ue<te;++Ue){const je=Ue-ie,Ye=Math.max(0,Math.ceil(je/de)),Be=Math.min(ne,(V+je)/de);for(let et=0;et<j;++et){const lt=et-we,wt=Math.max(0,Math.ceil(lt/pe)),Or=Math.min(le,(K+lt)/pe);for(let ct=0;ct<Y;++ct){const Zn=ct-$e,xn=Math.max(0,Math.ceil(Zn/me)),Wr=Math.min(ue,(X+Zn)/me);let qt=0;for(let ur=Ye;ur<Be;++ur){const He=ur*de-je;for(let bn=wt;bn<Or;++bn){const dr=bn*pe-lt;for(let Gl=xn;Gl<Wr;++Gl){const tp=Gl*me-Zn,np=S*De+k*ur+$*bn+T*Gl,T2=R*(V-1-He)+P*(K-1-dr)+O*(X-1-tp)+B*Oe;for(let ku=0;ku<Q;++ku){const _2=b[np+ku],I2=_[T2+ku];qt+=_2*I2}}}}h[g*De+y*Ue+x*et+v*ct+Oe]=qt}}}return n.makeTensorInfo(f.shape,f.dtype,f.values)}const W8e={kernelName:Tb,backendName:"cpu",kernelFunc:V8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U8e=vt(Hm,t=>Math.cos(t)),G8e={kernelName:Hm,backendName:"cpu",kernelFunc:U8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H8e=vt(qm,t=>Math.cosh(t)),q8e={kernelName:qm,backendName:"cpu",kernelFunc:H8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K8e(t){const{inputs:e,backend:n,attrs:r}=t,{image:i,boxes:s,boxInd:a}=e,{cropSize:o,method:l,extrapolationValue:c}=r,[u,d,f,h]=i.shape,g=s.shape[0],[y,x]=o,v=qe([g,y,x,h],"float32"),b=n.data.get(s.dataId).values,S=n.data.get(a.dataId).values,k=n.data.get(i.dataId).values,$=Me(i.shape),T=Me(v.shape);for(let _=0;_<g;_++){const R=_*4,P=b[R],O=b[R+1],B=b[R+2],H=b[R+3],V=S[_];if(V>=u)continue;const K=y>1?(B-P)*(d-1)/(y-1):0,X=x>1?(H-O)*(f-1)/(x-1):0;for(let q=0;q<y;q++){const te=y>1?P*(d-1)+q*K:.5*(P+B)*(d-1);if(te<0||te>d-1){for(let j=0;j<x;j++)for(let Y=0;Y<h;Y++){const Q=Y+j*T[2]+q*T[1]+_*T[0];v.values[Q]=c}continue}if(l==="bilinear"){const j=Math.floor(te),Y=Math.ceil(te),Q=te-j;for(let ne=0;ne<x;ne++){const le=x>1?O*(f-1)+ne*X:.5*(O+H)*(f-1);if(le<0||le>f-1){for(let me=0;me<h;me++){const ie=me+ne*T[2]+q*T[1]+_*T[0];v.values[ie]=c}continue}const ue=Math.floor(le),de=Math.ceil(le),pe=le-ue;for(let me=0;me<h;me++){let ie=me+ue*$[2]+j*$[1]+V*$[0];const we=k[ie];ie=me+de*$[2]+j*$[1]+V*$[0];const $e=k[ie];ie=me+ue*$[2]+Y*$[1]+V*$[0];const De=k[ie];ie=me+de*$[2]+Y*$[1]+V*$[0];const Oe=k[ie],Ue=we+($e-we)*pe,je=De+(Oe-De)*pe;ie=me+ne*T[2]+q*T[1]+_*T[0],v.values[ie]=Ue+(je-Ue)*Q}}}else for(let j=0;j<x;++j){const Y=x>1?O*(f-1)+j*X:.5*(O+H)*(f-1);if(Y<0||Y>f-1){for(let le=0;le<h;le++){const ue=le+j*T[2]+q*T[1]+_*T[0];v.values[ue]=c}continue}const Q=Math.round(Y),ne=Math.round(te);for(let le=0;le<h;le++){const ue=le+Q*$[2]+ne*$[1]+V*$[0],de=le+j*T[2]+q*T[1]+_*T[0];v.values[de]=k[ue]}}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}const X8e={kernelName:Nb,backendName:"cpu",kernelFunc:K8e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y8e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,exclusive:a,reverse:o}=r;Re(i,"cumprod");const l=fn([s],i.shape.length);let c=i;l!=null&&(c=zr({inputs:{x:i},backend:n,attrs:{perm:l}}));const u=pn(1,i.shape.length)[0];if(u!==c.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${u}`);const d=Br(c.dtype,"int32"),f=ob(oe(c.shape),d),h=n.data.get(c.dataId).values,g=c.shape[c.shape.length-1],y=o?(v,b)=>v+g-b-1:(v,b)=>v+b;for(let v=0;v<h.length;v+=g)for(let b=0;b<g;b++){const S=y(v,b);if(b===0)f[S]=a?1:h[S];else{const k=y(v,b-1);f[S]=a?h[k]*f[k]:h[S]*f[k]}}const x=n.makeTensorInfo(c.shape,d,f);if(l!=null){const v=Gg(l),b=zr({inputs:{x},backend:n,attrs:{perm:v}});return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(c),b}return x}const Q8e={kernelName:_b,backendName:"cpu",kernelFunc:Y8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z8e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,exclusive:a,reverse:o}=r;Re(i,"cumsum");const l=fn([s],i.shape.length);let c=i;l!=null&&(c=zr({inputs:{x:i},backend:n,attrs:{perm:l}}));const u=pn(1,i.shape.length)[0];if(u!==c.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${u}`);const d=Br(c.dtype,"int32"),f=Gn(oe(c.shape),d),h=n.data.get(c.dataId).values,g=c.shape[c.shape.length-1],y=o?(v,b)=>v+g-b-1:(v,b)=>v+b;for(let v=0;v<h.length;v+=g)for(let b=0;b<g;b++){const S=y(v,b);if(b===0)f[S]=a?0:h[S];else{const k=y(v,b-1);f[S]=a?h[k]+f[k]:h[S]+f[k]}}const x=n.makeTensorInfo(c.shape,d,f);if(l!=null){const v=Gg(l),b=zr({inputs:{x},backend:n,attrs:{perm:v}});return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(c),b}return x}const J8e={kernelName:Ib,backendName:"cpu",kernelFunc:Z8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,weights:s}=e,{size:a,binaryOutput:o}=r;if(i.shape.length===1){const l=n.data.get(i.dataId).values,c=n.data.get(s.dataId).values,u=LR(l,c,s.dtype,s.shape,a);return n.makeTensorInfo([a],s.dtype,u)}else if(i.shape.length===2){const l=n.bufferSync(i),c=n.bufferSync(s),u=XG(l,c,a,o);return n.makeTensorInfo(u.shape,s.dtype,u.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${i.shape.length}.`)}const tUe={kernelName:Rb,backendName:"cpu",kernelFunc:eUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockSize:s,dataFormat:a}=r;F(a==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${a}`);const o=i.shape[0],l=i.shape[1],c=i.shape[2],u=i.shape[3],d=l*s,f=c*s,h=u/(s*s),g=n.data.get(i.dataId).values,y=new Float32Array(o*d*f*h);let x=0;for(let v=0;v<o;++v)for(let b=0;b<d;++b){const S=Math.floor(b/s),k=b%s;for(let $=0;$<f;++$){const T=Math.floor($/s),_=$%s,R=(k*s+_)*h;for(let P=0;P<h;++P){const B=P+R+u*(T+c*(S+l*v));y[x++]=g[B]}}}return n.makeTensorInfo([o,d,f,h],i.dtype,y)}const rUe={kernelName:Ob,backendName:"cpu",kernelFunc:nUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E9(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s}=e,{strides:a,pad:o,dilations:l,dimRoundingMode:c}=r;Re([i,s],"depthwiseConv2DNative");const u=Me(i.shape),d=Me(s.shape);let f=l;f==null&&(f=[1,1]),F(lr(a,f),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${a} and dilations '${f}'`);const h=Fn(i.shape,s.shape,a,f,o,c,!0),{filterHeight:g,filterWidth:y,dilationHeight:x,dilationWidth:v,padInfo:b}=h,S=b.left,k=b.top,$=h.outChannels/h.inChannels,T=new En(h.outShape,i.dtype),_=n.data.get(i.dataId).values,R=n.data.get(s.dataId).values,P=T.values;for(let O=0;O<h.batchSize;++O){const B=O*u[0],H=O*T.strides[0];for(let V=0;V<h.outHeight;++V){const K=H+V*T.strides[1],X=V*h.strideHeight-k;for(let q=0;q<g;++q){const te=X+q*x;if(te<0||te>=h.inHeight)continue;const j=q*d[0],Y=B+te*u[1];for(let Q=0;Q<h.outWidth;++Q){const ne=K+Q*T.strides[2],le=Q*h.strideWidth-S;for(let ue=0;ue<y;++ue){const de=le+ue*v;if(de<0||de>=h.inWidth)continue;const pe=j+ue*d[1],me=Y+de*h.inChannels;let ie=ne,we=pe;for(let $e=0;$e<h.inChannels;++$e){const De=_[me+$e];for(let Oe=0;Oe<$;++Oe)P[ie+Oe]+=De*R[we+Oe];ie+=$,we+=$}}}}}}return n.makeTensorInfo(T.shape,T.dtype,T.values)}const iUe={kernelName:Ab,backendName:"cpu",kernelFunc:E9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:s}=e,{strides:a,dilations:o,pad:l,dimRoundingMode:c,filterShape:u}=r;Re([i,s],"depthwiseConv2dNativeBackpropFilter");const d=Fn(i.shape,u,a,o,l,c,!0),{strideHeight:f,strideWidth:h,filterHeight:g,filterWidth:y}=d,x=new En(d.filterShape,"float32"),v=d.padInfo.left,b=d.padInfo.top,S=d.outChannels/d.inChannels,k=n.data.get(i.dataId).values,$=new En(i.shape,i.dtype,k),T=n.data.get(s.dataId).values,_=new En(s.shape,s.dtype,T);for(let R=0;R<g;++R){const P=Math.max(0,Math.ceil((b-R)/f)),O=Math.min(d.outHeight,(d.inHeight+b-R)/f);for(let B=0;B<y;++B){const H=Math.max(0,Math.ceil((v-B)/h)),V=Math.min(d.outWidth,(d.inWidth+v-B)/h);for(let K=0;K<d.outChannels;++K){const X=Math.trunc(K/S),q=K%S;let te=0;for(let j=0;j<d.batchSize;++j)for(let Y=P;Y<O;++Y){const Q=R+Y*f-b;for(let ne=H;ne<V;++ne){const le=B+ne*h-v;te+=$.get(j,Q,le,X)*_.get(j,Y,ne,K)}}x.set(te,R,B,X,q)}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}const aUe={kernelName:Pb,backendName:"cpu",kernelFunc:sUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oUe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:s}=e,{strides:a,dilations:o,pad:l,dimRoundingMode:c,inputShape:u}=r;Re([i,s],"depthwiseConv2DNativeBackpropInput");const d=Me(i.shape),f=Me(s.shape),h=Fn(u,s.shape,a,o,l,c,!0),g=new En(h.inShape,"float32"),y=g.values,[x,v,b]=g.strides,S=n.data.get(i.dataId).values,[k,$,T]=d,_=n.data.get(s.dataId).values,[R,P,O]=f,{batchSize:B,filterHeight:H,filterWidth:V,inChannels:K,inHeight:X,inWidth:q,outChannels:te,outHeight:j,outWidth:Y,strideHeight:Q,strideWidth:ne}=h,le=H-1-h.padInfo.top,ue=V-1-h.padInfo.left,de=te/K;for(let pe=0;pe<B;++pe)for(let me=0;me<K;++me)for(let ie=0;ie<X;++ie){const we=ie-le,$e=Math.max(0,Math.ceil(we/Q)),De=Math.min(j,(H+we)/Q);for(let Oe=0;Oe<q;++Oe){const Ue=Oe-ue,je=Math.max(0,Math.ceil(Ue/ne)),Ye=Math.min(Y,(V+Ue)/ne);let Be=0;for(let et=$e;et<De;++et){const lt=et*Q-we;for(let wt=je;wt<Ye;++wt){const Or=wt*ne-Ue,ct=k*pe+$*et+T*wt,Zn=R*(H-1-lt)+P*(V-1-Or)+O*me;for(let xn=0;xn<de;++xn){const Wr=me*de+xn,qt=S[ct+Wr],ur=_[Zn+xn];Be+=qt*ur}}}y[x*pe+v*ie+b*Oe+me]=Be}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}const lUe={kernelName:Db,backendName:"cpu",kernelFunc:oUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cUe(t){const{inputs:e,backend:n}=t,{x:r}=e,i=oe(r.shape),s=n.data.get(r.dataId).values,a=qe([i,i],r.dtype),o=a.values;for(let c=0;c<s.length;c++)o[c*i+c]=s[c];const l=[...r.shape,...r.shape];return n.makeTensorInfo(l,a.dtype,a.values)}const uUe={kernelName:Fb,backendName:"cpu",kernelFunc:cUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dUe={kernelName:Lb,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:i}=t,{strides:s,pad:a,dilations:o}=n,l=e,c=l.data.get(r.dataId).values,u=r.shape.length,d=l.data.get(i.dataId).values,f=i.shape.length,{batchSize:h,inHeight:g,inWidth:y,inChannels:x,outHeight:v,outWidth:b,padInfo:S,strideHeight:k,strideWidth:$,filterHeight:T,filterWidth:_,dilationHeight:R,dilationWidth:P,outShape:O}=Vg(r.shape,i.shape,s,a,"NHWC",o),B=oe(O),H=O.length,V=Cn(r.dtype,B);for(let X=0;X<h;++X)for(let q=0;q<v;++q){const te=q*k-S.top;for(let j=0;j<b;++j){const Y=j*$-S.left;for(let Q=0;Q<x;++Q){let ne=Number.MIN_SAFE_INTEGER;for(let ue=0;ue<T;++ue){const de=te+ue*R;if(de>=0&&de<g)for(let pe=0;pe<_;++pe){const me=Y+pe*P;if(me>=0&&me<y){const ie=Bs([X,de,me,Q],u,Me(r.shape)),we=Bs([ue,pe,Q],f,Me(i.shape)),$e=c[ie]+d[we];$e>ne&&(ne=$e)}}}const le=Bs([X,q,j,Q],H,Me(O));V[le]=ne}}}return{dataId:l.write(Ll(V,r.dtype),O,r.dtype),shape:O,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fUe={kernelName:pE,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:i,dy:s}=t,{strides:a,pad:o,dilations:l}=n,c=e,u=Ii(r.shape,c.data.get(r.dataId).values),d=Ii(i.shape,c.data.get(i.dataId).values),{batchSize:f,inHeight:h,inWidth:g,inChannels:y,outHeight:x,outWidth:v,padInfo:b,strideHeight:S,strideWidth:k,filterHeight:$,filterWidth:T,dilationHeight:_,dilationWidth:R,outShape:P}=Vg(r.shape,i.shape,a,o,"NHWC",l);F(s.rank===P.length,()=>`Error in ${pE}, dy must have the same rank as output ${P.length}, but got ${s.rank}`);const O=Ii(P,c.data.get(s.dataId).values),B=FI(i.shape,i.dtype);for(let V=0;V<f;++V)for(let K=0;K<x;++K){const X=K*S-b.top;for(let q=0;q<v;++q){const te=q*k-b.left;for(let j=0;j<y;++j){let Y=Number.MIN_SAFE_INTEGER,Q=0,ne=0;for(let le=0;le<$;++le){const ue=X+le*_;if(ue>=0&&ue<h)for(let de=0;de<T;++de){const pe=te+de*R;if(pe>=0&&pe<g){const me=u[V][ue][pe][j]+d[le][de][j];me>Y&&(Y=me,Q=le,ne=de)}}}B[Q][ne][j]+=O[V][K][q][j]}}}return{dataId:c.write(Ll(B,r.dtype),i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pUe={kernelName:fE,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:i,dy:s}=t,{strides:a,pad:o,dilations:l}=n,c=e,u=Ii(r.shape,c.data.get(r.dataId).values),d=Ii(i.shape,c.data.get(i.dataId).values),{batchSize:f,inHeight:h,inWidth:g,inChannels:y,outHeight:x,outWidth:v,padInfo:b,strideHeight:S,strideWidth:k,filterHeight:$,filterWidth:T,dilationHeight:_,dilationWidth:R,outShape:P}=Vg(r.shape,i.shape,a,o,"NHWC",l);F(s.rank===P.length,()=>`Error in ${fE}, dy must have the same rank as output ${P.length}, but got ${s.rank}`);const O=Ii(P,c.data.get(s.dataId).values),B=FI(r.shape,r.dtype);for(let V=0;V<f;++V)for(let K=0;K<x;++K){const X=K*S-b.top;for(let q=0;q<v;++q){const te=q*k-b.left;for(let j=0;j<y;++j){let Y=Number.MIN_SAFE_INTEGER,Q=X<0?0:X,ne=te<0?0:te;for(let le=0;le<$;++le){const ue=X+le*_;if(ue>=0&&ue<h)for(let de=0;de<T;++de){const pe=te+de*R;if(pe>=0&&pe<g){const me=u[V][ue][pe][j]+d[le][de][j];me>Y&&(Y=me,Q=ue,ne=pe)}}}B[V][Q][ne][j]+=O[V][K][q][j]}}}return{dataId:c.write(Ll(B,r.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oy(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:a}=r;Re(i,"sum");let o;i.dtype==="bool"?o=El({inputs:{x:i},backend:n,attrs:{dtype:"int32"}}):o=$a({inputs:{x:i},backend:n});const l=o.shape.length,c=ut(s,o.shape),u=fn(c,l);let d=c,f=o;u!=null&&(f=zr({inputs:{x:o},backend:n,attrs:{perm:u}}),d=pn(d.length,l)),Yn("sum",d,f.shape.length);const[h,g]=Xn(f.shape,d),y=Br(f.dtype,"int32");let x=F1(n,h,y);const v=oe(g),b=n.data.get(x.dataId).values,S=n.data.get(f.dataId).values;for(let k=0;k<b.length;++k){const $=k*v;let T=0;for(let _=0;_<v;++_)T+=S[$+_];b[k]=T}if(a){const k=_n(x.shape,c),$=x;x=Ot({inputs:{x},backend:n,attrs:{shape:k}}),n.disposeIntermediateTensorInfo($)}return n.disposeIntermediateTensorInfo(o),u!=null&&n.disposeIntermediateTensorInfo(f),x}const hUe={kernelName:Tw,backendName:"cpu",kernelFunc:oy};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mUe(t){const{inputs:e,backend:n,attrs:r}=t,{equation:i}=r,s=e,{allDims:a,summedDims:o,idDims:l}=CR(i,s.length);ER(a.length,l,s);const{path:c,steps:u}=TR(o,l),d=u.length;let f=null,h=a.length;const g=[];for(let y=0;y<d;++y){for(const x of u[y]){const{permutationIndices:v,expandDims:b}=$R(h,l[x]);let S;_R(v)?S=s[x]:(S=zr({inputs:{x:s[x]},backend:n,attrs:{perm:v}}),g.push(S));const k=S.shape.slice();for(let $=0;$<b.length;++$)k.splice(b[$],0,1);$t(S.shape,k)||(S=Ot({inputs:{x:S},backend:n,attrs:{shape:k}}),g.push(S)),f===null?f=S:(f=b2({inputs:{a:S,b:f},backend:n}),g.push(f))}y<d-1&&(c[y]>=0&&(f=oy({inputs:{x:f},backend:n,attrs:{axis:c[y]-(a.length-h),keepDims:!1}}),g.push(f)),h--)}for(const y of g)y!==f&&n.disposeIntermediateTensorInfo(y);return f}const gUe={kernelName:Mb,backendName:"cpu",kernelFunc:mUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yUe(t){const{inputs:e,backend:n}=t,{dy:r,y:i}=e;Re([r,i],"eluGrad");const s=new Float32Array(oe(i.shape)),a=n.data.get(i.dataId).values,o=n.data.get(r.dataId).values;for(let l=0;l<a.length;++l){const c=a[l];c>=1?s[l]=o[l]:s[l]=o[l]*(c+1)}return n.makeTensorInfo(i.shape,"float32",s)}const vUe={kernelName:WI,backendName:"cpu",kernelFunc:yUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xUe=yR,bUe=vR,wUe=xR,SUe=bR,kUe=wR,CUe=SR,$Ue=vt(Ym,t=>{const e=Math.sign(t),n=Math.abs(t),r=1/(1+xUe*n);return e*(1-((((CUe*r+kUe)*r+SUe)*r+wUe)*r+bUe)*r*Math.exp(-n*n))}),EUe={kernelName:Ym,backendName:"cpu",kernelFunc:$Ue};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V1(t){const{inputs:e,backend:n,attrs:r}=t,{input:i}=e,{dim:s}=r,a=i.shape.length,o=i.shape.slice();let l=s;return s<0&&(F(-(a+1)<=s,()=>`Axis must be in the interval [${-(a+1)}, ${a}]`),l=a+s+1),o.splice(l,0,1),Ot({inputs:{x:i},backend:n,attrs:{shape:o}})}const TUe={kernelName:Bb,backendName:"cpu",kernelFunc:V1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Ue=vn((t,e)=>t/e),qR=Ln(Km,_Ue),qE={kernelName:Km,backendName:"cpu",kernelFunc:qR};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T9(t,e,n){const r=t.shape,i=r[0],s=r[1],a=n.data.get(t.dataId),o=a.complexTensorInfos.real,l=a.complexTensorInfos.imag,c=[i,s],u=oe(c),d=Tn("float32",u),f=Tn("float32",u);for(let x=0;x<i;x++){const v=Jc({inputs:{x:o},backend:n,attrs:{begin:[x,0],size:[1,s]}}),b=Jc({inputs:{x:l},backend:n,attrs:{begin:[x,0],size:[1,s]}}),S=ti({inputs:{real:v,imag:b},backend:n}),{real:k,imag:$}=IUe(S,e,n),T=ho(k,$);for(let _=0;_<s;_++){const R=kR(T,_);d[x*s+_]=R.real,f[x*s+_]=R.imag}n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(S)}const h=n.makeTensorInfo(c,"float32",d),g=n.makeTensorInfo(c,"float32",f),y=ti({inputs:{real:h,imag:g},backend:n});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(g),y}function IUe(t,e,n){const r=oe(t.shape),i=n.data.get(t.dataId),s=n.data.get(i.complexTensorInfos.real.dataId).values,a=n.data.get(i.complexTensorInfos.imag.dataId).values;if(NUe(r)){const o=KE(s,a,r,e,n),l=[t.shape[0],t.shape[1]];if(e){const c=n.makeTensorInfo(l,"float32",o.real),u=n.makeTensorInfo(l,"float32",o.imag),d=n.makeTensorInfo([],"float32",$o(r,"float32")),f=$a({inputs:{x:d},backend:n}),h=qE.kernelFunc({inputs:{a:c,b:d},backend:n}),g=qE.kernelFunc({inputs:{a:u,b:f},backend:n}),y=n.data.get(h.dataId).values,x=n.data.get(g.dataId).values;return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(g),{real:y,imag:x}}return o}else{const o=ho(s,a),l=RUe(o,r,e);return uG(l)}}function NUe(t){return(t&t-1)===0}function KE(t,e,n,r,i){if(n===1)return{real:t,imag:e};const s=ho(t,e),a=n/2,o=dG(s),l=o.real,c=o.imag,u=[l.length],d=i.makeTensorInfo(u,"float32",l),f=i.makeTensorInfo(u,"float32",c),h=ti({inputs:{real:d,imag:f},backend:i}),g=fG(s),y=g.real,x=g.imag,v=[y.length],b=i.makeTensorInfo(v,"float32",y),S=i.makeTensorInfo(v,"float32",x),k=ti({inputs:{real:b,imag:S},backend:i}),$=KE(l,c,a,r,i),T=$.real,_=$.imag,R=[T.length],P=i.makeTensorInfo(R,"float32",T),O=i.makeTensorInfo(R,"float32",_),B=ti({inputs:{real:P,imag:O},backend:i}),H=KE(y,x,a,r,i),V=H.real,K=H.imag,X=[V.length],q=i.makeTensorInfo(X,"float32",V),te=i.makeTensorInfo(X,"float32",K),j=ti({inputs:{real:q,imag:te},backend:i}),Y=hG(n,r),Q=[Y.real.length],ne=i.makeTensorInfo(Q,"float32",Y.real),le=i.makeTensorInfo(Q,"float32",Y.imag),ue=ti({inputs:{real:ne,imag:le},backend:i}),de=b2({inputs:{a:ue,b:j},backend:i}),pe=gf({inputs:{a:B,b:de},backend:i}),me=jR({inputs:{a:B,b:de},backend:i}),ie=Zc({inputs:{input:pe},backend:i}),we=Zc({inputs:{input:me},backend:i}),$e=vf({inputs:{input:pe},backend:i}),De=vf({inputs:{input:me},backend:i}),Oe=xf({inputs:[ie,we],backend:i,attrs:{axis:0}}),Ue=xf({inputs:[$e,De],backend:i,attrs:{axis:0}}),je=i.data.get(Oe.dataId).values,Ye=i.data.get(Ue.dataId).values;return i.disposeIntermediateTensorInfo(d),i.disposeIntermediateTensorInfo(f),i.disposeIntermediateTensorInfo(h),i.disposeIntermediateTensorInfo(b),i.disposeIntermediateTensorInfo(S),i.disposeIntermediateTensorInfo(k),i.disposeIntermediateTensorInfo(P),i.disposeIntermediateTensorInfo(O),i.disposeIntermediateTensorInfo(B),i.disposeIntermediateTensorInfo(q),i.disposeIntermediateTensorInfo(te),i.disposeIntermediateTensorInfo(j),i.disposeIntermediateTensorInfo(ne),i.disposeIntermediateTensorInfo(le),i.disposeIntermediateTensorInfo(ue),i.disposeIntermediateTensorInfo(de),i.disposeIntermediateTensorInfo(pe),i.disposeIntermediateTensorInfo(me),i.disposeIntermediateTensorInfo(ie),i.disposeIntermediateTensorInfo($e),i.disposeIntermediateTensorInfo(we),i.disposeIntermediateTensorInfo(De),i.disposeIntermediateTensorInfo(Oe),i.disposeIntermediateTensorInfo(Ue),{real:je,imag:Ye}}function RUe(t,e,n){const r=new Float32Array(e*2);for(let i=0;i<e;i++){let s=0,a=0;for(let o=0;o<e;o++){const l=mG(i*o,e,n),c=kR(t,o);s+=c.real*l.real-c.imag*l.imag,a+=c.real*l.imag+c.imag*l.real}n&&(s/=e,a/=e),pG(r,s,a,i)}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OUe(t){const{inputs:e,backend:n}=t,{input:r}=e,i=oe(r.shape),s=r.shape[r.shape.length-1],a=i/s,o=Ot({inputs:{x:r},backend:n,attrs:{shape:[a,s]}}),l=T9(o,!1,n),c=Ot({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(l),c}const AUe={kernelName:zb,backendName:"cpu",kernelFunc:OUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KR(t){const{backend:e,attrs:n}=t,{shape:r,value:i,dtype:s}=n,a=s||jf(i),o=Cn(a,oe(r));return DUe(o,i,a),e.makeTensorInfo(r,a,o)}const PUe={kernelName:jb,backendName:"cpu",kernelFunc:KR};function DUe(t,e,n){t.fill(e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FUe={kernelName:Vb,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,i=n,s=Tn(r.dtype,oe(r.shape)),[a,o,l,c]=r.shape,u=i.data.get(r.dataId).values;for(let f=0;f<a;f++){const h=f*l*o*c;for(let g=0;g<o;g++){const y=g*(l*c);for(let x=0;x<l;x++){const v=x*c;for(let b=0;b<c;b++){const S=Math.round(l-x-1),k=h+y+v+b;let $=u[k];if(S>=0&&S<l){const T=S*c,_=h+y+T+b;$=u[_]}s[k]=$}}}}return{dataId:i.write(s,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LUe=vn((t,e)=>Math.floor(t/e)),MUe=Ln(tg,LUe,null,"int32"),BUe={kernelName:tg,backendName:"cpu",kernelFunc:MUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s,bias:a,preluActivationWeights:o}=e,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:f,activation:h,leakyreluAlpha:g}=r;let y=$9({inputs:{x:i,filter:s},backend:n,attrs:{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:f}});if(a){const x=y;if(u==="NCHW"&&a.shape.length===1&&a.shape[0]!==1){const v=Ot({inputs:{x:a},backend:n,attrs:{shape:[a.shape[0],1,1]}});y=gf({inputs:{a:y,b:v},backend:n}),n.disposeIntermediateTensorInfo(v)}else y=gf({inputs:{a:y,b:a},backend:n});n.disposeIntermediateTensorInfo(x)}if(h){const x=y;if(u==="NCHW"&&h==="prelu"&&o.shape.length===1&&o.shape[0]!==1){const v=Ot({inputs:{x:o},backend:n,attrs:{shape:[o.shape[0],1,1]}});y=j1(n,y,h,v,g),n.disposeIntermediateTensorInfo(v)}else y=j1(n,y,h,o,g);n.disposeIntermediateTensorInfo(x)}return y}const jUe={kernelName:rm,backendName:"cpu",kernelFunc:zUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s,bias:a,preluActivationWeights:o}=e,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:f,activation:h,leakyreluAlpha:g}=r;let y=E9({inputs:{x:i,filter:s},backend:n,attrs:{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:f}});if(a){const x=y;y=gf({inputs:{a:y,b:a},backend:n}),n.disposeIntermediateTensorInfo(x)}if(h){const x=y;y=j1(n,y,h,o,g),n.disposeIntermediateTensorInfo(x)}return y}const WUe={kernelName:im,backendName:"cpu",kernelFunc:VUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UUe(t){const{inputs:e,backend:n}=t,{params:r,indices:i}=e,s=oe(r.shape),a=i.shape,o=a[a.length-1],[l,c,u,d]=Xw(r,i);if(c===0)return n.makeTensorInfo(l,r.dtype,[]);const f=n.data.get(i.dataId).values,h=n.bufferSync(r),g=iH(f,h,r.dtype,c,o,u,d,r.shape,s);return n.makeTensorInfo(l,r.dtype,g.values)}const GUe={kernelName:Gb,backendName:"cpu",kernelFunc:UUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,indices:s}=e,{axis:a,batchDims:o}=r;Re([i,s],"gatherV2");const l=ut(a,i.shape)[0],c=n.data.get(s.dataId).values,u=i.shape[l];for(let k=0;k<c.length;++k){const $=c[k];F($<=u-1&&$>=0,()=>`GatherV2: the index value ${$} is not in [0, ${u-1}]`)}let d=o;o==null&&(d=0);const f=oe(s.shape),h=NR(i,s,l,d),g=Ot({inputs:{x:i},backend:n,attrs:{shape:[h.batchSize,h.outerSize,h.dimSize,h.sliceSize]}}),y=Ot({inputs:{x:s},backend:n,attrs:{shape:[h.batchSize,f/h.batchSize]}}),x=[h.batchSize,h.outerSize,f/h.batchSize,h.sliceSize],v=n.bufferSync(y),b=n.bufferSync(g),S=sH(b,v,x);return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),n.makeTensorInfo(h.outputShape,S.dtype,S.values)}const qUe={kernelName:Ub,backendName:"cpu",kernelFunc:HUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KUe(t){const{inputs:e,backend:n}=t,{input:r}=e,i=oe(r.shape),s=r.shape[r.shape.length-1],a=i/s,o=Ot({inputs:{x:r},backend:n,attrs:{shape:[a,s]}}),l=T9(o,!0,n),c=Ot({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(l),c}const XUe={kernelName:Hb,backendName:"cpu",kernelFunc:KUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YUe=vt(sg,t=>Number.isFinite(t)?1:0,"bool"),QUe={kernelName:sg,backendName:"cpu",kernelFunc:YUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZUe=vt(ag,t=>Math.abs(t)===1/0?1:0,"bool"),JUe={kernelName:ag,backendName:"cpu",kernelFunc:ZUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eGe=vt(og,t=>Number.isNaN(t)?1:0,"bool"),tGe={kernelName:og,backendName:"cpu",kernelFunc:eGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nGe(t){const{backend:e,attrs:n}=t,{start:r,stop:i,num:s}=n,a=uH(r,i,s);return e.makeTensorInfo([a.length],"float32",a)}const rGe={kernelName:Xb,backendName:"cpu",kernelFunc:nGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iGe=vt(dg,t=>Math.log1p(t)),sGe={kernelName:dg,backendName:"cpu",kernelFunc:iGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aGe=vn((t,e)=>t&&e),oGe=Ln(fg,aGe,null,"bool"),lGe={kernelName:fg,backendName:"cpu",kernelFunc:oGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cGe=vt(pg,t=>t?0:1,"bool"),uGe={kernelName:pg,backendName:"cpu",kernelFunc:cGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dGe=vn((t,e)=>t||e),fGe=Ln(hg,dGe,null,"bool"),pGe={kernelName:hg,backendName:"cpu",kernelFunc:fGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hGe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{depthRadius:s,bias:a,alpha:o,beta:l}=r;Re(i,"LRN");const c=i.shape[3],u=c-1,d=n.data.get(i.dataId).values,f=oe(i.shape),h=new Float32Array(f);function g(y){const x=y%c;let v=y-x+Math.max(0,x-s);const b=y-x+Math.min(x+s,u);let S=0;for(;v<=b;v++){const k=d[v];S+=k*k}return S}for(let y=0;y<f;y++){const x=g(y),v=d[y]*Math.pow(a+o*x,-l);h[y]=v}return n.makeTensorInfo(i.shape,i.dtype,h)}const mGe={kernelName:Yb,backendName:"cpu",kernelFunc:hGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gGe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,y:s,dy:a}=e,{depthRadius:o,bias:l,alpha:c,beta:u}=r;Re(a,"LRNGrad");const d=oe(a.shape),f=a.shape[3],h=n.data.get(a.dataId).values,g=n.data.get(i.dataId).values,y=n.data.get(s.dataId).values,x=new Float32Array(d),v=d;for(let b=0;b<v;b++){const S=b%f,k=b-S+Math.max(0,S-o),$=b-S+Math.min(f,S+o+1);let T=0;for(let _=k;_<$;_++)T+=Math.pow(g[_],2);T=c*T+l;for(let _=k;_<$;_++){let R=-2*c*u*g[_]*y[b]/T;b===_&&(R+=Math.pow(T,-u)),R*=h[b],x[_]+=R}}return n.makeTensorInfo(a.shape,i.dtype,x)}const yGe={kernelName:UI,backendName:"cpu",kernelFunc:gGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _9(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{reductionIndices:s,keepDims:a}=r,o=n;let l=i.shape;const c=l.length,u=ut(s,l);let d=u;const f=fn(d,c);let h=o.data.get(i.dataId).values;if(f!=null){const k=new Array(c);for(let $=0;$<k.length;$++)k[$]=l[f[$]];h=BR(h,l,i.dtype,f,k),d=pn(d.length,c),l=k}Re(i,"max"),Yn("max",d,c);const[g,y]=Xn(l,d),x=oe(y),v=fH(h,x,g,i.dtype),b=o.write(v,g,i.dtype);let S=g;return a&&(S=_n(g,u)),{dataId:b,shape:S,dtype:i.dtype}}const vGe={kernelName:Qb,backendName:"cpu",kernelFunc:_9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xGe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;Re(i,"maxPool");const{filterSize:s,strides:a,pad:o,dimRoundingMode:l}=r,c=1;F(lr(a,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${c}'`);const u=gs(i.shape,s,a,c,o,l);let d;if(u.filterWidth===1&&u.filterHeight===1&&$t(u.inShape,u.outShape))d=$a({inputs:{x:i},backend:n});else{const f=n.data.get(i.dataId).values,h=Me(i.shape),g=HR(f,i.shape,i.dtype,h,u,"max");d=n.makeTensorInfo(u.outShape,i.dtype,g.values)}return d}const bGe={kernelName:Zb,backendName:"cpu",kernelFunc:xGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wGe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{filterSize:s,strides:a,pad:o,dimRoundingMode:l,dataFormat:c}=r;Re(i,"maxPool3d");const u=Eo(i.shape,s,a,1,o,l,c),d=n.data.get(i.dataId).values,f=C9(d,i.shape,i.dtype,Me(i.shape),u,"max");return n.makeTensorInfo(f.shape,"float32",f.values)}const SGe={kernelName:Jb,backendName:"cpu",kernelFunc:wGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kGe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s}=e,{filterSize:a,strides:o,pad:l,dimRoundingMode:c}=r;Re([i,s],"maxPool3DGrad");const u=Eo(s.shape,a,o,1,l,c),d=n.bufferSync(s),f=u8e(d,u),h=u.strideDepth,g=u.strideHeight,y=u.strideWidth,x=u.dilationDepth,v=u.dilationHeight,b=u.dilationWidth,S=u.effectiveFilterDepth,k=u.effectiveFilterHeight,$=u.effectiveFilterWidth,T=S-1-u.padInfo.front,_=$-1-u.padInfo.left,R=k-1-u.padInfo.top,P=qe(s.shape,"float32"),O=n.bufferSync(i);for(let B=0;B<u.batchSize;++B)for(let H=0;H<u.inChannels;++H)for(let V=0;V<u.inDepth;++V)for(let K=0;K<u.inHeight;++K)for(let X=0;X<u.inWidth;++X){const q=V-T,te=K-R,j=X-_;let Y=0;for(let Q=0;Q<S;Q+=x){const ne=(q+Q)/h;if(!(ne<0||ne>=u.outDepth||Math.floor(ne)!==ne))for(let le=0;le<k;le+=v){const ue=(te+le)/g;if(!(ue<0||ue>=u.outHeight||Math.floor(ue)!==ue))for(let de=0;de<$;de+=b){const pe=(j+de)/y;if(pe<0||pe>=u.outWidth||Math.floor(pe)!==pe)continue;const me=S*k*$-1-f.get(B,ne,ue,pe,H),ie=Q*k*$+le*$+de,we=me===ie?1:0;if(we===0)continue;const $e=O.get(B,ne,ue,pe,H);Y+=$e*we}}}P.set(Y,B,V,K,X,H)}return n.makeTensorInfo(P.shape,P.dtype,P.values)}const CGe={kernelName:HI,backendName:"cpu",kernelFunc:kGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Ge(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s,output:a}=e,o=s;Re([s,a],"maxPoolGrad");const{filterSize:l,strides:c,pad:u,dimRoundingMode:d}=r,f=gs(o.shape,l,c,1,u,d),h=n.data.get(o.dataId).values,g=qe(f.outShape,o.dtype,k9(h,o.shape,o.dtype,f).values),y=f.strideHeight,x=f.strideWidth,v=f.dilationHeight,b=f.dilationWidth,S=f.effectiveFilterHeight,k=f.effectiveFilterWidth,$=k-1-f.padInfo.left,T=S-1-f.padInfo.top,_=qe(o.shape,"float32"),R=n.data.get(i.dataId).values,P=qe(i.shape,"float32",R);for(let O=0;O<f.batchSize;++O)for(let B=0;B<f.inChannels;++B)for(let H=0;H<f.inHeight;++H)for(let V=0;V<f.inWidth;++V){const K=H-T,X=V-$;let q=0;for(let te=0;te<S;te+=v){const j=(K+te)/y;if(!(j<0||j>=f.outHeight||Math.floor(j)!==j))for(let Y=0;Y<k;Y+=b){const Q=(X+Y)/x;if(Q<0||Q>=f.outWidth||Math.floor(Q)!==Q)continue;const ne=S*k-1-g.get(O,j,Q,B),le=te*k+Y,ue=ne===le?1:0;if(ue===0)continue;const de=P.get(O,j,Q,B);q+=de*ue}}_.set(q,O,H,V,B)}return n.makeTensorInfo(_.shape,_.dtype,_.values)}const EGe={kernelName:GI,backendName:"cpu",kernelFunc:$Ge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TGe(t,e,n,r,i){const s=Me(e),a=HR(t,e,n,s,i,"max"),o=k9(t,e,n,i,!0,r);return[a.values,o.values]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Ge={kernelName:ew,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:i,strides:s,pad:a,includeBatchInIndex:o}=e,l=n;Re(r,"MaxPoolWithArgmax");const c=l.data.get(r.dataId).values,u=gs(r.shape,i,s,[1,1],a),[d,f]=TGe(c,r.shape,r.dtype,o,u),h=l.write(d,u.outShape,r.dtype),g=l.write(f,u.outShape,r.dtype);return[{dataId:h,shape:u.outShape,dtype:r.dtype},{dataId:g,shape:u.outShape,dtype:"int32"}]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IGe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:a}=r,o=ut(s,i.shape),c=Xn(i.shape,o)[1],u=oe(c),d=[],f=n.makeTensorInfo([],"float32",new Float32Array([u]));d.push(f);const h=El({inputs:{x:i},backend:n,attrs:{dtype:"float32"}});d.push(h);const g=qR({inputs:{a:h,b:f},backend:n});d.push(g);const y=oy({inputs:{x:g},backend:n,attrs:{axis:s,keepDims:a}});return d.forEach(x=>n.disposeIntermediateTensorInfo(x)),y}const NGe={kernelName:tw,backendName:"cpu",kernelFunc:IGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RGe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:a}=r;Re(i,"min");const o=ut(s,i.shape);let l=o;const c=fn(l,i.shape.length);let u=i;c!=null&&(u=zr({inputs:{x:i},backend:n,attrs:{perm:c}}),l=pn(l.length,i.shape.length)),Yn("min",l,u.shape.length);const[d,f]=Xn(u.shape,l),h=oe(f),g=Gn(oe(d),u.dtype),y=n.data.get(u.dataId).values;for(let v=0;v<g.length;++v){const b=v*h;let S=y[b];for(let k=0;k<h;++k){const $=y[b+k];(Number.isNaN($)||$<S)&&(S=$)}g[v]=S}c!=null&&n.disposeIntermediateTensorInfo(u);const x=n.makeTensorInfo(d,u.dtype,g);if(a){const v=_n(d,o),b=Ot({inputs:{x},backend:n,attrs:{shape:v}});return n.disposeIntermediateTensorInfo(x),b}return x}const OGe={kernelName:nw,backendName:"cpu",kernelFunc:RGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AGe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{paddings:s,mode:a}=r;Re(i,"mirrorPad");const o=s.map((S,k)=>S[0]+i.shape[k]+S[1]),l=s.map(S=>S[0]),c=s.map((S,k)=>S[0]+i.shape[k]),u=a==="reflect"?0:1,d=n.data.get(i.dataId).values,f=i.shape.length,h=Me(i.shape),g=oe(o),y=o.length,x=Me(o),v=Tn(i.dtype,g);for(let S=0;S<g;S++){let k=yu(S,y,x);for(let T=0;T<y;T++)k[T]<l[T]?k[T]=l[T]*2-k[T]-u:k[T]>=c[T]&&(k[T]=(c[T]-1)*2-k[T]+u);k=k.map((T,_)=>T-l[_]);const $=Bs(k,f,h);v[S]=d[$]}return{dataId:n.write(v,o,i.dtype),shape:o,dtype:i.dtype}}const PGe={kernelName:rw,backendName:"cpu",kernelFunc:AGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DGe=vn((t,e)=>{const n=t%e;return t<0&&e<0||t>=0&&e>=0?n:(n+e)%e}),FGe=Ln(yg,DGe),LGe={kernelName:yg,backendName:"cpu",kernelFunc:FGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I9(t){const{inputs:e,backend:n,attrs:r}=t,{logits:i}=e,{dim:s}=r,a=i.shape.length;let o=s;if(o===-1&&(o=a-1),o!==a-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${a} and dim was ${o}`);const l=ut([o],i.shape),c=_9({inputs:{x:i},backend:n,attrs:{reductionIndices:l,keepDims:!1}}),u=_n(c.shape,l),d=Ot({inputs:{x:c},backend:n,attrs:{shape:u}}),f=jR({inputs:{a:i,b:d},backend:n}),h=tH({inputs:{x:f},backend:n}),g=oy({inputs:{x:h},backend:n,attrs:{axis:l,keepDims:!1}}),y=Ot({inputs:{x:g},backend:n,attrs:{shape:u}}),x=qR({inputs:{a:h,b:y},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),x}const MGe={kernelName:Nw,backendName:"cpu",kernelFunc:I9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BGe(t){const{inputs:e,backend:n,attrs:r}=t,{logits:i}=e,{numSamples:s,seed:a,normalized:o}=r;Re(i,"multinomial");const l=o?i:I9({inputs:{logits:i},backend:n,attrs:{dim:-1}}),c=l.shape[0],u=l.shape[1],d=n.data.get(l.dataId).values,f=[c,s],h=Gn(oe(f),"int32");for(let g=0;g<c;++g){const y=g*u,x=new Float32Array(u-1);x[0]=d[y];for(let S=1;S<x.length;++S)x[S]=x[S-1]+d[y+S];const v=e2.alea(a.toString()),b=g*s;for(let S=0;S<s;++S){const k=v();h[b+S]=x.length;for(let $=0;$<x.length;$++)if(k<x[$]){h[b+S]=$;break}}}return o||n.disposeIntermediateTensorInfo(l),n.makeTensorInfo(f,"int32",h)}const zGe={kernelName:iw,backendName:"cpu",kernelFunc:BGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jGe=c2;function VGe(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:s}=e,{maxOutputSize:a,iouThreshold:o,scoreThreshold:l}=r;Re(i,"NonMaxSuppression");const c=n.data.get(i.dataId).values,u=n.data.get(s.dataId).values,{selectedIndices:d}=jGe(c,u,a,o,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}const WGe={kernelName:aw,backendName:"cpu",kernelFunc:VGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UGe=u2;function GGe(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:s}=e,{maxOutputSize:a,iouThreshold:o,scoreThreshold:l,padToMaxOutputSize:c}=r;Re(i,"NonMaxSuppressionPadded");const u=n.data.get(i.dataId).values,d=n.data.get(s.dataId).values,{selectedIndices:f,validOutputs:h}=UGe(u,d,a,o,l,c);return[n.makeTensorInfo([f.length],"int32",new Int32Array(f)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}const HGe={kernelName:ow,backendName:"cpu",kernelFunc:GGe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qGe=d2;function KGe(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:s}=e,{maxOutputSize:a,iouThreshold:o,scoreThreshold:l,softNmsSigma:c}=r;Re(i,"NonMaxSuppressionWithScore");const u=n.data.get(i.dataId).values,d=n.data.get(s.dataId).values,f=a,h=o,g=l,y=c,{selectedIndices:x,selectedScores:v}=qGe(u,d,f,h,g,y);return[n.makeTensorInfo([x.length],"int32",new Int32Array(x)),n.makeTensorInfo([v.length],"float32",new Float32Array(v))]}const XGe={kernelName:lw,backendName:"cpu",kernelFunc:KGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YGe(t){const{inputs:e,backend:n,attrs:r}=t,{indices:i}=e,{dtype:s,depth:a,onValue:o,offValue:l}=r;Re(i,"oneHot");const c=oe(i.shape),u=new Float32Array(c*a);u.fill(l);const d=n.data.get(i.dataId).values;for(let f=0;f<c;++f)d[f]>=0&&d[f]<a&&(u[f*a+d[f]]=o);return n.makeTensorInfo([...i.shape,a],s,u)}const QGe={kernelName:uw,backendName:"cpu",kernelFunc:YGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W1(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(r.dtype==="complex64"){const i=Zc({inputs:{input:r},backend:n}),s=W1({inputs:{x:i},backend:n}),a=vf({inputs:{input:r},backend:n}),o=W1({inputs:{x:a},backend:n}),l=ti({inputs:{real:s,imag:o},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),l}else return KR({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}const ZGe={kernelName:Gw,backendName:"cpu",kernelFunc:W1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N9(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(r.dtype==="complex64"){const i=Zc({inputs:{input:r},backend:n}),s=N9({inputs:{x:i},backend:n}),a=vf({inputs:{input:r},backend:n}),o=W1({inputs:{x:a},backend:n}),l=ti({inputs:{real:s,imag:o},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),l}else return KR({backend:n,attrs:{shape:r.shape,value:1,dtype:r.dtype}})}const JGe={kernelName:cw,backendName:"cpu",kernelFunc:N9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R9(t){const{inputs:e,backend:n,attrs:r}=t,{axis:i}=r;if(e.length===1)return V1({inputs:{input:e[0]},backend:n,attrs:{dim:i}});const s=e[0].shape,a=e[0].dtype;e.forEach(u=>{Kn(s,u.shape,"All tensors passed to stack must have matching shapes"),F(a===u.dtype,()=>"All tensors passed to stack must have matching dtypes")});const o=[],l=e.map(u=>{const d=V1({inputs:{input:u},backend:n,attrs:{dim:i}});return o.push(d),d}),c=xf({inputs:l,backend:n,attrs:{axis:i}});return o.forEach(u=>n.disposeIntermediateTensorInfo(u)),c}const eHe={kernelName:dw,backendName:"cpu",kernelFunc:R9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tHe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{paddings:s,constantValue:a}=r;Re(i,"pad");const o=s.map((b,S)=>b[0]+i.shape[S]+b[1]),l=s.map(b=>b[0]),c=n.data.get(i.dataId).values,u=oe(i.shape),d=i.shape.length,f=Me(i.shape),h=oe(o),g=o.length,y=Me(o),x=Tn(i.dtype,h);a!==0&&x.fill(a);for(let b=0;b<u;b++){const k=yu(b,d,f).map((T,_)=>T+l[_]),$=Bs(k,g,y);x[$]=c[b]}return{dataId:n.write(x,o,i.dtype),shape:o,dtype:i.dtype}}const O9={kernelName:fw,backendName:"cpu",kernelFunc:tHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nHe=vn((t,e)=>Math.pow(t,e)),rHe=Ln(bg,nHe),iHe={kernelName:bg,backendName:"cpu",kernelFunc:rHe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sHe(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:i,paramsDenseValues:s,indices:a}=e,o=i.map(x=>n.data.get(x.dataId).values),l=i.map(x=>x.shape),c=n.data.get(s.dataId).values,u=n.data.get(a.dataId).values,[d,f,h]=vH(o,l,c,s.shape,s.dtype,u,a.shape),g=d.map(x=>n.makeTensorInfo([x.length],"int32",x)),y=n.makeTensorInfo(h,s.dtype,f);return g.concat([y])}const aHe={kernelName:mw,backendName:"cpu",kernelFunc:sHe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oHe(t){const{inputs:e,backend:n,attrs:r}=t,{shape:i,values:s,defaultValue:a,rowPartitionTensors:o}=e,{rowPartitionTypes:l}=r,c=n.data.get(i.dataId).values,u=n.data.get(s.dataId).values,d=n.data.get(a.dataId).values,f=o.map(x=>n.data.get(x.dataId).values),h=o.map(x=>x.shape),[g,y]=xH(c,i.shape,u,s.shape,s.dtype,d,a.shape,f,h,l);return n.makeTensorInfo(g,s.dtype,y)}const lHe={kernelName:gw,backendName:"cpu",kernelFunc:oHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cHe(t){const{backend:e,attrs:n}=t,{start:r,stop:i,dtype:s,step:a}=n,o=bH(r,i,a,s);return e.makeTensorInfo([o.length],s,o)}const uHe={kernelName:yw,backendName:"cpu",kernelFunc:cHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dHe=vt(wg,t=>1/t),fHe={kernelName:wg,backendName:"cpu",kernelFunc:dHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pHe(t){const{inputs:e,backend:n,attrs:r}=t,{images:i}=e,{alignCorners:s,halfPixelCenters:a,size:o}=r;Re(i,"resizeBilinear");const l=Me(i.shape),[c,u]=o,[d,f,h,g]=i.shape,y=n.data.get(i.dataId).values,x=new Float32Array(oe([d,c,u,g])),v=[s&&c>1?f-1:f,s&&u>1?h-1:h],b=[s&&c>1?c-1:c,s&&u>1?u-1:u];let S=0;const k=v[0]/b[0],$=v[1]/b[1];for(let T=0;T<d;T++)for(let _=0;_<c;_++){let R;a?R=k*(_+.5)-.5:R=k*_;const P=Math.max(0,Math.floor(R)),O=R-P,B=Math.min(f-1,Math.ceil(R)),H=T*l[0]+P*l[1],V=T*l[0]+B*l[1];for(let K=0;K<u;K++){let X;a?X=$*(K+.5)-.5:X=$*K;const q=Math.max(0,Math.floor(X)),te=X-q,j=Math.min(h-1,Math.ceil(X)),Y=H+q*l[2],Q=V+q*l[2],ne=H+j*l[2],le=V+j*l[2];for(let ue=0;ue<g;ue++){const de=y[Y+ue],pe=y[Q+ue],me=y[ne+ue],ie=y[le+ue],we=de+(me-de)*te,$e=pe+(ie-pe)*te,De=we+($e-we)*O;x[S++]=De}}}return n.makeTensorInfo([d,c,u,g],"float32",x)}const hHe={kernelName:ww,backendName:"cpu",kernelFunc:pHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mHe(t){const{inputs:e,backend:n,attrs:r}=t,{images:i,dy:s}=e,{alignCorners:a}=r;Re([s,i],"resizeBilinearGrad");const o=Me(i.shape),[l,c,u,d]=i.shape,[,f,h]=s.shape,g=new Float32Array(l*c*u*d),y=[a&&f>1?c-1:c,a&&h>1?u-1:u],x=[a&&f>1?f-1:f,a&&h>1?h-1:h],v=y[0]/x[0],b=y[1]/x[1],S=n.data.get(s.dataId).values;let k=0;for(let $=0;$<l;$++){const T=$*o[0];for(let _=0;_<f;_++){const R=_*v,P=Math.floor(R),O=Math.min(Math.ceil(R),c-1),B=T+P*o[1],H=T+O*o[1],V=R-P,K=1-V;for(let X=0;X<h;X++){const q=X*b,te=Math.floor(q),j=Math.min(Math.ceil(q),u-1),Y=q-te,Q=1-Y,ne=B+te*o[2],le=B+j*o[2],ue=H+te*o[2],de=H+j*o[2],pe=K*Q,me=K*Y,ie=V*Q,we=V*Y;for(let $e=0;$e<d;$e++){const De=S[k++];g[ne+$e]+=De*pe,g[le+$e]+=De*me,g[ue+$e]+=De*ie,g[de+$e]+=De*we}}}}return n.makeTensorInfo([l,u,c,d],"float32",g)}const gHe={kernelName:KI,backendName:"cpu",kernelFunc:mHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yHe(t){const{inputs:e,backend:n,attrs:r}=t,{images:i}=e,{alignCorners:s,halfPixelCenters:a,size:o}=r;Re(i,"resizeNearestNeighbor");const l=Me(i.shape),[c,u]=o,[d,f,h,g]=i.shape,y=n.data.get(i.dataId).values,x=new Float32Array(d*c*u*g),v=[s&&c>1?f-1:f,s&&u>1?h-1:h],b=[s&&c>1?c-1:c,s&&u>1?u-1:u],S=v[0]/b[0],k=v[1]/b[1];let $=0;for(let T=0;T<d;T++){const _=T*l[0];for(let R=0;R<c;R++){const P=a?S*(R+.5):S*R;let O=Math.min(f-1,s?Math.round(P):Math.floor(P));a&&(O=Math.max(0,O));const B=_+O*l[1];for(let H=0;H<u;H++){const V=a?k*(H+.5):k*H;let K=Math.min(h-1,s?Math.round(V):Math.floor(V));a&&(K=Math.max(0,K));const X=B+K*l[2];for(let q=0;q<g;q++){const te=y[X+q];x[$++]=te}}}}return n.makeTensorInfo([d,c,u,g],i.dtype,x)}const vHe={kernelName:bw,backendName:"cpu",kernelFunc:yHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xHe(t){const{inputs:e,backend:n,attrs:r}=t,{images:i,dy:s}=e,{alignCorners:a}=r;Re([s,i],"resizeNearestNeighborGrad");const o=Me(i.shape),l=Me(s.shape),[c,u,d,f]=i.shape,[,h,g]=s.shape,y=new Float32Array(c*u*d*f),x=n.data.get(s.dataId).values,v=[a&&h>1?u-1:u,a&&g>1?d-1:d],b=[a&&h>1?h-1:h,a&&g>1?g-1:g],S=v[0]/b[0],k=v[1]/b[1],$=1/S,T=1/k,_=Math.ceil($)*2+2,R=Math.ceil(T)*2+2;for(let P=0;P<c;P++){const O=P*o[0];for(let B=0;B<u;B++){const H=O+B*o[1],V=Math.floor(B*$),K=Math.floor(V-_/2);for(let X=0;X<d;X++){const q=H+X*o[2],te=Math.floor(X*T),j=Math.floor(te-R/2);for(let Y=0;Y<f;Y++){let Q=0;for(let ne=0;ne<_;ne++){const le=ne+K;if(le<0||le>=h)continue;const ue=O+le*l[1],de=le*S,pe=Math.min(u-1,a?Math.round(de):Math.floor(de));if(B===pe)for(let me=0;me<R;me++){const ie=me+j;if(ie<0||ie>=g)continue;const we=ue+ie*l[2],$e=ie*k,De=Math.min(d-1,a?Math.round($e):Math.floor($e));X===De&&(Q+=x[we+Y])}}y[q+Y]=Q}}}}return n.makeTensorInfo(i.shape,i.dtype,y)}const bHe={kernelName:qI,backendName:"cpu",kernelFunc:xHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wHe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{dims:s}=r;Re(i,"reverse");const a=i.shape.length,o=ut(s,i.shape);if(a===0)return $a({inputs:{x:i},backend:n});const l=new En(i.shape,i.dtype),c=n.bufferSync(i);for(let u=0;u<l.size;u++){const d=l.indexToLoc(u),f=d.slice();o.forEach(h=>f[h]=i.shape[h]-1-f[h]),l.set(c.get(...f),...d)}return n.makeTensorInfo(l.shape,l.dtype,l.values)}const SHe={kernelName:Sw,backendName:"cpu",kernelFunc:wHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kHe={kernelName:Hw,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:i,fillValue:s,center:a}=e,o=n,l=Tn(r.dtype,oe(r.shape)),[c,u,d,f]=r.shape,[h,g]=fR(a,u,d),y=255,x=Math.sin(i),v=Math.cos(i),b=o.data.get(r.dataId).values;for(let k=0;k<c;k++){const $=k*d*u*f;for(let T=0;T<u;T++){const _=T*(d*f);for(let R=0;R<d;R++){const P=R*f;for(let O=0;O<f;O++){const B=[c,T,R,O],H=B[2],V=B[1];let K=(H-h)*v-(V-g)*x,X=(H-h)*x+(V-g)*v;K=Math.round(K+h),X=Math.round(X+g);let q=s;if(typeof s!="number"&&(O===3?q=y:q=s[O]),K>=0&&K<d&&X>=0&&X<u){const j=X*(d*f),Y=K*f,Q=$+j+Y+O;q=b[Q]}const te=$+_+P+O;l[te]=q}}}}return{dataId:o.write(l,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CHe=vt(Cg,t=>{const e=Math.floor(t);return t-e<.5?Math.floor(t):t-e>.5?Math.ceil(t):e%2===0?e:e+1}),$He={kernelName:Cg,backendName:"cpu",kernelFunc:CHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EHe(t){const{inputs:e,backend:n,attrs:r}=t,{indices:i,updates:s}=e,{shape:a}=r,{sliceRank:o,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=Wf(s,i,a),f=!0,h=n.bufferSync(i),g=n.bufferSync(s),y=Td(h,g,a,d,c,l,o,u,0,f);return n.makeTensorInfo(a,y.dtype,y.values)}const THe={kernelName:kw,backendName:"cpu",kernelFunc:EHe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _He(t,e){let n=0,r=t.length,i=0;for(;n<r;)i=Math.floor((n+r)/2),t[i]<e?n=i+1:r=i;return r}function IHe(t,e){let n=0,r=t.length,i=0;for(;n<r;)i=Math.floor((n+r)/2),t[i]<=e?n=i+1:r=i;return r}function NHe(t,e,n,r,i,s){const a=Cn("int32",n*i);for(let o=0;o<n;++o){const l=t.slice(o*r,(o+1)*r),c=o*i;for(let u=0;u<i;++u)a[c+u]=s==="left"?_He(l,e[u+c]):IHe(l,e[u+c])}return a}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RHe(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:i,values:s}=e,{side:a}=r,o=n.data.get(i.dataId).values,l=n.data.get(s.dataId).values,c=NHe(o,l,i.shape[0],i.shape[1],s.shape[1],a);return n.makeTensorInfo(s.shape,"int32",c)}const OHe={kernelName:Cw,backendName:"cpu",kernelFunc:RHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AHe(t){const{inputs:e,backend:n}=t,{condition:r,t:i,e:s}=e;Re([r,i,s],"select");const a=r.shape.length,o=n.data.get(r.dataId).values,l=n.data.get(i.dataId).values,c=n.data.get(s.dataId).values,u=Br(i.dtype,s.dtype),d=Gn(oe(i.shape),u);let f=0;const h=a===0||a>1||i.shape.length===1?1:oe(i.shape.slice(1));for(let g=0;g<o.length;g++)for(let y=0;y<h;y++)o[g]===1?d[f++]=l[g]:d[f++]=c[g];return n.makeTensorInfo(i.shape,u,d)}const PHe={kernelName:$w,backendName:"cpu",kernelFunc:AHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DHe=mR,FHe=gR,LHe=vt(Eg,t=>t>=0?FHe*t:DHe*(Math.exp(t)-1)),MHe={kernelName:Eg,backendName:"cpu",kernelFunc:LHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BHe=vt(Ig,t=>t<0?-1:t>0?1:0),zHe={kernelName:Ig,backendName:"cpu",kernelFunc:BHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jHe=vt(Tg,t=>Math.sin(t)),VHe={kernelName:Tg,backendName:"cpu",kernelFunc:jHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WHe=vt(_g,t=>Math.sinh(t)),UHe={kernelName:_g,backendName:"cpu",kernelFunc:WHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GHe=11920928955078125e-23,dL=Math.log(GHe)+2,HHe=vt(Rg,t=>{const e=t>-dL,n=t<dL,r=Math.exp(t);let i;return n?i=r:e?i=t:i=Math.log(1+r),i}),qHe={kernelName:Rg,backendName:"cpu",kernelFunc:HHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KHe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockShape:s,paddings:a}=r;Re([i],"spaceToBatchND");const o=oe(s),l=[[0,0]];l.push(...a);for(let T=1+s.length;T<i.shape.length;++T)l.push([0,0]);const c=O9.kernelFunc({inputs:{x:i},backend:n,attrs:{paddings:l,constantValue:0}}),u=Qg(c.shape,s,o,!1),d=Zg(u.length,s.length,!1),f=Jg(c.shape,s,o,!1),y=Ot({inputs:{x:c},backend:n,attrs:{shape:u}}),b=zr({inputs:{x:y},backend:n,attrs:{perm:d}}),$=Ot({inputs:{x:b},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(b),$}const XHe={kernelName:_w,backendName:"cpu",kernelFunc:KHe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YHe(t){const{inputs:e,backend:n}=t,{indices:r,values:i,denseShape:s,defaultValue:a}=e;if(s.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${s.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${r.shape}`);if(i.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${i.shape}`);if(a.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${a.shape}`);const o=n.data.get(r.dataId).values,l=n.data.get(i.dataId).values,c=n.data.get(s.dataId).values,u=n.data.get(a.dataId).values[0],[d,f,h,g,y]=CH(o,r.shape,r.dtype,l,i.dtype,c,u);return[n.makeTensorInfo(f,r.dtype,d),n.makeTensorInfo([f[0]],i.dtype,h),n.makeTensorInfo([g.length],"bool",new Uint8Array(g.map(x=>Number(x)))),n.makeTensorInfo([y.length],r.dtype,new Int32Array(y))]}const QHe={kernelName:Rw,backendName:"cpu",kernelFunc:YHe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZHe(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:i,newShape:s}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${r.shape}`);if(i.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${i.shape}`);if(s.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${s.shape}`);const a=Array.from(n.data.get(i.dataId).values),o=n.data.get(r.dataId).values,l=Array.from(n.data.get(s.dataId).values),[c,u,d]=$H(o,r.shape,r.dtype,a,l);return[n.makeTensorInfo(u,r.dtype,c),n.makeTensorInfo([d.length],s.dtype,new Int32Array(d))]}const JHe={kernelName:Ow,backendName:"cpu",kernelFunc:ZHe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e9e(t){const{inputs:e,backend:n}=t,{data:r,indices:i,segmentIds:s}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${i.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${s.shape}`);if(i.shape[0]!==s.shape[0])throw new Error("segmentIds and indices should have same size.");const a=n.data.get(r.dataId).values,o=n.data.get(i.dataId).values,l=n.data.get(s.dataId).values,[c,u]=zR(a,r.shape,r.dtype,o,l,!0);return n.makeTensorInfo(u,r.dtype,c)}const t9e={kernelName:Aw,backendName:"cpu",kernelFunc:e9e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n9e(t){const{inputs:e,backend:n}=t,{data:r,indices:i,segmentIds:s}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${i.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${s.shape}`);if(i.shape[0]!==s.shape[0])throw new Error("segmentIds and indices should have same size.");const a=n.data.get(r.dataId).values,o=n.data.get(i.dataId).values,l=n.data.get(s.dataId).values,[c,u]=zR(a,r.shape,r.dtype,o,l);return n.makeTensorInfo(u,r.dtype,c)}const r9e={kernelName:Pw,backendName:"cpu",kernelFunc:n9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i9e(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:i,sparseValues:s,defaultValue:a}=e,{outputShape:o}=r,{sliceRank:l,numUpdates:c,sliceSize:u,strides:d,outputSize:f}=Wf(s,i,o),h=!1,g=n.bufferSync(i);let y;switch(s.dtype){case"bool":{const x=n.bufferSync(s),v=!!n.data.get(a.dataId).values[0];y=Td(g,x,o,f,u,c,l,d,v,h);break}case"float32":{const x=n.bufferSync(s),v=n.data.get(a.dataId).values[0];y=Td(g,x,o,f,u,c,l,d,v,h);break}case"int32":{const x=n.bufferSync(s),v=n.data.get(a.dataId).values[0];y=Td(g,x,o,f,u,c,l,d,v,h);break}case"string":{const x=n.bufferSync(s),v=fo(n.data.get(a.dataId).values[0]);y=Td(g,x,o,f,u,c,l,d,v,h);break}default:throw new Error(`Unsupported type ${s.dtype}`)}return n.makeTensorInfo(o,y.dtype,y.values)}const s9e={kernelName:Dw,backendName:"cpu",kernelFunc:i9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a9e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{numOrSizeSplits:s,axis:a}=r,o=ut(a,i.shape)[0],l=IR(i,s,o),c=new Array(i.shape.length).fill(0),u=i.shape.slice();return l.map(d=>{const f=[...u];f[o]=d;const h=Jc({inputs:{x:i},backend:n,attrs:{begin:c,size:f}});return c[o]+=d,h})}const o9e={kernelName:Iw,backendName:"cpu",kernelFunc:a9e};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l9e={kernelName:XI,backendName:"cpu",kernelFunc:({inputs:t,backend:e})=>{const{x:n}=t,r=e;Re(n,"square");const i=r.data.get(n.dataId).values,s=new Float32Array(i.length);for(let o=0;o<i.length;++o){const l=i[o];s[o]=l*l}return{dataId:r.write(s,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c9e=vt(Mg,(t,e)=>{const n=e;return isNaN(t)?NaN:t>0?1:n.alpha}),u9e={kernelName:Mg,backendName:"cpu",kernelFunc:c9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d9e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{begin:s,end:a,strides:o,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:d,shrinkAxisMask:f}=r;Re(i,"stridedSlice");const{finalShapeSparse:h,finalShape:g,isIdentity:y,sliceDim0:x,isSimpleSlice:v,begin:b,end:S,strides:k}=xN(i.shape,s,a,o,l,c,u,d,f);let $;if(y)$=Ot({inputs:{x:i},backend:n,attrs:{shape:g}});else if(x||v){F(i.shape.length>=1,()=>`Input must have rank at least 1, got: ${i.shape.length}`);const T=mN(b,S,k),_=Jc({inputs:{x:i},backend:n,attrs:{begin:b,size:T}});$=Ot({inputs:{x:_},backend:n,attrs:{shape:g}}),n.disposeIntermediateTensorInfo(_)}else{const T=n.bufferSync(i),_=TH(h,T,k,b);$=n.makeTensorInfo(g,_.dtype,_.values)}return $}const f9e={kernelName:Fw,backendName:"cpu",kernelFunc:d9e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p9e(t){const{inputs:e,backend:n,attrs:r}=t,{separator:i,nGramWidths:s,leftPad:a,rightPad:o,padWidth:l,preserveShortSequences:c}=r,{data:u,dataSplits:d}=e,f=n.data.get(u.dataId).values,h=n.data.get(d.dataId).values,[g,y]=_H(f,h,i,s,a,o,l,c);return[n.makeTensorInfo([g.length],"string",g),n.makeTensorInfo(d.shape,"int32",y)]}const h9e={kernelName:Lw,backendName:"cpu",kernelFunc:p9e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m9e(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:i}=r,{input:s,delimiter:a}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(s.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${s.shape}`);if(a.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${a.shape}`);const o=n.data.get(s.dataId).values,l=n.data.get(a.dataId).values[0],[c,u,d]=IH(o,l,i),f=u.length;return[n.makeTensorInfo([f,2],"int32",c),n.makeTensorInfo([f],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const g9e={kernelName:Mw,backendName:"cpu",kernelFunc:m9e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y9e(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:i}=r,{input:s}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(i<=0)throw new Error("Number of buckets must be at least 1");const a=n.data.get(s.dataId).values,o=NH(a,i);return n.makeTensorInfo(s.shape,"int32",o)}const v9e={kernelName:Bw,backendName:"cpu",kernelFunc:y9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const x9e=vt(Dg,t=>Math.tan(t)),b9e={kernelName:Dg,backendName:"cpu",kernelFunc:x9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w9e=vt(Fg,t=>Math.tanh(t)),S9e={kernelName:Fg,backendName:"cpu",kernelFunc:w9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k9e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{reps:s}=r;Re(i,"tile");const a=OH(n.bufferSync(i),s);return n.makeTensorInfo(a.shape,a.dtype,a.values)}const C9e={kernelName:Lg,backendName:"cpu",kernelFunc:k9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $9e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{k:s,sorted:a}=r;Re(i,"topk");const o=n.data.get(i.dataId).values,[l,c]=PH(o,i.shape,i.dtype,s,a);return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(c.shape,c.dtype,c.values)]}const E9e={kernelName:zw,backendName:"cpu",kernelFunc:$9e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T9e(t){const{inputs:e,attrs:n,backend:r}=t,{image:i,transforms:s}=e,{interpolation:a,fillMode:o,fillValue:l,outputShape:c}=n,[u,d,f,h]=i.shape,[g,y]=c??[d,f],x=[u,g,y,h],v=Me(i.shape),b=v[0],S=v[1],k=v[2],$=Me(x),T=$[0],_=$[1],R=$[2],P=Tn(i.dtype,oe(x));P.fill(l);const O=r.data.get(i.dataId).values,B=r.data.get(s.dataId).values;for(let V=0;V<u;++V){const K=s.shape[0]===1?B:B.subarray(V*8,V*8+8);for(let X=0;X<g;++X)for(let q=0;q<y;++q)for(let te=0;te<h;++te){let j;const Y=K[6]*q+K[7]*X+1;if(Y===0)continue;const Q=(K[0]*q+K[1]*X+K[2])/Y,ne=(K[3]*q+K[4]*X+K[5])/Y,le=fL(Q,f,o),ue=fL(ne,d,o);switch(a){case"nearest":j=A9e(O,d,f,b,S,k,V,ue,le,te,l);break;case"bilinear":j=P9e(O,d,f,b,S,k,V,ue,le,te,l);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${a}`)}const de=V*T+X*_+q*R+te;P[de]=j}return r.makeTensorInfo(x,i.dtype,P)}return{dataId:r.write(P,x,i.dtype),shape:i.shape,dtype:i.dtype}}const _9e={kernelName:jw,backendName:"cpu",kernelFunc:T9e};function fL(t,e,n){switch(n){case"reflect":return I9e(t,e);case"wrap":return N9e(t,e);case"nearest":return O9e(t,e);case"constant":default:return R9e(t)}}function I9e(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=2*e;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-e?n+r:-n-1}else if(n>e-1)if(e<=1)n=0;else{const r=2*e;n-=r*Math.trunc(n/r),n>=e&&(n=r-n-1)}return wl(0,n,e-1)}function N9e(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=e-1;n+=e*(Math.trunc(-n/r)+1)}else if(n>e-1)if(e<=1)n=0;else{const r=e-1;n-=e*Math.trunc(n/r)}return wl(0,n,e-1)}function R9e(t,e){return t}function O9e(t,e){return wl(0,t,e-1)}function oh(t,e,n,r,i,s,a,o,l,c,u){const d=a*r+o*i+l*s+c;return 0<=o&&o<e&&0<=l&&l<n?t[d]:u}function A9e(t,e,n,r,i,s,a,o,l,c,u){const d=Math.round(o),f=Math.round(l);return oh(t,e,n,r,i,s,a,d,f,c,u)}function P9e(t,e,n,r,i,s,a,o,l,c,u){const d=Math.floor(o),f=Math.floor(l),h=d+1,g=f+1,y=(g-l)*oh(t,e,n,r,i,s,a,d,f,c,u)+(l-f)*oh(t,e,n,r,i,s,a,d,g,c,u),x=(g-l)*oh(t,e,n,r,i,s,a,h,f,c,u)+(l-f)*oh(t,e,n,r,i,s,a,h,g,c,u);return(h-o)*y+(o-d)*x}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D9e(t){const{inputs:e,attrs:n,backend:r}=t,{axis:i}=n,{x:s}=e;Re(s,"unique");const a=r.data.get(s.dataId).values,{outputValues:o,outputShape:l,indices:c}=DH(a,i,s.shape,s.dtype);return[r.makeTensorInfo(l,s.dtype,o),r.makeTensorInfo([c.length],"int32",c)]}const F9e={kernelName:Vw,backendName:"cpu",kernelFunc:D9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L9e(t){const{inputs:e,backend:n,attrs:r}=t,{value:i}=e;let{axis:s}=r;s<0&&(s+=i.shape.length);const a=i.shape.length,o=i.shape[s],l=new Array(a-1);let c=0;for(let h=0;h<a;h++)h!==s&&(l[c++]=i.shape[h]);const u=new Array(a).fill(0),d=i.shape.slice();d[s]=1;const f=new Array(o);for(let h=0;h<f.length;h++){u[s]=h;const g=Jc({inputs:{x:i},backend:n,attrs:{begin:u,size:d}});f[h]=Ot({inputs:{x:g},backend:n,attrs:{shape:l}}),n.disposeIntermediateTensorInfo(g)}return f}const M9e={kernelName:Ww,backendName:"cpu",kernelFunc:L9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B9e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,segmentIds:s}=e,{numSegments:a}=r;Re(i,"unsortedSegmentSum");const o=i.shape.length,l=s.shape.length,c=[],u=[],d=o-l;let f=s;for(let g=0;g<d;++g){const y=V1({inputs:{input:f},backend:n,attrs:{dim:g+1}});f=y,u.push(y)}for(let g=0;g<a;++g){const y=$o(g,"int32"),x=n.makeTensorInfo([],"int32",y),v=JG({inputs:{a:x,b:f},backend:n}),b=El({inputs:{x:v},backend:n,attrs:{dtype:"float32"}}),S=b2({inputs:{a:b,b:i},backend:n}),k=oy({inputs:{x:S},backend:n,attrs:{axis:0,keepDims:!1}});c.push(k),u.push(x),u.push(v),u.push(b),u.push(S),u.push(k)}const h=R9({inputs:c,backend:n,attrs:{axis:0}});return u.forEach(g=>n.disposeIntermediateTensorInfo(g)),h}const z9e={kernelName:Uw,backendName:"cpu",kernelFunc:B9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j9e=[MWe,jDe,zWe,VWe,qDe,UWe,HWe,KWe,YWe,ZWe,e8e,n8e,i8e,o8e,c8e,f8e,h8e,g8e,v8e,FWe,b8e,S8e,C8e,E8e,GDe,XDe,_8e,VDe,N8e,O8e,A8e,D8e,L8e,B8e,j8e,W8e,G8e,q8e,X8e,Q8e,J8e,tUe,rUe,iUe,aUe,lUe,uUe,dUe,fUe,pUe,gUe,IWe,vUe,YDe,EUe,QDe,TUe,JDe,AUe,PUe,FUe,tFe,BUe,jUe,WUe,GUe,qUe,rFe,sFe,WDe,XUe,R8e,QUe,JUe,tGe,NWe,oFe,cFe,rGe,dFe,sGe,lGe,uGe,pGe,mGe,yGe,vGe,pFe,bGe,SGe,CGe,EGe,_Ge,NGe,OGe,mFe,PGe,LGe,zGe,yFe,xFe,WGe,HGe,XGe,wFe,QGe,JGe,eHe,O9,iHe,OWe,CFe,aHe,lHe,uHe,UDe,qE,fHe,AWe,PWe,DWe,hHe,gHe,vHe,bHe,SHe,kHe,$He,OFe,THe,OHe,PHe,MHe,PFe,zHe,VHe,UHe,DFe,MGe,qHe,XHe,QHe,JHe,t9e,r9e,s9e,o9e,MFe,l9e,zFe,u9e,f9e,h9e,g9e,v9e,UFe,hUe,b9e,S9e,C9e,E9e,_9e,SFe,F9e,M9e,z9e,ZGe];for(const t of j9e)qw(t);async function V9e(){return await KPe({base:"pascal",quantizationBytes:2})}async function W9e(t,e){const n=await t.segment(e);return G9e(e,n)}function U9e(t,e,n,r,i){const s=document.createElement("canvas"),a=document.createElement("canvas"),o=s.getContext("2d"),l=a.getContext("2d");s.width=r,s.height=i,a.width=r,a.height=i,o.drawImage(e,0,0,r,i),l.putImageData(n,0,0);const c=o.getImageData(0,0,r,i),u=c.data,f=l.getImageData(0,0,r,i).data;for(let h=0,g=f.length;h<g;h+=4)f[h]===t[0]&&f[h+1]===t[1]&&f[h+2]===t[2]&&(u[h+3]=0);return o.putImageData(c,0,0),s.toDataURL()}function G9e(t,e){const{height:n,width:r,segmentationMap:i}=e,s=new ImageData(i,r,n);return U9e([0,0,0],t,s,r,n)}const H9e=()=>{const t=A.useRef(),e=async n=>await W9e(t.current,n);return A.useEffect(()=>{V9e().then(n=>{t.current=n})}),{autoRemoveBackground:e}},q9e=(t,e,n,r,i,s,a)=>{const{updateItem:o}=qn(),l=WV(),{autoRemoveBackground:c}=H9e(),u=()=>{e.openModal()},d=h=>{if(h.length===1&&h[0].attrs["data-item-type"]==="image"){console.log("in");const g=new Image;g.onload=()=>{console.log("load"),g.width=y.width,g.height=y.height,c(g).then(v=>{o(h[0].id(),b=>({...b,src:v}))})};const{attrs:y}=h[0],x=y.image.src;g.src=x}};return{onClickHotkeyButton:u,getClickCallback:h=>()=>{switch(console.log(h),h){case"select-all":return l.selectAll(t,a);case"flip-horizontally":return l.flipHorizontally(n);case"flip-vertically":return l.flipVertically(n);case"layer-up":return l.layerUp(n);case"layer-down":return l.layerDown(n);case"zoom-in":return l.zoom(t,1);case"zoom-out":return l.zoom(t,-1);case"reset-zoom":return l.resetZoom(t);case"remove-background":return d(n);case"hotkey":return u();default:return null}}}},K9e=({data:t,e,transformer:n,onSelect:r})=>{const{attrs:i}=t,s=A.useRef(),{updateItem:a}=qn(),o=()=>{if(s.current===null){console.error("textRef is null");return}s.current.hide(),n.transformerRef.current.hide();const d=s.current.getAbsolutePosition(),f=s.current.getStage(),h=f.container().getBoundingClientRect(),g={x:h.x+d.x,y:h.y+d.y},y=document.createElement("textarea");document.body.appendChild(y),y.id="current_text_editor",y.innerHTML=s.current.text(),y.style.zIndex="100",y.style.position="absolute",y.style.top=`${g.y}px`,y.style.left=`${g.x}px`,y.style.fontSize=`${s.current.fontSize()*f.scaleY()*s.current.scaleY()}px`,y.style.width=`${y.value.split(`
`).sort((_,R)=>R.length-_.length)[0].split("").reduce((_,R)=>R.charCodeAt(0)>=32&&R.charCodeAt(0)<=126?_+s.current.fontSize()*f.scaleY()*s.current.scaleY()*(3/5):_+s.current.fontSize()*f.scaleY()*s.current.scaleY(),0)}px`,y.style.height=`${s.current.height()+s.current.padding()*2+5}px`,y.style.border="none",y.style.padding="0px",y.style.margin="0px",y.style.overflow="hidden",y.style.background="none",y.style.outline="none",y.style.resize="none",y.style.lineHeight=s.current.lineHeight().toString(),y.style.fontFamily=s.current.fontFamily(),y.style.transformOrigin="left top",y.style.textAlign=s.current.align(),y.style.color=s.current.fill();const x=s.current.rotation();let v="";x&&(v+=`rotateZ(${x}deg)`);let b=0;navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&(b+=2+Math.round(s.current.fontSize()/20)),v+=`translateY(-${b}px)`,y.style.transform=v,y.style.height="auto",y.style.height=`${y.scrollHeight+3}px`,y.focus();function k(){window.removeEventListener("click",T),s.current.show(),n.transformerRef.current.show(),a(s.current.id(),()=>({...s.current.attrs,width:y.getBoundingClientRect().width/f.scaleY()/s.current.scaleY(),height:y.value.split(`
`).length*s.current.fontSize()*1.2,updatedAt:Date.now()})),y.parentNode.removeChild(y)}function $(){let _=y.value.split(`
`).sort((O,B)=>B.length-O.length)[0].split("").reduce((O,B)=>B.charCodeAt(0)>=32&&B.charCodeAt(0)<=126?O+s.current.fontSize()*f.scaleY()*s.current.scaleY()*.6:O+s.current.fontSize()*f.scaleY()*s.current.scaleY(),0);const R=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),P=navigator.userAgent.toLowerCase().indexOf("firefox")>-1;(R||P)&&(_=Math.ceil(_)),y.style.width=`${_}px`}y.addEventListener("input",_=>{y.style.width=`${y.value.split(`
`).sort((R,P)=>P.length-R.length)[0].split("").reduce((R,P)=>P.charCodeAt(0)>=32&&P.charCodeAt(0)<=126?R+s.current.fontSize()*f.scaleY()*s.current.scaleY()*(3/5):R+s.current.fontSize()*f.scaleY()*s.current.scaleY(),0)}px`}),y.addEventListener("keydown",_=>{_.keyCode===13&&!_.shiftKey&&(s.current.text(y.value),k()),_.keyCode===27&&k()}),y.addEventListener("keydown",_=>{$(),y.style.height="auto",y.style.height=`${y.scrollHeight+s.current.fontSize()}px`});function T(_){_.target!==y&&(s.current.text(y.value),k())}setTimeout(()=>{window.addEventListener("click",T)})},l=A.useCallback(d=>{var f;(f=d.target.getLayer())==null||f.batchDraw()},[]),c=A.useCallback(d=>{var f;d.evt.preventDefault(),d.evt.stopPropagation(),a(d.target.id(),()=>({...d.target.attrs})),(f=d.target.getLayer())==null||f.batchDraw()},[t]),u=d=>{if(d.evt.detail===1){setTimeout(()=>{document.getElementById("current_text_editor")||r(d)},200);return}o()};return z.jsx(zB,{ref:s,text:i.text,fontFamily:i.fontFamily,fontSize:i.fontSize,onClick:u,name:"label-target","data-item-type":"text","data-frame-type":"text",id:t.id,x:i.x,y:i.y,align:i.align??"center",verticalAlign:i.verticalAlign??"middel",width:i.width,height:i.height,scaleX:i.scaleX,scaleY:i.scaleY,fill:i.fill??"#000000",stroke:i.stroke??null,strokeWidth:i.stroke?1:void 0,opacity:i.opacity??1,rotation:i.rotation??0,draggable:!0,onDragMove:l,onDragEnd:c})},X9e=({data:t,e,transformer:n,onSelect:r})=>{const{attrs:i}=t,s=A.useRef(),a=rb(),{onDragMoveFrame:o,onDragEndFrame:l,checkIsInFrame:c}=ib(a.stageRef,a.dragBackgroundOrigin);return A.useEffect(()=>{s.current&&(a.setStageRef(s.current.getStage()),c(s.current))},[t]),i.sides===4?z.jsx(a_,{ref:s,onClick:r,name:"label-target","data-item-type":"shape",id:t.id,x:i.x,y:i.y,width:Math.sqrt(i.radius*2),height:Math.sqrt(i.radius*2),sides:i.sides,radius:i.radius,scaleX:i.scaleX,scaleY:i.scaleY,fill:i.fill??"#000000",stroke:i.stroke??null,strokeWidth:i.stroke?5:void 0,opacity:i.opacity??1,rotation:i.rotation??0,draggable:!0,onDragMove:o,onDragEnd:l}):z.jsx(NJ,{ref:s,onClick:r,name:"label-target","data-item-type":"shape",id:t.id,x:i.x,y:i.y,sides:i.sides,radius:i.radius,scaleX:i.scaleX,scaleY:i.scaleY,fill:i.fill??"#000000",stroke:i.stroke??null,strokeWidth:i.stroke?5:void 0,opacity:i.opacity??1,rotation:i.rotation??0,draggable:!0,onDragMove:o,onDragEnd:l})},Y9e=({data:t,e,onSelect:n})=>{const{attrs:r}=t,i=A.useRef(),[s,a]=A.useState(new Image),{updateItem:o}=qn(),l=A.useCallback(u=>{var d;(d=u.target.getLayer())==null||d.batchDraw()},[]),c=A.useCallback(u=>{var d;u.evt.preventDefault(),u.evt.stopPropagation(),o(u.target.id(),()=>({...u.target.attrs})),(d=u.target.getLayer())==null||d.batchDraw()},[t]);return A.useEffect(()=>{Fr.Image.fromURL(`/assets/icon/bootstrap/${r.icon}`,u=>{a(u.image())})},[]),z.jsx(BB,{ref:i,image:s,onClick:n,name:"label-target","data-item-type":"icon","data-frame-type":"icon",id:t.id,x:r.x,y:r.y,width:r.width,height:r.height,scaleX:r.scaleX,scaleY:r.scaleY,fill:"transparent",opacity:r.opacity??1,rotation:r.rotation??0,draggable:!0,onDragMove:l,onDragEnd:c})},Q9e=({data:t,e,transformer:n,onSelect:r})=>{const{attrs:{updatedAt:i,zIndex:s,points:a,...o}}=t,l=A.useRef(),{updateItem:c}=qn(),u=(h,g)=>{h.beginPath(),h.moveTo(a[0],a[1]),a.length===4?h.lineTo(a[2],a[3]):a.length===6?h.quadraticCurveTo(a[2],a[3],a[4],a[5]):h.bezierCurveTo(a[2],a[3],a[4],a[5],a[6],a[7]),g.strokeWidth(4),h.fillStrokeShape(g)},d=A.useCallback(h=>{var g;(g=h.target.getLayer())==null||g.batchDraw()},[]),f=A.useCallback(h=>{var g;h.evt.preventDefault(),h.evt.stopPropagation(),c(h.target.id(),()=>({...h.target.attrs})),(g=h.target.getLayer())==null||g.batchDraw()},[t]);return z.jsx(MB,{children:z.jsx(RJ,{ref:l,onClick:r,sceneFunc:u,name:"label-target","data-item-type":"line",id:t.id,...o,draggable:!0,onDragMove:d,onDragEnd:f})})},Z9e=()=>{const[t,e]=A.useState(!1);return{displayModal:t,openModal:()=>{e(!0)},closeModal:()=>{e(!1)}}},J9e=[{id:"moveBackground",name:"Move Backgroud",keys:["spacebar","click & move"],desc:""},{id:"resetZoom",name:"Reset Zoom",keys:["ctrl","0"],desc:""},{id:"zoomIn",name:"Zoom In",keys:["mouse wheel"],desc:""},{id:"zoomOut",name:"Zoom Out",keys:["mouse wheel"],desc:""},{id:"layerUp",name:"Layer Up",keys:["shift","up"],desc:""},{id:"layerDown",name:"Layer Down",keys:["shift","down"],desc:""},{id:"undo",name:"Undo",keys:["ctrl","z"],desc:""},{id:"redo",name:"Redo",keys:["ctrl","y"],desc:""},{id:"deleteItems",name:"Delete",keys:["backspace"],desc:""},{id:"duplicateItems",name:"Duplicate",keys:["ctrl","d"],desc:""},{id:"copyItems",name:"Copy Selected Items",keys:["ctrl","c"],desc:""},{id:"pasteItems",name:"Paste Selected Items",keys:["ctrl","v"],desc:""},{id:"selectAllItems",name:"Select All Items",keys:["ctrl","a"],desc:""},{id:"flipHorizontally",name:"Flip Horizontally",keys:["shift","h"],desc:""},{id:"flipVertically",name:"Flip Vertically",keys:["shift","v"],desc:""}],e7e=(t,e,n,r)=>{const{alterItems:i}=qn(),[s,a]=A.useState(null),o=A.useCallback(()=>{if(t.length>0&&s){const d=[...s],f=[...t[t.length-1]];n(h=>[...h.slice(0,t.length-1)]),r(h=>[...h,d]),a(f),i(f)}},[t,s,n,r,i]),l=A.useCallback(()=>{if(e.length>0&&s){const d=[...s],f=e[e.length-1];r(h=>[...h.slice(0,e.length-1)]),n(h=>[...h,d]),a(f),i(f)}},[e,s,r,n,i]),c=A.useCallback(d=>{d.length!==0&&s!==null&&JSON.stringify(d)!==JSON.stringify(s)&&(n(f=>[...f,s]),r([])),d.length!==0&&a(d)},[t,s,n,r,a]);return{goToPast:o,goToFuture:l,recordPast:c,clearHistory:()=>{n([]),r([])},setCurrent:a,current:s}},pL=[];function t7e(){const[t,e]=A.useState([]),[n,r]=A.useState([]),{goToFuture:i,goToPast:s,recordPast:a,clearHistory:o}=e7e(t,n,e,r),l=UCe(),{selectedItems:c,onSelectItem:u,setSelectedItems:d,clearSelection:f}=VV(l),{tabList:h,onClickTab:g,onCreateTab:y,onDeleteTab:x}=zCe(l,o),{stageData:v}=qn(),{initializeFileDataList:b,updateFileData:S}=jV(),k=rb(),$=Z9e(),{deleteItems:T,copyItems:_,selectAll:R,pasteItems:P,duplicateItems:O,layerDown:B,layerUp:H,flipHorizontally:V,flipVertically:K}=WV(),{getTranslation:X}=ms(),[q,te]=A.useState([]),j=ie=>{var De;const{id:we}=ie.attrs,$e=ie.attrs["data-item-type"]==="frame"?ie.getParent():ie;return{id:Xi(),attrs:{...((De=v.find(Oe=>Oe.attrs.id===we))==null?void 0:De.attrs)??{}},className:$e.getType(),children:[]}},{getClickCallback:Y}=q9e(k,$,c,d,l,j,u),Q=A.useMemo(()=>{var ie;return((ie=h.find(we=>we.active))==null?void 0:ie.id)??null},[h]),ne=A.useMemo(()=>v.sort((ie,we)=>ie.attrs.zIndex===we.attrs.zIndex?ie.attrs.zIndex<0?we.attrs.updatedAt-ie.attrs.updatedAt:ie.attrs.updatedAt-we.attrs.updatedAt:ie.attrs.zIndex-we.attrs.zIndex),[v]),le=z.jsx(sie,{children:z.jsx(_Ce,{onClickTab:g,tabList:h,onCreateTab:y,onDeleteTab:x})}),ue=z.jsx(ICe,{children:BV.map(ie=>z.jsx(NCe,{data:ie,stage:k,onClick:Y(ie.id)},`navbar-${ie.id}`))}),de=z.jsxs(Rv,{show:$.displayModal,onHide:$.closeModal,children:[z.jsx(Rv.Header,{closeButton:!0,children:z.jsx(Rv.Title,{children:"Keyboard Shortcut"})}),z.jsx(Rv.Body,{children:J9e.map(ie=>z.jsxs(Lt,{children:[z.jsx("h6",{children:X("hotkey",ie.id,"name")}),z.jsx(ui,{className:"justify-content-end",xs:4,children:ie.keys.map((we,$e)=>z.jsxs(M.Fragment,{children:[$e!==0&&"+",z.jsx(Lt,{xs:"auto",className:"align-items-center",children:z.jsx(Lc,{disabled:!0,children:we})})]},ie.name+we))})]},ie.name))})]}),pe=z.jsx(ECe,{selectedItems:c,clearSelection:f,stageRef:k.stageRef}),me=ie=>{switch(ie.attrs["data-item-type"]){case"frame":return z.jsx(OCe,{data:ie,onSelect:u},`frame-${ie.id}`);case"image":return z.jsx(BCe,{data:ie,onSelect:u},`image-${ie.id}`);case"text":return z.jsx(K9e,{data:ie,transformer:l,onSelect:u},`image-${ie.id}`);case"shape":return z.jsx(X9e,{data:ie,transformer:l,onSelect:u},`shape-${ie.id}`);case"icon":return z.jsx(Y9e,{data:ie,transformer:l,onSelect:u},`icon-${ie.id}`);case"line":return z.jsx(Q9e,{data:ie,transformer:l,onSelect:u},`line-${ie.id}`);default:return null}};return Yr("shift+up",ie=>{ie.preventDefault(),H(c)},{},[c]),Yr("shift+down",ie=>{ie.preventDefault(),B(c)},{},[c]),Yr("ctrl+d",ie=>{ie.preventDefault(),O(c,j)},{},[c,v]),Yr("ctrl+c",ie=>{ie.preventDefault(),_(c,te,j)},{},[c,v,q]),Yr("ctrl+a",ie=>{ie.preventDefault(),R(k,u)},{},[c]),Yr("ctrl+v",ie=>{ie.preventDefault(),P(q)},{},[q]),Yr("ctrl+z",ie=>{ie.preventDefault(),s()},{},[s]),Yr("ctrl+y",ie=>{ie.preventDefault(),i()},{},[i]),Yr("shift+h",ie=>{ie.preventDefault(),V(c)},{},[c]),Yr("shift+v",ie=>{ie.preventDefault(),K(c)},{},[c]),Yr("backspace",ie=>{ie.preventDefault(),T(c,d,l.transformerRef)},{enabled:!!c.length},[c,l.transformerRef.current]),A.useEffect(()=>{window.addEventListener("beforeunload",ie=>{ie.preventDefault(),ie.returnValue=""}),y(void 0,pL[0]),b(pL),k.stageRef.current.setPosition({x:Math.max(Math.ceil(k.stageRef.current.width()-1280)/2,0),y:Math.max(Math.ceil(k.stageRef.current.height()-760)/2,0)}),k.stageRef.current.batchDraw()},[]),A.useEffect(()=>{Q&&S({id:Q,data:v}),a(v)},[v]),z.jsxs(Tie,{header:le,navBar:ue,settingBar:pe,children:[de,z.jsxs(ACe,{onSelect:u,stage:k,children:[v.length?ne.map(ie=>me(ie)):null,z.jsx(OJ,{ref:l.transformerRef,keepRatio:!0,shouldOverdrawWholeArea:!0,boundBoxFunc:(ie,we)=>we,onTransformEnd:l.onTransformEnd})]})]})}const n7e="FILE_META",r7e={scale:{x:1,y:1},position:{x:0,y:0}},i7e=Bx({name:n7e,initialState:r7e,reducers:{setFileMeta(t,e){const{scale:n,position:r}=e.payload;t.scale=n,t.position=r}}}),s7e=i7e.reducer,yC=t=>t.fileMeta;G$(yC,t=>t.scale),G$(yC,t=>t.position);const hL=goe(),a7e=yoe(Yke),o7e=t=>{const e=fae({reducer:{fileMeta:s7e,currentStageData:Qke,stageDataList:FCe,imageAssetList:boe},middleware:q6({serializableCheck:!1}).concat(hL),preloadedState:t});return hL.run(a7e),e},l7e={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){console&&console[t]&&console[t].apply(console,e)}};class U1{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,n)}init(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=n.prefix||"i18next:",this.logger=e||l7e,this.options=n,this.debug=n.debug}log(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"log","",!0)}warn(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"warn","",!0)}error(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"error","")}deprecate(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"warn","WARNING DEPRECATED: ",!0)}forward(e,n,r,i){return i&&!this.debug?null:(typeof e[0]=="string"&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[n](e))}create(e){return new U1(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new U1(this.logger,e)}}var ua=new U1;class E2{constructor(){this.observers={}}on(e,n){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const i=this.observers[r].get(n)||0;this.observers[r].set(n,i+1)}),this}off(e,n){if(this.observers[e]){if(!n){delete this.observers[e];return}this.observers[e].delete(n)}}emit(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(a=>{let[o,l]=a;for(let c=0;c<l;c++)o(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(a=>{let[o,l]=a;for(let c=0;c<l;c++)o.apply(o,[e,...r])})}}function Vp(){let t,e;const n=new Promise((r,i)=>{t=r,e=i});return n.resolve=t,n.reject=e,n}function mL(t){return t==null?"":""+t}function c7e(t,e,n){t.forEach(r=>{e[r]&&(n[r]=e[r])})}const u7e=/###/g;function Ih(t,e,n){function r(o){return o&&o.indexOf("###")>-1?o.replace(u7e,"."):o}function i(){return!t||typeof t=="string"}const s=typeof e!="string"?e:e.split(".");let a=0;for(;a<s.length-1;){if(i())return{};const o=r(s[a]);!t[o]&&n&&(t[o]=new n),Object.prototype.hasOwnProperty.call(t,o)?t=t[o]:t={},++a}return i()?{}:{obj:t,k:r(s[a])}}function gL(t,e,n){const{obj:r,k:i}=Ih(t,e,Object);if(r!==void 0||e.length===1){r[i]=n;return}let s=e[e.length-1],a=e.slice(0,e.length-1),o=Ih(t,a,Object);for(;o.obj===void 0&&a.length;)s=`${a[a.length-1]}.${s}`,a=a.slice(0,a.length-1),o=Ih(t,a,Object),o&&o.obj&&typeof o.obj[`${o.k}.${s}`]<"u"&&(o.obj=void 0);o.obj[`${o.k}.${s}`]=n}function d7e(t,e,n,r){const{obj:i,k:s}=Ih(t,e,Object);i[s]=i[s]||[],r&&(i[s]=i[s].concat(n)),r||i[s].push(n)}function G1(t,e){const{obj:n,k:r}=Ih(t,e);if(n)return n[r]}function f7e(t,e,n){const r=G1(t,n);return r!==void 0?r:G1(e,n)}function A9(t,e,n){for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in t?typeof t[r]=="string"||t[r]instanceof String||typeof e[r]=="string"||e[r]instanceof String?n&&(t[r]=e[r]):A9(t[r],e[r],n):t[r]=e[r]);return t}function Hu(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var p7e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function h7e(t){return typeof t=="string"?t.replace(/[&<>"'\/]/g,e=>p7e[e]):t}class m7e{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const n=this.regExpMap.get(e);if(n!==void 0)return n;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const g7e=[" ",",","?","!",";"],y7e=new m7e(20);function v7e(t,e,n){e=e||"",n=n||"";const r=g7e.filter(a=>e.indexOf(a)<0&&n.indexOf(a)<0);if(r.length===0)return!0;const i=y7e.getRegExp(`(${r.map(a=>a==="?"?"\\?":a).join("|")})`);let s=!i.test(t);if(!s){const a=t.indexOf(n);a>0&&!i.test(t.substring(0,a))&&(s=!0)}return s}function XE(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!t)return;if(t[e])return t[e];const r=e.split(n);let i=t;for(let s=0;s<r.length;){if(!i||typeof i!="object")return;let a,o="";for(let l=s;l<r.length;++l)if(l!==s&&(o+=n),o+=r[l],a=i[o],a!==void 0){if(["string","number","boolean"].indexOf(typeof a)>-1&&l<r.length-1)continue;s+=l-s+1;break}i=a}return i}function H1(t){return t&&t.indexOf("_")>0?t.replace("_","-"):t}class yL extends E2{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const n=this.options.ns.indexOf(e);n>-1&&this.options.ns.splice(n,1)}getResource(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,a=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let o;e.indexOf(".")>-1?o=e.split("."):(o=[e,n],r&&(Array.isArray(r)?o.push(...r):typeof r=="string"&&s?o.push(...r.split(s)):o.push(r)));const l=G1(this.data,o);return!l&&!n&&!r&&e.indexOf(".")>-1&&(e=o[0],n=o[1],r=o.slice(2).join(".")),l||!a||typeof r!="string"?l:XE(this.data&&this.data[e]&&this.data[e][n],r,s)}addResource(e,n,r,i){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const a=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator;let o=[e,n];r&&(o=o.concat(a?r.split(a):r)),e.indexOf(".")>-1&&(o=e.split("."),i=n,n=o[1]),this.addNamespaces(n),gL(this.data,o,i),s.silent||this.emit("added",e,n,r,i)}addResources(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const s in r)(typeof r[s]=="string"||Object.prototype.toString.apply(r[s])==="[object Array]")&&this.addResource(e,n,s,r[s],{silent:!0});i.silent||this.emit("added",e,n,r)}addResourceBundle(e,n,r,i,s){let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},o=[e,n];e.indexOf(".")>-1&&(o=e.split("."),i=r,r=n,n=o[1]),this.addNamespaces(n);let l=G1(this.data,o)||{};a.skipCopy||(r=JSON.parse(JSON.stringify(r))),i?A9(l,r,s):l={...l,...r},gL(this.data,o,l),a.silent||this.emit("added",e,n,r)}removeResourceBundle(e,n){this.hasResourceBundle(e,n)&&delete this.data[e][n],this.removeNamespaces(n),this.emit("removed",e,n)}hasResourceBundle(e,n){return this.getResource(e,n)!==void 0}getResourceBundle(e,n){return n||(n=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(e,n)}:this.getResource(e,n)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const n=this.getDataByLanguage(e);return!!(n&&Object.keys(n)||[]).find(i=>n[i]&&Object.keys(n[i]).length>0)}toJSON(){return this.data}}var P9={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,n,r,i){return t.forEach(s=>{this.processors[s]&&(e=this.processors[s].process(e,n,r,i))}),e}};const vL={};class q1 extends E2{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),c7e(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=ua.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const r=this.resolve(e,n);return r&&r.res!==void 0}extractFromKey(e,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const i=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let s=n.ns||this.options.defaultNS||[];const a=r&&e.indexOf(r)>-1,o=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!v7e(e,r,i);if(a&&!o){const l=e.match(this.interpolator.nestingRegexp);if(l&&l.length>0)return{key:e,namespaces:s};const c=e.split(r);(r!==i||r===i&&this.options.ns.indexOf(c[0])>-1)&&(s=c.shift()),e=c.join(i)}return typeof s=="string"&&(s=[s]),{key:e,namespaces:s}}translate(e,n,r){if(typeof n!="object"&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),typeof n=="object"&&(n={...n}),n||(n={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const i=n.returnDetails!==void 0?n.returnDetails:this.options.returnDetails,s=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,{key:a,namespaces:o}=this.extractFromKey(e[e.length-1],n),l=o[o.length-1],c=n.lng||this.language,u=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(c&&c.toLowerCase()==="cimode"){if(u){const k=n.nsSeparator||this.options.nsSeparator;return i?{res:`${l}${k}${a}`,usedKey:a,exactUsedKey:a,usedLng:c,usedNS:l,usedParams:this.getUsedParamsDetails(n)}:`${l}${k}${a}`}return i?{res:a,usedKey:a,exactUsedKey:a,usedLng:c,usedNS:l,usedParams:this.getUsedParamsDetails(n)}:a}const d=this.resolve(e,n);let f=d&&d.res;const h=d&&d.usedKey||a,g=d&&d.exactUsedKey||a,y=Object.prototype.toString.apply(f),x=["[object Number]","[object Function]","[object RegExp]"],v=n.joinArrays!==void 0?n.joinArrays:this.options.joinArrays,b=!this.i18nFormat||this.i18nFormat.handleAsObject;if(b&&f&&(typeof f!="string"&&typeof f!="boolean"&&typeof f!="number")&&x.indexOf(y)<0&&!(typeof v=="string"&&y==="[object Array]")){if(!n.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const k=this.options.returnedObjectHandler?this.options.returnedObjectHandler(h,f,{...n,ns:o}):`key '${a} (${this.language})' returned an object instead of string.`;return i?(d.res=k,d.usedParams=this.getUsedParamsDetails(n),d):k}if(s){const k=y==="[object Array]",$=k?[]:{},T=k?g:h;for(const _ in f)if(Object.prototype.hasOwnProperty.call(f,_)){const R=`${T}${s}${_}`;$[_]=this.translate(R,{...n,joinArrays:!1,ns:o}),$[_]===R&&($[_]=f[_])}f=$}}else if(b&&typeof v=="string"&&y==="[object Array]")f=f.join(v),f&&(f=this.extendTranslation(f,e,n,r));else{let k=!1,$=!1;const T=n.count!==void 0&&typeof n.count!="string",_=q1.hasDefaultValue(n),R=T?this.pluralResolver.getSuffix(c,n.count,n):"",P=n.ordinal&&T?this.pluralResolver.getSuffix(c,n.count,{ordinal:!1}):"",O=T&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),B=O&&n[`defaultValue${this.options.pluralSeparator}zero`]||n[`defaultValue${R}`]||n[`defaultValue${P}`]||n.defaultValue;!this.isValidLookup(f)&&_&&(k=!0,f=B),this.isValidLookup(f)||($=!0,f=a);const V=(n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&$?void 0:f,K=_&&B!==f&&this.options.updateMissing;if($||k||K){if(this.logger.log(K?"updateKey":"missingKey",c,l,a,K?B:f),s){const j=this.resolve(a,{...n,keySeparator:!1});j&&j.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let X=[];const q=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if(this.options.saveMissingTo==="fallback"&&q&&q[0])for(let j=0;j<q.length;j++)X.push(q[j]);else this.options.saveMissingTo==="all"?X=this.languageUtils.toResolveHierarchy(n.lng||this.language):X.push(n.lng||this.language);const te=(j,Y,Q)=>{const ne=_&&Q!==f?Q:V;this.options.missingKeyHandler?this.options.missingKeyHandler(j,l,Y,ne,K,n):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(j,l,Y,ne,K,n),this.emit("missingKey",j,l,Y,f)};this.options.saveMissing&&(this.options.saveMissingPlurals&&T?X.forEach(j=>{const Y=this.pluralResolver.getSuffixes(j,n);O&&n[`defaultValue${this.options.pluralSeparator}zero`]&&Y.indexOf(`${this.options.pluralSeparator}zero`)<0&&Y.push(`${this.options.pluralSeparator}zero`),Y.forEach(Q=>{te([j],a+Q,n[`defaultValue${Q}`]||B)})}):te(X,a,B))}f=this.extendTranslation(f,e,n,d,r),$&&f===a&&this.options.appendNamespaceToMissingKey&&(f=`${l}:${a}`),($||k)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?f=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${l}:${a}`:a,k?f:void 0):f=this.options.parseMissingKeyHandler(f))}return i?(d.res=f,d.usedParams=this.getUsedParamsDetails(n),d):f}extendTranslation(e,n,r,i,s){var a=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const c=typeof e=="string"&&(r&&r.interpolation&&r.interpolation.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let u;if(c){const f=e.match(this.interpolator.nestingRegexp);u=f&&f.length}let d=r.replace&&typeof r.replace!="string"?r.replace:r;if(this.options.interpolation.defaultVariables&&(d={...this.options.interpolation.defaultVariables,...d}),e=this.interpolator.interpolate(e,d,r.lng||this.language,r),c){const f=e.match(this.interpolator.nestingRegexp),h=f&&f.length;u<h&&(r.nest=!1)}!r.lng&&this.options.compatibilityAPI!=="v1"&&i&&i.res&&(r.lng=i.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var f=arguments.length,h=new Array(f),g=0;g<f;g++)h[g]=arguments[g];return s&&s[0]===h[0]&&!r.context?(a.logger.warn(`It seems you are nesting recursively key: ${h[0]} in key: ${n[0]}`),null):a.translate(...h,n)},r)),r.interpolation&&this.interpolator.reset()}const o=r.postProcess||this.options.postProcess,l=typeof o=="string"?[o]:o;return e!=null&&l&&l.length&&r.applyPostProcessor!==!1&&(e=P9.handle(l,e,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r,i,s,a,o;return typeof e=="string"&&(e=[e]),e.forEach(l=>{if(this.isValidLookup(r))return;const c=this.extractFromKey(l,n),u=c.key;i=u;let d=c.namespaces;this.options.fallbackNS&&(d=d.concat(this.options.fallbackNS));const f=n.count!==void 0&&typeof n.count!="string",h=f&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),g=n.context!==void 0&&(typeof n.context=="string"||typeof n.context=="number")&&n.context!=="",y=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);d.forEach(x=>{this.isValidLookup(r)||(o=x,!vL[`${y[0]}-${x}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(o)&&(vL[`${y[0]}-${x}`]=!0,this.logger.warn(`key "${i}" for languages "${y.join(", ")}" won't get resolved as namespace "${o}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),y.forEach(v=>{if(this.isValidLookup(r))return;a=v;const b=[u];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(b,u,v,x,n);else{let k;f&&(k=this.pluralResolver.getSuffix(v,n.count,n));const $=`${this.options.pluralSeparator}zero`,T=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(f&&(b.push(u+k),n.ordinal&&k.indexOf(T)===0&&b.push(u+k.replace(T,this.options.pluralSeparator)),h&&b.push(u+$)),g){const _=`${u}${this.options.contextSeparator}${n.context}`;b.push(_),f&&(b.push(_+k),n.ordinal&&k.indexOf(T)===0&&b.push(_+k.replace(T,this.options.pluralSeparator)),h&&b.push(_+$))}}let S;for(;S=b.pop();)this.isValidLookup(r)||(s=S,r=this.getResource(v,x,S,n))}))})}),{res:r,usedKey:i,exactUsedKey:s,usedLng:a,usedNS:o}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,n,r,i):this.resourceStore.getResource(e,n,r,i)}getUsedParamsDetails(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&typeof e.replace!="string";let i=r?e.replace:e;if(r&&typeof e.count<"u"&&(i.count=e.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!r){i={...i};for(const s of n)delete i[s]}return i}static hasDefaultValue(e){const n="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&n===r.substring(0,n.length)&&e[r]!==void 0)return!0;return!1}}function vC(t){return t.charAt(0).toUpperCase()+t.slice(1)}class xL{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=ua.create("languageUtils")}getScriptPartFromCode(e){if(e=H1(e),!e||e.indexOf("-")<0)return null;const n=e.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(e){if(e=H1(e),!e||e.indexOf("-")<0)return e;const n=e.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(e){if(typeof e=="string"&&e.indexOf("-")>-1){const n=["hans","hant","latn","cyrl","cans","mong","arab"];let r=e.split("-");return this.options.lowerCaseLng?r=r.map(i=>i.toLowerCase()):r.length===2?(r[0]=r[0].toLowerCase(),r[1]=r[1].toUpperCase(),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=vC(r[1].toLowerCase()))):r.length===3&&(r[0]=r[0].toLowerCase(),r[1].length===2&&(r[1]=r[1].toUpperCase()),r[0]!=="sgn"&&r[2].length===2&&(r[2]=r[2].toUpperCase()),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=vC(r[1].toLowerCase())),n.indexOf(r[2].toLowerCase())>-1&&(r[2]=vC(r[2].toLowerCase()))),r.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let n;return e.forEach(r=>{if(n)return;const i=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(i))&&(n=i)}),!n&&this.options.supportedLngs&&e.forEach(r=>{if(n)return;const i=this.getLanguagePartFromCode(r);if(this.isSupportedCode(i))return n=i;n=this.options.supportedLngs.find(s=>{if(s===i)return s;if(!(s.indexOf("-")<0&&i.indexOf("-")<0)&&(s.indexOf("-")>0&&i.indexOf("-")<0&&s.substring(0,s.indexOf("-"))===i||s.indexOf(i)===0&&i.length>1))return s})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(e,n){if(!e)return[];if(typeof e=="function"&&(e=e(n)),typeof e=="string"&&(e=[e]),Object.prototype.toString.apply(e)==="[object Array]")return e;if(!n)return e.default||[];let r=e[n];return r||(r=e[this.getScriptPartFromCode(n)]),r||(r=e[this.formatLanguageCode(n)]),r||(r=e[this.getLanguagePartFromCode(n)]),r||(r=e.default),r||[]}toResolveHierarchy(e,n){const r=this.getFallbackCodes(n||this.options.fallbackLng||[],e),i=[],s=a=>{a&&(this.isSupportedCode(a)?i.push(a):this.logger.warn(`rejecting language code not found in supportedLngs: ${a}`))};return typeof e=="string"&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&s(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&s(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&s(this.getLanguagePartFromCode(e))):typeof e=="string"&&s(this.formatLanguageCode(e)),r.forEach(a=>{i.indexOf(a)<0&&s(this.formatLanguageCode(a))}),i}}let x7e=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],b7e={1:function(t){return+(t>1)},2:function(t){return+(t!=1)},3:function(t){return 0},4:function(t){return t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2},5:function(t){return t==0?0:t==1?1:t==2?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5},6:function(t){return t==1?0:t>=2&&t<=4?1:2},7:function(t){return t==1?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2},8:function(t){return t==1?0:t==2?1:t!=8&&t!=11?2:3},9:function(t){return+(t>=2)},10:function(t){return t==1?0:t==2?1:t<7?2:t<11?3:4},11:function(t){return t==1||t==11?0:t==2||t==12?1:t>2&&t<20?2:3},12:function(t){return+(t%10!=1||t%100==11)},13:function(t){return+(t!==0)},14:function(t){return t==1?0:t==2?1:t==3?2:3},15:function(t){return t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2},16:function(t){return t%10==1&&t%100!=11?0:t!==0?1:2},17:function(t){return t==1||t%10==1&&t%100!=11?0:1},18:function(t){return t==0?0:t==1?1:2},19:function(t){return t==1?0:t==0||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3},20:function(t){return t==1?0:t==0||t%100>0&&t%100<20?1:2},21:function(t){return t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0},22:function(t){return t==1?0:t==2?1:(t<0||t>10)&&t%10==0?2:3}};const w7e=["v1","v2","v3"],S7e=["v4"],bL={zero:0,one:1,two:2,few:3,many:4,other:5};function k7e(){const t={};return x7e.forEach(e=>{e.lngs.forEach(n=>{t[n]={numbers:e.nr,plurals:b7e[e.fc]}})}),t}class C7e{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=n,this.logger=ua.create("pluralResolver"),(!this.options.compatibilityJSON||S7e.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=k7e()}addRule(e,n){this.rules[e]=n}getRule(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(H1(e==="dev"?"en":e),{type:n.ordinal?"ordinal":"cardinal"})}catch{return}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}needsPlural(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(e,n);return this.shouldUseIntlApi()?r&&r.resolvedOptions().pluralCategories.length>1:r&&r.numbers.length>1}getPluralFormsOfKey(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,r).map(i=>`${n}${i}`)}getSuffixes(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(e,n);return r?this.shouldUseIntlApi()?r.resolvedOptions().pluralCategories.sort((i,s)=>bL[i]-bL[s]).map(i=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${i}`):r.numbers.map(i=>this.getSuffix(e,i,n)):[]}getSuffix(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=this.getRule(e,r);return i?this.shouldUseIntlApi()?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${i.select(n)}`:this.getSuffixRetroCompatible(i,n):(this.logger.warn(`no plural rule found for: ${e}`),"")}getSuffixRetroCompatible(e,n){const r=e.noAbs?e.plurals(n):e.plurals(Math.abs(n));let i=e.numbers[r];this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1&&(i===2?i="plural":i===1&&(i=""));const s=()=>this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString();return this.options.compatibilityJSON==="v1"?i===1?"":typeof i=="number"?`_plural_${i.toString()}`:s():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1?s():this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString()}shouldUseIntlApi(){return!w7e.includes(this.options.compatibilityJSON)}}function wL(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=f7e(t,e,n);return!s&&i&&typeof n=="string"&&(s=XE(t,n,r),s===void 0&&(s=XE(e,n,r))),s}class $7e{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=ua.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||(n=>n),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const n=e.interpolation;this.escape=n.escape!==void 0?n.escape:h7e,this.escapeValue=n.escapeValue!==void 0?n.escapeValue:!0,this.useRawValueToEscape=n.useRawValueToEscape!==void 0?n.useRawValueToEscape:!1,this.prefix=n.prefix?Hu(n.prefix):n.prefixEscaped||"{{",this.suffix=n.suffix?Hu(n.suffix):n.suffixEscaped||"}}",this.formatSeparator=n.formatSeparator?n.formatSeparator:n.formatSeparator||",",this.unescapePrefix=n.unescapeSuffix?"":n.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":n.unescapeSuffix||"",this.nestingPrefix=n.nestingPrefix?Hu(n.nestingPrefix):n.nestingPrefixEscaped||Hu("$t("),this.nestingSuffix=n.nestingSuffix?Hu(n.nestingSuffix):n.nestingSuffixEscaped||Hu(")"),this.nestingOptionsSeparator=n.nestingOptionsSeparator?n.nestingOptionsSeparator:n.nestingOptionsSeparator||",",this.maxReplaces=n.maxReplaces?n.maxReplaces:1e3,this.alwaysFormat=n.alwaysFormat!==void 0?n.alwaysFormat:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(n,r)=>n&&n.source===r?(n.lastIndex=0,n):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,n,r,i){let s,a,o;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function c(g){return g.replace(/\$/g,"$$$$")}const u=g=>{if(g.indexOf(this.formatSeparator)<0){const b=wL(n,l,g,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(b,void 0,r,{...i,...n,interpolationkey:g}):b}const y=g.split(this.formatSeparator),x=y.shift().trim(),v=y.join(this.formatSeparator).trim();return this.format(wL(n,l,x,this.options.keySeparator,this.options.ignoreJSONStructure),v,r,{...i,...n,interpolationkey:x})};this.resetRegExp();const d=i&&i.missingInterpolationHandler||this.options.missingInterpolationHandler,f=i&&i.interpolation&&i.interpolation.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:g=>c(g)},{regex:this.regexp,safeValue:g=>this.escapeValue?c(this.escape(g)):c(g)}].forEach(g=>{for(o=0;s=g.regex.exec(e);){const y=s[1].trim();if(a=u(y),a===void 0)if(typeof d=="function"){const v=d(e,s,i);a=typeof v=="string"?v:""}else if(i&&Object.prototype.hasOwnProperty.call(i,y))a="";else if(f){a=s[0];continue}else this.logger.warn(`missed to pass in variable ${y} for interpolating ${e}`),a="";else typeof a!="string"&&!this.useRawValueToEscape&&(a=mL(a));const x=g.safeValue(a);if(e=e.replace(s[0],x),f?(g.regex.lastIndex+=a.length,g.regex.lastIndex-=s[0].length):g.regex.lastIndex=0,o++,o>=this.maxReplaces)break}}),e}nest(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i,s,a;function o(l,c){const u=this.nestingOptionsSeparator;if(l.indexOf(u)<0)return l;const d=l.split(new RegExp(`${u}[ ]*{`));let f=`{${d[1]}`;l=d[0],f=this.interpolate(f,a);const h=f.match(/'/g),g=f.match(/"/g);(h&&h.length%2===0&&!g||g.length%2!==0)&&(f=f.replace(/'/g,'"'));try{a=JSON.parse(f),c&&(a={...c,...a})}catch(y){return this.logger.warn(`failed parsing options string in nesting for key ${l}`,y),`${l}${u}${f}`}return a.defaultValue&&a.defaultValue.indexOf(this.prefix)>-1&&delete a.defaultValue,l}for(;i=this.nestingRegexp.exec(e);){let l=[];a={...r},a=a.replace&&typeof a.replace!="string"?a.replace:a,a.applyPostProcessor=!1,delete a.defaultValue;let c=!1;if(i[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(i[1])){const u=i[1].split(this.formatSeparator).map(d=>d.trim());i[1]=u.shift(),l=u,c=!0}if(s=n(o.call(this,i[1].trim(),a),a),s&&i[0]===e&&typeof s!="string")return s;typeof s!="string"&&(s=mL(s)),s||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${e}`),s=""),c&&(s=l.reduce((u,d)=>this.format(u,d,r.lng,{...r,interpolationkey:i[1].trim()}),s.trim())),e=e.replace(i[0],s),this.regexp.lastIndex=0}return e}}function E7e(t){let e=t.toLowerCase().trim();const n={};if(t.indexOf("(")>-1){const r=t.split("(");e=r[0].toLowerCase().trim();const i=r[1].substring(0,r[1].length-1);e==="currency"&&i.indexOf(":")<0?n.currency||(n.currency=i.trim()):e==="relativetime"&&i.indexOf(":")<0?n.range||(n.range=i.trim()):i.split(";").forEach(a=>{if(!a)return;const[o,...l]=a.split(":"),c=l.join(":").trim().replace(/^'+|'+$/g,"");n[o.trim()]||(n[o.trim()]=c),c==="false"&&(n[o.trim()]=!1),c==="true"&&(n[o.trim()]=!0),isNaN(c)||(n[o.trim()]=parseInt(c,10))})}return{formatName:e,formatOptions:n}}function qu(t){const e={};return function(r,i,s){const a=i+JSON.stringify(s);let o=e[a];return o||(o=t(H1(i),s),e[a]=o),o(r)}}class T7e{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=ua.create("formatter"),this.options=e,this.formats={number:qu((n,r)=>{const i=new Intl.NumberFormat(n,{...r});return s=>i.format(s)}),currency:qu((n,r)=>{const i=new Intl.NumberFormat(n,{...r,style:"currency"});return s=>i.format(s)}),datetime:qu((n,r)=>{const i=new Intl.DateTimeFormat(n,{...r});return s=>i.format(s)}),relativetime:qu((n,r)=>{const i=new Intl.RelativeTimeFormat(n,{...r});return s=>i.format(s,r.range||"day")}),list:qu((n,r)=>{const i=new Intl.ListFormat(n,{...r});return s=>i.format(s)})},this.init(e)}init(e){const r=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}}).interpolation;this.formatSeparator=r.formatSeparator?r.formatSeparator:r.formatSeparator||","}add(e,n){this.formats[e.toLowerCase().trim()]=n}addCached(e,n){this.formats[e.toLowerCase().trim()]=qu(n)}format(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return n.split(this.formatSeparator).reduce((o,l)=>{const{formatName:c,formatOptions:u}=E7e(l);if(this.formats[c]){let d=o;try{const f=i&&i.formatParams&&i.formatParams[i.interpolationkey]||{},h=f.locale||f.lng||i.locale||i.lng||r;d=this.formats[c](o,h,{...u,...i,...f})}catch(f){this.logger.warn(f)}return d}else this.logger.warn(`there was no format function for ${c}`);return o},e)}}function _7e(t,e){t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)}class I7e extends E2{constructor(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=i,this.logger=ua.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(r,i.backend,i)}queueLoad(e,n,r,i){const s={},a={},o={},l={};return e.forEach(c=>{let u=!0;n.forEach(d=>{const f=`${c}|${d}`;!r.reload&&this.store.hasResourceBundle(c,d)?this.state[f]=2:this.state[f]<0||(this.state[f]===1?a[f]===void 0&&(a[f]=!0):(this.state[f]=1,u=!1,a[f]===void 0&&(a[f]=!0),s[f]===void 0&&(s[f]=!0),l[d]===void 0&&(l[d]=!0)))}),u||(o[c]=!0)}),(Object.keys(s).length||Object.keys(a).length)&&this.queue.push({pending:a,pendingCount:Object.keys(a).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(s),pending:Object.keys(a),toLoadLanguages:Object.keys(o),toLoadNamespaces:Object.keys(l)}}loaded(e,n,r){const i=e.split("|"),s=i[0],a=i[1];n&&this.emit("failedLoading",s,a,n),r&&this.store.addResourceBundle(s,a,r,void 0,void 0,{skipCopy:!0}),this.state[e]=n?-1:2;const o={};this.queue.forEach(l=>{d7e(l.loaded,[s],a),_7e(l,e),n&&l.errors.push(n),l.pendingCount===0&&!l.done&&(Object.keys(l.loaded).forEach(c=>{o[c]||(o[c]={});const u=l.loaded[c];u.length&&u.forEach(d=>{o[c][d]===void 0&&(o[c][d]=!0)})}),l.done=!0,l.errors.length?l.callback(l.errors):l.callback())}),this.emit("loaded",o),this.queue=this.queue.filter(l=>!l.done)}read(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,a=arguments.length>5?arguments[5]:void 0;if(!e.length)return a(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:n,fcName:r,tried:i,wait:s,callback:a});return}this.readingCalls++;const o=(c,u)=>{if(this.readingCalls--,this.waitingReads.length>0){const d=this.waitingReads.shift();this.read(d.lng,d.ns,d.fcName,d.tried,d.wait,d.callback)}if(c&&u&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,e,n,r,i+1,s*2,a)},s);return}a(c,u)},l=this.backend[r].bind(this.backend);if(l.length===2){try{const c=l(e,n);c&&typeof c.then=="function"?c.then(u=>o(null,u)).catch(o):o(null,c)}catch(c){o(c)}return}return l(e,n,o)}prepareLoading(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();typeof e=="string"&&(e=this.languageUtils.toResolveHierarchy(e)),typeof n=="string"&&(n=[n]);const s=this.queueLoad(e,n,r,i);if(!s.toLoad.length)return s.pending.length||i(),null;s.toLoad.forEach(a=>{this.loadOne(a)})}load(e,n,r){this.prepareLoading(e,n,{},r)}reload(e,n,r){this.prepareLoading(e,n,{reload:!0},r)}loadOne(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=e.split("|"),i=r[0],s=r[1];this.read(i,s,"read",void 0,void 0,(a,o)=>{a&&this.logger.warn(`${n}loading namespace ${s} for language ${i} failed`,a),!a&&o&&this.logger.log(`${n}loaded namespace ${s} for language ${i}`,o),this.loaded(e,a,o)})}saveMissing(e,n,r,i,s){let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(n)){this.logger.warn(`did not save key "${r}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if(this.backend&&this.backend.create){const l={...a,isUpdate:s},c=this.backend.create.bind(this.backend);if(c.length<6)try{let u;c.length===5?u=c(e,n,r,i,l):u=c(e,n,r,i),u&&typeof u.then=="function"?u.then(d=>o(null,d)).catch(o):o(null,u)}catch(u){o(u)}else c(e,n,r,i,o,l)}!e||!e[0]||this.store.addResource(e[0],n,r,i)}}}function SL(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){let n={};if(typeof e[1]=="object"&&(n=e[1]),typeof e[1]=="string"&&(n.defaultValue=e[1]),typeof e[2]=="string"&&(n.tDescription=e[2]),typeof e[2]=="object"||typeof e[3]=="object"){const r=e[3]||e[2];Object.keys(r).forEach(i=>{n[i]=r[i]})}return n},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function kL(t){return typeof t.ns=="string"&&(t.ns=[t.ns]),typeof t.fallbackLng=="string"&&(t.fallbackLng=[t.fallbackLng]),typeof t.fallbackNS=="string"&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs&&t.supportedLngs.indexOf("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),t}function Kv(){}function N7e(t){Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(n=>{typeof t[n]=="function"&&(t[n]=t[n].bind(t))})}class ym extends E2{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(super(),this.options=kL(e),this.services={},this.logger=ua,this.modules={external:[]},N7e(this),n&&!this.isInitialized&&!e.isClone){if(!this.options.initImmediate)return this.init(e,n),this;setTimeout(()=>{this.init(e,n)},0)}}init(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof n=="function"&&(r=n,n={}),!n.defaultNS&&n.defaultNS!==!1&&n.ns&&(typeof n.ns=="string"?n.defaultNS=n.ns:n.ns.indexOf("translation")<0&&(n.defaultNS=n.ns[0]));const i=SL();this.options={...i,...this.options,...kL(n)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...i.interpolation,...this.options.interpolation}),n.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=n.keySeparator),n.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=n.nsSeparator);function s(u){return u?typeof u=="function"?new u:u:null}if(!this.options.isClone){this.modules.logger?ua.init(s(this.modules.logger),this.options):ua.init(null,this.options);let u;this.modules.formatter?u=this.modules.formatter:typeof Intl<"u"&&(u=T7e);const d=new xL(this.options);this.store=new yL(this.options.resources,this.options);const f=this.services;f.logger=ua,f.resourceStore=this.store,f.languageUtils=d,f.pluralResolver=new C7e(d,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),u&&(!this.options.interpolation.format||this.options.interpolation.format===i.interpolation.format)&&(f.formatter=s(u),f.formatter.init(f,this.options),this.options.interpolation.format=f.formatter.format.bind(f.formatter)),f.interpolator=new $7e(this.options),f.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},f.backendConnector=new I7e(s(this.modules.backend),f.resourceStore,f,this.options),f.backendConnector.on("*",function(h){for(var g=arguments.length,y=new Array(g>1?g-1:0),x=1;x<g;x++)y[x-1]=arguments[x];e.emit(h,...y)}),this.modules.languageDetector&&(f.languageDetector=s(this.modules.languageDetector),f.languageDetector.init&&f.languageDetector.init(f,this.options.detection,this.options)),this.modules.i18nFormat&&(f.i18nFormat=s(this.modules.i18nFormat),f.i18nFormat.init&&f.i18nFormat.init(this)),this.translator=new q1(this.services,this.options),this.translator.on("*",function(h){for(var g=arguments.length,y=new Array(g>1?g-1:0),x=1;x<g;x++)y[x-1]=arguments[x];e.emit(h,...y)}),this.modules.external.forEach(h=>{h.init&&h.init(this)})}if(this.format=this.options.interpolation.format,r||(r=Kv),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const u=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);u.length>0&&u[0]!=="dev"&&(this.options.lng=u[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(u=>{this[u]=function(){return e.store[u](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(u=>{this[u]=function(){return e.store[u](...arguments),e}});const l=Vp(),c=()=>{const u=(d,f)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),l.resolve(f),r(d,f)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return u(null,this.t.bind(this));this.changeLanguage(this.options.lng,u)};return this.options.resources||!this.options.initImmediate?c():setTimeout(c,0),l}loadResources(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Kv;const i=typeof e=="string"?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if(i&&i.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const s=[],a=o=>{if(!o||o==="cimode")return;this.services.languageUtils.toResolveHierarchy(o).forEach(c=>{c!=="cimode"&&s.indexOf(c)<0&&s.push(c)})};i?a(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(l=>a(l)),this.options.preload&&this.options.preload.forEach(o=>a(o)),this.services.backendConnector.load(s,this.options.ns,o=>{!o&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(o)})}else r(null)}reloadResources(e,n,r){const i=Vp();return e||(e=this.languages),n||(n=this.options.ns),r||(r=Kv),this.services.backendConnector.reload(e,n,s=>{i.resolve(),r(s)}),i}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&P9.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let n=0;n<this.languages.length;n++){const r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}}changeLanguage(e,n){var r=this;this.isLanguageChangingTo=e;const i=Vp();this.emit("languageChanging",e);const s=l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},a=(l,c)=>{c?(s(c),this.translator.changeLanguage(c),this.isLanguageChangingTo=void 0,this.emit("languageChanged",c),this.logger.log("languageChanged",c)):this.isLanguageChangingTo=void 0,i.resolve(function(){return r.t(...arguments)}),n&&n(l,function(){return r.t(...arguments)})},o=l=>{!e&&!l&&this.services.languageDetector&&(l=[]);const c=typeof l=="string"?l:this.services.languageUtils.getBestMatchFromCodes(l);c&&(this.language||s(c),this.translator.language||this.translator.changeLanguage(c),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(c)),this.loadResources(c,u=>{a(u,c)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?o(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(o):this.services.languageDetector.detect(o):o(e),i}getFixedT(e,n,r){var i=this;const s=function(a,o){let l;if(typeof o!="object"){for(var c=arguments.length,u=new Array(c>2?c-2:0),d=2;d<c;d++)u[d-2]=arguments[d];l=i.options.overloadTranslationOptionHandler([a,o].concat(u))}else l={...o};l.lng=l.lng||s.lng,l.lngs=l.lngs||s.lngs,l.ns=l.ns||s.ns,l.keyPrefix=l.keyPrefix||r||s.keyPrefix;const f=i.options.keySeparator||".";let h;return l.keyPrefix&&Array.isArray(a)?h=a.map(g=>`${l.keyPrefix}${f}${g}`):h=l.keyPrefix?`${l.keyPrefix}${f}${a}`:a,i.t(h,l)};return typeof e=="string"?s.lng=e:s.lngs=e,s.ns=n,s.keyPrefix=r,s}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=n.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,s=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const a=(o,l)=>{const c=this.services.backendConnector.state[`${o}|${l}`];return c===-1||c===2};if(n.precheck){const o=n.precheck(this,a);if(o!==void 0)return o}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||a(r,e)&&(!i||a(s,e)))}loadNamespaces(e,n){const r=Vp();return this.options.ns?(typeof e=="string"&&(e=[e]),e.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{r.resolve(),n&&n(i)}),r):(n&&n(),Promise.resolve())}loadLanguages(e,n){const r=Vp();typeof e=="string"&&(e=[e]);const i=this.options.preload||[],s=e.filter(a=>i.indexOf(a)<0);return s.length?(this.options.preload=i.concat(s),this.loadResources(a=>{r.resolve(),n&&n(a)}),r):(n&&n(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=this.services&&this.services.languageUtils||new xL(SL());return n.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return new ym(e,n)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Kv;const r=e.forkResourceStore;r&&delete e.forkResourceStore;const i={...this.options,...e,isClone:!0},s=new ym(i);return(e.debug!==void 0||e.prefix!==void 0)&&(s.logger=s.logger.clone(e)),["store","services","language"].forEach(o=>{s[o]=this[o]}),s.services={...this.services},s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},r&&(s.store=new yL(this.store.data,i),s.services.resourceStore=s.store),s.translator=new q1(s.services,i),s.translator.on("*",function(o){for(var l=arguments.length,c=new Array(l>1?l-1:0),u=1;u<l;u++)c[u-1]=arguments[u];s.emit(o,...c)}),s.init(i,n),s.translator.options=i,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Rr=ym.createInstance();Rr.createInstance=ym.createInstance;Rr.createInstance;Rr.dir;Rr.init;Rr.loadResources;Rr.reloadResources;Rr.use;Rr.changeLanguage;Rr.getFixedT;Rr.t;Rr.exists;Rr.setDefaultNamespace;Rr.hasLoadedNamespace;Rr.loadNamespaces;Rr.loadLanguages;const R7e={id:"image",name:"Image"},O7e={id:"colorPalette",name:"Color Palette",opacity:{name:"Opacity"},brightness:{name:"Brightness"},grayScale:{name:"Gray Scale"},addColor:{name:"Add color"},clearColor:{name:`Remove color
(Press shift to change outline color)`}},A7e={id:"align",name:"Align",left:{name:"left"},center:{name:"center"},right:{name:"right"},top:{name:"top"},middle:{name:"middle"},bottom:{name:"bottom"}},P7e={id:"frame",name:"Frame",youtubeVideoThumbnail:{name:"Youtube Video Thumbnail",id:"youtubeVideoThumbnail",width:1280,height:760},youtubeChannelIcon:{name:"Youtube Channel Icon",id:"youtubeChannelIcon",width:800,height:800},youtubeChannelCover:{name:"Youtube Channel Cover",id:"youtubeChannelCover",width:2560,height:1440},instagramSquarePhoto:{name:"Instagram Square Photo",id:"instagramSquarePhoto",width:1080,height:1080},instagramProfile:{name:"Instagram Profile",id:"instagramProfile",width:110,height:110},instagramStory:{name:"Instagram Story",id:"instagramStory",width:1080,height:1920},A4:{name:"A4",id:"A4",width:2480,height:3508},sample_100X100:{name:"sample_100X100",id:"sample_100X100",width:100,height:100},sample_512X512:{name:"sample_512X512",id:"sample_512X512",width:512,height:512},facebookProfile:{name:"Facebook Profile",id:"facebookProfile",width:180,height:180},facebookCoverPhoto:{name:"Facebook Cover Photo",id:"facebookCoverPhoto",width:820,height:312},twitterProfile:{name:"Twitter Profile",id:"twitterProfile",width:400,height:400},twitterHeader:{name:"Twitter Header",id:"twitterHeader",width:1500,height:500},twitterPost:{name:"Twitter Post",id:"twitterPost",width:900,height:450},linkedInProfil:{name:"LinkedIn Profile",id:"linkedInProfil",width:400,height:400},linkedInCover:{name:"LinkedIn Cover",id:"linkedInCover",width:1584,height:396},pinterestBoardImage:{name:"Pinterest Board Image",id:"pinterestBoardImage",width:222,height:150},pinterestPinImage:{name:"Pinterest Pin Image",id:"pinterestPinImage",width:236,height:280},pinterestProfile:{name:"Pinterest Profile",id:"pinterestProfile",width:165,height:165},tumblrProfile:{name:"Tumblr Profile",id:"tumblrProfile",width:128,height:128},tumblrPostImage:{name:"Tumblr Post Image",id:"tumblrPostImage",width:500,height:750},androidAppIcon:{name:"Android App Icon",id:"androidAppIcon",width:512,height:512},androidFeatureGraphic:{name:"Android Feature Graphic",id:"androidFeatureGraphic",width:1024,height:500},androidHorizontal:{name:"Android Horizontal",id:"androidHorizontal",width:1920,height:1080},androidVertical:{name:"Android Vertical",id:"androidVertical",width:1080,height:1920},iosIPhoneVertical6_7:{name:"iOS iPhone Vertical (6.7 inch)",id:"iosIPhoneVertical6_7",width:1284,height:2778},iosIPhoneVertical6_5:{name:"iOS iPhone Vertical (6.5 inch)",id:"iosIPhoneVertical6_5",width:1284,height:2778},iosIPhoneVertical5_8:{name:"iOS iPhone Vertical (5.8 inch)",id:"iosIPhoneVertical5_8",width:1170,height:2532},iosIPhoneVertical5_5:{name:"iOS iPhone Vertical (5.5 inch)",id:"iosIPhoneVertical5_5",width:1242,height:2208},iosIPhoneVertical4_7:{name:"iOS iPhone Vertical (4.7 inch)",id:"iosIPhoneVertical4_7",width:750,height:1334},iosIPhoneVertical4:{name:"iOS iPhone Vertical (4 inch)",id:"iosIPhoneVertical4",width:640,height:1136},iosIPhoneVertical3_5:{name:"iOS iPhone Vertical (3.5 inch)",id:"iosIPhoneVertical3_5",width:640,height:960},iosIPadVertical12_9:{name:"iOS iPad Vertical (12.9 inch)",id:"iosIPadVertical12_9",width:2048,height:2732},iosIPadVertical11:{name:"iOS iPad Vertical (11 inch)",id:"iosIPadVertical11",width:1640,height:2360},iosIPadVertical10_5:{name:"iOS iPad Vertical (10.5 inch)",id:"iosIPadVertical10_5",width:1668,height:2224},iosIPadVertical9_7:{name:"iOS iPad Vertical (9.7 inch)",id:"iosIPadVertical9_7",width:1536,height:2048}},D7e={id:"shape",name:"Shape"},F7e={id:"text",name:"Text"},L7e={id:"icon",name:"Icon",search:{title:"Search Icon",placeholder:"Enter keyword",desc:"Type a keyword to find icon"}},M7e={image:R7e,colorPalette:O7e,align:A7e,frame:P7e,shape:D7e,text:F7e,icon:L7e,export:{id:"export",name:"Export","export-all-frame":{type:"export",id:"export-all-frame",name:"Export All Frame",icon:"download"},"export-selected":{type:"export",id:"export-selected",name:"Export Selected Frame",icon:"box-arrow-down"}}},B7e={name:"Move Backgroud",keys:["spacebar","click & move"],desc:""},z7e={name:"Reset Zoom",keys:["ctrl","0"],desc:""},j7e={name:"Zoom In",keys:["mouse wheel"],desc:""},V7e={name:"Zoom Out",keys:["mouse wheel"],desc:""},W7e={name:"Layer Up",keys:["shift","up"],desc:""},U7e={name:"Layer Down",keys:["shift","down"],desc:""},G7e={name:"Delete",keys:["backspace"],desc:""},H7e={name:"Duplicate",keys:["ctrl","d"],desc:""},q7e={name:"Copy Selected Items",keys:["ctrl","c"],desc:""},K7e={name:"Paste Selected Items",keys:["ctrl","v"],desc:""},X7e={name:"Select All Items",keys:["ctrl","a"],desc:""},Y7e={name:"Flip Horizontally",keys:["shift","h"],desc:""},Q7e={name:"Flip Vertically",keys:["shift","v"],desc:""},Z7e={id:"undo",name:"Undo",keys:["ctrl","z"],desc:""},J7e={id:"redo",name:"Redo",keys:["ctrl","y"],desc:""},eqe={moveBackground:B7e,resetZoom:z7e,zoomIn:j7e,zoomOut:V7e,layerUp:W7e,layerDown:U7e,deleteItems:G7e,duplicateItems:H7e,copyItems:q7e,pasteItems:K7e,selectAllItems:X7e,flipHorizontally:Y7e,flipVertically:Q7e,undo:Z7e,redo:J7e,"remove-background":{name:"Remove Background of Selected Image",keys:["ctrl","x","b"],desc:"Remove Background of Selected Image"}},tqe={widget:M7e,hotkey:eqe,workMode:BV.reduce((t,e)=>({...t,[e.id]:e}),{})},nqe={id:"image",name:"이미지"},rqe={id:"colorPalette",name:"색",opacity:{name:"투명도"},brightness:{name:"밝기"},grayScale:{name:"흑백"},addColor:{name:"색 추가"},clearColor:{name:`색 제거
(shift와 함께 클릭시 아웃라인 변경)`}},iqe={id:"align",name:"정렬",left:{name:"왼쪽"},center:{name:"수평 중앙"},right:{name:"오른쪽"},top:{name:"위"},middle:{name:"수직 중앙"},bottom:{name:"아래"}},sqe={id:"frame",name:"프레임",youtubeVideoThumbnail:{name:"유튜브 비디오 썸네일",id:"youtubeVideoThumbnail",width:1280,height:760},youtubeChannelIcon:{name:"유튜브 채널 아이콘",id:"youtubeChannelIcon",width:800,height:800},youtubeChannelCover:{name:"유튜브 채널 커버",id:"youtubeChannelCover",width:2560,height:1440},instagramSquarePhoto:{name:"인스타그램 포스트",id:"instagramSquarePhoto",width:1080,height:1080},instagramProfile:{name:"인스타그램 프로필",id:"instagramProfile",width:110,height:110},instagramStory:{name:"인스타그램 스토리",id:"instagramStory",width:1080,height:1920},A4:{name:"A4",id:"A4",width:2480,height:3508},sample_100X100:{name:"100픽셀 정사각형",id:"sample_100X100",width:100,height:100},sample_512X512:{name:"512픽셀 정사각형",id:"sample_512X512",width:512,height:512},facebookProfile:{name:"페이스북 프로필",id:"facebookProfile",width:180,height:180},facebookCoverPhoto:{name:"페이스북 커버",id:"facebookCoverPhoto",width:820,height:312},twitterProfile:{name:"트위터 프로필",id:"twitterProfile",width:400,height:400},twitterHeader:{name:"트위터 헤더",id:"twitterHeader",width:1500,height:500},twitterPost:{name:"트위터 포스트",id:"twitterPost",width:900,height:450},linkedInProfil:{name:"링크드인 프로필",id:"linkedInProfil",width:400,height:400},linkedInCover:{name:"링크드인 커버",id:"linkedInCover",width:1584,height:396},pinterestBoardImage:{name:"핀터레스트 보드",id:"pinterestBoardImage",width:222,height:150},pinterestPinImage:{name:"핀터레스트 핀",id:"pinterestPinImage",width:236,height:280},pinterestProfile:{name:"핀터레스트 프로필",id:"pinterestProfile",width:165,height:165},tumblrProfile:{name:"텀블러 프로필",id:"tumblrProfile",width:128,height:128},tumblrPostImage:{name:"텀블러 포스트",id:"tumblrPostImage",width:500,height:750},androidAppIcon:{name:"안드로이드 앱 아이콘",id:"androidAppIcon",width:512,height:512},androidFeatureGraphic:{name:"안드로이드 그래픽",id:"androidFeatureGraphic",width:1024,height:500},androidHorizontal:{name:"안드로이드 가로 스크린샷",id:"androidHorizontal",width:1920,height:1080},androidVertical:{name:"안드로이드 세로 스크린샷",id:"androidVertical",width:1080,height:1920},iosIPhoneVertical6_7:{name:"아이폰 세로 6.7인치",id:"iosIPhoneVertical6_7",width:1284,height:2778},iosIPhoneVertical6_5:{name:"아이폰 세로 6.5인치",id:"iosIPhoneVertical6_5",width:1284,height:2778},iosIPhoneVertical5_8:{name:"아이폰 세로 5.8인치",id:"iosIPhoneVertical5_8",width:1170,height:2532},iosIPhoneVertical5_5:{name:"아이폰 세로 5.5인치",id:"iosIPhoneVertical5_5",width:1242,height:2208},iosIPhoneVertical4_7:{name:"아이폰 세로 4.7인치",id:"iosIPhoneVertical4_7",width:750,height:1334},iosIPhoneVertical4:{name:"아이폰 세로 4인치",id:"iosIPhoneVertical4",width:640,height:1136},iosIPhoneVertical3_5:{name:"아이폰 세로 3.5인치",id:"iosIPhoneVertical3_5",width:640,height:960},iosIPadVertical12_9:{name:"아이폰 세로 12.9인치",id:"iosIPadVertical12_9",width:2048,height:2732},iosIPadVertical11:{name:"아이폰 세로 11인치",id:"iosIPadVertical11",width:1640,height:2360},iosIPadVertical10_5:{name:"아이폰 세로 10.5인치",id:"iosIPadVertical10_5",width:1668,height:2224},iosIPadVertical9_7:{name:"아이폰 세로 9.7인치",id:"iosIPadVertical9_7",width:1536,height:2048}},aqe={id:"shape",name:"도형"},oqe={id:"text",name:"글자"},lqe={id:"icon",name:"아이콘",search:{title:"아이콘 검색",placeholder:"키워드(영어)",desc:"키워드로 아이콘을 검색하세요"}},cqe={image:nqe,colorPalette:rqe,align:iqe,frame:sqe,shape:aqe,text:oqe,icon:lqe,export:{id:"export",name:"내보내기","export-all-frame":{type:"export",id:"export-all-frame",name:"모든 프레임 내보내기",icon:"download"},"export-selected":{type:"export",id:"export-selected",name:"선택한 프레임 내보내기",icon:"box-arrow-down"}}},uqe={name:"배경 움직이기",keys:["spacebar","click & move"],desc:""},dqe={name:"줌 초기화",keys:["ctrl","0"],desc:""},fqe={name:"화면 확대",keys:["mouse wheel"],desc:""},pqe={name:"화면 축소",keys:["mouse wheel"],desc:""},hqe={name:"레이어 올리기",keys:["shift","up"],desc:""},mqe={name:"레이어 내리기",keys:["shift","down"],desc:""},gqe={name:"선택한 아이템 삭제",keys:["backspace"],desc:""},yqe={name:"선택한 아이템 복제",keys:["ctrl","d"],desc:""},vqe={name:"선택한 아이템 복사",keys:["ctrl","c"],desc:""},xqe={name:"복사한 아이템 붙이기",keys:["ctrl","v"],desc:""},bqe={name:"모든 아이템 선택하기",keys:["ctrl","a"],desc:""},wqe={name:"선택한 아이템 수평 반전",keys:["shift","h"],desc:""},Sqe={name:"선택한 아이템 수직 반전",keys:["shift","v"],desc:""},kqe={id:"undo",name:"이전으로 되감기",keys:["ctrl","z"],desc:""},Cqe={id:"redo",name:"다시 앞으로 감기",keys:["ctrl","y"],desc:""},$qe={moveBackground:uqe,resetZoom:dqe,zoomIn:fqe,zoomOut:pqe,layerUp:hqe,layerDown:mqe,deleteItems:gqe,duplicateItems:yqe,copyItems:vqe,pasteItems:xqe,selectAllItems:bqe,flipHorizontally:wqe,flipVertically:Sqe,undo:kqe,redo:Cqe,"remove-background":{name:"선택한 이미지 배경제거",keys:["[왼쪽 버튼 중 사진 버튼 선택]"],desc:"선택한 이미지 배경제거"}},Eqe={id:"hotkey",name:"키보드 단축키",desc:"키보드 단축키",icon:"keyboard-fill"},Tqe={"select-all":{id:"select-all",name:"모든 아이템 선택하기",desc:"모든 아이템 선택하기",icon:"bounding-box"},"flip-horizontally":{id:"flip-horizontally",name:"선택한 아이템 수평 반전",desc:"선택한 아이템 수평 반전",icon:"arrow-left-right"},"flip-vertically":{id:"flip-vertically",name:"선택한 아이템 수직 반전",desc:"선택한 아이템 수평 반전",icon:"arrow-down-up"},"reset-zoom":{id:"reset-zoom",name:"화면 확대",desc:"화면 확대",icon:"arrows-fullscreen"},"zoom-in":{id:"zoom-in",name:"화면 확대",desc:"화면 확대",icon:"arrows-angle-expand"},"zoom-out":{id:"zoom-out",name:"화면 축소",desc:"화면 축소",icon:"arrows-angle-contract"},"layer-up":{id:"layer-up",name:"레이어 올리기",desc:"레이어 올리기",icon:"front"},"layer-down":{id:"layer-down",name:"레이어 내리기",desc:"레이어 내리기",icon:"back"},hotkey:Eqe},_qe={widget:cqe,hotkey:$qe,workMode:Tqe};Rr.use(Bie).init({resources:{en:tqe,ko:_qe},lng:window.navigator.language??"en",fallbackLng:"en",ns:["widget","hotkey","workMode"],interpolation:{escapeValue:!1}});const Iqe=o7e(),D9=document.getElementById("root");if(D9===null)throw Error("rootElement is null");const Nqe=xC.createRoot(D9);Nqe.render(z.jsx(X5,{store:Iqe,children:z.jsx(t7e,{})}))});export default Rqe();
